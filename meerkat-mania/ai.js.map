{"version":3,"sources":["webpack:///meerkat-mania/ai.js","webpack:///webpack/bootstrap c4a3f0a31a1ce92487dc","webpack:///./meerkat-mania/source/js/components/reveal/behavior.js","webpack:///./meerkat-mania/source/js/components/screen-basic/behavior.js","webpack:///./meerkat-mania/source/js/components/screen-quit/behavior.js","webpack:///./meerkat-mania/source/js/components/selectable-canvas/behavior.js","webpack:///./meerkat-mania/source/js/components/selectable/behavior.js","webpack:///./meerkat-mania/source/js/components/title/behavior.js","webpack:///./meerkat-mania/source/js/components/video/behavior.js","webpack:///./meerkat-mania/source/js/config.game.js","webpack:///./meerkat-mania/source/js/index.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","component","this","item","_id","vo","index","close","find","open","eq","screen","currentVO","audio","voiceOver","play","behavior","state","STATE","VOICE_OVER","demoMode","sfx","removeClass","playSound","_sound","delay","$sound","$","attr","type","currentSFX","bind","on","_event","is","target","rule","_e","response","config","OPEN","start","next","nextScreen","buttonSound","proto","util","resolvePath","leave","prev","prevScreen","entities","hasOwnProperty","startAudio","forEach","_entity","background","stop","stopAudio","kill","isReady","targetScope","off","properties","gameClass","addClass","requiredQueue","length","complete","button","LEAVE","ctx","window","AudioContext","webkitAudioContext","sure","setContext","pause","resume","init","okay","exit","cancel","SELECTOR","CORRECT","INCORRECT","buffer","bctx","items","document","createElement","getContext","ready","correct","$items","Queue","create","width","$els","height","map","_index","_node","$node","add","toArray","isImageTarget","_$image","_point","_offset","_scale","offset","pixel","clearRect","drawImage","left","top","getImageData","x","y","fillStyle","fillRect","data","cursor","scale","returnValue","transformScale","absolutePosition","event","zoom","dec","math","every","_$item","message","parent","behaviorTarget","deactivateAll","deactivate","getActive","unhighlightAll","unhighlight","getHighlighted","_target","$target","closest","shouldSelect","bg","video","stopBackground","playBackground","media","playing","isComplete","screenSelector","componentDirectory","dimensions","ratio","shouldLoadComponentStyles","videoScreen","setTimeout","bgSound","title","iosSplash","READY","splash","respond","Number","isInteger","highlight","selectableCanvas","activate","reveal","didClose","selectable","stateMethod","selectState","quit","flip","eventCategory","theEvent","Event","bubbles","cancelable","name","gameData","frameElement","dispatchEvent","join","ga","findOwn","scope","i","s","o","g","r","a","q","push","arguments","l","Date","getElementsByTagName","async","src","parentNode","insertBefore","loader","hasClass","ball","startGame","test","_env","location","href","domain"],"mappings":"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","file":"meerkat-mania/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(9);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t  this.item = function (_id) {\n\t    var vo, index;\n\t\n\t    this.close(this.find('li.OPEN'));\n\t\n\t    if (typeof _id === 'number') {\n\t      this.open(this.find('li').eq(_id));\n\t      this.screen.currentVO = this.audio.voiceOver[_id];\n\t      this.audio.voiceOver[_id].play();\n\t    } else if (typeof _id === 'string') {\n\t      if (this[_id]) {\n\t        this.open(this[_id]);\n\t\n\t        if (this.audio) {\n\t          index = this[_id].index();\n\t          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t          if (vo) {\n\t            this.screen.currentVO = vo;\n\t            vo.play();\n\t          }\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  this.behavior('closeAll', function () {\n\t    if (!this.screen.state(this.STATE.VOICE_OVER) || this.game.demoMode) {\n\t      if (this.game.audio.sfx.close) this.game.audio.sfx.close.play();\n\t      this.find('li.OPEN').removeClass('OPEN');\n\t      return true;\n\t    }\n\t    return false;\n\t  });\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t\n\t  this.playSound = function (_sound) {\n\t    var delay, $sound;\n\t\n\t    if (!_sound) return;\n\t\n\t    $sound = $(_sound);\n\t    delay = $sound.attr('pl-delay');\n\t    if (_sound.type === 'voiceOver') {\n\t      this.currentVO = _sound;\n\t    } else if (_sound.type === 'sfx') {\n\t      this.currentSFX = _sound;\n\t    }\n\t\n\t    if (delay) {\n\t      return this.delay(delay, _sound.play.bind(_sound));\n\t    } else {\n\t      return _sound.play();\n\t    }\n\t  };\n\t\n\t  this.on('ready', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    if (this.audio) {\n\t      this.audio.rule('.voiceOver', 'shouldPlay', function (_e) {\n\t        _e.response(!_e.target.config('dontautoplay'));\n\t      });\n\t    }\n\t\n\t    if (this.state(this.STATE.OPEN)) this.start();\n\t  });\n\t\n\t  this.next = function () {\n\t    var nextScreen, buttonSound;\n\t\n\t    nextScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (nextScreen) {\n\t      this.leave();\n\t      nextScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return nextScreen;\n\t  };\n\t\n\t  this.prev = function () {\n\t    var prevScreen, buttonSound;\n\t\n\t    prevScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (prevScreen) {\n\t      this.screen.close();\n\t      prevScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return prevScreen;\n\t  };\n\t\n\t  this.start = function () {\n\t    var entities = this.hasOwnProperty('entities') && this.entities;\n\t\n\t    if (this.audio) {\n\t      this.startAudio();\n\t      this.playSound(this.audio.sfx.start);\n\t    }\n\t\n\t    if (entities) {\n\t      entities.forEach(function (_entity) {\n\t        if (_entity.hasOwnProperty('start')) _entity.start();\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.startAudio = function () {\n\t    if (!this.audio) return;\n\t    this.audio.background.play();\n\t    this.playSound(this.audio.voiceOver);\n\t  };\n\t\n\t  this.stop = function () {\n\t    var entities = this.hasOwnProperty('entities') && this.entities;\n\t\n\t    this.stopAudio();\n\t    this.kill('delay');\n\t\n\t    if (entities) {\n\t      entities.forEach(function (_entity) {\n\t        if (_entity.hasOwnProperty('start')) _entity.stop();\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.stopAudio = function () {\n\t    if (!this.audio) return;\n\t    if (this.currentVO) this.currentVO.stop();\n\t    if (this.currentSFX) this.currentSFX.stop();\n\t  };\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.off('transitionend');\n\t      this.on('transitionend', (function () {\n\t        this.start();\n\t        this.off('transitionend');\n\t      }).bind(this));\n\t    }\n\t\n\t    if (this.properties.gameClass) {\n\t      this.game.addClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t      this.complete();\n\t    }\n\t  });\n\t\n\t  this.on('ui-leave ui-close', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this.is(_event.target)) {\n\t      this.stop();\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t  this.buttonSound = function () {\n\t    if (this.audio.sfx.button) this.audio.sfx.button.play();\n\t  };\n\t\n\t  // TODO: Make an automated way to handle this\n\t  this.on('transitionend', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    if (this.state(this.STATE.LEAVE)) {\n\t      this.addClass('LEAVE-END');\n\t    }\n\t  });\n\t\n\t  this.on('ready', function (_e) {\n\t    var ctx;\n\t\n\t    if (!this.is(_e.target)) return;\n\t\n\t    ctx = new (window.AudioContext || window.webkitAudioContext)();\n\t    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n\t    if (this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n\t  });\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n\t    this.buttonSound();\n\t    this.game.addClass('QUIT-SCREEN');\n\t    this.removeClass('LEAVE-END');\n\t    this.game.pause(true);\n\t  });\n\t\n\t  this.on('ui-leave', function () {\n\t    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.stop();\n\t    this.game.removeClass('QUIT-SCREEN');\n\t    this.game.resume();\n\t  });\n\t\n\t  this.init = function () {\n\t    this.addClass('LEAVE LEAVE-END');\n\t  };\n\t\n\t  this.okay = function () {\n\t    this.buttonSound();\n\t    this.game.exit();\n\t  };\n\t\n\t  this.cancel = function () {\n\t    this.buttonSound();\n\t    this.leave();\n\t  };\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-canvas', function () {\n\t\n\t  var SELECTOR;\n\t\n\t  SELECTOR = {\n\t    CORRECT: '[pl-correct]',\n\t    INCORRECT: '[pl-incorrect]'\n\t  };\n\t\n\t  this.buffer = null;\n\t  this.bctx = null;\n\t  this.items = null;\n\t\n\t  this.state('activate active', '+ACTIVE');\n\t\n\t  this.state('deactivate', '-ACTIVE');\n\t\n\t  this.init = function () {\n\t    this.buffer = document.createElement('canvas');\n\t    this.bctx = this.buffer.getContext('2d');\n\t  };\n\t\n\t  this.ready = function () {\n\t    var correct, $items;\n\t\n\t    correct = pl.Queue.create();\n\t\n\t    correct.on('complete', this.bind(function () {\n\t      this.complete();\n\t    }));\n\t\n\t    this.buffer.width = this.$els.width();\n\t    this.buffer.height = this.$els.height();\n\t\n\t    $items = this.find('li img');\n\t\n\t    this.items = $items.map(function (_index, _node) {\n\t      var $node;\n\t\n\t      $node = $(_node);\n\t\n\t      if ($node.is(SELECTOR.CORRECT)) correct.add(_index);\n\t\n\t      return $node;\n\t    }).toArray();\n\t\n\t    this.items.correct = correct;\n\t  };\n\t\n\t  this.isImageTarget = function (_$image, _point, _offset, _scale) {\n\t    var offset, pixel;\n\t\n\t    offset = _$image.offset();\n\t\n\t    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n\t    this.bctx.drawImage(_$image[0], offset.left / _scale - _offset[0], offset.top / _scale - _offset[1], _$image.width(), _$image.height());\n\t    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\t\n\t    this.bctx.fillStyle = 'white';\n\t    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\t\n\t    // opaque pixel\n\t    return pixel.data[3] > 0;\n\t  };\n\t\n\t  this.behavior('select', function () {\n\t    var offset,\n\t        cursor,\n\t        scale,\n\t        returnValue = false;\n\t\n\t    scale = this.game.transformScale().x;\n\t    offset = this.$els.absolutePosition().scale(1 / scale);\n\t    cursor = this.event.cursor.scale(1 / this.game.zoom).dec(offset).math('floor');\n\t\n\t    this.items.every(this.bind(function (_$item) {\n\t      if (this.isImageTarget(_$item, cursor, offset, scale)) {\n\t        returnValue = {\n\t          message: _$item.parent().index(),\n\t          behaviorTarget: _$item.parent()\n\t        };\n\t        return false;\n\t      }\n\t\n\t      return true;\n\t    }));\n\t\n\t    return returnValue;\n\t  });\n\t\n\t  this.deactivateAll = function () {\n\t    this.deactivate(this.getActive());\n\t  };\n\t\n\t  this.unhighlightAll = function () {\n\t    this.unhighlight(this.getHighlighted());\n\t  };\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t  this.behavior('select', function (_target) {\n\t    var $target;\n\t\n\t    if (this.event) {\n\t      $target = $(this.event.target).closest('li');\n\t\n\t      if (this.shouldSelect($target) !== false) {\n\t        return {\n\t          message: $target.index(),\n\t          behaviorTarget: $target\n\t        };\n\t      }\n\t    } else {\n\t      this.proto(_target);\n\t    }\n\t\n\t    return false;\n\t  });\n\t\n\t  this.shouldSelect = function () {\n\t    return !this.screen.state(this.screen.STATE.VOICE_OVER);\n\t  };\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('title', function () {\n\t\n\t  this.ready = function () {\n\t    this.open();\n\t    this.audio.background.play();\n\t    this.delay(1500, function () {\n\t      // this.image.addClass('animated '+this.image.attr('pl-animation'));\n\t      this.complete();\n\t    });\n\t  };\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('video', function () {\n\t  var bg;\n\t\n\t  this.start = function () {\n\t    this.video.on('ended', (function () {\n\t      this.complete();\n\t    }).bind(this));\n\t    this.stopBackground();\n\t    this.video[0].play();\n\t  };\n\t\n\t  this.stopBackground = function () {\n\t    if (!this.properties.playBackground && (bg = this.game.media.playing('.background'))) {\n\t      bg.stop('@ALL');\n\t    }\n\t  };\n\t\n\t  this.pause = function () {\n\t    this.video[0].pause();\n\t  };\n\t\n\t  this.resume = function () {\n\t    if (this.isComplete) return;\n\t    this.stopBackground();\n\t    this.video[0].play();\n\t  };\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t  screenSelector: '.screen',\n\t  componentDirectory: 'components/',\n\t  dimensions: {\n\t    width: 960,\n\t    ratio: 16 / 9\n\t  },\n\t  shouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(10);\n\t\n\tpl.game('meerkat-mania', function () {\n\t\n\t  var videoScreen = function videoScreen() {\n\t    this.on('ui-open', function () {\n\t      setTimeout((function () {\n\t        this.video.start();\n\t      }).bind(this), 250);\n\t    });\n\t\n\t    this.on('ui-close', function () {\n\t      this.video.pause();\n\t      if (this.game.bgSound) this.game.bgSound.play();\n\t    });\n\t  };\n\t\n\t  this.screen('title', function () {\n\t\n\t    this.on('ui-open', function (_event) {\n\t      if (this === _event.targetScope) {\n\t        this.title.start();\n\t      }\n\t    });\n\t\n\t    this.on('ready', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t\n\t      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t    });\n\t\n\t    this.startAudio = function () {\n\t      this.title.audio.background.play();\n\t      this.title.audio.voiceOver.play();\n\t    };\n\t\n\t    this.stopAudio = function () {\n\t      this.title.audio.voiceOver.stop('@ALL');\n\t    };\n\t  });\n\t\n\t  this.screen('roles', function () {\n\t\n\t    this.respond('select', function (_event) {\n\t      var index = _event.message;\n\t\n\t      if (Number.isInteger(index) && ~index) {\n\t        this.highlight(_event.behaviorTarget);\n\t        this.selectableCanvas.activate(_event.behaviorTarget);\n\t        this.reveal.item(index);\n\t        // if(this.audio.sfx.correct) this.audio.sfx.correct.play();\n\t      }\n\t    });\n\t\n\t    this.respond('closeAll', function (didClose) {\n\t      if (didClose) this.selectableCanvas.deactivateAll();\n\t    });\n\t\n\t    this.start = function () {\n\t      this.selectableCanvas.deactivateAll();\n\t      this.selectableCanvas.unhighlightAll();\n\t      this.reveal.item(6);\n\t    };\n\t  });\n\t\n\t  this.screen('video', videoScreen);\n\t  this.screen('video-2', videoScreen);\n\t\n\t  this.screen('feel', function () {\n\t\n\t    this.on('ui-open', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t\n\t      this.selectable.audio.voiceOver.on('ended', (function () {\n\t        this.complete();\n\t      }).bind(this.selectable));\n\t    });\n\t\n\t    this.on('ui-close ui-leave', function () {\n\t      this.selectable.audio.voiceOver.off('ended');\n\t    });\n\t\n\t    this.respond('select', function (_event) {\n\t      var index, stateMethod;\n\t\n\t      index = _event.message;\n\t      stateMethod = this.properties.selectState || 'select';\n\t\n\t      if (~index) {\n\t        this[stateMethod](_event.behaviorTarget);\n\t        this.audio.sfx.play('correct');\n\t        this.selectable.audio.voiceOver.play(index);\n\t      }\n\t    });\n\t  });\n\t\n\t  /**\n\t   * Adds Flip screen behavior to send game completion to GA.\n\t   */\n\t  this.screen('flip', function () {\n\t    this.next = function () {\n\t      this.game.quit.okay();\n\t    };\n\t\n\t    this.on('ui-open', function () {\n\t      this.delay('4.5s', function () {\n\t        if (this.audio.sfx.flip && this.state(this.STATE.OPEN)) this.audio.sfx.flip.play();\n\t      });\n\t    });\n\t\n\t    this.complete = function () {\n\t      var eventCategory;\n\t      var theEvent = new Event('game-event', { bubbles: true, cancelable: false });\n\t      theEvent.name = 'flip';\n\t      theEvent.gameData = { id: this.game.id() };\n\t      if (window.frameElement) window.frameElement.dispatchEvent(theEvent);\n\t      eventCategory = ['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')'].join(' ');\n\t      ga('send', 'event', eventCategory, 'complete');\n\t      return this.proto();\n\t    };\n\t  });\n\t\n\t  /**\n\t   * When the game exits submit a GA (Google Analytics) event.\n\t   * @override\n\t   */\n\t  this.exit = function () {\n\t    var screen, eventCategory;\n\t\n\t    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t    eventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t    ga('send', 'event', eventCategory, 'quit');\n\t\n\t    return this.proto();\n\t  };\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tif (this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\t\tthis.splash();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.splash = function () {\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tif (this.game.hasClass('iOS')) {\n\t\t\t\tthis.open();\n\t\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t\t} else {\n\t\t\t\tthis.game.title.open();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen = this.proto();\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tthis.game.audio.sfx.button.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.complete = function () {\n\t\t\tthis.game.audio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.startGame = function () {\n\t\t\tif (!this.hasClass('FINISHED')) return;\n\t\t\tthis.game.addClass('STARTED');\n\t\t\tthis.delay('2.5s', function () {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.on('animationend', function (_e) {\n\t\t\tif (!this.ball.is(_e.target)) return;\n\t\t\tthis.addClass('FINISHED');\n\t\t});\n\t});\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t(function test(_env) {\n\t\tif (window.parent === window) {\n\t\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t\t} else {\n\t\t\tdocument.domain = 'changemyworldnow.com';\n\t\t}\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** meerkat-mania/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c4a3f0a31a1ce92487dc\n **/","pl.game.component('reveal', function () {\n\n  this.item = function (_id) {\n    var vo, index;\n\n    this.close(this.find('li.OPEN'));\n\n    if (typeof _id === 'number') {\n      this.open(this.find('li').eq(_id));\n      this.screen.currentVO = this.audio.voiceOver[_id];\n      this.audio.voiceOver[_id].play();\n    } else if (typeof _id === 'string') {\n      if (this[_id]) {\n        this.open(this[_id]);\n\n        if (this.audio) {\n          index = this[_id].index();\n          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\n          if (vo) {\n            this.screen.currentVO = vo;\n            vo.play();\n          }\n        }\n      }\n    }\n  };\n\n  this.behavior('closeAll', function () {\n    if (!this.screen.state(this.STATE.VOICE_OVER) || this.game.demoMode) {\n      if (this.game.audio.sfx.close) this.game.audio.sfx.close.play();\n      this.find('li.OPEN').removeClass('OPEN');\n      return true;\n    }\n    return false;\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/reveal/behavior.js\n **/","pl.game.component('screen-basic', function () {\n\n  this.playSound = function (_sound) {\n    var delay, $sound;\n\n    if (!_sound) return;\n\n    $sound = $(_sound);\n    delay = $sound.attr('pl-delay');\n    if (_sound.type === 'voiceOver') {\n      this.currentVO = _sound;\n    } else if (_sound.type === 'sfx') {\n      this.currentSFX = _sound;\n    }\n\n    if (delay) {\n      return this.delay(delay, _sound.play.bind(_sound));\n    } else {\n      return _sound.play();\n    }\n  };\n\n  this.on('ready', function (_event) {\n    if (!this.is(_event.target)) return;\n    if (this.audio) {\n      this.audio.rule('.voiceOver', 'shouldPlay', function (_e) {\n        _e.response(!_e.target.config('dontautoplay'));\n      });\n    }\n\n    if (this.state(this.STATE.OPEN)) this.start();\n  });\n\n  this.next = function () {\n    var nextScreen, buttonSound;\n\n    nextScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (nextScreen) {\n      this.leave();\n      nextScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return nextScreen;\n  };\n\n  this.prev = function () {\n    var prevScreen, buttonSound;\n\n    prevScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (prevScreen) {\n      this.screen.close();\n      prevScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return prevScreen;\n  };\n\n  this.start = function () {\n    var entities = this.hasOwnProperty('entities') && this.entities;\n\n    if (this.audio) {\n      this.startAudio();\n      this.playSound(this.audio.sfx.start);\n    }\n\n    if (entities) {\n      entities.forEach(function (_entity) {\n        if (_entity.hasOwnProperty('start')) _entity.start();\n      });\n    }\n\n    return this;\n  };\n\n  this.startAudio = function () {\n    if (!this.audio) return;\n    this.audio.background.play();\n    this.playSound(this.audio.voiceOver);\n  };\n\n  this.stop = function () {\n    var entities = this.hasOwnProperty('entities') && this.entities;\n\n    this.stopAudio();\n    this.kill('delay');\n\n    if (entities) {\n      entities.forEach(function (_entity) {\n        if (_entity.hasOwnProperty('start')) _entity.stop();\n      });\n    }\n\n    return this;\n  };\n\n  this.stopAudio = function () {\n    if (!this.audio) return;\n    if (this.currentVO) this.currentVO.stop();\n    if (this.currentSFX) this.currentSFX.stop();\n  };\n\n  this.on('ui-open', function (_event) {\n    if (this.isReady && this === _event.targetScope) {\n      this.off('transitionend');\n      this.on('transitionend', function () {\n        this.start();\n        this.off('transitionend');\n      }.bind(this));\n    }\n\n    if (this.properties.gameClass) {\n      this.game.addClass(this.properties.gameClass);\n    }\n\n    if (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n      this.complete();\n    }\n  });\n\n  this.on('ui-leave ui-close', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this.is(_event.target)) {\n      this.stop();\n    }\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n  this.buttonSound = function () {\n    if (this.audio.sfx.button) this.audio.sfx.button.play();\n  };\n\n  // TODO: Make an automated way to handle this\n  this.on('transitionend', function (_event) {\n    if (!this.is(_event.target)) return;\n    if (this.state(this.STATE.LEAVE)) {\n      this.addClass('LEAVE-END');\n    }\n  });\n\n  this.on('ready', function (_e) {\n    var ctx;\n\n    if (!this.is(_e.target)) return;\n\n    ctx = new (window.AudioContext || window.webkitAudioContext);\n    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n    if (this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n  });\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.target)) return;\n    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n    this.buttonSound();\n    this.game.addClass('QUIT-SCREEN');\n    this.removeClass('LEAVE-END');\n    this.game.pause(true);\n  });\n\n  this.on('ui-leave', function () {\n    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.stop();\n    this.game.removeClass('QUIT-SCREEN');\n    this.game.resume();\n  });\n\n  this.init = function () {\n    this.addClass('LEAVE LEAVE-END');\n  };\n\n  this.okay = function () {\n    this.buttonSound();\n    this.game.exit();\n  };\n\n  this.cancel = function () {\n    this.buttonSound();\n    this.leave();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('selectable-canvas', function () {\n\n  var SELECTOR;\n\n  SELECTOR = {\n    CORRECT: '[pl-correct]',\n    INCORRECT: '[pl-incorrect]'\n  };\n\n  this.buffer = null;\n  this.bctx = null;\n  this.items = null;\n\n  this.state('activate active', '+ACTIVE');\n\n  this.state('deactivate', '-ACTIVE');\n\n  this.init = function () {\n    this.buffer = document.createElement('canvas');\n    this.bctx = this.buffer.getContext('2d');\n  };\n\n  this.ready = function () {\n    var correct, $items;\n\n    correct = pl.Queue.create();\n\n    correct.on('complete', this.bind(function () {\n      this.complete();\n    }));\n\n    this.buffer.width = this.$els.width();\n    this.buffer.height = this.$els.height();\n\n    $items = this.find('li img');\n\n    this.items = $items\n      .map(function (_index, _node) {\n        var $node;\n\n        $node = $(_node);\n\n        if ($node.is(SELECTOR.CORRECT)) correct.add(_index);\n\n        return $node;\n      })\n      .toArray();\n\n    this.items.correct = correct;\n  };\n\n  this.isImageTarget = function (_$image, _point, _offset, _scale) {\n    var offset, pixel;\n\n    offset = _$image.offset();\n\n    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n    this.bctx.drawImage(_$image[0], offset.left / _scale - _offset[0], offset.top / _scale - _offset[1], _$image.width(), _$image.height());\n    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\n    this.bctx.fillStyle = 'white';\n    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\n    // opaque pixel\n    return pixel.data[3] > 0;\n  };\n\n  this.behavior('select', function () {\n    var offset, cursor, scale, returnValue = false;\n\n    scale = this.game.transformScale().x;\n    offset = this.$els.absolutePosition().scale(1 / scale);\n    cursor = this.event.cursor\n      .scale(1 / this.game.zoom)\n      .dec(offset)\n      .math('floor');\n\n    this.items.every(this.bind(function (_$item) {\n      if (this.isImageTarget(_$item, cursor, offset, scale)) {\n        returnValue = {\n          message: _$item.parent().index(),\n          behaviorTarget: _$item.parent()\n        };\n        return false;\n      }\n\n      return true;\n    }));\n\n    return returnValue;\n  });\n\n  this.deactivateAll = function () {\n    this.deactivate(this.getActive());\n  };\n\n  this.unhighlightAll = function () {\n    this.unhighlight(this.getHighlighted());\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/selectable-canvas/behavior.js\n **/","pl.game.component('selectable', function () {\n\n  this.behavior('select', function (_target) {\n    var $target;\n\n    if (this.event) {\n      $target = $(this.event.target).closest('li');\n\n      if (this.shouldSelect($target) !== false) {\n        return {\n          message: $target.index(),\n          behaviorTarget: $target\n        };\n      }\n    } else {\n      this.proto(_target);\n    }\n\n    return false;\n  });\n\n  this.shouldSelect = function () {\n    return !this.screen.state(this.screen.STATE.VOICE_OVER);\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/selectable/behavior.js\n **/","pl.game.component('title', function () {\n\n  this.ready = function () {\n    this.open();\n    this.audio.background.play();\n    this.delay(1500, function () {\n      // this.image.addClass('animated '+this.image.attr('pl-animation'));\n      this.complete();\n    });\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/title/behavior.js\n **/","pl.game.component('video', function () {\n  var bg;\n\n  this.start = function () {\n    this.video.on('ended', function () {\n      this.complete();\n    }.bind(this));\n    this.stopBackground();\n    this.video[0].play();\n  };\n\n  this.stopBackground = function () {\n    if (!this.properties.playBackground && (bg = this.game.media.playing('.background'))) {\n      bg.stop('@ALL');\n    }\n  };\n\n  this.pause = function () {\n    this.video[0].pause();\n  };\n\n  this.resume = function () {\n    if (this.isComplete) return;\n    this.stopBackground();\n    this.video[0].play();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/components/video/behavior.js\n **/","pl.game.config({\n  screenSelector: '.screen',\n  componentDirectory: 'components/',\n  dimensions: {\n    width: 960,\n    ratio: 16 / 9\n  },\n  shouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\nimport '../../../shared/js/screen-ios-splash';\nimport './components/reveal/behavior';\nimport './components/screen-basic/behavior';\nimport './components/screen-quit/behavior';\nimport './components/selectable-canvas/behavior';\nimport './components/selectable/behavior';\nimport './components/title/behavior';\nimport './components/video/behavior';\n\nimport '../../../shared/js/test-platform-integration';\nimport '../../../shared/js/google-analytics';\n\npl.game('meerkat-mania', function () {\n\n  var videoScreen = function () {\n    this.on('ui-open', function () {\n      setTimeout(function () {\n        this.video.start();\n      }.bind(this), 250);\n    });\n\n    this.on('ui-close', function () {\n      this.video.pause();\n      if (this.game.bgSound) this.game.bgSound.play();\n    });\n  };\n\n  this.screen('title', function () {\n\n    this.on('ui-open', function (_event) {\n      if (this === _event.targetScope) {\n        this.title.start();\n      }\n    });\n\n    this.on('ready', function (_event) {\n      if (!this.is(_event.target)) return;\n\n      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n    });\n\n    this.startAudio = function () {\n      this.title.audio.background.play();\n      this.title.audio.voiceOver.play();\n    };\n\n    this.stopAudio = function () {\n      this.title.audio.voiceOver.stop('@ALL');\n    };\n\n  });\n\n  this.screen('roles', function () {\n\n    this.respond('select', function (_event) {\n      var index = _event.message;\n\n      if (Number.isInteger(index) && ~index) {\n        this.highlight(_event.behaviorTarget);\n        this.selectableCanvas.activate(_event.behaviorTarget);\n        this.reveal.item(index);\n        // if(this.audio.sfx.correct) this.audio.sfx.correct.play();\n      }\n    });\n\n    this.respond('closeAll', function (didClose) {\n      if (didClose) this.selectableCanvas.deactivateAll();\n    });\n\n    this.start = function () {\n      this.selectableCanvas.deactivateAll();\n      this.selectableCanvas.unhighlightAll();\n      this.reveal.item(6);\n    };\n  });\n\n  this.screen('video', videoScreen);\n  this.screen('video-2', videoScreen);\n\n  this.screen('feel', function () {\n\n    this.on('ui-open', function (_event) {\n      if (!this.is(_event.target)) return;\n\n      this.selectable.audio.voiceOver.on('ended', function () {\n        this.complete();\n      }.bind(this.selectable));\n    });\n\n    this.on('ui-close ui-leave', function () {\n      this.selectable.audio.voiceOver.off('ended');\n    });\n\n    this.respond('select', function (_event) {\n      var index, stateMethod;\n\n      index = _event.message;\n      stateMethod = this.properties.selectState || 'select';\n\n      if (~index) {\n        this[stateMethod](_event.behaviorTarget);\n        this.audio.sfx.play('correct');\n        this.selectable.audio.voiceOver.play(index);\n      }\n    });\n  });\n\n  /**\n   * Adds Flip screen behavior to send game completion to GA.\n   */\n  this.screen('flip', function () {\n    this.next = function () {\n      this.game.quit.okay();\n    };\n\n    this.on('ui-open', function () {\n      this.delay('4.5s', function () {\n        if (this.audio.sfx.flip && this.state(this.STATE.OPEN)) this.audio.sfx.flip.play();\n      });\n    });\n\n    this.complete = function () {\n      var eventCategory;\n      var theEvent = new Event('game-event', {bubbles: true, cancelable: false});\n      theEvent.name = 'flip';\n      theEvent.gameData = {id: this.game.id()};\n      if (window.frameElement) window.frameElement.dispatchEvent(theEvent);\n      eventCategory = (['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')']).join(' ');\n      ga('send', 'event', eventCategory, 'complete');\n      return this.proto();\n    };\n  });\n\n  /**\n   * When the game exits submit a GA (Google Analytics) event.\n   * @override\n   */\n  this.exit = function () {\n    var screen, eventCategory;\n\n    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n    eventCategory = (['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')']).join(' ');\n\n    ga('send', 'event', eventCategory, 'quit');\n\n    return this.proto();\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./meerkat-mania/source/js/index.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n\tthis.on('ready', function (_e) {\n\t\tif(!this.is(_e.target)) return;\n\n\t\tif(this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\tthis.splash();\n\t\t}\n\t});\n\n\tthis.splash = function() {\n\t\tthis.close(this.game.loader);\n\n\t\tif(this.game.hasClass('iOS')) {\n\t\t\tthis.open();\n\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t} else {\n\t\t\tthis.game.title.open();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen = this.proto();\n\n\t\tif (nextScreen) {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t\tthis.game.audio.sfx.button.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.complete = function () {\n\t\tthis.game.audio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.startGame = function() {\n\t\tif(!this.hasClass('FINISHED')) return;\n\t\tthis.game.addClass('STARTED');\n\t\tthis.delay('2.5s', function() {\n\t\t\tthis.next();\n\t\t});\n\t};\n\n\tthis.on('animationend', function(_e) {\n\t\tif(!this.ball.is(_e.target)) return;\n\t\tthis.addClass('FINISHED');\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test (_env) {\n\tif (window.parent === window) {\n\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t} else {\n\t\tdocument.domain = 'changemyworldnow.com';\n\t}\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}