!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="/build/",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(9)},function(module,exports){pl.game.component("reveal",function(){this.item=function(_id){var vo,index;this.close(this.find("li.OPEN")),"number"==typeof _id?(this.open(this.find("li").eq(_id)),this.screen.currentVO=this.audio.voiceOver[_id],this.audio.voiceOver[_id].play()):"string"==typeof _id&&this[_id]&&(this.open(this[_id]),this.audio&&(index=this[_id].index(),vo=this.audio.voiceOver[_id]||this.audio.voiceOver[index],vo&&(this.screen.currentVO=vo,vo.play())))},this.behavior("closeAll",function(){return!this.screen.state(this.STATE.VOICE_OVER)||this.game.demoMode?(this.game.audio.sfx.close&&this.game.audio.sfx.close.play(),this.find("li.OPEN").removeClass("OPEN"),!0):!1})})},function(module,exports){pl.game.component("screen-basic",function(){this.playSound=function(_sound){var delay,$sound;if(_sound)return $sound=$(_sound),delay=$sound.attr("pl-delay"),"voiceOver"===_sound.type?this.currentVO=_sound:"sfx"===_sound.type&&(this.currentSFX=_sound),delay?this.delay(delay,_sound.play.bind(_sound)):_sound.play()},this.on("ready",function(_event){this.audio&&this.audio.rule(".voiceOver","shouldPlay",function(_event){_event.response(!_event.target.config("dontautoplay"))}),this.state(this.STATE.OPEN)&&this.start()}),this.next=function(){var nextScreen,buttonSound;return nextScreen=this.proto(),buttonSound=pl.util.resolvePath(this,"game.audio.sfx.button"),nextScreen&&(this.leave(),nextScreen.open(),buttonSound&&buttonSound.play()),nextScreen},this.prev=function(){var prevScreen,buttonSound;return prevScreen=this.proto(),buttonSound=pl.util.resolvePath(this,"game.audio.sfx.button"),prevScreen&&(this.screen.close(),prevScreen.open(),buttonSound&&buttonSound.play()),prevScreen},this.start=function(){var entities=this.hasOwnProperty("entities")&&this.entities;return this.audio&&(this.startAudio(),this.playSound(this.audio.sfx.start)),entities&&entities.forEach(function(_entity){_entity.hasOwnProperty("start")&&_entity.start()}),this},this.startAudio=function(){this.audio&&(this.audio.background.play(),this.playSound(this.audio.voiceOver))},this.stop=function(){var entities=this.hasOwnProperty("entities")&&this.entities;return this.stopAudio(),this.kill("delay"),entities&&entities.forEach(function(_entity){_entity.hasOwnProperty("start")&&_entity.stop()}),this},this.stopAudio=function(){this.audio&&(this.currentVO&&this.currentVO.stop(),this.currentSFX&&this.currentSFX.stop())},this.on("ui-open",function(_event){this.isReady&&this===_event.targetScope&&this.on("transitionend",function(){this.start(),this.off("transitionend")}.bind(this)),this.properties.gameClass&&this.game.addClass(this.properties.gameClass),(!this.requiredQueue||this.hasOwnProperty("requiredQueue")&&!this.requiredQueue.length)&&this.complete()}),this.on("ui-leave",function(_event){this.properties.gameClass&&this.game.removeClass(this.properties.gameClass),this.isReady&&this===_event.targetScope&&this.stop()}),this.on("ui-close",function(_event){this.properties.gameClass&&this.game.removeClass(this.properties.gameClass),this.isReady&&this===_event.targetScope&&this.stop()})})},function(module,exports){pl.game.component("screen-quit",function(){this.buttonSound=function(){this.game.audio.sfx.button&&this.game.audio.sfx.button.play()},this.on("transitionend",function(_event){this.state(this.STATE.LEAVE)&&this.addClass("LEAVE-END")}),this.on("ui-open",function(_event){this.buttonSound(),this.game.addClass("QUIT-SCREEN"),this.removeClass("LEAVE-END"),this.game.pause(!0)}),this.on("ui-leave",function(){this.game.removeClass("QUIT-SCREEN"),this.game.resume()}),this.init=function(){this.addClass("LEAVE LEAVE-END")},this.okay=function(){this.buttonSound(),this.game.exit()},this.cancel=function(){this.buttonSound(),this.leave()}})},function(module,exports){pl.game.component("selectable-canvas",function(){var SELECTOR;SELECTOR={CORRECT:"[pl-correct]",INCORRECT:"[pl-incorrect]"},this.buffer=null,this.bctx=null,this.items=null,this.state("activate active","+ACTIVE"),this.state("deactivate","-ACTIVE"),this.init=function(){this.buffer=document.createElement("canvas"),this.bctx=this.buffer.getContext("2d")},this.ready=function(){var correct,$items;correct=pl.Queue.create(),correct.on("complete",this.bind(function(){this.complete()})),this.buffer.width=this.$els.width(),this.buffer.height=this.$els.height(),$items=this.find("li img"),this.items=$items.map(function(_index,_node){var $node;return $node=$(_node),$node.is(SELECTOR.CORRECT)&&correct.add(_index),$node}).toArray(),this.items.correct=correct},this.isImageTarget=function(_$image,_point,_offset,_scale){var offset=_$image.offset();return this.bctx.clearRect(0,0,this.buffer.width,this.buffer.height),this.bctx.drawImage(_$image[0],offset.left/_scale-_offset[0],offset.top/_scale-_offset[1],_$image.width(),_$image.height()),pixel=this.bctx.getImageData(_point.x,_point.y,1,1),this.bctx.fillStyle="white",this.bctx.fillRect(_point.x,_point.y,5,5),pixel.data[3]>0},this.behavior("select",function(_cursor){var offset,cursor,scale,returnValue=!1;return scale=this.game.transformScale().x,offset=this.$els.absolutePosition().scale(1/scale),cursor=this.event.cursor.scale(1/this.game.zoom).dec(offset).math("floor"),this.items.every(this.bind(function(_$item){return this.isImageTarget(_$item,cursor,offset,scale)?(returnValue={message:_$item.parent().index(),behaviorTarget:_$item.parent()},!1):!0})),returnValue}),this.deactivateAll=function(){this.deactivate(this.getActive())},this.unhighlightAll=function(){this.unhighlight(this.getHighlighted())}})},function(module,exports){pl.game.component("selectable",function(){this.behavior("select",function(_target){var $target;if(this.event){if($target=$(this.event.target).closest("li"),this.shouldSelect($target)!==!1)return{message:$target.index(),behaviorTarget:$target}}else this.proto(_target);return!1}),this.shouldSelect=function(_target){return!this.screen.state(this.screen.STATE.VOICE_OVER)}})},function(module,exports){pl.game.component("title",function(){this.ready=function(){this.open(),this.audio.background.play(),this.delay(1500,function(){this.complete()})}})},function(module,exports){pl.game.component("video",function(){this.start=function(){this.video.on("ended",function(){this.screen.complete()}.bind(this)),this.game.bgSound&&this.game.bgSound.pause(),this.video[0].play()},this.pause=function(){this.video[0].pause()},this.resume=function(){this.isComplete||this.video[0].play()}})},function(module,exports){pl.game.config({screenSelector:".screen",componentDirectory:"components/",dimensions:{width:960,ratio:16/9},shouldLoadComponentStyles:!1})},function(module,exports,__webpack_require__){__webpack_require__(11),__webpack_require__(8),__webpack_require__(10),__webpack_require__(2),__webpack_require__(3),__webpack_require__(6),__webpack_require__(5),__webpack_require__(4),__webpack_require__(1),__webpack_require__(7),pl.game("meerkat-mania",function(){this.screen("title",function(){this.on("ui-open",function(_event){this===_event.targetScope&&this.title.start()}),this.on("ready",function(_event){this.is(_event.target)&&this.game.iosSplash.state(this.STATE.READY)&&this.game.iosSplash.splash()}),this.startAudio=function(){this.title.audio.background.play(),this.title.audio.voiceOver.play()},this.stopAudio=function(){this.title.audio.voiceOver.stop("@ALL")}}),this.screen("roles",function(){this.respond("select",function(_event){var index=_event.message;Number.isInteger(index)&&~index&&(this.highlight(_event.behaviorTarget),this.selectableCanvas.activate(_event.behaviorTarget),this.reveal.item(index))}),this.respond("closeAll",function(didClose){didClose&&this.selectableCanvas.deactivateAll()}),this.entity("selectable-canvas",function(){this.start=function(){this.ready(),this.deactivateAll(),this.unhighlightAll(),this.reveal.item(6)}})}),this.screen("video",function(){this.on("ui-open",function(){setTimeout(function(){this.video.start()}.bind(this),250)}),this.on("ui-close",function(){this.video.pause(),this.game.bgSound&&this.game.bgSound.play()})}),this.screen("feel",function(){this.on("ready",function(_event){this.is(_event.target)&&this.selectable.audio.voiceOver.on("ended",function(_ended){this.complete()}.bind(this.selectable))}),this.respond("select",function(_event){var index,stateMethod;index=_event.message,stateMethod=this.properties.selectState||"select",~index&&(this[stateMethod](_event.behaviorTarget),this.audio.sfx.play("correct"),this.selectable.audio.voiceOver.play(index))})}),this.screen("flip",function(){this.next=function(){this.game.quit.okay()},this.on("ui-open",function(){this.delay("4.5s",function(){this.audio.sfx.flip&&this.state(this.STATE.OPEN)&&this.audio.sfx.flip.play()})}),this.complete=function(_event){var eventCategory=["game",this.game.id(),this.id()+"("+(this.index()+1)+")"].join(" ");return ga("send","event",eventCategory,"complete"),this.proto()}}),this.exit=function(){var screen,eventCategory;return screen=this.findOwn(pl.game.config("screenSelector")+".OPEN:not(#quit)").scope(),eventCategory=["game",this.id(),screen.id()+"("+(screen.index()+1)+")"].join(" "),ga("send","event",eventCategory,"quit"),this.proto()}})},function(module,exports){pl.game.component("screen-ios-splash",function(){this.on("ready",function(_e){this.is(_e.target)&&this.game&&this.game.title.state(this.STATE.READY)&&this.splash()}),this.splash=function(){this.close(this.game.loader),this.game.hasClass("iOS")?(this.open(),this.ball.delay(0,this.ball.open)):this.game.title.open()},this.next=function(){var nextScreen=this.proto();return nextScreen&&(this.screen.leave(),nextScreen.open(),this.game.audio.sfx.button.play()),nextScreen},this.complete=function(){return this.game.audio.sfx.play("screenComplete"),this.proto()},this.startGame=function(){this.hasClass("FINISHED")&&(this.game.addClass("STARTED"),this.delay("2.5s",function(){this.next()}))},this.on("animationend",function(_e){this.ball.is(_e.target)&&this.addClass("FINISHED")})})},function(module,exports){!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="/build/",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){function run(){_play2["default"].game.run()}var _interopRequireDefault=__webpack_require__(2)["default"];__webpack_require__(4);var _play=__webpack_require__(23),_play2=_interopRequireDefault(_play);window.play=window.pl=_play2["default"],document.addEventListener("DOMContentLoaded",run,!1)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}}},function(module,exports,__webpack_require__){var _Array$forEach=__webpack_require__(5)["default"],_interopRequireDefault=__webpack_require__(2)["default"],_typesDimensions=__webpack_require__(14),_libMatrix=__webpack_require__(22),_libMatrix2=_interopRequireDefault(_libMatrix);(function(){var original;original={position:this.position},this.scope=function(){var result;return result=[],this.each(function(){var $node,scope;$node=$(this),scope=$node.data("pl-scope"),scope||(scope=$node.closest(".pl-scope").data("pl-scope")),scope&&result.push(scope)}),result.length>1?result:result[0]},this.id=function(_set){return void 0!==_set?(~["",null].indexOf(_set)&&this.attr("id",null),$("#"+_set).length?this.attr("pl-id",_set):this.attr("id",_set),this):this.attr("id")||this.attr("pl-id")||this.attr("pl-component")},this.address=function(){var tag,id,classes;return tag=this[0].nodeName.toLowerCase(),id=this.attr("id"),classes=this.attr("class")?"."+this.attr("class").split(" ").join("."):"",tag+(id?"#"+id:"")+classes},this.state=function(_test){var classes;return _test?this.hasClass(_test.toUpperCase()):(classes=(this.attr("class")||"").match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g),classes&&(1===classes.length?classes[0]:classes))},this.size=function(){var size;return arguments.length?(size=_typesDimensions.Size.create(arguments),this.css(size)):size=_typesDimensions.Size.create().set(this.width(),this.height()),size},this.position=function(){var pos;return arguments.length?(pos=_typesDimensions.Point.create(arguments),this.css({position:"relative",left:pos.x,top:pos.y})):(pos=original.position.call(this),pos=_typesDimensions.Point.create().set(pos.left,pos.top)),pos},this.absolutePosition=function(){var offset;return arguments.length?(offset=_typesDimensions.Point.create(arguments),this.css({position:"absolute",top:offset.y,left:offset.x}),offset):(offset=this.offset(),_typesDimensions.Point.create().set(offset.left,offset.top))},this.transform=function(){var t,matrix,is3d;return matrix=new _libMatrix2["default"],arguments.length?(matrix.setTransform.apply(matrix,arguments),this.css("transform",matrix.toCSS()),matrix):(t=this.css("transform"),is3d=!!~t.indexOf("matrix3d"),"none"!==t?(t=((t.match(/\(([,\d\.\s\-]+)\)/)||[])[1]||"").split(/\s*,\s*/),is3d&&(t=function(_matrix){var i,result;for(result=[],i=0;i<_matrix.length;i+=4)result=result.concat(_matrix.slice(i,i+2));return result}(t)),t=t.map(parseFloat),matrix.setTransform.apply(matrix,t),matrix):t)},this.transformPosition=function(){var matrix,point;return matrix=this.transform(),point=_typesDimensions.Point.create().set(0,0),arguments.length?("none"===matrix&&(matrix=new _libMatrix2["default"]),point.set.apply(point,arguments),matrix.translate(point.x,point.y),this.css("transform",matrix.toCSS())):"none"!==matrix&&point.set(matrix.e,matrix.f),point},this.transformScale=function(){var matrix,scale;return matrix=this.transform(),scale=_typesDimensions.Point.create().set(1,1),arguments.length?("none"===matrix&&(matrix=new _libMatrix2["default"]),scale.set.apply(scale,arguments),matrix.scale(scale.x,scale.y),this.css("transform",matrix.toCSS())):"none"!==matrix&&scale.set(matrix.a,matrix.d),scale},this.pl=function(_name,_value){var args,result;return _name?(args=["pl-"+_name],"undefined"!=typeof _value&&args.push(_value),null===_value?(this.removeAttr("pl-"+_name),this):this.attr.apply(this,args)):(result={},this.each(function(){_Array$forEach(this.attributes,function(_attr){0===_attr.name.indexOf("pl-")&&(result[_attr.name.slice(3)]=_attr.value)})}),result)},this.exec=function(_method,_args){return this.map(function(){return"function"==typeof this[_method]?this[_method].apply(this,_args):void 0}).toArray()}}).call($.fn)},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(6),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(7),module.exports=__webpack_require__(11).Array.forEach},function(module,exports,__webpack_require__){var $=__webpack_require__(8),$export=__webpack_require__(9),$ctx=__webpack_require__(12),$Array=__webpack_require__(11).Array||Array,statics={},setStatics=function(keys,length){$.each.call(keys.split(","),function(key){void 0==length&&key in $Array?statics[key]=$Array[key]:key in[]&&(statics[key]=$ctx(Function.call,[][key],length))})};setStatics("pop,reverse,shift,keys,values,entries",1),setStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),setStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),$export($export.S,"Array",statics)},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),core=__webpack_require__(11),ctx=__webpack_require__(12),PROTOTYPE="prototype",$export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE],key,own,out;IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&key in target,own&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};return F[PROTOTYPE]=C[PROTOTYPE],F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"1.2.6"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(13);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){var _Object$defineProperties=__webpack_require__(15)["default"],_interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _typesBasicArray=__webpack_require__(17),_typesBasicArray2=_interopRequireDefault(_typesBasicArray),Dimension,Size,Point;Array.prototype.to=function(_Thing){var map;return map={point:Point,size:Size},"string"==typeof _Thing?map[_Thing.toLowerCase()].create().set(this):"object"==typeof _Thing&&~[Point.set,Size.set].indexOf(_Thing.set)&&!_Thing.isPrototypeOf(this)?_Thing.set.apply(_Thing.create(),this):this},Dimension=_typesBasicArray2["default"].extend(function(){var originalMap;originalMap=this.map,this[0]=this[1]=0,this.planeMap=null,this.length=2,this.create=function(_argumentsArray){var instance;return instance=this.proto(),_argumentsArray&&instance.set.apply(instance,_argumentsArray),instance},this.inc=function(_val,_plane2){var a,b;return 2===_val.length?(a=_val[0],b=_val[1]):null!=_plane2?(a=_val,b=_plane2):a=b=_val,this.create().set(this[0]+a,this[1]+b)},this.dec=function(_val,_plane2){var a,b;return 2===_val.length?(a=_val[0],b=_val[1]):null!=_plane2?(a=_val,b=_plane2):a=b=_val,this.create().set(this[0]-a,this[1]-b)},this.scale=function(_scale,_plane2){return this.create().set(this[0]*_scale,this[1]*(null!=_plane2?_plane2:_scale))},this.math=function(_fun){var args=[].slice.call(arguments,1);return this.create().set(Math[_fun].apply(Math,[this[0]].concat(args)),Math[_fun].apply(Math,[this[1]].concat(args)))},this.parseInt=function(){return this.create().set(parseInt(this[0]),parseInt(this[1]))},this.parseFloat=function(){return this.create().set(parseFloat(this[0]),parseFloat(this[1]))},this.planeOf=function(_index){return isNaN(parseInt(_index))?null:this.planeMap[_index]},this.map=function(_handler){return originalMap.call(this,_handler).to(Object.getPrototypeOf(this))},this.product=function(){return this[0]*this[1]},this.ratio=function(){return this[0]/this[1]},this.quotient=function(){return Math.floor(this[0]/this[1])},this.remainder=function(){return this[0]%this[1]}}),Size=Dimension.extend(function(){this.planeMap=["width","height"],_Object$defineProperties(this,{width:{get:function get(){return this[0]},set:function set(_val){this[0]=Number(_val)}},height:{get:function get(){return this[1]},set:function set(_val){this[1]=Number(_val)}}}),this.set=function(_width,_height){return 1===arguments.length?void 0!==_width.width&&void 0!==_width.height?(this[0]=Number(_width.width),this[1]=Number(_width.height)):2===_width.length&&(this[0]=Number(_width[0]),this[1]=Number(_width[1])):(this[0]=Number(_width),this[1]=Number(_height)),this},this.hypotenuse=function(){return Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))},this.applyTo=function(_object){return _object.nodeType===document.ELEMENT_NODE&&void 0===_object.width&&void 0===_object.height?(_object.style.width=this.width,_object.style.height=this.height,this):(_object.width=this.width,_object.height=this.height,this)}}),Point=Dimension.extend(function(){this.planeMap=["x","y"],_Object$defineProperties(this,{x:{get:function get(){return this[0]},set:function set(_val){this[0]=Number(_val)}},y:{get:function get(){return this[1]},set:function set(_val){this[1]=Number(_val)}}}),this.set=function(_x,_y){return 1===arguments.length?void 0!==_x.x&&void 0!==_x.y?(this[0]=Number(_x.x),this[1]=Number(_x.y)):2===_x.length&&(this[0]=Number(_x[0]),this[1]=Number(_x[1])):(this[0]=Number(_x),this[1]=Number(_y)),this},this.distance=function(_point){return void 0!==_point.x&&void 0!==_point.y?Size.create().set(_point.x-this.x,_point.y-this.y):null},this.applyTo=function(_object){return _object.nodeType===document.ELEMENT_NODE?(_object.style.left=this.x,_object.style.top=this.y):(_object.x=this.x,_object.y=this.y),this},this.rotate=function(_origin,_angle){var x,y,rad;return rad=_angle*(Math.PI/180),x=this.x-_origin.x,y=this.y-_origin.y,this.create().set(Math.sin(rad)*x-Math.cos(rad)*y+_origin.x,Math.cos(rad)*x+Math.sin(rad)*y+_origin.y)}}),exports["default"]={Dimension:Dimension,Size:Size,Point:Point},module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(16),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(8);module.exports=function defineProperties(T,D){return $.setDescs(T,D)}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesBasic=__webpack_require__(19),_typesBasic2=_interopRequireDefault(_typesBasic),BasicArray=function(){return this.baseType="TYPE_BASIC_ARRAY",_util2["default"].mixin(this,_typesBasic2["default"]),this}.call([]);exports["default"]=BasicArray,module.exports=exports["default"]},function(module,exports){exports.__esModule=!0;var util=new function(){this.mixin=function(){var member,i,target,objs;for(target=arguments[0],objs=[].slice.call(arguments,1),i=0;i<objs.length;i+=1)for(member in objs[i])objs[i].hasOwnProperty(member)&&(target[member]=objs[i][member]);return target},this.keyOf=function(_obj,_member){var member;for(member in _obj)if(_obj.hasOwnProperty(member)&&_obj[member]===_member)return member;return null},this.getOwner=function(_obj,_member){var prototype,name;for(prototype=Object.getPrototypeOf(_obj);prototype&&!(name=util.keyOf(prototype,_member));)prototype=Object.getPrototypeOf(prototype);return{name:name,object:prototype}},this.random=function(_collection_rangeA,_rangeB){var index,val;return index=Math.floor(Math.random()*_collection_rangeA.length),2===arguments.length?(val=Math.round(Math.random()*_rangeB),_collection_rangeA>val?_collection_rangeA:val):(index===_collection_rangeA.length&&(index=_collection_rangeA.length-1),_collection_rangeA&&_collection_rangeA[index])},this.transformId=function(_id,_camelCase){return _id&&_camelCase?_id.replace(/[-\s]+([\w\d]?)/g,function(_match){return RegExp.$1.toUpperCase()}):_id&&_id.replace(/[-\s]+/g,"_")},this.isSet=function(){return[].every.call(arguments,function(_arg){return null!=_arg})},this.toMillisec=function(_source){var tokens,time,units;if("number"==typeof _source)return _source;if(_source)return tokens=_source.split(/\s+/),time=0,units={d:864e5,h:36e5,m:6e4,s:1e3},tokens.forEach(function(_token){var unit,value;unit=(_token.match(/[dhms]/)||[])[0],unit?(value=Number(_token.slice(0,-1)),time+=value*units[unit]):time+=Number(_token)}),time},this.toArray=function(_collection){return Array.prototype.map.call(_collection,function(i){return i})},this.resolvePath=function(_obj,_path){var path,obj,i,name,index,testArray;for(path=_path.split("."),obj=_obj,i=0;obj&&(testArray=/\?$/.test(path[i]),index=(path[i].match(/\[(\d+)\]/)||[])[1]||-1,name=~index?path[i].slice(0,path[i].indexOf("[")):path[i],obj=obj[name],~index&&obj&&(obj=testArray?obj[index]||obj:obj[index]),i+=1,path.length!==i););return obj},this.assignRef=function(_obj,_name,_ref){var name;return name=util.transformId(_name,!0),_obj[name]===_ref?_ref:(_obj[name]?(_obj[name].__refCollction__||(_obj[name]=[_obj[name]],Object.defineProperty(_obj[name],"__refCollction__",{value:!0,enumerable:!1,writeable:!1,configureable:!1})),_obj[name].push(_ref)):_obj[name]=_ref,_obj[name])},this.noop=function(){},this.resolveFileName=function(_path){return _path.slice(_path.lastIndexOf("/")+1)},this.createId=function(_pattern){return(_pattern||"xy-z").replace(/[xyz]/g,function(_token){return"x"===_token?(Math.floor(5*Math.random())+10).toString(16):"y"===_token?Math.floor(10*Math.random()).toString(16):Math.floor(Math.random()*Date.now()).toString(16).slice(0,4)})}};exports["default"]=util,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$create=__webpack_require__(20)["default"],_interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),Basic={baseType:"TYPE_BASIC",create:function create(){return _Object$create(this)},extend:function extend(_implementation){var instance;if(!_implementation)return null;switch(typeof _implementation){case"function":_implementation.prototype=this,instance=new _implementation;break;case"object":instance=this.create(),instance.mixin(_implementation);break;default:console.error("TypeError: Invalid type given for object extention.",typeof _implementation)}return instance},mixin:function mixin(){return _util2["default"].mixin.apply(null,[this].concat([].slice.call(arguments,0)))},keyOf:function keyOf(_member){return _util2["default"].keyOf(this,_member)},proto:function proto(){var method,name,owner,prototype;return method=this.proto.caller.method||this.proto.caller,(name=this.keyOf(method))?prototype=Object.getPrototypeOf(this):(owner=_util2["default"].getOwner(this,method),name=owner.name,prototype=Object.getPrototypeOf(owner.object)),method=prototype[name],method?method.apply(this,arguments):(console.error("ReferenceError: Unable to locate prototype method.",this.proto.caller),null)},sup:function sup(){var method,name,owner,prototype;return method=this.sup.caller,owner=_util2["default"].getOwner(this,this.baseType),prototype=owner.object,name=this.keyOf(method),name||(owner=_util2["default"].getOwner(this,method),name=owner.name),method=prototype[name],method?method.apply(this,arguments):(console.error("ReferenceError: Unable to locate prototype method.",this.sup.caller),null)},toString:function toString(){var type;return this.baseType?(type=this.baseType.replace("TYPE_",""),type=type.slice(0,1)+type.slice(1).toLowerCase()):type=this.constructor.name||"Object","[object "+type+"]"}};exports["default"]=Basic,module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(21),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(8);module.exports=function create(P,D){return $.create(P,D)}},function(module,exports){function Matrix(context){var me=this;me._t=me.transform,me.a=me.d=1,me.b=me.c=me.e=me.f=0,me.context=context,context&&context.setTransform(1,0,0,1,0,0)}exports.__esModule=!0,Matrix.prototype={concat:function concat(cm){return this.clone()._t(cm.a,cm.b,cm.c,cm.d,cm.e,cm.f)},flipX:function flipX(){return this._t(-1,0,0,1,0,0)},flipY:function flipY(){return this._t(1,0,0,-1,0,0)},reflectVector:function reflectVector(x,y){var v=this.applyToPoint(0,1),d=2*(v.x*x+v.y*y);return x-=d*v.x,y-=d*v.y,{x:x,y:y}},reset:function reset(){return this.setTransform(1,0,0,1,0,0)},rotate:function rotate(angle){var cos=Math.cos(angle),sin=Math.sin(angle);return this._t(cos,sin,-sin,cos,0,0)},rotateFromVector:function rotateFromVector(x,y){return this.rotate(Math.atan2(y,x))},rotateDeg:function rotateDeg(angle){return this.rotate(angle*Math.PI/180)},scaleU:function scaleU(f){return this._t(f,0,0,f,0,0)},scale:function scale(sx,sy){return this._t(sx,0,0,sy,0,0)},scaleX:function scaleX(sx){return this._t(sx,0,0,1,0,0)},scaleY:function scaleY(sy){return this._t(1,0,0,sy,0,0)},shear:function shear(sx,sy){return this._t(1,sy,sx,1,0,0)},shearX:function shearX(sx){return this._t(1,0,sx,1,0,0)},shearY:function shearY(sy){return this._t(1,sy,0,1,0,0)},skew:function skew(ax,ay){return this.shear(Math.tan(ax),Math.tan(ay))},skewX:function skewX(ax){return this.shearX(Math.tan(ax))},skewY:function skewY(ay){return this.shearY(Math.tan(ay))},setTransform:function setTransform(a,b,c,d,e,f){var me=this;return me.a=a,me.b=b,me.c=c,me.d=d,me.e=e,me.f=f,me._x()},translate:function translate(tx,ty){return this._t(1,0,0,1,tx,ty)},translateX:function translateX(tx){return this._t(1,0,0,1,tx,0)},translateY:function translateY(ty){return this._t(1,0,0,1,0,ty)},transform:function transform(a2,b2,c2,d2,e2,f2){var me=this,a1=me.a,b1=me.b,c1=me.c,d1=me.d,e1=me.e,f1=me.f;return me.a=a1*a2+c1*b2,me.b=b1*a2+d1*b2,me.c=a1*c2+c1*d2,me.d=b1*c2+d1*d2,me.e=a1*e2+c1*f2+e1,me.f=b1*e2+d1*f2+f1,me._x()},divide:function divide(m){if(!m.isInvertible())throw"Input matrix is not invertible";var im=m.inverse();return this._t(im.a,im.b,im.c,im.d,im.e,im.f)},divideScalar:function divideScalar(d){var me=this;return me.a/=d,me.b/=d,me.c/=d,me.d/=d,me.e/=d,me.f/=d,me._x()},inverse:function inverse(){if(this.isIdentity())return new Matrix;if(this.isInvertible()){var me=this,a=me.a,b=me.b,c=me.c,d=me.d,e=me.e,f=me.f,m=new Matrix,dt=a*d-b*c;return m.a=d/dt,m.b=-b/dt,m.c=-c/dt,m.d=a/dt,m.e=(c*f-d*e)/dt,m.f=-(a*f-b*e)/dt,m}throw"Matrix is not invertible."},interpolate:function interpolate(m2,t,context){var me=this,m=context?new Matrix(context):new Matrix;return m.a=me.a+(m2.a-me.a)*t,m.b=me.b+(m2.b-me.b)*t,m.c=me.c+(m2.c-me.c)*t,m.d=me.d+(m2.d-me.d)*t,m.e=me.e+(m2.e-me.e)*t,m.f=me.f+(m2.f-me.f)*t,m._x()},interpolateAnim:function interpolateAnim(m2,t,context){var me=this,m=context?new Matrix(context):new Matrix,d1=me.decompose(),d2=m2.decompose(),rotation=d1.rotation+(d2.rotation-d1.rotation)*t,translateX=d1.translate.x+(d2.translate.x-d1.translate.x)*t,translateY=d1.translate.y+(d2.translate.y-d1.translate.y)*t,scaleX=d1.scale.x+(d2.scale.x-d1.scale.x)*t,scaleY=d1.scale.y+(d2.scale.y-d1.scale.y)*t;return m.translate(translateX,translateY),m.rotate(rotation),m.scale(scaleX,scaleY),m._x()},decompose:function decompose(useLU){var me=this,a=me.a,b=me.b,c=me.c,d=me.d,acos=Math.acos,atan=Math.atan,sqrt=Math.sqrt,pi=Math.PI,translate={
x:me.e,y:me.f},rotation=0,scale={x:1,y:1},skew={x:0,y:0},determ=a*d-b*c;if(useLU)a?(skew={x:atan(c/a),y:atan(b/a)},scale={x:a,y:determ/a}):b?(rotation=.5*pi,scale={x:b,y:determ/b},skew.x=atan(d/b)):(scale={x:c,y:d},skew.x=.25*pi);else if(a||b){var r=sqrt(a*a+b*b);rotation=b>0?acos(a/r):-acos(a/r),scale={x:r,y:determ/r},skew.x=atan((a*c+b*d)/(r*r))}else if(c||d){var s=sqrt(c*c+d*d);rotation=.5*pi-(d>0?acos(-c/s):-acos(c/s)),scale={x:determ/s,y:s},skew.y=atan((a*c+b*d)/(s*s))}else scale={x:0,y:0};return{scale:scale,translate:translate,rotation:rotation,skew:skew}},determinant:function determinant(){return this.a*this.d-this.b*this.c},applyToPoint:function applyToPoint(x,y){var me=this;return{x:x*me.a+y*me.c+me.e,y:x*me.b+y*me.d+me.f}},applyToArray:function applyToArray(points){var i=0,p,l,mxPoints=[];if("number"==typeof points[0])for(l=points.length;l>i;)p=this.applyToPoint(points[i++],points[i++]),mxPoints.push(p.x,p.y);else for(;p=points[i];i++)mxPoints.push(this.applyToPoint(p.x,p.y));return mxPoints},applyToTypedArray:function applyToTypedArray(points,use64){for(var i=0,p,l=points.length,mxPoints=use64?new Float64Array(l):new Float32Array(l);l>i;)p=this.applyToPoint(points[i],points[i+1]),mxPoints[i++]=p.x,mxPoints[i++]=p.y;return mxPoints},applyToContext:function applyToContext(context){var me=this;return context.setTransform(me.a,me.b,me.c,me.d,me.e,me.f),me},isIdentity:function isIdentity(){var me=this;return me._q(me.a,1)&&me._q(me.b,0)&&me._q(me.c,0)&&me._q(me.d,1)&&me._q(me.e,0)&&me._q(me.f,0)},isInvertible:function isInvertible(){return!this._q(this.determinant(),0)},isValid:function isValid(){return!this._q(this.a*this.d,0)},clone:function clone(noContext){var me=this,m=new Matrix;return m.a=me.a,m.b=me.b,m.c=me.c,m.d=me.d,m.e=me.e,m.f=me.f,noContext||(m.context=me.context),m},isEqual:function isEqual(m){var me=this,q=me._q;return q(me.a,m.a)&&q(me.b,m.b)&&q(me.c,m.c)&&q(me.d,m.d)&&q(me.e,m.e)&&q(me.f,m.f)},toArray:function toArray(){var me=this;return[me.a,me.b,me.c,me.d,me.e,me.f]},toCSS:function toCSS(){return"matrix("+this.toArray()+")"},toCSS3D:function toCSS3D(){var me=this;return"matrix3d("+me.a+", "+me.b+", 0, 0, "+me.c+", "+me.d+", 0, 0, 0, 0, 1, 0, "+me.e+", "+me.f+", 0, 1)"},toJSON:function toJSON(){return JSON.stringify(this.toArray())},toString:function toString(){return""+this.toArray()},_q:function _q(f1,f2){return Math.abs(f1-f2)<1e-14},_x:function _x(){var me=this;return me.context&&me.context.setTransform(me.a,me.b,me.c,me.d,me.e,me.f),me}},exports["default"]=Matrix,module.exports=exports["default"]},function(module,exports,__webpack_require__){function resolveEventType(){var resolution;return resolution=_playGame2["default"].feature("touch")?{ACTION:"touchend",ACTION_DOWN:"touchstart",ACTION_UP:"touchend",ACTION_MOVE:"touchmove",ACTION_OUT:"touchcancel"}:{ACTION:"click",ACTION_DOWN:"mousedown",ACTION_UP:"mouseup",ACTION_MOVE:"mousemove",ACTION_OUT:"mouseout"}}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _playGame=__webpack_require__(24),_playGame2=_interopRequireDefault(_playGame),_util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesBasic=__webpack_require__(19),_typesBasic2=_interopRequireDefault(_typesBasic),_typesQueue=__webpack_require__(40),_typesQueue2=_interopRequireDefault(_typesQueue),_typesDimensions=__webpack_require__(14),pl;pl={Basic:_typesBasic2["default"],Point:_typesDimensions.Point,Size:_typesDimensions.Size,Queue:_typesQueue2["default"],game:_playGame2["default"],util:_util2["default"],EVENT:resolveEventType()},exports["default"]=pl,module.exports=exports["default"]},function(module,exports,__webpack_require__){function game(_name,_implementation){game.isDOMReady?initialize(_name,_implementation):register(_name,_implementation)}function ready(_eventName){return READY_QUEUE.length?!1:void game.trigger(_eventName||"ready")}function register(_name,_implementation){~GAMES.indexOf(_name)||GAMES.push({id:_name,implementation:_implementation})}function initialize(_name_collection,_implementation){switch(typeof _name_collection){case"string":_typesGlobalScope2["default"][_name_collection]=_typesGame2["default"].extend(_implementation).initialize("#"+_name_collection);break;case"object":_name_collection.forEach(function(_item,_index){initialize(_item.id,_item.implementation)})}}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _playGameComponent=__webpack_require__(25),_playGameComponent2=_interopRequireDefault(_playGameComponent),_playGameManager=__webpack_require__(27),_playGameManager2=_interopRequireDefault(_playGameManager),_util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesEvents=__webpack_require__(26),_typesEvents2=_interopRequireDefault(_typesEvents),_typesGlobalScope=__webpack_require__(30),_typesGlobalScope2=_interopRequireDefault(_typesGlobalScope),_typesEntity=__webpack_require__(93),_typesEntity2=_interopRequireDefault(_typesEntity),_typesScreen=__webpack_require__(94),_typesScreen2=_interopRequireDefault(_typesScreen),_typesGame=__webpack_require__(95),_typesGame2=_interopRequireDefault(_typesGame),_platform=__webpack_require__(96),_platform2=_interopRequireDefault(_platform),GAMES,CONFIG,READY_QUEUE;GAMES=[],CONFIG={},READY_QUEUE=[],function(){var audioContext;this.component=_playGameComponent2["default"],this.manager=_playGameManager2["default"],_util2["default"].mixin(game,_typesEvents2["default"]),this.on("platform-event",function(_event){console.log("play.game -",_event.name,_event.gameData)}),this.run=function(){game.isDOMReady=!0,game.trigger("dom-ready"),game.component.loadAll(function(){initialize(GAMES),GAMES=null}),_platform2["default"].emit(_platform2["default"].EVENT_INIT)},this.report=function(_name){return _platform2["default"].emit(_name),this.report},this.report.exit=function(_gameScope){return _platform2["default"].saveGameState(_gameScope.progress()),_platform2["default"].emit(_platform2["default"].EVENT_EXIT),this},this.report.flip=function(_gameScope){return _platform2["default"].saveGameState(_gameScope.progress()),_platform2["default"].emit(_platform2["default"].EVENT_FLIPPED),this},this.config=function(_key_mixin){switch(typeof _key_mixin){case"string":return _util2["default"].resolvePath(CONFIG,_key_mixin);case"object":_key_mixin&&_util2["default"].mixin(CONFIG,_key_mixin)}return this},this.provideEntityType=function(){return _typesEntity2["default"]},this.provideScreenType=function(){return _typesScreen2["default"]},this.scope=function(_mixin){return"function"==typeof _mixin?_mixin.call(_typesGlobalScope2["default"]):_mixin&&_typesGlobalScope2["default"].mixin(_mixin),this},this.queue=function(_item){return~READY_QUEUE.indexOf(_item)||READY_QUEUE.push(_item),this},this.queue.complete=function(_item,_eventName){var index;return index=READY_QUEUE.indexOf(_item),READY_QUEUE.splice(index,1),ready(_eventName),this},this.feature=function(){var detect={touch:function touch(){return window.hasOwnProperty("ontouchend")}};return function(_name){var tester=detect[_name];return!tester&&console&&console.warn('No feature detection for "'+_name+'".'),tester&&tester()}}(),this.getAudioContext=function(){return audioContext||(audioContext=new(window.AudioContext||window.webkitAudioContext)),audioContext},this.enableAudioContext=function(){var ctx,silence;return ctx=this.getAudioContext(),silence=ctx.createBufferSource(),silence.buffer=ctx.createBuffer(2,1,44100),silence.connect(ctx.destination),silence.start(),silence.disconnect(),silence}}.call(game),exports["default"]=game,module.exports=exports["default"]},function(module,exports,__webpack_require__){function component(_name,_implementation){return component.get(_name)||COMPONENTS.push({name:_name,implementation:_implementation,config:{}}),this}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesEvents=__webpack_require__(26),_typesEvents2=_interopRequireDefault(_typesEvents),COMPONENTS;COMPONENTS=[],function(){_util2["default"].mixin(this,_typesEvents2["default"]),this.get=function(_name){var i,record;for(i=0;record=COMPONENTS[i];i+=1)if(record.name===_name)return record;return null},this.load=function(_name,_callback){var path;return component.get(_name)?(_callback&&_callback.call(component,_name),null):(path=pl.game.config("componentDirectory")+_name+"/behavior.js",$.getScript(path,function(){_callback&&_callback.call(component,_name),component.trigger("loaded",[_name])}),this)},this.loadAll=function(_callback){var $components,queue;return $components=$("[pl-component]"),queue=[],$components.each(function(_index){var name;name=$(this).attr("pl-component"),~queue.indexOf(name)||queue.push(name)}),queue.slice(0).forEach(function(_name){component.load(_name,function(){var index;index=queue.indexOf(_name),queue.splice(index,1),!queue.length&&_callback&&_callback.apply(component,arguments)})}),this}}.call(component),exports["default"]=component,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _typesBasic=__webpack_require__(19),_typesBasic2=_interopRequireDefault(_typesBasic),Events=_typesBasic2["default"].extend(function(){function createProxyFunction(_name){return function(){var $jq=$();return $jq.push(this),$.fn[_name].apply($jq,arguments)}}var i,method,methods;for(methods=["on","off","trigger"],this.baseType="TYPE_EVENTS",i=0;method=methods[i];i+=1)this[method]=createProxyFunction(method)});exports["default"]=Events,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _playGameManagerDraggable=__webpack_require__(28),_playGameManagerDraggable2=_interopRequireDefault(_playGameManagerDraggable);exports.draggable=_playGameManagerDraggable2["default"]},function(module,exports,__webpack_require__){function boot(){createHelperStyleSheet(),attachEvents()}function attachEvents(){var state,E;E=pl.EVENT,"touchmove"===E.ACTION_MOVE&&attachEvents.disableTouchScroll(),$(document).on(E.ACTION_DOWN,function(_event){var $draggable,scope,cursor,mode,game,point,transform,helperID,dragStartEvent;if($draggable=$(_event.target).closest("[pl-draggable]"),$draggable.length){switch(scope=$draggable.scope(),cursor=resolveEventPoint(_event,1/scope.game.zoom),mode=$draggable.pl("draggable"),game={position:scope.game.absolutePosition(),scale:scope.game.transformScale().x},point=$draggable.absolutePosition().dec(game.position),transform=$draggable.transform(),helperID=createID(),state={mode:mode,$draggable:$draggable,scope:scope,$helper:null,start:{cursor:cursor,point:point,transform:transform},progress:{distance:null,point:null,transform:null}},1!==game.scale&&(point=point.scale(1/game.scale)),draggableStyleSheet.html(provideSource(helperID,createDraggableRule($draggable))),mode){case"clone":state.$helper=$draggable.clone(),state.$helper.id(helperID).pl("draggable",null).addClass("draggable-helper").appendTo(document.body).absolutePosition(point);break;case"pluck":$draggable.addClass("PLUCKED"),state.$helper=$draggable.clone(),state.$helper.id(helperID).pl("draggable",null).addClass("draggable-helper").appendTo(document.body).absolutePosition(point);break;default:state.$helper=$draggable}state.$helper.removeClass("DRAG-ENDED").addClass("DRAG-START"),dragStartEvent=$.Event("drag-start",{state:state,targetScope:scope}),scope.trigger(dragStartEvent)}}).on(E.ACTION_MOVE,function(_event){var cursor,$draggable,distance,point,transform,dragMoveEvent;state&&(cursor=resolveEventPoint(_event,1/state.scope.game.zoom),distance=state.start.cursor.distance(cursor),point=_typesDimensions.Point.create(),transform=null,"none"!==state.start.transform?(transform=state.start.transform.clone(),transform.translate(distance.width,distance.height),point.set(transform.applyToPoint(0,0))):point=distance.to("point"),state.$helper.hasClass("DRAG-START")&&state.$helper.removeClass("DRAG-START").addClass("DRAGGING"),dragMoveEvent=$.Event("drag-move",{state:state,targetScope:state.scope}),state.progress.distance=distance,state.progress.point=state.start.point.inc(point),state.progress.transform=transform,state.scope.translate(state.$helper,point),state.scope.trigger(dragMoveEvent))}).on([E.ACTION_UP,E.ACTION_OUT].join(" "),function(_event){var $draggable,dragEndEvent;if(state){if("mouseout"===_event.type&&!~[null,document.documentElement].indexOf(_event.toElement))return;$draggable=state.$draggable,state.$helper.hasClass("draggable-helper")&&state.$helper.on("transitionend",function(){$draggable.removeClass("PLUCKED"),$(this).remove()}),state.$helper.removeClass("DRAG-START DRAGGING").addClass("DRAG-ENDED"),dragEndEvent=$.Event("drag-end",{state:state,targetScope:state.scope}),state.scope.trigger(dragEndEvent),state=null}})}function resolveEventPoint(_event,_scale){var scale=_scale||1;return _event.originalEvent&&_event.originalEvent.changedTouches&&(_event.touch=_event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length-1]),_typesDimensions.Point.create().set(new function(){_event.touch?(this.x=_event.touch.clientX*scale,this.y=_event.touch.clientY*scale):(this.x=_event.clientX*scale,this.y=_event.clientY*scale)})}function createHelperStyleSheet(){draggableStyleSheet=$('<style id="draggable-helper-css" type="text/css"></style>').appendTo(document.body)}function createDraggableRule(_$draggable){var i,style,blacklist,rule,prop;for(style=window.getComputedStyle(_$draggable[0]),rule={},blacklist=["zIndex","opacity","cursor","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],i=0;i<style.length;i+=1)prop=_util2["default"].transformId(style[i],!0),~blacklist.indexOf(prop)||(0===prop.indexOf("Webkit")&&(prop=prop.slice(0,1).toLowerCase()+prop.slice(1)),style[prop]&&(rule[prop]=style[prop]));return rule}function provideSource(_id,_rule){var source,prop,value;source="#"+_id+".draggable-helper {";for(prop in _rule)_rule.hasOwnProperty(prop)&&(value=_rule[prop],source+=prop.replace(/([A-Z]+)/g,"-$1").toLowerCase()+": "+value+";");return source+="}"}function createID(){return"xy-xyxy-y".replace(/x|y/g,function(_token){return"x"===_token?(Math.floor(5*Math.random())+10).toString(16):Math.floor(Math.random()*Date.now()).toString(16).slice(2)})}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesCollection=__webpack_require__(29),_typesCollection2=_interopRequireDefault(_typesCollection),_typesDimensions=__webpack_require__(14),COLLECTION_DRAGABLES=_typesCollection2["default"].create(),draggableStyleSheet;attachEvents.disableTouchScroll=function(){document.addEventListener("touchmove",function(_event){_event.preventDefault()},!1)};var draggableManager={};$(boot),exports["default"]=draggableManager,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _typesBasicArray=__webpack_require__(17),_typesBasicArray2=_interopRequireDefault(_typesBasicArray),Collection=_typesBasicArray2["default"].extend(function(){function getRecord(_member,_key,_shouldCollect){var i,record,member,result;for(result=[],i=0;record=this[i];i+=1)if(void 0!==_key){if(record[_key]===_member){if(!_shouldCollect)return record;result.push(record)}}else if(record instanceof Array){if(~record.indexOf(_member)){if(!_shouldCollect)return record;result.push(record)}}else for(member in record)if(record.hasOwnProperty(member)&&record[member]===_member){if(!_shouldCollect)return record;result.push(record)}return result.length?result:null}this.baseType="TYPE_COLLECTION",this.add=function(_record){return~this.indexOf(_record)?!1:(this.push(_record),this)},this.remove=function(_record){var index;return index=this.indexOf(_record),~index&&this.splice(index,1),this},this.has=function(_record){return!!~this.indexOf(_record)},this.get=function(_member,_key){return getRecord.call(this,_member,_key)},this.filter=function(_member,_key){return getRecord.call(this,_member,_key,!0)}});exports["default"]=Collection,module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=!0;var _typesScope=__webpack_require__(31),GlobalScope=_typesScope.Scope.extend(function(){this.baseType="TYPE_GLOBAL_SCOPE"});exports["default"]=GlobalScope,module.exports=exports["default"]},function(module,exports,__webpack_require__){function createEntity(_$node,_implementation){var component,prototype,componentRecord,instance;if(component=_$node.attr("pl-component"),prototype=this,component){if(componentRecord=_playGame2["default"].component.get(component),!componentRecord)throw new Error("No implementation record for the "+component+"component.");componentRecord.implementation!==_implementation&&(prototype=this.extend(componentRecord.implementation))}return instance="function"==typeof _implementation?prototype.extend(_implementation):prototype.create(),instance.initialize(_$node,component)}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _typesJQProxy=__webpack_require__(32),_typesJQProxy2=_interopRequireDefault(_typesJQProxy),_typesBasic=__webpack_require__(19),_typesBasic2=_interopRequireDefault(_typesBasic),_typesQueue=__webpack_require__(40),_typesQueue2=_interopRequireDefault(_typesQueue),_typesDimensions=__webpack_require__(14),_playGame=__webpack_require__(24),_playGame2=_interopRequireDefault(_playGame),_util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_evalAction=__webpack_require__(41),_evalAction2=_interopRequireDefault(_evalAction),_typesAudioManager=__webpack_require__(42),Scope=_typesJQProxy2["default"].extend(function(){function attachActionHandler(){this.on(pl.EVENT.ACTION,function(_event){var target,record;target=$(_event.target).closest("[pl-action]")[0],_event.originalEvent&&_event.originalEvent.changedTouches&&(_event.touch=_event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length-1]),_event.cursor=_typesDimensions.Point.create().set(new function(){_event.touch?(this.x=_event.touch.clientX,this.y=_event.touch.clientY):(this.x=_event.clientX,this.y=_event.clientY)}),target&&(record=this.actionables.item(target),record&&(_event.targetScope=this,this.event=_event,_evalAction2["default"](record.action,this),this.event=null))})}function getRecordBy(_key,_member,_collection){var i,record;if(_collection)for(i=0;record=_collection[i];i+=1)if(record[_key]===_member)return record;return null}function removeRecord(_record,_collection){var index;index=_collection.indexOf(_record),~index&&_collection.splice(index,1)}function captureDropables(_scope){var collection;return collection=[],_scope.find("> [pl-pluck]").each(function(){var name;name=$(this).attr("pl-pluck"),collection.push(this),collection[name]=this}),collection}function pluckAndDrop(_dropables,_template){$(_template).find("[pl-drop]").each(function(){var $node,name,dropable;$node=$(this),name=$node.attr("pl-drop"),dropable=_dropables[name],dropable&&$node.replaceWith(dropable.children)})}function loadComponentAssets(_name,_callback){function ready(){ready.status+=1,ready.status===totalRequests&&_callback&&_callback.call(scope,_name)}var scope,path,totalRequests,transcludeMode,dropables;return totalRequests=0,scope=this,path=_playGame2["default"].config("componentDirectory")+_name+"/",dropables=captureDropables(this),transcludeMode=dropables.length?this.TRANSCLUDE_PLUCK:this.properties.transclude,ready.status=0,(!this.children().length||transcludeMode)&&(totalRequests+=1,$("<div>").load(path+"template.html",function(){var memory;switch(memory=[],transcludeMode){case scope.TRANSCLUDE_APPEND:scope.append(this.children);break;case scope.TRANSCLUDE_PREPEND:scope.prepend(this.children);break;case scope.TRANSCLUDE_PLUCK:pluckAndDrop(dropables,this),scope.empty().append(this.children);break;case scope.TRANSCLUDE_REPLACE:scope.empty().append(this.children);break;default:transcludeMode?(pluckAndDrop(new function(){this[transcludeMode]=scope.node()},this),scope.empty().append(this.children)):scope.empty().append(this.children)}scope.findOwn("[pl-component]").each(function(){var name;name=$(this).attr("pl-component"),~memory.indexOf(name)||(memory.push(name),totalRequests+=1,_playGame2["default"].component.load(name,function(){ready()}))}),ready()})),$('style[pl-for-component="'+_name+'"]').length||_playGame2["default"].config("shouldLoadComponentStyles")===!1||(totalRequests+=1,$('<style type="text/css" pl-for-component="'+_name+'">').load(path+"style.css",ready).appendTo(document.body)),totalRequests||_callback&&_callback.call(this,_name),this}function captureProperties(){var i,attr,name,collection;for(collection=function(){return this.has=function(_name){return!!~this.indexOf(_name)},this}.call([]),i=0;attr=this.$els[0].attributes[i];i+=1)0===attr.name.indexOf("pl-")&&(name=attr.name.slice(3),collection[_util2["default"].transformId(name,!0)]=attr.value,collection.push(name));return collection.length&&(this.properties=collection),this}function initializeEntities(){return this.hasOwnProperty("entities")?(this.entities.forEach(this.bind(function(_record,_index){var $nodes,query,index;for($nodes=this.findOwn(_record.selector),query=["#"+_record.selector,"[pl-id="+_record.selector+"]","[pl-component="+_record.selector+"]","[pl-"+_record.selector+"]"],index=0;!$nodes.length;){if(index===query.length)throw new Error("Unable to locate entity with selector",_record.selector);$nodes=this.findOwn(query[index]),index+=1}$nodes.each(this.bind(function(_index,_node){var $node,instance,id;$node=$(_node),Scope.isPrototypeOf(_record)?instance=_record:(instance=createEntity.call(this,$node,_record.implementation),instance.isReady||this.assetQueue.add(instance)),id=_util2["default"].transformId(instance.id(),!0),id&&_util2["default"].assignRef(this,id,instance)}))})),this):this}function handleProperties(){var scope,property,handler;if(scope=this,this.hasOwnProperty("properties")&&this.properties.forEach(function(_name){handler=scope.propertyHandlers[_name],handler&&handler.call(scope,scope.$els[0],_name,scope.properties[_name])}),this.propertyHandlers)for(property in this.propertyHandlers)_typesBasic2["default"].hasOwnProperty(property)||(handler=this.propertyHandlers[property],this.findOwn("[pl-"+property+"]").each(function(){var attr;scope===$(this).scope()&&(attr=this.attributes.getNamedItem("pl-"+property),handler&&handler.call(scope,this,property,attr.value))}));return this}function invokeLocal(_name){var args,owner;return args=[].slice.call(arguments,1),this.isMemberSafe(_name)?this[_name].apply(this,arguments):void 0}function init(){var willInitEvent,initEvent;return initEvent=$.Event("initialize",{targetScope:this}),willInitEvent=$.Event("will-initialize",{targetScope:this}),invokeLocal.call(this,"willInit"),this.trigger(willInitEvent),this.attachEvents(),initializeEntities.call(this),handleProperties.call(this),this.watchAssets(),this.captureAudioAssets(),this.captureReferences(),this.__init(),invokeLocal.call(this,"init"),this.trigger(initEvent),this.isReady||this.assetQueue.ready(),this}function ready(){var readyEvent,entities;readyEvent=$.Event("ready",{targetScope:this}),entities=this.findOwn(".pl-scope").scope(),entities&&(entities.length>0?this.entities=entities:this.entities=[entities]),this.hasOwnProperty("audio")&&((this.game||this).media.addShadow(this.audio),this.audio.collections().forEach(function(_collection){var map={voiceOver:"voice-over",background:"background",sfx:"sfx"};_collection.length&&this.findOwn("audio."+map[_collection.type]).each(function(_index,_node){var id,audio,collection,index;id=$(_node).id(),audio=(_collection.find("#"+id)||[])[0],index=_collection.indexOf(audio),index!==_index&&(_collection[index]=_collection[_index],_collection[_index]=audio)})}.bind(this))),this.isReady=!0,this.addClass("READY"),this.__ready(),invokeLocal.call(this,"ready"),this.trigger(readyEvent)}var Actionables;Actionables=function(){return _util2["default"].mixin(this,_typesBasic2["default"]),this.add=function(_node,_action){return this.has(_node)||this.push({node:_node,action:_action}),this},this.remove=function(_node){var item,index;return item=this.item(_node),index=this.indexOf(item),~index&&this.splice(index,1),this},this.item=function(_node){var i,item;for(i=0;item=this[i];i+=1)if(item.node===_node)return item},this.has=function(_node){return!!this.item(_node)},this}.call([]),this.TRANSCLUDE_REPLACE="replace",this.TRANSCLUDE_PREPEND="prepend",this.TRANSCLUDE_APPEND="append",this.TRANSCLUDE_PLUCK="pluck",this.baseType="TYPE_SCOPE",this.actionables=null,this.isReady=null,this.isComponent=!1,this.entities=null,this.audio=null,this.properties=null,this.propertyHandlers=null,this.assetQueue=null,this.event=null,this.currentMedia={},this.initialize=function(_node_selector,_componentName){var scope;if(scope=this,this.isReady=!1,this.isComponent=!!_componentName,this.event=null,this.assetQueue=_typesQueue2["default"].create(),this.$els=_node_selector.jquery?_node_selector:$(_node_selector),!this.$els.length)throw new ReferenceError("Unable to locate the element with selector "+this.$els.selector+".");return this.addClass("pl-scope "+(_componentName?_componentName+"-component":"")),this.data("pl-scope",this),this.data("pl-isComponent",!!_componentName),captureProperties.call(this),_componentName?loadComponentAssets.call(this,_componentName,function(){init.call(this)}):init.call(this),this},this.__init=function(){return this},this.__ready=function(){return this},this.willInit=function(){return this},this.init=function(){return this},this.ready=function(){return this},this.watchAssets=function(_nodes){var createHandler,watch;return createHandler=this.bind(function(_node){return function(){var loadedEvent=$.Event("loaded",{targetScope:this});this.assetQueue.ready(_node.src),this.trigger(loadedEvent,[_node]),_node.onload=null}.bind(this)}),watch=this.bind(function(_index,_node){var node="number"==typeof _index?_node:_index;"IMG"!==node.nodeName||node.complete||this.assetQueue.add(node.src)&&(node.onload=createHandler(node),node.onerror=function(){console.error("Image failed to load",node.src)})}),_nodes?(_nodes.forEach(watch),this):(this.each(watch),this.findOwn("img").each(watch),this)},this.attachEvents=function(){return this.proto(),this.assetQueue.on("complete",this.bind(function(){this.assetQueue.off(),ready.call(this)})),this.on("ready",function(_event){this.has(_event.targetScope)&&this.assetQueue.has(_event.targetScope)&&this.assetQueue.ready(_event.targetScope),!this.assetQueue.length&&this.isReady&&this.off("ready")}),this},this.captureReferences=function(){this.findOwn("[id], [pl-id]").each(this.bind(function(_index,_node){var $node,id;"AUDIO"!==_node.nodeName&&($node=$(_node),id=$node.attr("id")||$node.attr("pl-id"),this[id]||_util2["default"].assignRef(this,id,$node.data("pl-scope")||$node))}))},this.captureAudioAssets=function(){var deQ,$audio;return($audio=this.findOwn("audio")).length?(deQ=function(_item){[this,this.screen].forEach(function(_scope){_scope.requiredQueue&&_scope.isMemberSafe("requiredQueue")&&_scope.requiredQueue.has(_item)&&_scope.requiredQueue.ready(_item)})}.bind(this),this.audio=_typesAudioManager.AudioManager.create(this.id()),$audio.each(function(_index,_node){this.assetQueue.add(_node.src),this.audio.watch(_node).then(function(_audio){var loadedEvent=$.Event("loaded",{target:_node,targetScope:this});$(_node).is("[pl-required]")&&this.screen.require(_audio),this.assetQueue.has(_node.src)&&this.assetQueue.ready(_node.src),this.trigger(loadedEvent)}.bind(this))}.bind(this)),this.audio.on("play pause ended stopped",this.bind(function(_event){var map={background:"BACKGROUND",voiceOver:"VOICE-OVER",sfx:"SFX"};switch(_event.type){case"play":[this,this.screen].forEach(function(_scope,_index,_set){(1!==_index||_scope!==_set[0])&&_scope.$els&&(_scope.addClass("PLAYING "+map[_event.target.type]),_scope.currentMedia[map[_event.target.type]]=_event.target)}),$(_event.targetNode).addClass("PLAYING");break;case"pause":case"stopped":case"ended":[this,this.screen].forEach(function(_scope,_index,_set){var state;(1!==_index||_scope!==_set[0])&&_scope.$els&&(_scope.removeClass(map[_event.target.type]),state=_scope.attr("class"),/BACKGROUND|VOICE-OVER|SFX/.test(state)||_scope.removeClass("PLAYING"),_scope.currentMedia[map[_event.target.type]]===_event.target&&(_scope.currentMedia[map[_event.target.type]]=null))}),$(_event.targetNode).removeClass("PLAYING"),"ended"===_event.type&&deQ(_event.target)}var audioEvent=$.Event("audio-"+_event.type,{target:_event.target,targetSource:_event.targetSource,targetNode:_event.targetNode,targetScope:this});this.trigger(audioEvent)})),this):!1},this.handleProperty=function(_implementation){if(this.propertyHandlers)if(this.hasOwnProperty("propertyHandlers"))switch(typeof _implementation){case"function":_implementation.call(this.propertyHandlers);break;case"object":this.propertyHandlers.mixin(_implementation)}else this.propertyHandlers=this.propertyHandlers.extend(_implementation);else this.propertyHandlers=_typesBasic2["default"].extend(_implementation);return this},this.entity=function(_selector,_implementation){var Entity,prototype,id;if(Entity=_playGame2["default"].provideEntityType(),this.hasOwnProperty("entities")||(this.entities=[]),this.hasOwnProperty("$els"))throw new Error("Wait this hasn't been tested.");return this.entities.push({selector:_selector,implementation:_implementation}),this},this.has=function(_child){var child;return child=Scope.isPrototypeOf(_child)?_child.$els:_child,!!this.$els.has(child).length},this.toString=function(){var type;return type=this.baseType.replace("TYPE_",""),type=type.slice(0,1)+type.slice(1).toLowerCase(),["[",this.id()||this.address()," ",type,"]"].join("")},this.log=function(){var args;return args=_util2["default"].toArray(arguments),console.log.apply(console,[this.id()||this.address(),"-"].concat(args)),this},this.handleProperty(function(){this.component=function(_node,_name,_value,_property){var $node,record,scope,id;if($node=$(_node),!$node.data("pl-isComponent")){if(record=_playGame2["default"].component.get(_value),!record)throw new Error("Ahh!");scope=createEntity.call(this,$node,record.implementation),id=_util2["default"].transformId(scope.id()||_value,!0),_util2["default"].assignRef(this,id,scope),scope.isReady||this.assetQueue.add(scope)}},this.action=function(_node,_name,_value){this.hasOwnProperty("actionables")||(this.actionables=Actionables.create(),attachActionHandler.call(this)),this.actionables.add(_node,_value)},this.required=function(_node,_name,_value){this.is(_node)&&this.screen.require(this)},this.require=function(_node,_name,_value){var query,$node;this.is(_node)&&(query="#_value, [pl-id=_value], [pl-component=_value]".replace(/_value/g,_value),$node=this.find(query),$node.on("ready",this.bind(function(_event){$node.is(_event.target)&&this.require(_event.targetScope)})))}})});exports["default"]={Scope:Scope,createEntity:createEntity},module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$keys=__webpack_require__(33)["default"],_interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesBasic=__webpack_require__(19),_typesBasic2=_interopRequireDefault(_typesBasic),jQProxy=_typesBasic2["default"].extend(function(){function createProxyFunction(_name){return function(){var response;if(!this.hasOwnProperty("$els")){if("on"!==_name)throw new ReferenceError("Unable to invoke "+_name+" because the scope is not initialized.");return void registerHandler.call(this,arguments)}return response=$.fn[_name].apply(this.$els,resolveEventHandler(this,_name,arguments)),
response===this.$els||response&&response.jquery&&response.is(this.$els)?this:response}}function resolveEventHandler(_scope,_method,_args){var i,arg,args;if(args=[],~["on","load"].indexOf(_method)){for(i=0;arg=_args[i];i+=1)"function"==typeof arg?args.push(function(_handler){return function(){return _handler.apply(_scope,arguments)}}(arg)):args.push(arg);return args}return _args}function registerHandler(_definition){return this.hasOwnProperty("eventRegistry")||(this.eventRegistry&&this.isMemberSafe("eventRegistry")?this.eventRegistry=this.eventRegistry.slice(0):this.eventRegistry=[]),this.eventRegistry.push(_definition),!0}var method,exclude;exclude=["constructor"].concat(_Object$keys(_typesBasic2["default"])),this.baseType="TYPE_JQPROXY",this.$els=null,this.eventRegistry=null;for(method in $.fn)$.fn.hasOwnProperty(method)&&!~exclude.indexOf(method)&&(this[method]=createProxyFunction(method));this.node=function(){return this.$els[0]},this.attachEvents=function(){var self;self=this,this.eventRegistry&&this.isMemberSafe("eventRegistry")&&this.eventRegistry.forEach(function(_definition){self.on.apply(self,_definition)})},this.listen=function(_name,_isCapure_handler,_handler){var _isCapture,node,handler;return _isCapture=!1,"boolean"==typeof _isCapure_handler?_isCapture=_isCapure_handler:_handler=_isCapure_handler,_handler.cb=_handler.bind(this),this.$els?(node=this.$els[0])?node.addEventListener(_name,_handler.cb,_isCapture):!1:registerHandler([_name,_handler.cb,_isCapture])},this.ignore=function(_name,_handler){var node=this.$els&&this.$els[0];return node?node.removeEventListener(_name,_handler.cb||_handler):!1},this.bind=function(_handler){var args;return args=[].map.call(arguments,function(m){return m}).slice(1),_handler.bind.apply(_handler,[this].concat(args))},this.findOwn=function(_selector){return this.find(_selector).filter(this.bind(function(_index,_node){var $node;return $node=$(_node),$node.hasClass("pl-scope")?$node.parent().scope()===this:$node.scope()===this}))},this.isMemberSafe=function(_name){var owner,elOwner,prototype;return this.hasOwnProperty(_name)?!0:(prototype=Object.getPrototypeOf(this),owner=_util2["default"].getOwner(this,this[_name]),owner.object.hasOwnProperty("$els")||prototype.hasOwnProperty("$els")?!1:prototype.$els&&(elOwner=_util2["default"].getOwner(prototype,prototype.$els),owner.object.isPrototypeOf(elOwner.object))?!1:!0)},this.is=function(_obj){return _obj?_obj.$els?this.$els.is(_obj.$els):this.$els.is(_obj):!1}});exports["default"]=jQProxy,module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(34),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(35),module.exports=__webpack_require__(11).Object.keys},function(module,exports,__webpack_require__){var toObject=__webpack_require__(36);__webpack_require__(38)("keys",function($keys){return function keys(it){return $keys(toObject(it))}})},function(module,exports,__webpack_require__){var defined=__webpack_require__(37);module.exports=function(it){return Object(defined(it))}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){var $export=__webpack_require__(9),core=__webpack_require__(11),fails=__webpack_require__(39);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesCollection=__webpack_require__(29),_typesCollection2=_interopRequireDefault(_typesCollection),_typesEvents=__webpack_require__(26),_typesEvents2=_interopRequireDefault(_typesEvents),Queue=_typesCollection2["default"].extend(function(){return this.baseType="TYPE_QUEUE",this.ready=function(_record){return null!=_record&&this.remove(_record),this.length||this.trigger("complete"),this},_util2["default"].mixin(this,_typesEvents2["default"]),this});exports["default"]=Queue,module.exports=exports["default"]},function(module,exports){function evalAction(_source,_scope){function target(_selector){return _scope.event?_selector?$(_scope.event.target).closest(_selector):$(_scope.event.target):void 0}var error;return eval("with (_scope) { try {"+_source+";} catch (error) { console.error('Error:', error.message, 'evaluating action', _source, 'in', _scope.id() || _scope.address()); } }")}exports.__esModule=!0,exports["default"]=evalAction,module.exports=exports["default"]},function(module,exports,__webpack_require__){function MediaManager($,sup){_util2["default"].mixin(this,EventTargetInterface,InspectorInterface,LegislatorInterface,StateInterface),$("video",function alloc(_id){sup(this,"alloc",arguments),this.video=_typesCollection2["default"].create(),this.initialize(_id,"media manager")})}function AudioManager($){function AudioBufferRecord(_node,_buffer){this.node=_node,this.type=getAudioType(_node),this.buffer=_buffer}function getAudioType(_audio){return _util2["default"].transformId((_audio.className.match(AUDIO_TYPES)||[])[0],!0)}function loadArrayBuffer(_audio){var xhr,manager,fileName;return xhr=new(XMLHttpRequest||_util2["default"].noop),manager=this,fileName=_util2["default"].resolveFileName(_audio.src),xhr.open||_Promise.reject("This platfom does not support the XMLHttpRequest API."),new _Promise(function(resolve,reject){function onLoad(){var ctx,promise;if(xhr.status>=200&&xhr.status<300){if(ctx=pl.game.getAudioContext())return promise=new _Promise(function(resolveDecoding,rejectDecoding){try{ctx.decodeAudioData(xhr.response,function(_buffer){var audio=manager.collect(new AudioBufferRecord(_audio,_buffer));resolveDecoding(audio),BUFFER_CACHE[fileName]=_buffer},function(){rejectDecoding("Failed to decode ArrayBuffer for "+fileName+".")})}catch(e){rejectDecoding(e)}}),promise.then(resolve)["catch"](reject),promise}else reject(xhr.statusText);xhr.removeEventListener("load",onLoad),xhr=null}function onError(){reject(xhr.statusText),xhr.removeEventListener("error",onError),xhr=null}var cache=BUFFER_CACHE[fileName];return cache&&"loading"!==cache?resolve(manager.collect(new AudioBufferRecord(_audio,cache))):(BUFFER_CACHE[fileName]="loading",xhr.responseType="arraybuffer",xhr.addEventListener("load",onLoad,!1),xhr.addEventListener("error",onError,!1),xhr.open("GET",_audio.src,!0),void xhr.send())})}var AUDIO_TYPES,BUFFER_CACHE;AUDIO_TYPES=/background|voice-over|sfx/i,BUFFER_CACHE={},_util2["default"].mixin(this,EventTargetInterface,PlayableInterface,InspectorInterface,LegislatorInterface,StateInterface),$("background, voiceOver, sfx, scope",function alloc(_id){this.initialize(_id,"audio manager"),["background","voiceOver","sfx"].forEach(function(_type){var collection=this[_type]=AudioCollection.create(_type);this.addShadow(collection)}.bind(this))},function load(_audio){var manager,type;return manager=this,type=getAudioType(_audio),type?loadArrayBuffer.call(this,_audio):_Promise.reject("Audio is missing a type. Please classify as 'background', 'voiceOver' or 'sfx'.")},function watch(_audio){function reject(_error){var scope=$$(_audio).scope();console.warn(scope.id(),"-",_error)}var promise;return"AUDIO"!==_audio.nodeName?_Promise.reject("Invalid type for audio node. "+typeof _audio+" ["+_audio.protoype.constructor.name+" "+_audio.nodeName+"]."):((promise=this.load(_audio))["catch"](reject.bind(this)),promise)},function collect(_audio){var type;return _audio?_audio.length?_audio.map(collect.bind(this)):(type=_audio.type||getAudioType(_audio),type&&this[type]?this[type].add(_audio):!1):!1},function collections(){var result,types;return result=[],types=_Object$keys(this),types.forEach(function(_type){this[_type]instanceof AudioCollection&&result.push(this[_type])}.bind(this)),result},function toString(){return"[object "+(this.constructor.name||"Object")+"]"})}function AudioCollection($,sup){_util2["default"].mixin(this,EventTargetInterface,PlayableInterface,InspectorInterface,StateInterface),$("type",function alloc(_type){_type&&(this.type=_type),this.initialize(_type,"collection")},function add(_audio){var audio;return _audio?(audio=_audio instanceof Audio?_audio:Audio.create(_audio,this.type),sup(this,"add")(audio),this.addShadow(audio),audio.id()&&_util2["default"].assignRef(this,audio.id(),audio),audio):!1},function manager(){return this.$el.closest("#man").data("context")},function toString(){return"[object "+(this.constructor.name||"Object")+"]"})}function MediaCollection($,sup){$(function add(_media){return this.addShadow(_media),_media.id()&&_util2["default"].assignRef(this,_media.id(),_media),_typesCollection2["default"].add.call(this,_media)},function addShadow(_media){var $clone;return $clone=_media.$el.clone(),$clone.data(_media.$el.data()),this.$el.append($clone),this})}function Audio($){function accessConfig(_augment,_val){return _val?this[_augment]=_val:"string"==typeof _augment?this[_augment]:(_util2["default"].mixin(this,_augment),_augment)}_util2["default"].mixin(this,EventTargetInterface,PlayableInterface,StateInterface),$("type, media, activeSource, buffer, config, fileName, gain, delay, delayID",function alloc(_audio,_type){var $audio,config,ctx,readyEvent,id;$audio=$$(_audio.node||_audio),config=$audio.pl(),ctx=pl.game.getAudioContext(),readyEvent=$$.Event("ready",{targetScope:this}),(id=$audio.id())||$audio.id(id=_util2["default"].createId()),this.type=_type||null,this.fileName=_util2["default"].resolveFileName($audio.attr("src")),this.media=$audio[0],this.gain=ctx.createGain(),this.gain.connect(ctx.destination),$audio.data("context",this),_audio.buffer&&(this.buffer=_audio.buffer),Object.defineProperty(this,"config",{value:accessConfig.bind(config),writeable:!1}),this.initialize(id,"audio "+this.type),$$(this.media).trigger(readyEvent)},function getSource(){var ctx,src;if(ctx=this.audioContext||pl.game.getAudioContext()){if(this.buffer)return src=ctx.createBufferSource(),src.buffer=this.buffer,src.loop=this.media.loop,src;try{return this.activeSource||ctx.createMediaElementSource(this.media)}catch(e){console.warn(e.message,this)}}return null},function collection(){return this.$el.closest(".collection").data("context")},function manager(){return this.$el.closest("#man").data("context")},function toString(){return"[audio#"+this.id()+" "+this.fileName+"]"},function setContext(ctx){this.gain=ctx.createGain(),this.gain.disconnect(),this.gain.connect(ctx.destination),this.audioContext=ctx})}var _Promise=__webpack_require__(43)["default"],_Object$keys=__webpack_require__(33)["default"],_Object$create=__webpack_require__(20)["default"],_interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _typesType=__webpack_require__(90),_typesType2=_interopRequireDefault(_typesType),_util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesCollection=__webpack_require__(29),_typesCollection2=_interopRequireDefault(_typesCollection),EventTargetInterface,InspectorInterface,PlayableInterface,LegislatorInterface,StateInterface,$$=window.jQuery;AudioCollection.prototype=_Object$create(_typesCollection2["default"],{constructor:{value:AudioCollection,enumerable:!1,writeable:!1,configureable:!1}}),EventTargetInterface={$el:null,initialize:function initialize(_id,_class){Object.defineProperty(this,"$el",{value:$$("<div "+(_id?'id="'+_id+'"':"")+" "+(_class?'class="'+_class+'"':"")+">"),writeable:!1,configureable:!1,enumerable:!1}),this.$el.data("context",this)},id:function id(_id){return this.$el.id(_id)},addShadow:function addShadow(_obj){return this.$el.append(_obj.$el),this},parent:function parent(){return this.$el.parent().data("context")},find:function find(_selector){var collection=MediaCollection.create();return this.$el.find(_selector).each(function(){collection.add($$(this).data("context"))}),collection},filter:function filter(_selector){var collection;return _selector?(collection=MediaCollection.create(),this.$el.children().each(function(){var $node=$$(this);$node.is(_selector)&&collection.add($node.data("context"))}),collection):this},on:function on(){return this.$el.on.apply(this.$el,arguments),this},off:function off(){return this.$el.off.apply(this.$el,arguments),this},trigger:function trigger(){return this.$el.trigger.apply(this.$el,arguments),this}},InspectorInterface={playing:function playing(_filterSelector){var playing=this.find(".PLAYING").filter(_filterSelector);return!!playing.length&&playing},has:function has(_query){return this.background?["background","voiceOver","sfx"].some(function(_name){return this[_name].has(_query)}.bind(this)):this[_query]?!0:this.some(function(_audio){return _audio===_query||_audio.media===_query||_audio.fileName===_query||_audio.id()===_query})}},LegislatorInterface={rule:function rule(_selector,_event,_handler){var handler,args;handler=[typeof _event,typeof _handler].indexOf("function"),args=_util2["default"].toArray(arguments).slice(1),"function"==typeof _event&&(_event="play pause stopped ended"),this.on(_event,function(_e){_e.target.$el.is(_selector)&&args[handler].apply(this,arguments)}.bind(this))}},StateInterface={state:function state(){return this.$el.state.apply(this.$el,arguments)},addState:function addState(_state){return this.$el.addClass(_state.toUpperCase())},removeState:function removeState(_state){return this.$el.removeClass(_state.toUpperCase())}},PlayableInterface={proxyEvent:function proxyEvent(_event){var theEvent=$$.Event(_event.type,{target:this,targetSource:_event.target,targetNode:this.media});this.activeSource&&("ended"===_event.type&&(this.removeState("PLAYING"),this.activeSource=null),this.trigger(theEvent)),_event.target.removeEventListener(_event.type,this.handler.bind(this),!1)},handler:function handler(_event){"ended"===_event.type&&_event.activeSource&&_event.activeSource.disconnect(),this.proxyEvent.call(this,_event)},simEnd:function simEnd(){this.activeSource&&(console.warn("Native `ended` failed to fire, simulating..."),this.handler({target:this.activeSource,type:"ended"}))},playSource:function playSource(){var time;this.buffer?(this.activeSource.start(0),this.startTime=new Date,this.activeSource.loop||(time=Math.ceil(1e3*this.buffer.duration)+250,this.timeout=setTimeout(this.simEnd.bind(this),time))):this.media.play(),this.delayID=null},play:function play(_selector){function response(_val){shouldPlay=_val}var ctx,src,dest,delay,shouldPlay;return ctx=this.audioContext||pl.game.getAudioContext(),shouldPlay=!0,this.background?this.background.play():null!=this.length?_selector?this[_selector]?this[_selector].play():this.find(_selector).play():this[0]&&this[0].play():(src=this.getSource())?(src.connect(this.gain),src.addEventListener("ended",this.handler.bind(this),!1),this.trigger($$.Event("shouldPlay",{target:this,targetSource:src,targetNode:this.media,response:response})),shouldPlay&&(this.addState("PLAYING"),this.activeSource=src,(delay=this.config("delay"))?this.delayID=setTimeout(this.playSource.bind(this),_util2["default"].toMillisec(delay)):this.playSource.call(this),this.handler({target:src,type:"play"})),this):!1},pause:function pause(){return this.buffer&&(this.pauseTime=new Date,clearTimeout(this.timeout),this.timeout=null),this},resume:function resume(){var time;return this.buffer&&(this.activeSource.loop||(time=Math.ceil(1e3*this.buffer.duration-(this.pauseTime-this.startTime))+250,this.timeout=setTimeout(this.simEnd.bind(this),time))),this},stop:function stop(_filterSelector){var stopEvent=$$.Event("stopped",{target:this,targetSource:this.activeSource,targetNode:this.media});if(this.background)return this.background.stop(_filterSelector);if(null!=this.length){if("@ALL"!==_filterSelector)return this[0]&&this[0].stop();this.forEach(function(_audio){_audio.stop()})}return this.activeSource?(this.buffer?this.delayID||this.activeSource.stop():(this.media.pause(),this.media.currentTime=0),this.delayID&&(clearTimeout(this.delayID),this.delayID=null),this.activeSource=null,this.removeState("PLAYING"),this.trigger(stopEvent),this):!1},volume:function volume(_level,_filterSelector){if(this.background)return this.background.volume(_level);if(null!=this.length){if("@ALL"!==_filterSelector)return this[0]&&this[0].volume(_level);this.forEach(function(_audio){_audio.volume(_level)})}this.gain.gain.value=_level},startTime:0,pauseTime:0},exports["default"]=_typesType2["default"](MediaManager,AudioManager,AudioCollection,Audio),AudioCollection.extend(MediaCollection),module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(44),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(45),__webpack_require__(46),__webpack_require__(62),__webpack_require__(69),module.exports=__webpack_require__(11).Promise},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(47)(!0);__webpack_require__(49)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var O=this._t,index=this._i,point;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(48),defined=__webpack_require__(37);module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;return 0>i||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),55296>a||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(50),$export=__webpack_require__(9),redefine=__webpack_require__(51),hide=__webpack_require__(52),has=__webpack_require__(55),Iterators=__webpack_require__(56),$iterCreate=__webpack_require__(57),setToStringTag=__webpack_require__(58),getProto=__webpack_require__(8).getProto,ITERATOR=__webpack_require__(59)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto($default.call(new Base));setToStringTag(IteratorPrototype,TAG,!0),!LIBRARY&&has(proto,FF_ITERATOR)&&hide(IteratorPrototype,ITERATOR,returnThis),DEF_VALUES&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function values(){return $native.call(this)})}if(LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:DEF_VALUES?getMethod("entries"):$default},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!0},function(module,exports,__webpack_require__){module.exports=__webpack_require__(52)},function(module,exports,__webpack_require__){var $=__webpack_require__(8),createDesc=__webpack_require__(53);module.exports=__webpack_require__(54)?function(object,key,value){return $.setDesc(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(39)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(8),descriptor=__webpack_require__(53),setToStringTag=__webpack_require__(58),IteratorPrototype={};__webpack_require__(52)(IteratorPrototype,__webpack_require__(59)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=$.create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var def=__webpack_require__(8).setDesc,has=__webpack_require__(55),TAG=__webpack_require__(59)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){var store=__webpack_require__(60)("wks"),uid=__webpack_require__(61),Symbol=__webpack_require__(10).Symbol;module.exports=function(name){return store[name]||(store[name]=Symbol&&Symbol[name]||(Symbol||uid)("Symbol."+name))}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports,__webpack_require__){__webpack_require__(63);var Iterators=__webpack_require__(56);Iterators.NodeList=Iterators.HTMLCollection=Iterators.Array},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(64),step=__webpack_require__(65),Iterators=__webpack_require__(56),toIObject=__webpack_require__(66);module.exports=__webpack_require__(49)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(67),defined=__webpack_require__(37);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(68);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(8),LIBRARY=__webpack_require__(50),global=__webpack_require__(10),ctx=__webpack_require__(12),classof=__webpack_require__(70),$export=__webpack_require__(9),isObject=__webpack_require__(71),anObject=__webpack_require__(72),aFunction=__webpack_require__(13),strictNew=__webpack_require__(73),forOf=__webpack_require__(74),setProto=__webpack_require__(79).set,same=__webpack_require__(80),SPECIES=__webpack_require__(59)("species"),speciesConstructor=__webpack_require__(81),asap=__webpack_require__(82),PROMISE="Promise",process=global.process,isNode="process"==classof(process),P=global[PROMISE],Wrapper,testResolve=function(sub){var test=new P(function(){});return sub&&(test.constructor=Object),P.resolve(test)===test},USE_NATIVE=function(){function P2(x){var self=new P(x);return setProto(self,P2.prototype),self}var works=!1;try{if(works=P&&P.resolve&&testResolve(),setProto(P2,P),P2.prototype=$.create(P.prototype,{constructor:{value:P2}}),P2.resolve(5).then(function(){})instanceof P2||(works=!1),works&&__webpack_require__(54)){var thenableThenGotten=!1;P.resolve($.setDesc({},"then",{get:function(){thenableThenGotten=!0}})),works=thenableThenGotten}}catch(e){works=!1}return works}(),sameConstructor=function(a,b){return LIBRARY&&a===P&&b===Wrapper?!0:same(a,b)},getConstructor=function(C){var S=anObject(C)[SPECIES];return void 0!=S?S:C},isThenable=function(it){var then;return isObject(it)&&"function"==typeof(then=it.then)?then:!1},PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)},perform=function(exec){try{exec()}catch(e){return{error:e}}},notify=function(record,isReject){if(!record.n){record.n=!0;var chain=record.c;asap(function(){for(var value=record.v,ok=1==record.s,i=0,run=function(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,result,then;try{handler?(ok||(record.h=!0),result=handler===!0?value:handler(value),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);chain.length=0,record.n=!1,isReject&&setTimeout(function(){var promise=record.p,handler,console;isUnhandled(promise)&&(isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)),record.a=void 0},1)})}},isUnhandled=function(promise){var record=promise._d,chain=record.a||record.c,i=0,reaction;if(record.h)return!1;for(;chain.length>i;)if(reaction=chain[i++],reaction.fail||!isUnhandled(reaction.promise))return!1;return!0},$reject=function(value){var record=this;record.d||(record.d=!0,record=record.r||record,record.v=value,record.s=2,record.a=record.c.slice(),notify(record,!0))},$resolve=function(value){var record=this,then;if(!record.d){record.d=!0,record=record.r||record;try{if(record.p===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?asap(function(){var wrapper={r:record,d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(record.v=value,record.s=1,notify(record,!1))}catch(e){$reject.call({r:record,d:!1},e)}}};USE_NATIVE||(P=function Promise(executor){aFunction(executor);var record=this._d={p:strictNew(this,P,PROMISE),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{executor(ctx($resolve,record,1),ctx($reject,record,1))}catch(err){$reject.call(record,err)}},__webpack_require__(87)(P.prototype,{then:function then(onFulfilled,onRejected){var reaction=new PromiseCapability(speciesConstructor(this,P)),promise=reaction.promise,record=this._d;return reaction.ok="function"==typeof onFulfilled?onFulfilled:!0,reaction.fail="function"==typeof onRejected&&onRejected,record.c.push(reaction),record.a&&record.a.push(reaction),record.s&&notify(record,!1),promise},"catch":function(onRejected){return this.then(void 0,onRejected)}})),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:P}),__webpack_require__(58)(P,PROMISE),__webpack_require__(88)(PROMISE),Wrapper=__webpack_require__(11)[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=new PromiseCapability(this),$$reject=capability.reject;return $$reject(r),capability.promise}}),$export($export.S+$export.F*(!USE_NATIVE||testResolve(!0)),PROMISE,{resolve:function resolve(x){if(x instanceof P&&sameConstructor(x.constructor,this))return x;var capability=new PromiseCapability(this),$$resolve=capability.resolve;return $$resolve(x),capability.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(89)(function(iter){P.all(iter)["catch"](function(){})})),PROMISE,{all:function all(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),resolve=capability.resolve,reject=capability.reject,values=[],abrupt=perform(function(){forOf(iterable,!1,values.push,values);var remaining=values.length,results=Array(remaining);remaining?$.each.call(values,function(promise,index){var alreadyCalled=!1;C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,results[index]=value,--remaining||resolve(results))},reject)}):resolve(results)});return abrupt&&reject(abrupt.error),capability.promise},race:function race(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),reject=capability.reject,abrupt=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return abrupt&&reject(abrupt.error),capability.promise}})},function(module,exports,__webpack_require__){var cof=__webpack_require__(68),TAG=__webpack_require__(59)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}());module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=(O=Object(it))[TAG])?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(71);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(12),call=__webpack_require__(75),isArrayIter=__webpack_require__(76),anObject=__webpack_require__(72),toLength=__webpack_require__(77),getIterFn=__webpack_require__(78);module.exports=function(iterable,entries,fn,that){var iterFn=getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++)entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)call(iterator,f,step.value,entries)}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(72);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(56),ITERATOR=__webpack_require__(59)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(48),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var classof=__webpack_require__(70),ITERATOR=__webpack_require__(59)("iterator"),Iterators=__webpack_require__(56);module.exports=__webpack_require__(11).getIteratorMethod=function(it){
return void 0!=it?it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]:void 0}},function(module,exports,__webpack_require__){var getDesc=__webpack_require__(8).getDesc,isObject=__webpack_require__(71),anObject=__webpack_require__(72),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=__webpack_require__(12)(Function.call,getDesc(Object.prototype,"__proto__").set,2),set(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function setPrototypeOf(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},function(module,exports){module.exports=Object.is||function is(x,y){return x===y?0!==x||1/x===1/y:x!=x&&y!=y}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(72),aFunction=__webpack_require__(13),SPECIES=__webpack_require__(59)("species");module.exports=function(O,D){var C=anObject(O).constructor,S;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),macrotask=__webpack_require__(83).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(68)(process),head,last,notify,flush=function(){var parent,domain,fn;for(isNode&&(parent=process.domain)&&(process.domain=null,parent.exit());head;)domain=head.domain,fn=head.fn,domain&&domain.enter(),fn(),domain&&domain.exit(),head=head.next;last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=1,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=-toggle}}else notify=Promise&&Promise.resolve?function(){Promise.resolve().then(flush)}:function(){macrotask.call(global,flush)};module.exports=function asap(fn){var task={fn:fn,next:void 0,domain:isNode&&process.domain};last&&(last.next=task),head||(head=task,notify()),last=task}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(12),invoke=__webpack_require__(84),html=__webpack_require__(85),cel=__webpack_require__(86),global=__webpack_require__(10),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listner=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function clearImmediate(id){delete queue[id]},"process"==__webpack_require__(68)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listner,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listner,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(10).document&&document.documentElement},function(module,exports,__webpack_require__){var isObject=__webpack_require__(71),document=__webpack_require__(10).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var redefine=__webpack_require__(51);module.exports=function(target,src){for(var key in src)redefine(target,key,src[key]);return target}},function(module,exports,__webpack_require__){"use strict";var core=__webpack_require__(11),$=__webpack_require__(8),DESCRIPTORS=__webpack_require__(54),SPECIES=__webpack_require__(59)("species");module.exports=function(KEY){var C=core[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&$.setDesc(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(59)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){safe=!0},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){"use strict";function Bindings(_from,_to){var method;for(method in _from)"function"==typeof _from[method]&&(this[method]=_from[method].bind(_to))}function toArray(_itterable){return[].map.call(_itterable,function(m){return m})}function type(){function createApi(_constructor){var args,api;return args=(Function.prototype.toString.call(_constructor).match(/\(((?:\s*[^\(\)\.\s,]+\s*,?)+)\)/)||["",""])[1].split(/\s*,\s*/),api={proto:function proto(_obj,_name,_args){var proto,method;if(proto=Object.getPrototypeOf(this||_obj),method=proto[_name],"function"!=typeof _obj[_name])throw new TypeError("Member "+_name+" is not a function.");if(!method)return new Bindings(proto,_obj);if(proto.hasOwnProperty(_name)&&_obj[_name]!==proto[_name])return _args?method.apply(_obj,_args):method.bind(_obj);for(;proto;){if(proto.hasOwnProperty(_name)&&_obj[_name]!==proto[_name])return _args?method.apply(_obj,_args):method.bind(_obj);proto=Object.getPrototypeOf(proto)}},base:function base(_obj,_name,_args){var proto,method;if(proto=_constructor.prototype,method=proto[_name],"function"!=typeof method)throw new TypeError("Member "+_name+" is not a function.");return method?_args?method.apply(_obj,_args):method.bind(_obj):new Bindings(proto,_obj)},sup:function sup(_obj,_name,_args){return api.proto.apply(_constructor.prototype,arguments)},constant:function constant(_obj,_name,_value){return _Object$defineProperty(_obj,_name,{value:_value,configureable:!1,writeable:!1}),api},"static":function _static(_name_def,_value){var member,_name,_def;if(_value?_name=_name_def:_def=_name_def,_def)for(member in _def)_def.hasOwnProperty(member)&&(_constructor[member]=_def[member]);return _name&&(_constructor[_name]=_value),api},$:function $(){var args=toArray(arguments);return args.forEach(function(_member){var memberType,props,key;switch(memberType=typeof _member){case"string":props=_member.split(/\s*,\s*/),props&&props.forEach(function(_def){var prop,val;prop=_def.split(/\s*[:=]\s*/);try{val=JSON.parse(prop[1])}catch(e){}_constructor.prototype[prop[0]]="undefined"!=typeof prop[1]?val||prop[1]:null});break;case"object":for(key in _member)_member.hasOwnProperty(key)&&(_constructor.prototype[key]=_member[key]);break;case"function":if(!_member.name)throw TypeError("Member must be a named function.");_constructor.prototype[_member.name]=_member}}),api}},args.map(function(_call){return api[_call]||module[_call]})}var defs,module;return defs=toArray(arguments),module=this?this:{},defs.forEach(function(_constructor){var api;if("object"==typeof _constructor){var Super,keys=_Object$keys(_constructor);if(1===keys.length&&module[keys[0]])return Super=module[keys[0]],Super.extend.call(module,_constructor[keys[0]])}api=createApi(_constructor),_constructor.create=function(){var instance=_Object$create(_constructor.prototype);return"function"==typeof instance.alloc&&instance.alloc.apply(instance,arguments),instance},_constructor.extend=function(_definition){return _definition.prototype=_Object$create(_constructor.prototype,{constructor:{value:_definition,enumerable:!1,writeable:!1,configureable:!1}}),type.call(this===_constructor?null:this,_definition)},_constructor.apply(_constructor.prototype,api),module[_constructor.name]=_constructor}),defs.length>1?module:defs[0]}var _Object$defineProperty=__webpack_require__(91)["default"],_Object$keys=__webpack_require__(33)["default"],_Object$create=__webpack_require__(20)["default"];exports.__esModule=!0,exports["default"]=type,module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(92),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(8);module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports,__webpack_require__){function invokeResponsibilities(_scope,_event){_scope&&_scope.responsibilities&&_scope.isMemberSafe("responsibilities")&&_scope.responsibilities.forEach(function(_record){_record.name===_event.name&&_record.ability.call(_scope,_event)})}var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_typesGlobalScope=__webpack_require__(30),_typesGlobalScope2=_interopRequireDefault(_typesGlobalScope),_typesCollection=__webpack_require__(29),_typesCollection2=_interopRequireDefault(_typesCollection),_typesDimensions=__webpack_require__(14),_typesQueue=__webpack_require__(40),_typesQueue2=_interopRequireDefault(_typesQueue),Entity=_typesGlobalScope2["default"].extend(function(){function resolveTarget(_target){switch(typeof _target){case"string":return this.findOwn(_target);case"object":if(_target.jquery)return _target;if(Entity.isPrototypeOf(_target))return _target;if(_target.nodeType===document.ELEMENT_NODE)return $(_target)}return this}function ResponsibilityRecord(_name,_ability){this.name=_name,this.ability=_ability}function dragGreeter(_event){switch(_event.type){case"drag-start":this.grab(_event.state);break;case"drag-move":this.dragging(_event.state);break;case"drag-end":this.release(_event.state)}}function attachDragEvents(){this.draggables&&this.isMemberSafe("draggables")&&this.draggables.length&&this.on("drag-start drag-move drag-end",dragGreeter)}this.baseType="TYPE_ENTITY",this.STATE={PLAYING:"PLAYING",BACKGROUND:"BACKGROUND",VOICE_OVER:"VOICE-OVER",SFX:"SFX"},this.timeoutID=null,this.intervalID=null,this.responsibilities=null,this.isComplete=!1,this.shouldInheritAbilities=!0,this.frameHandlers=null,this.frameRate=60,this.draggables=null,this.requiredQueue=null,this.bgImageCollection=null,this.handleProperty({size:function size(_node,_name,_value){var size;this.is(_node)&&(size=_value.split(/\s*[x,]\s*/),this.css({width:size[0],height:size[1]||size[0]}))},position:function position(_node,_name,_value){var size;this.is(_node)&&(size=_value.split(/\s*[x,]\s*/),this.css({top:size[1]||size[0],left:size[0]}))},draggable:function draggable(_node,_name,_value){this.hasOwnProperty("draggables")||(this.draggables=$()),this.draggables.push(_node)},bg:function bg(_node,_name,_value){var img=new Image;this.hasOwnProperty("bgImageCollection")||(this.bgImageCollection=[]),this.isMemberSafe("bgImageCollection")&&(img.src=_value,this.bgImageCollection.push(img),$(_node).css("background-image","url("+_value+")"))}}),this.__init=function(_event){return this.bgImageCollection&&this.isMemberSafe("bgImageCollection")&&this.watchAssets(this.bgImageCollection),attachDragEvents.call(this),this.proto()},this.size=function(){var size;return arguments.length?(size=_typesDimensions.Size.create(arguments),this.css(size),size):_typesDimensions.Size.create().set(this.width(),this.height())},this.propagateBehavior=function(_event){var ids;return ids=[],this.findOwn(".pl-scope").each(function(_index,_node){var $node=$(_node);ids.push($node.id()||$node.address())}),this.hasOwnProperty("entities")&&this.entities.length&&this.entities.forEach(function(_scope){invokeResponsibilities(_scope,_event),_scope.propagateBehavior(_event)}),this},this.require=function(_entity){return this.hasOwnProperty("requiredQueue")||(this.requiredQueue=_typesQueue2["default"].create(),this.requiredQueue.on("complete",this.bind(function(){this.log("entity complete"),this.complete()})),this.respond("complete",function(_event){this.has(_event.target)&&_event.targetScope!==this&&this.requiredQueue.ready(_event.behaviorTarget)})),this.requiredQueue.add(_entity),this.gate(),this},this.behavior=function(_name,_behavior){return _behavior.method=this[_name]=function(){var behaviorEvent,result;return behaviorEvent={name:_name,message:"",targetScope:this,behaviorTarget:this},result=_behavior.apply(this,arguments),"object"==typeof result&&(behaviorEvent=_util2["default"].mixin(behaviorEvent,result)),result!==!1&&this.trigger($.Event("behavior",behaviorEvent)),this},this},this.respond=function(){var name,ability,parentScope,abilities,protoAbilities;if(this.hasOwnProperty("responsibilities")||(abilities=_typesCollection2["default"].create(),protoAbilities=this.provideAblilityPototype(),this.shouldInheritAbilities&&protoAbilities&&protoAbilities.responsibilities&&abilities.push.apply(abilities,protoAbilities.responsibilities),this.responsibilities=abilities),1===arguments.length)switch(typeof arguments[0]){case"string":name=arguments[0];break;case"function":case"object":ability=arguments[0]}else name=arguments[0],ability=arguments[1];switch(typeof ability){case"object":for(name in ability)ability.hasOwnProperty(name)&&this.respond(name,ability[name]);break;case"function":this.responsibilities.add(new ResponsibilityRecord(name,ability))}return this},this.delay=function(_time,_cb){var time=_util2["default"].toMillisec(_time);return _util2["default"].assignRef(this,"timeoutID",setTimeout(_cb.bind(this),time)),this},this.repeat=function(_time,_cb){var time=_util2["default"].toMillisec(_time);return _util2["default"].assignRef(this,"intervalID",setInterval(_cb.bind(this),time)),this},this.kill=function(_timer){var id="repeat"===_timer?this.intervalID:this.timeoutID;return"number"==typeof id?(("repeat"===_timer?clearInterval:clearTimeout)(id),this["repeat"===_timer?"intervalID":"timeoutID"]=null):id&&(id.forEach(function(_id){("repeat"===_timer?clearInterval:clearTimeout)(_id)}),"repeat"===_timer?this.intervalID=null:this.timeoutID=null),this},this.eachFrame=function(_handler,_on){var binder,frame,lastTime,rate,frames;return rate=this.frameRate||1e3,frames=0,lastTime=0,this.hasOwnProperty("frameHandlers")&&0!==this.frameHandlers.length||(frame=function(_time){var i,handler;if(rate&&_time-lastTime>=1e3/rate){for(i=0;handler=this.frameHandlers[i];i+=1)handler.call(this,_time,Math.round(1e3/(_time-lastTime)),rate);frames===rate&&(frames=0),frames+=1,lastTime=_time}this.frameHandlers.length&&window.requestAnimationFrame(binder)},binder=this.bind(frame),frame.method=this.eachFrame,this.frameHandlers=_typesCollection2["default"].create(),window.requestAnimationFrame(binder)),_on!==!1?this.frameHandlers.add(_handler):this.frameHandlers.remove(_handler),this},this.state=function(_flag,_definition,_imp){var flag,tester,setter,getter,STATE,def,opperations,names;return _definition?(def=_definition.split(/\s+/),names=_flag.split(/\s+/),opperations=[],def.forEach(this.bind(function(_opp){var method,flag;method="+"===_opp.slice(0,1)?"addClass":"removeClass",opperations.push({method:method,flag:_opp.slice(1)}),"addClass"===method&&(flag=_opp.slice(1),STATE=_util2["default"].transformId(flag),this.STATE[STATE]=flag)})),setter=names[0],tester=names[1],this[setter]=function(_target){var target,uiStateEvent,oppsPerformed;return target=resolveTarget.call(this,_target),uiStateEvent=$.Event("ui-"+setter,{target:target.jquery?target[0]:target,targetScope:this}),oppsPerformed=0,_imp&&_imp.shouldSet&&_imp.shouldSet.apply(this,arguments)===!1?!(!_imp||!_imp.notSet)&&_imp.notSet.apply(this,arguments):(_imp&&_imp.willSet&&_imp.willSet.apply(this,arguments),opperations.forEach(function(_record){oppsPerformed+=Number(target.hasClass(_record.flag)===!~_record.method.indexOf("add")),target[_record.method](_record.flag)}),_imp&&_imp.didSet&&_imp.didSet.apply(this,arguments),oppsPerformed?(this.trigger(uiStateEvent),target):!1)},tester&&(getter="get"+tester.slice(0,1).toUpperCase()+tester.slice(1),this[tester]=function(_target){var target;return target=resolveTarget.call(this,_target),target.hasClass(this.STATE[STATE])},this[getter]=function(){return this.findOwn("."+this.STATE[STATE])}),this):this.proto(_flag)},this.provideBehaviorEventScope=function(){return this},this.provideAblilityPototype=function(){var owner;return owner=_util2["default"].getOwner(this,this.baseType),!!owner&&owner.object},this.completed=function(){return this.game.demoMode||this.hasOwnProperty("isComplete")&&this.isComplete||!this.requiredQueue||this.hasOwnProperty("requiredQueue")&&0===this.requiredQueue.length},this.behavior("complete",function(){return this.hasOwnProperty("isComplete")&&this.isComplete?!1:(this.isComplete=!0,this.addClass("COMPLETE"),{behaviorTarget:this})}),this.behavior("grab",function(_state){return{state:_state,behaviorTarget:_state.$draggable}}),this.behavior("dragging",function(_state){return{state:_state,behaviorTarget:_state.$draggable}}),this.behavior("release",function(_state){return{state:_state,behaviorTarget:_state.$draggable}}),this.state("open opened","+OPEN -LEAVE"),this.state("close","-OPEN"),this.state("leave left","+LEAVE",{willSet:function willSet(_target){this.close(_target)}}),this.state("enable enabled","+ENABLED -DISABLED"),this.state("disable disabled","+DISABLED -ENABLED"),this.state("select selected","+SELECTED",{willSet:function willSet(_target){var target,$parent;target=resolveTarget.call(this,_target),$parent=target.parent(),$parent.find("> .SELECTED").each(this.bind(function(_index,_node){this.deselect(_node)})),$parent.find("> .HIGHLIGHTED").each(this.bind(function(_index,_node){this.unhighlight(_node)}))}}),this.state("deselect","-SELECTED"),this.state("highlight highlighted","+HIGHLIGHTED"),this.state("unhighlight","-HIGHLIGHTED"),this.state("draggable dragEnabled","+DRAGGABLE",{didSet:function didSet(_target){this.translate(resolveTarget.call(this,_target))}}),this.state("undraggable","-DRAGGABLE"),this.state("translate translated","+TRANSLATED",{willSet:function willSet(_target_point,_point){var point,target;target=resolveTarget.call(this,_target_point),point=~[_target_point.x,_target_point.y].indexOf(void 0)?_point:_target_point,point&&target.css("transform","translateX("+point.x+"px) translateY("+point.y+"px)")}}),this.state("untranslate","-TRANSLATED",{willSet:function willSet(){this.css("transform","none")}}),this.state("gate gated","+GATED")});exports["default"]={Entity:Entity,invokeResponsibilities:invokeResponsibilities},module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.__esModule=!0;var _typesEntity=__webpack_require__(93),Screen=_typesEntity.Entity.extend(function(){function attachBehaviorEvent(){this.on("behavior",function(_event){this!==_event.targetScope&&_typesEntity.invokeResponsibilities(this,_event),this.propagateBehavior(_event)})}this.baseType="TYPE_SCREEN",this.game=null,this.screen=null,this.__init=function(){this.proto(),this.is(pl.game.config("screenSelector"))&&attachBehaviorEvent.call(this)},this.start=function(){return this.startAudio(),this},this.stop=function(){return this.stopAudio(),this},this.pause=function(){return this.pauseMedia(),this.hasOwnProperty("entities")&&this.entities&&this.entities.forEach(function(entity){entity.pause()}),this},this.resume=function(){return this.resumeMedia(),this.hasOwnProperty("entities")&&this.entities&&this.entities.forEach(function(entity){entity.resume()}),this},this.startAudio=function(){this.audio&&(this.audio.background.play(),this.audio.voiceOver.play())},this.stopAudio=function(){this.audio&&this.audio.voiceOver.stop("@ALL")},this.pauseMedia=function(){if(this.currentMedia)for(var media in this.currentMedia)this.currentMedia.hasOwnProperty(media)&&this.currentMedia[media]&&this.currentMedia[media].pause()},this.resumeMedia=function(){if(this.currentMedia)for(var media in this.currentMedia)this.currentMedia.hasOwnProperty(media)&&this.currentMedia[media]&&this.currentMedia[media].resume()},this.index=function(){return this===this.screen?this.game.screens.indexOf(this):this.$els.index()},this.next=function(){return this.completed()?this.game.screens[this.screen.index()+1]:!1},this.prev=function(){return this.game.screens[this.screen.index()-1]},this.quit=function(){this.game.quit.open()},this.nextSib=function(){return $.fn.next.apply(this.$els,arguments)},this.prevSib=function(){return $.fn.prev.apply(this.$els,arguments)},this.isLast=function(){return this.game.screens.indexOf(this.screen)===this.game.screens.length-1}});exports["default"]=Screen,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _Object$defineProperties=__webpack_require__(15)["default"],_interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),_playGame=__webpack_require__(24),_playGame2=_interopRequireDefault(_playGame),_typesGlobalScope=__webpack_require__(30),_typesGlobalScope2=_interopRequireDefault(_typesGlobalScope),_typesScreen=__webpack_require__(94),_typesScreen2=_interopRequireDefault(_typesScreen),_typesCollection=__webpack_require__(29),_typesCollection2=_interopRequireDefault(_typesCollection),_typesScope=__webpack_require__(31),_typesDimensions=__webpack_require__(14),_typesAudioManager=__webpack_require__(42),Game=_typesGlobalScope2["default"].extend(function(){function detechDevice(){var deviceClasses="";iOS()&&(deviceClasses+="iOS "),mobileOrTablet()&&(deviceClasses+="MOBILE "),this.addClass(deviceClasses)}function iOS(){var iDevices=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;iDevices.length;)if(navigator.platform===iDevices.pop())return!0;return!1}function mobileOrTablet(){var check=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0)}(navigator.userAgent||navigator.vendor||window.opera),check}function scaleGame(){var vpSize,gameDimensions,width,height,zoom;vpSize=this.viewport.size(),gameDimensions=_playGame2["default"].config("dimensions"),width=gameDimensions.width||this.width(),height=Math.round(gameDimensions.width/gameDimensions.ratio),zoom=this.viewport.width/width,Math.round(height*zoom)>this.viewport.height&&(zoom=(this.viewport.height/height).toPrecision(4)),_util2["default"].mixin(this.node().style,{width:width+"px",zoom:zoom}),this.css("zoom")||this.css({transform:"scale("+zoom+")",transformOrigin:(1>zoom?"0px":"50%")+" 0px 0px",height:this.viewport.height/zoom}),this.zoom=zoom}function demoMode(_set){this.demoMode=null!=_set?_set:!this.demoMode,this[this.demoMode?"addClass":"removeClass"]("DEMO"),console.info(this.id(),"is now "+(this.demoMode?"in":"out of")+" Demo Mode.")}function collectVideos(){this.find("video").each(function(_index,_node){this.media.video.add(_node),_node.onplay=function(){var playing=this.media.playing(".background, .voiceOver");playing&&playing.stop("@ALL"),this.log("video play",playing)}.bind(this)}.bind(this))}var Viewport,screenPrototype,platformEventHandler;screenPrototype=_typesScreen2["default"],platformEventHandler=new function(){this.invoke=function(_event,_ctx){"function"==typeof this[_event.name]&&this[_event.name].call(_ctx,_event)},this["toggle-demo-mode"]=function(_set){demoMode.call(this)}},this.baseType="TYPE_GAME",this.screens=null,this.zoom=1,this.keyCommands=null,this.demoMode=!1,this.media=null,this.viewport=new function(){var vp,$html,RESIZE_HANDLERS;vp=this,$html=$("html"),RESIZE_HANDLERS=[],$(window).on("resize",function(_event){$html.hasClass(vp.orientation)||$html.removeClass("squareish landscape protrait").addClass(vp.orientation),RESIZE_HANDLERS.forEach(function(_handler){_handler(_event)})}),this.LANDSCAPE="landscape",this.PROTRAIT="protrait",this.SQUAREISH="squareish",this.size=function(){return _typesDimensions.Size.create().set(window.innerWidth,window.innerHeight)},_Object$defineProperties(this,{width:{get:function get(){return window.innerWidth},configurable:!1},height:{get:function get(){return window.innerHeight},configurable:!1},orientation:{get:function get(){var ratio=this.size().ratio();switch(!0){case ratio>.9&&1.1>ratio:return"squareish";case ratio>1.1:return"landscape";case.9>ratio:return"protrait"}}}}),this.onResize=function(_handler){RESIZE_HANDLERS.push(_handler)},this.offResize=function(_handler){var index=RESIZE_HANDLERS.indexOf(_handler);~index&&RESIZE_HANDLERS.splice(index,1)},$html.addClass(this.orientation)},this.willInit=function(){return this.addClass("pl-game"),detechDevice.call(this),scaleGame.call(this),this.watchAudio(),this.captureScreens(),this.viewport.onResize(this.bind(scaleGame)),pl.game.on("platform-event",this.bind(function(_event){platformEventHandler.invoke(_event,this)})),window.addEventListener("load",window.focus),window.addEventListener("focus",function(){this.resume()}.bind(this)),window.addEventListener("blur",function(){this.pause()}.bind(this)),this},this.onKeys=function(_commands,_handler){var sequence,chords,modifiers,map;return this.keyCommands||(this.keyCommands={},map={13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",38:"up",39:"right",40:"down",91:"meta",enter:13,shift:16,ctrl:17,alt:18,esc:27,left:37,up:38,right:39,down:40,meta:91},modifiers=[16,17,18,91],sequence=[],chords=[],this.on("keydown",function(_event){var modifier,key,eventMods,currentMods,command,handler;modifier=!!~modifiers.indexOf(_event.keyCode)&&map[_event.keyCode],key=modifier?modifier:map[_event.keyCode]||String.fromCharCode(_event.keyCode),eventMods=[_event.shiftKey,_event.ctrlKey,_event.altKey,_event.metaKey],currentMods=[],eventMods.forEach(function(_modifierDown,_index){_modifierDown&&currentMods.push(map[modifiers[_index]])}),~chords.indexOf(key)||~sequence.indexOf(key)||(command=chords.length?(chords.push(key),chords.join(",")):(sequence.push(key),sequence.join("+")),handler=this.keyCommands[command],handler&&(handler.call(this,_event,command),sequence=currentMods.map(function(_key,_index){var key=sequence[_index];return currentMods[currentMods.indexOf(key)]}),chords=[],_event.preventDefault()))}),this.on("keyup",function(_event){var key,index,modifier,eventMods,currentMods;key=modifier?modifier:map[_event.keyCode]||String.fromCharCode(_event.keyCode),index=sequence.indexOf(key),modifier=!!~modifiers.indexOf(_event.keyCode)&&map[_event.keyCode],eventMods=[_event.shiftKey,_event.ctrlKey,_event.altKey,_event.metaKey],currentMods=[],eventMods.forEach(function(_modifierDown,_index){_modifierDown&&currentMods.push(map[modifiers[_index]])}),key===modifier?(sequence=currentMods.map(function(_key,_index){var key=sequence[_index];return currentMods[currentMods.indexOf(key)]}),chords=[]):(sequence.length>1&&~modifiers.indexOf(map[sequence[0]])&&chords.push(sequence.join("+")),~index&&sequence.splice(index,1),sequence.length||(chords=[]))})),this.keyCommands[_commands]=_handler,this},this.screen=function(_id,_implementation){var prototype,selector,screenSelector,instance;return 1===arguments.length&&"function"==typeof _id?(screenPrototype=_typesScreen2["default"].extend(_id),this):(this.hasOwnProperty("screens")||(this.screens=_typesCollection2["default"].create()),this.hasOwnProperty("$els")?(screenSelector=pl.game.config("screenSelector"),prototype=screenPrototype.isPrototypeOf(this)?this:screenPrototype,selector="number"==typeof _id?screenSelector+":nth-child("+(_id+1)+")":"#"+_id,instance=prototype.extend(_implementation).initialize(this.find(selector)),instance.screen=instance,instance.game||(instance.game=instance.closest(".pl-game").scope())):this.screens.push({index:"number"==typeof _id?_id:null,name:"string"==typeof _id?_id:null,implementation:_implementation}),this)},this.captureScreens=function(){var screenSelector,prototype,collection;return screenSelector=pl.game.config("screenSelector"),prototype=screenPrototype.isPrototypeOf(this)?this:screenPrototype,collection=[],this.findOwn(screenSelector).each(this.bind(function(_index,_node){var $node,screen,record,key,id,index,component;$node=$(_node),id=$node.id(),key=id?"name":(id=_index,"index"),record=this.screens&&this.screens.get(id,key),component=$node.attr("pl-component"),screen=_typesScope.createEntity.call(prototype,$node,record&&record.implementation),screen.screen=screen,screen.game=this,null==$node.attr("pl-skip")&&collection.push(screen),("name"===key||component)&&_util2["default"].assignRef(this,_util2["default"].transformId("name"===key&&id||component,!0),screen)})),collection.length&&(this.screens=collection),this},this.watchAudio=function(){this.media=_typesAudioManager.MediaManager.create(this.id()),this.media.rule(".background, .voiceOver","shouldPlay",function(_event){var playing=this.playing()||[];_event.response(!playing||!playing.length||!~playing.indexOf(_event.target)&&!playing.has(_event.target.fileName))}),this.media.rule(".voiceOver",function(_event){var audio,playing;switch(audio=_event.target,playing=audio&&this.playing(".audio:not(#"+audio.id()+")"),_event.type){case"play":playing&&(playing.filter(".voiceOver").stop("@ALL"),playing.filter(".background").volume(_playGame2["default"].config("bgVolume.drop")||.2));break;case"pause":case"stopped":
case"ended":playing&&playing.filter(".background").volume(_playGame2["default"].config("bgVolume.max")||1)}}),this.media.rule(".background","play",function(_event){var playing=this.playing(".background:not(#"+_event.target.id()+")");playing&&playing.stop("@ALL")}),~pl.EVENT.ACTION.indexOf("touch")&&this.on(pl.EVENT.ACTION,function beginAudio(_event){var ctx,screen;ctx=_playGame2["default"].getAudioContext(),screen=this.currentScreen(),screen&&ctx&&"suspended"===ctx.state&&(_playGame2["default"].enableAudioContext(),this.log("awesome!"),screen.startAudio(),this.off(pl.EVENT.ACTION,beginAudio))}),collectVideos.call(this)},this.progress=function(){return{currentScreen:this.currentScreen().index()}},this.currentScreen=function(){return this.findOwn(pl.game.config("screenSelector")+".OPEN").not("#quit").scope()},this.flip=function(){console.log("THATS A FLIP!"),_playGame2["default"].report.flip(this)},this.pause=function(quitScreen){quitScreen||this.addClass("PAUSED"),this.screens.forEach(function(screen){screen.state(screen.STATE.OPEN)&&screen.pause()}),_playGame2["default"].getAudioContext().suspend()},this.resume=function(){this.removeClass("PAUSED"),this.screens.forEach(function(screen){screen.state(screen.STATE.OPEN)&&screen.resume()}),this.hasClass("QUIT-SCREEN")||_playGame2["default"].getAudioContext().resume()},this.exit=function(){console.log("GOODBYE!"),_playGame2["default"].report.exit(this)},this.onKeys("ctrl+D,M",function(){demoMode.call(this)}),this.onKeys("left",function(){var current;current=this.currentScreen(),current&&current.prev()}),this.onKeys("right",function(){var current;current=this.currentScreen(),current&&current.next()})});exports["default"]=Game,module.exports=exports["default"]},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(2)["default"];exports.__esModule=!0;var _util=__webpack_require__(18),_util2=_interopRequireDefault(_util),platform=new function(){function createEvent(_name,_props){var eventObject;return eventObject=_util2["default"].mixin(new Event("game-event",{bubbles:!0,cancelable:!1}),{name:_name,respond:function respond(_data){var platformEvent;platformEvent=$.Event("platform-event",{name:_name,gameData:_data}),pl.game.trigger(platformEvent)}},_props)}this.EVENT_INIT="init",this.EVENT_SAVE="save",this.EVENT_EXIT="exit",this.EVENT_FLIPPED="flipped",this.emit=function(_name){window.frameElement&&window.frameElement.dispatchEvent(createEvent(_name))},this.saveGameState=function(_data){window.frameElement&&window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE,{gameData:_data}))},window.addEventListener("platform-event",function(_event){var platformEvent;platformEvent=$.Event("platform-event",{name:_event.name}),pl.game.trigger(platformEvent)})};exports["default"]=platform,module.exports=exports["default"]}])}]);
//# sourceMappingURL=ai.js.map