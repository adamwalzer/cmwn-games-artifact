{"version":3,"sources":["webpack:///play.js","webpack:///webpack/bootstrap b84964005067773d45ee","webpack:///./source/main.js","webpack:///./~/babel-runtime/helpers/interop-require-default.js","webpack:///./~/babel-runtime/helpers/interopRequireDefault.js","webpack:///./source/jQExtentions.js","webpack:///./~/babel-runtime/core-js/array/for-each.js","webpack:///./~/babel-runtime/~/core-js/library/fn/array/for-each.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.array.for-each.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_export.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_global.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_core.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ctx.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_a-function.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_hide.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-dp.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_an-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_descriptors.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_fails.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_dom-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-primitive.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_property-desc.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-methods.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iobject.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_cof.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_defined.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-length.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-integer.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-species-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-species-constructor.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-array.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_wks.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_shared.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_uid.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_strict-method.js","webpack:///./source/types/Dimensions.js","webpack:///./~/babel-runtime/core-js/object/define-properties.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/define-properties.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.define-properties.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-dps.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_has.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-iobject.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-includes.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-index.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_shared-key.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js","webpack:///./source/types/BasicArray.js","webpack:///./source/util.js","webpack:///./source/types/Basic.js","webpack:///./~/babel-runtime/core-js/object/create.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_html.js","webpack:///./source/lib/matrix.js","webpack:///./source/play.js","webpack:///./source/play.game.js","webpack:///./source/play.game.component.js","webpack:///./source/types/Events.js","webpack:///./source/play.game.manager.js","webpack:///./source/play.game.manager.draggable.js","webpack:///./source/types/Collection.js","webpack:///./source/types/GlobalScope.js","webpack:///./source/types/Scope.js","webpack:///./source/types/jQProxy.js","webpack:///./~/babel-runtime/core-js/object/keys.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-sap.js","webpack:///./source/types/Queue.js","webpack:///./source/evalAction.js","webpack:///./source/types/AudioManager.js","webpack:///./~/babel-runtime/core-js/promise.js","webpack:///./~/babel-runtime/~/core-js/library/fn/promise.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_string-at.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-define.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_library.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_redefine.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iterators.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gpo.js","webpack:///./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-step.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.promise.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_classof.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_an-instance.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_for-of.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-call.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js","webpack:///./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-proto.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gopd.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-pie.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_species-constructor.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_task.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_invoke.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_microtask.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_redefine-all.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-species.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-detect.js","webpack:///./source/types/type.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/define-property.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js","webpack:///./source/types/Entity.js","webpack:///./source/types/Screen.js","webpack:///./source/types/Game.js","webpack:///./source/platform.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","run","_play2","game","_interopRequireDefault","_play","window","play","pl","document","addEventListener","__esModule","obj","default","_Array$forEach","_typesDimensions","_libMatrix","_libMatrix2","original","position","this","scope","result","each","$node","$","data","closest","push","length","_set","undefined","indexOf","attr","address","tag","classes","nodeName","toLowerCase","split","join","state","_test","hasClass","toUpperCase","match","size","arguments","Size","create","css","set","width","height","pos","Point","left","x","top","y","absolutePosition","offset","transform","t","matrix","is3d","setTransform","apply","toCSS","_matrix","i","concat","slice","map","parseFloat","transformPosition","point","translate","e","f","transformScale","scale","a","d","_name","_value","args","removeAttr","attributes","_attr","name","value","exec","_method","_args","toArray","fn","Array","forEach","$export","$forEach","STRICT","P","F","callbackfn","global","core","ctx","hide","PROTOTYPE","type","source","IS_FORCED","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","target","key","own","out","C","b","Function","virtual","R","U","Math","self","__g","version","__e","aFunction","that","it","TypeError","dP","createDesc","object","anObject","IE8_DOM_DEFINE","toPrimitive","Object","defineProperty","O","Attributes","isObject","get","is","createElement","val","toString","valueOf","bitmap","enumerable","configurable","writable","IObject","toObject","toLength","asc","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","index","res","cof","propertyIsEnumerable","defined","toInteger","min","ceil","floor","isNaN","speciesConstructor","isArray","SPECIES","constructor","prototype","arg","store","uid","Symbol","USE_SYMBOL","$exports","SHARED","px","random","fails","method","_Object$defineProperties","_typesBasicArray","_typesBasicArray2","Dimension","to","_Thing","isPrototypeOf","extend","originalMap","planeMap","_argumentsArray","instance","proto","inc","_val","_plane2","dec","_scale","math","_fun","parseInt","planeOf","_index","_handler","getPrototypeOf","product","ratio","quotient","remainder","Number","_width","_height","hypotenuse","sqrt","pow","applyTo","_object","nodeType","ELEMENT_NODE","style","_x","_y","distance","_point","rotate","_origin","_angle","rad","PI","sin","cos","$Object","defineProperties","T","D","getKeys","Properties","keys","$keys","enumBugKeys","has","toIObject","arrayIndexOf","IE_PROTO","names","hasOwnProperty","toIndex","IS_INCLUDES","el","fromIndex","max","shared","_util","_util2","_typesBasic","_typesBasic2","BasicArray","baseType","mixin","util","member","objs","keyOf","_obj","_member","getOwner","_collection_rangeA","_rangeB","round","transformId","_id","_camelCase","replace","_match","RegExp","$1","isSet","every","_arg","toMillisec","_source","tokens","time","units","h","s","_token","unit","_collection","resolvePath","_path","path","testArray","test","assignRef","_ref","__refCollction__","writeable","configureable","noop","resolveFileName","lastIndexOf","createId","_pattern","Date","now","_Object$create","Basic","_implementation","console","error","owner","caller","sup","dPs","Empty","createDict","iframe","gt","iframeDocument","display","appendChild","src","contentWindow","open","write","close","documentElement","Matrix","context","me","_t","cm","clone","flipX","flipY","reflectVector","v","applyToPoint","reset","angle","rotateFromVector","atan2","rotateDeg","scaleU","sx","sy","scaleX","scaleY","shear","shearX","shearY","skew","ax","ay","tan","skewX","skewY","tx","ty","translateX","translateY","a2","b2","c2","d2","e2","f2","a1","b1","c1","d1","e1","f1","divide","isInvertible","im","inverse","divideScalar","isIdentity","dt","interpolate","m2","interpolateAnim","decompose","rotation","useLU","acos","atan","pi","determ","r","determinant","applyToArray","points","l","mxPoints","applyToTypedArray","use64","Float64Array","Float32Array","applyToContext","_q","isValid","noContext","isEqual","q","toCSS3D","toJSON","JSON","stringify","abs","resolveEventType","resolution","_playGame2","feature","ACTION","ACTION_DOWN","ACTION_UP","ACTION_MOVE","ACTION_OUT","_playGame","_typesQueue","_typesQueue2","Queue","EVENT","isDOMReady","initialize","register","ready","_eventName","READY_QUEUE","trigger","GAMES","implementation","nameCollection","_typesGlobalScope2","_typesGame2","_item","_playGameComponent","_playGameComponent2","_playGameManager","_playGameManager2","_typesEvents","_typesEvents2","_typesGlobalScope","_typesEntity","_typesEntity2","_typesScreen","_typesScreen2","_typesGame","_platform","_platform2","CONFIG","audioContext","component","manager","on","_event","log","gameData","loadAll","emit","EVENT_INIT","report","exit","_gameScope","saveGameState","progress","EVENT_EXIT","flip","EVENT_FLIPPED","config","keyMixin","provideEntityType","provideScreenType","_mixin","queue","complete","splice","detect","touch","tester","warn","getAudioContext","AudioContext","webkitAudioContext","onfocus","resume","onblur","suspend","enableAudioContext","silence","createBufferSource","buffer","createBuffer","connect","destination","start","disconnect","COMPONENTS","record","load","_callback","getScript","$components","Events","createProxyFunction","$jq","methods","_playGameManagerDraggable","_playGameManagerDraggable2","draggable","boot","createHelperStyleSheet","attachEvents","E","disableTouchScroll","$draggable","cursor","mode","helperID","dragStartEvent","resolveEventPoint","zoom","createID","$helper","draggableStyleSheet","html","provideSource","createDraggableRule","addClass","appendTo","body","removeClass","Event","targetScope","dragMoveEvent","dragEndEvent","toElement","remove","originalEvent","changedTouches","clientX","clientY","_$draggable","blacklist","rule","prop","getComputedStyle","_rule","_typesCollection","_typesCollection2","COLLECTION_DRAGABLES","preventDefault","draggableManager","Collection","getRecord","_key","_shouldCollect","add","_record","filter","_typesScope","GlobalScope","Scope","createEntity","_$node","componentRecord","Error","_typesJQProxy","_typesJQProxy2","_evalAction","_evalAction2","_typesAudioManager","attachActionHandler","actionables","item","event","action","getRecordBy","removeRecord","captureDropables","_scope","collection","find","pluckAndDrop","_dropables","_template","dropable","replaceWith","children","loadComponentAssets","status","totalRequests","transcludeMode","dropables","TRANSCLUDE_PLUCK","properties","transclude","memory","TRANSCLUDE_APPEND","append","TRANSCLUDE_PREPEND","prepend","empty","TRANSCLUDE_REPLACE","node","findOwn","captureProperties","$els","initializeEntities","entities","bind","$nodes","query","selector","_node","isReady","assetQueue","handleProperties","property","handler","propertyHandlers","getNamedItem","invokeLocal","isMemberSafe","init","willInitEvent","initEvent","watchAssets","captureAudioAssets","captureReferences","__init","readyEvent","media","addShadow","audio","collections","voiceOver","background","sfx","__ready","Actionables","_action","isComponent","currentMedia","_node_selector","_componentName","jquery","ReferenceError","willInit","_nodes","createHandler","watch","loadedEvent","onload","onerror","off","deQ","$audio","screen","requiredQueue","AudioManager","then","_audio","require","targetNode","audioEvent","targetSource","handleProperty","entity","_selector","Entity","_child","child","_property","required","_Object$keys","jQProxy","response","registerHandler","resolveEventHandler","_definition","eventRegistry","exclude","listen","_isCapure_handler","_isCapture","cb","ignore","removeEventListener","parent","elOwner","KEY","exp","evalAction","eval","MediaManager","EventTargetInterface","InspectorInterface","LegislatorInterface","StateInterface","alloc","video","AudioBufferRecord","_buffer","getAudioType","className","AUDIO_TYPES","loadArrayBuffer","xhr","fileName","XMLHttpRequest","_Promise","reject","resolve","onLoad","promise","resolveDecoding","rejectDecoding","decodeAudioData","collect","BUFFER_CACHE","statusText","onError","cache","responseType","send","PlayableInterface","_type","AudioCollection","_error","$$","protoype","types","Audio","$el","MediaCollection","_media","$clone","accessConfig","_augment","gain","createGain","getSource","loop","activeSource","createMediaElementSource","message","setContext","_typesType","_typesType2","jQuery","_class","playing","_filterSelector","_query","some","_e","addState","_state","removeState","proxyEvent","theEvent","simEnd","playSource","startTime","duration","timeout","setTimeout","delayID","shouldPlay","dest","delay","pause","pauseTime","clearTimeout","stop","stopEvent","currentTime","volume","_level","Promise","$at","String","iterated","_i","done","TO_STRING","charCodeAt","charAt","LIBRARY","redefine","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","NAME","Constructor","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","TAG","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","IteratorPrototype","descriptor","def","stat","ObjectProto","TO_STRING_TAG","addToUnscopables","step","_k","Arguments","classof","anInstance","forOf","setProto","task","microtask","PROMISE","process","$Promise","isNode","Internal","GenericPromiseCapability","Wrapper","USE_NATIVE","FakePromise","PromiseRejectionEvent","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","$$resolve","$$reject","perform","notify","isReject","_n","chain","_c","_v","ok","_s","reaction","fail","domain","_h","onHandleUnhandled","enter","onUnhandled","abrupt","isUnhandled","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","err","onFulfilled","onRejected","catch","capability","iter","all","iterable","remaining","$index","alreadyCalled","race","ARG","tryGet","callee","forbiddenField","isArrayIter","getIterFn","BREAK","RETURN","iterFn","iterator","ret","ArrayProto","getIteratorMethod","check","setPrototypeOf","buggy","__proto__","pIE","gOPD","getOwnPropertyDescriptor","invoke","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","ONREADYSTATECHANGE","defer","channel","port","listener","nextTick","port2","port1","onmessage","postMessage","importScripts","removeChild","clear","un","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","last","flush","toggle","createTextNode","observe","characterData","safe","DESCRIPTORS","SAFE_CLOSING","riter","from","skipClosing","arr","Bindings","_from","_to","_itterable","createApi","_constructor","api","base","constant","_Object$defineProperty","static","_static","_name_def","_def","memberType","props","memberName","parse","_call","defs","Super","desc","invokeResponsibilities","responsibilities","ability","resolveTarget","_target","ResponsibilityRecord","_ability","dragGreeter","grab","dragging","release","attachDragEvents","draggables","STATE","PLAYING","BACKGROUND","VOICE_OVER","SFX","timeoutID","intervalID","isComplete","shouldInheritAbilities","frameHandlers","frameRate","bgImageCollection","bg","img","Image","propagateBehavior","ids","_entity","respond","behaviorTarget","gate","behavior","_behavior","behaviorEvent","parentScope","abilities","protoAbilities","provideAblilityPototype","_time","_cb","repeat","setInterval","kill","_timer","clearInterval","eachFrame","_on","binder","frame","lastTime","rate","frames","requestAnimationFrame","_flag","_imp","flag","setter","getter","opperations","_opp","uiStateEvent","oppsPerformed","shouldSet","notSet","willSet","didSet","provideBehaviorEventScope","completed","demoMode","$parent","deselect","unhighlight","_target_point","Screen","attachBehaviorEvent","startAudio","stopAudio","pauseMedia","resumeMedia","screens","prev","quit","nextSib","prevSib","isLast","Game","detechDevice","deviceClasses","iOS","mobileOrTablet","iDevices","navigator","platform","pop","substr","userAgent","vendor","opera","scaleGame","vpSize","gameDimensions","viewport","toPrecision","transformOrigin","info","collectVideos","onplay","Viewport","screenPrototype","platformEventHandler","_ctx","keyCommands","vp","$html","RESIZE_HANDLERS","orientation","LANDSCAPE","PROTRAIT","SQUAREISH","innerWidth","innerHeight","onResize","offResize","watchAudio","captureScreens","focus","onKeys","_commands","sequence","chords","modifiers",13,16,17,18,27,37,38,39,40,91,"shift","ctrl","alt","esc","up","right","down","meta","modifier","eventMods","currentMods","command","keyCode","fromCharCode","shiftKey","ctrlKey","altKey","metaKey","_modifierDown","screenSelector","beginAudio","currentScreen","not","quitScreen","OPEN","current","createEvent","_props","eventObject","bubbles","cancelable","_data","platformEvent","EVENT_SAVE","frameElement","dispatchEvent"],"mappings":"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","file":"play.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Boot file for the Play library.\n\t *\n\t * @module\n\t *\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires jQExtentions\n\t * @requires play\n\t */\n\t\n\t__webpack_require__(4);\n\t\n\tvar _play = __webpack_require__(59);\n\t\n\tvar _play2 = _interopRequireDefault(_play);\n\t\n\t/**\n\t * Begin running the library\n\t */\n\tfunction run() {\n\t  _play2['default'].game.run();\n\t}\n\t\n\t// export namespace to global object.\n\twindow.play = window.pl = _play2['default'];\n\t\n\t// Invoke 'run' when DOM has finished loading.\n\tdocument.addEventListener('DOMContentLoaded', run, false);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(3);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (obj) {\n\t  return obj && obj.__esModule ? obj : {\n\t    default: obj\n\t  };\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Array$forEach = __webpack_require__(5)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Extentions to jQuery used by the library.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires types/Dimensions\n\t * @requires Matrix\n\t */\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar _libMatrix = __webpack_require__(58);\n\t\n\tvar _libMatrix2 = _interopRequireDefault(_libMatrix);\n\t\n\t/**\n\t * jQuery's prototype\n\t * @external jQuery\n\t * @see {@link http://api.jquery.com/}\n\t */\n\t\n\t(function () {\n\t  var original;\n\t\n\t  original = {\n\t    position: this.position\n\t  };\n\t\n\t  /**\n\t   * Resolves the scope for each of the set of matched nodes.\n\t   * @function external:jQuery#scope\n\t   * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n\t   */\n\t  this.scope = function () {\n\t    var result;\n\t\n\t    result = [];\n\t\n\t    this.each(function () {\n\t      var $node, scope;\n\t\n\t      $node = $(this);\n\t      scope = $node.data('pl-scope');\n\t\n\t      if (!scope) {\n\t        scope = $node.closest('.pl-scope').data('pl-scope');\n\t      }\n\t\n\t      if (scope) result.push(scope);\n\t    });\n\t\n\t    return result.length > 1 ? result : result[0];\n\t  };\n\t\n\t  /**\n\t   * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n\t   * @function external:jQuery#id\n\t   * @arg {string} [_set] Name to set as the node's id.\n\t   * @returns {string} The resolved id.\n\t   */\n\t  this.id = function (_set) {\n\t    if (_set !== undefined) {\n\t      // Remove attribute.\n\t      if (~['', null].indexOf(_set)) {\n\t        this.attr('id', null);\n\t      }\n\t\n\t      // If document already has the id defined then set as a unique library id.\n\t      if ($('#' + _set).length) {\n\t        this.attr('pl-id', _set);\n\t      } else {\n\t        this.attr('id', _set);\n\t      }\n\t\n\t      return this;\n\t    }\n\t\n\t    return this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n\t  };\n\t\n\t  /**\n\t   * Provides the 'relative' CSS selector for the first node in the collection.\n\t   * @function external:jQuery#address\n\t   * @returns {string}\n\t   *\n\t   * @example\n\t   * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n\t   * $('#sweater').address() // div#sweater.wide\n\t   */\n\t  this.address = function () {\n\t    var tag, id, classes;\n\t\n\t    tag = this[0].nodeName.toLowerCase();\n\t    id = this.attr('id');\n\t    classes = this.attr('class') ? '.' + this.attr('class').split(' ').join('.') : '';\n\t\n\t    return tag + (id ? '#' + id : '') + classes;\n\t  };\n\t\n\t  /**\n\t   * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n\t   * @function external:jQuery#state\n\t   * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n\t   * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n\t   */\n\t  this.state = function (_test) {\n\t    var classes;\n\t\n\t    if (_test) return this.hasClass(_test.toUpperCase());\n\t\n\t    classes = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\t\n\t    return classes && (classes.length === 1 ? classes[0] : classes);\n\t  };\n\t\n\t  this.size = function () {\n\t    var size;\n\t\n\t    if (!arguments.length) {\n\t      size = _typesDimensions.Size.create().set(this.width(), this.height());\n\t    } else {\n\t      size = _typesDimensions.Size.create(arguments);\n\t      this.css(size);\n\t    }\n\t\n\t    return size;\n\t  };\n\t\n\t  this.position = function () {\n\t    var pos;\n\t\n\t    if (!arguments.length) {\n\t      pos = original.position.call(this);\n\t      pos = _typesDimensions.Point.create().set(pos.left, pos.top);\n\t    } else {\n\t      pos = _typesDimensions.Point.create(arguments);\n\t\n\t      this.css({\n\t        position: 'relative',\n\t        left: pos.x,\n\t        top: pos.y\n\t      });\n\t    }\n\t\n\t    return pos;\n\t  };\n\t\n\t  /**\n\t   * Provides the jQuery offset for the first node in the collection.\n\t   * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n\t   * @function external:jQuery#absolutePosition\n\t   * @returns {Point}\n\t   */\n\t  this.absolutePosition = function () {\n\t    var offset;\n\t\n\t    if (!arguments.length) {\n\t      offset = this.offset();\n\t\n\t      return _typesDimensions.Point.create().set(offset.left, offset.top);\n\t    } else {\n\t      offset = _typesDimensions.Point.create(arguments);\n\t\n\t      this.css({\n\t        position: 'absolute',\n\t        top: offset.y,\n\t        left: offset.x\n\t      });\n\t\n\t      return offset;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n\t   * @function external:jQuery#transform\n\t   * @arg {number} [_scaleX] - scale x\n\t   * @arg {number} [_shearY] - shear y\n\t   * @arg {number} [_shearX] - shear x\n\t   * @arg {number} [_scaleY] - scale y\n\t   * @arg {number} [_translateX] - translate x\n\t   * @arg {number} [_translateY] - translate y\n\t   * @returns {Matrix}\n\t   */\n\t\n\t  /**\n\t   * Provides the CSS matrix transform for the first node in the collection.\n\t   * @function external:jQuery#transform\n\t   * @returns {Matrix}\n\t   */\n\t  this.transform = function () {\n\t    var t, matrix, is3d;\n\t\n\t    matrix = new _libMatrix2['default']();\n\t\n\t    if (!arguments.length) {\n\t      t = this.css('transform');\n\t      is3d = !! ~t.indexOf('matrix3d');\n\t\n\t      if (t !== 'none') {\n\t        t = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n\t        if (is3d) {\n\t          t = (function (_matrix) {\n\t            var i, result;\n\t\n\t            result = [];\n\t\n\t            for (i = 0; i < _matrix.length; i += 4) {\n\t              result = result.concat(_matrix.slice(i, i + 2));\n\t            }\n\t            return result;\n\t          })(t);\n\t        }\n\t\n\t        t = t.map(parseFloat);\n\t\n\t        matrix.setTransform.apply(matrix, t);\n\t\n\t        return matrix;\n\t      }\n\t\n\t      return t;\n\t    }\n\t\n\t    matrix.setTransform.apply(matrix, arguments);\n\t\n\t    this.css('transform', matrix.toCSS());\n\t\n\t    return matrix;\n\t  };\n\t\n\t  /**\n\t   * Getter/Setter for the CSS transform translation. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {Point} _point - A point object {x,y}\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Getter/Setter for the CSS transform translation.\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {number} _x - x coordinate\n\t   * @arg {number} _y - y coordinate\n\t   * @returns {Point}\n\t   */\n\t  this.transformPosition = function () {\n\t    var matrix, point;\n\t\n\t    matrix = this.transform();\n\t    point = _typesDimensions.Point.create().set(0, 0);\n\t\n\t    if (!arguments.length) {\n\t      if (matrix !== 'none') point.set(matrix.e, matrix.f);\n\t    } else {\n\t      if (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t      point.set.apply(point, arguments);\n\t      matrix.translate(point.x, point.y);\n\t      this.css('transform', matrix.toCSS());\n\t    }\n\t\n\t    return point;\n\t  };\n\t\n\t  /**\n\t   * Getter for the CSS transform scale. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Setter for the CSS transform scale. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {Point} _point - A point object {x,y}\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Setter for the CSS transform scale.\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {number} _x - x coordinate\n\t   * @arg {number} _y - y coordinate\n\t   * @returns {Point}\n\t   */\n\t  this.transformScale = function () {\n\t    var matrix, scale;\n\t\n\t    matrix = this.transform();\n\t    scale = _typesDimensions.Point.create().set(1, 1);\n\t\n\t    if (!arguments.length) {\n\t      if (matrix !== 'none') scale.set(matrix.a, matrix.d);\n\t    } else {\n\t      if (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t      scale.set.apply(scale, arguments);\n\t      matrix.scale(scale.x, scale.y);\n\t      this.css('transform', matrix.toCSS());\n\t    }\n\t\n\t    return scale;\n\t  };\n\t\n\t  /**\n\t   * Accessor method for `pl` attributes.\n\t   */\n\t  this.pl = function (_name, _value) {\n\t    var args, result;\n\t\n\t    if (!_name) {\n\t      result = {};\n\t      this.each(function () {\n\t        _Array$forEach(this.attributes, function (_attr) {\n\t          if (_attr.name.indexOf('pl-') === 0) {\n\t            result[_attr.name.slice(3)] = _attr.value;\n\t          }\n\t        });\n\t      });\n\t      return result;\n\t    }\n\t\n\t    args = ['pl-' + _name];\n\t    if (typeof _value !== 'undefined') args.push(_value);\n\t\n\t    if (_value === null) {\n\t      this.removeAttr('pl-' + _name);\n\t      return this;\n\t    }\n\t\n\t    return this.attr.apply(this, args);\n\t  };\n\t\n\t  /**\n\t   * Invoke a method of each item in the set of matched elements.\n\t   */\n\t  this.exec = function (_method, _args) {\n\t    return this.map(function () {\n\t      if (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n\t    }).toArray();\n\t  };\n\t}).call($.fn);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(6), __esModule: true };\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(7);\n\tmodule.exports = __webpack_require__(10).Array.forEach;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\r\n\tvar $export  = __webpack_require__(8)\r\n\t  , $forEach = __webpack_require__(23)(0)\r\n\t  , STRICT   = __webpack_require__(36)([].forEach, true);\r\n\t\r\n\t$export($export.P + $export.F * !STRICT, 'Array', {\r\n\t  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\r\n\t  forEach: function forEach(callbackfn /* , thisArg */){\r\n\t    return $forEach(this, callbackfn, arguments[1]);\r\n\t  }\r\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(9)\n\t  , core      = __webpack_require__(10)\n\t  , ctx       = __webpack_require__(11)\n\t  , hide      = __webpack_require__(13)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , expProto  = exports[PROTOTYPE]\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(a, b, c){\n\t        if(this instanceof C){\n\t          switch(arguments.length){\n\t            case 0: return new C;\n\t            case 1: return new C(a);\n\t            case 2: return new C(a, b);\n\t          } return new C(a, b, c);\n\t        } return C.apply(this, arguments);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n\t    if(IS_PROTO){\n\t      (exports.virtual || (exports.virtual = {}))[key] = out;\n\t      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n\t      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n\t    }\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library` \n\tmodule.exports = $export;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(12);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP         = __webpack_require__(14)\n\t  , createDesc = __webpack_require__(22);\n\tmodule.exports = __webpack_require__(18) ? function(object, key, value){\n\t  return dP.f(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject       = __webpack_require__(15)\n\t  , IE8_DOM_DEFINE = __webpack_require__(17)\n\t  , toPrimitive    = __webpack_require__(21)\n\t  , dP             = Object.defineProperty;\n\t\n\texports.f = __webpack_require__(18) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n\t  anObject(O);\n\t  P = toPrimitive(P, true);\n\t  anObject(Attributes);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return dP(O, P, Attributes);\n\t  } catch(e){ /* empty */ }\n\t  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n\t  if('value' in Attributes)O[P] = Attributes.value;\n\t  return O;\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(16);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = !__webpack_require__(18) && !__webpack_require__(19)(function(){\r\n\t  return Object.defineProperty(__webpack_require__(20)('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n\t});\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(19)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(16)\n\t  , document = __webpack_require__(9).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\tvar isObject = __webpack_require__(16);\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tmodule.exports = function(it, S){\n\t  if(!isObject(it))return it;\n\t  var fn, val;\n\t  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 0 -> Array#forEach\n\t// 1 -> Array#map\n\t// 2 -> Array#filter\n\t// 3 -> Array#some\n\t// 4 -> Array#every\n\t// 5 -> Array#find\n\t// 6 -> Array#findIndex\n\tvar ctx      = __webpack_require__(11)\n\t  , IObject  = __webpack_require__(24)\n\t  , toObject = __webpack_require__(26)\n\t  , toLength = __webpack_require__(28)\n\t  , asc      = __webpack_require__(30);\n\tmodule.exports = function(TYPE, $create){\n\t  var IS_MAP        = TYPE == 1\n\t    , IS_FILTER     = TYPE == 2\n\t    , IS_SOME       = TYPE == 3\n\t    , IS_EVERY      = TYPE == 4\n\t    , IS_FIND_INDEX = TYPE == 6\n\t    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n\t    , create        = $create || asc;\n\t  return function($this, callbackfn, that){\n\t    var O      = toObject($this)\n\t      , self   = IObject(O)\n\t      , f      = ctx(callbackfn, that, 3)\n\t      , length = toLength(self.length)\n\t      , index  = 0\n\t      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n\t      , val, res;\n\t    for(;length > index; index++)if(NO_HOLES || index in self){\n\t      val = self[index];\n\t      res = f(val, index, O);\n\t      if(TYPE){\n\t        if(IS_MAP)result[index] = res;            // map\n\t        else if(res)switch(TYPE){\n\t          case 3: return true;                    // some\n\t          case 5: return val;                     // find\n\t          case 6: return index;                   // findIndex\n\t          case 2: result.push(val);               // filter\n\t        } else if(IS_EVERY)return false;          // every\n\t      }\n\t    }\n\t    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n\t  };\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(25);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(27);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(29)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\n\tvar speciesConstructor = __webpack_require__(31);\n\t\n\tmodule.exports = function(original, length){\n\t  return new (speciesConstructor(original))(length);\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(16)\r\n\t  , isArray  = __webpack_require__(32)\r\n\t  , SPECIES  = __webpack_require__(33)('species');\r\n\t\r\n\tmodule.exports = function(original){\r\n\t  var C;\r\n\t  if(isArray(original)){\r\n\t    C = original.constructor;\r\n\t    // cross-realm fallback\r\n\t    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\r\n\t    if(isObject(C)){\r\n\t      C = C[SPECIES];\r\n\t      if(C === null)C = undefined;\r\n\t    }\r\n\t  } return C === undefined ? Array : C;\r\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.2.2 IsArray(argument)\n\tvar cof = __webpack_require__(25);\n\tmodule.exports = Array.isArray || function isArray(arg){\n\t  return cof(arg) == 'Array';\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store      = __webpack_require__(34)('wks')\n\t  , uid        = __webpack_require__(35)\n\t  , Symbol     = __webpack_require__(9).Symbol\n\t  , USE_SYMBOL = typeof Symbol == 'function';\n\t\n\tvar $exports = module.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n\t};\n\t\n\t$exports.store = store;\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(9)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar fails = __webpack_require__(19);\r\n\t\r\n\tmodule.exports = function(method, arg){\r\n\t  return !!method && fails(function(){\r\n\t    arg ? method.call(null, function(){}, 1) : method.call(null);\r\n\t  });\r\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(38)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t *\n\t * @module\n\t * @version 1.1\n\t * @author Micah Rolon <functionmicah@gmail.com>\n\t * @requires module:types/BasicArray~BasicArray\n\t *\n\t * @desc *Created: 11/12/14*\n\t *\n\t * This file contains objects for containing values about a plane. i.e. x or width.\n\t * Adds the convenience of keeping these values paired to passed around your application.\n\t * It also includes methods which you perform on the values and returns a new object\n\t * so the original values are maintained.\n\t *\n\t * #### Usage\n\t *\n\t * New instances can be created by calling the create method.\n\t * ```\n\t * cursorLocation = Point.create();\n\t * ```\n\t *\n\t * Then call `set()` to apply your values.\n\t * ```\n\t * cursorLocation.set(event.clientX, event.clientY);\n\t * ```\n\t *\n\t * Then you can use the calculation methods to perform transformations.\n\t * ```\n\t * relativeCursor = cursorLocation.scale(zoom);\n\t * ```\n\t *\n\t * #### Developer Notes\n\t *\n\t * When adding new methods make sure you are returning a new instance.\n\t * Dimensional objects are meant to be immutable.\n\t *\n\t * Follow this pattern:\n\t * ```\n\t * this.method = function () {\n\t *     // set with your calculated values.\n\t *     return this.create().set( ... )\n\t * }\n\t * ```\n\t *\n\t * #### Change Log\n\t * *v1.1 - 12/13/15*\n\t * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n\t */\n\t\n\t/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\t\n\tvar _typesBasicArray = __webpack_require__(50);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\tvar Dimension, Size, Point;\n\t\n\t/**\n\t * The native Array\n\t * @external Array\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n\t */\n\t\n\t/**\n\t * Array prototype extension\n\t * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n\t * @function external:Array#to\n\t * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n\t * @example\n\t * somePoint = [10, 10].to(Point);\n\t * somePoint = [10, 10].to('point');\n\t */\n\tArray.prototype.to = function (_Thing) {\n\t  var map;\n\t\n\t  map = {\n\t    point: Point,\n\t    size: Size\n\t  };\n\t\n\t  if (typeof _Thing === 'string') {\n\t    return map[_Thing.toLowerCase()].create().set(this);\n\t  } else if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n\t    if (!_Thing.isPrototypeOf(this)) {\n\t      return _Thing.set.apply(_Thing.create(), this);\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n\t * @class\n\t * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tDimension = _typesBasicArray2['default'].extend(function () {\n\t  var originalMap;\n\t\n\t  originalMap = this.map;\n\t\n\t  this[0] = this[1] = 0;\n\t  this.planeMap = null, this.length = 2;\n\t\n\t  /**\n\t   * Provides a new instance.\n\t   * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n\t   * @returns {Dimension}\n\t   */\n\t  this.create = function (_argumentsArray) {\n\t    var instance;\n\t\n\t    instance = this.proto();\n\t\n\t    if (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\t\n\t    return instance;\n\t  };\n\t\n\t  /**\n\t   * Incerement each plane by a value or specify each plane.\n\t   * @arg {number} _val - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.inc = function (_val, _plane2) {\n\t    var a, b;\n\t\n\t    if (_val.length === 2) {\n\t      a = _val[0];\n\t      b = _val[1];\n\t    } else if (_plane2 != null) {\n\t      a = _val;\n\t      b = _plane2;\n\t    } else {\n\t      a = b = _val;\n\t    }\n\t\n\t    return this.create().set(this[0] + a, this[1] + b);\n\t  };\n\t\n\t  /**\n\t   * Decerement each plane by a value or specify each plane.\n\t   * @arg {number} _val - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.dec = function (_val, _plane2) {\n\t    var a, b;\n\t\n\t    if (_val.length === 2) {\n\t      a = _val[0];\n\t      b = _val[1];\n\t    } else if (_plane2 != null) {\n\t      a = _val;\n\t      b = _plane2;\n\t    } else {\n\t      a = b = _val;\n\t    }\n\t\n\t    return this.create().set(this[0] - a, this[1] - b);\n\t  };\n\t\n\t  /**\n\t   * Multiply each plane by a value or specify each plane.\n\t   * @arg {number} _scale - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.scale = function (_scale, _plane2) {\n\t    return this.create().set(this[0] * _scale, this[1] * (_plane2 != null ? _plane2 : _scale));\n\t  };\n\t\n\t  /**\n\t   * Perfom a Math function on each plane\n\t   * @arg {string} _fun - a string of the function name in the JS Math object,\n\t   * followed by the whatever arguments the function takes after its first\n\t   * since the first argument is the plane value.\n\t   * @returns {Dimension}\n\t   */\n\t  this.math = function (_fun) {\n\t    var args = [].slice.call(arguments, 1);\n\t\n\t    return this.create().set(Math[_fun].apply(Math, [this[0]].concat(args)), Math[_fun].apply(Math, [this[1]].concat(args)));\n\t  };\n\t\n\t  /**\n\t   * Takes each plane value and passes it to parseInt().\n\t   * @returns {Dimension}\n\t   */\n\t  this.parseInt = function () {\n\t    return this.create().set(parseInt(this[0]), parseInt(this[1]));\n\t  };\n\t\n\t  /**\n\t   * Takes each plane value and passes it to parseFloat().\n\t   * @returns {Dimension}\n\t   */\n\t  this.parseFloat = function () {\n\t    return this.create().set(parseFloat(this[0]), parseFloat(this[1]));\n\t  };\n\t\n\t  /**\n\t   * Resolves the name of the plane at the given index.\n\t   * @arg {number} _index - The index of the plane.\n\t   * @returns {string}\n\t   */\n\t  this.planeOf = function (_index) {\n\t    if (isNaN(parseInt(_index))) return null;\n\t    return this.planeMap[_index];\n\t  };\n\t\n\t  /**\n\t   * Make a new array by iterating over each plane.<br>\n\t   * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n\t   * @arg {function} _handler - handler for each index.\n\t   * @override\n\t   * @returns {Dimension}\n\t   */\n\t  this.map = function (_handler) {\n\t    return originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n\t  };\n\t\n\t  /**\n\t   * Multiplies the planes.\n\t   * @returns {number}\n\t   */\n\t  this.product = function () {\n\t    return this[0] * this[1];\n\t  };\n\t\n\t  /**\n\t   * Divides the planes.\n\t   * @returns {number}\n\t   */\n\t  this.ratio = function () {\n\t    return this[0] / this[1];\n\t  };\n\t\n\t  this.quotient = function () {\n\t    return Math.floor(this[0] / this[1]);\n\t  };\n\t\n\t  this.remainder = function () {\n\t    return this[0] % this[1];\n\t  };\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc 2 Dimensional object containing width and height.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} width - The width.\n\t * @prop {number} height - The height.\n\t */\n\tSize = Dimension.extend(function () {\n\t  /**\n\t   * Maps the names of the indexes.<br>\n\t   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t   * @protected\n\t   * @default ['width', 'height']\n\t   */\n\t  this.planeMap = ['width', 'height'];\n\t\n\t  _Object$defineProperties(this, {\n\t    width: {\n\t      get: function get() {\n\t        return this[0];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[0] = Number(_val);\n\t      }\n\t    },\n\t\n\t    height: {\n\t      get: function get() {\n\t        return this[1];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[1] = Number(_val);\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * Define the size with an object. (overloaded)\n\t   * @function module:types/Dimensions~Size#set\n\t   * @arg {object} _size - A size object {width, height}.\n\t   * @returns {Size}\n\t   */\n\t\n\t  /**\n\t   * Define the size with an array. (overloaded)\n\t   * @function module:types/Dimensions~Size#set\n\t   * @arg {array} _size - A size array [width, height].\n\t   * @returns {Size}\n\t   */\n\t\n\t  /**\n\t   * Define the size.\n\t   * @arg {number} _width - The width.\n\t   * @arg {number} _height - The height.\n\t   * @returns {Size}\n\t   */\n\t  this.set = function (_width, _height) {\n\t    if (arguments.length === 1) {\n\t      if (_width.width !== undefined && _width.height !== undefined) {\n\t        this[0] = Number(_width.width);\n\t        this[1] = Number(_width.height);\n\t      } else if (_width.length === 2) {\n\t        this[0] = Number(_width[0]);\n\t        this[1] = Number(_width[1]);\n\t      }\n\t    } else {\n\t      this[0] = Number(_width);\n\t      this[1] = Number(_height);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Calculates the hypotenuse.\n\t   * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n\t   * @returns {number}\n\t   */\n\t  this.hypotenuse = function () {\n\t    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n\t  };\n\t\n\t  /**\n\t   * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n\t   * @arg {object|HTMLElement} - The object or DOM node.\n\t   * @returns {this}\n\t   */\n\t  this.applyTo = function (_object) {\n\t    if (_object.nodeType === document.ELEMENT_NODE) {\n\t      if (!(_object.width !== undefined || _object.height !== undefined)) {\n\t        _object.style.width = this.width;\n\t        _object.style.height = this.height;\n\t\n\t        return this;\n\t      }\n\t    }\n\t\n\t    _object.width = this.width;\n\t    _object.height = this.height;\n\t\n\t    return this;\n\t  };\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} x - The x coordinate.\n\t * @prop {number} y - The y coordinate.\n\t */\n\tPoint = Dimension.extend(function () {\n\t  /**\n\t   * Maps the names of the indexes.<br>\n\t   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t   * @protected\n\t   * @default ['x', 'y']\n\t   */\n\t  this.planeMap = ['x', 'y'];\n\t\n\t  _Object$defineProperties(this, {\n\t    x: {\n\t      get: function get() {\n\t        return this[0];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[0] = Number(_val);\n\t      }\n\t    },\n\t\n\t    y: {\n\t      get: function get() {\n\t        return this[1];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[1] = Number(_val);\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * Define the point with an object. (overloaded)\n\t   * @function module:types/Dimensions~Point#set\n\t   * @arg {object} _point - A point object {x, y}.\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Define the point with an array. (overloaded)\n\t   * @function module:types/Dimensions~Point#set\n\t   * @arg {array} _point - A point array [x, y].\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Define the point.\n\t   * @arg {number} _x - The x.\n\t   * @arg {number} _y - The y.\n\t   * @returns {Point}\n\t   */\n\t  this.set = function (_x, _y) {\n\t    if (arguments.length === 1) {\n\t      if (_x.x !== undefined && _x.y !== undefined) {\n\t        this[0] = Number(_x.x);\n\t        this[1] = Number(_x.y);\n\t      } else if (_x.length === 2) {\n\t        this[0] = Number(_x[0]);\n\t        this[1] = Number(_x[1]);\n\t      }\n\t    } else {\n\t      this[0] = Number(_x);\n\t      this[1] = Number(_y);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Calculates the distance between the insatnce and a point object.\n\t   * @arg {Point} _point - A point object {x,y}.\n\t   * @returns {Size}\n\t   */\n\t  this.distance = function (_point) {\n\t    if (_point.x !== undefined && _point.y !== undefined) {\n\t      return Size.create().set(_point.x - this.x, _point.y - this.y);\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n\t   * @arg {object|HTMLElement} - The object or DOM node.\n\t   * @returns {this}\n\t   */\n\t  this.applyTo = function (_object) {\n\t    if (_object.nodeType === document.ELEMENT_NODE) {\n\t      _object.style.left = this.x;\n\t      _object.style.top = this.y;\n\t    } else {\n\t      _object.x = this.x;\n\t      _object.y = this.y;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Rotate the point based on an origin point and an angle in degrees.\n\t   * @arg {Point} _origin - A point object {x,y}.\n\t   * @arg {number} _angle - The angle of rotation in degrees.\n\t   * @returns {this}\n\t   */\n\t  this.rotate = function (_origin, _angle) {\n\t    var x, y, rad;\n\t\n\t    rad = _angle * (Math.PI / 180);\n\t\n\t    x = this.x - _origin.x;\n\t    y = this.y - _origin.y;\n\t\n\t    return this.create().set(Math.sin(rad) * x - Math.cos(rad) * y + _origin.x, Math.cos(rad) * x + Math.sin(rad) * y + _origin.y);\n\t  };\n\t});\n\t\n\texports['default'] = { Dimension: Dimension, Size: Size, Point: Point };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(39), __esModule: true };\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(40);\n\tvar $Object = __webpack_require__(10).Object;\n\tmodule.exports = function defineProperties(T, D){\n\t  return $Object.defineProperties(T, D);\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(8);\r\n\t// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\r\n\t$export($export.S + $export.F * !__webpack_require__(18), 'Object', {defineProperties: __webpack_require__(41)});\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP       = __webpack_require__(14)\r\n\t  , anObject = __webpack_require__(15)\r\n\t  , getKeys  = __webpack_require__(42);\r\n\t\r\n\tmodule.exports = __webpack_require__(18) ? Object.defineProperties : function defineProperties(O, Properties){\r\n\t  anObject(O);\r\n\t  var keys   = getKeys(Properties)\r\n\t    , length = keys.length\r\n\t    , i = 0\r\n\t    , P;\r\n\t  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n\t  return O;\r\n\t};\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\n\tvar $keys       = __webpack_require__(43)\r\n\t  , enumBugKeys = __webpack_require__(49);\r\n\t\r\n\tmodule.exports = Object.keys || function keys(O){\r\n\t  return $keys(O, enumBugKeys);\r\n\t};\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar has          = __webpack_require__(44)\r\n\t  , toIObject    = __webpack_require__(45)\r\n\t  , arrayIndexOf = __webpack_require__(46)(false)\r\n\t  , IE_PROTO     = __webpack_require__(48)('IE_PROTO');\r\n\t\r\n\tmodule.exports = function(object, names){\r\n\t  var O      = toIObject(object)\r\n\t    , i      = 0\r\n\t    , result = []\r\n\t    , key;\r\n\t  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n\t  // Don't enum bug & hidden keys\r\n\t  while(names.length > i)if(has(O, key = names[i++])){\r\n\t    ~arrayIndexOf(result, key) || result.push(key);\r\n\t  }\r\n\t  return result;\r\n\t};\n\n/***/ },\n/* 44 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(24)\n\t  , defined = __webpack_require__(27);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// false -> Array#indexOf\n\t// true  -> Array#includes\n\tvar toIObject = __webpack_require__(45)\n\t  , toLength  = __webpack_require__(28)\n\t  , toIndex   = __webpack_require__(47);\n\tmodule.exports = function(IS_INCLUDES){\n\t  return function($this, el, fromIndex){\n\t    var O      = toIObject($this)\n\t      , length = toLength(O.length)\n\t      , index  = toIndex(fromIndex, length)\n\t      , value;\n\t    // Array#includes uses SameValueZero equality algorithm\n\t    if(IS_INCLUDES && el != el)while(length > index){\n\t      value = O[index++];\n\t      if(value != value)return true;\n\t    // Array#toIndex ignores holes, Array#includes - not\n\t    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n\t      if(O[index] === el)return IS_INCLUDES || index || 0;\n\t    } return !IS_INCLUDES && -1;\n\t  };\n\t};\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(29)\n\t  , max       = Math.max\n\t  , min       = Math.min;\n\tmodule.exports = function(index, length){\n\t  index = toInteger(index);\n\t  return index < 0 ? max(index + length, 0) : min(index, length);\n\t};\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar shared = __webpack_require__(34)('keys')\r\n\t  , uid    = __webpack_require__(35);\r\n\tmodule.exports = function(key){\r\n\t  return shared[key] || (shared[key] = uid(key));\r\n\t};\n\n/***/ },\n/* 49 */\n/***/ function(module, exports) {\n\n\t// IE 8- don't enum bug keys\r\n\tmodule.exports = (\r\n\t  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n\t).split(',');\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'array like' objects.\n\t * @module\n\t * @requires module:util\n\t * @requires module:types/Basic\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(52);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n\t * @classdesc A base object type for 'array like' object.\n\t * @class\n\t * @extends external:Array\n\t * @extends module:types/Basic~Basic\n\t * @mixes module:types/Basic~Basic\n\t */\n\tvar BasicArray = (function () {\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @memberof module:types/BasicArray~BasicArray\n\t   * @readonly\n\t   * @default\n\t   */\n\t  this.baseType = 'TYPE_BASIC_ARRAY';\n\t\n\t  _util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t  return this;\n\t}).call([]);\n\t\n\texports['default'] = BasicArray;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 51 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * Utility functions.\n\t * @namespace\n\t * @author Micah Rolon <micah@ginasink.com>\n\t * @memberof module:play~pl\n\t */\n\tvar util = new function () {\n\t\n\t  /**\n\t   * Accepts one or more objects to combine their own properties to single object.\n\t   * @arg {object} _target - The object that will recieve all members.\n\t   * @arg {object} _sources... - The object(s) to join with the '_target'.\n\t   * @returns {object} _target\n\t   */\n\t  this.mixin = function () {\n\t    var member, i, target, objs;\n\t\n\t    target = arguments[0];\n\t    objs = [].slice.call(arguments, 1);\n\t\n\t    for (i = 0; i < objs.length; i += 1) {\n\t      for (member in objs[i]) {\n\t        if (!objs[i].hasOwnProperty(member)) continue;\n\t        target[member] = objs[i][member];\n\t      }\n\t    }\n\t\n\t    return target;\n\t  };\n\t\n\t  /**\n\t   * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n\t   * @arg {object} _obj - Object to search in.\n\t   * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t   * @returns {string} The name of the key in the object matching '_member'.\n\t   */\n\t  this.keyOf = function (_obj, _member) {\n\t    var member;\n\t\n\t    for (member in _obj) {\n\t      if (!_obj.hasOwnProperty(member)) continue;\n\t      if (_obj[member] === _member) return member;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n\t   * @arg {object} _obj - The object to search.\n\t   * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n\t   * @return {object} An object containing the name of the property and the owning object. {name, object}\n\t   */\n\t  this.getOwner = function (_obj, _member) {\n\t    var prototype, name;\n\t\n\t    prototype = Object.getPrototypeOf(_obj);\n\t\n\t    // keep searching until we go as deep as we can go.\n\t    while (prototype) {\n\t      // search for the key in the prototype\n\t      name = util.keyOf(prototype, _member);\n\t\n\t      // If we found the key in the prototype then we found\n\t      // our match and we can break out of the loop.\n\t      if (name) break;\n\t\n\t      // Otherwise go deeper (thats what she said ;p)\n\t      prototype = Object.getPrototypeOf(prototype);\n\t    }\n\t\n\t    return {\n\t      name: name,\n\t      object: prototype\n\t    };\n\t  };\n\t\n\t  /**\n\t   * Given a range; provides a random number in that range.\n\t   * @function play~pl.util.random\n\t   * @arg {number} _rangeA - A number for the low end of the range.\n\t   * @arg {number} _rangeB - The top end of the range.\n\t   * @returns {number|*} The resulting number in range or the member found at random.\n\t   */\n\t\n\t  /**\n\t   * Given an iterable; provides a random item.\n\t   * @arg {array} _collection - The iterable.\n\t   * @returns {number|*} The member found at random.\n\t   */\n\t  this.random = function (_collection_rangeA, _rangeB) {\n\t    var index, val;\n\t\n\t    index = Math.floor(Math.random() * _collection_rangeA.length);\n\t\n\t    if (arguments.length === 2) {\n\t      val = Math.round(Math.random() * _rangeB);\n\t\n\t      return val < _collection_rangeA ? _collection_rangeA : val;\n\t    }\n\t\n\t    if (index === _collection_rangeA.length) index = _collection_rangeA.length - 1;\n\t\n\t    return _collection_rangeA && _collection_rangeA[index];\n\t  };\n\t\n\t  /**\n\t   * Take string and makes it dot notation friendly.\n\t   * @arg {string} _id - The string to transform.\n\t   * @arg {boolean} _camelCase - Transform with camel case.\n\t   * @returns {string}\n\t   */\n\t  this.transformId = function (_id, _camelCase) {\n\t    if (_id && _camelCase) {\n\t      return _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n\t        return RegExp.$1.toUpperCase();\n\t      });\n\t    }\n\t\n\t    return _id && _id.replace(/[-\\s]+/g, '_');\n\t  };\n\t\n\t  /**\n\t   * Test all arguments for != null\n\t   * @return {boolean}\n\t   */\n\t  this.isSet = function () {\n\t    return [].every.call(arguments, function (_arg) {\n\t      return _arg != null;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * Parses a formated string and calculates it in milliseconds.\n\t   * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n\t   * @return {number}\n\t   */\n\t  this.toMillisec = function (_source) {\n\t    var tokens, time, units;\n\t\n\t    if (typeof _source === 'number') return _source;\n\t    if (!_source) return;\n\t\n\t    tokens = _source.split(/\\s+/);\n\t    time = 0;\n\t    units = {\n\t      d: 24 * 60 * 60 * 1000,\n\t      h: 60 * 60 * 1000,\n\t      m: 60 * 1000,\n\t      s: 1000\n\t    };\n\t\n\t    tokens.forEach(function (_token) {\n\t      var unit, value;\n\t\n\t      unit = (_token.match(/[dhms]/) || [])[0];\n\t\n\t      if (unit) {\n\t        value = Number(_token.slice(0, -1));\n\t        time += value * units[unit];\n\t      } else {\n\t        time += Number(_token);\n\t      }\n\t    });\n\t\n\t    return time;\n\t  };\n\t\n\t  /**\n\t   * Needs no introduction\n\t   * @arg {iterable} _collection - iterable.\n\t   * @return {array}\n\t   */\n\t  this.toArray = function (_collection) {\n\t    return Array.prototype.map.call(_collection, function (i) {\n\t      return i;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * Resolves the value in the object at the given path.\n\t   * @arg {object} _obj - The object to query.\n\t   * @arg {string} _path - The path to the desired reference.\n\t   * @returns {*} The resulting reference value.\n\t   * @example\n\t   * var user = {\n\t   *   name: 'John',\n\t   *   family: {\n\t   *     guardians: {David}, // property could be an array of multiple guardians.\n\t   *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n\t   *   }\n\t   * };\n\t   *\n\t   * pl.util.resolvePath(user, 'family.sliblings[2].name');\n\t   * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n\t   * pl.util.resolvePath(user, 'family.guardians[0]?.name');\n\t   */\n\t  this.resolvePath = function (_obj, _path) {\n\t    var path, obj, i, name, index, testArray;\n\t\n\t    path = _path.split('.');\n\t    obj = _obj;\n\t    i = 0;\n\t\n\t    while (obj) {\n\t      testArray = /\\?$/.test(path[i]);\n\t      index = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n\t      name = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n\t      obj = obj[name];\n\t\n\t      if (~index && obj) {\n\t        obj = testArray ? obj[index] || obj : obj[index];\n\t      }\n\t\n\t      i += 1;\n\t\n\t      if (path.length === i) break;\n\t    }\n\t\n\t    return obj;\n\t  };\n\t\n\t  this.assignRef = function (_obj, _name, _ref) {\n\t    var name;\n\t\n\t    name = util.transformId(_name, true);\n\t\n\t    if (_obj[name] === _ref) return _ref;\n\t\n\t    if (_obj[name]) {\n\t      if (!_obj[name].__refCollction__) {\n\t        _obj[name] = [_obj[name]];\n\t\n\t        Object.defineProperty(_obj[name], '__refCollction__', {\n\t          value: true,\n\t          enumerable: false,\n\t          writeable: false,\n\t          configureable: false\n\t        });\n\t      }\n\t      _obj[name].push(_ref);\n\t    } else {\n\t      _obj[name] = _ref;\n\t    }\n\t\n\t    return _obj[name];\n\t  };\n\t\n\t  /**\n\t   * N0 OPeration.\n\t   */\n\t  this.noop = function () {};\n\t\n\t  /**\n\t   * Get the file name out of a simple file path.\n\t   * @arg {string} _path - The file path.\n\t   * @returns {string} The extracted name.\n\t   */\n\t  this.resolveFileName = function (_path) {\n\t    return _path.slice(_path.lastIndexOf('/') + 1);\n\t  };\n\t\n\t  /**\n\t   * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n\t   * - x; produces a letter a-f.\n\t   * - y; produces a digit 0-9.\n\t   * - z; produces a 4 character hex value derived from the now time stamp.\n\t   * @arg {string} _pattern - The xyz pattern.\n\t   * @returns {string} The generated ID.\n\t   */\n\t  this.createId = function (_pattern) {\n\t    return (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n\t      if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t      if (_token === 'y') return Math.floor(Math.random() * 10).toString(16);\n\t      return Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n\t    });\n\t  };\n\t}();\n\t\n\texports['default'] = util;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$create = __webpack_require__(53)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'classes' implementing methods for extention and super callbacks.\n\t * @module\n\t * @requires module:play~pl.util\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n\t * @classdesc The base type for all objects which will act as prototypes.\n\t * @class\n\t */\n\tvar Basic = {\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @readonly\n\t   * @default\n\t   */\n\t  baseType: 'TYPE_BASIC',\n\t\n\t  /**\n\t   * Creates a new object with the current object as its prototype.\n\t   * @instance\n\t   * @returns {Basic} The new instance.\n\t   */\n\t  create: function create() {\n\t    return _Object$create(this);\n\t  },\n\t\n\t  /**\n\t   * Creates a new object using a constructor function or object with the current object as its prototype.\n\t   * @instance\n\t   * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n\t   * @returns {Basic} The new instance.\n\t   *\n\t   * @todo define constructor property\n\t   */\n\t  extend: function extend(_implementation) {\n\t    var instance;\n\t\n\t    if (!_implementation) return null;\n\t\n\t    switch (typeof _implementation) {\n\t      case 'function':\n\t        _implementation.prototype = this;\n\t        instance = new _implementation();\n\t        break;\n\t\n\t      case 'object':\n\t        instance = this.create();\n\t        instance.mixin(_implementation);\n\t        break;\n\t\n\t      default:\n\t        console.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n\t    }\n\t\n\t    return instance;\n\t  },\n\t\n\t  /**\n\t   * Accepts one or more objects to combine their own properties to the instance.\n\t   * @instance\n\t   * @arg {object} _sources... - The object(s) to join with the instance.\n\t   * @returns this\n\t   */\n\t  mixin: function mixin() {\n\t    return _util2['default'].mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n\t  },\n\t\n\t  /**\n\t   * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n\t   * @instance\n\t   * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t   * @returns {string} The name of the key in the object matching '_member'.\n\t   */\n\t  keyOf: function keyOf(_member) {\n\t    return _util2['default'].keyOf(this, _member);\n\t  },\n\t\n\t  /**\n\t   * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n\t   * @instance\n\t   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t   * @returns {*} Whatever the caller returns.\n\t   */\n\t  proto: function proto() {\n\t    var method, name, owner, prototype;\n\t\n\t    // Get the function which invoked proto() in the call stack.\n\t    // If the caller is a behavior then we retrieve the method.\n\t    method = this.proto.caller.method || this.proto.caller;\n\t\n\t    // Check to see if 'this' owns the method.\n\t    // NOTE: We may want to move this logic into getOwner().\n\t    if (name = this.keyOf(method)) {\n\t      prototype = Object.getPrototypeOf(this);\n\t    }\n\t\n\t    // Otherwise find the object which owns the caller function.\n\t    else {\n\t        owner = _util2['default'].getOwner(this, method);\n\t        name = owner.name;\n\t        prototype = Object.getPrototypeOf(owner.object);\n\t      }\n\t\n\t    method = prototype[name];\n\t\n\t    if (!method) {\n\t      console.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n\t      return null;\n\t    }\n\t\n\t    return method.apply(this, arguments);\n\t  },\n\t\n\t  /**\n\t   * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n\t   * @instance\n\t   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t   * @returns {*} Whatever the caller returns.\n\t   */\n\t  sup: function sup() {\n\t    var method, name, owner, prototype;\n\t\n\t    // Get the function which invoked sup() in the call stack.\n\t    method = this.sup.caller;\n\t    owner = _util2['default'].getOwner(this, this.baseType);\n\t    prototype = owner.object;\n\t    name = this.keyOf(method);\n\t\n\t    // Check to see if 'this' owns the method.\n\t    // NOTE: We may want to move this logic into getOwner().\n\t    //\n\t    if (!name) {\n\t      owner = _util2['default'].getOwner(this, method);\n\t      name = owner.name;\n\t    }\n\t\n\t    method = prototype[name];\n\t\n\t    if (!method) {\n\t      console.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n\t      return null;\n\t    }\n\t\n\t    return method.apply(this, arguments);\n\t  },\n\t\n\t  /**\n\t   * Provides the object type.\n\t   * @instance\n\t   */\n\t  toString: function toString() {\n\t    var type;\n\t\n\t    if (this.baseType) {\n\t      type = this.baseType.replace('TYPE_', '');\n\t      type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t    } else {\n\t      type = this.constructor.name || 'Object';\n\t    }\n\t\n\t    return '[object ' + type + ']';\n\t  }\n\t\n\t};\n\t\n\texports['default'] = Basic;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 53 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(54), __esModule: true };\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(55);\n\tvar $Object = __webpack_require__(10).Object;\n\tmodule.exports = function create(P, D){\n\t  return $Object.create(P, D);\n\t};\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(8)\r\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n\t$export($export.S, 'Object', {create: __webpack_require__(56)});\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n\tvar anObject    = __webpack_require__(15)\r\n\t  , dPs         = __webpack_require__(41)\r\n\t  , enumBugKeys = __webpack_require__(49)\r\n\t  , IE_PROTO    = __webpack_require__(48)('IE_PROTO')\r\n\t  , Empty       = function(){ /* empty */ }\r\n\t  , PROTOTYPE   = 'prototype';\r\n\t\r\n\t// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\n\tvar createDict = function(){\r\n\t  // Thrash, waste and sodomy: IE GC bug\r\n\t  var iframe = __webpack_require__(20)('iframe')\r\n\t    , i      = enumBugKeys.length\r\n\t    , gt     = '>'\r\n\t    , iframeDocument;\r\n\t  iframe.style.display = 'none';\r\n\t  __webpack_require__(57).appendChild(iframe);\r\n\t  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n\t  // createDict = iframe.contentWindow.Object;\r\n\t  // html.removeChild(iframe);\r\n\t  iframeDocument = iframe.contentWindow.document;\r\n\t  iframeDocument.open();\r\n\t  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n\t  iframeDocument.close();\r\n\t  createDict = iframeDocument.F;\r\n\t  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n\t  return createDict();\r\n\t};\r\n\t\r\n\tmodule.exports = Object.create || function create(O, Properties){\r\n\t  var result;\r\n\t  if(O !== null){\r\n\t    Empty[PROTOTYPE] = anObject(O);\r\n\t    result = new Empty;\r\n\t    Empty[PROTOTYPE] = null;\r\n\t    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n\t    result[IE_PROTO] = O;\r\n\t  } else result = createDict();\r\n\t  return Properties === undefined ? result : dPs(result, Properties);\r\n\t};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(9).document && document.documentElement;\n\n/***/ },\n/* 58 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\r\n\t *\r\n\t * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n\t * All rights are reserved to Epistemex.\r\n\t *\r\n\t * 2D transformation matrix object initialized with identity matrix.\r\n\t *\r\n\t * The matrix can synchronize a canvas context by supplying the context\r\n\t * as an argument, or later apply current absolute transform to an\r\n\t * existing context.\r\n\t *\r\n\t * All values are handled as floating point values.\r\n\t *\r\n\t * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n\t * @prop {number} a - scale x\r\n\t * @prop {number} b - shear y\r\n\t * @prop {number} c - shear x\r\n\t * @prop {number} d - scale y\r\n\t * @prop {number} e - translate x\r\n\t * @prop {number} f - translate y\r\n\t * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n\t * @constructor\r\n\t */\n\tfunction Matrix(context) {\n\t\n\t    var me = this;\n\t    me._t = me.transform;\n\t\n\t    me.a = me.d = 1;\n\t    me.b = me.c = me.e = me.f = 0;\n\t\n\t    me.context = context;\n\t\n\t    // reset canvas transformations (if any) to enable 100% sync.\n\t    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\n\t}\n\t\n\tMatrix.prototype = {\n\t\n\t    /**\r\n\t     * Concatenates transforms of this matrix onto the given child matrix and\r\n\t     * returns a new matrix. This instance is used on left side.\r\n\t     *\r\n\t     * @param {Matrix} cm - child matrix to apply concatenation to\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    concat: function concat(cm) {\n\t        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the horizontal values.\r\n\t     */\n\t    flipX: function flipX() {\n\t        return this._t(-1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the vertical values.\r\n\t     */\n\t    flipY: function flipY() {\n\t        return this._t(1, 0, 0, -1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Reflects incoming (velocity) vector on the normal which will be the\r\n\t     * current transformed x axis. Call when a trigger condition is met.\r\n\t     *\r\n\t     * NOTE: BETA, simple implementation\r\n\t     *\r\n\t     * @param {number} x - vector end point for x (start = 0)\r\n\t     * @param {number} y - vector end point for y (start = 0)\r\n\t     * @returns {{x: number, y: number}}\r\n\t     */\n\t    reflectVector: function reflectVector(x, y) {\n\t\n\t        var v = this.applyToPoint(0, 1),\n\t            d = 2 * (v.x * x + v.y * y);\n\t\n\t        x -= d * v.x;\n\t        y -= d * v.y;\n\t\n\t        return { x: x, y: y };\n\t    },\n\t\n\t    /**\r\n\t     * Short-hand to reset current matrix to an identity matrix.\r\n\t     */\n\t    reset: function reset() {\n\t        return this.setTransform(1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Rotates current matrix accumulative by angle.\r\n\t     * @param {number} angle - angle in radians\r\n\t     */\n\t    rotate: function rotate(angle) {\n\t        var cos = Math.cos(angle),\n\t            sin = Math.sin(angle);\n\t        return this._t(cos, sin, -sin, cos, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Converts a vector given as x and y to angle, and\r\n\t     * rotates (accumulative).\r\n\t     * @param x\r\n\t     * @param y\r\n\t     * @returns {*}\r\n\t     */\n\t    rotateFromVector: function rotateFromVector(x, y) {\n\t        return this.rotate(Math.atan2(y, x));\n\t    },\n\t\n\t    /**\r\n\t     * Helper method to make a rotation based on an angle in degrees.\r\n\t     * @param {number} angle - angle in degrees\r\n\t     */\n\t    rotateDeg: function rotateDeg(angle) {\n\t        return this.rotate(angle * Math.PI / 180);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix uniformly and accumulative.\r\n\t     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n\t     */\n\t    scaleU: function scaleU(f) {\n\t        return this._t(f, 0, 0, f, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scale: function scale(sx, sy) {\n\t        return this._t(sx, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on x axis accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     */\n\t    scaleX: function scaleX(sx) {\n\t        return this._t(sx, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on y axis accumulative.\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scaleY: function scaleY(sy) {\n\t        return this._t(1, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shear: function shear(sx, sy) {\n\t        return this._t(1, sy, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for x to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     */\n\t    shearX: function shearX(sx) {\n\t        return this._t(1, 0, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for y to the current matrix accumulative.\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shearY: function shearY(sy) {\n\t        return this._t(1, sy, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skew: function skew(ax, ay) {\n\t        return this.shear(Math.tan(ax), Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for x to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     */\n\t    skewX: function skewX(ax) {\n\t        return this.shearX(Math.tan(ax));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for y to the current matrix accumulative.\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skewY: function skewY(ay) {\n\t        return this.shearY(Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Set current matrix to new absolute matrix.\r\n\t     * @param {number} a - scale x\r\n\t     * @param {number} b - shear y\r\n\t     * @param {number} c - shear x\r\n\t     * @param {number} d - scale y\r\n\t     * @param {number} e - translate x\r\n\t     * @param {number} f - translate y\r\n\t     */\n\t    setTransform: function setTransform(a, b, c, d, e, f) {\n\t        var me = this;\n\t        me.a = a;\n\t        me.b = b;\n\t        me.c = c;\n\t        me.d = d;\n\t        me.e = e;\n\t        me.f = f;\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translate: function translate(tx, ty) {\n\t        return this._t(1, 0, 0, 1, tx, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on x axis accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     */\n\t    translateX: function translateX(tx) {\n\t        return this._t(1, 0, 0, 1, tx, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on y axis accumulative.\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translateY: function translateY(ty) {\n\t        return this._t(1, 0, 0, 1, 0, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Multiplies current matrix with new matrix values.\r\n\t     * @param {number} a2 - scale x\r\n\t     * @param {number} b2 - shear y\r\n\t     * @param {number} c2 - shear x\r\n\t     * @param {number} d2 - scale y\r\n\t     * @param {number} e2 - translate x\r\n\t     * @param {number} f2 - translate y\r\n\t     */\n\t    transform: function transform(a2, b2, c2, d2, e2, f2) {\n\t\n\t        var me = this,\n\t            a1 = me.a,\n\t            b1 = me.b,\n\t            c1 = me.c,\n\t            d1 = me.d,\n\t            e1 = me.e,\n\t            f1 = me.f;\n\t\n\t        /* matrix order (canvas compatible):\r\n\t         * ace\r\n\t         * bdf\r\n\t         * 001\r\n\t         */\n\t        me.a = a1 * a2 + c1 * b2;\n\t        me.b = b1 * a2 + d1 * b2;\n\t        me.c = a1 * c2 + c1 * d2;\n\t        me.d = b1 * c2 + d1 * d2;\n\t        me.e = a1 * e2 + c1 * f2 + e1;\n\t        me.f = b1 * e2 + d1 * f2 + f1;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Divide this matrix on input matrix which must be invertible.\r\n\t     * @param {Matrix} m - matrix to divide on (divisor)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divide: function divide(m) {\n\t\n\t        if (!m.isInvertible()) throw \"Input matrix is not invertible\";\n\t\n\t        var im = m.inverse();\n\t\n\t        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\n\t    },\n\t\n\t    /**\r\n\t     * Divide current matrix on scalar value != 0.\r\n\t     * @param {number} d - divisor (can not be 0)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divideScalar: function divideScalar(d) {\n\t\n\t        var me = this;\n\t        me.a /= d;\n\t        me.b /= d;\n\t        me.c /= d;\n\t        me.d /= d;\n\t        me.e /= d;\n\t        me.f /= d;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Get an inverse matrix of current matrix. The method returns a new\r\n\t     * matrix with values you need to use to get to an identity matrix.\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    inverse: function inverse() {\n\t\n\t        if (this.isIdentity()) {\n\t            return new Matrix();\n\t        } else if (!this.isInvertible()) {\n\t            throw \"Matrix is not invertible.\";\n\t        } else {\n\t            var me = this,\n\t                a = me.a,\n\t                b = me.b,\n\t                c = me.c,\n\t                d = me.d,\n\t                e = me.e,\n\t                f = me.f,\n\t                m = new Matrix(),\n\t                dt = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t            m.a = d / dt;\n\t            m.b = -b / dt;\n\t            m.c = -c / dt;\n\t            m.d = a / dt;\n\t            m.e = (c * f - d * e) / dt;\n\t            m.f = -(a * f - b * e) / dt;\n\t\n\t            return m;\n\t        }\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation is naive. For animation use the\r\n\t     * intrpolateAnim() method instead.\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolate: function interpolate(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix();\n\t\n\t        m.a = me.a + (m2.a - me.a) * t;\n\t        m.b = me.b + (m2.b - me.b) * t;\n\t        m.c = me.c + (m2.c - me.c) * t;\n\t        m.d = me.d + (m2.d - me.d) * t;\n\t        m.e = me.e + (m2.e - me.e) * t;\n\t        m.f = me.f + (m2.f - me.f) * t;\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation method uses decomposition which makes\r\n\t     * it suitable for animations (in particular where rotation takes\r\n\t     * places).\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolateAnim: function interpolateAnim(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix(),\n\t            d1 = me.decompose(),\n\t            d2 = m2.decompose(),\n\t            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\n\t            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\n\t            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\n\t            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\n\t            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t;\n\t\n\t        m.translate(translateX, translateY);\n\t        m.rotate(rotation);\n\t        m.scale(scaleX, scaleY);\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Decompose the current matrix into simple transforms using either\r\n\t     * QR (default) or LU decomposition. Code adapted from\r\n\t     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n\t     *\r\n\t     * The result must be applied in the following order to reproduce the current matrix:\r\n\t     *\r\n\t     *     QR: translate -> rotate -> scale -> skewX\r\n\t     *     LU: translate -> skewY  -> scale -> skewX\r\n\t     *\r\n\t     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n\t     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n\t     */\n\t    decompose: function decompose(useLU) {\n\t\n\t        var me = this,\n\t            a = me.a,\n\t            b = me.b,\n\t            c = me.c,\n\t            d = me.d,\n\t            acos = Math.acos,\n\t            atan = Math.atan,\n\t            sqrt = Math.sqrt,\n\t            pi = Math.PI,\n\t            translate = { x: me.e, y: me.f },\n\t            rotation = 0,\n\t            scale = { x: 1, y: 1 },\n\t            skew = { x: 0, y: 0 },\n\t            determ = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t        if (useLU) {\n\t            if (a) {\n\t                skew = { x: atan(c / a), y: atan(b / a) };\n\t                scale = { x: a, y: determ / a };\n\t            } else if (b) {\n\t                rotation = pi * 0.5;\n\t                scale = { x: b, y: determ / b };\n\t                skew.x = atan(d / b);\n\t            } else {\n\t                // a = b = 0\n\t                scale = { x: c, y: d };\n\t                skew.x = pi * 0.25;\n\t            }\n\t        } else {\n\t            // Apply the QR-like decomposition.\n\t            if (a || b) {\n\t                var r = sqrt(a * a + b * b);\n\t                rotation = b > 0 ? acos(a / r) : -acos(a / r);\n\t                scale = { x: r, y: determ / r };\n\t                skew.x = atan((a * c + b * d) / (r * r));\n\t            } else if (c || d) {\n\t                var s = sqrt(c * c + d * d);\n\t                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\n\t                scale = { x: determ / s, y: s };\n\t                skew.y = atan((a * c + b * d) / (s * s));\n\t            } else {\n\t                // a = b = c = d = 0\n\t                scale = { x: 0, y: 0 }; // = invalid matrix\n\t            }\n\t        }\n\t\n\t        return {\n\t            scale: scale,\n\t            translate: translate,\n\t            rotation: rotation,\n\t            skew: skew\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Returns the determinant of the current matrix.\r\n\t     * @returns {number}\r\n\t     */\n\t    determinant: function determinant() {\n\t        return this.a * this.d - this.b * this.c;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to x and y point.\r\n\t     * Returns a point object.\r\n\t     *\r\n\t     * @param {number} x - value for x\r\n\t     * @param {number} y - value for y\r\n\t     * @returns {{x: number, y: number}} A new transformed point object\r\n\t     */\n\t    applyToPoint: function applyToPoint(x, y) {\n\t\n\t        var me = this;\n\t\n\t        return {\n\t            x: x * me.a + y * me.c + me.e,\n\t            y: x * me.b + y * me.d + me.f\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to array with point objects or point pairs.\r\n\t     * Returns a new array with points in the same format as the input array.\r\n\t     *\r\n\t     * A point object is an object literal:\r\n\t     *\r\n\t     * {x: x, y: y}\r\n\t     *\r\n\t     * so an array would contain either:\r\n\t     *\r\n\t     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n\t     *\r\n\t     * or\r\n\t     * [x1, y1, x2, y2, ... xn, yn]\r\n\t     *\r\n\t     * @param {Array} points - array with point objects or pairs\r\n\t     * @returns {Array} A new array with transformed points\r\n\t     */\n\t    applyToArray: function applyToArray(points) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l,\n\t            mxPoints = [];\n\t\n\t        if (typeof points[0] === 'number') {\n\t\n\t            l = points.length;\n\t\n\t            while (i < l) {\n\t                p = this.applyToPoint(points[i++], points[i++]);\n\t                mxPoints.push(p.x, p.y);\n\t            }\n\t        } else {\n\t            for (; p = points[i]; i++) {\n\t                mxPoints.push(this.applyToPoint(p.x, p.y));\n\t            }\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to a typed array with point pairs. Although\r\n\t     * the input array may be an ordinary array, this method is intended\r\n\t     * for more performant use where typed arrays are used. The returned\r\n\t     * array is regardless always returned as a Float32Array.\r\n\t     *\r\n\t     * @param {*} points - (typed) array with point pairs\r\n\t     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n\t     * @returns {*} A new typed array with transformed points\r\n\t     */\n\t    applyToTypedArray: function applyToTypedArray(points, use64) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l = points.length,\n\t            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\n\t\n\t        while (i < l) {\n\t            p = this.applyToPoint(points[i], points[i + 1]);\n\t            mxPoints[i++] = p.x;\n\t            mxPoints[i++] = p.y;\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply to any canvas 2D context object. This does not affect the\r\n\t     * context that optionally was referenced in constructor unless it is\r\n\t     * the same context.\r\n\t     * @param {CanvasRenderingContext2D} context\r\n\t     */\n\t    applyToContext: function applyToContext(context) {\n\t        var me = this;\n\t        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is an identity matrix (no transforms applied).\r\n\t     * @returns {boolean} True if identity (not transformed)\r\n\t     */\n\t    isIdentity: function isIdentity() {\n\t        var me = this;\n\t        return me._q(me.a, 1) && me._q(me.b, 0) && me._q(me.c, 0) && me._q(me.d, 1) && me._q(me.e, 0) && me._q(me.f, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is invertible\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isInvertible: function isInvertible() {\n\t        return !this._q(this.determinant(), 0);\n\t    },\n\t\n\t    /**\r\n\t     * Test if matrix is valid.\r\n\t     */\n\t    isValid: function isValid() {\n\t        return !this._q(this.a * this.d, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Clones current instance and returning a new matrix.\r\n\t     * @param {boolean} [noContext=false] don't clone context reference if true\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    clone: function clone(noContext) {\n\t        var me = this,\n\t            m = new Matrix();\n\t        m.a = me.a;\n\t        m.b = me.b;\n\t        m.c = me.c;\n\t        m.d = me.d;\n\t        m.e = me.e;\n\t        m.f = me.f;\n\t        if (!noContext) m.context = me.context;\n\t\n\t        return m;\n\t    },\n\t\n\t    /**\r\n\t     * Compares current matrix with another matrix. Returns true if equal\r\n\t     * (within epsilon tolerance).\r\n\t     * @param {Matrix} m - matrix to compare this matrix with\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isEqual: function isEqual(m) {\n\t\n\t        var me = this,\n\t            q = me._q;\n\t\n\t        return q(me.a, m.a) && q(me.b, m.b) && q(me.c, m.c) && q(me.d, m.d) && q(me.e, m.e) && q(me.f, m.f);\n\t    },\n\t\n\t    /**\r\n\t     * Returns an array with current matrix values.\r\n\t     * @returns {Array}\r\n\t     */\n\t    toArray: function toArray() {\n\t        var me = this;\n\t        return [me.a, me.b, me.c, me.d, me.e, me.f];\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS: function toCSS() {\n\t        return \"matrix(\" + this.toArray() + \")\";\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix3d() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS3D: function toCSS3D() {\n\t        var me = this;\n\t        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\n\t    },\n\t\n\t    /**\r\n\t     * Returns a JSON compatible string of current matrix.\r\n\t     * @returns {string}\r\n\t     */\n\t    toJSON: function toJSON() {\n\t        return JSON.stringify(this.toArray());\n\t    },\n\t\n\t    /**\r\n\t     * Returns a string with current matrix as comma-separated list.\r\n\t     * @returns {string}\r\n\t     */\n\t    toString: function toString() {\n\t        return \"\" + this.toArray();\n\t    },\n\t\n\t    /**\r\n\t     * Compares floating point values with some tolerance (epsilon)\r\n\t     * @param {number} f1 - float 1\r\n\t     * @param {number} f2 - float 2\r\n\t     * @returns {boolean}\r\n\t     * @private\r\n\t     */\n\t    _q: function _q(f1, f2) {\n\t        return Math.abs(f1 - f2) < 1e-14;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current absolute matrix to context if defined, to sync it.\r\n\t     * @private\r\n\t     */\n\t    _x: function _x() {\n\t        var me = this;\n\t        if (me.context) me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    }\n\t};\n\t\n\texports[\"default\"] = Matrix;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the global root level namespace for the library.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires game\n\t * @requires module:play~pl.util\n\t * @requires types/Basic\n\t * @requires types/Dimensions\n\t */\n\t\n\tvar _playGame = __webpack_require__(60);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(52);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(73);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar pl;\n\t/**\n\t * Resolves the event type for user interactions.\n\t */\n\tfunction resolveEventType() {\n\t  var resolution;\n\t\n\t  if (_playGame2['default'].feature('touch')) {\n\t    resolution = {\n\t      ACTION: 'touchend',\n\t      ACTION_DOWN: 'touchstart',\n\t      ACTION_UP: 'touchend',\n\t      ACTION_MOVE: 'touchmove',\n\t      ACTION_OUT: 'touchcancel'\n\t    };\n\t  } else {\n\t    resolution = {\n\t      ACTION: 'click',\n\t      ACTION_DOWN: 'mousedown',\n\t      ACTION_UP: 'mouseup',\n\t      ACTION_MOVE: 'mousemove',\n\t      ACTION_OUT: 'mouseout'\n\t    };\n\t  }\n\t\n\t  return resolution;\n\t}\n\t\n\t/**\n\t * Globaly accesable, root level namespace for the library.\n\t * @namespace\n\t * @prop {object} EVENT - Namespace for noralized event name constants.\n\t * @prop {Basic} Basic - Base object type.\n\t * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n\t * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n\t * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n\t * @prop {object} util - Namespace for utility functions.\n\t */\n\tpl = {\n\t  Basic: _typesBasic2['default'], Point: _typesDimensions.Point, Size: _typesDimensions.Size, Queue: _typesQueue2['default'],\n\t  game: _playGame2['default'],\n\t  util: _util2['default'],\n\t\n\t  /**\n\t   * @namespace\n\t   * @prop {string} ACTION - The device normalized `click` event name.\n\t   * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n\t   * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n\t   * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n\t   * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n\t   */\n\t  EVENT: resolveEventType()\n\t};\n\t\n\texports['default'] = pl;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @module game\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play.game.component\n\t * @requires play.game.manager\n\t * @requires util\n\t * @requires types/Events\n\t * @requires types/GlobalScope\n\t * @requires types/Entity\n\t * @requires types/Screen\n\t * @requires types/Game\n\t */\n\t\n\tvar _playGameComponent = __webpack_require__(61);\n\t\n\tvar _playGameComponent2 = _interopRequireDefault(_playGameComponent);\n\t\n\tvar _playGameManager = __webpack_require__(63);\n\t\n\tvar _playGameManager2 = _interopRequireDefault(_playGameManager);\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(62);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar _typesGlobalScope = __webpack_require__(66);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesEntity = __webpack_require__(113);\n\t\n\tvar _typesEntity2 = _interopRequireDefault(_typesEntity);\n\t\n\tvar _typesScreen = __webpack_require__(114);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesGame = __webpack_require__(115);\n\t\n\tvar _typesGame2 = _interopRequireDefault(_typesGame);\n\t\n\tvar _platform = __webpack_require__(116);\n\t\n\tvar _platform2 = _interopRequireDefault(_platform);\n\t\n\tvar GAMES, CONFIG, READY_QUEUE;\n\t\n\t/**\n\t * Define a game scope for registration and/or initialization.\n\t * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction game(_name, _implementation) {\n\t  if (game.isDOMReady) {\n\t    initialize(_name, _implementation);\n\t  } else {\n\t    register(_name, _implementation);\n\t  }\n\t}\n\t\n\tfunction ready(_eventName) {\n\t  if (READY_QUEUE.length) return false;\n\t  game.trigger(_eventName || 'ready');\n\t}\n\t\n\t/**\n\t * Registers an implementation of a game scope for initialization.\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction register(_name, _implementation) {\n\t  if (! ~GAMES.indexOf(_name)) {\n\t    GAMES.push({\n\t      id: _name,\n\t      implementation: _implementation\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t * Initializes an implementation of a game scope. (overloaded)\n\t * @function initialize\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\t\n\t/**\n\t * Initializes an implementation of a game scope.\n\t * @protected\n\t * @arg {array} _collection - The collection of game scope records for initialization.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction initialize(nameCollection, implementation) {\n\t  switch (typeof nameCollection) {\n\t    case 'string':\n\t      _typesGlobalScope2['default'][nameCollection] = _typesGame2['default'].extend(implementation).initialize('#' + nameCollection);\n\t      break;\n\t\n\t    case 'object':\n\t      nameCollection.forEach(function (_item) {\n\t        initialize(_item.id, _item.implementation);\n\t      });\n\t      break;\n\t  }\n\t}\n\t\n\t/** @protected */\n\tGAMES = [];\n\t/** @protected */\n\tCONFIG = {};\n\t/** @protected */\n\tREADY_QUEUE = [];\n\t\n\t/**\n\t * Interface for game level configuration.\n\t * @namespace game\n\t * @memberof module:play~pl\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t  var audioContext;\n\t\n\t  this.component = _playGameComponent2['default'];\n\t  this.manager = _playGameManager2['default'];\n\t\n\t  _util2['default'].mixin(game, _typesEvents2['default']);\n\t\n\t  this.on('platform-event', function (_event) {\n\t    console.log('play.game -', _event.name, _event.gameData);\n\t  });\n\t\n\t  /**\n\t   * Starts the dominos falling\n\t   * @function run\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.run = function () {\n\t    game.isDOMReady = true;\n\t    game.trigger('dom-ready');\n\t\n\t    game.component.loadAll(function () {\n\t      // console.log('** All component sources loaded.');\n\t      initialize(GAMES);\n\t\n\t      GAMES = null;\n\t    });\n\t\n\t    _platform2['default'].emit(_platform2['default'].EVENT_INIT);\n\t  };\n\t\n\t  this.report = function (_name) {\n\t    _platform2['default'].emit(_name);\n\t\n\t    return this.report;\n\t  };\n\t\n\t  this.report.exit = function (_gameScope) {\n\t    _platform2['default'].saveGameState(_gameScope.progress());\n\t    _platform2['default'].emit(_platform2['default'].EVENT_EXIT);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.report.flip = function (_gameScope) {\n\t    var data = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    if (_gameScope.game) {\n\t      _gameScope = _gameScope.game;\n\t    }\n\t    _platform2['default'].emit(_platform2['default'].EVENT_FLIPPED, data);\n\t    _platform2['default'].saveGameState(_gameScope.progress());\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Getter/Setter for game level configuration.\n\t   * @function module:play~pl.game.config\n\t   * @arg {string} _key - The key to retrieve\n\t   * @returns {this}\n\t   */\n\t\n\t  /**\n\t   * Getter/Setter for game level configuration.\n\t   * @function config\n\t   * @memberof module:play~pl.game\n\t   * @arg {object} _mixin - Object to set properties on configuration.\n\t   * @returns {this}\n\t   */\n\t  this.config = function (keyMixin) {\n\t    switch (typeof keyMixin) {\n\t      case 'string':\n\t        return _util2['default'].resolvePath(CONFIG, keyMixin);\n\t      case 'object':\n\t        if (keyMixin) _util2['default'].mixin(CONFIG, keyMixin);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * @function provideEntityType\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.provideEntityType = function () {\n\t    return _typesEntity2['default'];\n\t  };\n\t\n\t  /**\n\t   * @function provideScreenType\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.provideScreenType = function () {\n\t    return _typesScreen2['default'];\n\t  };\n\t\n\t  /**\n\t   * Augments the global scope.\n\t   * @function scope\n\t   * @arg {function|object} _mixin - Object or constructor to define members.\n\t   * @returns {this}\n\t   *\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.scope = function (_mixin) {\n\t    if (typeof _mixin === 'function') {\n\t      _mixin.call(_typesGlobalScope2['default']);\n\t    } else if (_mixin) {\n\t      _typesGlobalScope2['default'].mixin(_mixin);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * @function queue\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.queue = function (_item) {\n\t    if (! ~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.queue.complete = function (_item, _eventName) {\n\t    var index;\n\t\n\t    index = READY_QUEUE.indexOf(_item);\n\t    READY_QUEUE.splice(index, 1);\n\t\n\t    ready(_eventName);\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Accessor for the detected features supported by the browser.\n\t   *\n\t   * *Supported Feature Detectors*\n\t   * - touch\n\t   *\n\t   * @function feature;\n\t   * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n\t   * @returns {boolean} The support status for the specified feature.\n\t   */\n\t  this.feature = (function () {\n\t    var detect = {\n\t      touch: function touch() {\n\t        return window.hasOwnProperty('ontouchend');\n\t      }\n\t    };\n\t\n\t    return function (_name) {\n\t      var tester = detect[_name];\n\t      if (!tester && console) console.warn('No feature detection for \"' + _name + '\".');\n\t      return tester && tester();\n\t    };\n\t  })();\n\t\n\t  this.getAudioContext = function () {\n\t    if (!audioContext) {\n\t      audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\t      window.onfocus = function () {\n\t        audioContext.resume();\n\t      };\n\t      window.onblur = function () {\n\t        audioContext.suspend();\n\t      };\n\t    }\n\t    return audioContext;\n\t  };\n\t\n\t  this.enableAudioContext = function () {\n\t    var ctx, silence;\n\t\n\t    ctx = this.getAudioContext();\n\t    silence = ctx.createBufferSource();\n\t\n\t    silence.buffer = ctx.createBuffer(2, 1, 44100);\n\t    silence.connect(ctx.destination);\n\t    silence.start();\n\t    silence.disconnect();\n\t\n\t    return silence;\n\t  };\n\t}).call(game);\n\t\n\texports['default'] = game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play~pl.util\n\t * @requires types/Events\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(62);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\t/**\n\t * Collection of component behavior records\n\t * @const\n\t */\n\tvar COMPONENTS;\n\t\n\t/**\n\t * Registers a component behavior.\n\t * @arg {string} _name - The name for the component.\n\t * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n\t * @returns {@link module:play~pl.game}\n\t */\n\tfunction component(_name, _implementation) {\n\t  if (!component.get(_name)) {\n\t    COMPONENTS.push({\n\t      name: _name,\n\t      implementation: _implementation,\n\t      config: {}\n\t    });\n\t  }\n\t\n\t  return this;\n\t}\n\t\n\tCOMPONENTS = [];\n\t\n\t/**\n\t * Methods to manage and load component behavior scripts.\n\t * @namespace component\n\t * @memberof module:play~pl.game\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t  _util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t  /**\n\t   * Given a name; provides the component record. `{name, implementation}`\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {string} _name - The name of the component.\n\t   * @returns {object} The record.\n\t   */\n\t  this.get = function (_name) {\n\t    var i, record;\n\t\n\t    for (i = 0; record = COMPONENTS[i]; i += 1) {\n\t      if (record.name === _name) return record;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n\t   * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {string} _name - The name of the component.\n\t   * @arg {function} _callback - Callback for load success.\n\t   * @todo Implement Promises.\n\t   * @returns `this`\n\t   */\n\t  this.load = function (_name, _callback) {\n\t    var path;\n\t\n\t    if (component.get(_name)) {\n\t      if (_callback) _callback.call(component, _name);\n\t      return null;\n\t    }\n\t\n\t    path = pl.game.config('componentDirectory') + _name + '/behavior.js';\n\t\n\t    $.getScript(path, function () {\n\t      if (_callback) _callback.call(component, _name);\n\t      component.trigger('loaded', [_name]);\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Loads all the component scripts for HTML elements with `pl-component` attributes.\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {function} _callback - Callback for load success.\n\t   * @todo Implement Promises.\n\t   * @returns `this`\n\t   */\n\t  this.loadAll = function (_callback) {\n\t    var $components, queue;\n\t\n\t    $components = $('[pl-component]');\n\t    queue = [];\n\t\n\t    $components.each(function (_index) {\n\t      var name;\n\t\n\t      name = $(this).attr('pl-component');\n\t\n\t      if (~queue.indexOf(name)) return;\n\t\n\t      queue.push(name);\n\t    });\n\t\n\t    queue.slice(0).forEach(function (_name) {\n\t      component.load(_name, function () {\n\t        var index;\n\t\n\t        index = queue.indexOf(_name);\n\t        queue.splice(index, 1);\n\t\n\t        if (!queue.length && _callback) _callback.apply(component, arguments);\n\t      });\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  // Maybe?\n\t  // this.config = function () {};\n\t}).call(component);\n\t\n\texports['default'] = component;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Events\n\t*  @desc Contains methods for managing and dispatching events from objects.\n\t*  @proto Basic\n\t*/\n\t\n\tvar _typesBasic = __webpack_require__(52);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar Events = _typesBasic2['default'].extend(function () {\n\t  var i, method, methods;\n\t  /**\n\t  *  @desc Creates a function with a proxy to the jQuery method.\n\t  *  @param _name (String) The name of the method being proxied.\n\t  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t  *  @private\n\t  */\n\t  function createProxyFunction(_name) {\n\t    return function () {\n\t      var $jq = $();\n\t      // We must wrap our object in jQuery. If 'typeof this' is a function then we need\n\t      // to add it in this manner, otherwise jQuery treats it like a ready callback.\n\t      $jq.push(this);\n\t\n\t      return $.fn[_name].apply($jq, arguments);\n\t    };\n\t  }\n\t\n\t  methods = ['on', 'off', 'trigger'];\n\t\n\t  this.baseType = 'TYPE_EVENTS';\n\t\n\t  for (i = 0; method = methods[i]; i += 1) {\n\t    this[method] = createProxyFunction(method);\n\t  }\n\t});\n\t\n\texports['default'] = Events;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _playGameManagerDraggable = __webpack_require__(64);\n\t\n\tvar _playGameManagerDraggable2 = _interopRequireDefault(_playGameManagerDraggable);\n\t\n\texports.draggable = _playGameManagerDraggable2['default'];\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(65);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar COLLECTION_DRAGABLES = _typesCollection2['default'].create(); //eslint-ignore-line\n\t\n\tvar draggableStyleSheet;\n\t\n\tfunction boot() {\n\t  createHelperStyleSheet();\n\t  attachEvents();\n\t}\n\t\n\tfunction attachEvents() {\n\t  var state, E;\n\t\n\t  E = pl.EVENT;\n\t\n\t  // Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n\t  if (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\t\n\t  $(document).on(E.ACTION_DOWN, function (_event) {\n\t    var $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\t\n\t    $draggable = $(_event.target).closest('[pl-draggable]');\n\t\n\t    if ($draggable.length) {\n\t      scope = $draggable.scope();\n\t      cursor = resolveEventPoint(_event, 1 / scope.game.zoom);\n\t      mode = $draggable.pl('draggable');\n\t      game = {\n\t        position: scope.game.absolutePosition(),\n\t        scale: scope.game.transformScale().x\n\t      };\n\t      point = $draggable.absolutePosition().dec(game.position);\n\t      transform = $draggable.transform();\n\t      helperID = createID();\n\t      state = {\n\t        mode: mode,\n\t        $draggable: $draggable,\n\t        scope: scope,\n\t        $helper: null,\n\t\n\t        start: {\n\t          cursor: cursor,\n\t          point: point,\n\t          transform: transform\n\t        },\n\t\n\t        progress: {\n\t          distance: null,\n\t          point: null,\n\t          transform: null\n\t        }\n\t      };\n\t\n\t      // FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n\t      // so we need to account for the game transform scale.\n\t      //\n\t      if (game.scale !== 1) point = point.scale(1 / game.scale);\n\t\n\t      draggableStyleSheet.html(provideSource(helperID, createDraggableRule($draggable)));\n\t\n\t      switch (mode) {\n\t        case 'clone':\n\t          state.$helper = $draggable.clone();\n\t          state.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t          .addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t          break;\n\t\n\t        case 'pluck':\n\t          $draggable.addClass('PLUCKED');\n\t\n\t          state.$helper = $draggable.clone();\n\t          state.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t          .addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t          break;\n\t\n\t        default:\n\t          state.$helper = $draggable;\n\t          break;\n\t      }\n\t\n\t      state.$helper.removeClass('DRAG-ENDED').addClass('DRAG-START');\n\t\n\t      dragStartEvent = $.Event('drag-start', {\n\t        state: state,\n\t        targetScope: scope\n\t      });\n\t\n\t      scope.trigger(dragStartEvent);\n\t    }\n\t  }).on(E.ACTION_MOVE, function (_event) {\n\t    var cursor, $draggable, distance, point, transform, dragMoveEvent;\n\t\n\t    if (state) {\n\t      cursor = resolveEventPoint(_event, 1 / state.scope.game.zoom);\n\t      distance = state.start.cursor.distance(cursor);\n\t      point = _typesDimensions.Point.create();\n\t      transform = null;\n\t\n\t      if (state.start.transform !== 'none') {\n\t        transform = state.start.transform.clone();\n\t        transform.translate(distance.width, distance.height);\n\t        point.set(transform.applyToPoint(0, 0));\n\t      } else {\n\t        point = distance.to('point');\n\t      }\n\t\n\t      if (state.$helper.hasClass('DRAG-START')) {\n\t        state.$helper.removeClass('DRAG-START').addClass('DRAGGING');\n\t      }\n\t\n\t      dragMoveEvent = $.Event('drag-move', {\n\t        state: state,\n\t        targetScope: state.scope\n\t      });\n\t\n\t      state.progress.distance = distance;\n\t      state.progress.point = state.start.point.inc(point);\n\t      state.progress.transform = transform;\n\t\n\t      state.scope.translate(state.$helper, point);\n\t      state.scope.trigger(dragMoveEvent);\n\t    }\n\t  }).on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n\t    var $draggable, dragEndEvent;\n\t\n\t    if (state) {\n\t      // Do not end dragging if we dont mouse out of the document.\n\t      if (_event.type === 'mouseout' && ! ~[null, document.documentElement].indexOf(_event.toElement)) {\n\t        return;\n\t      }\n\t\n\t      $draggable = state.$draggable;\n\t\n\t      if (state.$helper.hasClass('draggable-helper')) {\n\t        state.$helper.on('transitionend', function () {\n\t          $draggable.removeClass('PLUCKED');\n\t          $(this).remove();\n\t        });\n\t      }\n\t\n\t      state.$helper.removeClass('DRAG-START DRAGGING').addClass('DRAG-ENDED');\n\t\n\t      dragEndEvent = $.Event('drag-end', {\n\t        state: state,\n\t        targetScope: state.scope\n\t      });\n\t\n\t      state.scope.trigger(dragEndEvent);\n\t\n\t      state = null;\n\t    }\n\t  });\n\t}\n\t\n\tattachEvents.disableTouchScroll = function () {\n\t  document.addEventListener('touchmove', function (_event) {\n\t    _event.preventDefault();\n\t  }, false);\n\t};\n\t\n\tfunction resolveEventPoint(_event, _scale) {\n\t  var scale = _scale || 1;\n\t\n\t  if (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t    /**\n\t     * For now, interactions should use the last touch if multiple fingers are captured.\n\t     * @todo Maybe invoke action for each touch.\n\t     */\n\t    _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t  }\n\t\n\t  return _typesDimensions.Point.create().set(new function () {\n\t    if (_event.touch) {\n\t      this.x = _event.touch.clientX * scale;\n\t      this.y = _event.touch.clientY * scale;\n\t    } else {\n\t      this.x = _event.clientX * scale;\n\t      this.y = _event.clientY * scale;\n\t    }\n\t  }());\n\t}\n\t\n\tfunction createHelperStyleSheet() {\n\t  draggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n\t}\n\t\n\tfunction createDraggableRule(_$draggable) {\n\t  var i, style, blacklist, rule, prop;\n\t\n\t  style = window.getComputedStyle(_$draggable[0]);\n\t  rule = {};\n\t  blacklist = ['zIndex', 'opacity', 'cursor', 'transition', 'transitionDelay', 'transitionDuration', 'transitionProperty', 'transitionTimingFunction'];\n\t\n\t  for (i = 0; i < style.length; i += 1) {\n\t    prop = _util2['default'].transformId(style[i], true);\n\t    if (~blacklist.indexOf(prop)) continue;\n\t    if (prop.indexOf('Webkit') === 0) prop = prop.slice(0, 1).toLowerCase() + prop.slice(1);\n\t    if (style[prop]) rule[prop] = style[prop];\n\t  }\n\t\n\t  return rule;\n\t}\n\t\n\tfunction provideSource(_id, _rule) {\n\t  var source, prop, value;\n\t\n\t  source = '#' + _id + '.draggable-helper {';\n\t\n\t  for (prop in _rule) {\n\t    if (!_rule.hasOwnProperty(prop)) continue;\n\t    value = _rule[prop];\n\t    source += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase() + ': ' + value + ';';\n\t  }\n\t\n\t  source += '}';\n\t\n\t  return source;\n\t}\n\t\n\tfunction createID() {\n\t  return 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n\t    if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t    return Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n\t  });\n\t}\n\t\n\tvar draggableManager = {};\n\t\n\t$(boot);\n\t\n\texports['default'] = draggableManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Collections are iterables which hold a consistent interface throughout its indexes.\n\t *\n\t * @module\n\t * @requires module:types/BasicArray\n\t */\n\t\n\tvar _typesBasicArray = __webpack_require__(50);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n\t * @classdesc Iterable holding record objects of the same interface.\n\t * @class\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tvar Collection = _typesBasicArray2['default'].extend(function () {\n\t  /**\n\t   * Gets the record object which has `_member` as a member.\n\t   * @instance\n\t   * @protected\n\t   * @memberof module:types/Collection~Collection\n\t   * @arg {*} _member - object reference to search for.\n\t   * @arg {string} _key - the target key to test the `_member` against.\n\t   * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n\t   * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n\t   */\n\t  function getRecord(_member, _key, _shouldCollect) {\n\t    var i, record, member, result;\n\t\n\t    result = [];\n\t\n\t    for (i = 0; record = this[i]; i += 1) {\n\t      if (_key !== undefined) {\n\t        if (record[_key] === _member) {\n\t          if (_shouldCollect) {\n\t            result.push(record);\n\t          } else {\n\t            return record;\n\t          }\n\t        }\n\t      } else if (record instanceof Array) {\n\t        if (~record.indexOf(_member)) {\n\t          if (_shouldCollect) {\n\t            result.push(record);\n\t          } else {\n\t            return record;\n\t          }\n\t        }\n\t      } else {\n\t        for (member in record) {\n\t          if (!record.hasOwnProperty(member)) continue;\n\t          if (record[member] === _member) {\n\t            if (_shouldCollect) {\n\t              result.push(record);\n\t            } else {\n\t              return record;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return result.length ? result : null;\n\t  }\n\t\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @memberof module:types/Collection~Collection\n\t   * @readonly\n\t   * @default\n\t   */\n\t  this.baseType = 'TYPE_COLLECTION';\n\t\n\t  this.add = function (_record) {\n\t    if (~this.indexOf(_record)) return false;\n\t    this.push(_record);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.remove = function (_record) {\n\t    var index;\n\t\n\t    index = this.indexOf(_record);\n\t    if (~index) this.splice(index, 1);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.has = function (_record) {\n\t    return !! ~this.indexOf(_record);\n\t  };\n\t\n\t  this.get = function (_member, _key) {\n\t    return getRecord.call(this, _member, _key);\n\t  };\n\t\n\t  this.filter = function (_member, _key) {\n\t    return getRecord.call(this, _member, _key, true);\n\t  };\n\t});\n\t\n\texports['default'] = Collection;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  GlobalScope\n\t*/\n\t\n\tvar _typesScope = __webpack_require__(67);\n\t\n\tvar GlobalScope = _typesScope.Scope.extend(function () {\n\t\n\t  this.baseType = 'TYPE_GLOBAL_SCOPE';\n\t});\n\t\n\texports['default'] = GlobalScope;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n\t * This enables properties and methods to be in context of the DOM node and its descendants.\n\t *\n\t * @module\n\t * @requires types/jQProxy\n\t * @requires types/Basic\n\t * @requires types/Queue\n\t * @requires play.game\n\t * @requires util\n\t * @requires evalAction\n\t *\n\t * @exports createEntity\n\t */\n\t\n\tvar _typesJQProxy = __webpack_require__(68);\n\t\n\tvar _typesJQProxy2 = _interopRequireDefault(_typesJQProxy);\n\t\n\tvar _typesBasic = __webpack_require__(52);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(73);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar _playGame = __webpack_require__(60);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _evalAction = __webpack_require__(74);\n\t\n\tvar _evalAction2 = _interopRequireDefault(_evalAction);\n\t\n\tvar _typesAudioManager = __webpack_require__(75);\n\t\n\t/**\n\t * Creates a new Enitiy instance with a context node and implementation.\n\t * The instance is prototyped from the parent scope.\n\t *\n\t * @memberof module:types/Scope~Scope#createEntity\n\t * @protected\n\t * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n\t * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n\t * @returns {module:types/Scope~Scope}\n\t */\n\tfunction createEntity(_$node, _implementation) {\n\t  var component, prototype, componentRecord, instance;\n\t\n\t  component = _$node.attr('pl-component');\n\t  prototype = this;\n\t\n\t  if (component) {\n\t    componentRecord = _playGame2['default'].component.get(component);\n\t\n\t    if (componentRecord) {\n\t      // If a scope is being defined as an extention of a component before the component scope\n\t      // has been allocated, we construct the component first then pass it as the proto.\n\t      // But we need to make sure we are not allocating the component it self.\n\t      if (componentRecord.implementation !== _implementation) {\n\t        prototype = this.extend(componentRecord.implementation);\n\t      }\n\t    } else {\n\t      throw new Error('No implementation record for the ' + component + 'component.');\n\t    }\n\t  }\n\t\n\t  instance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\t\n\t  return instance.initialize(_$node, component);\n\t}\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n\t * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n\t * @class\n\t * @extends module:types/jQProxy~jQProxy\n\t */\n\tvar Scope = _typesJQProxy2['default'].extend(function () {\n\t\n\t  /**\n\t   * Collection of records pairing a node with its action.\n\t   * @memberof module:types/Scope~Scope\n\t   * @static\n\t   * @protected\n\t   * @todo Convert to types/Collection\n\t   */\n\t  var Actionables;\n\t\n\t  function attachActionHandler() {\n\t    this.on(pl.EVENT.ACTION, function (_event) {\n\t      var target, record;\n\t\n\t      target = $(_event.target).closest('[pl-action]')[0];\n\t\n\t      if (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t        /**\n\t         * For now, interactions should use the last touch if multiple fingers are captured.\n\t         * @todo Maybe invoke action for each touch.\n\t         */\n\t        _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t      }\n\t\n\t      _event.cursor = _typesDimensions.Point.create().set(new function () {\n\t        if (_event.touch) {\n\t          this.x = _event.touch.clientX;\n\t          this.y = _event.touch.clientY;\n\t        } else {\n\t          this.x = _event.clientX;\n\t          this.y = _event.clientY;\n\t        }\n\t      }());\n\t\n\t      if (target) {\n\t        record = this.actionables.item(target);\n\t\n\t        if (record) {\n\t          _event.targetScope = this;\n\t          this.event = _event;\n\t          _evalAction2['default'](record.action, this);\n\t          this.event = null;\n\t        }\n\t      }\n\t    });\n\t  }\n\t\n\t  function getRecordBy(_key, _member, _collection) {\n\t    var i, record;\n\t\n\t    if (_collection) {\n\t      for (i = 0; record = _collection[i]; i += 1) {\n\t        if (record[_key] === _member) return record;\n\t      }\n\t    }\n\t\n\t    return null;\n\t  }\n\t\n\t  function removeRecord(_record, _collection) {\n\t    var index;\n\t\n\t    index = _collection.indexOf(_record);\n\t    if (~index) _collection.splice(index, 1);\n\t  }\n\t\n\t  function captureDropables(_scope) {\n\t    var collection;\n\t\n\t    collection = [];\n\t\n\t    _scope.find('> [pl-pluck]').each(function () {\n\t      var name;\n\t\n\t      name = $(this).attr('pl-pluck');\n\t\n\t      collection.push(this);\n\t      collection[name] = this;\n\t    });\n\t\n\t    return collection;\n\t  }\n\t\n\t  function pluckAndDrop(_dropables, _template) {\n\t    $(_template).find('[pl-drop]').each(function () {\n\t      var $node, name, dropable;\n\t\n\t      $node = $(this);\n\t      name = $node.attr('pl-drop');\n\t      dropable = _dropables[name];\n\t\n\t      if (dropable) {\n\t        $node.replaceWith(dropable.children);\n\t      }\n\t    });\n\t  }\n\t\n\t  // Protected\n\t  function loadComponentAssets(_name, _callback) {\n\t    var scope, path, totalRequests, transcludeMode, dropables;\n\t\n\t    function ready() {\n\t      ready.status += 1;\n\t\n\t      if (ready.status === totalRequests) {\n\t        if (_callback) {\n\t          _callback.call(scope, _name);\n\t        }\n\t      }\n\t    }\n\t\n\t    totalRequests = 0;\n\t    scope = this;\n\t    path = _playGame2['default'].config('componentDirectory') + _name + '/';\n\t    dropables = captureDropables(this);\n\t    transcludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n\t    ready.status = 0;\n\t\n\t    if (!this.children().length || transcludeMode) {\n\t      totalRequests += 1;\n\t      $('<div>').load(path + 'template.html', function () {\n\t        var memory;\n\t\n\t        memory = [];\n\t\n\t        switch (transcludeMode) {\n\t          case scope.TRANSCLUDE_APPEND:\n\t            scope.append(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_PREPEND:\n\t            scope.prepend(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_PLUCK:\n\t            pluckAndDrop(dropables, this);\n\t            scope.empty().append(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_REPLACE:\n\t            scope.empty().append(this.children);\n\t            break;\n\t\n\t          default:\n\t            if (transcludeMode) {\n\t              pluckAndDrop(new function () {\n\t                this[transcludeMode] = scope.node();\n\t              }(), this);\n\t              scope.empty().append(this.children);\n\t            } else {\n\t              scope.empty().append(this.children);\n\t            }\n\t\n\t        }\n\t\n\t        scope.findOwn('[pl-component]').each(function () {\n\t          var name;\n\t\n\t          name = $(this).attr('pl-component');\n\t\n\t          if (~memory.indexOf(name)) return;\n\t\n\t          memory.push(name);\n\t\n\t          totalRequests += 1;\n\t\n\t          _playGame2['default'].component.load(name, function () {\n\t            ready();\n\t          });\n\t        });\n\t        ready();\n\t      });\n\t    }\n\t\n\t    if (!$('style[pl-for-component=\"' + _name + '\"]').length && _playGame2['default'].config('shouldLoadComponentStyles') !== false) {\n\t      totalRequests += 1;\n\t      $('<style type=\"text/css\" pl-for-component=\"' + _name + '\">').load(path + 'style.css', ready).appendTo(document.body);\n\t    }\n\t\n\t    if (!totalRequests) _callback && _callback.call(this, _name);\n\t\n\t    return this;\n\t  }\n\t\n\t  function captureProperties() {\n\t    var i, attr, name, collection;\n\t\n\t    collection = (function () {\n\t\n\t      this.has = function (_name) {\n\t        return !! ~this.indexOf(_name);\n\t      };\n\t\n\t      return this;\n\t    }).call([]);\n\t\n\t    for (i = 0; attr = this.$els[0].attributes[i]; i += 1) {\n\t      // I explicitly want it to be at the beginning.\n\t      if (attr.name.indexOf('pl-') === 0) {\n\t        name = attr.name.slice(3);\n\t        collection[_util2['default'].transformId(name, true)] = attr.value;\n\t\n\t        collection.push(name);\n\t      }\n\t    }\n\t\n\t    if (collection.length) this.properties = collection;\n\t\n\t    return this;\n\t  }\n\t\n\t  function initializeEntities() {\n\t    if (!this.hasOwnProperty('entities')) return this;\n\t\n\t    this.entities.forEach(this.bind(function (_record, _index) {\n\t      var $nodes, query, index;\n\t\n\t      $nodes = this.findOwn(_record.selector);\n\t      query = ['#' + _record.selector, '[pl-id=' + _record.selector + ']', '[pl-component=' + _record.selector + ']', '[pl-' + _record.selector + ']'];\n\t      index = 0;\n\t\n\t      while (!$nodes.length) {\n\t        if (index === query.length) {\n\t          throw new Error('Unable to locate entity with selector', _record.selector);\n\t        }\n\t        $nodes = this.findOwn(query[index]);\n\t        index += 1;\n\t      }\n\t\n\t      $nodes.each(this.bind(function (_index, _node) {\n\t        var $node, instance, id;\n\t\n\t        $node = $(_node);\n\t\n\t        if (!Scope.isPrototypeOf(_record)) {\n\t          instance = createEntity.call(this, $node, _record.implementation);\n\t          if (!instance.isReady) this.assetQueue.add(instance);\n\t        } else {\n\t          instance = _record;\n\t        }\n\t\n\t        id = _util2['default'].transformId(instance.id(), true);\n\t        if (id) _util2['default'].assignRef(this, id, instance);\n\t      }));\n\t    }));\n\t\n\t    return this;\n\t  }\n\t\n\t  function handleProperties() {\n\t    var scope, property, handler;\n\t\n\t    scope = this;\n\t\n\t    if (this.hasOwnProperty('properties')) {\n\t      this.properties.forEach(function (_name) {\n\t        handler = scope.propertyHandlers[_name];\n\t        if (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n\t      });\n\t    }\n\t\n\t    if (this.propertyHandlers) {\n\t      for (property in this.propertyHandlers) {\n\t        // Only exclide members on the base type.\n\t        if (_typesBasic2['default'].hasOwnProperty(property)) continue;\n\t\n\t        handler = this.propertyHandlers[property];\n\t\n\t        this.findOwn('[pl-' + property + ']').each(function () {\n\t          var attr;\n\t\n\t          if (scope === $(this).scope()) {\n\t            attr = this.attributes.getNamedItem('pl-' + property);\n\t\n\t            if (handler) handler.call(scope, this, property, attr.value);\n\t          }\n\t        });\n\t      }\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function invokeLocal(_name) {\n\t    var args, owner;\n\t\n\t    args = [].slice.call(arguments, 1);\n\t\n\t    if (this.isMemberSafe(_name)) {\n\t      return this[_name].apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  function init() {\n\t    var willInitEvent, initEvent;\n\t\n\t    initEvent = $.Event('initialize', { targetScope: this });\n\t    willInitEvent = $.Event('will-initialize', { targetScope: this });\n\t\n\t    invokeLocal.call(this, 'willInit');\n\t    this.trigger(willInitEvent);\n\t\n\t    this.attachEvents();\n\t\n\t    initializeEntities.call(this);\n\t    handleProperties.call(this);\n\t\n\t    this.watchAssets();\n\t    this.captureAudioAssets();\n\t    this.captureReferences();\n\t\n\t    this.__init();\n\t    invokeLocal.call(this, 'init');\n\t\n\t    this.trigger(initEvent);\n\t\n\t    if (!this.isReady) this.assetQueue.ready();\n\t\n\t    return this;\n\t  }\n\t\n\t  function ready() {\n\t    var readyEvent, entities;\n\t\n\t    readyEvent = $.Event('ready', { targetScope: this });\n\t    entities = this.findOwn('.pl-scope').scope();\n\t\n\t    if (entities) {\n\t      if (entities.length > 0) {\n\t        this.entities = entities;\n\t      } else {\n\t        this.entities = [entities];\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Sort audio into DOM order.\n\t     * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n\t     */\n\t    if (this.hasOwnProperty('audio')) {\n\t      (this.game || this).media.addShadow(this.audio);\n\t      this.audio.collections().forEach((function (_collection) {\n\t        var map = {\n\t          voiceOver: 'voice-over',\n\t          background: 'background',\n\t          sfx: 'sfx'\n\t        };\n\t\n\t        if (!_collection.length) return;\n\t\n\t        this.findOwn('audio.' + map[_collection.type]).each(function (_index, _node) {\n\t          var id, audio, collection, index;\n\t\n\t          id = $(_node).id();\n\t          audio = (_collection.find('#' + id) || [])[0];\n\t          index = _collection.indexOf(audio);\n\t\n\t          if (index !== _index) {\n\t            _collection[index] = _collection[_index];\n\t            _collection[_index] = audio;\n\t          }\n\t        });\n\t      }).bind(this));\n\t    }\n\t\n\t    this.isReady = true;\n\t    this.addClass('READY');\n\t\n\t    this.__ready();\n\t    invokeLocal.call(this, 'ready');\n\t\n\t    this.trigger(readyEvent);\n\t  }\n\t\n\t  Actionables = (function () {\n\t\n\t    _util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t    this.add = function (_node, _action) {\n\t      if (!this.has(_node)) {\n\t        this.push({\n\t          node: _node,\n\t          action: _action\n\t        });\n\t      }\n\t\n\t      return this;\n\t    };\n\t\n\t    this.remove = function (_node) {\n\t      var item, index;\n\t\n\t      item = this.item(_node);\n\t      index = this.indexOf(item);\n\t      if (~index) this.splice(index, 1);\n\t\n\t      return this;\n\t    };\n\t\n\t    this.item = function (_node) {\n\t      var i, item;\n\t\n\t      for (i = 0; item = this[i]; i += 1) {\n\t        if (item.node === _node) return item;\n\t      }\n\t    };\n\t\n\t    this.has = function (_node) {\n\t      return !!this.item(_node);\n\t    };\n\t\n\t    return this;\n\t  }).call([]);\n\t\n\t  this.TRANSCLUDE_REPLACE = 'replace';\n\t  this.TRANSCLUDE_PREPEND = 'prepend';\n\t  this.TRANSCLUDE_APPEND = 'append';\n\t  this.TRANSCLUDE_PLUCK = 'pluck';\n\t\n\t  this.baseType = 'TYPE_SCOPE';\n\t  this.actionables = null;\n\t  this.isReady = null;\n\t  this.isComponent = false;\n\t  this.entities = null;\n\t  this.audio = null;\n\t  this.properties = null;\n\t  this.propertyHandlers = null;\n\t  this.assetQueue = null;\n\t  this.event = null;\n\t  this.currentMedia = {};\n\t\n\t  this.initialize = function (_node_selector, _componentName) {\n\t    var scope;\n\t\n\t    scope = this;\n\t\n\t    this.isReady = false;\n\t    this.isComponent = !!_componentName;\n\t    this.event = null;\n\t    this.assetQueue = _typesQueue2['default'].create();\n\t    this.$els = _node_selector.jquery ? _node_selector : $(_node_selector);\n\t\n\t    if (!this.$els.length) {\n\t      throw new ReferenceError('Unable to locate the element with selector ' + this.$els.selector + '.');\n\t    }\n\t\n\t    this.addClass('pl-scope ' + (_componentName ? _componentName + '-component' : ''));\n\t    this.data('pl-scope', this);\n\t    this.data('pl-isComponent', !!_componentName);\n\t\n\t    captureProperties.call(this);\n\t\n\t    if (_componentName) {\n\t      loadComponentAssets.call(this, _componentName, function () {\n\t        init.call(this);\n\t      });\n\t    } else {\n\t      init.call(this);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  // only for use in base types\n\t  this.__init = function () {\n\t    return this;\n\t  };\n\t  this.__ready = function () {\n\t    return this;\n\t  };\n\t\n\t  this.willInit = function () {\n\t    return this;\n\t  };\n\t  this.init = function () {\n\t    return this;\n\t  };\n\t  this.ready = function () {\n\t    return this;\n\t  };\n\t\n\t  this.watchAssets = function (_nodes) {\n\t    var createHandler, watch;\n\t\n\t    createHandler = this.bind(function (_node) {\n\t      return (function () {\n\t        var loadedEvent = $.Event('loaded', { targetScope: this });\n\t\n\t        this.assetQueue.ready(_node.src);\n\t        this.trigger(loadedEvent, [_node]);\n\t\n\t        _node.onload = null;\n\t      }).bind(this);\n\t    });\n\t\n\t    watch = this.bind(function (_index, _node) {\n\t      var node = typeof _index === 'number' ? _node : _index;\n\t\n\t      if (node.nodeName !== 'IMG' || node.complete) return;\n\t      if (this.assetQueue.add(node.src)) {\n\t        node.onload = createHandler(node);\n\t        node.onerror = function () {\n\t          console.error('Image failed to load', node.src);\n\t        };\n\t      }\n\t    });\n\t\n\t    if (_nodes) {\n\t      _nodes.forEach(watch);\n\t      return this;\n\t    }\n\t\n\t    this.each(watch);\n\t    this.findOwn('img').each(watch);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.attachEvents = function () {\n\t\n\t    this.proto();\n\t\n\t    this.assetQueue.on('complete', this.bind(function () {\n\t      this.assetQueue.off();\n\t      ready.call(this);\n\t    }));\n\t\n\t    this.on('ready', function (_event) {\n\t      if (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n\t        this.assetQueue.ready(_event.targetScope);\n\t      }\n\t\n\t      if (!this.assetQueue.length && this.isReady) this.off('ready');\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  this.captureReferences = function () {\n\t    this.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n\t      var $node, id;\n\t\n\t      if (_node.nodeName === 'AUDIO') return;\n\t\n\t      $node = $(_node);\n\t      id = $node.attr('id') || $node.attr('pl-id');\n\t\n\t      if (!this[id]) {\n\t        _util2['default'].assignRef(this, id, $node.data('pl-scope') || $node);\n\t      }\n\t    }));\n\t  };\n\t\n\t  this.captureAudioAssets = function () {\n\t    var deQ, $audio;\n\t\n\t    if (!($audio = this.findOwn('audio')).length) return false;\n\t\n\t    deQ = (function (_item) {\n\t      [this, this.screen].forEach(function (_scope) {\n\t        if (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n\t          _scope.requiredQueue.ready(_item);\n\t        }\n\t      });\n\t    }).bind(this);\n\t\n\t    this.audio = _typesAudioManager.AudioManager.create(this.id());\n\t\n\t    $audio.each((function (_index, _node) {\n\t      this.assetQueue.add(_node.src);\n\t      this.audio.watch(_node).then((function (_audio) {\n\t        var loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\t\n\t        if ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\t\n\t        if (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\t\n\t        this.trigger(loadedEvent);\n\t      }).bind(this));\n\t    }).bind(this));\n\t\n\t    // proxy events\n\t    this.audio.on('play pause ended stopped', this.bind(function (_event) {\n\t      var map = {\n\t        background: 'BACKGROUND',\n\t        voiceOver: 'VOICE-OVER',\n\t        sfx: 'SFX'\n\t      };\n\t\n\t      switch (_event.type) {\n\t        case 'play':\n\t          [this, this.screen].forEach(function (_scope, _index, _set) {\n\t            if (_index === 1 && _scope === _set[0]) return;\n\t            if (_scope.$els) {\n\t              _scope.addClass('PLAYING ' + map[_event.target.type]);\n\t              _scope.currentMedia[map[_event.target.type]] = _event.target;\n\t            }\n\t          });\n\t\n\t          $(_event.targetNode).addClass('PLAYING');\n\t          break;\n\t\n\t        case 'pause':\n\t        case 'stopped':\n\t        case 'ended':\n\t          [this, this.screen].forEach(function (_scope, _index, _set) {\n\t            var state;\n\t\n\t            if (_index === 1 && _scope === _set[0]) return;\n\t\n\t            if (_scope.$els) {\n\t              _scope.removeClass(map[_event.target.type]);\n\t              state = _scope.attr('class');\n\t              if (!/BACKGROUND|VOICE-OVER|SFX/.test(state)) _scope.removeClass('PLAYING');\n\t              if (_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n\t            }\n\t          });\n\t\n\t          $(_event.targetNode).removeClass('PLAYING');\n\t          if (_event.type === 'ended') deQ(_event.target);\n\t          break;\n\t      }\n\t\n\t      var audioEvent = $.Event('audio-' + _event.type, {\n\t        target: _event.target,\n\t        targetSource: _event.targetSource,\n\t        targetNode: _event.targetNode,\n\t        targetScope: this\n\t      });\n\t\n\t      this.trigger(audioEvent);\n\t    }));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.handleProperty = function (_implementation) {\n\t    if (this.propertyHandlers) {\n\t      if (this.hasOwnProperty('propertyHandlers')) {\n\t        switch (typeof _implementation) {\n\t          case 'function':\n\t            _implementation.call(this.propertyHandlers);\n\t            break;\n\t\n\t          case 'object':\n\t            this.propertyHandlers.mixin(_implementation);\n\t            break;\n\t        }\n\t      } else {\n\t        this.propertyHandlers = this.propertyHandlers.extend(_implementation);\n\t      }\n\t    } else {\n\t      this.propertyHandlers = _typesBasic2['default'].extend(_implementation);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.entity = function (_selector, _implementation) {\n\t    var Entity, prototype, id;\n\t\n\t    Entity = _playGame2['default'].provideEntityType();\n\t\n\t    if (!this.hasOwnProperty('entities')) this.entities = [];\n\t\n\t    if (this.hasOwnProperty('$els')) {\n\t      throw new Error('Wait this hasn\\'t been tested.');\n\t      prototype = Entity.isPrototypeOf(this) ? this : Entity;\n\t      instance = prototype.extend(_implementation).initialize(this.find(_selector));\n\t      id = _util2['default'].transformId(instance.id());\n\t\n\t      // this.entities.push(instance);\n\t      if (id) this[id] = instance;\n\t    } else {\n\t      this.entities.push({\n\t        selector: _selector,\n\t        implementation: _implementation\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.has = function (_child) {\n\t    var child;\n\t\n\t    child = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\t\n\t    return !!this.$els.has(child).length;\n\t  };\n\t\n\t  this.toString = function () {\n\t    var type;\n\t\n\t    type = this.baseType.replace('TYPE_', '');\n\t    type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t\n\t    return ['[', this.id() || this.address(), ' ', type, ']'].join('');\n\t  };\n\t\n\t  this.log = function () {\n\t    var args;\n\t\n\t    args = _util2['default'].toArray(arguments);\n\t\n\t    console.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n\t    return this;\n\t  };\n\t\n\t  this.handleProperty(function () {\n\t\n\t    this.component = function (_node, _name, _value, _property) {\n\t      var $node, record, scope, id;\n\t\n\t      $node = $(_node);\n\t\n\t      if (!$node.data('pl-isComponent')) {\n\t        record = _playGame2['default'].component.get(_value);\n\t\n\t        if (record) {\n\t          scope = createEntity.call(this, $node, record.implementation);\n\t          id = _util2['default'].transformId(scope.id() || _value, true);\n\t          _util2['default'].assignRef(this, id, scope);\n\t\n\t          if (!scope.isReady) this.assetQueue.add(scope);\n\t        } else {\n\t          throw new Error('Ahh!');\n\t        }\n\t      }\n\t    };\n\t\n\t    this.action = function (_node, _name, _value) {\n\t      if (!this.hasOwnProperty('actionables')) {\n\t        this.actionables = Actionables.create();\n\t        attachActionHandler.call(this);\n\t      }\n\t\n\t      this.actionables.add(_node, _value);\n\t    };\n\t\n\t    this.required = function (_node, _name, _value) {\n\t      if (this.is(_node)) {\n\t        this.screen.require(this);\n\t      }\n\t    };\n\t\n\t    this.require = function (_node, _name, _value) {\n\t      var query, $node;\n\t\n\t      // if the node with the attribute is the node for this scope\n\t      if (this.is(_node)) {\n\t        query = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n\t        $node = this.find(query);\n\t\n\t        $node.on('ready', this.bind(function (_event) {\n\t          if ($node.is(_event.target)) {\n\t            this.require(_event.targetScope);\n\t          }\n\t        }));\n\t      }\n\t    };\n\t  });\n\t});\n\t\n\texports['default'] = { Scope: Scope, createEntity: createEntity };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 68 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$keys = __webpack_require__(69)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  jQProxy\n\t*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n\t*  @proto Basic\n\t*\n\t*  NOTE: Custom events may trigger on scopes\n\t*  that also targets the same elments. Testing needed.\n\t*/\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(52);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar jQProxy = _typesBasic2['default'].extend(function () {\n\t  var method, exclude;\n\t\n\t  /**\n\t  *  @desc Creates a function with a proxy to the jQuery method.\n\t  *  @param _name (String) The name of the method being proxied.\n\t  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t  *  @private\n\t  */\n\t  function createProxyFunction(_name) {\n\t    return function () {\n\t      var response;\n\t\n\t      // This makes sure your not calling any jQuery methods before initialization.\n\t      if (!this.hasOwnProperty('$els')) {\n\t        if (_name === 'on') {\n\t          registerHandler.call(this, arguments);\n\t        } else {\n\t          throw new ReferenceError('Unable to invoke ' + _name + ' because the scope is not initialized.');\n\t        }\n\t        return;\n\t      }\n\t\n\t      response = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\t\n\t      if (response === this.$els || response && response.jquery && response.is(this.$els)) {\n\t        return this;\n\t      }\n\t\n\t      return response;\n\t    };\n\t  }\n\t\n\t  function resolveEventHandler(_scope, _method, _args) {\n\t    var i, arg, args;\n\t\n\t    args = [];\n\t\n\t    if (~['on', 'load'].indexOf(_method)) {\n\t      for (i = 0; arg = _args[i]; i += 1) {\n\t        if (typeof arg === 'function') {\n\t          args.push((function (_handler) {\n\t            return function () {\n\t              return _handler.apply(_scope, arguments);\n\t            };\n\t          })(arg));\n\t        } else {\n\t          args.push(arg);\n\t        }\n\t      }\n\t\n\t      return args;\n\t    }\n\t\n\t    return _args;\n\t  }\n\t\n\t  function registerHandler(_definition) {\n\t    if (!this.hasOwnProperty('eventRegistry')) {\n\t      if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t        this.eventRegistry = this.eventRegistry.slice(0);\n\t      } else {\n\t        this.eventRegistry = [];\n\t      }\n\t    }\n\t\n\t    this.eventRegistry.push(_definition);\n\t\n\t    return true;\n\t  }\n\t\n\t  // We don't want jQuery methods overridding our base type's methods.\n\t  exclude = ['constructor'].concat(_Object$keys(_typesBasic2['default']));\n\t\n\t  this.baseType = 'TYPE_JQPROXY';\n\t  this.$els = null;\n\t  this.eventRegistry = null;\n\t\n\t  for (method in $.fn) {\n\t    if (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n\t    this[method] = createProxyFunction(method);\n\t  }\n\t\n\t  this.node = function () {\n\t    return this.$els[0];\n\t  };\n\t\n\t  this.attachEvents = function () {\n\t    var self;\n\t\n\t    self = this;\n\t\n\t    if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t      this.eventRegistry.forEach(function (_definition) {\n\t        self.on.apply(self, _definition);\n\t      });\n\t    }\n\t  };\n\t\n\t  this.listen = function (_name, _isCapure_handler, _handler) {\n\t    var _isCapture, node, handler;\n\t\n\t    _isCapture = false;\n\t\n\t    // resolve arguments\n\t    typeof _isCapure_handler === 'boolean' ? _isCapture = _isCapure_handler : _handler = _isCapure_handler;\n\t\n\t    _handler.cb = _handler.bind(this);\n\t\n\t    if (this.$els) {\n\t      node = this.$els[0];\n\t      if (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n\t    } else {\n\t      return registerHandler([_name, _handler.cb, _isCapture]);\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.ignore = function (_name, _handler) {\n\t    var node = this.$els && this.$els[0];\n\t\n\t    if (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\t\n\t    return false;\n\t  };\n\t\n\t  // Wraps you function 'this' to the scope.\n\t  //\n\t  this.bind = function (_handler) {\n\t    var args;\n\t\n\t    args = [].map.call(arguments, function (m) {\n\t      return m;\n\t    }).slice(1);\n\t\n\t    return _handler.bind.apply(_handler, [this].concat(args));\n\t  };\n\t\n\t  this.findOwn = function (_selector) {\n\t    return this.find(_selector).filter(this.bind(function (_index, _node) {\n\t      var $node;\n\t\n\t      $node = $(_node);\n\t\n\t      if ($node.hasClass('pl-scope')) {\n\t        return $node.parent().scope() === this;\n\t      }\n\t\n\t      return $node.scope() === this;\n\t    }));\n\t  };\n\t\n\t  this.isMemberSafe = function (_name) {\n\t    var owner, elOwner, prototype;\n\t\n\t    if (this.hasOwnProperty(_name)) {\n\t      return true;\n\t    } else {\n\t      prototype = Object.getPrototypeOf(this);\n\t      owner = _util2['default'].getOwner(this, this[_name]);\n\t\n\t      if (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\t\n\t      if (prototype.$els) {\n\t        elOwner = _util2['default'].getOwner(prototype, prototype.$els);\n\t\n\t        if (owner.object.isPrototypeOf(elOwner.object)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.is = function (_obj) {\n\t    if (!_obj) return false;\n\t    if (_obj.$els) return this.$els.is(_obj.$els);\n\t\n\t    return this.$els.is(_obj);\n\t  };\n\t});\n\t\n\texports['default'] = jQProxy;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(70), __esModule: true };\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(71);\n\tmodule.exports = __webpack_require__(10).Object.keys;\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 Object.keys(O)\n\tvar toObject = __webpack_require__(26)\n\t  , $keys    = __webpack_require__(42);\n\t\n\t__webpack_require__(72)('keys', function(){\n\t  return function keys(it){\n\t    return $keys(toObject(it));\n\t  };\n\t});\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// most Object methods by ES6 should accept primitives\n\tvar $export = __webpack_require__(8)\n\t  , core    = __webpack_require__(10)\n\t  , fails   = __webpack_require__(19);\n\tmodule.exports = function(KEY, exec){\n\t  var fn  = (core.Object || {})[KEY] || Object[KEY]\n\t    , exp = {};\n\t  exp[KEY] = exec(fn);\n\t  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n\t};\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Queue\n\t*  @desc Contains...\n\t*  @proto Array, Events, Basic\n\t*/\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(65);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesEvents = __webpack_require__(62);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar Queue = _typesCollection2['default'].extend(function () {\n\t\n\t  this.baseType = 'TYPE_QUEUE';\n\t\n\t  this.ready = function (_record) {\n\t    if (_record != null) this.remove(_record);\n\t\n\t    if (!this.length) {\n\t      this.trigger('complete');\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  _util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t  return this;\n\t});\n\t\n\texports['default'] = Queue;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 74 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * @module evalAction\n\t */\n\t\n\t/**\n\t * Performs `eval()` on the value of an `action` attribute on an HTML element.\n\t * @arg {string} _source - JavaScript source code.\n\t * @arg {Scope} _scope - The context in which to run the source.\n\t * @returns {*} The result of the evaluated source.\n\t */\n\tfunction evalAction(_source, _scope) {\n\t  var error;\n\t\n\t  function target(_selector) {\n\t    if (_scope.event) {\n\t      return _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n\t    }\n\t  }\n\t\n\t  // expose members of the object as if they were local variables.\n\t  // NOTE: methods still retain their \"this\" binding to the object! :D\n\t  return eval('with (_scope) { try {' + _source + ';} catch (error) { console.error(\\'Error:\\', error.message, \\'evaluating action\\', _source, \\'in\\', _scope.id() || _scope.address()); } }');\n\t}\n\t\n\texports['default'] = evalAction;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Promise = __webpack_require__(76)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(69)['default'];\n\t\n\tvar _Object$create = __webpack_require__(53)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\t/**\n\t * Contains classes for managing different media types.\n\t * Providing an API for referencing and control.\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t */\n\t\n\tvar _typesType = __webpack_require__(109);\n\t\n\tvar _typesType2 = _interopRequireDefault(_typesType);\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(65);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\t// Object type definitions are using  `$` as the augmentation method for Types.\n\t'use strict';var EventTargetInterface,\n\t    InspectorInterface,\n\t    PlayableInterface,\n\t    LegislatorInterface,\n\t    StateInterface,\n\t    $$ = window.jQuery;\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n\t * Manages any playing media (Audio, Video).\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Manages any playing media (Audio, Video).\n\t * <style>\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t *\n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t */\n\tfunction MediaManager($, sup) {\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t  $('video', function alloc(_id) {\n\t    sup(this, 'alloc', arguments);\n\t    this.video = _typesCollection2['default'].create();\n\t    this.initialize(_id, 'media manager');\n\t  });\n\t}\n\t\n\t/**\n\t * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t * - Background\n\t * - Voice Over\n\t * - SFX (Sound Effects)\n\t * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n\t * @class\n\t * @prop {type} member - Text.\n\t * @extends EventTargetInterface\n\t * @extends PlayableInterface\n\t * @extends InspectorInterface\n\t */\n\tfunction AudioManager($) {\n\t  var AUDIO_TYPES, BUFFER_CACHE;\n\t\n\t  /**\n\t   * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n\t   * @arg {HTMLAudioElement} _node - The loaded audio element.\n\t   * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n\t   */\n\t  function AudioBufferRecord(_node, _buffer) {\n\t    this.node = _node;\n\t    this.type = getAudioType(_node);\n\t    this.buffer = _buffer;\n\t  }\n\t  /**\n\t   * Provides the classification an audio element falls into.\n\t   * - Background (`background`)\n\t   * - Voice Over (`voiceOver`)\n\t   * - Sound Effects (`sfx`)\n\t   * @protected\n\t   * @arg {HTMLAudioElement} _audio - The audio element.\n\t   * @returns {string} - The type.\n\t   */\n\t  function getAudioType(_audio) {\n\t    return _util2['default'].transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n\t  }\n\t  /**\n\t   * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n\t   * @protected\n\t   * @arg {HTMLAudioElement} _audio - The audio element.\n\t   * @returns {Promise}\n\t   */\n\t  function loadArrayBuffer(_audio) {\n\t    var xhr, manager, fileName;\n\t\n\t    xhr = new (XMLHttpRequest || _util2['default'].noop)();\n\t    manager = this;\n\t    fileName = _util2['default'].resolveFileName(_audio.src);\n\t\n\t    if (!xhr.open) _Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\t\n\t    return new _Promise(function (resolve, reject) {\n\t      var cache = BUFFER_CACHE[fileName];\n\t\n\t      // Decodes ArrayBuffer into an AudioBuffer.\n\t      function onLoad() {\n\t        var ctx, promise;\n\t\n\t        if (xhr.status >= 200 && xhr.status < 300) {\n\t          if (ctx = pl.game.getAudioContext()) {\n\t            promise = new _Promise(function (resolveDecoding, rejectDecoding) {\n\t              try {\n\t                ctx.decodeAudioData(xhr.response, function (_buffer) {\n\t                  var audio = manager.collect(new AudioBufferRecord(_audio, _buffer));\n\t\n\t                  resolveDecoding(audio);\n\t                  // Cache the AudioBuffer to resolve duplicates.\n\t                  BUFFER_CACHE[fileName] = _buffer;\n\t                }, function () {\n\t                  rejectDecoding(\"Failed to decode ArrayBuffer for \" + fileName + '.');\n\t                });\n\t              } catch (e) {\n\t                rejectDecoding(e);\n\t              }\n\t            });\n\t\n\t            promise.then(resolve)['catch'](reject);\n\t\n\t            return promise;\n\t          }\n\t        } else {\n\t          reject(xhr.statusText);\n\t        }\n\t\n\t        xhr.removeEventListener('load', onLoad);\n\t        xhr = null;\n\t      }\n\t\n\t      function onError() {\n\t        reject(xhr.statusText);\n\t        xhr.removeEventListener('error', onError);\n\t        xhr = null;\n\t      }\n\t\n\t      if (cache && cache !== 'loading') return resolve(manager.collect(new AudioBufferRecord(_audio, cache)));\n\t\n\t      BUFFER_CACHE[fileName] = 'loading';\n\t\n\t      xhr.responseType = 'arraybuffer';\n\t\n\t      xhr.addEventListener('load', onLoad, false);\n\t      xhr.addEventListener('error', onError, false);\n\t      xhr.open('GET', _audio.src, true);\n\t      xhr.send();\n\t    });\n\t  }\n\t  /**\n\t   * The CSS class names reconized as audio types.\n\t   */\n\t  AUDIO_TYPES = /background|voice-over|sfx/i;\n\t  BUFFER_CACHE = {};\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t\n\t  // A little ugg but define instance members.\n\t  $(\n\t  // Declare properties.\n\t  'background, voiceOver, sfx, scope',\n\t\n\t  /**\n\t   * Define instance properties.\n\t   */\n\t  function alloc(_id) {\n\t    this.initialize(_id, 'audio manager');\n\t\n\t    ['background', 'voiceOver', 'sfx'].forEach((function (_type) {\n\t      var collection = this[_type] = AudioCollection.create(_type);\n\t      this.addShadow(collection);\n\t    }).bind(this));\n\t  },\n\t\n\t  /**\n\t   * Given an audio element begin loading the asset.\n\t   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t   * @returns {Promise}\n\t   * @todo Support loading from node source or a string argument. - Micah:2/19/16\n\t   */\n\t  function load(_audio) {\n\t    var manager, type;\n\t\n\t    manager = this;\n\t    type = getAudioType(_audio);\n\t\n\t    if (!type) return _Promise.reject('Audio is missing a type. Please classify as \\'background\\', \\'voiceOver\\' or \\'sfx\\'.');\n\t    // if (~['sfx', 'voiceOver'].indexOf(type))\n\t    return loadArrayBuffer.call(this, _audio);\n\t\n\t    // return new Promise(function (resolve, reject) {\n\t    //  _audio.onloadeddata = function () { resolve(manager.collect(this)); };\n\t    //  _audio.onerror = reject;\n\t    //  _audio.load();\n\t    // });\n\t  },\n\t\n\t  /**\n\t   * Begins loading an AudioElement waits for it to load.\n\t   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t   * @returns {Promise}\n\t   */\n\t  function watch(_audio) {\n\t    var promise;\n\t\n\t    if (_audio.nodeName !== 'AUDIO') return _Promise.reject('Invalid type for audio node. ' + typeof _audio + ' [' + _audio.protoype.constructor.name + ' ' + _audio.nodeName + '].');\n\t\n\t    function reject(_error) {\n\t      var scope = $$(_audio).scope();\n\t      console.warn(scope.id(), '-', _error);\n\t    }\n\t\n\t    (promise = this.load(_audio))['catch'](reject.bind(this));\n\t\n\t    return promise;\n\t  },\n\t\n\t  /**\n\t   * Adds a audio to the collection. You may also pass an itterable of items to add.\n\t   * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n\t   * @returns {Promise}\n\t   */\n\t  function collect(_audio) {\n\t    var type;\n\t\n\t    if (!_audio) return false;\n\t\n\t    if (_audio.length) {\n\t      return _audio.map(collect.bind(this));\n\t    }\n\t\n\t    type = _audio.type || getAudioType(_audio);\n\t\n\t    if (type && this[type]) return this[type].add(_audio);\n\t\n\t    return false;\n\t  },\n\t  /**\n\t   * Provides a collection of `AudioCollection` objects.\n\t   * @returns {array}\n\t   */\n\t  function collections() {\n\t    var result, types;\n\t\n\t    result = [];\n\t    types = _Object$keys(this);\n\t\n\t    types.forEach((function (_type) {\n\t      if (this[_type] instanceof AudioCollection) result.push(this[_type]);\n\t    }).bind(this));\n\t\n\t    return result;\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[object ' + (this.constructor.name || 'Object') + ']';\n\t  });\n\t}\n\t\n\t/**\n\t * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t * @extends Collection\n\t */\n\tfunction AudioCollection($, sup) {\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\t\n\t  $('type', function alloc(_type) {\n\t    if (_type) this.type = _type;\n\t    this.initialize(_type, 'collection');\n\t  },\n\t  /**\n\t   * Adds an Audio object to the collection.\n\t   * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n\t   * @override\n\t   * @returns {Audio}\n\t   */\n\t  function add(_audio) {\n\t    var audio;\n\t\n\t    if (!_audio) return false;\n\t\n\t    audio = _audio instanceof Audio ? _audio : Audio.create(_audio, this.type);\n\t\n\t    sup(this, 'add')(audio);\n\t    this.addShadow(audio);\n\t    if (audio.id()) _util2['default'].assignRef(this, audio.id(), audio);\n\t\n\t    return audio;\n\t  },\n\t  /**\n\t   * Get the owning manager interface for an Audio object.\n\t   * @returns {AudioManager}\n\t   */\n\t  function manager() {\n\t    return this.$el.closest('#man').data('context');\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[object ' + (this.constructor.name || 'Object') + ']';\n\t  });\n\t}\n\t/**\n\t * Extend AudioCollection with Collection.\n\t */\n\tAudioCollection.prototype = _Object$create(_typesCollection2['default'], {\n\t  constructor: {\n\t    value: AudioCollection,\n\t    enumerable: false,\n\t    writeable: false,\n\t    configureable: false\n\t  }\n\t});\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n\t * Returned as the result of some collection process.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Returned as the result of some collection process.\n\t *\n\t * @class\n\t * @extends AudioCollection\n\t * @extends EventTargetInterface\n\t * @extends InspectorInterface\n\t * @extends LegislatorInterface\n\t * @extends StateInterface\n\t */\n\tfunction MediaCollection($, sup) {\n\t  $(\n\t  /**\n\t   * @override\n\t   */\n\t  function add(_media) {\n\t    this.addShadow(_media);\n\t    if (_media.id()) _util2['default'].assignRef(this, _media.id(), _media);\n\t    return _typesCollection2['default'].add.call(this, _media);\n\t  },\n\t  /**\n\t   * @override\n\t   */\n\t  function addShadow(_media) {\n\t    var $clone;\n\t\n\t    $clone = _media.$el.clone();\n\t    $clone.data(_media.$el.data());\n\t\n\t    this.$el.append($clone);\n\t    return this;\n\t  });\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * An interface for controlling a MediaElement or AudioBuffer.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t */\n\tfunction Audio($) {\n\t\n\t  function accessConfig(_augment, _val) {\n\t    if (_val) {\n\t      return this[_augment] = _val;\n\t    } else if (typeof _augment === 'string') {\n\t      return this[_augment];\n\t    } else {\n\t      _util2['default'].mixin(this, _augment);\n\t    }\n\t\n\t    return _augment;\n\t  }\n\t\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\t\n\t  $('type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\t\n\t  /**\n\t   * Allocates instance props.\n\t   * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n\t   * @arg {string} _type - The collection type.\n\t   */\n\t  function alloc(_audio, _type) {\n\t    var $audio, config, ctx, readyEvent, id;\n\t\n\t    $audio = $$(_audio.node || _audio);\n\t    config = $audio.pl();\n\t    ctx = pl.game.getAudioContext();\n\t    readyEvent = $$.Event('ready', { targetScope: this });\n\t\n\t    if (!(id = $audio.id())) $audio.id(id = _util2['default'].createId());\n\t\n\t    this.type = _type || null;\n\t    this.fileName = _util2['default'].resolveFileName($audio.attr('src'));\n\t    this.media = $audio[0];\n\t    this.gain = ctx.createGain();\n\t\n\t    this.gain.connect(ctx.destination);\n\t\n\t    $audio.data('context', this);\n\t\n\t    if (_audio.buffer) this.buffer = _audio.buffer;\n\t\n\t    Object.defineProperty(this, 'config', {\n\t      value: accessConfig.bind(config),\n\t      writeable: false\n\t    });\n\t\n\t    this.initialize(id, 'audio ' + this.type);\n\t\n\t    $$(this.media).trigger(readyEvent);\n\t  },\n\t  /**\n\t   * Provides an `AudioNode` for a particular audio source.\n\t   * @returns\n\t   *  - `MediaElementSouceNode` for audio elements.\n\t   *  - `AudioBufferSourceNode` for an ArrayBuffer.\n\t   */\n\t  function getSource() {\n\t    var ctx, src;\n\t\n\t    ctx = this.audioContext || pl.game.getAudioContext();\n\t\n\t    if (ctx) {\n\t      if (this.buffer) {\n\t        src = ctx.createBufferSource();\n\t        src.buffer = this.buffer;\n\t        src.loop = this.media.loop;\n\t\n\t        return src;\n\t      } else {\n\t        try {\n\t          return this.activeSource || ctx.createMediaElementSource(this.media);\n\t        } catch (e) {\n\t          console.warn(e.message, this);\n\t        }\n\t      }\n\t    }\n\t\n\t    return null;\n\t  },\n\t  /**\n\t   * Get the owning collection interface for an Audio object.\n\t   * @returns {AudioCollection}\n\t   */\n\t  function collection() {\n\t    return this.$el.closest('.collection').data('context');\n\t  },\n\t  /**\n\t   * Get the owning manager interface for an Audio object.\n\t   * @returns {AudioManager}\n\t   */\n\t  function manager() {\n\t    return this.$el.closest('#man').data('context');\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[audio#' + this.id() + ' ' + this.fileName + ']';\n\t  }, function setContext(ctx) {\n\t    this.gain = ctx.createGain();\n\t    this.gain.disconnect();\n\t    this.gain.connect(ctx.destination);\n\t    this.audioContext = ctx;\n\t  });\n\t}\n\t\n\t/**\n\t * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n\t * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n\t * That way you can listen for an event at any level of the interface.\n\t */\n\tEventTargetInterface = {\n\t  /**\n\t   * The shadow node.\n\t   */\n\t  $el: null,\n\t  /**\n\t   * Define a node for the shadow DOM.\n\t   * @arg {string} _id - Idendifier for the node.\n\t   * @arg {string} _class - Classification of the node.\n\t   */\n\t  initialize: function initialize(_id, _class) {\n\t    Object.defineProperty(this, '$el', {\n\t      value: $$('<div ' + (_id ? 'id=\"' + _id + '\"' : '') + ' ' + (_class ? 'class=\"' + _class + '\"' : '') + '>'),\n\t      writeable: false,\n\t      configureable: false,\n\t      enumerable: false\n\t    });\n\t\n\t    this.$el.data('context', this);\n\t  },\n\t  /**\n\t   * Get/set the id of the interface.\n\t   * @arg {string} _id - A valid CSS ID.\n\t   */\n\t  id: function id(_id) {\n\t    return this.$el.id(_id);\n\t  },\n\t  /**\n\t   * Add an interface to the shadow DOM.\n\t   * @arg {Audio|AudioCollection} _obj - The object to add.\n\t   * @returns this\n\t   */\n\t  addShadow: function addShadow(_obj) {\n\t    this.$el.append(_obj.$el);\n\t    return this;\n\t  },\n\t  /**\n\t   * Provides the parent level interface.\n\t   * @returns {AudioManager|AudioCollection}\n\t   */\n\t  parent: function parent() {\n\t    return this.$el.parent().data('context');\n\t  },\n\t  /**\n\t   * Find an interface in the API tree.\n\t   * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n\t   */\n\t  find: function find(_selector) {\n\t    var collection = MediaCollection.create();\n\t\n\t    this.$el.find(_selector).each(function () {\n\t      collection.add($$(this).data('context'));\n\t    });\n\t\n\t    return collection;\n\t  },\n\t  /**\n\t   *\n\t   */\n\t  filter: function filter(_selector) {\n\t    var collection;\n\t\n\t    if (!_selector) return this;\n\t\n\t    collection = MediaCollection.create();\n\t\n\t    this.$el.children().each(function () {\n\t      var $node = $$(this);\n\t      if ($node.is(_selector)) collection.add($node.data('context'));\n\t    });\n\t\n\t    return collection;\n\t  },\n\t  /**\n\t   * Attach events to a shadow node.\n\t   */\n\t  on: function on() {\n\t    this.$el.on.apply(this.$el, arguments);\n\t    return this;\n\t  },\n\t  /**\n\t   * Remove events from a shadow node.\n\t   */\n\t  off: function off() {\n\t    this.$el.off.apply(this.$el, arguments);\n\t    return this;\n\t  },\n\t  /**\n\t   * Dispatch a event from a shadow node.\n\t   */\n\t  trigger: function trigger() {\n\t    this.$el.trigger.apply(this.$el, arguments);\n\t    return this;\n\t  }\n\t};\n\t/**\n\t * Interface for inspecting an API level (i.e. manager or collection).\n\t */\n\tInspectorInterface = {\n\t  playing: function playing(_filterSelector) {\n\t    var playing = this.find('.PLAYING').filter(_filterSelector);\n\t    return !!playing.length && playing;\n\t  },\n\t  /**\n\t   * Query a collection for ownership of an audio object.\n\t   * @arg {string|Audio|HTMLAudioElement} The validating reference.\n\t   * @returns {boolean}\n\t   */\n\t  has: function has(_query) {\n\t    if (this.background) {\n\t      return ['background', 'voiceOver', 'sfx'].some((function (_name) {\n\t        return this[_name].has(_query);\n\t      }).bind(this));\n\t    }\n\t\n\t    if (this[_query]) return true;\n\t\n\t    return this.some(function (_audio) {\n\t      return _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n\t    });\n\t  }\n\t};\n\t\n\tLegislatorInterface = {\n\t  rule: function rule(_selector, _event, _handler) {\n\t    var handler, args;\n\t\n\t    handler = [typeof _event, typeof _handler].indexOf('function');\n\t    args = _util2['default'].toArray(arguments).slice(1);\n\t\n\t    if (typeof _event === 'function') _event = 'play pause stopped ended';\n\t\n\t    this.on(_event, (function (_e) {\n\t      if (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n\t    }).bind(this));\n\t  }\n\t};\n\t\n\tStateInterface = {\n\t  state: function state() {\n\t    return this.$el.state.apply(this.$el, arguments);\n\t  },\n\t\n\t  addState: function addState(_state) {\n\t    return this.$el.addClass(_state.toUpperCase());\n\t  },\n\t\n\t  removeState: function removeState(_state) {\n\t    return this.$el.removeClass(_state.toUpperCase());\n\t  }\n\t};\n\t\n\t/**\n\t * Interface for methods involving audio control for any API level.\n\t */\n\tPlayableInterface = {\n\t  proxyEvent: function proxyEvent(_event) {\n\t    var theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n\t\n\t    // proxy event to shadow DOM only when it has an active source.\n\t    if (this.activeSource) {\n\t      if (_event.type === 'ended') {\n\t        this.removeState('PLAYING');\n\t        this.activeSource = null;\n\t      }\n\t\n\t      this.trigger(theEvent);\n\t    }\n\t\n\t    _event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n\t  },\n\t  handler: function handler(_event) {\n\t    if (_event.type === 'ended' && _event.activeSource) {\n\t      _event.activeSource.disconnect();\n\t    }\n\t    this.proxyEvent.call(this, _event);\n\t  },\n\t  simEnd: function simEnd() {\n\t    if (this.activeSource) {\n\t      console.warn('Native `ended` failed to fire, simulating...');\n\t      this.handler({ target: this.activeSource, type: 'ended' });\n\t    }\n\t  },\n\t  playSource: function playSource() {\n\t    var time;\n\t    if (this.buffer) {\n\t      this.activeSource.start(0);\n\t      this.startTime = new Date();\n\t\n\t      if (!this.activeSource.loop) {\n\t        time = Math.ceil(this.buffer.duration * 1000) + 250;\n\t        this.timeout = setTimeout(this.simEnd.bind(this), time);\n\t      }\n\t    } else {\n\t      this.media.play();\n\t    }\n\t\n\t    this.delayID = null;\n\t  },\n\t  /**\n\t   * Play an audio object.\n\t   */\n\t  play: function play(_selector) {\n\t    var ctx, src, dest, delay, shouldPlay;\n\t\n\t    function response(_val) {\n\t      shouldPlay = _val;\n\t    }\n\t\n\t    ctx = this.audioContext || pl.game.getAudioContext();\n\t    shouldPlay = true;\n\t\n\t    /*\n\t     * I'm commenting out this line because having it there\n\t     * prevents new audio from starting while the game is out of focus\n\t     * which makes certain screens impossible to complete.\n\t     * Giving the game the ability to pause will remove the need for\n\t     * this line of code, anyway.\n\t     */\n\t    // if (ctx.state === 'suspended') return false;\n\t\n\t    if (this.background) return this.background.play();\n\t    if (this.length != null) {\n\t      if (_selector) {\n\t        if (this[_selector]) return this[_selector].play();\n\t\n\t        return this.find(_selector).play();\n\t      }\n\t      return this[0] && this[0].play();\n\t    }\n\t\n\t    if (!(src = this.getSource())) return false;\n\t\n\t    src.connect(this.gain);\n\t    src.addEventListener('ended', this.handler.bind(this), false);\n\t\n\t    this.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\t\n\t    if (shouldPlay) {\n\t      this.addState('PLAYING');\n\t      this.activeSource = src;\n\t\n\t      if (delay = this.config('delay')) {\n\t        this.delayID = setTimeout(this.playSource.bind(this), _util2['default'].toMillisec(delay));\n\t      } else {\n\t        this.playSource.call(this);\n\t      }\n\t\n\t      this.handler({ target: src, type: 'play' });\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Pause an audio object.\n\t   */\n\t  pause: function pause() {\n\t    if (this.buffer) {\n\t      this.pauseTime = new Date();\n\t      clearTimeout(this.timeout);\n\t      this.timeout = null;\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Resume an audio object.\n\t   */\n\t  resume: function resume() {\n\t    var time;\n\t    if (this.buffer) {\n\t      if (!this.activeSource.loop) {\n\t        time = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n\t        this.timeout = setTimeout(this.simEnd.bind(this), time);\n\t      }\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Stop an audio object.\n\t   */\n\t  stop: function stop(_filterSelector) {\n\t    var stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\t\n\t    if (this.background) return this.background.stop(_filterSelector);\n\t    if (this.length != null) {\n\t      if (_filterSelector === '@ALL') {\n\t        this.forEach(function (_audio) {\n\t          _audio.stop();\n\t        });\n\t      } else {\n\t        return this[0] && this[0].stop();\n\t      }\n\t    }\n\t\n\t    if (!this.activeSource) return false;\n\t\n\t    if (this.buffer) {\n\t      if (!this.delayID) this.activeSource.stop();\n\t    } else {\n\t      this.media.pause();\n\t      this.media.currentTime = 0;\n\t    }\n\t\n\t    if (this.delayID) {\n\t      clearTimeout(this.delayID);\n\t      this.delayID = null;\n\t    }\n\t\n\t    this.activeSource = null;\n\t\n\t    this.removeState('PLAYING');\n\t    this.trigger(stopEvent);\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n\t   */\n\t  volume: function volume(_level, _filterSelector) {\n\t    if (this.background) return this.background.volume(_level);\n\t    if (this.length != null) {\n\t      if (_filterSelector === '@ALL') {\n\t        this.forEach(function (_audio) {\n\t          _audio.volume(_level);\n\t        });\n\t      } else {\n\t        return this[0] && this[0].volume(_level);\n\t      }\n\t    }\n\t\n\t    this.gain.gain.value = _level;\n\t  },\n\t  startTime: 0,\n\t  pauseTime: 0\n\t};\n\t\n\texports['default'] = _typesType2['default'](MediaManager, AudioManager, AudioCollection, Audio);\n\t\n\tAudioCollection.extend(MediaCollection);\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(77), __esModule: true };\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(78);\n\t__webpack_require__(79);\n\t__webpack_require__(88);\n\t__webpack_require__(92);\n\tmodule.exports = __webpack_require__(10).Promise;\n\n/***/ },\n/* 78 */\n/***/ function(module, exports) {\n\n\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(80)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(81)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 80 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(29)\n\t  , defined   = __webpack_require__(27);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(82)\n\t  , $export        = __webpack_require__(8)\n\t  , redefine       = __webpack_require__(83)\n\t  , hide           = __webpack_require__(13)\n\t  , has            = __webpack_require__(44)\n\t  , Iterators      = __webpack_require__(84)\n\t  , $iterCreate    = __webpack_require__(85)\n\t  , setToStringTag = __webpack_require__(86)\n\t  , getPrototypeOf = __webpack_require__(87)\n\t  , ITERATOR       = __webpack_require__(33)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n\t    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n\t    , methods, key, IteratorPrototype;\n\t  // Fix native\n\t  if($anyNative){\n\t    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n\t    if(IteratorPrototype !== Object.prototype){\n\t      // Set @@toStringTag to native iterators\n\t      setToStringTag(IteratorPrototype, TAG, true);\n\t      // fix for some old engines\n\t      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    }\n\t  }\n\t  // fix Array#{values, @@iterator}.name in V8 / FF\n\t  if(DEF_VALUES && $native && $native.name !== VALUES){\n\t    VALUES_BUG = true;\n\t    $default = function values(){ return $native.call(this); };\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES ? $default : getMethod(VALUES),\n\t      keys:    IS_SET     ? $default : getMethod(KEYS),\n\t      entries: $entries\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 82 */\n/***/ function(module, exports) {\n\n\tmodule.exports = true;\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(13);\n\n/***/ },\n/* 84 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar create         = __webpack_require__(56)\n\t  , descriptor     = __webpack_require__(22)\n\t  , setToStringTag = __webpack_require__(86)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(13)(IteratorPrototype, __webpack_require__(33)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(14).f\n\t  , has = __webpack_require__(44)\n\t  , TAG = __webpack_require__(33)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\n\tvar has         = __webpack_require__(44)\r\n\t  , toObject    = __webpack_require__(26)\r\n\t  , IE_PROTO    = __webpack_require__(48)('IE_PROTO')\r\n\t  , ObjectProto = Object.prototype;\r\n\t\r\n\tmodule.exports = Object.getPrototypeOf || function(O){\r\n\t  O = toObject(O);\r\n\t  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n\t  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n\t    return O.constructor.prototype;\r\n\t  } return O instanceof Object ? ObjectProto : null;\r\n\t};\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(89);\n\tvar global        = __webpack_require__(9)\n\t  , hide          = __webpack_require__(13)\n\t  , Iterators     = __webpack_require__(84)\n\t  , TO_STRING_TAG = __webpack_require__(33)('toStringTag');\n\t\n\tfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n\t  var NAME       = collections[i]\n\t    , Collection = global[NAME]\n\t    , proto      = Collection && Collection.prototype;\n\t  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n\t  Iterators[NAME] = Iterators.Array;\n\t}\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(90)\n\t  , step             = __webpack_require__(91)\n\t  , Iterators        = __webpack_require__(84)\n\t  , toIObject        = __webpack_require__(45);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(81)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 90 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(){ /* empty */ };\n\n/***/ },\n/* 91 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY            = __webpack_require__(82)\n\t  , global             = __webpack_require__(9)\n\t  , ctx                = __webpack_require__(11)\n\t  , classof            = __webpack_require__(93)\n\t  , $export            = __webpack_require__(8)\n\t  , isObject           = __webpack_require__(16)\n\t  , anObject           = __webpack_require__(15)\n\t  , aFunction          = __webpack_require__(12)\n\t  , anInstance         = __webpack_require__(94)\n\t  , forOf              = __webpack_require__(95)\n\t  , setProto           = __webpack_require__(99).set\n\t  , speciesConstructor = __webpack_require__(102)\n\t  , task               = __webpack_require__(103).set\n\t  , microtask          = __webpack_require__(105)()\n\t  , PROMISE            = 'Promise'\n\t  , TypeError          = global.TypeError\n\t  , process            = global.process\n\t  , $Promise           = global[PROMISE]\n\t  , process            = global.process\n\t  , isNode             = classof(process) == 'process'\n\t  , empty              = function(){ /* empty */ }\n\t  , Internal, GenericPromiseCapability, Wrapper;\n\t\n\tvar USE_NATIVE = !!function(){\n\t  try {\n\t    // correct subclassing with @@species support\n\t    var promise     = $Promise.resolve(1)\n\t      , FakePromise = (promise.constructor = {})[__webpack_require__(33)('species')] = function(exec){ exec(empty, empty); };\n\t    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n\t    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n\t  } catch(e){ /* empty */ }\n\t}();\n\t\n\t// helpers\n\tvar sameConstructor = function(a, b){\n\t  // with library wrapper special case\n\t  return a === b || a === $Promise && b === Wrapper;\n\t};\n\tvar isThenable = function(it){\n\t  var then;\n\t  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n\t};\n\tvar newPromiseCapability = function(C){\n\t  return sameConstructor($Promise, C)\n\t    ? new PromiseCapability(C)\n\t    : new GenericPromiseCapability(C);\n\t};\n\tvar PromiseCapability = GenericPromiseCapability = function(C){\n\t  var resolve, reject;\n\t  this.promise = new C(function($$resolve, $$reject){\n\t    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n\t    resolve = $$resolve;\n\t    reject  = $$reject;\n\t  });\n\t  this.resolve = aFunction(resolve);\n\t  this.reject  = aFunction(reject);\n\t};\n\tvar perform = function(exec){\n\t  try {\n\t    exec();\n\t  } catch(e){\n\t    return {error: e};\n\t  }\n\t};\n\tvar notify = function(promise, isReject){\n\t  if(promise._n)return;\n\t  promise._n = true;\n\t  var chain = promise._c;\n\t  microtask(function(){\n\t    var value = promise._v\n\t      , ok    = promise._s == 1\n\t      , i     = 0;\n\t    var run = function(reaction){\n\t      var handler = ok ? reaction.ok : reaction.fail\n\t        , resolve = reaction.resolve\n\t        , reject  = reaction.reject\n\t        , domain  = reaction.domain\n\t        , result, then;\n\t      try {\n\t        if(handler){\n\t          if(!ok){\n\t            if(promise._h == 2)onHandleUnhandled(promise);\n\t            promise._h = 1;\n\t          }\n\t          if(handler === true)result = value;\n\t          else {\n\t            if(domain)domain.enter();\n\t            result = handler(value);\n\t            if(domain)domain.exit();\n\t          }\n\t          if(result === reaction.promise){\n\t            reject(TypeError('Promise-chain cycle'));\n\t          } else if(then = isThenable(result)){\n\t            then.call(result, resolve, reject);\n\t          } else resolve(result);\n\t        } else reject(value);\n\t      } catch(e){\n\t        reject(e);\n\t      }\n\t    };\n\t    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n\t    promise._c = [];\n\t    promise._n = false;\n\t    if(isReject && !promise._h)onUnhandled(promise);\n\t  });\n\t};\n\tvar onUnhandled = function(promise){\n\t  task.call(global, function(){\n\t    var value = promise._v\n\t      , abrupt, handler, console;\n\t    if(isUnhandled(promise)){\n\t      abrupt = perform(function(){\n\t        if(isNode){\n\t          process.emit('unhandledRejection', value, promise);\n\t        } else if(handler = global.onunhandledrejection){\n\t          handler({promise: promise, reason: value});\n\t        } else if((console = global.console) && console.error){\n\t          console.error('Unhandled promise rejection', value);\n\t        }\n\t      });\n\t      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n\t      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n\t    } promise._a = undefined;\n\t    if(abrupt)throw abrupt.error;\n\t  });\n\t};\n\tvar isUnhandled = function(promise){\n\t  if(promise._h == 1)return false;\n\t  var chain = promise._a || promise._c\n\t    , i     = 0\n\t    , reaction;\n\t  while(chain.length > i){\n\t    reaction = chain[i++];\n\t    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n\t  } return true;\n\t};\n\tvar onHandleUnhandled = function(promise){\n\t  task.call(global, function(){\n\t    var handler;\n\t    if(isNode){\n\t      process.emit('rejectionHandled', promise);\n\t    } else if(handler = global.onrejectionhandled){\n\t      handler({promise: promise, reason: promise._v});\n\t    }\n\t  });\n\t};\n\tvar $reject = function(value){\n\t  var promise = this;\n\t  if(promise._d)return;\n\t  promise._d = true;\n\t  promise = promise._w || promise; // unwrap\n\t  promise._v = value;\n\t  promise._s = 2;\n\t  if(!promise._a)promise._a = promise._c.slice();\n\t  notify(promise, true);\n\t};\n\tvar $resolve = function(value){\n\t  var promise = this\n\t    , then;\n\t  if(promise._d)return;\n\t  promise._d = true;\n\t  promise = promise._w || promise; // unwrap\n\t  try {\n\t    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n\t    if(then = isThenable(value)){\n\t      microtask(function(){\n\t        var wrapper = {_w: promise, _d: false}; // wrap\n\t        try {\n\t          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n\t        } catch(e){\n\t          $reject.call(wrapper, e);\n\t        }\n\t      });\n\t    } else {\n\t      promise._v = value;\n\t      promise._s = 1;\n\t      notify(promise, false);\n\t    }\n\t  } catch(e){\n\t    $reject.call({_w: promise, _d: false}, e); // wrap\n\t  }\n\t};\n\t\n\t// constructor polyfill\n\tif(!USE_NATIVE){\n\t  // 25.4.3.1 Promise(executor)\n\t  $Promise = function Promise(executor){\n\t    anInstance(this, $Promise, PROMISE, '_h');\n\t    aFunction(executor);\n\t    Internal.call(this);\n\t    try {\n\t      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n\t    } catch(err){\n\t      $reject.call(this, err);\n\t    }\n\t  };\n\t  Internal = function Promise(executor){\n\t    this._c = [];             // <- awaiting reactions\n\t    this._a = undefined;      // <- checked in isUnhandled reactions\n\t    this._s = 0;              // <- state\n\t    this._d = false;          // <- done\n\t    this._v = undefined;      // <- value\n\t    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n\t    this._n = false;          // <- notify\n\t  };\n\t  Internal.prototype = __webpack_require__(106)($Promise.prototype, {\n\t    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n\t    then: function then(onFulfilled, onRejected){\n\t      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n\t      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n\t      reaction.fail   = typeof onRejected == 'function' && onRejected;\n\t      reaction.domain = isNode ? process.domain : undefined;\n\t      this._c.push(reaction);\n\t      if(this._a)this._a.push(reaction);\n\t      if(this._s)notify(this, false);\n\t      return reaction.promise;\n\t    },\n\t    // 25.4.5.1 Promise.prototype.catch(onRejected)\n\t    'catch': function(onRejected){\n\t      return this.then(undefined, onRejected);\n\t    }\n\t  });\n\t  PromiseCapability = function(){\n\t    var promise  = new Internal;\n\t    this.promise = promise;\n\t    this.resolve = ctx($resolve, promise, 1);\n\t    this.reject  = ctx($reject, promise, 1);\n\t  };\n\t}\n\t\n\t$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\n\t__webpack_require__(86)($Promise, PROMISE);\n\t__webpack_require__(107)(PROMISE);\n\tWrapper = __webpack_require__(10)[PROMISE];\n\t\n\t// statics\n\t$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n\t  // 25.4.4.5 Promise.reject(r)\n\t  reject: function reject(r){\n\t    var capability = newPromiseCapability(this)\n\t      , $$reject   = capability.reject;\n\t    $$reject(r);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n\t  // 25.4.4.6 Promise.resolve(x)\n\t  resolve: function resolve(x){\n\t    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n\t    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n\t    var capability = newPromiseCapability(this)\n\t      , $$resolve  = capability.resolve;\n\t    $$resolve(x);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(108)(function(iter){\n\t  $Promise.all(iter)['catch'](empty);\n\t})), PROMISE, {\n\t  // 25.4.4.1 Promise.all(iterable)\n\t  all: function all(iterable){\n\t    var C          = this\n\t      , capability = newPromiseCapability(C)\n\t      , resolve    = capability.resolve\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      var values    = []\n\t        , index     = 0\n\t        , remaining = 1;\n\t      forOf(iterable, false, function(promise){\n\t        var $index        = index++\n\t          , alreadyCalled = false;\n\t        values.push(undefined);\n\t        remaining++;\n\t        C.resolve(promise).then(function(value){\n\t          if(alreadyCalled)return;\n\t          alreadyCalled  = true;\n\t          values[$index] = value;\n\t          --remaining || resolve(values);\n\t        }, reject);\n\t      });\n\t      --remaining || resolve(values);\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  },\n\t  // 25.4.4.4 Promise.race(iterable)\n\t  race: function race(iterable){\n\t    var C          = this\n\t      , capability = newPromiseCapability(C)\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, function(promise){\n\t        C.resolve(promise).then(capability.resolve, reject);\n\t      });\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  }\n\t});\n\n/***/ },\n/* 93 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(25)\n\t  , TAG = __webpack_require__(33)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\t// fallback for IE11 Script Access Denied error\n\tvar tryGet = function(it, key){\n\t  try {\n\t    return it[key];\n\t  } catch(e){ /* empty */ }\n\t};\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 94 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it, Constructor, name, forbiddenField){\n\t  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n\t    throw TypeError(name + ': incorrect invocation!');\n\t  } return it;\n\t};\n\n/***/ },\n/* 95 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx         = __webpack_require__(11)\n\t  , call        = __webpack_require__(96)\n\t  , isArrayIter = __webpack_require__(97)\n\t  , anObject    = __webpack_require__(15)\n\t  , toLength    = __webpack_require__(28)\n\t  , getIterFn   = __webpack_require__(98)\n\t  , BREAK       = {}\n\t  , RETURN      = {};\n\tvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n\t  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n\t    , f      = ctx(fn, that, entries ? 2 : 1)\n\t    , index  = 0\n\t    , length, step, iterator, result;\n\t  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n\t  // fast case for arrays with default iterator\n\t  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n\t    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n\t    if(result === BREAK || result === RETURN)return result;\n\t  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n\t    result = call(iterator, f, step.value, entries);\n\t    if(result === BREAK || result === RETURN)return result;\n\t  }\n\t};\n\texports.BREAK  = BREAK;\n\texports.RETURN = RETURN;\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// call something on iterator step with safe closing on error\n\tvar anObject = __webpack_require__(15);\n\tmodule.exports = function(iterator, fn, value, entries){\n\t  try {\n\t    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n\t  // 7.4.6 IteratorClose(iterator, completion)\n\t  } catch(e){\n\t    var ret = iterator['return'];\n\t    if(ret !== undefined)anObject(ret.call(iterator));\n\t    throw e;\n\t  }\n\t};\n\n/***/ },\n/* 97 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// check on default Array iterator\n\tvar Iterators  = __webpack_require__(84)\n\t  , ITERATOR   = __webpack_require__(33)('iterator')\n\t  , ArrayProto = Array.prototype;\n\t\n\tmodule.exports = function(it){\n\t  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n\t};\n\n/***/ },\n/* 98 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(93)\n\t  , ITERATOR  = __webpack_require__(33)('iterator')\n\t  , Iterators = __webpack_require__(84);\n\tmodule.exports = __webpack_require__(10).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 99 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Works with __proto__ only. Old v8 can't work with null proto objects.\n\t/* eslint-disable no-proto */\n\tvar isObject = __webpack_require__(16)\n\t  , anObject = __webpack_require__(15);\n\tvar check = function(O, proto){\n\t  anObject(O);\n\t  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n\t};\n\tmodule.exports = {\n\t  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n\t    function(test, buggy, set){\n\t      try {\n\t        set = __webpack_require__(11)(Function.call, __webpack_require__(100).f(Object.prototype, '__proto__').set, 2);\n\t        set(test, []);\n\t        buggy = !(test instanceof Array);\n\t      } catch(e){ buggy = true; }\n\t      return function setPrototypeOf(O, proto){\n\t        check(O, proto);\n\t        if(buggy)O.__proto__ = proto;\n\t        else set(O, proto);\n\t        return O;\n\t      };\n\t    }({}, false) : undefined),\n\t  check: check\n\t};\n\n/***/ },\n/* 100 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar pIE            = __webpack_require__(101)\r\n\t  , createDesc     = __webpack_require__(22)\r\n\t  , toIObject      = __webpack_require__(45)\r\n\t  , toPrimitive    = __webpack_require__(21)\r\n\t  , has            = __webpack_require__(44)\r\n\t  , IE8_DOM_DEFINE = __webpack_require__(17)\r\n\t  , gOPD           = Object.getOwnPropertyDescriptor;\r\n\t\r\n\texports.f = __webpack_require__(18) ? gOPD : function getOwnPropertyDescriptor(O, P){\r\n\t  O = toIObject(O);\r\n\t  P = toPrimitive(P, true);\r\n\t  if(IE8_DOM_DEFINE)try {\r\n\t    return gOPD(O, P);\r\n\t  } catch(e){ /* empty */ }\r\n\t  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\r\n\t};\n\n/***/ },\n/* 101 */\n/***/ function(module, exports) {\n\n\texports.f = {}.propertyIsEnumerable;\n\n/***/ },\n/* 102 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.3.20 SpeciesConstructor(O, defaultConstructor)\n\tvar anObject  = __webpack_require__(15)\n\t  , aFunction = __webpack_require__(12)\n\t  , SPECIES   = __webpack_require__(33)('species');\n\tmodule.exports = function(O, D){\n\t  var C = anObject(O).constructor, S;\n\t  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n\t};\n\n/***/ },\n/* 103 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx                = __webpack_require__(11)\n\t  , invoke             = __webpack_require__(104)\n\t  , html               = __webpack_require__(57)\n\t  , cel                = __webpack_require__(20)\n\t  , global             = __webpack_require__(9)\n\t  , process            = global.process\n\t  , setTask            = global.setImmediate\n\t  , clearTask          = global.clearImmediate\n\t  , MessageChannel     = global.MessageChannel\n\t  , counter            = 0\n\t  , queue              = {}\n\t  , ONREADYSTATECHANGE = 'onreadystatechange'\n\t  , defer, channel, port;\n\tvar run = function(){\n\t  var id = +this;\n\t  if(queue.hasOwnProperty(id)){\n\t    var fn = queue[id];\n\t    delete queue[id];\n\t    fn();\n\t  }\n\t};\n\tvar listener = function(event){\n\t  run.call(event.data);\n\t};\n\t// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\n\tif(!setTask || !clearTask){\n\t  setTask = function setImmediate(fn){\n\t    var args = [], i = 1;\n\t    while(arguments.length > i)args.push(arguments[i++]);\n\t    queue[++counter] = function(){\n\t      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n\t    };\n\t    defer(counter);\n\t    return counter;\n\t  };\n\t  clearTask = function clearImmediate(id){\n\t    delete queue[id];\n\t  };\n\t  // Node.js 0.8-\n\t  if(__webpack_require__(25)(process) == 'process'){\n\t    defer = function(id){\n\t      process.nextTick(ctx(run, id, 1));\n\t    };\n\t  // Browsers with MessageChannel, includes WebWorkers\n\t  } else if(MessageChannel){\n\t    channel = new MessageChannel;\n\t    port    = channel.port2;\n\t    channel.port1.onmessage = listener;\n\t    defer = ctx(port.postMessage, port, 1);\n\t  // Browsers with postMessage, skip WebWorkers\n\t  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n\t  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n\t    defer = function(id){\n\t      global.postMessage(id + '', '*');\n\t    };\n\t    global.addEventListener('message', listener, false);\n\t  // IE8-\n\t  } else if(ONREADYSTATECHANGE in cel('script')){\n\t    defer = function(id){\n\t      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n\t        html.removeChild(this);\n\t        run.call(id);\n\t      };\n\t    };\n\t  // Rest old browsers\n\t  } else {\n\t    defer = function(id){\n\t      setTimeout(ctx(run, id, 1), 0);\n\t    };\n\t  }\n\t}\n\tmodule.exports = {\n\t  set:   setTask,\n\t  clear: clearTask\n\t};\n\n/***/ },\n/* 104 */\n/***/ function(module, exports) {\n\n\t// fast apply, http://jsperf.lnkit.com/fast-apply/5\n\tmodule.exports = function(fn, args, that){\n\t  var un = that === undefined;\n\t  switch(args.length){\n\t    case 0: return un ? fn()\n\t                      : fn.call(that);\n\t    case 1: return un ? fn(args[0])\n\t                      : fn.call(that, args[0]);\n\t    case 2: return un ? fn(args[0], args[1])\n\t                      : fn.call(that, args[0], args[1]);\n\t    case 3: return un ? fn(args[0], args[1], args[2])\n\t                      : fn.call(that, args[0], args[1], args[2]);\n\t    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n\t                      : fn.call(that, args[0], args[1], args[2], args[3]);\n\t  } return              fn.apply(that, args);\n\t};\n\n/***/ },\n/* 105 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(9)\n\t  , macrotask = __webpack_require__(103).set\n\t  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n\t  , process   = global.process\n\t  , Promise   = global.Promise\n\t  , isNode    = __webpack_require__(25)(process) == 'process';\n\t\n\tmodule.exports = function(){\n\t  var head, last, notify;\n\t\n\t  var flush = function(){\n\t    var parent, fn;\n\t    if(isNode && (parent = process.domain))parent.exit();\n\t    while(head){\n\t      fn   = head.fn;\n\t      head = head.next;\n\t      try {\n\t        fn();\n\t      } catch(e){\n\t        if(head)notify();\n\t        else last = undefined;\n\t        throw e;\n\t      }\n\t    } last = undefined;\n\t    if(parent)parent.enter();\n\t  };\n\t\n\t  // Node.js\n\t  if(isNode){\n\t    notify = function(){\n\t      process.nextTick(flush);\n\t    };\n\t  // browsers with MutationObserver\n\t  } else if(Observer){\n\t    var toggle = true\n\t      , node   = document.createTextNode('');\n\t    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n\t    notify = function(){\n\t      node.data = toggle = !toggle;\n\t    };\n\t  // environments with maybe non-completely correct, but existent Promise\n\t  } else if(Promise && Promise.resolve){\n\t    var promise = Promise.resolve();\n\t    notify = function(){\n\t      promise.then(flush);\n\t    };\n\t  // for other environments - macrotask based on:\n\t  // - setImmediate\n\t  // - MessageChannel\n\t  // - window.postMessag\n\t  // - onreadystatechange\n\t  // - setTimeout\n\t  } else {\n\t    notify = function(){\n\t      // strange IE + webpack dev server bug - use .call(global)\n\t      macrotask.call(global, flush);\n\t    };\n\t  }\n\t\n\t  return function(fn){\n\t    var task = {fn: fn, next: undefined};\n\t    if(last)last.next = task;\n\t    if(!head){\n\t      head = task;\n\t      notify();\n\t    } last = task;\n\t  };\n\t};\n\n/***/ },\n/* 106 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar hide = __webpack_require__(13);\n\tmodule.exports = function(target, src, safe){\n\t  for(var key in src){\n\t    if(safe && target[key])target[key] = src[key];\n\t    else hide(target, key, src[key]);\n\t  } return target;\n\t};\n\n/***/ },\n/* 107 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar global      = __webpack_require__(9)\n\t  , core        = __webpack_require__(10)\n\t  , dP          = __webpack_require__(14)\n\t  , DESCRIPTORS = __webpack_require__(18)\n\t  , SPECIES     = __webpack_require__(33)('species');\n\t\n\tmodule.exports = function(KEY){\n\t  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n\t  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n\t    configurable: true,\n\t    get: function(){ return this; }\n\t  });\n\t};\n\n/***/ },\n/* 108 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ITERATOR     = __webpack_require__(33)('iterator')\n\t  , SAFE_CLOSING = false;\n\t\n\ttry {\n\t  var riter = [7][ITERATOR]();\n\t  riter['return'] = function(){ SAFE_CLOSING = true; };\n\t  Array.from(riter, function(){ throw 2; });\n\t} catch(e){ /* empty */ }\n\t\n\tmodule.exports = function(exec, skipClosing){\n\t  if(!skipClosing && !SAFE_CLOSING)return false;\n\t  var safe = false;\n\t  try {\n\t    var arr  = [7]\n\t      , iter = arr[ITERATOR]();\n\t    iter.next = function(){ return {done: safe = true}; };\n\t    arr[ITERATOR] = function(){ return iter; };\n\t    exec(arr);\n\t  } catch(e){ /* empty */ }\n\t  return safe;\n\t};\n\n/***/ },\n/* 109 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t/**\n\t * Defines an Object type using a named constructor function.\n\t * @module\n\t */\n\t\n\t/**\n\t * Constructs an object with methods bound to a context.\n\t * @arg {object} _from - Object with methods to bind.\n\t * @arg {object} _to - Context which methtods should be bound to.\n\t */\n\t\n\tvar _Object$defineProperty = __webpack_require__(110)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(69)['default'];\n\t\n\tvar _Object$create = __webpack_require__(53)['default'];\n\t\n\texports.__esModule = true;\n\texports['default'] = type;\n\tfunction Bindings(_from, _to) {\n\t  var method;\n\t\n\t  // pull all methods from the prototype chain.\n\t  for (method in _from) {\n\t    if (typeof _from[method] !== 'function') continue;\n\t    this[method] = _from[method].bind(_to);\n\t  }\n\t}\n\t\n\t/**\n\t * Takes an itterable object and convert it into an Array.\n\t * @arg {object} _itterable\n\t * @returns {array}\n\t */\n\tfunction toArray(_itterable) {\n\t  return [].map.call(_itterable, function (m) {\n\t    return m;\n\t  });\n\t}\n\t\n\t/**\n\t * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n\t * @arg {function} _constructor... - any number of constructor functions.\n\t * @returns The constructor or an object containing all the defined types.\n\t */\n\t\n\tfunction type() {\n\t  var defs, module;\n\t\n\t  /**\n\t   * Constructs an interface which is accesed through the constructors arguments.\n\t   * These arguments are parsed from the function string and collected into an array.\n\t   * @arg {function} _constructor\n\t   * @returns {array} The collection of API functions requested by the constructor.\n\t   */\n\t  function createApi(_constructor) {\n\t    var args, api;\n\t\n\t    // Matches the names of the arguments defined in the source of the function.\n\t    // [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n\t    // It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n\t    // NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n\t    args = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/) || ['', ''])[1].split(/\\s*,\\s*/);\n\t    api = {\n\t      /**\n\t       * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n\t       *\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       *\n\t       * @example\n\t       * Car.extend(function Ford (proto) {\n\t       *     this.drive = function () {\n\t       *         proto(this, 'drive', arguments);\n\t       *         // do some opps.\n\t       *     };\n\t       * });\n\t       */\n\t      proto: function proto(_obj, _name, _args) {\n\t        var proto, method;\n\t\n\t        proto = Object.getPrototypeOf(this || _obj);\n\t        method = proto[_name];\n\t\n\t        if (typeof _obj[_name] !== 'function') {\n\t          throw new TypeError('Member ' + _name + ' is not a function.');\n\t        }\n\t\n\t        if (method) {\n\t          // Does _obj's prototype have the method and it's not the same reference as _obj.\n\t          if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t            return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t          }\n\t\n\t          // Otherwise, walk the prototype chain to find the prototype that has the parent method.\n\t          while (proto) {\n\t            if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t              return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t            }\n\t\n\t            proto = Object.getPrototypeOf(proto);\n\t          }\n\t        } else {\n\t          return new Bindings(proto, _obj);\n\t        }\n\t      },\n\t      /**\n\t       * Invokes the specified method which lives on the object type's prototype.\n\t       * If your instance overrides the object types method, or your many prototype\n\t       * levels away from the base prototype, this lets you track back to the original.\n\t       *\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       */\n\t      base: function base(_obj, _name, _args) {\n\t        var proto, method;\n\t\n\t        proto = _constructor.prototype;\n\t        method = proto[_name];\n\t\n\t        if (typeof method !== 'function') {\n\t          throw new TypeError('Member ' + _name + ' is not a function.');\n\t        }\n\t\n\t        if (method) {\n\t          return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t        } else {\n\t          return new Bindings(proto, _obj);\n\t        }\n\t      },\n\t      /**\n\t       * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       */\n\t      sup: function sup(_obj, _name, _args) {\n\t        return api.proto.apply(_constructor.prototype, arguments);\n\t      },\n\t      /**\n\t       * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n\t       * @arg {object} _obj - The context which to define members.\n\t       * @arg {string} _name - The member name.\n\t       * @arg {*} _value - The value.\n\t       * @returns api\n\t       */\n\t      constant: function constant(_obj, _name, _value) {\n\t        _Object$defineProperty(_obj, _name, {\n\t          value: _value,\n\t          configureable: false,\n\t          writeable: false\n\t        });\n\t\n\t        return api;\n\t      },\n\t      /**\n\t       * Defines members on the constructor.\n\t       * @function static\n\t       * @overload\n\t       * @arg {string} _name - The member name.\n\t       * @arg {*} _value - The value.\n\t       * @returns api\n\t       */\n\t\n\t      /**\n\t       * Defines members on the constructor.\n\t       * @arg {object} _def - An object with members to mixin.\n\t       * @returns api\n\t       */\n\t      'static': function _static(_name_def, _value) {\n\t        var member, _name, _def;\n\t\n\t        _value ? _name = _name_def : _def = _name_def;\n\t\n\t        if (_def) {\n\t          for (member in _def) {\n\t            if (!_def.hasOwnProperty(member)) continue;\n\t            _constructor[member] = _def[member];\n\t          }\n\t        }\n\t\n\t        if (_name) {\n\t          _constructor[_name] = _value;\n\t        }\n\t\n\t        return api;\n\t      },\n\t      /**\n\t       * A pretty way of define the interface of your object type.\n\t       *\n\t       * You may pass any number of arguments as functions or strings.\n\t       *\n\t       * **Example**\n\t       * ```javascript\n\t       * function Car ($) {$(\n\t       *     // Defines a member assigned to `null`.\n\t       *     'name',\n\t       *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n\t       *     'engineType = \"standard\", speed = 0',\n\t       *\n\t       *     // Define instance members.\n\t       *     function alloc (_name) {\n\t       *         this.name = _name;\n\t       *     },\n\t       *\n\t       *     function drive () {\n\t       *         this.speed += 1;\n\t       *     }\n\t       * )}\n\t       * ```\n\t       *\n\t       * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n\t       * @arg {string|function} _def - A string of property definitions or a named function.\n\t       * @todo Support property assignment in alloc. Micah: 2/24/2016\n\t       */\n\t      $: function $() {\n\t        var args = toArray(arguments);\n\t\n\t        args.forEach(function (_member) {\n\t          var memberType, props, key, memberName;\n\t\n\t          memberType = typeof _member;\n\t\n\t          switch (memberType) {\n\t            case 'string':\n\t              props = _member.split(/\\s*,\\s*/);\n\t\n\t              if (props) {\n\t                props.forEach(function (_def) {\n\t                  var prop, val;\n\t\n\t                  prop = _def.split(/\\s*[:=]\\s*/);\n\t                  try {\n\t                    val = JSON.parse(prop[1]);\n\t                  } catch (e) {}\n\t                  _constructor.prototype[prop[0]] = typeof prop[1] !== 'undefined' ? val || prop[1] : null;\n\t                });\n\t              }\n\t              break;\n\t\n\t            case 'object':\n\t              for (key in _member) {\n\t                if (!_member.hasOwnProperty(key)) continue;\n\t                _constructor.prototype[key] = _member[key];\n\t              }\n\t              break;\n\t\n\t            case 'function':\n\t              memberName = _member.name || _member.toString().match(/^function\\s*([^\\s(]+)/)[1];\n\t              _constructor.prototype[memberName] = _member;\n\t              break;\n\t          }\n\t        });\n\t\n\t        return api;\n\t      }\n\t    };\n\t\n\t    return args.map(function (_call) {\n\t      return api[_call] || module[_call];\n\t    });\n\t  }\n\t\n\t  defs = toArray(arguments);\n\t  module = !this ? {} : this;\n\t\n\t  defs.forEach(function (_constructor) {\n\t    var api;\n\t\n\t    if (typeof _constructor === 'object') {\n\t      var Super,\n\t          keys = _Object$keys(_constructor);\n\t\n\t      if (keys.length === 1 && module[keys[0]]) {\n\t        Super = module[keys[0]];\n\t        return Super.extend.call(module, _constructor[keys[0]]);\n\t      }\n\t    }\n\t\n\t    api = createApi(_constructor);\n\t\n\t    /**\n\t     * Creates a new instance of the constructor prototype.\n\t     * This also invokes the `alloc()` on the instance so you can define instance props.\n\t     * @arg {*} ... - Any number of arguments for `alloc()`.\n\t     * @returns instance\n\t     */\n\t    _constructor.create = function () {\n\t      var instance = _Object$create(_constructor.prototype);\n\t      if (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n\t      return instance;\n\t    };\n\t\n\t    /**\n\t     * Extends the provided constructor prototype.\n\t     * @arg {function} _definition - Constructor for the object type.\n\t     * @returns _constructor\n\t     */\n\t    _constructor.extend = function (_definition) {\n\t      _definition.prototype = _Object$create(_constructor.prototype, {\n\t        constructor: {\n\t          value: _definition,\n\t          enumerable: false,\n\t          writeable: false,\n\t          configureable: false\n\t        }\n\t      });\n\t\n\t      return type.call(this === _constructor ? null : this, _definition);\n\t    };\n\t\n\t    _constructor.apply(_constructor.prototype, api);\n\t\n\t    module[_constructor.name] = _constructor;\n\t  });\n\t\n\t  return defs.length > 1 ? module : defs[0];\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 110 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(111), __esModule: true };\n\n/***/ },\n/* 111 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(112);\n\tvar $Object = __webpack_require__(10).Object;\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $Object.defineProperty(it, key, desc);\n\t};\n\n/***/ },\n/* 112 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(8);\r\n\t// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n\t$export($export.S + $export.F * !__webpack_require__(18), 'Object', {defineProperty: __webpack_require__(14).f});\n\n/***/ },\n/* 113 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesGlobalScope = __webpack_require__(66);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesCollection = __webpack_require__(65);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar _typesQueue = __webpack_require__(73);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tfunction invokeResponsibilities(_scope, _event) {\n\t  if (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n\t    _scope.responsibilities.forEach(function (_record) {\n\t      if (_record.name === _event.name) {\n\t\n\t        // console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n\t        _record.ability.call(_scope, _event);\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n\t * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n\t * <style>\n\t * .tag {\n\t *   padding: 1px 4px;\n\t *   border-radius: 4px;\n\t *\n\t *   color: #fff;\n\t *   background-color: #aaa;\n\t * }\n\t *\n\t * .tag.behavior {\n\t *   background-color: #0ba;\n\t * }\n\t *\n\t * .tag.state {\n\t *   background-color: #ba0;\n\t * }\n\t *\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t *\n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n\t * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n\t * @extends GlobalScope\n\t */\n\tvar Entity = _typesGlobalScope2['default'].extend(function () {\n\t\n\t  function resolveTarget(_target) {\n\t\n\t    switch (typeof _target) {\n\t      case 'string':\n\t        return this.findOwn(_target);\n\t      case 'object':\n\t        if (_target.jquery) return _target;\n\t        if (Entity.isPrototypeOf(_target)) return _target;\n\t        if (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function ResponsibilityRecord(_name, _ability) {\n\t    this.name = _name;\n\t    this.ability = _ability;\n\t  }\n\t\n\t  function dragGreeter(_event) {\n\t    switch (_event.type) {\n\t      case 'drag-start':\n\t        this.grab(_event.state);\n\t        break;\n\t\n\t      case 'drag-move':\n\t        this.dragging(_event.state);\n\t        break;\n\t\n\t      case 'drag-end':\n\t        this.release(_event.state);\n\t        break;\n\t    }\n\t  }\n\t\n\t  function attachDragEvents() {\n\t    if (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n\t      this.on('drag-start drag-move drag-end', dragGreeter);\n\t    }\n\t  }\n\t\n\t  this.baseType = 'TYPE_ENTITY';\n\t  this.STATE = {\n\t    PLAYING: 'PLAYING',\n\t    BACKGROUND: 'BACKGROUND',\n\t    VOICE_OVER: 'VOICE-OVER',\n\t    SFX: 'SFX'\n\t  };\n\t\n\t  this.timeoutID = null;\n\t  this.intervalID = null;\n\t  this.responsibilities = null;\n\t  this.isComplete = false;\n\t  this.shouldInheritAbilities = true;\n\t  this.frameHandlers = null;\n\t  this.frameRate = 60; // 60fps\n\t  this.draggables = null;\n\t  this.requiredQueue = null;\n\t  this.bgImageCollection = null;\n\t\n\t  this.handleProperty({\n\t    size: function size(_node, _name, _value) {\n\t      var size;\n\t\n\t      if (this.is(_node)) {\n\t        size = _value.split(/\\s*[x,]\\s*/);\n\t        this.css({\n\t          width: size[0],\n\t          height: size[1] || size[0]\n\t        });\n\t      }\n\t    },\n\t\n\t    position: function position(_node, _name, _value) {\n\t      var size;\n\t\n\t      if (this.is(_node)) {\n\t        size = _value.split(/\\s*[x,]\\s*/);\n\t        this.css({\n\t          top: size[1] || size[0],\n\t          left: size[0]\n\t        });\n\t      }\n\t    },\n\t\n\t    draggable: function draggable(_node, _name, _value) {\n\t      if (!this.hasOwnProperty('draggables')) {\n\t        this.draggables = $();\n\t      }\n\t\n\t      this.draggables.push(_node);\n\t    },\n\t\n\t    bg: function bg(_node, _name, _value) {\n\t      var img = new Image();\n\t\n\t      if (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\t\n\t      if (this.isMemberSafe('bgImageCollection')) {\n\t        img.src = _value;\n\t        this.bgImageCollection.push(img);\n\t        $(_node).css('background-image', 'url(' + _value + ')');\n\t      }\n\t    }\n\t  });\n\t\n\t  this.__init = function (_event) {\n\t    if (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n\t      this.watchAssets(this.bgImageCollection);\n\t    }\n\t    attachDragEvents.call(this);\n\t\n\t    return this.proto();\n\t  };\n\t\n\t  this.size = function () {\n\t    var size;\n\t\n\t    if (arguments.length) {\n\t      size = _typesDimensions.Size.create(arguments);\n\t      this.css(size);\n\t      return size;\n\t    }\n\t\n\t    return _typesDimensions.Size.create().set(this.width(), this.height());\n\t  };\n\t\n\t  this.propagateBehavior = function (_event) {\n\t    var ids;\n\t\n\t    ids = [];\n\t\n\t    this.findOwn('.pl-scope').each(function (_index, _node) {\n\t      var $node = $(_node);\n\t      ids.push($node.id() || $node.address());\n\t    });\n\t\n\t    if (this.hasOwnProperty('entities') && this.entities.length) {\n\t      // console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\t\n\t      this.entities.forEach(function (_scope) {\n\t        invokeResponsibilities(_scope, _event);\n\t        _scope.propagateBehavior(_event);\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.require = function (_entity) {\n\t    if (!this.hasOwnProperty('requiredQueue')) {\n\t      this.requiredQueue = _typesQueue2['default'].create();\n\t      this.requiredQueue.on('complete', this.bind(function () {\n\t        this.log('entity complete');\n\t        this.complete();\n\t      }));\n\t\n\t      this.respond('complete', function (_event) {\n\t        if (!this.has(_event.target)) return;\n\t        if (_event.targetScope === this) return;\n\t\n\t        this.requiredQueue.ready(_event.behaviorTarget);\n\t      });\n\t    }\n\t\n\t    this.requiredQueue.add(_entity);\n\t    this.gate();\n\t\n\t    return this;\n\t  };\n\t\n\t  this.behavior = function (_name, _behavior) {\n\t    _behavior.method = this[_name] = function () {\n\t      var behaviorEvent, result;\n\t\n\t      behaviorEvent = {\n\t        name: _name,\n\t        message: '',\n\t        targetScope: this,\n\t        behaviorTarget: this\n\t      };\n\t\n\t      result = _behavior.apply(this, arguments);\n\t\n\t      if (typeof result === 'object') {\n\t        behaviorEvent = _util2['default'].mixin(behaviorEvent, result);\n\t      }\n\t\n\t      if (result !== false) {\n\t        this.trigger($.Event('behavior', behaviorEvent));\n\t      }\n\t\n\t      return this;\n\t    };\n\t\n\t    return this;\n\t  };\n\t\n\t  this.respond = function () {\n\t    var name, ability, parentScope, abilities, protoAbilities;\n\t\n\t    if (!this.hasOwnProperty('responsibilities')) {\n\t      abilities = _typesCollection2['default'].create();\n\t      protoAbilities = this.provideAblilityPototype();\n\t\n\t      if (this.shouldInheritAbilities && protoAbilities && protoAbilities.responsibilities) {\n\t        abilities.push.apply(abilities, protoAbilities.responsibilities);\n\t      }\n\t\n\t      this.responsibilities = abilities;\n\t    }\n\t\n\t    if (arguments.length === 1) {\n\t      switch (typeof arguments[0]) {\n\t        case 'string':\n\t          name = arguments[0];break;\n\t\n\t        case 'function':\n\t        case 'object':\n\t          ability = arguments[0];break;\n\t      }\n\t    } else {\n\t      name = arguments[0];\n\t      ability = arguments[1];\n\t    }\n\t\n\t    switch (typeof ability) {\n\t      case 'object':\n\t        for (name in ability) {\n\t          if (!ability.hasOwnProperty(name)) continue;\n\t\n\t          this.respond(name, ability[name]);\n\t        }\n\t        break;\n\t\n\t      case 'function':\n\t        this.responsibilities.add(new ResponsibilityRecord(name, ability));\n\t        break;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.delay = function (_time, _cb) {\n\t    var time = _util2['default'].toMillisec(_time);\n\t\n\t    _util2['default'].assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.repeat = function (_time, _cb) {\n\t    var time = _util2['default'].toMillisec(_time);\n\t\n\t    _util2['default'].assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.kill = function (_timer) {\n\t    var id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\t\n\t    if (typeof id === 'number') {\n\t      (_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n\t      this[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n\t    } else if (id) {\n\t      id.forEach(function (_id) {\n\t        (_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n\t      });\n\t\n\t      _timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.eachFrame = function (_handler, _on) {\n\t    var binder, frame, lastTime, rate, frames;\n\t\n\t    rate = this.frameRate || 1000;\n\t    frames = 0;\n\t    lastTime = 0;\n\t\n\t    if (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n\t      frame = function (_time) {\n\t        var i, handler;\n\t\n\t        if (rate) {\n\t          if (_time - lastTime >= 1000 / rate) {\n\t            for (i = 0; handler = this.frameHandlers[i]; i += 1) {\n\t              handler.call(this, _time, Math.round(1000 / (_time - lastTime)), rate);\n\t            }\n\t\n\t            if (frames === rate) frames = 0;\n\t\n\t            frames += 1;\n\t            lastTime = _time;\n\t          }\n\t        }\n\t\n\t        if (this.frameHandlers.length) {\n\t          window.requestAnimationFrame(binder);\n\t        }\n\t      };\n\t\n\t      binder = this.bind(frame);\n\t\n\t      // allows methods passed as _handler's to\n\t      // be able to trace back for proto() callbacks.\n\t      frame.method = this.eachFrame;\n\t\n\t      this.frameHandlers = _typesCollection2['default'].create();\n\t      window.requestAnimationFrame(binder);\n\t    }\n\t\n\t    if (_on !== false) {\n\t      this.frameHandlers.add(_handler);\n\t    } else {\n\t      this.frameHandlers.remove(_handler);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.state = function (_flag, _definition, _imp) {\n\t    var flag, tester, setter, getter, STATE, def, opperations, names;\n\t\n\t    if (!_definition) {\n\t      return this.proto(_flag);\n\t    }\n\t\n\t    def = _definition.split(/\\s+/);\n\t    names = _flag.split(/\\s+/);\n\t    opperations = [];\n\t\n\t    def.forEach(this.bind(function (_opp) {\n\t      var method, flag;\n\t\n\t      method = _opp.slice(0, 1) === '+' ? 'addClass' : 'removeClass';\n\t\n\t      opperations.push({\n\t        method: method,\n\t        flag: _opp.slice(1)\n\t      });\n\t\n\t      if (method === 'addClass') {\n\t        flag = _opp.slice(1);\n\t        STATE = _util2['default'].transformId(flag);\n\t        this.STATE[STATE] = flag;\n\t      }\n\t    }));\n\t\n\t    setter = names[0];\n\t    tester = names[1];\n\t\n\t    this[setter] = function (_target) {\n\t      var target, uiStateEvent, oppsPerformed;\n\t\n\t      target = resolveTarget.call(this, _target);\n\t      uiStateEvent = $.Event('ui-' + setter, {\n\t        target: target.jquery ? target[0] : target,\n\t        targetScope: this\n\t      });\n\t      oppsPerformed = 0;\n\t\n\t      if (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n\t        return !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n\t      }\n\t\n\t      if (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\t\n\t      opperations.forEach(function (_record) {\n\t        // If we are adding or removing a class, test if the target already has/removed it.\n\t        // If so, then bump \"oppsPerformed\".\n\t        oppsPerformed += Number(target.hasClass(_record.flag) === ! ~_record.method.indexOf('add'));\n\t        target[_record.method](_record.flag);\n\t      });\n\t\n\t      if (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\t\n\t      if (oppsPerformed) {\n\t        this.trigger(uiStateEvent);\n\t        return target;\n\t      }\n\t\n\t      return false;\n\t    };\n\t\n\t    if (tester) {\n\t      getter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\t\n\t      this[tester] = function (_target) {\n\t        var target;\n\t\n\t        target = resolveTarget.call(this, _target);\n\t\n\t        return target.hasClass(this.STATE[STATE]);\n\t      };\n\t\n\t      this[getter] = function () {\n\t        return this.findOwn('.' + this.STATE[STATE]);\n\t      };\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.provideBehaviorEventScope = function () {\n\t    return this;\n\t  };\n\t\n\t  this.provideAblilityPototype = function () {\n\t    var owner;\n\t\n\t    owner = _util2['default'].getOwner(this, this.baseType);\n\t\n\t    return !!owner && owner.object;\n\t  };\n\t\n\t  this.completed = function () {\n\t    return this.game.demoMode || this.hasOwnProperty('isComplete') && this.isComplete || !this.requiredQueue || this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0;\n\t  };\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n\t   * @function module:types/Entity~Entity#complete\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   */\n\t  this.behavior('complete', function () {\n\t    if (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\t\n\t    this.isComplete = true;\n\t    this.addClass('COMPLETE');\n\t\n\t    return {\n\t      behaviorTarget: this\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a drggable has been grabbed for dragging.\n\t   * @function module:types/Entity~Entity#grab\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('grab', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a draggable as being dragged.\n\t   * @function module:types/Entity~Entity#dragging\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('dragging', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a drggable as released or droped.\n\t   * @function module:types/Entity~Entity#release\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('release', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#open\n\t   * @fires Entity#ui-open\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `OPEN` class name.\n\t   * @function module:types/Entity~Entity#opened\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Open'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `OPEN` class name.\n\t   * @function module:types/Entity~Entity#getOpened\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('open opened', '+OPEN -LEAVE');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#close\n\t   * @fires Entity#ui-close\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('close', '-OPEN');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#leave\n\t   * @fires Entity#ui-leave\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `LEAVE` class name.\n\t   * @function module:types/Entity~Entity#left\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Leave'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `LEAVE` class name.\n\t   * @function module:types/Entity~Entity#getLeft\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('leave left', '+LEAVE', {\n\t    willSet: function willSet(_target) {\n\t      this.close(_target);\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#enable\n\t   * @fires Entity#ui-enable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `ENABLED` class name.\n\t   * @function module:types/Entity~Entity#enabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Enabled'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `ENABLED` class name.\n\t   * @function module:types/Entity~Entity#getEnabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('enable enabled', '+ENABLED -DISABLED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#disable\n\t   * @fires Entity#ui-disable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `DISABLED` class name.\n\t   * @function module:types/Entity~Entity#disabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Disabled'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `DISABLED` class name.\n\t   * @function module:types/Entity~Entity#getDisabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('disable disabled', '+DISABLED -ENABLED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#select\n\t   * @fires Entity#ui-select\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `SELECTED` class name.\n\t   * @function module:types/Entity~Entity#selected\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Selected'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `SELECTED` class name.\n\t   * @function module:types/Entity~Entity#getDisabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('select selected', '+SELECTED', {\n\t    willSet: function willSet(_target) {\n\t      var target, $parent;\n\t\n\t      target = resolveTarget.call(this, _target);\n\t      $parent = target.parent();\n\t\n\t      $parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n\t        this.deselect(_node);\n\t      }));\n\t      $parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n\t        this.unhighlight(_node);\n\t      }));\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#deselect\n\t   * @fires Entity#ui-deselect\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('deselect', '-SELECTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#highlight\n\t   * @fires Entity#ui-highlight\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n\t   * @function module:types/Entity~Entity#highlighted\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Highlighted'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `HIGHLIGHTED` class name.\n\t   * @function module:types/Entity~Entity#getHighlighted\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('highlight highlighted', '+HIGHLIGHTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#unhighlight\n\t   * @fires Entity#ui-unhighlight\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('unhighlight', '-HIGHLIGHTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#draggable\n\t   * @fires Entity#ui-draggable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n\t   * @function module:types/Entity~Entity#dragEnabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Draggable'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `DRAGGABLE` class name.\n\t   * @function module:types/Entity~Entity#getDragEnabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('draggable dragEnabled', '+DRAGGABLE', {\n\t    didSet: function didSet(_target) {\n\t      this.translate(resolveTarget.call(this, _target));\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#undraggable\n\t   * @fires Entity#ui-undraggable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('undraggable', '-DRAGGABLE');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n\t   * @function module:types/Entity~Entity#translate\n\t   * @fires Entity#ui-translate\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n\t   * @function module:types/Entity~Entity#translate\n\t   * @fires Entity#ui-translate\n\t   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n\t   * @function module:types/Entity~Entity#translated\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Translate'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `TRANSLATED` class name.\n\t   * @function module:types/Entity~Entity#getTranslated\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('translate translated', '+TRANSLATED', {\n\t    willSet: function willSet(_target_point, _point) {\n\t      var point, target;\n\t\n\t      target = resolveTarget.call(this, _target_point);\n\t      point = ! ~[_target_point.x, _target_point.y].indexOf(undefined) ? _target_point : _point;\n\t\n\t      if (point) {\n\t        target.css('transform', 'translateX(' + point.x + 'px) translateY(' + point.y + 'px)');\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#untranslate\n\t   * @fires Entity#ui-untranslate\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('untranslate', '-TRANSLATED', {\n\t    willSet: function willSet() {\n\t      this.css('transform', 'none');\n\t    }\n\t  });\n\t\n\t  this.state('gate gated', '+GATED');\n\t});\n\t\n\texports['default'] = { Entity: Entity, invokeResponsibilities: invokeResponsibilities };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 114 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  Screen\n\t*  @desc Contains...\n\t*  @proto Entity\n\t*/\n\t\n\tvar _typesEntity = __webpack_require__(113);\n\t\n\tvar Screen = _typesEntity.Entity.extend(function () {\n\t\n\t  function attachBehaviorEvent() {\n\t    this.on('behavior', function (_event) {\n\t      // console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\t\n\t      if (this !== _event.targetScope) {\n\t        _typesEntity.invokeResponsibilities(this, _event);\n\t      }\n\t\n\t      this.propagateBehavior(_event);\n\t    });\n\t  }\n\t\n\t  this.baseType = 'TYPE_SCREEN';\n\t  this.game = null;\n\t  this.screen = null;\n\t\n\t  this.__init = function () {\n\t    this.proto();\n\t\n\t    if (this.is(pl.game.config('screenSelector'))) {\n\t      attachBehaviorEvent.call(this);\n\t    }\n\t  };\n\t\n\t  this.start = function () {\n\t    this.startAudio();\n\t    return this;\n\t  };\n\t\n\t  this.stop = function () {\n\t    this.stopAudio();\n\t    return this;\n\t  };\n\t\n\t  this.pause = function () {\n\t    this.pauseMedia();\n\t    if (this.hasOwnProperty('entities') && this.entities) {\n\t      this.entities.forEach(function (entity) {\n\t        if (typeof entity.pause === 'function') entity.pause();\n\t      });\n\t    }\n\t    return this;\n\t  };\n\t\n\t  this.resume = function () {\n\t    this.resumeMedia();\n\t    if (this.hasOwnProperty('entities') && this.entities) {\n\t      this.entities.forEach(function (entity) {\n\t        if (typeof entity.resume === 'function') entity.resume();\n\t      });\n\t    }\n\t    return this;\n\t  };\n\t\n\t  this.startAudio = function () {\n\t    if (!this.audio) return;\n\t    this.audio.background.play();\n\t    this.audio.voiceOver.play();\n\t  };\n\t\n\t  this.stopAudio = function () {\n\t    if (!this.audio) return;\n\t    this.audio.voiceOver.stop('@ALL');\n\t  };\n\t\n\t  this.pauseMedia = function () {\n\t    if (!this.currentMedia) return;\n\t    for (var media in this.currentMedia) {\n\t      if (this.currentMedia.hasOwnProperty(media)) {\n\t        if (this.currentMedia[media]) this.currentMedia[media].pause();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.resumeMedia = function () {\n\t    if (!this.currentMedia) return;\n\t    for (var media in this.currentMedia) {\n\t      if (this.currentMedia.hasOwnProperty(media)) {\n\t        if (this.currentMedia[media]) this.currentMedia[media].resume();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.index = function () {\n\t    if (this === this.screen) return this.game.screens.indexOf(this);\n\t    return this.$els.index();\n\t  };\n\t\n\t  this.next = function () {\n\t    if (!this.completed()) return false;\n\t    return this.game.screens[this.screen.index() + 1];\n\t  };\n\t\n\t  this.prev = function () {\n\t    return this.game.screens[this.screen.index() - 1];\n\t  };\n\t\n\t  this.quit = function () {\n\t    this.game.quit.open();\n\t  };\n\t\n\t  this.nextSib = function () {\n\t    return $.fn.next.apply(this.$els, arguments);\n\t  };\n\t\n\t  this.prevSib = function () {\n\t    return $.fn.prev.apply(this.$els, arguments);\n\t  };\n\t\n\t  this.isLast = function () {\n\t    return this.game.screens.indexOf(this.screen) === this.game.screens.length - 1;\n\t  };\n\t});\n\t\n\texports['default'] = Screen;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 115 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(38)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Node scope for the top level game node.\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _playGame = __webpack_require__(60);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _typesGlobalScope = __webpack_require__(66);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesScreen = __webpack_require__(114);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesCollection = __webpack_require__(65);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesScope = __webpack_require__(67);\n\t\n\tvar _typesDimensions = __webpack_require__(37);\n\t\n\tvar _typesAudioManager = __webpack_require__(75);\n\t\n\tvar Game = _typesGlobalScope2['default'].extend(function () {\n\t\n\t  var Viewport, screenPrototype, platformEventHandler;\n\t\n\t  /**\n\t   * Detects the device and adds the appropriate state classes.\n\t   */\n\t  function detechDevice() {\n\t    var deviceClasses = \"\";\n\t\n\t    if (iOS()) deviceClasses += \"iOS \";\n\t    if (mobileOrTablet()) deviceClasses += \"MOBILE \";\n\t\n\t    this.addClass(deviceClasses);\n\t  }\n\t\n\t  function iOS() {\n\t    var iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'];\n\t\n\t    if (!!navigator.platform) {\n\t      while (iDevices.length) {\n\t        if (navigator.platform === iDevices.pop()) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  }\n\t\n\t  function mobileOrTablet() {\n\t    var check = false;\n\t    (function (a) {\n\t      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n\t    })(navigator.userAgent || navigator.vendor || window.opera);\n\t    return check;\n\t  }\n\t\n\t  /**\n\t   * Scales the game view to fill the browser window.\n\t   */\n\t  function scaleGame() {\n\t    var vpSize, gameDimensions, width, height, zoom;\n\t\n\t    vpSize = this.viewport.size();\n\t    gameDimensions = _playGame2['default'].config('dimensions');\n\t    width = gameDimensions.width || this.width();\n\t    height = Math.round(gameDimensions.width / gameDimensions.ratio);\n\t    zoom = this.viewport.width / width;\n\t\n\t    if (Math.round(height * zoom) > this.viewport.height) {\n\t      zoom = (this.viewport.height / height).toPrecision(4);\n\t    }\n\t\n\t    _util2['default'].mixin(this.node().style, {\n\t      width: width + 'px',\n\t      zoom: zoom\n\t    });\n\t\n\t    if (!this.css('zoom')) {\n\t      this.css({\n\t        transform: 'scale(' + zoom + ')',\n\t        transformOrigin: (zoom < 1 ? '0px' : '50%') + ' 0px 0px',\n\t        height: this.viewport.height / zoom\n\t      });\n\t    }\n\t\n\t    this.zoom = zoom;\n\t  }\n\t\n\t  function demoMode(_set) {\n\t    this.demoMode = _set != null ? _set : !this.demoMode;\n\t    this[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\t\n\t    console.info(this.id(), 'is now ' + (this.demoMode ? 'in' : 'out of') + ' Demo Mode.');\n\t  }\n\t\n\t  function collectVideos() {\n\t    this.find('video').each((function (_index, _node) {\n\t      this.media.video.add(_node);\n\t\n\t      _node.onplay = (function () {\n\t        var playing = this.media.playing('.background, .voiceOver');\n\t        if (playing) playing.stop('@ALL');\n\t        this.log('video play', playing);\n\t      }).bind(this);\n\t    }).bind(this));\n\t  }\n\t\n\t  screenPrototype = _typesScreen2['default'];\n\t  platformEventHandler = new function () {\n\t\n\t    this.invoke = function (_event, _ctx) {\n\t      if (typeof this[_event.name] === 'function') {\n\t        this[_event.name].call(_ctx, _event);\n\t      }\n\t    };\n\t\n\t    this['toggle-demo-mode'] = function (_set) {\n\t      demoMode.call(this);\n\t    };\n\t  }();\n\t\n\t  this.baseType = 'TYPE_GAME';\n\t  this.screens = null;\n\t  this.zoom = 1;\n\t  this.keyCommands = null;\n\t  this.demoMode = false;\n\t  this.media = null;\n\t  this.viewport = new function () {\n\t    var vp, $html, RESIZE_HANDLERS;\n\t\n\t    vp = this;\n\t    $html = $('html');\n\t    RESIZE_HANDLERS = [];\n\t\n\t    $(window).on('resize', function (_event) {\n\t      if (!$html.hasClass(vp.orientation)) {\n\t        $html.removeClass('squareish landscape protrait').addClass(vp.orientation);\n\t      }\n\t\n\t      RESIZE_HANDLERS.forEach(function (_handler) {\n\t        _handler(_event);\n\t      });\n\t    });\n\t\n\t    this.LANDSCAPE = 'landscape';\n\t    this.PROTRAIT = 'protrait';\n\t    this.SQUAREISH = 'squareish';\n\t\n\t    this.size = function () {\n\t      return _typesDimensions.Size.create().set(window.innerWidth, window.innerHeight);\n\t    };\n\t\n\t    _Object$defineProperties(this, {\n\t      width: {\n\t        get: function get() {\n\t          return window.innerWidth;\n\t        },\n\t\n\t        configurable: false\n\t      },\n\t\n\t      height: {\n\t        get: function get() {\n\t          return window.innerHeight;\n\t        },\n\t\n\t        configurable: false\n\t      },\n\t\n\t      orientation: {\n\t        get: function get() {\n\t          var ratio = this.size().ratio();\n\t\n\t          switch (true) {\n\t            case ratio > 0.9 && ratio < 1.1:\n\t              return 'squareish';\n\t            case ratio > 1.1:\n\t              return 'landscape';\n\t            case ratio < 0.9:\n\t              return 'protrait';\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    this.onResize = function (_handler) {\n\t      RESIZE_HANDLERS.push(_handler);\n\t    };\n\t\n\t    this.offResize = function (_handler) {\n\t      var index = RESIZE_HANDLERS.indexOf(_handler);\n\t\n\t      if (~index) RESIZE_HANDLERS.splice(index, 1);\n\t    };\n\t\n\t    $html.addClass(this.orientation);\n\t  }();;\n\t\n\t  this.willInit = function () {\n\t    this.addClass('pl-game');\n\t\n\t    detechDevice.call(this);\n\t    scaleGame.call(this);\n\t    this.watchAudio();\n\t    this.captureScreens();\n\t\n\t    this.viewport.onResize(this.bind(scaleGame));\n\t\n\t    pl.game.on('platform-event', this.bind(function (_event) {\n\t      platformEventHandler.invoke(_event, this);\n\t    }));\n\t\n\t    window.addEventListener('load', window.focus);\n\t    window.addEventListener('focus', (function () {\n\t      this.resume();\n\t    }).bind(this));\n\t    window.addEventListener('blur', (function () {\n\t      this.pause();\n\t    }).bind(this));\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n\t   * ### Key Names\n\t   * - *meta*: Command (aka Apple ⌘ or win)\n\t   * - *alt*: Alt (aka Option ⌥)\n\t   * - *shift*: Shift ⇪\n\t   * - *ctrl*: Control ^\n\t   * - *enter*: Enter or Return\n\t   * - *esc*: Escape\n\t   * - *left*: Left arrow\n\t   * - *up*: Up arrow\n\t   * - *right*: Right arrow\n\t   * - *down*: Down arrow\n\t   *\n\t   * ### Example\n\t   * ```javascript\n\t   * // Overriding print.\n\t   * this.game.onKeys('cmd+P', printHandler);\n\t   *\n\t   * // Holding Control and pressing \"K\" then \"B\"\n\t   * this.game.onKeys('ctrl+K,B', handler);\n\t   * ```\n\t   * @arg {string} _commands - The key or sequence of keys.\n\t   * @arg {function} _handler - Your event handler for when you key pattern is matched.\n\t   * @returns `this`\n\t   */\n\t  this.onKeys = function (_commands, _handler) {\n\t    var sequence, chords, modifiers, map;\n\t\n\t    if (!this.keyCommands) {\n\t      this.keyCommands = {};\n\t\n\t      map = {\n\t        13: 'enter',\n\t        16: 'shift',\n\t        17: 'ctrl',\n\t        18: 'alt',\n\t        27: 'esc',\n\t        37: 'left',\n\t        38: 'up',\n\t        39: 'right',\n\t        40: 'down',\n\t        91: 'meta',\n\t        enter: 13,\n\t        shift: 16,\n\t        ctrl: 17,\n\t        alt: 18,\n\t        esc: 27,\n\t        left: 37,\n\t        up: 38,\n\t        right: 39,\n\t        down: 40,\n\t        meta: 91\n\t      };\n\t\n\t      modifiers = [16, 17, 18, 91];\n\t      sequence = [];\n\t      chords = [];\n\t\n\t      this.on('keydown', function (_event) {\n\t        var modifier, key, eventMods, currentMods, command, handler;\n\t\n\t        modifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t        key = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t        currentMods = [];\n\t\n\t        // Collect the modifiers the event says are still down.\n\t        eventMods.forEach(function (_modifierDown, _index) {\n\t          // use the modifier name\n\t          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t        });\n\t\n\t        // Don't add keys we already have during rapid-fire events\n\t        if (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\t\n\t        // Construct the command\n\t        command = chords.length ? (chords.push(key), chords.join(',')) : (sequence.push(key), sequence.join('+'));\n\t\n\t        handler = this.keyCommands[command];\n\t\n\t        if (handler) {\n\t          handler.call(this, _event, command);\n\t          // Keep current modifiers.\n\t          sequence = currentMods.map(function (_key, _index) {\n\t            var key = sequence[_index];\n\t            return currentMods[currentMods.indexOf(key)];\n\t          });\n\t          chords = [];\n\t\n\t          // Override original key command (i.e. meta+Q).\n\t          _event.preventDefault();\n\t        }\n\t      });\n\t\n\t      this.on('keyup', function (_event) {\n\t        var key, index, modifier, eventMods, currentMods;\n\t\n\t        key = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t        index = sequence.indexOf(key);\n\t        modifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t        // Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n\t        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t        currentMods = [];\n\t\n\t        // Collect the modifiers the event says are still down.\n\t        eventMods.forEach(function (_modifierDown, _index) {\n\t          // use the modifier name\n\t          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t        });\n\t\n\t        // If the key released is a modifier...\n\t        if (key === modifier) {\n\t          // ...keep current modifiers...\n\t          sequence = currentMods.map(function (_key, _index) {\n\t            var key = sequence[_index];\n\t            return currentMods[currentMods.indexOf(key)];\n\t          });\n\t          // ...clear registered chords.\n\t          chords = [];\n\t        } else {\n\t          // If we had pressed more than one key...\n\t          if (sequence.length > 1) {\n\t            // Check if the first is a modifier then switch to chord capturing\n\t            if (~modifiers.indexOf(map[sequence[0]])) {\n\t              chords.push(sequence.join('+'));\n\t            }\n\t          }\n\t\n\t          if (~index) sequence.splice(index, 1);\n\t          if (!sequence.length) chords = [];\n\t        }\n\t      });\n\t    }\n\t\n\t    this.keyCommands[_commands] = _handler;\n\t\n\t    return this;\n\t  };\n\t\n\t  this.screen = function (_id, _implementation) {\n\t    var prototype, selector, screenSelector, instance;\n\t\n\t    if (arguments.length === 1 && typeof _id === 'function') {\n\t      screenPrototype = _typesScreen2['default'].extend(_id);\n\t      return this;\n\t    }\n\t\n\t    if (!this.hasOwnProperty('screens')) this.screens = _typesCollection2['default'].create();\n\t\n\t    if (this.hasOwnProperty('$els')) {\n\t      debugger;\n\t      screenSelector = pl.game.config('screenSelector');\n\t      prototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t      selector = typeof _id === 'number' ? screenSelector + ':nth-child(' + (_id + 1) + ')' : '#' + _id;\n\t      instance = prototype.extend(_implementation).initialize(this.find(selector));\n\t\n\t      instance.screen = instance;\n\t      if (!instance.game) {\n\t        instance.game = instance.closest('.pl-game').scope();\n\t      }\n\t    } else {\n\t      this.screens.push({\n\t        index: typeof _id === 'number' ? _id : null,\n\t        name: typeof _id === 'string' ? _id : null,\n\t        implementation: _implementation\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.captureScreens = function () {\n\t    var screenSelector, prototype, collection;\n\t\n\t    screenSelector = pl.game.config('screenSelector');\n\t    prototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t    collection = [];\n\t\n\t    this.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n\t      var $node, screen, record, key, id, index, component;\n\t\n\t      $node = $(_node);\n\t      id = $node.id();\n\t      key = id ? 'name' : (id = _index, 'index');\n\t      record = this.screens && this.screens.get(id, key);\n\t      component = $node.attr('pl-component');\n\t      screen = _typesScope.createEntity.call(prototype, $node, record && record.implementation);\n\t      screen.screen = screen;\n\t      screen.game = this;\n\t\n\t      if ($node.attr('pl-skip') == null) collection.push(screen);\n\t\n\t      if (key === 'name' || component) {\n\t        _util2['default'].assignRef(this, _util2['default'].transformId(key === 'name' && id || component, true), screen);\n\t      }\n\t    }));\n\t\n\t    if (collection.length) this.screens = collection;\n\t\n\t    return this;\n\t  };\n\t\n\t  this.watchAudio = function () {\n\t    this.media = _typesAudioManager.MediaManager.create(this.id());\n\t\n\t    /**\n\t     * Prevent duplicate playback of voiceOvers and backgrounds.\n\t     */\n\t    this.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n\t      var playing = this.playing() || [];\n\t      // shouldPlay = false if _event.target is already playing.\n\t      _event.response(!playing || !playing.length || ! ~playing.indexOf(_event.target) && !playing.has(_event.target.fileName));\n\t    });\n\t\n\t    /**\n\t     * \n\t     */\n\t    this.media.rule('.voiceOver', function (_event) {\n\t      var audio, playing;\n\t\n\t      audio = _event.target;\n\t      playing = audio && this.playing('.audio:not(#' + audio.id() + ')');\n\t\n\t      switch (_event.type) {\n\t        case 'play':\n\t          if (playing) {\n\t            playing.filter('.voiceOver').stop('@ALL');\n\t            playing.filter('.background').volume(_playGame2['default'].config('bgVolume.drop') || 0.2);\n\t          }\n\t          break;\n\t\n\t        case 'pause':\n\t        case 'stopped':\n\t        case 'ended':\n\t          if (playing) playing.filter('.background').volume(_playGame2['default'].config('bgVolume.max') || 1);\n\t          break;\n\t      }\n\t    });\n\t\n\t    this.media.rule('.background', 'play', function (_event) {\n\t      var playing = this.playing('.background:not(#' + _event.target.id() + ')');\n\t      if (playing) playing.stop('@ALL');\n\t    });\n\t\n\t    if (~pl.EVENT.ACTION.indexOf('touch')) {\n\t      this.on(pl.EVENT.ACTION, function beginAudio(_event) {\n\t        var ctx, screen;\n\t\n\t        ctx = _playGame2['default'].getAudioContext();\n\t        screen = this.currentScreen();\n\t\n\t        if (screen && ctx && ctx.state === 'suspended') {\n\t          _playGame2['default'].enableAudioContext();\n\t          this.log('awesome!');\n\t          screen.startAudio();\n\t          this.off(pl.EVENT.ACTION, beginAudio);\n\t        }\n\t      });\n\t    }\n\t\n\t    collectVideos.call(this);\n\t  };\n\t\n\t  this.progress = function () {\n\t    return {\n\t      currentScreen: this.currentScreen().index()\n\t    };\n\t  };\n\t\n\t  this.currentScreen = function () {\n\t    return this.findOwn(pl.game.config('screenSelector') + '.OPEN').not('#quit').scope();\n\t  };\n\t\n\t  this.flip = function () {\n\t    console.log('THATS A FLIP!');\n\t    _playGame2['default'].report.flip(this);\n\t  };\n\t\n\t  this.pause = function (quitScreen) {\n\t    if (!quitScreen) this.addClass('PAUSED');\n\t    this.screens.forEach(function (screen) {\n\t      if (screen.state(screen.STATE.OPEN)) {\n\t        screen.pause();\n\t      }\n\t    });\n\t    _playGame2['default'].getAudioContext().suspend();\n\t  };\n\t\n\t  this.resume = function () {\n\t    this.removeClass('PAUSED');\n\t    this.screens.forEach(function (screen) {\n\t      if (screen.state(screen.STATE.OPEN)) screen.resume();\n\t    });\n\t    if (!this.hasClass('QUIT-SCREEN')) _playGame2['default'].getAudioContext().resume();\n\t  };\n\t\n\t  this.exit = function () {\n\t    console.log('GOODBYE!');\n\t    _playGame2['default'].report.exit(this);\n\t  };\n\t\n\t  /**\n\t   * Demo mode key command\n\t   */\n\t  this.onKeys('ctrl+D,M', function () {\n\t    demoMode.call(this);\n\t  });\n\t\n\t  /**\n\t   * Keyboard screen navigation\n\t   */\n\t  this.onKeys('left', function () {\n\t    var current;\n\t\n\t    current = this.currentScreen();\n\t\n\t    if (current) current.prev();\n\t  });\n\t\n\t  this.onKeys('right', function () {\n\t    var current;\n\t\n\t    current = this.currentScreen();\n\t\n\t    if (current) current.next();\n\t  });\n\t});\n\t\n\texports['default'] = Game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 116 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * API for communicaion between a game and the platform.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(51);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar platform = new function () {\n\t\n\t  function createEvent(_name, _props) {\n\t    var eventObject;\n\t\n\t    eventObject = _util2['default'].mixin(new Event('game-event', { bubbles: true, cancelable: false }), {\n\t      name: _name,\n\t      respond: function respond(_data) {\n\t        var platformEvent;\n\t\n\t        platformEvent = $.Event('platform-event', {\n\t          name: _name,\n\t          gameData: _data\n\t        });\n\t\n\t        pl.game.trigger(platformEvent);\n\t      }\n\t    }, _props);\n\t\n\t    return eventObject;\n\t  }\n\t\n\t  this.EVENT_INIT = 'init';\n\t  this.EVENT_SAVE = 'save';\n\t  this.EVENT_EXIT = 'exit';\n\t  this.EVENT_FLIPPED = 'flipped';\n\t\n\t  this.emit = function (_name, data) {\n\t    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name, data));\n\t  };\n\t\n\t  this.saveGameState = function (_data) {\n\t    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n\t  };\n\t\n\t  window.addEventListener('platform-event', function (_event) {\n\t    var platformEvent;\n\t\n\t    platformEvent = $.Event('platform-event', {\n\t      name: _event.name\n\t    });\n\t\n\t    pl.game.trigger(platformEvent);\n\t  });\n\t}();\n\t\n\texports['default'] = platform;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** play.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b84964005067773d45ee\n **/","/**\n * Boot file for the Play library.\n *\n * @module\n *\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires jQExtentions\n * @requires play\n */\nimport 'jQExtentions';\nimport play from 'play';\n\n/**\n * Begin running the library\n */\nfunction run() {\n  play.game.run();\n}\n\n// export namespace to global object.\nwindow.play = window.pl = play;\n\n// Invoke 'run' when DOM has finished loading.\ndocument.addEventListener('DOMContentLoaded', run, false);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/main.js\n **/","module.exports = require(\"./interopRequireDefault.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interop-require-default.js\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interopRequireDefault.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\n * Extentions to jQuery used by the library.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires types/Dimensions\n * @requires Matrix\n */\nimport { Point, Size } from 'types/Dimensions';\nimport Matrix from 'lib/matrix';\n\n/**\n * jQuery's prototype\n * @external jQuery\n * @see {@link http://api.jquery.com/}\n */\n\n(function () {\n  var original;\n\n  original = {\n    position: this.position\n  };\n\n  /**\n   * Resolves the scope for each of the set of matched nodes.\n   * @function external:jQuery#scope\n   * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n   */\n  this.scope = function () {\n    var result;\n\n    result = [];\n\n    this.each(function () {\n      var $node, scope;\n\n      $node = $(this);\n      scope = $node.data('pl-scope');\n\n      if (!scope) {\n        scope = $node.closest('.pl-scope').data('pl-scope');\n      }\n\n      if (scope) result.push(scope);\n    });\n\n    return (result.length > 1) ? result : result[0];\n  };\n\n  /**\n   * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n   * @function external:jQuery#id\n   * @arg {string} [_set] Name to set as the node's id.\n   * @returns {string} The resolved id.\n   */\n  this.id = function (_set) {\n    if (_set !== undefined) {\n      // Remove attribute.\n      if (~['', null].indexOf(_set)) {\n        this.attr('id', null);\n      }\n\n      // If document already has the id defined then set as a unique library id.\n      if ($('#' + _set).length) {\n        this.attr('pl-id', _set);\n      } else {\n        this.attr('id', _set);\n      }\n\n      return this;\n    }\n\n    return this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n  };\n\n  /**\n   * Provides the 'relative' CSS selector for the first node in the collection.\n   * @function external:jQuery#address\n   * @returns {string}\n   *\n   * @example\n   * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n   * $('#sweater').address() // div#sweater.wide\n   */\n  this.address = function () {\n    var tag, id, classes;\n\n    tag = this[0].nodeName.toLowerCase();\n    id = this.attr('id');\n    classes = this.attr('class') ? '.' + this.attr('class').split(' ').join('.') : '';\n\n    return tag + (id ? '#' + id : '') + classes;\n  };\n\n  /**\n   * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n   * @function external:jQuery#state\n   * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n   * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n   */\n  this.state = function (_test) {\n    var classes;\n\n    if (_test) return this.hasClass(_test.toUpperCase());\n\n    classes = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\n    return classes && (classes.length === 1 ? classes[0] : classes);\n  };\n\n  this.size = function () {\n    var size;\n\n    if (!arguments.length) {\n      size = Size.create().set(this.width(), this.height());\n    } else {\n      size = Size.create(arguments);\n      this.css(size);\n    }\n\n    return size;\n  };\n\n  this.position = function () {\n    var pos;\n\n    if (!arguments.length) {\n      pos = original.position.call(this);\n      pos = Point.create().set(pos.left, pos.top);\n    } else {\n      pos = Point.create(arguments);\n\n      this.css({\n        position: 'relative',\n        left: pos.x,\n        top: pos.y\n      });\n    }\n\n    return pos;\n  };\n\n  /**\n   * Provides the jQuery offset for the first node in the collection.\n   * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n   * @function external:jQuery#absolutePosition\n   * @returns {Point}\n   */\n  this.absolutePosition = function () {\n    var offset;\n\n    if (!arguments.length) {\n      offset = this.offset();\n\n      return Point.create().set(offset.left, offset.top);\n    } else {\n      offset = Point.create(arguments);\n\n      this.css({\n        position: 'absolute',\n        top: offset.y,\n        left: offset.x\n      });\n\n      return offset;\n    }\n  };\n\n  /**\n   * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n   * @function external:jQuery#transform\n   * @arg {number} [_scaleX] - scale x\n   * @arg {number} [_shearY] - shear y\n   * @arg {number} [_shearX] - shear x\n   * @arg {number} [_scaleY] - scale y\n   * @arg {number} [_translateX] - translate x\n   * @arg {number} [_translateY] - translate y\n   * @returns {Matrix}\n   */\n\n  /**\n   * Provides the CSS matrix transform for the first node in the collection.\n   * @function external:jQuery#transform\n   * @returns {Matrix}\n   */\n  this.transform = function () {\n    var t, matrix, is3d;\n\n    matrix = new Matrix();\n\n    if (!arguments.length) {\n      t = this.css('transform');\n      is3d = !!~t.indexOf('matrix3d');\n\n      if (t !== 'none') {\n        t = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n        if (is3d) {\n          t = (function (_matrix) {\n            var i, result;\n\n            result = [];\n\n            for (i = 0; i < _matrix.length; i += 4) {\n              result = result.concat(_matrix.slice(i, i + 2));\n            }\n            return result;\n          }(t));\n        }\n\n        t = t.map(parseFloat);\n\n        matrix.setTransform.apply(matrix, t);\n\n        return matrix;\n      }\n\n      return t;\n    }\n\n    matrix.setTransform.apply(matrix, arguments);\n\n    this.css('transform', matrix.toCSS());\n\n    return matrix;\n  };\n\n  /**\n   * Getter/Setter for the CSS transform translation. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @arg {Point} _point - A point object {x,y}\n   * @returns {Point}\n   */\n\n  /**\n   * Getter/Setter for the CSS transform translation.\n   * @function external:jQuery#transformPosition\n   * @arg {number} _x - x coordinate\n   * @arg {number} _y - y coordinate\n   * @returns {Point}\n   */\n  this.transformPosition = function () {\n    var matrix, point;\n\n    matrix = this.transform();\n    point = Point.create().set(0, 0);\n\n    if (!arguments.length) {\n      if (matrix !== 'none') point.set(matrix.e, matrix.f);\n    } else {\n      if (matrix === 'none') matrix = new Matrix();\n\n      point.set.apply(point, arguments);\n      matrix.translate(point.x, point.y);\n      this.css('transform', matrix.toCSS());\n    }\n\n    return point;\n  };\n\n  /**\n   * Getter for the CSS transform scale. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @returns {Point}\n   */\n\n  /**\n   * Setter for the CSS transform scale. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @arg {Point} _point - A point object {x,y}\n   * @returns {Point}\n   */\n\n  /**\n   * Setter for the CSS transform scale.\n   * @function external:jQuery#transformPosition\n   * @arg {number} _x - x coordinate\n   * @arg {number} _y - y coordinate\n   * @returns {Point}\n   */\n  this.transformScale = function () {\n    var matrix, scale;\n\n    matrix = this.transform();\n    scale = Point.create().set(1, 1);\n\n    if (!arguments.length) {\n      if (matrix !== 'none') scale.set(matrix.a, matrix.d);\n    } else {\n      if (matrix === 'none') matrix = new Matrix();\n\n      scale.set.apply(scale, arguments);\n      matrix.scale(scale.x, scale.y);\n      this.css('transform', matrix.toCSS());\n    }\n\n    return scale;\n  };\n\n  /**\n   * Accessor method for `pl` attributes.\n   */\n  this.pl = function (_name, _value) {\n    var args, result;\n\n    if (!_name) {\n      result = {};\n      this.each(function () {\n        Array.forEach(this.attributes, function (_attr) {\n          if (_attr.name.indexOf('pl-') === 0) {\n            result[_attr.name.slice(3)] = _attr.value;\n          }\n        });\n      });\n      return result;\n    }\n\n\n    args = ['pl-' + _name];\n    if (typeof _value !== 'undefined') args.push(_value);\n\n    if (_value === null) {\n      this.removeAttr('pl-' + _name);\n      return this;\n    }\n\n    return this.attr.apply(this, args);\n  };\n\n  /**\n   * Invoke a method of each item in the set of matched elements.\n   */\n  this.exec = function (_method, _args) {\n    return this.map(function () {\n      if (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n    }).toArray();\n  };\n\n}).call($.fn);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/jQExtentions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/for-each\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/for-each.js\n ** module id = 5\n ** module chunks = 0\n **/","require('../../modules/es6.array.for-each');\nmodule.exports = require('../../modules/_core').Array.forEach;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/array/for-each.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\r\nvar $export  = require('./_export')\r\n  , $forEach = require('./_array-methods')(0)\r\n  , STRICT   = require('./_strict-method')([].forEach, true);\r\n\r\n$export($export.P + $export.F * !STRICT, 'Array', {\r\n  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\r\n  forEach: function forEach(callbackfn /* , thisArg */){\r\n    return $forEach(this, callbackfn, arguments[1]);\r\n  }\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.for-each.js\n ** module id = 7\n ** module chunks = 0\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_export.js\n ** module id = 8\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_global.js\n ** module id = 9\n ** module chunks = 0\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_core.js\n ** module id = 10\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ctx.js\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_a-function.js\n ** module id = 12\n ** module chunks = 0\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_hide.js\n ** module id = 13\n ** module chunks = 0\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dp.js\n ** module id = 14\n ** module chunks = 0\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-object.js\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-object.js\n ** module id = 16\n ** module chunks = 0\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\r\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js\n ** module id = 17\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_descriptors.js\n ** module id = 18\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_fails.js\n ** module id = 19\n ** module chunks = 0\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_dom-create.js\n ** module id = 20\n ** module chunks = 0\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-primitive.js\n ** module id = 21\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_property-desc.js\n ** module id = 22\n ** module chunks = 0\n **/","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-methods.js\n ** module id = 23\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iobject.js\n ** module id = 24\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_cof.js\n ** module id = 25\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-object.js\n ** module id = 26\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_defined.js\n ** module id = 27\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-length.js\n ** module id = 28\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-integer.js\n ** module id = 29\n ** module chunks = 0\n **/","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-species-create.js\n ** module id = 30\n ** module chunks = 0\n **/","var isObject = require('./_is-object')\r\n  , isArray  = require('./_is-array')\r\n  , SPECIES  = require('./_wks')('species');\r\n\r\nmodule.exports = function(original){\r\n  var C;\r\n  if(isArray(original)){\r\n    C = original.constructor;\r\n    // cross-realm fallback\r\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\r\n    if(isObject(C)){\r\n      C = C[SPECIES];\r\n      if(C === null)C = undefined;\r\n    }\r\n  } return C === undefined ? Array : C;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-species-constructor.js\n ** module id = 31\n ** module chunks = 0\n **/","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array.js\n ** module id = 32\n ** module chunks = 0\n **/","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_wks.js\n ** module id = 33\n ** module chunks = 0\n **/","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared.js\n ** module id = 34\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_uid.js\n ** module id = 35\n ** module chunks = 0\n **/","var fails = require('./_fails');\r\n\r\nmodule.exports = function(method, arg){\r\n  return !!method && fails(function(){\r\n    arg ? method.call(null, function(){}, 1) : method.call(null);\r\n  });\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_strict-method.js\n ** module id = 36\n ** module chunks = 0\n **/","/**\n *\n * @module\n * @version 1.1\n * @author Micah Rolon <functionmicah@gmail.com>\n * @requires module:types/BasicArray~BasicArray\n *\n * @desc *Created: 11/12/14*\n *\n * This file contains objects for containing values about a plane. i.e. x or width.\n * Adds the convenience of keeping these values paired to passed around your application.\n * It also includes methods which you perform on the values and returns a new object\n * so the original values are maintained.\n *\n * #### Usage\n *\n * New instances can be created by calling the create method.\n * ```\n * cursorLocation = Point.create();\n * ```\n *\n * Then call `set()` to apply your values.\n * ```\n * cursorLocation.set(event.clientX, event.clientY);\n * ```\n *\n * Then you can use the calculation methods to perform transformations.\n * ```\n * relativeCursor = cursorLocation.scale(zoom);\n * ```\n *\n * #### Developer Notes\n *\n * When adding new methods make sure you are returning a new instance.\n * Dimensional objects are meant to be immutable.\n *\n * Follow this pattern:\n * ```\n * this.method = function () {\n *     // set with your calculated values.\n *     return this.create().set( ... )\n * }\n * ```\n *\n * #### Change Log\n * *v1.1 - 12/13/15*\n * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n */\n\n/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\nimport BasicArray from 'types/BasicArray';\n\nvar Dimension, Size, Point;\n\n/**\n * The native Array\n * @external Array\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n */\n\n/**\n * Array prototype extension\n * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n * @function external:Array#to\n * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n * @example\n * somePoint = [10, 10].to(Point);\n * somePoint = [10, 10].to('point');\n */\nArray.prototype.to = function (_Thing) {\n  var map;\n\n  map = {\n    point: Point,\n    size: Size\n  };\n\n  if (typeof _Thing === 'string') {\n    return map[_Thing.toLowerCase()].create().set(this);\n  }\n\n  else if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n    if (!_Thing.isPrototypeOf(this)) {\n      return _Thing.set.apply(_Thing.create(), this);\n    }\n  }\n\n  return this;\n};\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n * @class\n * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @extends module:types/BasicArray~BasicArray\n */\nDimension = BasicArray.extend(function () {\n  var originalMap;\n\n  originalMap = this.map;\n\n  this[0] = this[1] = 0;\n  this.planeMap = null,\n  this.length = 2;\n\n  /**\n   * Provides a new instance.\n   * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n   * @returns {Dimension}\n   */\n  this.create = function (_argumentsArray) {\n    var instance;\n\n    instance = this.proto();\n\n    if (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\n    return instance;\n  };\n\n  /**\n   * Incerement each plane by a value or specify each plane.\n   * @arg {number} _val - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.inc = function (_val, _plane2) {\n    var a, b;\n\n    if (_val.length === 2) {\n      a = _val[0];\n      b = _val[1];\n    }\n\n    else if (_plane2 != null) {\n      a = _val;\n      b = _plane2;\n    }\n\n    else {\n      a = b = _val;\n    }\n\n    return this.create().set(\n      this[0] + a,\n      this[1] + b\n    );\n  };\n\n  /**\n   * Decerement each plane by a value or specify each plane.\n   * @arg {number} _val - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.dec = function (_val, _plane2) {\n    var a, b;\n\n    if (_val.length === 2) {\n      a = _val[0];\n      b = _val[1];\n    }\n\n    else if (_plane2 != null) {\n      a = _val;\n      b = _plane2;\n    }\n\n    else {\n      a = b = _val;\n    }\n\n    return this.create().set(\n      this[0] - a,\n      this[1] - b\n    );\n  };\n\n  /**\n   * Multiply each plane by a value or specify each plane.\n   * @arg {number} _scale - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.scale = function (_scale, _plane2) {\n    return this.create().set(\n      this[0] * _scale,\n      this[1] * (_plane2 != null ? _plane2 : _scale)\n    );\n  };\n\n  /**\n   * Perfom a Math function on each plane\n   * @arg {string} _fun - a string of the function name in the JS Math object,\n   * followed by the whatever arguments the function takes after its first\n   * since the first argument is the plane value.\n   * @returns {Dimension}\n   */\n  this.math = function (_fun) {\n    var args = [].slice.call(arguments, 1);\n\n    return this.create().set(\n      Math[_fun].apply(Math, [this[0]].concat(args)),\n      Math[_fun].apply(Math, [this[1]].concat(args))\n    );\n  };\n\n  /**\n   * Takes each plane value and passes it to parseInt().\n   * @returns {Dimension}\n   */\n  this.parseInt = function () {\n    return this.create().set(\n      parseInt(this[0]),\n      parseInt(this[1])\n    );\n  };\n\n  /**\n   * Takes each plane value and passes it to parseFloat().\n   * @returns {Dimension}\n   */\n  this.parseFloat = function () {\n    return this.create().set(\n      parseFloat(this[0]),\n      parseFloat(this[1])\n    );\n  };\n\n  /**\n   * Resolves the name of the plane at the given index.\n   * @arg {number} _index - The index of the plane.\n   * @returns {string}\n   */\n  this.planeOf = function (_index) {\n    if (isNaN(parseInt(_index))) return null;\n    return this.planeMap[_index];\n  };\n\n  /**\n   * Make a new array by iterating over each plane.<br>\n   * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n   * @arg {function} _handler - handler for each index.\n   * @override\n   * @returns {Dimension}\n   */\n  this.map = function (_handler) {\n    return originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n  };\n\n  /**\n   * Multiplies the planes.\n   * @returns {number}\n   */\n  this.product = function () {\n    return this[0] * this[1];\n  };\n\n  /**\n   * Divides the planes.\n   * @returns {number}\n   */\n  this.ratio = function () {\n    return this[0] / this[1];\n  };\n\n  this.quotient = function () {\n    return Math.floor(this[0] / this[1]);\n  };\n\n  this.remainder = function () {\n    return this[0] % this[1];\n  };\n\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc 2 Dimensional object containing width and height.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} width - The width.\n * @prop {number} height - The height.\n */\nSize = Dimension.extend(function () {\n  /**\n   * Maps the names of the indexes.<br>\n   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n   * @protected\n   * @default ['width', 'height']\n   */\n  this.planeMap = ['width', 'height'];\n\n  Object.defineProperties(this, {\n    width: {\n      get: function () {\n        return this[0];\n      },\n\n      set: function (_val) {\n        this[0] = Number(_val);\n      }\n    },\n\n    height: {\n      get: function () {\n        return this[1];\n      },\n\n      set: function (_val) {\n        this[1] = Number(_val);\n      }\n    }\n  });\n\n  /**\n   * Define the size with an object. (overloaded)\n   * @function module:types/Dimensions~Size#set\n   * @arg {object} _size - A size object {width, height}.\n   * @returns {Size}\n   */\n\n  /**\n   * Define the size with an array. (overloaded)\n   * @function module:types/Dimensions~Size#set\n   * @arg {array} _size - A size array [width, height].\n   * @returns {Size}\n   */\n\n  /**\n   * Define the size.\n   * @arg {number} _width - The width.\n   * @arg {number} _height - The height.\n   * @returns {Size}\n   */\n  this.set = function (_width, _height) {\n    if (arguments.length === 1) {\n      if (_width.width !== undefined && _width.height !== undefined) {\n        this[0] = Number(_width.width);\n        this[1] = Number(_width.height);\n      }\n\n      else if (_width.length === 2) {\n        this[0] = Number(_width[0]);\n        this[1] = Number(_width[1]);\n      }\n    }\n\n    else {\n      this[0] = Number(_width);\n      this[1] = Number(_height);\n    }\n\n    return this;\n  };\n\n  /**\n   * Calculates the hypotenuse.\n   * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n   * @returns {number}\n   */\n  this.hypotenuse = function () {\n    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n  };\n\n  /**\n   * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n   * @arg {object|HTMLElement} - The object or DOM node.\n   * @returns {this}\n   */\n  this.applyTo = function (_object) {\n    if (_object.nodeType === document.ELEMENT_NODE) {\n      if (!(_object.width !== undefined || _object.height !== undefined)) {\n        _object.style.width = this.width;\n        _object.style.height = this.height;\n\n        return this;\n      }\n    }\n\n    _object.width = this.width;\n    _object.height = this.height;\n\n    return this;\n  };\n\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} x - The x coordinate.\n * @prop {number} y - The y coordinate.\n */\nPoint = Dimension.extend(function () {\n  /**\n   * Maps the names of the indexes.<br>\n   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n   * @protected\n   * @default ['x', 'y']\n   */\n  this.planeMap = ['x', 'y'];\n\n  Object.defineProperties(this, {\n    x: {\n      get: function () {\n        return this[0];\n      },\n\n      set: function (_val) {\n        this[0] = Number(_val);\n      }\n    },\n\n    y: {\n      get: function () {\n        return this[1];\n      },\n\n      set: function (_val) {\n        this[1] = Number(_val);\n      }\n    }\n  });\n\n  /**\n   * Define the point with an object. (overloaded)\n   * @function module:types/Dimensions~Point#set\n   * @arg {object} _point - A point object {x, y}.\n   * @returns {Point}\n   */\n\n  /**\n   * Define the point with an array. (overloaded)\n   * @function module:types/Dimensions~Point#set\n   * @arg {array} _point - A point array [x, y].\n   * @returns {Point}\n   */\n\n  /**\n   * Define the point.\n   * @arg {number} _x - The x.\n   * @arg {number} _y - The y.\n   * @returns {Point}\n   */\n  this.set = function (_x, _y) {\n    if (arguments.length === 1) {\n      if (_x.x !== undefined && _x.y !== undefined) {\n        this[0] = Number(_x.x);\n        this[1] = Number(_x.y);\n      }\n\n      else if (_x.length === 2) {\n        this[0] = Number(_x[0]);\n        this[1] = Number(_x[1]);\n      }\n    }\n\n    else {\n      this[0] = Number(_x);\n      this[1] = Number(_y);\n    }\n\n    return this;\n  };\n\n  /**\n   * Calculates the distance between the insatnce and a point object.\n   * @arg {Point} _point - A point object {x,y}.\n   * @returns {Size}\n   */\n  this.distance = function (_point) {\n    if (_point.x !== undefined && _point.y !== undefined) {\n      return Size.create().set(\n        _point.x - this.x,\n        _point.y - this.y\n      );\n    }\n\n    return null;\n  };\n\n  /**\n   * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n   * @arg {object|HTMLElement} - The object or DOM node.\n   * @returns {this}\n   */\n  this.applyTo = function (_object) {\n    if (_object.nodeType === document.ELEMENT_NODE) {\n      _object.style.left = this.x;\n      _object.style.top = this.y;\n    }\n\n    else {\n      _object.x = this.x;\n      _object.y = this.y;\n    }\n\n    return this;\n  };\n\n  /**\n   * Rotate the point based on an origin point and an angle in degrees.\n   * @arg {Point} _origin - A point object {x,y}.\n   * @arg {number} _angle - The angle of rotation in degrees.\n   * @returns {this}\n   */\n  this.rotate = function (_origin, _angle) {\n    var x, y, rad;\n\n    rad = _angle * (Math.PI / 180);\n\n    x = this.x - _origin.x;\n    y = this.y - _origin.y;\n\n    return this.create().set(\n      (Math.sin(rad) * x - Math.cos(rad) * y) + _origin.x,\n      (Math.cos(rad) * x + Math.sin(rad) * y) + _origin.y\n    );\n  };\n\n});\n\nexport default { Dimension, Size, Point };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Dimensions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-properties.js\n ** module id = 38\n ** module chunks = 0\n **/","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D){\n  return $Object.defineProperties(T, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/define-properties.js\n ** module id = 39\n ** module chunks = 0\n **/","var $export = require('./_export');\r\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperties: require('./_object-dps')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.define-properties.js\n ** module id = 40\n ** module chunks = 0\n **/","var dP       = require('./_object-dp')\r\n  , anObject = require('./_an-object')\r\n  , getKeys  = require('./_object-keys');\r\n\r\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\r\n  anObject(O);\r\n  var keys   = getKeys(Properties)\r\n    , length = keys.length\r\n    , i = 0\r\n    , P;\r\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n  return O;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dps.js\n ** module id = 41\n ** module chunks = 0\n **/","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar $keys       = require('./_object-keys-internal')\r\n  , enumBugKeys = require('./_enum-bug-keys');\r\n\r\nmodule.exports = Object.keys || function keys(O){\r\n  return $keys(O, enumBugKeys);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys.js\n ** module id = 42\n ** module chunks = 0\n **/","var has          = require('./_has')\r\n  , toIObject    = require('./_to-iobject')\r\n  , arrayIndexOf = require('./_array-includes')(false)\r\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\r\n\r\nmodule.exports = function(object, names){\r\n  var O      = toIObject(object)\r\n    , i      = 0\r\n    , result = []\r\n    , key;\r\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n  // Don't enum bug & hidden keys\r\n  while(names.length > i)if(has(O, key = names[i++])){\r\n    ~arrayIndexOf(result, key) || result.push(key);\r\n  }\r\n  return result;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js\n ** module id = 43\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_has.js\n ** module id = 44\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-iobject.js\n ** module id = 45\n ** module chunks = 0\n **/","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-includes.js\n ** module id = 46\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-index.js\n ** module id = 47\n ** module chunks = 0\n **/","var shared = require('./_shared')('keys')\r\n  , uid    = require('./_uid');\r\nmodule.exports = function(key){\r\n  return shared[key] || (shared[key] = uid(key));\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared-key.js\n ** module id = 48\n ** module chunks = 0\n **/","// IE 8- don't enum bug keys\r\nmodule.exports = (\r\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n).split(',');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js\n ** module id = 49\n ** module chunks = 0\n **/","/**\n * Base object type for 'array like' objects.\n * @module\n * @requires module:util\n * @requires module:types/Basic\n */\nimport util from 'util';\nimport Basic from 'types/Basic';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n * @classdesc A base object type for 'array like' object.\n * @class\n * @extends external:Array\n * @extends module:types/Basic~Basic\n * @mixes module:types/Basic~Basic\n */\nvar BasicArray = (function () {\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @memberof module:types/BasicArray~BasicArray\n   * @readonly\n   * @default\n   */\n  this.baseType = 'TYPE_BASIC_ARRAY';\n\n  util.mixin(this, Basic);\n\n  return this;\n\n}).call([]);\n\nexport default BasicArray;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/BasicArray.js\n **/","/**\n * Utility functions.\n * @namespace\n * @author Micah Rolon <micah@ginasink.com>\n * @memberof module:play~pl\n */\nvar util = new (function () {\n\n  /**\n   * Accepts one or more objects to combine their own properties to single object.\n   * @arg {object} _target - The object that will recieve all members.\n   * @arg {object} _sources... - The object(s) to join with the '_target'.\n   * @returns {object} _target\n   */\n  this.mixin = function () {\n    var member, i, target, objs;\n\n    target = arguments[0];\n    objs = [].slice.call(arguments, 1);\n\n    for (i = 0; i < objs.length; i += 1) {\n      for (member in objs[i]) {\n        if (!objs[i].hasOwnProperty(member)) continue;\n        target[member] = objs[i][member];\n      }\n    }\n\n    return target;\n  };\n\n  /**\n   * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n   * @arg {object} _obj - Object to search in.\n   * @arg {*} _member - The reference which is expected to be in the object as a property.\n   * @returns {string} The name of the key in the object matching '_member'.\n   */\n  this.keyOf = function (_obj, _member) {\n    var member;\n\n    for (member in _obj) {\n      if (!_obj.hasOwnProperty(member)) continue;\n      if (_obj[member] === _member) return member;\n    }\n\n    return null;\n  };\n\n  /**\n   * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n   * @arg {object} _obj - The object to search.\n   * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n   * @return {object} An object containing the name of the property and the owning object. {name, object}\n   */\n  this.getOwner = function (_obj, _member) {\n    var prototype, name;\n\n    prototype = Object.getPrototypeOf(_obj);\n\n    // keep searching until we go as deep as we can go.\n    while (prototype) {\n      // search for the key in the prototype\n      name = util.keyOf(prototype, _member);\n\n      // If we found the key in the prototype then we found\n      // our match and we can break out of the loop.\n      if (name) break;\n\n      // Otherwise go deeper (thats what she said ;p)\n      prototype = Object.getPrototypeOf(prototype);\n    }\n\n    return {\n      name: name,\n      object: prototype\n    };\n  };\n\n  /**\n   * Given a range; provides a random number in that range.\n   * @function play~pl.util.random\n   * @arg {number} _rangeA - A number for the low end of the range.\n   * @arg {number} _rangeB - The top end of the range.\n   * @returns {number|*} The resulting number in range or the member found at random.\n   */\n\n  /**\n   * Given an iterable; provides a random item.\n   * @arg {array} _collection - The iterable.\n   * @returns {number|*} The member found at random.\n   */\n  this.random = function (_collection_rangeA, _rangeB) {\n    var index, val;\n\n    index = Math.floor(Math.random() * _collection_rangeA.length);\n\n    if (arguments.length === 2) {\n      val = Math.round(Math.random() * _rangeB);\n\n      return val < _collection_rangeA ? _collection_rangeA : val;\n    }\n\n    if (index === _collection_rangeA.length) index = _collection_rangeA.length - 1;\n\n    return _collection_rangeA && _collection_rangeA[index];\n  };\n\n  /**\n   * Take string and makes it dot notation friendly.\n   * @arg {string} _id - The string to transform.\n   * @arg {boolean} _camelCase - Transform with camel case.\n   * @returns {string}\n   */\n  this.transformId = function (_id, _camelCase) {\n    if (_id && _camelCase) {\n      return _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n        return RegExp.$1.toUpperCase();\n      });\n    }\n\n    return _id && _id.replace(/[-\\s]+/g, '_');\n  };\n\n  /**\n   * Test all arguments for != null\n   * @return {boolean}\n   */\n  this.isSet = function () {\n    return [].every.call(arguments, function (_arg) {\n      return _arg != null;\n    });\n  };\n\n  /**\n   * Parses a formated string and calculates it in milliseconds.\n   * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n   * @return {number}\n   */\n  this.toMillisec = function (_source) {\n    var tokens, time, units;\n\n    if (typeof _source === 'number') return _source;\n    if (!_source) return;\n\n    tokens = _source.split(/\\s+/);\n    time = 0;\n    units = {\n      d: 24 * 60 * 60 * 1000,\n      h: 60 * 60 * 1000,\n      m: 60 * 1000,\n      s: 1000\n    };\n\n    tokens.forEach(function (_token) {\n      var unit, value;\n\n      unit = (_token.match(/[dhms]/) || [])[0];\n\n      if (unit) {\n        value = Number(_token.slice(0, -1));\n        time += value * units[unit];\n      } else {\n        time += Number(_token);\n      }\n    });\n\n    return time;\n  };\n\n  /**\n   * Needs no introduction\n   * @arg {iterable} _collection - iterable.\n   * @return {array}\n   */\n  this.toArray = function (_collection) {\n    return Array.prototype.map.call(_collection, function (i) {\n      return i;\n    });\n  };\n\n  /**\n   * Resolves the value in the object at the given path.\n   * @arg {object} _obj - The object to query.\n   * @arg {string} _path - The path to the desired reference.\n   * @returns {*} The resulting reference value.\n   * @example\n   * var user = {\n   *   name: 'John',\n   *   family: {\n   *     guardians: {David}, // property could be an array of multiple guardians.\n   *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n   *   }\n   * };\n   *\n   * pl.util.resolvePath(user, 'family.sliblings[2].name');\n   * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n   * pl.util.resolvePath(user, 'family.guardians[0]?.name');\n   */\n  this.resolvePath = function (_obj, _path) {\n    var path, obj, i, name, index, testArray;\n\n    path = _path.split('.');\n    obj = _obj;\n    i = 0;\n\n    while (obj) {\n      testArray = (/\\?$/).test(path[i]);\n      index = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n      name = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n      obj = obj[name];\n\n      if (~index && obj) {\n        obj = testArray ? (obj[index] || obj) : obj[index];\n      }\n\n      i += 1;\n\n      if (path.length === i) break;\n    }\n\n    return obj;\n  };\n\n  this.assignRef = function (_obj, _name, _ref) {\n    var name;\n\n    name = util.transformId(_name, true);\n\n    if (_obj[name] === _ref) return _ref;\n\n    if (_obj[name]) {\n      if (!_obj[name].__refCollction__) {\n        _obj[name] = [_obj[name]];\n\n        Object.defineProperty(_obj[name], '__refCollction__', {\n          value: true,\n          enumerable: false,\n          writeable: false,\n          configureable: false\n        });\n      }\n      _obj[name].push(_ref);\n    } else {\n      _obj[name] = _ref;\n    }\n\n    return _obj[name];\n  };\n\n  /**\n   * N0 OPeration.\n   */\n  this.noop = function () {};\n\n  /**\n   * Get the file name out of a simple file path.\n   * @arg {string} _path - The file path.\n   * @returns {string} The extracted name.\n   */\n  this.resolveFileName = function (_path) {\n    return _path.slice(_path.lastIndexOf('/') + 1);\n  };\n\n  /**\n   * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n   * - x; produces a letter a-f.\n   * - y; produces a digit 0-9.\n   * - z; produces a 4 character hex value derived from the now time stamp.\n   * @arg {string} _pattern - The xyz pattern.\n   * @returns {string} The generated ID.\n   */\n  this.createId = function (_pattern) {\n    return (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n      if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n      if (_token === 'y') return (Math.floor(Math.random() * 10)).toString(16);\n      return Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n    });\n  };\n\n});\n\nexport default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/util.js\n **/","/**\n * Base object type for 'classes' implementing methods for extention and super callbacks.\n * @module\n * @requires module:play~pl.util\n */\nimport util from 'util';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n * @classdesc The base type for all objects which will act as prototypes.\n * @class\n */\nvar Basic = {\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @readonly\n   * @default\n   */\n  baseType: 'TYPE_BASIC',\n\n  /**\n   * Creates a new object with the current object as its prototype.\n   * @instance\n   * @returns {Basic} The new instance.\n   */\n  create: function () {\n    return Object.create(this);\n  },\n\n  /**\n   * Creates a new object using a constructor function or object with the current object as its prototype.\n   * @instance\n   * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n   * @returns {Basic} The new instance.\n   *\n   * @todo define constructor property\n   */\n  extend: function (_implementation) {\n    var instance;\n\n    if (!_implementation) return null;\n\n    switch (typeof _implementation) {\n    case 'function':\n      _implementation.prototype = this;\n      instance = new _implementation();\n      break;\n\n    case 'object':\n      instance = this.create();\n      instance.mixin(_implementation);\n      break;\n\n    default:\n      console.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n    }\n\n    return instance;\n  },\n\n  /**\n   * Accepts one or more objects to combine their own properties to the instance.\n   * @instance\n   * @arg {object} _sources... - The object(s) to join with the instance.\n   * @returns this\n   */\n  mixin: function () {\n    return util.mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n  },\n\n  /**\n   * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n   * @instance\n   * @arg {*} _member - The reference which is expected to be in the object as a property.\n   * @returns {string} The name of the key in the object matching '_member'.\n   */\n  keyOf: function (_member) {\n    return util.keyOf(this, _member);\n  },\n\n  /**\n   * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n   * @instance\n   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n   * @returns {*} Whatever the caller returns.\n   */\n  proto: function () {\n    var method, name, owner, prototype;\n\n    // Get the function which invoked proto() in the call stack.\n    // If the caller is a behavior then we retrieve the method.\n    method = this.proto.caller.method || this.proto.caller;\n\n    // Check to see if 'this' owns the method.\n    // NOTE: We may want to move this logic into getOwner().\n    if (name = this.keyOf(method)) {\n      prototype = Object.getPrototypeOf(this);\n    }\n\n    // Otherwise find the object which owns the caller function.\n    else {\n      owner = util.getOwner(this, method);\n      name = owner.name;\n      prototype = Object.getPrototypeOf(owner.object);\n    }\n\n    method = prototype[name];\n\n    if (!method) {\n      console.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n      return null;\n    }\n\n    return method.apply(this, arguments);\n  },\n\n  /**\n   * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n   * @instance\n   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n   * @returns {*} Whatever the caller returns.\n   */\n  sup: function () {\n    var method, name, owner, prototype;\n\n    // Get the function which invoked sup() in the call stack.\n    method = this.sup.caller;\n    owner = util.getOwner(this, this.baseType);\n    prototype = owner.object;\n    name = this.keyOf(method);\n\n    // Check to see if 'this' owns the method.\n    // NOTE: We may want to move this logic into getOwner().\n    //\n    if (!name) {\n      owner = util.getOwner(this, method);\n      name = owner.name;\n    }\n\n    method = prototype[name];\n\n    if (!method) {\n      console.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n      return null;\n    }\n\n    return method.apply(this, arguments);\n  },\n\n  /**\n   * Provides the object type.\n   * @instance\n   */\n  toString: function () {\n    var type;\n\n    if (this.baseType) {\n      type = this.baseType.replace('TYPE_', '');\n      type = type.slice(0, 1) + type.slice(1).toLowerCase();\n    } else {\n      type = this.constructor.name || 'Object';\n    }\n\n    return '[object ' + type + ']';\n  }\n\n};\n\nexport default Basic;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Basic.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 53\n ** module chunks = 0\n **/","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/create.js\n ** module id = 54\n ** module chunks = 0\n **/","var $export = require('./_export')\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n$export($export.S, 'Object', {create: require('./_object-create')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.create.js\n ** module id = 55\n ** module chunks = 0\n **/","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar anObject    = require('./_an-object')\r\n  , dPs         = require('./_object-dps')\r\n  , enumBugKeys = require('./_enum-bug-keys')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , Empty       = function(){ /* empty */ }\r\n  , PROTOTYPE   = 'prototype';\r\n\r\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\nvar createDict = function(){\r\n  // Thrash, waste and sodomy: IE GC bug\r\n  var iframe = require('./_dom-create')('iframe')\r\n    , i      = enumBugKeys.length\r\n    , gt     = '>'\r\n    , iframeDocument;\r\n  iframe.style.display = 'none';\r\n  require('./_html').appendChild(iframe);\r\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n  // createDict = iframe.contentWindow.Object;\r\n  // html.removeChild(iframe);\r\n  iframeDocument = iframe.contentWindow.document;\r\n  iframeDocument.open();\r\n  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n  iframeDocument.close();\r\n  createDict = iframeDocument.F;\r\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n  return createDict();\r\n};\r\n\r\nmodule.exports = Object.create || function create(O, Properties){\r\n  var result;\r\n  if(O !== null){\r\n    Empty[PROTOTYPE] = anObject(O);\r\n    result = new Empty;\r\n    Empty[PROTOTYPE] = null;\r\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n    result[IE_PROTO] = O;\r\n  } else result = createDict();\r\n  return Properties === undefined ? result : dPs(result, Properties);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-create.js\n ** module id = 56\n ** module chunks = 0\n **/","module.exports = require('./_global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_html.js\n ** module id = 57\n ** module chunks = 0\n **/","/**\r\n *\r\n * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n * All rights are reserved to Epistemex.\r\n *\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\nfunction Matrix(context) {\r\n\r\n    var me = this;\r\n    me._t = me.transform;\r\n\r\n    me.a = me.d = 1;\r\n    me.b = me.c = me.e = me.f = 0;\r\n\r\n    me.context = context;\r\n\r\n    // reset canvas transformations (if any) to enable 100% sync.\r\n    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\r\n}\r\n\r\nMatrix.prototype = {\r\n\r\n    /**\r\n     * Concatenates transforms of this matrix onto the given child matrix and\r\n     * returns a new matrix. This instance is used on left side.\r\n     *\r\n     * @param {Matrix} cm - child matrix to apply concatenation to\r\n     * @returns {Matrix}\r\n     */\r\n    concat: function (cm) {\r\n        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\r\n    },\r\n\r\n    /**\r\n     * Flips the horizontal values.\r\n     */\r\n    flipX: function () {\r\n        return this._t(-1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Flips the vertical values.\r\n     */\r\n    flipY: function () {\r\n        return this._t(1, 0, 0, -1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Reflects incoming (velocity) vector on the normal which will be the\r\n     * current transformed x axis. Call when a trigger condition is met.\r\n     *\r\n     * NOTE: BETA, simple implementation\r\n     *\r\n     * @param {number} x - vector end point for x (start = 0)\r\n     * @param {number} y - vector end point for y (start = 0)\r\n     * @returns {{x: number, y: number}}\r\n     */\r\n    reflectVector: function (x, y) {\r\n\r\n        var v = this.applyToPoint(0, 1),\r\n            d = 2 * (v.x * x + v.y * y);\r\n\r\n        x -= d * v.x;\r\n        y -= d * v.y;\r\n\r\n        return {x: x, y: y};\r\n    },\r\n\r\n    /**\r\n     * Short-hand to reset current matrix to an identity matrix.\r\n     */\r\n    reset: function () {\r\n        return this.setTransform(1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Rotates current matrix accumulative by angle.\r\n     * @param {number} angle - angle in radians\r\n     */\r\n    rotate: function (angle) {\r\n        var cos = Math.cos(angle),\r\n            sin = Math.sin(angle);\r\n        return this._t(cos, sin, -sin, cos, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Converts a vector given as x and y to angle, and\r\n     * rotates (accumulative).\r\n     * @param x\r\n     * @param y\r\n     * @returns {*}\r\n     */\r\n    rotateFromVector: function (x, y) {\r\n        return this.rotate(Math.atan2(y, x));\r\n    },\r\n\r\n    /**\r\n     * Helper method to make a rotation based on an angle in degrees.\r\n     * @param {number} angle - angle in degrees\r\n     */\r\n    rotateDeg: function (angle) {\r\n        return this.rotate(angle * Math.PI / 180);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix uniformly and accumulative.\r\n     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n     */\r\n    scaleU: function (f) {\r\n        return this._t(f, 0, 0, f, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scale: function (sx, sy) {\r\n        return this._t(sx, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on x axis accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     */\r\n    scaleX: function (sx) {\r\n        return this._t(sx, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on y axis accumulative.\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scaleY: function (sy) {\r\n        return this._t(1, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shear: function (sx, sy) {\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for x to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     */\r\n    shearX: function (sx) {\r\n        return this._t(1, 0, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for y to the current matrix accumulative.\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shearY: function (sy) {\r\n        return this._t(1, sy, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply skew to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skew: function (ax, ay) {\r\n        return this.shear(Math.tan(ax), Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for x to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     */\r\n    skewX: function (ax) {\r\n        return this.shearX(Math.tan(ax));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for y to the current matrix accumulative.\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skewY: function (ay) {\r\n        return this.shearY(Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Set current matrix to new absolute matrix.\r\n     * @param {number} a - scale x\r\n     * @param {number} b - shear y\r\n     * @param {number} c - shear x\r\n     * @param {number} d - scale y\r\n     * @param {number} e - translate x\r\n     * @param {number} f - translate y\r\n     */\r\n    setTransform: function (a, b, c, d, e, f) {\r\n        var me = this;\r\n        me.a = a;\r\n        me.b = b;\r\n        me.c = c;\r\n        me.d = d;\r\n        me.e = e;\r\n        me.f = f;\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix accumulative.\r\n     * @param {number} tx - translation for x\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translate: function (tx, ty) {\r\n        return this._t(1, 0, 0, 1, tx, ty);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on x axis accumulative.\r\n     * @param {number} tx - translation for x\r\n     */\r\n    translateX: function (tx) {\r\n        return this._t(1, 0, 0, 1, tx, 0);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on y axis accumulative.\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translateY: function (ty) {\r\n        return this._t(1, 0, 0, 1, 0, ty);\r\n    },\r\n\r\n    /**\r\n     * Multiplies current matrix with new matrix values.\r\n     * @param {number} a2 - scale x\r\n     * @param {number} b2 - shear y\r\n     * @param {number} c2 - shear x\r\n     * @param {number} d2 - scale y\r\n     * @param {number} e2 - translate x\r\n     * @param {number} f2 - translate y\r\n     */\r\n    transform: function (a2, b2, c2, d2, e2, f2) {\r\n\r\n        var me = this,\r\n            a1 = me.a,\r\n            b1 = me.b,\r\n            c1 = me.c,\r\n            d1 = me.d,\r\n            e1 = me.e,\r\n            f1 = me.f;\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        me.a = a1 * a2 + c1 * b2;\r\n        me.b = b1 * a2 + d1 * b2;\r\n        me.c = a1 * c2 + c1 * d2;\r\n        me.d = b1 * c2 + d1 * d2;\r\n        me.e = a1 * e2 + c1 * f2 + e1;\r\n        me.f = b1 * e2 + d1 * f2 + f1;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Divide this matrix on input matrix which must be invertible.\r\n     * @param {Matrix} m - matrix to divide on (divisor)\r\n     * @returns {Matrix}\r\n     */\r\n    divide: function (m) {\r\n\r\n        if (!m.isInvertible())\r\n            throw \"Input matrix is not invertible\";\r\n\r\n        var im = m.inverse();\r\n\r\n        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\r\n    },\r\n\r\n    /**\r\n     * Divide current matrix on scalar value != 0.\r\n     * @param {number} d - divisor (can not be 0)\r\n     * @returns {Matrix}\r\n     */\r\n    divideScalar: function (d) {\r\n\r\n        var me = this;\r\n        me.a /= d;\r\n        me.b /= d;\r\n        me.c /= d;\r\n        me.d /= d;\r\n        me.e /= d;\r\n        me.f /= d;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Get an inverse matrix of current matrix. The method returns a new\r\n     * matrix with values you need to use to get to an identity matrix.\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     * @returns {Matrix}\r\n     */\r\n    inverse: function () {\r\n\r\n        if (this.isIdentity()) {\r\n            return new Matrix();\r\n        }\r\n        else if (!this.isInvertible()) {\r\n            throw \"Matrix is not invertible.\";\r\n        }\r\n        else {\r\n            var me = this,\r\n                a = me.a,\r\n                b = me.b,\r\n                c = me.c,\r\n                d = me.d,\r\n                e = me.e,\r\n                f = me.f,\r\n\r\n                m = new Matrix(),\r\n                dt = a * d - b * c; // determinant(), skip DRY here...\r\n\r\n            m.a = d / dt;\r\n            m.b = -b / dt;\r\n            m.c = -c / dt;\r\n            m.d = a / dt;\r\n            m.e = (c * f - d * e) / dt;\r\n            m.f = -(a * f - b * e) / dt;\r\n\r\n            return m;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation is naive. For animation use the\r\n     * intrpolateAnim() method instead.\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolate: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix();\r\n\r\n        m.a = me.a + (m2.a - me.a) * t;\r\n        m.b = me.b + (m2.b - me.b) * t;\r\n        m.c = me.c + (m2.c - me.c) * t;\r\n        m.d = me.d + (m2.d - me.d) * t;\r\n        m.e = me.e + (m2.e - me.e) * t;\r\n        m.f = me.f + (m2.f - me.f) * t;\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation method uses decomposition which makes\r\n     * it suitable for animations (in particular where rotation takes\r\n     * places).\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolateAnim: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix(),\r\n            d1 = me.decompose(),\r\n            d2 = m2.decompose(),\r\n            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\r\n            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\r\n            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\r\n            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\r\n            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t\r\n            ;\r\n\r\n        m.translate(translateX, translateY);\r\n        m.rotate(rotation);\r\n        m.scale(scaleX, scaleY);\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Decompose the current matrix into simple transforms using either\r\n     * QR (default) or LU decomposition. Code adapted from\r\n     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n     *\r\n     * The result must be applied in the following order to reproduce the current matrix:\r\n     *\r\n     *     QR: translate -> rotate -> scale -> skewX\r\n     *     LU: translate -> skewY  -> scale -> skewX\r\n     *\r\n     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n     */\r\n    decompose: function (useLU) {\r\n\r\n        var me = this,\r\n            a = me.a,\r\n            b = me.b,\r\n            c = me.c,\r\n            d = me.d,\r\n            acos = Math.acos,\r\n            atan = Math.atan,\r\n            sqrt = Math.sqrt,\r\n            pi = Math.PI,\r\n\r\n            translate = {x: me.e, y: me.f},\r\n            rotation = 0,\r\n            scale = {x: 1, y: 1},\r\n            skew = {x: 0, y: 0},\r\n\r\n            determ = a * d - b * c; // determinant(), skip DRY here...\r\n\r\n        if (useLU) {\r\n            if (a) {\r\n                skew = {x: atan(c / a), y: atan(b / a)};\r\n                scale = {x: a, y: determ / a};\r\n            }\r\n            else if (b) {\r\n                rotation = pi * 0.5;\r\n                scale = {x: b, y: determ / b};\r\n                skew.x = atan(d / b);\r\n            }\r\n            else { // a = b = 0\r\n                scale = {x: c, y: d};\r\n                skew.x = pi * 0.25;\r\n            }\r\n        }\r\n        else {\r\n            // Apply the QR-like decomposition.\r\n            if (a || b) {\r\n                var r = sqrt(a * a + b * b);\r\n                rotation = b > 0 ? acos(a / r) : -acos(a / r);\r\n                scale = {x: r, y: determ / r};\r\n                skew.x = atan((a * c + b * d) / (r * r));\r\n            }\r\n            else if (c || d) {\r\n                var s = sqrt(c * c + d * d);\r\n                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\r\n                scale = {x: determ / s, y: s};\r\n                skew.y = atan((a * c + b * d) / (s * s));\r\n            }\r\n            else { // a = b = c = d = 0\r\n                scale = {x: 0, y: 0};   // = invalid matrix\r\n            }\r\n        }\r\n\r\n        return {\r\n            scale: scale,\r\n            translate: translate,\r\n            rotation: rotation,\r\n            skew: skew\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Returns the determinant of the current matrix.\r\n     * @returns {number}\r\n     */\r\n    determinant: function () {\r\n        return this.a * this.d - this.b * this.c;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to x and y point.\r\n     * Returns a point object.\r\n     *\r\n     * @param {number} x - value for x\r\n     * @param {number} y - value for y\r\n     * @returns {{x: number, y: number}} A new transformed point object\r\n     */\r\n    applyToPoint: function (x, y) {\r\n\r\n        var me = this;\r\n\r\n        return {\r\n            x: x * me.a + y * me.c + me.e,\r\n            y: x * me.b + y * me.d + me.f\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to array with point objects or point pairs.\r\n     * Returns a new array with points in the same format as the input array.\r\n     *\r\n     * A point object is an object literal:\r\n     *\r\n     * {x: x, y: y}\r\n     *\r\n     * so an array would contain either:\r\n     *\r\n     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n     *\r\n     * or\r\n     * [x1, y1, x2, y2, ... xn, yn]\r\n     *\r\n     * @param {Array} points - array with point objects or pairs\r\n     * @returns {Array} A new array with transformed points\r\n     */\r\n    applyToArray: function (points) {\r\n\r\n        var i = 0, p, l,\r\n            mxPoints = [];\r\n\r\n        if (typeof points[0] === 'number') {\r\n\r\n            l = points.length;\r\n\r\n            while (i < l) {\r\n                p = this.applyToPoint(points[i++], points[i++]);\r\n                mxPoints.push(p.x, p.y);\r\n            }\r\n        }\r\n        else {\r\n            for (; p = points[i]; i++) {\r\n                mxPoints.push(this.applyToPoint(p.x, p.y));\r\n            }\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to a typed array with point pairs. Although\r\n     * the input array may be an ordinary array, this method is intended\r\n     * for more performant use where typed arrays are used. The returned\r\n     * array is regardless always returned as a Float32Array.\r\n     *\r\n     * @param {*} points - (typed) array with point pairs\r\n     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n     * @returns {*} A new typed array with transformed points\r\n     */\r\n    applyToTypedArray: function (points, use64) {\r\n\r\n        var i = 0, p,\r\n            l = points.length,\r\n            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\r\n\r\n        while (i < l) {\r\n            p = this.applyToPoint(points[i], points[i + 1]);\r\n            mxPoints[i++] = p.x;\r\n            mxPoints[i++] = p.y;\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply to any canvas 2D context object. This does not affect the\r\n     * context that optionally was referenced in constructor unless it is\r\n     * the same context.\r\n     * @param {CanvasRenderingContext2D} context\r\n     */\r\n    applyToContext: function (context) {\r\n        var me = this;\r\n        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is an identity matrix (no transforms applied).\r\n     * @returns {boolean} True if identity (not transformed)\r\n     */\r\n    isIdentity: function () {\r\n        var me = this;\r\n        return (me._q(me.a, 1) &&\r\n        me._q(me.b, 0) &&\r\n        me._q(me.c, 0) &&\r\n        me._q(me.d, 1) &&\r\n        me._q(me.e, 0) &&\r\n        me._q(me.f, 0));\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is invertible\r\n     * @returns {boolean}\r\n     */\r\n    isInvertible: function () {\r\n        return !this._q(this.determinant(), 0)\r\n    },\r\n\r\n    /**\r\n     * Test if matrix is valid.\r\n     */\r\n    isValid: function () {\r\n        return !this._q(this.a * this.d, 0);\r\n    },\r\n\r\n    /**\r\n     * Clones current instance and returning a new matrix.\r\n     * @param {boolean} [noContext=false] don't clone context reference if true\r\n     * @returns {Matrix}\r\n     */\r\n    clone: function (noContext) {\r\n        var me = this,\r\n            m = new Matrix();\r\n        m.a = me.a;\r\n        m.b = me.b;\r\n        m.c = me.c;\r\n        m.d = me.d;\r\n        m.e = me.e;\r\n        m.f = me.f;\r\n        if (!noContext) m.context = me.context;\r\n\r\n        return m;\r\n    },\r\n\r\n    /**\r\n     * Compares current matrix with another matrix. Returns true if equal\r\n     * (within epsilon tolerance).\r\n     * @param {Matrix} m - matrix to compare this matrix with\r\n     * @returns {boolean}\r\n     */\r\n    isEqual: function (m) {\r\n\r\n        var me = this,\r\n            q = me._q;\r\n\r\n        return (q(me.a, m.a) &&\r\n        q(me.b, m.b) &&\r\n        q(me.c, m.c) &&\r\n        q(me.d, m.d) &&\r\n        q(me.e, m.e) &&\r\n        q(me.f, m.f));\r\n    },\r\n\r\n    /**\r\n     * Returns an array with current matrix values.\r\n     * @returns {Array}\r\n     */\r\n    toArray: function () {\r\n        var me = this;\r\n        return [me.a, me.b, me.c, me.d, me.e, me.f];\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS: function () {\r\n        return \"matrix(\" + this.toArray() + \")\";\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix3d() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS3D: function () {\r\n        var me = this;\r\n        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\r\n    },\r\n\r\n    /**\r\n     * Returns a JSON compatible string of current matrix.\r\n     * @returns {string}\r\n     */\r\n    toJSON: function () {\r\n        return JSON.stringify(this.toArray());\r\n    },\r\n\r\n    /**\r\n     * Returns a string with current matrix as comma-separated list.\r\n     * @returns {string}\r\n     */\r\n    toString: function () {\r\n        return \"\" + this.toArray();\r\n    },\r\n\r\n    /**\r\n     * Compares floating point values with some tolerance (epsilon)\r\n     * @param {number} f1 - float 1\r\n     * @param {number} f2 - float 2\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n    _q: function (f1, f2) {\r\n        return Math.abs(f1 - f2) < 1e-14;\r\n    },\r\n\r\n    /**\r\n     * Apply current absolute matrix to context if defined, to sync it.\r\n     * @private\r\n     */\r\n    _x: function () {\r\n        var me = this;\r\n        if (me.context)\r\n            me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    }\r\n};\r\n\r\nexport default Matrix;\n\n\n/** WEBPACK FOOTER **\n ** ./source/lib/matrix.js\n **/","/**\n * Defines the global root level namespace for the library.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires game\n * @requires module:play~pl.util\n * @requires types/Basic\n * @requires types/Dimensions\n */\nimport game from 'play.game';\nimport util from 'util';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point, Size } from 'types/Dimensions';\n\nvar pl;\n/**\n * Resolves the event type for user interactions.\n */\nfunction resolveEventType() {\n  var resolution;\n\n  if (game.feature('touch')) {\n    resolution = {\n      ACTION: 'touchend',\n      ACTION_DOWN: 'touchstart',\n      ACTION_UP: 'touchend',\n      ACTION_MOVE: 'touchmove',\n      ACTION_OUT: 'touchcancel'\n    };\n  } else {\n    resolution = {\n      ACTION: 'click',\n      ACTION_DOWN: 'mousedown',\n      ACTION_UP: 'mouseup',\n      ACTION_MOVE: 'mousemove',\n      ACTION_OUT: 'mouseout'\n    };\n  }\n\n  return resolution;\n}\n\n/**\n * Globaly accesable, root level namespace for the library.\n * @namespace\n * @prop {object} EVENT - Namespace for noralized event name constants.\n * @prop {Basic} Basic - Base object type.\n * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n * @prop {object} util - Namespace for utility functions.\n */\npl = {\n  Basic, Point, Size, Queue,\n  game,\n  util,\n\n  /**\n   * @namespace\n   * @prop {string} ACTION - The device normalized `click` event name.\n   * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n   * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n   * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n   * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n   */\n  EVENT: resolveEventType()\n};\n\nexport default pl;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.js\n **/","/**\n * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @module game\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play.game.component\n * @requires play.game.manager\n * @requires util\n * @requires types/Events\n * @requires types/GlobalScope\n * @requires types/Entity\n * @requires types/Screen\n * @requires types/Game\n */\nimport component from 'play.game.component';\nimport manager from 'play.game.manager';\nimport util from 'util';\nimport Events from 'types/Events';\nimport { default as SCOPE } from 'types/GlobalScope';\nimport Entity from 'types/Entity';\nimport Screen from 'types/Screen';\nimport Game from 'types/Game';\nimport platform from 'platform';\n\nvar GAMES, CONFIG, READY_QUEUE;\n\n/**\n * Define a game scope for registration and/or initialization.\n * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction game(_name, _implementation) {\n  if (game.isDOMReady) {\n    initialize(_name, _implementation);\n  } else {\n    register(_name, _implementation);\n  }\n}\n\nfunction ready(_eventName) {\n  if (READY_QUEUE.length) return false;\n  game.trigger(_eventName || 'ready');\n}\n\n/**\n * Registers an implementation of a game scope for initialization.\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction register(_name, _implementation) {\n  if (!~GAMES.indexOf(_name)) {\n    GAMES.push({\n      id: _name,\n      implementation: _implementation\n    });\n  }\n}\n\n/**\n * Initializes an implementation of a game scope. (overloaded)\n * @function initialize\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\n\n/**\n * Initializes an implementation of a game scope.\n * @protected\n * @arg {array} _collection - The collection of game scope records for initialization.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction initialize(nameCollection, implementation) {\n  switch (typeof nameCollection) {\n  case 'string':\n    SCOPE[nameCollection] = Game\n        .extend(implementation)\n        .initialize('#' + nameCollection);\n    break;\n\n  case 'object':\n    nameCollection.forEach(function (_item) {\n      initialize(_item.id, _item.implementation);\n    });\n    break;\n  }\n}\n\n\n/** @protected */\nGAMES = [];\n/** @protected */\nCONFIG = {};\n/** @protected */\nREADY_QUEUE = [];\n\n/**\n * Interface for game level configuration.\n * @namespace game\n * @memberof module:play~pl\n * @mixes Events\n */\n(function () {\n\n  var audioContext;\n\n  this.component = component;\n  this.manager = manager;\n\n  util.mixin(game, Events);\n\n  this.on('platform-event', function (_event) {\n    console.log('play.game -', _event.name, _event.gameData);\n  });\n\n  /**\n   * Starts the dominos falling\n   * @function run\n   * @memberof module:play~pl.game\n   */\n  this.run = function () {\n    game.isDOMReady = true;\n    game.trigger('dom-ready');\n\n    game.component.loadAll(function () {\n      // console.log('** All component sources loaded.');\n      initialize(GAMES);\n\n      GAMES = null;\n    });\n\n    platform.emit(platform.EVENT_INIT);\n  };\n\n  this.report = function (_name) {\n    platform.emit(_name);\n\n    return this.report;\n  };\n\n  this.report.exit = function (_gameScope) {\n    platform.saveGameState(_gameScope.progress());\n    platform.emit(platform.EVENT_EXIT);\n\n    return this;\n  };\n\n  this.report.flip = function (_gameScope, data = {}) {\n    if (_gameScope.game) {\n      _gameScope = _gameScope.game;\n    }\n    platform.emit(platform.EVENT_FLIPPED, data);\n    platform.saveGameState(_gameScope.progress());\n\n    return this;\n  };\n\n\n  /**\n   * Getter/Setter for game level configuration.\n   * @function module:play~pl.game.config\n   * @arg {string} _key - The key to retrieve\n   * @returns {this}\n   */\n\n  /**\n   * Getter/Setter for game level configuration.\n   * @function config\n   * @memberof module:play~pl.game\n   * @arg {object} _mixin - Object to set properties on configuration.\n   * @returns {this}\n   */\n  this.config = function (keyMixin) {\n    switch (typeof keyMixin) {\n    case 'string': return util.resolvePath(CONFIG, keyMixin);\n    case 'object':\n      if (keyMixin) util.mixin(CONFIG, keyMixin);\n    }\n\n    return this;\n  };\n\n  /**\n   * @function provideEntityType\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.provideEntityType = function () {\n    return Entity;\n  };\n\n  /**\n   * @function provideScreenType\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.provideScreenType = function () {\n    return Screen;\n  };\n\n  /**\n   * Augments the global scope.\n   * @function scope\n   * @arg {function|object} _mixin - Object or constructor to define members.\n   * @returns {this}\n   *\n   * @memberof module:play~pl.game\n   */\n  this.scope = function (_mixin) {\n    if (typeof _mixin === 'function') {\n      _mixin.call(SCOPE);\n    }\n\n    else if (_mixin) {\n      SCOPE.mixin(_mixin);\n    }\n\n    return this;\n  };\n\n  /**\n   * @function queue\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.queue = function (_item) {\n    if (!~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\n    return this;\n  };\n\n  this.queue.complete = function (_item, _eventName) {\n    var index;\n\n    index = READY_QUEUE.indexOf(_item);\n    READY_QUEUE.splice(index, 1);\n\n    ready(_eventName);\n\n    return this;\n  };\n\n  /**\n   * Accessor for the detected features supported by the browser.\n   *\n   * *Supported Feature Detectors*\n   * - touch\n   *\n   * @function feature;\n   * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n   * @returns {boolean} The support status for the specified feature.\n   */\n  this.feature = (function () {\n    var detect = {\n      touch: function () {\n        return window.hasOwnProperty('ontouchend');\n      }\n    };\n\n    return function (_name) {\n      var tester = detect[_name];\n      if (!tester && console) console.warn('No feature detection for \"'+_name+'\".');\n      return tester && tester();\n    };\n  }());\n\n  this.getAudioContext = function () {\n    if (!audioContext) {\n      audioContext = new (window.AudioContext || window.webkitAudioContext);\n      window.onfocus = function () {\n        audioContext.resume();\n      };\n      window.onblur = function () {\n        audioContext.suspend();\n      };\n    }\n    return audioContext;\n  };\n\n  this.enableAudioContext = function () {\n    var ctx, silence;\n\n    ctx = this.getAudioContext();\n    silence = ctx.createBufferSource();\n\n    silence.buffer = ctx.createBuffer(2, 1, 44100);\n    silence.connect(ctx.destination);\n    silence.start();\n    silence.disconnect();\n\n    return silence;\n  };\n\n}).call(game);\n\nexport default game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.js\n **/","/**\n * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play~pl.util\n * @requires types/Events\n */\nimport util from 'util';\nimport Events from 'types/Events';\n\n/**\n * Collection of component behavior records\n * @const\n */\nvar COMPONENTS;\n\n/**\n * Registers a component behavior.\n * @arg {string} _name - The name for the component.\n * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n * @returns {@link module:play~pl.game}\n */\nfunction component(_name, _implementation) {\n  if (!component.get(_name)) {\n    COMPONENTS.push({\n      name: _name,\n      implementation: _implementation,\n      config: {}\n    });\n  }\n\n  return this;\n}\n\nCOMPONENTS = [];\n\n/**\n * Methods to manage and load component behavior scripts.\n * @namespace component\n * @memberof module:play~pl.game\n * @mixes Events\n */\n(function () {\n\n  util.mixin(this, Events);\n\n  /**\n   * Given a name; provides the component record. `{name, implementation}`\n   * @memberof module:play~pl.game.component\n   * @arg {string} _name - The name of the component.\n   * @returns {object} The record.\n   */\n  this.get = function (_name) {\n    var i, record;\n\n    for (i = 0; record = COMPONENTS[i]; i += 1) {\n      if (record.name === _name) return record;\n    }\n\n    return null;\n  };\n\n  /**\n   * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n   * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n   * @memberof module:play~pl.game.component\n   * @arg {string} _name - The name of the component.\n   * @arg {function} _callback - Callback for load success.\n   * @todo Implement Promises.\n   * @returns `this`\n   */\n  this.load = function (_name, _callback) {\n    var path;\n\n    if (component.get(_name)) {\n      if (_callback) _callback.call(component, _name);\n      return null;\n    }\n\n    path = pl.game.config('componentDirectory') + _name + '/behavior.js';\n\n    $.getScript(path, function () {\n      if (_callback) _callback.call(component, _name);\n      component.trigger('loaded', [_name]);\n    });\n\n    return this;\n  };\n\n  /**\n   * Loads all the component scripts for HTML elements with `pl-component` attributes.\n   * @memberof module:play~pl.game.component\n   * @arg {function} _callback - Callback for load success.\n   * @todo Implement Promises.\n   * @returns `this`\n   */\n  this.loadAll = function (_callback) {\n    var $components, queue;\n\n    $components = $('[pl-component]');\n    queue = [];\n\n    $components.each(function (_index) {\n      var name;\n\n      name = $(this).attr('pl-component');\n\n      if (~queue.indexOf(name)) return;\n\n      queue.push(name);\n    });\n\n    queue.slice(0).forEach(function (_name) {\n      component.load(_name, function () {\n        var index;\n\n        index = queue.indexOf(_name);\n        queue.splice(index, 1);\n\n        if (!queue.length && _callback) _callback.apply(component, arguments);\n      });\n    });\n\n    return this;\n  };\n\n  // Maybe?\n  // this.config = function () {};\n\n}).call(component);\n\nexport default component;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.component.js\n **/","/**\n*  Events\n*  @desc Contains methods for managing and dispatching events from objects.\n*  @proto Basic\n*/\n\nimport Basic from 'types/Basic';\n\nvar Events = Basic.extend(function () {\n  var i, method, methods;\n  /**\n  *  @desc Creates a function with a proxy to the jQuery method.\n  *  @param _name (String) The name of the method being proxied.\n  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n  *  @private\n  */\n  function createProxyFunction(_name) {\n    return function () {\n      var $jq = $();\n      // We must wrap our object in jQuery. If 'typeof this' is a function then we need\n      // to add it in this manner, otherwise jQuery treats it like a ready callback.\n      $jq.push(this);\n\n      return $.fn[_name].apply($jq, arguments);\n    };\n  }\n\n  methods = ['on', 'off', 'trigger'];\n\n  this.baseType = 'TYPE_EVENTS';\n\n  for (i = 0; method = methods[i]; i += 1) {\n    this[method] = createProxyFunction(method);\n  }\n});\n\nexport default Events;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Events.js\n **/","import draggable from 'play.game.manager.draggable';\n\nexport { draggable };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.js\n **/","import util from 'util';\nimport Collection from 'types/Collection';\nimport { Point } from 'types/Dimensions';\n\nconst COLLECTION_DRAGABLES = Collection.create(); //eslint-ignore-line\n\nvar draggableStyleSheet;\n\nfunction boot() {\n  createHelperStyleSheet();\n  attachEvents();\n}\n\nfunction attachEvents() {\n  var state, E;\n\n  E = pl.EVENT;\n\n  // Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n  if (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\n  $(document)\n    .on(E.ACTION_DOWN, function (_event) {\n      var $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\n      $draggable = $(_event.target).closest('[pl-draggable]');\n\n      if ($draggable.length) {\n        scope = $draggable.scope();\n        cursor = resolveEventPoint(_event, 1 / scope.game.zoom);\n        mode = $draggable.pl('draggable');\n        game = {\n          position: scope.game.absolutePosition(),\n          scale: scope.game.transformScale().x\n        };\n        point = $draggable.absolutePosition().dec(game.position);\n        transform = $draggable.transform();\n        helperID = createID();\n        state = {\n          mode: mode,\n          $draggable: $draggable,\n          scope: scope,\n          $helper: null,\n\n          start: {\n            cursor: cursor,\n            point: point,\n            transform: transform\n          },\n\n          progress: {\n            distance: null,\n            point: null,\n            transform: null\n          }\n        };\n\n        // FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n        // so we need to account for the game transform scale.\n        //\n        if (game.scale !== 1) point = point.scale(1 / game.scale);\n\n        draggableStyleSheet.html( provideSource( helperID, createDraggableRule($draggable)));\n\n        switch (mode) {\n        case 'clone':\n          state.$helper = $draggable.clone();\n          state.$helper\n              .id(helperID)\n              .pl('draggable', null) // helpers are not to be captured as draggable\n              .addClass('draggable-helper')\n              .appendTo(document.body)\n              .absolutePosition(point);\n          break;\n\n        case 'pluck':\n          $draggable.addClass('PLUCKED');\n\n          state.$helper = $draggable.clone();\n          state.$helper\n              .id(helperID)\n              .pl('draggable', null) // helpers are not to be captured as draggable\n              .addClass('draggable-helper')\n              .appendTo(document.body)\n              .absolutePosition(point);\n          break;\n\n        default:\n          state.$helper = $draggable;\n          break;\n        }\n\n        state.$helper.removeClass('DRAG-ENDED')\n          .addClass('DRAG-START');\n\n        dragStartEvent = $.Event('drag-start', {\n          state: state,\n          targetScope: scope\n        });\n\n        scope.trigger(dragStartEvent);\n      }\n    })\n\n    .on(E.ACTION_MOVE, function (_event) {\n      var cursor, $draggable, distance, point, transform, dragMoveEvent;\n\n      if (state) {\n        cursor = resolveEventPoint(_event, 1 / state.scope.game.zoom);\n        distance = state.start.cursor.distance(cursor);\n        point = Point.create();\n        transform = null;\n\n        if (state.start.transform !== 'none') {\n          transform = state.start.transform.clone();\n          transform.translate(distance.width, distance.height);\n          point.set(transform.applyToPoint(0, 0));\n        } else {\n          point = distance.to('point');\n        }\n\n        if (state.$helper.hasClass('DRAG-START')) {\n          state.$helper\n            .removeClass('DRAG-START')\n            .addClass('DRAGGING');\n        }\n\n        dragMoveEvent = $.Event('drag-move', {\n          state: state,\n          targetScope: state.scope\n        });\n\n        state.progress.distance = distance;\n        state.progress.point = state.start.point.inc(point);\n        state.progress.transform = transform;\n\n        state.scope.translate(state.$helper, point);\n        state.scope.trigger(dragMoveEvent);\n      }\n    })\n\n    .on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n      var $draggable, dragEndEvent;\n\n      if (state) {\n        // Do not end dragging if we dont mouse out of the document.\n        if (_event.type === 'mouseout' && !~[null, document.documentElement].indexOf(_event.toElement)) {\n          return;\n        }\n\n        $draggable = state.$draggable;\n\n        if (state.$helper.hasClass('draggable-helper')) {\n          state.$helper.on('transitionend', function () {\n            $draggable.removeClass('PLUCKED');\n            $(this).remove();\n          });\n        }\n\n        state.$helper\n          .removeClass('DRAG-START DRAGGING')\n          .addClass('DRAG-ENDED');\n\n        dragEndEvent = $.Event('drag-end', {\n          state: state,\n          targetScope: state.scope\n        });\n\n        state.scope.trigger(dragEndEvent);\n\n        state = null;\n      }\n    });\n}\n\nattachEvents.disableTouchScroll = function () {\n  document.addEventListener('touchmove', function (_event) {\n    _event.preventDefault();\n  }, false);\n};\n\nfunction resolveEventPoint(_event, _scale) {\n  var scale = _scale || 1;\n\n  if (_event.originalEvent && _event.originalEvent.changedTouches) {\n    /**\n     * For now, interactions should use the last touch if multiple fingers are captured.\n     * @todo Maybe invoke action for each touch.\n     */\n    _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n  }\n\n  return Point.create().set(new function () {\n    if (_event.touch) {\n      this.x = _event.touch.clientX * scale;\n      this.y = _event.touch.clientY * scale;\n    } else {\n      this.x = _event.clientX * scale;\n      this.y = _event.clientY * scale;\n    }\n  });\n}\n\nfunction createHelperStyleSheet() {\n  draggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n}\n\nfunction createDraggableRule(_$draggable) {\n  var i, style, blacklist, rule, prop;\n\n  style = window.getComputedStyle(_$draggable[0]);\n  rule = {};\n  blacklist = [\n    'zIndex',\n    'opacity',\n    'cursor',\n    'transition',\n    'transitionDelay',\n    'transitionDuration',\n    'transitionProperty',\n    'transitionTimingFunction'\n  ];\n\n  for (i = 0; i < style.length; i += 1) {\n    prop = util.transformId(style[i], true);\n    if (~blacklist.indexOf(prop)) continue;\n    if (prop.indexOf('Webkit') === 0) prop = prop.slice(0, 1).toLowerCase() + prop.slice(1);\n    if (style[prop]) rule[prop] = style[prop];\n  }\n\n  return rule;\n}\n\nfunction provideSource(_id, _rule) {\n  var source, prop, value;\n\n  source = '#' + _id + '.draggable-helper {';\n\n  for (prop in _rule) {\n    if (!_rule.hasOwnProperty(prop)) continue;\n    value = _rule[prop];\n    source += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase() + ': ' + value + ';';\n  }\n\n  source += '}';\n\n  return source;\n}\n\nfunction createID() {\n  return 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n    if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n    return Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n  });\n}\n\nvar draggableManager = {\n\n};\n\n$(boot);\n\nexport default draggableManager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.draggable.js\n **/","/**\n * Collections are iterables which hold a consistent interface throughout its indexes.\n *\n * @module\n * @requires module:types/BasicArray\n */\nimport BasicArray from 'types/BasicArray';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n * @classdesc Iterable holding record objects of the same interface.\n * @class\n * @extends module:types/BasicArray~BasicArray\n */\nvar Collection = BasicArray.extend(function () {\n  /**\n   * Gets the record object which has `_member` as a member.\n   * @instance\n   * @protected\n   * @memberof module:types/Collection~Collection\n   * @arg {*} _member - object reference to search for.\n   * @arg {string} _key - the target key to test the `_member` against.\n   * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n   * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n   */\n  function getRecord(_member, _key, _shouldCollect) {\n    var i, record, member, result;\n\n    result = [];\n\n    for (i = 0; record = this[i]; i += 1) {\n      if (_key !== undefined) {\n        if (record[_key] === _member) {\n          if (_shouldCollect) {\n            result.push(record);\n          }\n\n          else {\n            return record;\n          }\n        }\n      }\n\n      else if (record instanceof Array) {\n        if (~record.indexOf(_member)) {\n          if (_shouldCollect) {\n            result.push(record);\n          }\n\n          else {\n            return record;\n          }\n        }\n      }\n\n      else {\n        for (member in record) {\n          if (!record.hasOwnProperty(member)) continue;\n          if (record[member] === _member) {\n            if (_shouldCollect) {\n              result.push(record);\n            }\n\n            else {\n              return record;\n            }\n          }\n        }\n      }\n    }\n\n    return result.length ? result : null;\n  }\n\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @memberof module:types/Collection~Collection\n   * @readonly\n   * @default\n   */\n  this.baseType = 'TYPE_COLLECTION';\n\n  this.add = function (_record) {\n    if (~this.indexOf(_record)) return false;\n    this.push(_record);\n\n    return this;\n  };\n\n  this.remove = function (_record) {\n    var index;\n\n    index = this.indexOf(_record);\n    if (~index) this.splice(index, 1);\n\n    return this;\n  };\n\n  this.has = function (_record) {\n    return !!~this.indexOf(_record);\n  };\n\n  this.get = function (_member, _key) {\n    return getRecord.call(this, _member, _key);\n  };\n\n  this.filter = function (_member, _key) {\n    return getRecord.call(this, _member, _key, true);\n  };\n\n});\n\nexport default Collection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Collection.js\n **/","/**\n*  GlobalScope\n*/\n\nimport { Scope } from 'types/Scope';\n\nvar GlobalScope = Scope.extend(function () {\n\n  this.baseType = 'TYPE_GLOBAL_SCOPE';\n\n});\n\nexport default GlobalScope;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/GlobalScope.js\n **/","/**\n * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n * This enables properties and methods to be in context of the DOM node and its descendants.\n *\n * @module\n * @requires types/jQProxy\n * @requires types/Basic\n * @requires types/Queue\n * @requires play.game\n * @requires util\n * @requires evalAction\n *\n * @exports createEntity\n */\nimport jQProxy from 'types/jQProxy';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point } from 'types/Dimensions';\nimport game from 'play.game';\nimport util from 'util';\nimport evalAction from 'evalAction';\nimport { AudioManager } from 'types/AudioManager';\n\n/**\n * Creates a new Enitiy instance with a context node and implementation.\n * The instance is prototyped from the parent scope.\n *\n * @memberof module:types/Scope~Scope#createEntity\n * @protected\n * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n * @returns {module:types/Scope~Scope}\n */\nfunction createEntity(_$node, _implementation) {\n  var component, prototype, componentRecord, instance;\n\n  component = _$node.attr('pl-component');\n  prototype = this;\n\n  if (component) {\n    componentRecord = game.component.get(component);\n\n    if (componentRecord) {\n      // If a scope is being defined as an extention of a component before the component scope\n      // has been allocated, we construct the component first then pass it as the proto.\n      // But we need to make sure we are not allocating the component it self.\n      if (componentRecord.implementation !== _implementation) {\n        prototype = this.extend(componentRecord.implementation);\n      }\n    }\n\n    else {\n      throw new Error('No implementation record for the ' + component + 'component.');\n    }\n  }\n\n  instance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\n  return instance.initialize(_$node, component);\n}\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n * @class\n * @extends module:types/jQProxy~jQProxy\n */\nvar Scope = jQProxy.extend(function () {\n\n  /**\n   * Collection of records pairing a node with its action.\n   * @memberof module:types/Scope~Scope\n   * @static\n   * @protected\n   * @todo Convert to types/Collection\n   */\n  var Actionables;\n\n  function attachActionHandler() {\n    this.on(pl.EVENT.ACTION, function (_event) {\n      var target, record;\n\n      target = $(_event.target).closest('[pl-action]')[0];\n\n      if (_event.originalEvent && _event.originalEvent.changedTouches) {\n        /**\n         * For now, interactions should use the last touch if multiple fingers are captured.\n         * @todo Maybe invoke action for each touch.\n         */\n        _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n      }\n\n      _event.cursor = Point.create().set(new function () {\n        if (_event.touch) {\n          this.x = _event.touch.clientX;\n          this.y = _event.touch.clientY;\n        } else {\n          this.x = _event.clientX;\n          this.y = _event.clientY;\n        }\n      });\n\n      if (target) {\n        record = this.actionables.item(target);\n\n        if (record) {\n          _event.targetScope = this;\n          this.event = _event;\n          evalAction(record.action, this);\n          this.event = null;\n        }\n      }\n    });\n  }\n\n  function getRecordBy(_key, _member, _collection) {\n    var i, record;\n\n    if (_collection) {\n      for (i = 0; record = _collection[i]; i += 1) {\n        if (record[_key] === _member) return record;\n      }\n    }\n\n    return null;\n  }\n\n  function removeRecord(_record, _collection) {\n    var index;\n\n    index = _collection.indexOf(_record);\n    if (~index) _collection.splice(index, 1);\n  }\n\n  function captureDropables(_scope) {\n    var collection;\n\n    collection = [];\n\n    _scope.find('> [pl-pluck]').each(function () {\n      var name;\n\n      name = $(this).attr('pl-pluck');\n\n      collection.push(this);\n      collection[name] = this;\n    });\n\n    return collection;\n  }\n\n  function pluckAndDrop(_dropables, _template) {\n    $(_template).find('[pl-drop]').each(function () {\n      var $node, name, dropable;\n\n      $node = $(this);\n      name = $node.attr('pl-drop');\n      dropable = _dropables[name];\n\n      if (dropable) {\n        $node.replaceWith(dropable.children);\n      }\n    });\n  }\n\n  // Protected\n  function loadComponentAssets(_name, _callback) {\n    var scope, path, totalRequests, transcludeMode, dropables;\n\n    function ready() {\n      ready.status += 1;\n\n      if (ready.status === totalRequests) {\n        if (_callback) {\n          _callback.call(scope, _name);\n        }\n      }\n    }\n\n    totalRequests = 0;\n    scope = this;\n    path = game.config('componentDirectory') + _name + '/';\n    dropables = captureDropables(this);\n    transcludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n    ready.status = 0;\n\n    if (!this.children().length || transcludeMode) {\n      totalRequests += 1;\n      $('<div>').load(path + 'template.html', function () {\n        var memory;\n\n        memory = [];\n\n        switch (transcludeMode) {\n        case scope.TRANSCLUDE_APPEND:\n          scope.append(this.children);\n          break;\n\n        case scope.TRANSCLUDE_PREPEND:\n          scope.prepend(this.children);\n          break;\n\n        case scope.TRANSCLUDE_PLUCK:\n          pluckAndDrop(dropables, this);\n          scope.empty().append(this.children);\n          break;\n\n        case scope.TRANSCLUDE_REPLACE:\n          scope.empty().append(this.children);\n          break;\n\n        default:\n          if (transcludeMode) {\n              pluckAndDrop(new (function () {\n                this[transcludeMode] = scope.node();\n              }), this);\n              scope.empty().append(this.children);\n            }\n\n            else {\n              scope.empty().append(this.children);\n            }\n\n        }\n\n        scope.findOwn('[pl-component]').each(function () {\n          var name;\n\n          name = $(this).attr('pl-component');\n\n          if (~memory.indexOf(name)) return;\n\n          memory.push(name);\n\n          totalRequests += 1;\n\n          game.component.load(name, function () {\n            ready();\n          });\n        });\n        ready();\n      });\n    }\n\n    if (!$('style[pl-for-component=\"' + _name + '\"]').length && game.config('shouldLoadComponentStyles') !== false) {\n      totalRequests += 1;\n      $('<style type=\"text/css\" pl-for-component=\"' + _name + '\">')\n        .load(path + 'style.css', ready)\n        .appendTo(document.body);\n    }\n\n    if (!totalRequests) _callback && _callback.call(this, _name);\n\n    return this;\n  }\n\n  function captureProperties() {\n    var i, attr, name, collection;\n\n    collection = (function () {\n\n      this.has = function (_name) {\n        return !!~this.indexOf(_name);\n      };\n\n      return this;\n\n    }).call([]);\n\n    for (i = 0; attr = this.$els[0].attributes[i]; i += 1) {\n      // I explicitly want it to be at the beginning.\n      if (attr.name.indexOf('pl-') === 0) {\n        name = attr.name.slice(3);\n        collection[util.transformId(name, true)] = attr.value;\n\n        collection.push(name);\n      }\n    }\n\n    if (collection.length) this.properties = collection;\n\n    return this;\n  }\n\n  function initializeEntities() {\n    if (!this.hasOwnProperty('entities')) return this;\n\n    this.entities.forEach(this.bind(function (_record, _index) {\n      var $nodes, query, index;\n\n      $nodes = this.findOwn(_record.selector);\n      query = ['#' + _record.selector, '[pl-id=' + _record.selector + ']', '[pl-component=' + _record.selector + ']', '[pl-' + _record.selector + ']'];\n      index = 0;\n\n      while (!$nodes.length) {\n        if (index === query.length) {\n          throw new Error('Unable to locate entity with selector', _record.selector);\n        }\n        $nodes = this.findOwn(query[index]);\n        index += 1;\n      }\n\n      $nodes.each(this.bind(function (_index, _node) {\n        var $node, instance, id;\n\n        $node = $(_node);\n\n        if (!Scope.isPrototypeOf(_record)) {\n          instance = createEntity.call(this, $node, _record.implementation);\n          if (!instance.isReady) this.assetQueue.add(instance);\n        } else {\n          instance = _record;\n        }\n\n        id = util.transformId(instance.id(), true);\n        if (id) util.assignRef(this, id, instance);\n      }));\n    }));\n\n    return this;\n  }\n\n  function handleProperties() {\n    var scope, property, handler;\n\n    scope = this;\n\n    if (this.hasOwnProperty('properties')) {\n      this.properties.forEach(function (_name) {\n        handler = scope.propertyHandlers[_name];\n        if (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n      });\n    }\n\n    if (this.propertyHandlers) {\n      for (property in this.propertyHandlers) {\n        // Only exclide members on the base type.\n        if (Basic.hasOwnProperty(property)) continue;\n\n        handler = this.propertyHandlers[property];\n\n        this.findOwn('[pl-' + property + ']').each(function () {\n          var attr;\n\n          if (scope === $(this).scope()) {\n            attr = this.attributes.getNamedItem('pl-' + property);\n\n            if (handler) handler.call(scope, this, property, attr.value);\n          }\n        });\n      }\n    }\n\n    return this;\n  }\n\n  function invokeLocal(_name) {\n    var args, owner;\n\n    args = [].slice.call(arguments, 1);\n\n    if (this.isMemberSafe(_name)) {\n      return this[_name].apply(this, arguments);\n    }\n  }\n\n  function init() {\n    var willInitEvent, initEvent;\n\n    initEvent = $.Event('initialize', { targetScope: this });\n    willInitEvent = $.Event('will-initialize', { targetScope: this });\n\n    invokeLocal.call(this, 'willInit');\n    this.trigger(willInitEvent);\n\n    this.attachEvents();\n\n    initializeEntities.call(this);\n    handleProperties.call(this);\n\n    this.watchAssets();\n    this.captureAudioAssets();\n    this.captureReferences();\n\n    this.__init();\n    invokeLocal.call(this, 'init');\n\n    this.trigger(initEvent);\n\n    if (!this.isReady) this.assetQueue.ready();\n\n    return this;\n  }\n\n  function ready() {\n    var readyEvent, entities;\n\n    readyEvent = $.Event('ready', { targetScope: this });\n    entities = this.findOwn('.pl-scope').scope();\n\n    if (entities) {\n      if (entities.length > 0) {\n        this.entities = entities;\n      } else {\n        this.entities = [entities];\n      }\n    }\n\n    /**\n     * Sort audio into DOM order.\n     * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n     */\n    if (this.hasOwnProperty('audio')) {\n      (this.game || this).media.addShadow(this.audio);\n      this.audio.collections().forEach(function (_collection) {\n        var map = {\n          voiceOver: 'voice-over',\n          background: 'background',\n          sfx: 'sfx'\n        };\n\n        if (!_collection.length) return;\n\n        this.findOwn('audio.' + map[_collection.type]).each(function (_index, _node) {\n          var id, audio, collection, index;\n\n          id = $(_node).id();\n          audio = (_collection.find('#' + id) || [])[0];\n          index = _collection.indexOf(audio);\n\n          if (index !== _index) {\n            _collection[index] = _collection[_index];\n            _collection[_index] = audio;\n          }\n        });\n      }.bind(this));\n    }\n\n    this.isReady = true;\n    this.addClass('READY');\n\n    this.__ready();\n    invokeLocal.call(this, 'ready');\n\n    this.trigger(readyEvent);\n  }\n\n  Actionables = (function () {\n\n    util.mixin(this, Basic);\n\n    this.add = function (_node, _action) {\n      if (!this.has(_node)) {\n        this.push({\n          node: _node,\n          action: _action\n        });\n      }\n\n      return this;\n    };\n\n    this.remove = function (_node) {\n      var item, index;\n\n      item = this.item(_node);\n      index = this.indexOf(item);\n      if (~index) this.splice(index, 1);\n\n      return this;\n    };\n\n    this.item = function (_node) {\n      var i, item;\n\n      for (i = 0; item = this[i]; i += 1) {\n        if (item.node === _node) return item;\n      }\n    };\n\n    this.has = function (_node) {\n      return !!this.item(_node);\n    };\n\n    return this;\n\n  }).call([]);\n\n  this.TRANSCLUDE_REPLACE = 'replace';\n  this.TRANSCLUDE_PREPEND = 'prepend';\n  this.TRANSCLUDE_APPEND = 'append';\n  this.TRANSCLUDE_PLUCK = 'pluck';\n\n  this.baseType = 'TYPE_SCOPE';\n  this.actionables = null;\n  this.isReady = null;\n  this.isComponent = false;\n  this.entities = null;\n  this.audio = null;\n  this.properties = null;\n  this.propertyHandlers = null;\n  this.assetQueue = null;\n  this.event = null;\n  this.currentMedia = {};\n\n  this.initialize = function (_node_selector, _componentName) {\n    var scope;\n\n    scope = this;\n\n    this.isReady = false;\n    this.isComponent = !!_componentName;\n    this.event = null;\n    this.assetQueue = Queue.create();\n    this.$els = (_node_selector.jquery) ? _node_selector : $(_node_selector);\n\n    if (!this.$els.length) {\n      throw new ReferenceError('Unable to locate the element with selector ' + this.$els.selector + '.');\n    }\n\n    this.addClass('pl-scope ' + (_componentName ? _componentName + '-component' : ''));\n    this.data('pl-scope', this);\n    this.data('pl-isComponent', !!_componentName);\n\n    captureProperties.call(this);\n\n    if (_componentName) {\n      loadComponentAssets.call(this, _componentName, function () {\n        init.call(this);\n      });\n    }\n\n    else {\n      init.call(this);\n    }\n\n    return this;\n  };\n\n  // only for use in base types\n  this.__init = function () { return this; };\n  this.__ready = function () { return this; };\n\n  this.willInit = function () { return this; };\n  this.init = function () { return this; };\n  this.ready = function () { return this; };\n\n  this.watchAssets = function (_nodes) {\n    var createHandler, watch;\n\n    createHandler = this.bind(function (_node) {\n      return (function () {\n        var loadedEvent = $.Event('loaded', { targetScope: this });\n\n        this.assetQueue.ready(_node.src);\n        this.trigger(loadedEvent, [_node]);\n\n        _node.onload = null;\n      }).bind(this);\n    });\n\n    watch = this.bind(function (_index, _node) {\n      var node = typeof _index === 'number' ? _node : _index;\n\n      if (node.nodeName !== 'IMG' || node.complete) return;\n      if (this.assetQueue.add(node.src)) {\n        node.onload = createHandler(node);\n        node.onerror = function () {\n          console.error('Image failed to load', node.src);\n        };\n      }\n    });\n\n    if (_nodes) {\n      _nodes.forEach(watch);\n      return this;\n    }\n\n    this.each(watch);\n    this.findOwn('img').each(watch);\n\n    return this;\n  };\n\n  this.attachEvents = function () {\n\n    this.proto();\n\n    this.assetQueue.on('complete', this.bind(function () {\n      this.assetQueue.off();\n      ready.call(this);\n    }));\n\n    this.on('ready', function (_event) {\n      if (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n        this.assetQueue.ready(_event.targetScope);\n      }\n\n      if (!this.assetQueue.length && this.isReady) this.off('ready');\n    });\n\n    return this;\n  };\n\n  this.captureReferences = function () {\n    this.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n      var $node, id;\n\n      if (_node.nodeName === 'AUDIO') return;\n\n      $node = $(_node);\n      id = $node.attr('id') || $node.attr('pl-id');\n\n      if (!this[id]) {\n        util.assignRef(this, id, $node.data('pl-scope') || $node);\n      }\n    }));\n  };\n\n  this.captureAudioAssets = function () {\n    var deQ, $audio;\n\n    if (!($audio = this.findOwn('audio')).length) return false;\n\n    deQ = function (_item) {\n      [this, this.screen].forEach(function (_scope) {\n        if (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n          _scope.requiredQueue.ready(_item);\n        }\n      });\n    }.bind(this);\n\n    this.audio = AudioManager.create(this.id());\n\n    $audio.each(function (_index, _node) {\n      this.assetQueue.add(_node.src);\n      this.audio.watch(_node).then(function (_audio) {\n        var loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\n        if ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\n        if (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\n        this.trigger(loadedEvent);\n      }.bind(this));\n    }.bind(this));\n\n    // proxy events\n    this.audio.on('play pause ended stopped', this.bind(function (_event) {\n      var map = {\n        background: 'BACKGROUND',\n        voiceOver: 'VOICE-OVER',\n        sfx: 'SFX'\n      };\n\n      switch (_event.type) {\n      case 'play':\n        [this, this.screen].forEach(function (_scope, _index, _set) {\n            if (_index === 1 && _scope === _set[0]) return;\n            if (_scope.$els) {\n              _scope.addClass('PLAYING '+map[_event.target.type]);\n              _scope.currentMedia[map[_event.target.type]] = _event.target;\n            }\n          });\n\n        $(_event.targetNode).addClass('PLAYING');\n        break;\n\n      case 'pause':\n      case 'stopped':\n      case 'ended':\n        [this, this.screen].forEach(function (_scope, _index, _set) {\n            var state;\n\n            if (_index === 1 && _scope === _set[0]) return;\n\n            if (_scope.$els) {\n              _scope.removeClass(map[_event.target.type]);\n              state = _scope.attr('class');\n              if (!(/BACKGROUND|VOICE-OVER|SFX/).test(state)) _scope.removeClass('PLAYING');\n              if(_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n            }\n          });\n\n        $(_event.targetNode).removeClass('PLAYING');\n        if (_event.type === 'ended') deQ(_event.target);\n        break;\n      }\n\n      var audioEvent = $.Event('audio-' + _event.type, {\n        target: _event.target,\n        targetSource: _event.targetSource,\n        targetNode: _event.targetNode,\n        targetScope: this\n      });\n\n      this.trigger(audioEvent);\n    }));\n\n    return this;\n  };\n\n  this.handleProperty = function (_implementation) {\n    if (this.propertyHandlers) {\n      if (this.hasOwnProperty('propertyHandlers')) {\n        switch (typeof _implementation) {\n        case 'function':\n          _implementation.call(this.propertyHandlers);\n          break;\n\n        case 'object':\n          this.propertyHandlers.mixin(_implementation);\n          break;\n        }\n      }\n\n      else {\n        this.propertyHandlers = this.propertyHandlers.extend(_implementation);\n      }\n    }\n\n    else {\n      this.propertyHandlers = Basic.extend(_implementation);\n    }\n\n    return this;\n  };\n\n  this.entity = function (_selector, _implementation) {\n    var Entity, prototype, id;\n\n    Entity = game.provideEntityType();\n\n    if (!this.hasOwnProperty('entities')) this.entities = [];\n\n    if (this.hasOwnProperty('$els')) {\n      throw new Error('Wait this hasn\\'t been tested.');\n      prototype = (Entity.isPrototypeOf(this)) ? this : Entity;\n      instance = prototype.extend(_implementation).initialize(this.find(_selector));\n      id = util.transformId(instance.id());\n\n      // this.entities.push(instance);\n      if (id) this[id] = instance;\n    }\n\n    else {\n      this.entities.push({\n        selector: _selector,\n        implementation: _implementation\n      });\n    }\n\n    return this;\n  };\n\n  this.has = function (_child) {\n    var child;\n\n    child = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\n    return !!this.$els.has(child).length;\n  };\n\n  this.toString = function () {\n    var type;\n\n    type = this.baseType.replace('TYPE_', '');\n    type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\n    return ['[', this.id() || this.address(), ' ', type, ']'].join('');\n  };\n\n  this.log = function () {\n    var args;\n\n    args = util.toArray(arguments);\n\n    console.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n    return this;\n  };\n\n  this.handleProperty(function () {\n\n    this.component = function (_node, _name, _value, _property) {\n      var $node, record, scope, id;\n\n      $node = $(_node);\n\n      if (!$node.data('pl-isComponent')) {\n        record = game.component.get(_value);\n\n        if (record) {\n          scope = createEntity.call(this, $node, record.implementation);\n          id = util.transformId(scope.id() || _value, true);\n          util.assignRef(this, id, scope);\n\n          if (!scope.isReady) this.assetQueue.add(scope);\n        }\n\n        else {\n          throw new Error('Ahh!');\n        }\n      }\n    };\n\n    this.action = function (_node, _name, _value) {\n      if (!this.hasOwnProperty('actionables')) {\n        this.actionables = Actionables.create();\n        attachActionHandler.call(this);\n      }\n\n      this.actionables.add(_node, _value);\n    };\n\n    this.required = function (_node, _name, _value) {\n      if (this.is(_node)) {\n        this.screen.require(this);\n      }\n    };\n\n    this.require = function (_node, _name, _value) {\n      var query, $node;\n\n      // if the node with the attribute is the node for this scope\n      if (this.is(_node)) {\n        query = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n        $node = this.find(query);\n\n        $node.on('ready', this.bind(function (_event) {\n          if ($node.is(_event.target)) {\n            this.require(_event.targetScope);\n          }\n        }));\n      }\n    };\n\n  });\n\n});\n\nexport default { Scope, createEntity };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Scope.js\n **/","/**\n*  jQProxy\n*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n*  @proto Basic\n*\n*  NOTE: Custom events may trigger on scopes\n*  that also targets the same elments. Testing needed.\n*/\n\nimport util from 'util';\nimport Basic from 'types/Basic';\n\nvar jQProxy = Basic.extend(function () {\n  var method, exclude;\n\n  /**\n  *  @desc Creates a function with a proxy to the jQuery method.\n  *  @param _name (String) The name of the method being proxied.\n  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n  *  @private\n  */\n  function createProxyFunction(_name) {\n    return function () {\n      var response;\n\n      // This makes sure your not calling any jQuery methods before initialization.\n      if (!this.hasOwnProperty('$els')) {\n        if (_name === 'on') {\n          registerHandler.call(this, arguments);\n        }\n\n        else {\n          throw new ReferenceError('Unable to invoke ' + _name + ' because the scope is not initialized.');\n        }\n        return;\n      }\n\n      response = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\n      if (response === this.$els || (response && response.jquery && response.is(this.$els))) {\n        return this;\n      }\n\n      return response;\n    };\n  }\n\n  function resolveEventHandler(_scope, _method, _args) {\n    var i, arg, args;\n\n    args = [];\n\n    if (~(['on', 'load']).indexOf(_method)) {\n      for (i = 0; arg = _args[i]; i += 1) {\n        if (typeof arg === 'function') {\n          args.push((function (_handler) {\n            return function () { return _handler.apply(_scope, arguments); };\n          }(arg)));\n        }\n\n        else {\n          args.push(arg);\n        }\n      }\n\n      return args;\n    }\n\n    return _args;\n  }\n\n  function registerHandler(_definition) {\n    if (!this.hasOwnProperty('eventRegistry')) {\n      if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n        this.eventRegistry = this.eventRegistry.slice(0);\n      }\n\n      else {\n        this.eventRegistry = [];\n      }\n    }\n\n    this.eventRegistry.push(_definition);\n\n    return true;\n  }\n\n  // We don't want jQuery methods overridding our base type's methods.\n  exclude = ['constructor'].concat(Object.keys(Basic));\n\n  this.baseType = 'TYPE_JQPROXY';\n  this.$els = null;\n  this.eventRegistry = null;\n\n  for (method in $.fn) {\n    if (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n    this[method] = createProxyFunction(method);\n  }\n\n  this.node = function () {\n    return this.$els[0];\n  };\n\n  this.attachEvents = function () {\n    var self;\n\n    self = this;\n\n    if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n      this.eventRegistry.forEach(function (_definition) {\n        self.on.apply(self, _definition);\n      });\n    }\n  };\n\n  this.listen = function (_name, _isCapure_handler, _handler) {\n    var _isCapture, node, handler;\n\n    _isCapture = false;\n\n    // resolve arguments\n    (typeof _isCapure_handler === 'boolean') ?\n      _isCapture = _isCapure_handler :\n      _handler = _isCapure_handler;\n\n    _handler.cb = _handler.bind(this);\n\n    if (this.$els) {\n      node = this.$els[0];\n      if (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n    }\n\n    else {\n      return registerHandler([_name, _handler.cb, _isCapture]);\n    }\n\n    return false;\n  };\n\n  this.ignore = function (_name, _handler) {\n    var node = this.$els && this.$els[0];\n\n    if (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\n    return false;\n  };\n\n  // Wraps you function 'this' to the scope.\n  //\n  this.bind = function (_handler) {\n    var args;\n\n    args = [].map.call(arguments, function (m) { return m; }).slice(1);\n\n    return _handler.bind.apply(_handler, [this].concat(args));\n  };\n\n  this.findOwn = function (_selector) {\n    return this.find(_selector).filter(this.bind(function (_index, _node) {\n      var $node;\n\n      $node = $(_node);\n\n      if ($node.hasClass('pl-scope')) {\n        return $node.parent().scope() === this;\n      }\n\n      return $node.scope() === this;\n    }));\n  };\n\n  this.isMemberSafe = function (_name) {\n    var owner, elOwner, prototype;\n\n    if (this.hasOwnProperty(_name)) {\n      return true;\n    }\n\n    else {\n      prototype = Object.getPrototypeOf(this);\n      owner = util.getOwner(this, this[_name]);\n\n      if (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\n      if (prototype.$els) {\n        elOwner = util.getOwner(prototype, prototype.$els);\n\n        if (owner.object.isPrototypeOf(elOwner.object)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  this.is = function (_obj) {\n    if (!_obj) return false;\n    if (_obj.$els) return this.$els.is(_obj.$els);\n\n    return this.$els.is(_obj);\n  };\n});\n\nexport default jQProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/jQProxy.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/keys.js\n ** module id = 69\n ** module chunks = 0\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/keys.js\n ** module id = 70\n ** module chunks = 0\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.keys.js\n ** module id = 71\n ** module chunks = 0\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-sap.js\n ** module id = 72\n ** module chunks = 0\n **/","/**\n*  Queue\n*  @desc Contains...\n*  @proto Array, Events, Basic\n*/\n\nimport util from 'util';\nimport Collection from 'types/Collection';\nimport Events from 'types/Events';\n\nvar Queue = Collection.extend(function () {\n\n  this.baseType = 'TYPE_QUEUE';\n\n  this.ready = function (_record) {\n    if (_record != null) this.remove(_record);\n\n    if (!this.length) {\n      this.trigger('complete');\n    }\n\n    return this;\n  };\n\n  util.mixin(this, Events);\n\n  return this;\n\n});\n\nexport default Queue;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Queue.js\n **/","/**\n * @module evalAction\n */\n\n/**\n * Performs `eval()` on the value of an `action` attribute on an HTML element.\n * @arg {string} _source - JavaScript source code.\n * @arg {Scope} _scope - The context in which to run the source.\n * @returns {*} The result of the evaluated source.\n */\nfunction evalAction(_source, _scope) {\n  var error;\n\n  function target(_selector) {\n    if (_scope.event) {\n      return _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n    }\n  }\n\n  // expose members of the object as if they were local variables.\n  // NOTE: methods still retain their \"this\" binding to the object! :D\n  return eval('with (_scope) { try {' + _source + ';} catch (error) { console.error(\\'Error:\\', error.message, \\'evaluating action\\', _source, \\'in\\', _scope.id() || _scope.address()); } }');\n}\n\nexport default evalAction;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/evalAction.js\n **/","'use strict';\n/**\n * Contains classes for managing different media types.\n * Providing an API for referencing and control.\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n */\nimport type from 'types/type';\nimport util from 'util';\nimport Collection from 'types/Collection';\n\n// Object type definitions are using  `$` as the augmentation method for Types.\nvar EventTargetInterface,\n  InspectorInterface,\n  PlayableInterface,\n  LegislatorInterface,\n  StateInterface,\n  $$ = window.jQuery;\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n * Manages any playing media (Audio, Video).\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Manages any playing media (Audio, Video).\n * <style>\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n *\n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n */\nfunction MediaManager($, sup) {\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n  $(\n  'video',\n\n  function alloc(_id) {\n    sup(this, 'alloc', arguments);\n    this.video = Collection.create();\n    this.initialize(_id, 'media manager');\n  }\n);}\n\n/**\n * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n * - Background\n * - Voice Over\n * - SFX (Sound Effects)\n * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n * @class\n * @prop {type} member - Text.\n * @extends EventTargetInterface\n * @extends PlayableInterface\n * @extends InspectorInterface\n */\nfunction AudioManager($) {\n  var AUDIO_TYPES, BUFFER_CACHE;\n\n  /**\n   * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n   * @arg {HTMLAudioElement} _node - The loaded audio element.\n   * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n   */\n  function AudioBufferRecord(_node, _buffer) {\n    this.node = _node;\n    this.type = getAudioType(_node);\n    this.buffer = _buffer;\n  }\n  /**\n   * Provides the classification an audio element falls into.\n   * - Background (`background`)\n   * - Voice Over (`voiceOver`)\n   * - Sound Effects (`sfx`)\n   * @protected\n   * @arg {HTMLAudioElement} _audio - The audio element.\n   * @returns {string} - The type.\n   */\n  function getAudioType(_audio) {\n    return util.transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n  }\n  /**\n   * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n   * @protected\n   * @arg {HTMLAudioElement} _audio - The audio element.\n   * @returns {Promise}\n   */\n  function loadArrayBuffer(_audio) {\n    var xhr, manager, fileName;\n\n    xhr = new (XMLHttpRequest || util.noop);\n    manager = this;\n    fileName = util.resolveFileName(_audio.src);\n\n    if (!xhr.open) Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\n    return new Promise(function (resolve, reject) {\n      var cache = BUFFER_CACHE[fileName];\n\n      // Decodes ArrayBuffer into an AudioBuffer.\n      function onLoad() {\n        var ctx, promise;\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          if (ctx = pl.game.getAudioContext()) {\n            promise = new Promise(function (resolveDecoding, rejectDecoding) {\n              try {\n                ctx.decodeAudioData(xhr.response, function (_buffer) {\n                  var audio = manager.collect( new AudioBufferRecord(_audio, _buffer));\n\n                  resolveDecoding(audio);\n                  // Cache the AudioBuffer to resolve duplicates.\n                  BUFFER_CACHE[fileName] = _buffer;\n                }, function () {\n                  rejectDecoding(\"Failed to decode ArrayBuffer for \" + fileName+'.');\n                });\n              } catch(e) {\n                rejectDecoding(e);\n              }\n            });\n\n            promise.then(resolve).catch(reject);\n\n            return promise;\n          }\n\n        } else {\n          reject(xhr.statusText);\n        }\n\n        xhr.removeEventListener('load', onLoad);\n        xhr = null;\n      }\n\n      function onError() {\n        reject(xhr.statusText);\n        xhr.removeEventListener('error', onError);\n        xhr = null;\n      }\n\n      if (cache && cache !== 'loading') return resolve( manager.collect( new AudioBufferRecord(_audio, cache)));\n\n      BUFFER_CACHE[fileName] = 'loading';\n\n      xhr.responseType = 'arraybuffer';\n\n      xhr.addEventListener('load', onLoad, false);\n      xhr.addEventListener('error', onError, false);\n      xhr.open('GET', _audio.src, true);\n      xhr.send();\n    });\n  }\n  /**\n   * The CSS class names reconized as audio types.\n   */\n  AUDIO_TYPES = /background|voice-over|sfx/i;\n  BUFFER_CACHE = {};\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\n// A little ugg but define instance members.\n  $(\n  // Declare properties.\n  'background, voiceOver, sfx, scope',\n\n  /**\n   * Define instance properties.\n   */\n  function alloc(_id) {\n    this.initialize(_id, 'audio manager');\n\n    ['background', 'voiceOver', 'sfx'].forEach(function (_type) {\n      var collection = this[_type] = AudioCollection.create(_type);\n      this.addShadow(collection);\n    }.bind(this));\n  },\n\n  /**\n   * Given an audio element begin loading the asset.\n   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n   * @returns {Promise}\n   * @todo Support loading from node source or a string argument. - Micah:2/19/16\n   */\n  function load(_audio) {\n    var manager, type;\n\n    manager = this;\n    type = getAudioType(_audio);\n\n    if (!type) return Promise.reject('Audio is missing a type. Please classify as \\'background\\', \\'voiceOver\\' or \\'sfx\\'.');\n    // if (~['sfx', 'voiceOver'].indexOf(type))\n    return loadArrayBuffer.call(this, _audio);\n\n    // return new Promise(function (resolve, reject) {\n    //  _audio.onloadeddata = function () { resolve(manager.collect(this)); };\n    //  _audio.onerror = reject;\n    //  _audio.load();\n    // });\n  },\n\n  /**\n   * Begins loading an AudioElement waits for it to load.\n   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n   * @returns {Promise}\n   */\n  function watch(_audio) {\n    var promise;\n\n    if (_audio.nodeName !== 'AUDIO') return Promise.reject('Invalid type for audio node. ' + (typeof _audio) + ' [' + _audio.protoype.constructor.name + ' ' + _audio.nodeName + '].');\n\n    function reject(_error) {\n      var scope = $$(_audio).scope();\n      console.warn(scope.id(), '-', _error);\n    }\n\n    (promise = this.load(_audio)).catch(reject.bind(this));\n\n    return promise;\n  },\n\n  /**\n   * Adds a audio to the collection. You may also pass an itterable of items to add.\n   * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n   * @returns {Promise}\n   */\n  function collect(_audio) {\n    var type;\n\n    if (!_audio) return false;\n\n    if (_audio.length) {\n      return _audio.map(collect.bind(this));\n    }\n\n    type = _audio.type || getAudioType(_audio);\n\n    if (type && this[type]) return this[type].add(_audio);\n\n    return false;\n  },\n  /**\n   * Provides a collection of `AudioCollection` objects.\n   * @returns {array}\n   */\n  function collections() {\n    var result, types;\n\n    result = [];\n    types = Object.keys(this);\n\n    types.forEach(function (_type) {\n      if (this[_type] instanceof AudioCollection) result.push(this[_type]);\n    }.bind(this));\n\n    return result;\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString() {\n    return '[object ' + (this.constructor.name || 'Object') + ']';\n  }\n);}\n\n/**\n * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n * @extends Collection\n */\nfunction AudioCollection($, sup) {\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\n  $(\n  'type',\n\n  function alloc(_type) {\n    if (_type) this.type = _type;\n    this.initialize(_type, 'collection');\n  },\n  /**\n   * Adds an Audio object to the collection.\n   * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n   * @override\n   * @returns {Audio}\n   */\n  function add(_audio) {\n    var audio;\n\n    if (!_audio) return false;\n\n    audio = (_audio instanceof Audio) ? _audio : Audio.create(_audio, this.type);\n\n    sup(this, 'add')(audio);\n    this.addShadow(audio);\n    if (audio.id()) util.assignRef(this, audio.id(), audio);\n\n    return audio;\n  },\n  /**\n   * Get the owning manager interface for an Audio object.\n   * @returns {AudioManager}\n   */\n  function manager() {\n    return this.$el.closest('#man').data('context');\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString() {\n    return '[object ' + (this.constructor.name || 'Object') + ']';\n  }\n);}\n/**\n * Extend AudioCollection with Collection.\n */\nAudioCollection.prototype = Object.create(Collection, {\n  constructor: {\n    value: AudioCollection,\n    enumerable: false,\n    writeable: false,\n    configureable: false\n  }\n});\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n * Returned as the result of some collection process.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Returned as the result of some collection process.\n *\n * @class\n * @extends AudioCollection\n * @extends EventTargetInterface\n * @extends InspectorInterface\n * @extends LegislatorInterface\n * @extends StateInterface\n */\nfunction MediaCollection($, sup) { $(\n  /**\n   * @override\n   */\n  function add(_media) {\n    this.addShadow(_media);\n    if (_media.id()) util.assignRef(this, _media.id(), _media);\n    return Collection.add.call(this, _media);\n  },\n  /**\n   * @override\n   */\n  function addShadow(_media) {\n    var $clone;\n\n    $clone = _media.$el.clone();\n    $clone.data(_media.$el.data());\n\n    this.$el.append($clone);\n    return this;\n  }\n);}\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * An interface for controlling a MediaElement or AudioBuffer.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n */\nfunction Audio ($) {\n\n  function accessConfig (_augment, _val) {\n    if (_val) {\n      return this[_augment] = _val;\n    } else if (typeof _augment === 'string') {\n      return this[_augment];\n    } else {\n      util.mixin(this, _augment);\n    }\n\n    return _augment;\n  }\n\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\n$(\n  'type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\n  /**\n   * Allocates instance props.\n   * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n   * @arg {string} _type - The collection type.\n   */\n  function alloc (_audio, _type) {\n    var $audio, config, ctx, readyEvent, id;\n\n    $audio = $$(_audio.node || _audio);\n    config = $audio.pl();\n    ctx = pl.game.getAudioContext();\n    readyEvent = $$.Event('ready', {targetScope: this});\n\n    if (!(id = $audio.id())) $audio.id(id = util.createId());\n\n    this.type = _type || null;\n    this.fileName = util.resolveFileName($audio.attr('src'));\n    this.media = $audio[0];\n    this.gain = ctx.createGain();\n\n    this.gain.connect(ctx.destination);\n\n    $audio.data('context', this);\n\n    if (_audio.buffer) this.buffer = _audio.buffer;\n\n    Object.defineProperty(this, 'config', {\n      value: accessConfig.bind(config),\n      writeable: false\n    });\n\n    this.initialize(id, 'audio '+this.type);\n\n    $$(this.media).trigger(readyEvent);\n  },\n  /**\n   * Provides an `AudioNode` for a particular audio source.\n   * @returns\n   *  - `MediaElementSouceNode` for audio elements.\n   *  - `AudioBufferSourceNode` for an ArrayBuffer.\n   */\n  function getSource () {\n    var ctx, src;\n\n    ctx = this.audioContext || pl.game.getAudioContext();\n\n    if (ctx) {\n      if (this.buffer) {\n        src = ctx.createBufferSource();\n        src.buffer = this.buffer;\n        src.loop = this.media.loop;\n\n        return src;\n      } else {\n        try {\n          return this.activeSource || ctx.createMediaElementSource(this.media);\n        } catch(e) {\n          console.warn(e.message, this);\n        }\n      }\n    }\n\n    return null;\n  },\n  /**\n   * Get the owning collection interface for an Audio object.\n   * @returns {AudioCollection}\n   */\n  function collection () {\n    return this.$el.closest('.collection').data('context');\n  },\n  /**\n   * Get the owning manager interface for an Audio object.\n   * @returns {AudioManager}\n   */\n  function manager () {\n    return this.$el.closest('#man').data('context');\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString () {\n    return '[audio#'+this.id()+' '+this.fileName+']';\n  },\n  function setContext (ctx) {\n    this.gain = ctx.createGain();\n    this.gain.disconnect();\n    this.gain.connect(ctx.destination);\n    this.audioContext = ctx;\n  }\n)}\n\n/**\n * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n * That way you can listen for an event at any level of the interface.\n */\nEventTargetInterface = {\n  /**\n   * The shadow node.\n   */\n  $el: null,\n  /**\n   * Define a node for the shadow DOM.\n   * @arg {string} _id - Idendifier for the node.\n   * @arg {string} _class - Classification of the node.\n   */\n  initialize: function (_id, _class) {\n    Object.defineProperty(this, '$el', {\n      value: $$('<div ' + (_id ? 'id=\"' + _id + '\"' : '') + ' ' + (_class ? 'class=\"' + _class + '\"' : '') + '>'),\n      writeable: false,\n      configureable: false,\n      enumerable: false\n    });\n\n    this.$el.data('context', this);\n  },\n  /**\n   * Get/set the id of the interface.\n   * @arg {string} _id - A valid CSS ID.\n   */\n  id: function (_id) {\n    return this.$el.id(_id);\n  },\n  /**\n   * Add an interface to the shadow DOM.\n   * @arg {Audio|AudioCollection} _obj - The object to add.\n   * @returns this\n   */\n  addShadow: function (_obj) {\n    this.$el.append(_obj.$el);\n    return this;\n  },\n  /**\n   * Provides the parent level interface.\n   * @returns {AudioManager|AudioCollection}\n   */\n  parent: function () {\n    return this.$el.parent().data('context');\n  },\n  /**\n   * Find an interface in the API tree.\n   * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n   */\n  find: function (_selector) {\n    var collection = MediaCollection.create();\n\n    this.$el.find(_selector).each(function () {\n      collection.add($$(this).data('context'));\n    });\n\n    return collection;\n  },\n  /**\n   *\n   */\n  filter: function (_selector) {\n    var collection;\n\n    if (!_selector) return this;\n\n    collection = MediaCollection.create();\n\n    this.$el.children().each(function () {\n      var $node = $$(this);\n      if ($node.is(_selector)) collection.add($node.data('context'));\n    });\n\n    return collection;\n  },\n  /**\n   * Attach events to a shadow node.\n   */\n  on: function () {\n    this.$el.on.apply(this.$el, arguments);\n    return this;\n  },\n  /**\n   * Remove events from a shadow node.\n   */\n  off: function () {\n    this.$el.off.apply(this.$el, arguments);\n    return this;\n  },\n  /**\n   * Dispatch a event from a shadow node.\n   */\n  trigger: function () {\n    this.$el.trigger.apply(this.$el, arguments);\n    return this;\n  }\n};\n/**\n * Interface for inspecting an API level (i.e. manager or collection).\n */\nInspectorInterface = {\n  playing: function (_filterSelector) {\n    var playing = this.find('.PLAYING').filter(_filterSelector);\n    return !!playing.length && playing;\n  },\n  /**\n   * Query a collection for ownership of an audio object.\n   * @arg {string|Audio|HTMLAudioElement} The validating reference.\n   * @returns {boolean}\n   */\n  has: function (_query) {\n    if (this.background) {\n      return ['background', 'voiceOver', 'sfx'].some(function (_name) {\n        return this[_name].has(_query);\n      }.bind(this));\n    }\n\n    if (this[_query]) return true;\n\n    return this.some(function (_audio) {\n      return _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n    });\n  },\n};\n\nLegislatorInterface = {\n  rule: function (_selector, _event, _handler) {\n    var handler, args;\n\n    handler = [typeof _event, typeof _handler].indexOf('function');\n    args = util.toArray(arguments).slice(1);\n\n    if (typeof _event === 'function') _event = 'play pause stopped ended';\n\n    this.on(_event, function (_e) {\n      if (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n    }.bind(this));\n  }\n};\n\nStateInterface = {\n  state: function () {\n    return this.$el.state.apply(this.$el, arguments);\n  },\n\n  addState: function (_state) {\n    return this.$el.addClass(_state.toUpperCase());\n  },\n\n  removeState: function (_state) {\n    return this.$el.removeClass(_state.toUpperCase());\n  }\n};\n\n/**\n * Interface for methods involving audio control for any API level.\n */\nPlayableInterface = {\n  proxyEvent: function(_event) {\n    var theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n    \n    // proxy event to shadow DOM only when it has an active source.\n    if (this.activeSource) {\n      if (_event.type === 'ended') {\n        this.removeState('PLAYING');\n        this.activeSource = null;\n      }\n\n      this.trigger(theEvent);\n    }\n\n    _event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n  },\n  handler: function(_event) {\n    if (_event.type === 'ended' && _event.activeSource) {\n      _event.activeSource.disconnect();\n    }\n    this.proxyEvent.call(this,_event);\n  },\n  simEnd: function() {\n    if (this.activeSource) {\n      console.warn('Native `ended` failed to fire, simulating...');\n      this.handler({target: this.activeSource, type: 'ended'});\n    }\n  },\n  playSource: function() {\n    var time;\n    if (this.buffer) {\n      this.activeSource.start(0);\n      this.startTime = new Date();\n\n      if (!this.activeSource.loop) {\n        time = Math.ceil(this.buffer.duration * 1000) + 250;\n        this.timeout = setTimeout(this.simEnd.bind(this), time);\n      }\n    } else {\n      this.media.play();\n    }\n\n    this.delayID = null;\n  },\n  /**\n   * Play an audio object.\n   */\n  play: function (_selector) {\n    var ctx, src, dest, delay, shouldPlay;\n\n\n    function response (_val) {\n      shouldPlay = _val;\n    }\n\n    ctx = this.audioContext || pl.game.getAudioContext();\n    shouldPlay = true;\n\n    /*\n     * I'm commenting out this line because having it there\n     * prevents new audio from starting while the game is out of focus\n     * which makes certain screens impossible to complete.\n     * Giving the game the ability to pause will remove the need for\n     * this line of code, anyway.\n     */\n    // if (ctx.state === 'suspended') return false;\n\n    if (this.background) return this.background.play();\n    if (this.length != null) {\n      if (_selector) {\n        if (this[_selector]) return this[_selector].play();\n\n        return this.find(_selector).play();\n      }\n      return this[0] && this[0].play();\n    }\n\n    if (!(src = this.getSource())) return false;\n\n    src.connect(this.gain);\n    src.addEventListener('ended', this.handler.bind(this), false);\n\n    this.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\n    if (shouldPlay) {\n      this.addState('PLAYING');\n      this.activeSource = src;\n\n      if (delay = this.config('delay')) {\n        this.delayID = setTimeout(this.playSource.bind(this), util.toMillisec(delay));\n      } else {\n        this.playSource.call(this);\n      }\n\n      this.handler({target: src, type: 'play'});\n    }\n\n    return this;\n  },\n  /**\n   * Pause an audio object.\n   */\n  pause: function () {\n    if (this.buffer) {\n      this.pauseTime = new Date();\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n\n    return this;\n  },\n  /**\n   * Resume an audio object.\n   */\n  resume: function () {\n    var time;\n    if (this.buffer) {\n      if (!this.activeSource.loop) {\n        time = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n        this.timeout = setTimeout(this.simEnd.bind(this), time);\n      }\n    }\n\n    return this;\n  },\n  /**\n   * Stop an audio object.\n   */\n  stop: function (_filterSelector) {\n    var stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\n    if (this.background) return this.background.stop(_filterSelector);\n    if (this.length != null) {\n      if (_filterSelector === '@ALL') {\n        this.forEach(function (_audio) {\n          _audio.stop();\n        });\n      } else {\n        return this[0] && this[0].stop();\n      }\n    }\n\n    if (!this.activeSource) return false;\n\n    if (this.buffer) {\n      if (!this.delayID) this.activeSource.stop();\n    } else {\n      this.media.pause();\n      this.media.currentTime = 0;\n    }\n\n    if (this.delayID) {\n      clearTimeout(this.delayID);\n      this.delayID = null;\n    }\n    \n    this.activeSource = null;\n\n    this.removeState('PLAYING');\n    this.trigger(stopEvent);\n\n    return this;\n  },\n  /**\n   * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n   */\n  volume: function (_level, _filterSelector) {\n    if (this.background) return this.background.volume(_level);\n    if (this.length != null) {\n      if (_filterSelector === '@ALL') {\n        this.forEach(function (_audio) {\n          _audio.volume(_level);\n        });\n      } else {\n        return this[0] && this[0].volume(_level);\n      }\n    }\n\n    this.gain.gain.value = _level;\n  },\n  startTime: 0,\n  pauseTime: 0,\n};\n\nexport default type(MediaManager, AudioManager, AudioCollection, Audio);\n\nAudioCollection.extend(MediaCollection);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/AudioManager.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/promise.js\n ** module id = 76\n ** module chunks = 0\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/promise.js\n ** module id = 77\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js\n ** module id = 79\n ** module chunks = 0\n **/","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_string-at.js\n ** module id = 80\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-define.js\n ** module id = 81\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_library.js\n ** module id = 82\n ** module chunks = 0\n **/","module.exports = require('./_hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_redefine.js\n ** module id = 83\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iterators.js\n ** module id = 84\n ** module chunks = 0\n **/","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-create.js\n ** module id = 85\n ** module chunks = 0\n **/","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js\n ** module id = 86\n ** module chunks = 0\n **/","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar has         = require('./_has')\r\n  , toObject    = require('./_to-object')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , ObjectProto = Object.prototype;\r\n\r\nmodule.exports = Object.getPrototypeOf || function(O){\r\n  O = toObject(O);\r\n  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n    return O.constructor.prototype;\r\n  } return O instanceof Object ? ObjectProto : null;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gpo.js\n ** module id = 87\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js\n ** module id = 88\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js\n ** module id = 89\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js\n ** module id = 90\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-step.js\n ** module id = 91\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , anObject           = require('./_an-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , setProto           = require('./_set-proto').set\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.promise.js\n ** module id = 92\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_classof.js\n ** module id = 93\n ** module chunks = 0\n **/","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-instance.js\n ** module id = 94\n ** module chunks = 0\n **/","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_for-of.js\n ** module id = 95\n ** module chunks = 0\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-call.js\n ** module id = 96\n ** module chunks = 0\n **/","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js\n ** module id = 97\n ** module chunks = 0\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 98\n ** module chunks = 0\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-proto.js\n ** module id = 99\n ** module chunks = 0\n **/","var pIE            = require('./_object-pie')\r\n  , createDesc     = require('./_property-desc')\r\n  , toIObject      = require('./_to-iobject')\r\n  , toPrimitive    = require('./_to-primitive')\r\n  , has            = require('./_has')\r\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\r\n  , gOPD           = Object.getOwnPropertyDescriptor;\r\n\r\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\r\n  O = toIObject(O);\r\n  P = toPrimitive(P, true);\r\n  if(IE8_DOM_DEFINE)try {\r\n    return gOPD(O, P);\r\n  } catch(e){ /* empty */ }\r\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopd.js\n ** module id = 100\n ** module chunks = 0\n **/","exports.f = {}.propertyIsEnumerable;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-pie.js\n ** module id = 101\n ** module chunks = 0\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_species-constructor.js\n ** module id = 102\n ** module chunks = 0\n **/","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_task.js\n ** module id = 103\n ** module chunks = 0\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_invoke.js\n ** module id = 104\n ** module chunks = 0\n **/","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_microtask.js\n ** module id = 105\n ** module chunks = 0\n **/","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_redefine-all.js\n ** module id = 106\n ** module chunks = 0\n **/","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-species.js\n ** module id = 107\n ** module chunks = 0\n **/","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-detect.js\n ** module id = 108\n ** module chunks = 0\n **/","'use strict';\n/**\n * Defines an Object type using a named constructor function.\n * @module\n */\n\n/**\n * Constructs an object with methods bound to a context.\n * @arg {object} _from - Object with methods to bind.\n * @arg {object} _to - Context which methtods should be bound to.\n */\nfunction Bindings(_from, _to) {\n  var method;\n\n  // pull all methods from the prototype chain.\n  for (method in _from) {\n    if (typeof _from[method] !== 'function') continue;\n    this[method] = _from[method].bind(_to);\n  }\n}\n\n/**\n * Takes an itterable object and convert it into an Array.\n * @arg {object} _itterable\n * @returns {array}\n */\nfunction toArray(_itterable) {\n  return [].map.call(_itterable, function (m) { return m; });\n}\n\n/**\n * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n * @arg {function} _constructor... - any number of constructor functions.\n * @returns The constructor or an object containing all the defined types.\n */\nexport default function type() {\n  var defs, module;\n\n  /**\n   * Constructs an interface which is accesed through the constructors arguments.\n   * These arguments are parsed from the function string and collected into an array.\n   * @arg {function} _constructor\n   * @returns {array} The collection of API functions requested by the constructor.\n   */\n  function createApi(_constructor) {\n    var args, api;\n\n    // Matches the names of the arguments defined in the source of the function.\n    // [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n    // It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n    // NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n    args = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/) || ['', ''])[1].split(/\\s*,\\s*/);\n    api = {\n      /**\n       * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n       *\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       *\n       * @example\n       * Car.extend(function Ford (proto) {\n       *     this.drive = function () {\n       *         proto(this, 'drive', arguments);\n       *         // do some opps.\n       *     };\n       * });\n       */\n      proto: function (_obj, _name, _args) {\n        var proto, method;\n\n        proto = Object.getPrototypeOf(this || _obj);\n        method = proto[_name];\n\n        if (typeof _obj[_name] !== 'function') {\n          throw new TypeError('Member ' + _name + ' is not a function.');\n        }\n\n        if (method) {\n          // Does _obj's prototype have the method and it's not the same reference as _obj.\n          if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n            return _args ? method.apply(_obj, _args) : method.bind(_obj);\n          }\n\n          // Otherwise, walk the prototype chain to find the prototype that has the parent method.\n          while (proto) {\n            if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n              return _args ? method.apply(_obj, _args) : method.bind(_obj);\n            }\n\n            proto = Object.getPrototypeOf(proto);\n          }\n        } else {\n          return new Bindings(proto, _obj);\n        }\n      },\n      /**\n       * Invokes the specified method which lives on the object type's prototype.\n       * If your instance overrides the object types method, or your many prototype\n       * levels away from the base prototype, this lets you track back to the original.\n       *\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       */\n      base: function (_obj, _name, _args) {\n        var proto, method;\n\n        proto = _constructor.prototype;\n        method = proto[_name];\n\n        if (typeof method !== 'function') {\n          throw new TypeError('Member ' + _name + ' is not a function.');\n        }\n\n        if (method) {\n          return _args ? method.apply(_obj, _args) : method.bind(_obj);\n        } else {\n          return new Bindings(proto, _obj);\n        }\n      },\n      /**\n       * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       */\n      sup: function (_obj, _name, _args) {\n        return api.proto.apply(_constructor.prototype, arguments);\n      },\n      /**\n       * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n       * @arg {object} _obj - The context which to define members.\n       * @arg {string} _name - The member name.\n       * @arg {*} _value - The value.\n       * @returns api\n       */\n      constant: function (_obj, _name, _value) {\n        Object.defineProperty(_obj, _name, {\n          value: _value,\n          configureable: false,\n          writeable: false\n        });\n\n        return api;\n      },\n      /**\n       * Defines members on the constructor.\n       * @function static\n       * @overload\n       * @arg {string} _name - The member name.\n       * @arg {*} _value - The value.\n       * @returns api\n       */\n\n      /**\n       * Defines members on the constructor.\n       * @arg {object} _def - An object with members to mixin.\n       * @returns api\n       */\n      static: function (_name_def, _value) {\n        var member, _name, _def;\n\n        _value ? _name = _name_def : _def = _name_def;\n\n        if (_def) {\n          for (member in _def) {\n            if (!_def.hasOwnProperty(member)) continue;\n            _constructor[member] = _def[member];\n          }\n        }\n\n        if (_name) {\n          _constructor[_name] = _value;\n        }\n\n        return api;\n      },\n      /**\n       * A pretty way of define the interface of your object type.\n       *\n       * You may pass any number of arguments as functions or strings.\n       *\n       * **Example**\n       * ```javascript\n       * function Car ($) {$(\n       *     // Defines a member assigned to `null`.\n       *     'name',\n       *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n       *     'engineType = \"standard\", speed = 0',\n       *\n       *     // Define instance members.\n       *     function alloc (_name) {\n       *         this.name = _name;\n       *     },\n       *\n       *     function drive () {\n       *         this.speed += 1;\n       *     }\n       * )}\n       * ```\n       *\n       * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n       * @arg {string|function} _def - A string of property definitions or a named function.\n       * @todo Support property assignment in alloc. Micah: 2/24/2016\n       */\n      $: function () {\n        var args = toArray(arguments);\n\n        args.forEach(function (_member) {\n          var memberType, props, key, memberName;\n\n          memberType = typeof _member;\n\n          switch (memberType) {\n          case 'string':\n            props = _member.split(/\\s*,\\s*/);\n\n            if (props) {\n                props.forEach(function (_def) {\n                  var prop, val;\n\n                  prop = _def.split(/\\s*[:=]\\s*/);\n                  try { val = JSON.parse(prop[1]); } catch(e) {}\n                  _constructor.prototype[prop[0]] = (typeof prop[1] !== 'undefined') ? val || prop[1] : null;\n                });\n              }\n            break;\n\n          case 'object':\n            for (key in _member) {\n                if (!_member.hasOwnProperty(key)) continue;\n                _constructor.prototype[key] = _member[key];\n              }\n            break;\n\n          case 'function':\n            memberName = _member.name || _member.toString().match(/^function\\s*([^\\s(]+)/)[1];\n            _constructor.prototype[memberName] = _member;\n            break;\n          }\n        });\n\n        return api;\n      }\n    };\n\n    return args.map(function (_call) {\n      return api[_call] || module[_call];\n    });\n  }\n\n  defs = toArray(arguments);\n  module = (!this) ? {} : this;\n\n  defs.forEach(function (_constructor) {\n    var api;\n\n    if (typeof _constructor === 'object') {\n      var Super, keys = Object.keys(_constructor);\n\n      if (keys.length === 1 && module[keys[0]]) {\n        Super = module[keys[0]];\n        return Super.extend.call(module, _constructor[keys[0]]);\n      }\n    }\n\n    api = createApi(_constructor);\n\n    /**\n     * Creates a new instance of the constructor prototype.\n     * This also invokes the `alloc()` on the instance so you can define instance props.\n     * @arg {*} ... - Any number of arguments for `alloc()`.\n     * @returns instance\n     */\n    _constructor.create = function () {\n      var instance = Object.create(_constructor.prototype);\n      if (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n      return instance;\n    };\n\n    /**\n     * Extends the provided constructor prototype.\n     * @arg {function} _definition - Constructor for the object type.\n     * @returns _constructor\n     */\n    _constructor.extend = function (_definition) {\n      _definition.prototype = Object.create(_constructor.prototype, {\n        constructor: {\n          value: _definition,\n          enumerable: false,\n          writeable: false,\n          configureable: false\n        }\n      });\n\n      return type.call(this === _constructor ? null : this, _definition);\n    };\n\n    _constructor.apply(_constructor.prototype, api);\n\n    module[_constructor.name] = _constructor;\n  });\n\n  return defs.length > 1 ? module : defs[0];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/type.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 110\n ** module chunks = 0\n **/","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/define-property.js\n ** module id = 111\n ** module chunks = 0\n **/","var $export = require('./_export');\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js\n ** module id = 112\n ** module chunks = 0\n **/","/**\n * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n *\n * @module\n */\nimport util from 'util';\nimport GlobalScope from 'types/GlobalScope';\nimport Collection from 'types/Collection';\nimport { Point, Size } from 'types/Dimensions';\nimport Queue from 'types/Queue';\n\nfunction invokeResponsibilities(_scope, _event) {\n  if (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n    _scope.responsibilities.forEach(function (_record) {\n      if (_record.name === _event.name) {\n\n        // console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n        _record.ability.call(_scope, _event);\n      }\n    });\n  }\n}\n\n/**\n * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n * <style>\n * .tag {\n *   padding: 1px 4px;\n *   border-radius: 4px;\n *\n *   color: #fff;\n *   background-color: #aaa;\n * }\n *\n * .tag.behavior {\n *   background-color: #0ba;\n * }\n *\n * .tag.state {\n *   background-color: #ba0;\n * }\n *\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n *\n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n * @extends GlobalScope\n */\nvar Entity = GlobalScope.extend(function () {\n\n  function resolveTarget(_target) {\n\n    switch (typeof _target) {\n    case 'string': return this.findOwn(_target);\n    case 'object':\n      if (_target.jquery) return _target;\n      if (Entity.isPrototypeOf(_target)) return _target;\n      if (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n    }\n\n    return this;\n  }\n\n  function ResponsibilityRecord(_name, _ability) {\n    this.name = _name;\n    this.ability = _ability;\n  }\n\n  function dragGreeter(_event) {\n    switch (_event.type) {\n    case 'drag-start':\n      this.grab(_event.state);\n      break;\n\n    case 'drag-move':\n      this.dragging(_event.state);\n      break;\n\n    case 'drag-end':\n      this.release(_event.state);\n      break;\n    }\n  }\n\n  function attachDragEvents() {\n    if (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n      this.on('drag-start drag-move drag-end', dragGreeter);\n    }\n  }\n\n  this.baseType = 'TYPE_ENTITY';\n  this.STATE = {\n    PLAYING: 'PLAYING',\n    BACKGROUND: 'BACKGROUND',\n    VOICE_OVER: 'VOICE-OVER',\n    SFX: 'SFX'\n  };\n\n  this.timeoutID = null;\n  this.intervalID = null;\n  this.responsibilities = null;\n  this.isComplete = false;\n  this.shouldInheritAbilities = true;\n  this.frameHandlers = null;\n  this.frameRate = 60; // 60fps\n  this.draggables = null;\n  this.requiredQueue = null;\n  this.bgImageCollection = null;\n\n  this.handleProperty({\n    size: function (_node, _name, _value) {\n      var size;\n\n      if (this.is(_node)) {\n        size = _value.split(/\\s*[x,]\\s*/);\n        this.css({\n          width: size[0],\n          height: size[1] || size[0]\n        });\n      }\n    },\n\n    position: function (_node, _name, _value) {\n      var size;\n\n      if (this.is(_node)) {\n        size = _value.split(/\\s*[x,]\\s*/);\n        this.css({\n          top: size[1] || size[0],\n          left: size[0]\n        });\n      }\n    },\n\n    draggable: function (_node, _name, _value) {\n      if (!this.hasOwnProperty('draggables')) {\n        this.draggables = $();\n      }\n\n      this.draggables.push(_node);\n    },\n\n    bg: function (_node, _name, _value) {\n      var img = new Image();\n\n      if (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\n      if (this.isMemberSafe('bgImageCollection')) {\n        img.src = _value;\n        this.bgImageCollection.push(img);\n        $(_node).css('background-image', 'url(' + _value + ')');\n      }\n    }\n  });\n\n  this.__init = function (_event) {\n    if (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n      this.watchAssets(this.bgImageCollection);\n    }\n    attachDragEvents.call(this);\n\n    return this.proto();\n  };\n\n  this.size = function () {\n    var size;\n\n    if (arguments.length) {\n      size = Size.create(arguments);\n      this.css(size);\n      return size;\n    }\n\n    return Size.create().set(this.width(), this.height());\n  };\n\n  this.propagateBehavior = function (_event) {\n    var ids;\n\n    ids = [];\n\n    this.findOwn('.pl-scope').each(function (_index, _node) {\n      var $node = $(_node);\n      ids.push($node.id() || $node.address());\n    });\n\n    if (this.hasOwnProperty('entities') && this.entities.length) {\n      // console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\n      this.entities.forEach(function (_scope) {\n        invokeResponsibilities(_scope, _event);\n        _scope.propagateBehavior(_event);\n      });\n    }\n\n    return this;\n  };\n\n  this.require = function (_entity) {\n    if (!this.hasOwnProperty('requiredQueue')) {\n      this.requiredQueue = Queue.create();\n      this.requiredQueue.on('complete', this.bind(function () {\n        this.log('entity complete');\n        this.complete();\n      }));\n\n      this.respond('complete', function (_event) {\n        if (!this.has(_event.target)) return;\n        if (_event.targetScope === this) return;\n\n        this.requiredQueue.ready(_event.behaviorTarget);\n      });\n    }\n\n    this.requiredQueue.add(_entity);\n    this.gate();\n\n    return this;\n  };\n\n  this.behavior = function (_name, _behavior) {\n    _behavior.method = this[_name] = function () {\n      var behaviorEvent, result;\n\n      behaviorEvent = {\n        name: _name,\n        message: '',\n        targetScope: this,\n        behaviorTarget: this\n      };\n\n      result = _behavior.apply(this, arguments);\n\n      if (typeof result === 'object') {\n        behaviorEvent = util.mixin(behaviorEvent, result);\n      }\n\n      if (result !== false) {\n        this.trigger($.Event('behavior', behaviorEvent));\n      }\n\n      return this;\n    };\n\n    return this;\n  };\n\n  this.respond = function () {\n    var name, ability, parentScope, abilities, protoAbilities;\n\n    if (!this.hasOwnProperty('responsibilities')) {\n      abilities = Collection.create();\n      protoAbilities = this.provideAblilityPototype();\n\n      if (this.shouldInheritAbilities && (protoAbilities && protoAbilities.responsibilities)) {\n        abilities.push.apply(abilities, protoAbilities.responsibilities);\n      }\n\n      this.responsibilities = abilities;\n    }\n\n    if (arguments.length === 1) {\n      switch (typeof arguments[0]) {\n      case 'string': name = arguments[0]; break;\n\n      case 'function':\n      case 'object': ability = arguments[0]; break;\n      }\n    }\n\n    else {\n      name = arguments[0];\n      ability = arguments[1];\n    }\n\n    switch (typeof ability) {\n    case 'object':\n      for (name in ability) {\n          if (!ability.hasOwnProperty(name)) continue;\n\n          this.respond(name, ability[name]);\n        }\n      break;\n\n    case 'function':\n      this.responsibilities.add(new ResponsibilityRecord(name, ability));\n      break;\n    }\n\n    return this;\n  };\n\n  this.delay = function (_time, _cb) {\n    var time = util.toMillisec(_time);\n\n    util.assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\n    return this;\n  };\n\n  this.repeat = function (_time, _cb) {\n    var time = util.toMillisec(_time);\n\n    util.assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\n    return this;\n  };\n\n  this.kill = function (_timer) {\n    var id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\n    if (typeof id === 'number') {\n      (_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n      this[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n    }\n\n    else if (id) {\n      id.forEach(function (_id) {\n        (_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n      });\n\n      _timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n    }\n\n    return this;\n  };\n\n  this.eachFrame = function (_handler, _on) {\n    var binder, frame, lastTime, rate, frames;\n\n    rate = this.frameRate || 1000;\n    frames = 0;\n    lastTime = 0;\n\n    if (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n      frame = function (_time) {\n        var i, handler;\n\n        if (rate) {\n          if (_time - lastTime >= (1000 / rate)) {\n            for (i = 0; handler = this.frameHandlers[i]; i += 1) {\n              handler.call(this, _time, Math.round(1000 / (_time - lastTime)), rate);\n            }\n\n            if (frames === rate) frames = 0;\n\n            frames += 1;\n            lastTime = _time;\n          }\n        }\n\n        if (this.frameHandlers.length) {\n          window.requestAnimationFrame(binder);\n        }\n      };\n\n      binder = this.bind(frame);\n\n      // allows methods passed as _handler's to\n      // be able to trace back for proto() callbacks.\n      frame.method = this.eachFrame;\n\n      this.frameHandlers = Collection.create();\n      window.requestAnimationFrame(binder);\n    }\n\n    if (_on !== false) {\n      this.frameHandlers.add(_handler);\n    }\n\n    else {\n      this.frameHandlers.remove(_handler);\n    }\n\n    return this;\n  };\n\n  this.state = function (_flag, _definition, _imp) {\n    var flag, tester, setter, getter, STATE, def, opperations, names;\n\n    if (!_definition) {\n      return this.proto(_flag);\n    }\n\n    def = _definition.split(/\\s+/);\n    names = _flag.split(/\\s+/);\n    opperations = [];\n\n    def.forEach(this.bind(function (_opp) {\n      var method, flag;\n\n      method = (_opp.slice(0, 1) === '+') ? 'addClass' : 'removeClass';\n\n      opperations.push({\n        method: method,\n        flag: _opp.slice(1)\n      });\n\n      if (method === 'addClass') {\n        flag = _opp.slice(1);\n        STATE = util.transformId(flag);\n        this.STATE[STATE] = flag;\n      }\n    }));\n\n    setter = names[0];\n    tester = names[1];\n\n    this[setter] = function (_target) {\n      var target, uiStateEvent, oppsPerformed;\n\n      target = resolveTarget.call(this, _target);\n      uiStateEvent = $.Event('ui-' + setter, {\n        target: target.jquery ? target[0] : target,\n        targetScope: this\n      });\n      oppsPerformed = 0;\n\n      if (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n        return !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n      }\n\n      if (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\n      opperations.forEach(function (_record) {\n        // If we are adding or removing a class, test if the target already has/removed it.\n        // If so, then bump \"oppsPerformed\".\n        oppsPerformed += Number(target.hasClass(_record.flag) === !~_record.method.indexOf('add'));\n        target[_record.method](_record.flag);\n      });\n\n      if (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\n\n      if (oppsPerformed) {\n        this.trigger(uiStateEvent);\n        return target;\n      }\n\n      return false;\n    };\n\n    if (tester) {\n      getter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\n      this[tester] = function (_target) {\n        var target;\n\n        target = resolveTarget.call(this, _target);\n\n        return target.hasClass(this.STATE[STATE]);\n      };\n\n      this[getter] = function () {\n        return this.findOwn('.' + this.STATE[STATE]);\n      };\n    }\n\n    return this;\n  };\n\n  this.provideBehaviorEventScope = function () {\n    return this;\n  };\n\n  this.provideAblilityPototype = function () {\n    var owner;\n\n    owner = util.getOwner(this, this.baseType);\n\n    return !!owner && owner.object;\n  };\n\n  this.completed = function () {\n    return this.game.demoMode || (this.hasOwnProperty('isComplete') && this.isComplete) || !this.requiredQueue || (this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0);\n  };\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n   * @function module:types/Entity~Entity#complete\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   */\n  this.behavior('complete', function () {\n    if (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\n    this.isComplete = true;\n    this.addClass('COMPLETE');\n\n    return {\n      behaviorTarget: this\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a drggable has been grabbed for dragging.\n   * @function module:types/Entity~Entity#grab\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('grab', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a draggable as being dragged.\n   * @function module:types/Entity~Entity#dragging\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('dragging', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a drggable as released or droped.\n   * @function module:types/Entity~Entity#release\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('release', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#open\n   * @fires Entity#ui-open\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `OPEN` class name.\n   * @function module:types/Entity~Entity#opened\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Open'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `OPEN` class name.\n   * @function module:types/Entity~Entity#getOpened\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('open opened', '+OPEN -LEAVE');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#close\n   * @fires Entity#ui-close\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('close', '-OPEN');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#leave\n   * @fires Entity#ui-leave\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `LEAVE` class name.\n   * @function module:types/Entity~Entity#left\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Leave'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `LEAVE` class name.\n   * @function module:types/Entity~Entity#getLeft\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('leave left', '+LEAVE', {\n    willSet: function (_target) {\n      this.close(_target);\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#enable\n   * @fires Entity#ui-enable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `ENABLED` class name.\n   * @function module:types/Entity~Entity#enabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Enabled'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `ENABLED` class name.\n   * @function module:types/Entity~Entity#getEnabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('enable enabled', '+ENABLED -DISABLED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#disable\n   * @fires Entity#ui-disable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `DISABLED` class name.\n   * @function module:types/Entity~Entity#disabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Disabled'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `DISABLED` class name.\n   * @function module:types/Entity~Entity#getDisabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('disable disabled', '+DISABLED -ENABLED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#select\n   * @fires Entity#ui-select\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `SELECTED` class name.\n   * @function module:types/Entity~Entity#selected\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Selected'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `SELECTED` class name.\n   * @function module:types/Entity~Entity#getDisabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('select selected', '+SELECTED', {\n    willSet: function (_target) {\n      var target, $parent;\n\n      target = resolveTarget.call(this, _target);\n      $parent = target.parent();\n\n      $parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n        this.deselect(_node);\n      }));\n      $parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n        this.unhighlight(_node);\n      }));\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#deselect\n   * @fires Entity#ui-deselect\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('deselect', '-SELECTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#highlight\n   * @fires Entity#ui-highlight\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n   * @function module:types/Entity~Entity#highlighted\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Highlighted'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `HIGHLIGHTED` class name.\n   * @function module:types/Entity~Entity#getHighlighted\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('highlight highlighted', '+HIGHLIGHTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#unhighlight\n   * @fires Entity#ui-unhighlight\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('unhighlight', '-HIGHLIGHTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#draggable\n   * @fires Entity#ui-draggable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n   * @function module:types/Entity~Entity#dragEnabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Draggable'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `DRAGGABLE` class name.\n   * @function module:types/Entity~Entity#getDragEnabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('draggable dragEnabled', '+DRAGGABLE', {\n    didSet: function (_target) {\n      this.translate( resolveTarget.call(this, _target) );\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#undraggable\n   * @fires Entity#ui-undraggable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('undraggable', '-DRAGGABLE');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n   * @function module:types/Entity~Entity#translate\n   * @fires Entity#ui-translate\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n   * @function module:types/Entity~Entity#translate\n   * @fires Entity#ui-translate\n   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n   * @function module:types/Entity~Entity#translated\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Translate'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `TRANSLATED` class name.\n   * @function module:types/Entity~Entity#getTranslated\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('translate translated', '+TRANSLATED', {\n    willSet: function (_target_point, _point) {\n      var point, target;\n\n      target = resolveTarget.call(this, _target_point);\n      point = (!~[_target_point.x, _target_point.y].indexOf(undefined)) ? _target_point : _point;\n\n      if (point) {\n        target.css('transform', 'translateX(' + point.x + 'px) translateY(' + point.y + 'px)');\n      }\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#untranslate\n   * @fires Entity#ui-untranslate\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('untranslate', '-TRANSLATED', {\n    willSet: function () {\n      this.css('transform', 'none');\n    }\n  });\n\n  this.state('gate gated', '+GATED');\n\n});\n\nexport default { Entity, invokeResponsibilities };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Entity.js\n **/","/**\n*  Screen\n*  @desc Contains...\n*  @proto Entity\n*/\n\nimport { Entity, invokeResponsibilities } from 'types/Entity';\n\nvar Screen = Entity.extend(function () {\n\n  function attachBehaviorEvent () {\n    this.on('behavior', function (_event) {\n      // console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\n      if (this !== _event.targetScope) {\n        invokeResponsibilities(this,  _event);\n      }\n      \n      this.propagateBehavior(_event);\n    });\n  }\n  \n  this.baseType = 'TYPE_SCREEN';\n  this.game = null;\n  this.screen = null;\n\n  this.__init = function () {\n    this.proto();\n\n    if (this.is(pl.game.config('screenSelector'))) {\n      attachBehaviorEvent.call(this);\n    }\n  };\n\n  this.start = function () {\n    this.startAudio();\n    return this;\n  };\n\n  this.stop = function () {\n    this.stopAudio();\n    return this;\n  };\n\n  this.pause = function() {\n    this.pauseMedia();\n    if(this.hasOwnProperty('entities') && this.entities) {\n      this.entities.forEach(function(entity) {\n        if(typeof entity.pause === 'function') entity.pause();\n      });\n    }\n    return this;\n  };\n\n  this.resume = function() {\n    this.resumeMedia();\n    if(this.hasOwnProperty('entities') && this.entities) {\n      this.entities.forEach(function(entity) {\n        if(typeof entity.resume === 'function') entity.resume();\n      });\n    }\n    return this;\n  };\n\n  this.startAudio = function () {\n    if (!this.audio) return;\n    this.audio.background.play();\n    this.audio.voiceOver.play();\n  };\n\n  this.stopAudio = function () {\n    if (!this.audio) return;\n    this.audio.voiceOver.stop('@ALL');\n  };\n\n  this.pauseMedia = function() {\n    if(!this.currentMedia) return;\n    for(var media in this.currentMedia) { \n      if(this.currentMedia.hasOwnProperty(media)) {\n        if(this.currentMedia[media]) this.currentMedia[media].pause();\n      }\n    }\n  };\n\n  this.resumeMedia = function() {\n    if(!this.currentMedia) return;\n    for(var media in this.currentMedia) { \n      if(this.currentMedia.hasOwnProperty(media)) {\n        if(this.currentMedia[media]) this.currentMedia[media].resume();\n      }\n    }\n  };\n\n  this.index = function () {\n    if (this === this.screen) return this.game.screens.indexOf(this);\n    return this.$els.index();\n  };\n\n  this.next = function () {\n    if (!this.completed()) return false;\n    return this.game.screens[this.screen.index()+1];\n  };\n\n  this.prev = function () {\n    return this.game.screens[this.screen.index()-1];\n  };\n\n  this.quit = function () {\n    this.game.quit.open();\n  };\n\n  this.nextSib = function () {\n    return $.fn.next.apply(this.$els, arguments);\n  };\n\n  this.prevSib = function () {\n    return $.fn.prev.apply(this.$els, arguments);\n  };\n\n  this.isLast = function () {\n    return this.game.screens.indexOf(this.screen) === this.game.screens.length-1;\n  };\n\n});\n\nexport default Screen;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Screen.js\n **/","/**\n * Node scope for the top level game node.\n */\nimport util from 'util';\nimport game from 'play.game';\nimport GlobalScope from 'types/GlobalScope';\nimport Screen from 'types/Screen';\nimport Collection from 'types/Collection';\nimport { createEntity } from 'types/Scope';\nimport { Size } from 'types/Dimensions';\nimport { MediaManager } from 'types/AudioManager';\n\nvar Game = GlobalScope.extend(function () {\n\n  var Viewport, screenPrototype, platformEventHandler;\n\n  /**\n   * Detects the device and adds the appropriate state classes.\n   */\n  function detechDevice() {\n    var deviceClasses = \"\";\n\n    if(iOS()) deviceClasses += \"iOS \";\n    if(mobileOrTablet()) deviceClasses += \"MOBILE \";\n\n    this.addClass(deviceClasses);\n  }\n\n  function iOS() {\n    var iDevices = [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod'\n    ];\n\n    if (!!navigator.platform) {\n      while (iDevices.length) {\n        if (navigator.platform === iDevices.pop()){ return true; }\n      }\n    }\n\n    return false;\n  }\n\n  function mobileOrTablet() {\n    var check = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n    return check;\n  }\n\n  /**\n   * Scales the game view to fill the browser window.\n   */\n  function scaleGame () {\n    var vpSize, gameDimensions, width, height, zoom;\n\n    vpSize = this.viewport.size();\n    gameDimensions = game.config('dimensions');\n    width = gameDimensions.width || this.width();\n    height = Math.round(gameDimensions.width / gameDimensions.ratio);\n    zoom = this.viewport.width / width;\n\n    if (Math.round(height * zoom) > this.viewport.height) {\n      zoom = (this.viewport.height / height).toPrecision(4);\n    }\n\n    util.mixin(this.node().style, {\n      width: width+'px',\n      zoom: zoom\n    });\n\n    if (!this.css('zoom')) {\n      this.css({\n        transform: 'scale('+zoom+')',\n        transformOrigin: (zoom < 1 ? '0px' : '50%')+' 0px 0px',\n        height: this.viewport.height / zoom\n      });\n    }\n\n    this.zoom = zoom;\n  }\n\n  function demoMode (_set) {\n    this.demoMode = _set != null ? _set : !this.demoMode;\n    this[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\n    console.info(this.id(), 'is now '+(this.demoMode ? 'in' : 'out of')+' Demo Mode.');\n  }\n\n  function collectVideos () {\n    this.find('video').each(function (_index, _node) {\n      this.media.video.add(_node);\n      \n      _node.onplay = function () {\n        var playing = this.media.playing('.background, .voiceOver');\n        if (playing) playing.stop('@ALL');\n        this.log('video play', playing);\n      }.bind(this);\n    }.bind(this));\n  }\n\n  screenPrototype = Screen;\n  platformEventHandler = new (function () {\n    \n    this.invoke = function (_event, _ctx) {\n      if (typeof this[_event.name] === 'function') {\n        this[_event.name].call(_ctx, _event);\n      }\n    };\n\n    this['toggle-demo-mode'] = function (_set) {\n      demoMode.call(this);\n    };\n  });\n\n  this.baseType = 'TYPE_GAME';\n  this.screens = null;\n  this.zoom = 1;\n  this.keyCommands = null;\n  this.demoMode = false;\n  this.media = null;\n  this.viewport = new (function () {\n    var vp, $html, RESIZE_HANDLERS;\n\n    vp = this;\n    $html = $('html');\n    RESIZE_HANDLERS = [];\n\n    $(window).on('resize', function (_event) {\n      if (!$html.hasClass(vp.orientation)) {\n        $html\n          .removeClass('squareish landscape protrait')\n          .addClass(vp.orientation);\n      }\n\n      RESIZE_HANDLERS.forEach(function (_handler) {\n        _handler(_event);\n      });\n    });\n\n    this.LANDSCAPE = 'landscape';\n    this.PROTRAIT = 'protrait';\n    this.SQUAREISH = 'squareish';\n    \n    this.size = function () {\n      return Size.create().set(window.innerWidth, window.innerHeight);\n    };\n\n    Object.defineProperties(this, {\n      width: {\n        get: function () {\n          return window.innerWidth;\n        },\n\n        configurable: false\n      },\n\n      height: {\n        get: function () {\n          return window.innerHeight;\n        },\n\n        configurable: false\n      },\n\n      orientation: {\n        get: function () {\n          var ratio = this.size().ratio();\n\n          switch (true) {\n            case ratio > 0.9 && ratio < 1.1: return 'squareish';\n            case ratio > 1.1: return 'landscape';\n            case ratio < 0.9: return 'protrait';\n          }\n        }\n      }\n    });\n\n    this.onResize = function (_handler) {\n      RESIZE_HANDLERS.push(_handler);\n    };\n\n    this.offResize = function (_handler) {\n      var index = RESIZE_HANDLERS.indexOf(_handler);\n\n      if (~index) RESIZE_HANDLERS.splice(index, 1);\n    };\n\n    $html.addClass(this.orientation);\n\n  });;\n\n  this.willInit = function () {\n    this.addClass('pl-game');\n\n    detechDevice.call(this);\n    scaleGame.call(this);\n    this.watchAudio();\n    this.captureScreens();\n\n    this.viewport.onResize(this.bind(scaleGame));\n\n    pl.game.on('platform-event', this.bind(function (_event) {\n      platformEventHandler.invoke(_event, this);\n    }));\n\n    window.addEventListener('load', window.focus);\n    window.addEventListener('focus', function() {\n      this.resume();\n    }.bind(this));\n    window.addEventListener('blur', function() {\n      this.pause();\n    }.bind(this));\n\n    return this;\n  };\n\n  /**\n   * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n   * ### Key Names\n   * - *meta*: Command (aka Apple ⌘ or win)\n   * - *alt*: Alt (aka Option ⌥)\n   * - *shift*: Shift ⇪\n   * - *ctrl*: Control ^\n   * - *enter*: Enter or Return\n   * - *esc*: Escape\n   * - *left*: Left arrow\n   * - *up*: Up arrow\n   * - *right*: Right arrow\n   * - *down*: Down arrow\n   *\n   * ### Example\n   * ```javascript\n   * // Overriding print.\n   * this.game.onKeys('cmd+P', printHandler);\n   *\n   * // Holding Control and pressing \"K\" then \"B\"\n   * this.game.onKeys('ctrl+K,B', handler);\n   * ```\n   * @arg {string} _commands - The key or sequence of keys.\n   * @arg {function} _handler - Your event handler for when you key pattern is matched.\n   * @returns `this`\n   */\n  this.onKeys = function (_commands, _handler) {\n    var sequence, chords, modifiers, map;\n\n    if (!this.keyCommands) {\n      this.keyCommands = {};\n\n      map = {\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        27: 'esc',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        91: 'meta',\n        enter: 13,\n        shift: 16,\n        ctrl : 17,\n        alt  : 18,\n        esc  : 27,\n        left : 37,\n        up   : 38,\n        right: 39,\n        down : 40,\n        meta : 91\n      };\n\n      modifiers = [16, 17, 18, 91];\n      sequence = [];\n      chords = [];\n\n      this.on('keydown', function (_event) {\n        var modifier, key, eventMods, currentMods, command, handler;\n\n        modifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n        key = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n        currentMods = [];\n\n        // Collect the modifiers the event says are still down.\n        eventMods.forEach(function (_modifierDown, _index) {\n          // use the modifier name\n          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n        });\n\n        // Don't add keys we already have during rapid-fire events\n        if (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\n        // Construct the command\n        command = chords.length ?\n          (chords.push(key), chords.join(',')) :\n          (sequence.push(key), sequence.join('+'));\n\n        handler = this.keyCommands[command];\n\n        if (handler) {\n          handler.call(this, _event, command);\n          // Keep current modifiers.\n          sequence = currentMods.map(function (_key, _index) {\n            var key = sequence[_index];\n            return currentMods[currentMods.indexOf(key)];\n          });\n          chords = [];\n\n          // Override original key command (i.e. meta+Q).\n          _event.preventDefault();\n        }\n      });\n\n      this.on('keyup', function (_event) {\n        var key, index, modifier, eventMods, currentMods;\n\n        key = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n        index = sequence.indexOf(key);\n        modifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n        // Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n        currentMods = [];\n\n        // Collect the modifiers the event says are still down.\n        eventMods.forEach(function (_modifierDown, _index) {\n          // use the modifier name\n          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n        });\n\n        // If the key released is a modifier...\n        if (key === modifier) {\n          // ...keep current modifiers...\n          sequence = currentMods.map(function (_key, _index) {\n            var key = sequence[_index];\n            return currentMods[currentMods.indexOf(key)];\n          });\n          // ...clear registered chords.\n          chords = [];\n        }\n\n        else {\n          // If we had pressed more than one key...\n          if (sequence.length > 1) {\n            // Check if the first is a modifier then switch to chord capturing\n            if (~modifiers.indexOf(map[sequence[0]])) {\n              chords.push(sequence.join('+'));\n            }\n          }\n          \n          if (~index) sequence.splice(index, 1);\n          if (!sequence.length) chords = [];\n        }\n      });\n    }\n\n    this.keyCommands[_commands] = _handler;\n\n    return this;\n  };\n\n  this.screen = function (_id, _implementation) {\n    var prototype, selector, screenSelector, instance;\n\n    if (arguments.length === 1 && typeof _id === 'function') {\n      screenPrototype = Screen.extend(_id);\n      return this;\n    }\n\n    if (!this.hasOwnProperty('screens')) this.screens = Collection.create();\n\n    if (this.hasOwnProperty('$els')) {\n      debugger;\n      screenSelector = pl.game.config('screenSelector');\n      prototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n      selector = (typeof _id === 'number') ? screenSelector+':nth-child('+(_id+1)+')' : '#'+_id;\n      instance = prototype.extend(_implementation).initialize(this.find(selector));\n\n      instance.screen = instance;\n      if (!instance.game) {\n        instance.game = instance.closest('.pl-game').scope();\n      }\n    }\n\n    else {\n      this.screens.push({\n        index: (typeof _id === 'number') ? _id : null,\n        name: (typeof _id === 'string') ? _id : null,\n        implementation: _implementation\n      });\n    }\n\n    return this;\n  };\n\n  this.captureScreens = function () {\n    var screenSelector, prototype, collection;\n\n    screenSelector = pl.game.config('screenSelector');\n    prototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n    collection = [];\n    \n    this.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n      var $node, screen, record, key, id, index, component;\n\n      $node = $(_node);\n      id = $node.id();\n      key = (id) ? 'name' : (id = _index, 'index');\n      record = this.screens && this.screens.get(id, key);\n      component = $node.attr('pl-component');\n      screen = createEntity.call(prototype, $node, record && record.implementation);\n      screen.screen = screen;\n      screen.game = this;\n\n      if ($node.attr('pl-skip') == null) collection.push(screen);\n      \n      if (key === 'name' || component) {\n        util.assignRef(this, util.transformId((key === 'name' && id) || component, true), screen);\n      }\n    }));\n\n    if (collection.length) this.screens = collection;\n\n    return this;\n  };\n\n  this.watchAudio = function () {\n    this.media = MediaManager.create(this.id());\n\n    /**\n     * Prevent duplicate playback of voiceOvers and backgrounds.\n     */\n    this.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n      var playing = this.playing() || [];\n      // shouldPlay = false if _event.target is already playing.\n      _event.response(!playing || !playing.length || (!~playing.indexOf(_event.target) && !playing.has(_event.target.fileName)));\n    });\n\n    /**\n     * \n     */\n    this.media.rule('.voiceOver', function (_event) {\n      var audio, playing;\n\n      audio = _event.target;\n      playing = audio && this.playing('.audio:not(#'+audio.id()+')');\n\n      switch (_event.type) {\n        case 'play':\n          if (playing) {\n            playing.filter('.voiceOver').stop('@ALL');\n            playing.filter('.background').volume(game.config('bgVolume.drop') || 0.2);\n          }\n          break;\n\n        case 'pause':\n        case 'stopped':\n        case 'ended':\n          if (playing) playing.filter('.background').volume(game.config('bgVolume.max') || 1);\n          break;\n      }\n    });\n\n    this.media.rule('.background', 'play', function (_event) {\n      var playing = this.playing('.background:not(#'+_event.target.id()+')');\n      if (playing) playing.stop('@ALL');\n    });\n\n    if (~pl.EVENT.ACTION.indexOf('touch')) {\n      this.on(pl.EVENT.ACTION, function beginAudio (_event) {\n        var ctx, screen;\n\n        ctx = game.getAudioContext();\n        screen = this.currentScreen();\n\n        if (screen && ctx && ctx.state === 'suspended') {\n          game.enableAudioContext();\n          this.log('awesome!');\n          screen.startAudio();\n          this.off(pl.EVENT.ACTION, beginAudio);\n        }\n      });\n    }\n\n    collectVideos.call(this);\n  };\n\n  this.progress = function () {\n    return {\n      currentScreen: this.currentScreen().index()\n    };\n  };\n\n  this.currentScreen = function () {\n    return this.findOwn(pl.game.config('screenSelector')+'.OPEN').not('#quit').scope();\n  };\n\n  this.flip = function () {\n    console.log('THATS A FLIP!');\n    game.report.flip(this);\n  };\n\n  this.pause = function(quitScreen) {\n    if(!quitScreen) this.addClass('PAUSED');\n    this.screens.forEach(function(screen) {\n      if(screen.state(screen.STATE.OPEN)) {\n        screen.pause();\n      }\n    });\n    game.getAudioContext().suspend();\n  }\n\n  this.resume = function() {\n    this.removeClass('PAUSED');\n    this.screens.forEach(function(screen) {\n      if(screen.state(screen.STATE.OPEN)) screen.resume();\n    });\n    if(!this.hasClass('QUIT-SCREEN')) game.getAudioContext().resume();\n  }\n\n  this.exit = function () {\n    console.log('GOODBYE!');\n    game.report.exit(this);\n  };\n\n  /**\n   * Demo mode key command\n   */\n  this.onKeys('ctrl+D,M', function () {\n    demoMode.call(this);\n  });\n\n  /**\n   * Keyboard screen navigation\n   */\n  this.onKeys('left', function () {\n    var current;\n\n    current = this.currentScreen();\n\n    if (current) current.prev();\n  });\n\n  this.onKeys('right', function () {\n    var current;\n\n    current = this.currentScreen();\n    \n    if (current) current.next();\n  });\n\n});\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Game.js\n **/","/**\n * API for communicaion between a game and the platform.\n *\n * @module\n */\nimport util from 'util';\n\nvar platform = new (function () {\n\n  function createEvent(_name, _props) {\n    var eventObject;\n\n    eventObject = util.mixin(new Event('game-event', {bubbles: true, cancelable: false}), {\n      name: _name,\n      respond: function (_data) {\n        var platformEvent;\n\n        platformEvent = $.Event('platform-event', {\n          name: _name,\n          gameData: _data\n        });\n\n        pl.game.trigger(platformEvent);\n      }\n    }, _props);\n\n    return eventObject;\n  }\n\n  this.EVENT_INIT = 'init';\n  this.EVENT_SAVE = 'save';\n  this.EVENT_EXIT = 'exit';\n  this.EVENT_FLIPPED = 'flipped';\n\n  this.emit = function (_name, data) {\n    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name, data));\n  };\n\n  this.saveGameState = function (_data) {\n    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n  };\n\n  window.addEventListener('platform-event', function (_event) {\n    var platformEvent;\n\n    platformEvent = $.Event('platform-event', {\n      name: _event.name\n    });\n\n    pl.game.trigger(platformEvent);\n  });\n\n});\n\nexport default platform;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/platform.js\n **/"],"sourceRoot":""}