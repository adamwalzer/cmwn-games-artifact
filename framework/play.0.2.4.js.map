{"version":3,"sources":["webpack:///play.js","webpack:///webpack/bootstrap cdf663bc8f89ec0e0fab","webpack:///./source/main.js","webpack:///./~/babel-runtime/helpers/interop-require-default.js","webpack:///./~/babel-runtime/helpers/interopRequireDefault.js","webpack:///./source/jQExtentions.js","webpack:///./~/babel-runtime/core-js/array/for-each.js","webpack:///./~/core-js/library/fn/array/for-each.js","webpack:///./~/core-js/library/modules/js.array.statics.js","webpack:///./~/core-js/library/modules/$.js","webpack:///./~/core-js/library/modules/$.export.js","webpack:///./~/core-js/library/modules/$.global.js","webpack:///./~/core-js/library/modules/$.core.js","webpack:///./~/core-js/library/modules/$.ctx.js","webpack:///./~/core-js/library/modules/$.a-function.js","webpack:///./source/types/Dimensions.js","webpack:///./~/babel-runtime/core-js/object/define-properties.js","webpack:///./~/core-js/library/fn/object/define-properties.js","webpack:///./source/types/BasicArray.js","webpack:///./source/util.js","webpack:///./source/types/Basic.js","webpack:///./~/babel-runtime/core-js/object/create.js","webpack:///./~/core-js/library/fn/object/create.js","webpack:///./source/lib/matrix.js","webpack:///./source/play.js","webpack:///./source/play.game.js","webpack:///./source/play.game.component.js","webpack:///./source/types/Events.js","webpack:///./source/play.game.manager.js","webpack:///./source/play.game.manager.draggable.js","webpack:///./source/types/Collection.js","webpack:///./source/types/GlobalScope.js","webpack:///./source/types/Scope.js","webpack:///./source/types/jQProxy.js","webpack:///./~/babel-runtime/core-js/object/keys.js","webpack:///./~/core-js/library/fn/object/keys.js","webpack:///./~/core-js/library/modules/es6.object.keys.js","webpack:///./~/core-js/library/modules/$.to-object.js","webpack:///./~/core-js/library/modules/$.defined.js","webpack:///./~/core-js/library/modules/$.object-sap.js","webpack:///./~/core-js/library/modules/$.fails.js","webpack:///./source/types/Queue.js","webpack:///./source/evalAction.js","webpack:///./source/types/AudioManager.js","webpack:///./~/babel-runtime/core-js/promise.js","webpack:///./~/core-js/library/fn/promise.js","webpack:///./~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/core-js/library/modules/$.string-at.js","webpack:///./~/core-js/library/modules/$.to-integer.js","webpack:///./~/core-js/library/modules/$.iter-define.js","webpack:///./~/core-js/library/modules/$.library.js","webpack:///./~/core-js/library/modules/$.redefine.js","webpack:///./~/core-js/library/modules/$.hide.js","webpack:///./~/core-js/library/modules/$.property-desc.js","webpack:///./~/core-js/library/modules/$.descriptors.js","webpack:///./~/core-js/library/modules/$.has.js","webpack:///./~/core-js/library/modules/$.iterators.js","webpack:///./~/core-js/library/modules/$.iter-create.js","webpack:///./~/core-js/library/modules/$.set-to-string-tag.js","webpack:///./~/core-js/library/modules/$.wks.js","webpack:///./~/core-js/library/modules/$.shared.js","webpack:///./~/core-js/library/modules/$.uid.js","webpack:///./~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/core-js/library/modules/$.add-to-unscopables.js","webpack:///./~/core-js/library/modules/$.iter-step.js","webpack:///./~/core-js/library/modules/$.to-iobject.js","webpack:///./~/core-js/library/modules/$.iobject.js","webpack:///./~/core-js/library/modules/$.cof.js","webpack:///./~/core-js/library/modules/es6.promise.js","webpack:///./~/core-js/library/modules/$.classof.js","webpack:///./~/core-js/library/modules/$.is-object.js","webpack:///./~/core-js/library/modules/$.an-object.js","webpack:///./~/core-js/library/modules/$.strict-new.js","webpack:///./~/core-js/library/modules/$.for-of.js","webpack:///./~/core-js/library/modules/$.iter-call.js","webpack:///./~/core-js/library/modules/$.is-array-iter.js","webpack:///./~/core-js/library/modules/$.to-length.js","webpack:///./~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/core-js/library/modules/$.set-proto.js","webpack:///./~/core-js/library/modules/$.same-value.js","webpack:///./~/core-js/library/modules/$.species-constructor.js","webpack:///./~/core-js/library/modules/$.microtask.js","webpack:///./~/core-js/library/modules/$.task.js","webpack:///./~/core-js/library/modules/$.invoke.js","webpack:///./~/core-js/library/modules/$.html.js","webpack:///./~/core-js/library/modules/$.dom-create.js","webpack:///./~/core-js/library/modules/$.redefine-all.js","webpack:///./~/core-js/library/modules/$.set-species.js","webpack:///./~/core-js/library/modules/$.iter-detect.js","webpack:///./source/types/type.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./source/types/Entity.js","webpack:///./source/types/Screen.js","webpack:///./source/types/Game.js","webpack:///./source/platform.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","run","_play2","game","_interopRequireDefault","_play","window","play","pl","document","addEventListener","__esModule","obj","default","_Array$forEach","_typesDimensions","_libMatrix","_libMatrix2","original","position","this","scope","result","each","$node","$","data","closest","push","length","_set","undefined","indexOf","attr","address","tag","classes","nodeName","toLowerCase","split","join","state","_test","hasClass","toUpperCase","match","size","arguments","Size","create","css","set","width","height","pos","Point","left","x","top","y","absolutePosition","offset","transform","t","matrix","is3d","setTransform","apply","toCSS","_matrix","i","concat","slice","map","parseFloat","transformPosition","point","translate","e","f","transformScale","scale","a","d","_name","_value","args","removeAttr","attributes","_attr","name","value","exec","_method","_args","toArray","fn","Array","forEach","$export","$ctx","$Array","statics","setStatics","keys","key","Function","S","$Object","Object","getProto","getPrototypeOf","isEnum","propertyIsEnumerable","getDesc","getOwnPropertyDescriptor","setDesc","defineProperty","setDescs","defineProperties","getKeys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","global","core","ctx","PROTOTYPE","type","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","target","own","out","C","param","Math","self","__g","version","__e","aFunction","that","b","it","TypeError","_Object$defineProperties","_typesBasicArray","_typesBasicArray2","Dimension","prototype","to","_Thing","isPrototypeOf","extend","originalMap","planeMap","_argumentsArray","instance","proto","inc","_val","_plane2","dec","_scale","math","_fun","parseInt","planeOf","_index","isNaN","_handler","product","ratio","quotient","floor","remainder","get","Number","_width","_height","hypotenuse","sqrt","pow","applyTo","_object","nodeType","ELEMENT_NODE","style","_x","_y","distance","_point","rotate","_origin","_angle","rad","PI","sin","cos","T","D","_util","_util2","_typesBasic","_typesBasic2","BasicArray","baseType","mixin","util","member","objs","hasOwnProperty","keyOf","_obj","_member","getOwner","object","random","_collection_rangeA","_rangeB","index","val","round","transformId","_id","_camelCase","replace","_match","RegExp","$1","isSet","every","_arg","toMillisec","_source","tokens","time","units","h","s","_token","unit","_collection","resolvePath","_path","path","testArray","test","assignRef","_ref","__refCollction__","enumerable","writeable","configureable","noop","resolveFileName","lastIndexOf","createId","_pattern","toString","Date","now","_Object$create","Basic","_implementation","console","error","method","owner","caller","sup","constructor","Matrix","context","me","_t","cm","clone","flipX","flipY","reflectVector","v","applyToPoint","reset","angle","rotateFromVector","atan2","rotateDeg","scaleU","sx","sy","scaleX","scaleY","shear","shearX","shearY","skew","ax","ay","tan","skewX","skewY","tx","ty","translateX","translateY","a2","b2","c2","d2","e2","f2","a1","b1","c1","d1","e1","f1","divide","isInvertible","im","inverse","divideScalar","isIdentity","dt","interpolate","m2","interpolateAnim","decompose","rotation","useLU","acos","atan","pi","determ","r","determinant","applyToArray","points","l","mxPoints","applyToTypedArray","use64","Float64Array","Float32Array","applyToContext","_q","isValid","noContext","isEqual","q","toCSS3D","toJSON","JSON","stringify","abs","resolveEventType","resolution","_playGame2","feature","ACTION","ACTION_DOWN","ACTION_UP","ACTION_MOVE","ACTION_OUT","_playGame","_typesQueue","_typesQueue2","Queue","EVENT","isDOMReady","initialize","register","ready","_eventName","READY_QUEUE","trigger","GAMES","implementation","nameCollection","_typesGlobalScope2","_typesGame2","_item","_playGameComponent","_playGameComponent2","_playGameManager","_playGameManager2","_typesEvents","_typesEvents2","_typesGlobalScope","_typesEntity","_typesEntity2","_typesScreen","_typesScreen2","_typesGame","_platform","_platform2","CONFIG","audioContext","component","manager","on","_event","log","gameData","loadAll","emit","EVENT_INIT","report","exit","_gameScope","saveGameState","progress","EVENT_EXIT","flip","EVENT_FLIPPED","config","keyMixin","provideEntityType","provideScreenType","_mixin","queue","complete","splice","detect","touch","tester","warn","getAudioContext","AudioContext","webkitAudioContext","onfocus","resume","onblur","suspend","enableAudioContext","silence","createBufferSource","buffer","createBuffer","connect","destination","start","disconnect","COMPONENTS","record","load","_callback","getScript","$components","Events","createProxyFunction","$jq","methods","_playGameManagerDraggable","_playGameManagerDraggable2","draggable","boot","createHelperStyleSheet","attachEvents","E","disableTouchScroll","$draggable","cursor","mode","helperID","dragStartEvent","resolveEventPoint","zoom","createID","$helper","draggableStyleSheet","html","provideSource","createDraggableRule","addClass","appendTo","body","removeClass","Event","targetScope","dragMoveEvent","dragEndEvent","documentElement","toElement","remove","originalEvent","changedTouches","clientX","clientY","_$draggable","blacklist","rule","prop","getComputedStyle","_rule","_typesCollection","_typesCollection2","COLLECTION_DRAGABLES","preventDefault","draggableManager","Collection","getRecord","_key","_shouldCollect","add","_record","has","filter","_typesScope","GlobalScope","Scope","createEntity","_$node","componentRecord","Error","_typesJQProxy","_typesJQProxy2","_evalAction","_evalAction2","_typesAudioManager","attachActionHandler","actionables","item","event","action","getRecordBy","removeRecord","captureDropables","_scope","collection","find","pluckAndDrop","_dropables","_template","dropable","replaceWith","children","loadComponentAssets","status","totalRequests","transcludeMode","dropables","TRANSCLUDE_PLUCK","properties","transclude","memory","TRANSCLUDE_APPEND","append","TRANSCLUDE_PREPEND","prepend","empty","TRANSCLUDE_REPLACE","node","findOwn","captureProperties","$els","initializeEntities","entities","bind","$nodes","query","selector","_node","isReady","assetQueue","handleProperties","property","handler","propertyHandlers","getNamedItem","invokeLocal","isMemberSafe","init","willInitEvent","initEvent","watchAssets","captureAudioAssets","captureReferences","__init","readyEvent","media","addShadow","audio","collections","voiceOver","background","sfx","__ready","Actionables","_action","isComponent","currentMedia","_node_selector","_componentName","jquery","ReferenceError","willInit","_nodes","createHandler","watch","loadedEvent","src","onload","onerror","off","deQ","$audio","screen","requiredQueue","AudioManager","then","_audio","is","require","targetNode","audioEvent","targetSource","handleProperty","entity","_selector","Entity","_child","child","_property","required","_Object$keys","jQProxy","response","registerHandler","resolveEventHandler","arg","_definition","eventRegistry","exclude","listen","_isCapure_handler","_isCapture","cb","ignore","removeEventListener","parent","elOwner","toObject","$keys","defined","fails","KEY","exp","evalAction","eval","MediaManager","EventTargetInterface","InspectorInterface","LegislatorInterface","StateInterface","alloc","video","AudioBufferRecord","_buffer","getAudioType","className","AUDIO_TYPES","loadArrayBuffer","xhr","fileName","XMLHttpRequest","open","_Promise","reject","resolve","onLoad","promise","resolveDecoding","rejectDecoding","decodeAudioData","collect","BUFFER_CACHE","statusText","onError","cache","responseType","send","PlayableInterface","_type","AudioCollection","_error","$$","protoype","types","Audio","$el","MediaCollection","_media","$clone","accessConfig","_augment","gain","createGain","getSource","loop","activeSource","createMediaElementSource","message","setContext","_typesType","_typesType2","jQuery","_class","playing","_filterSelector","_query","some","_e","addState","_state","removeState","proxyEvent","theEvent","simEnd","playSource","startTime","ceil","duration","timeout","setTimeout","delayID","shouldPlay","dest","delay","pause","pauseTime","clearTimeout","stop","stopEvent","currentTime","volume","_level","Promise","$at","String","iterated","_i","O","done","toInteger","TO_STRING","charCodeAt","charAt","LIBRARY","redefine","hide","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","NAME","Constructor","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","TAG","DEF_VALUES","VALUES_BUG","$native","$default","IteratorPrototype","createDesc","bitmap","configurable","writable","descriptor","def","stat","store","uid","Symbol","SHARED","px","NodeList","HTMLCollection","addToUnscopables","step","toIObject","_k","Arguments","IObject","cof","classof","isObject","anObject","strictNew","forOf","setProto","same","SPECIES","speciesConstructor","asap","PROMISE","process","isNode","Wrapper","testResolve","sub","USE_NATIVE","P2","works","thenableThenGotten","sameConstructor","getConstructor","isThenable","PromiseCapability","$$resolve","$$reject","perform","notify","isReject","n","chain","ok","reaction","fail","isUnhandled","onunhandledrejection","reason","_d","$reject","$resolve","wrapper","executor","err","onFulfilled","onRejected","catch","capability","iter","all","iterable","abrupt","remaining","results","alreadyCalled","race","ARG","callee","isArrayIter","toLength","getIterFn","iterFn","iterator","ret","ArrayProto","min","getIteratorMethod","check","setPrototypeOf","buggy","__proto__","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","last","flush","domain","enter","nextTick","toggle","createTextNode","observe","characterData","task","invoke","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","ONREADYSTATECHANGE","defer","channel","port","listner","port2","port1","onmessage","postMessage","importScripts","appendChild","removeChild","clear","un","createElement","DESCRIPTORS","SAFE_CLOSING","riter","from","skipClosing","safe","arr","Bindings","_from","_to","_itterable","createApi","_constructor","api","base","constant","_Object$defineProperty","static","_static","_name_def","_def","memberType","props","parse","_call","defs","Super","desc","invokeResponsibilities","responsibilities","ability","resolveTarget","_target","ResponsibilityRecord","_ability","dragGreeter","grab","dragging","release","attachDragEvents","draggables","STATE","PLAYING","BACKGROUND","VOICE_OVER","SFX","timeoutID","intervalID","isComplete","shouldInheritAbilities","frameHandlers","frameRate","bgImageCollection","bg","img","Image","propagateBehavior","ids","_entity","respond","behaviorTarget","gate","behavior","_behavior","behaviorEvent","parentScope","abilities","protoAbilities","provideAblilityPototype","_time","_cb","repeat","setInterval","kill","_timer","clearInterval","eachFrame","_on","binder","frame","lastTime","rate","frames","requestAnimationFrame","_flag","_imp","flag","setter","getter","opperations","names","_opp","uiStateEvent","oppsPerformed","shouldSet","notSet","willSet","didSet","provideBehaviorEventScope","completed","demoMode","close","$parent","deselect","unhighlight","_target_point","Screen","attachBehaviorEvent","startAudio","stopAudio","pauseMedia","resumeMedia","screens","prev","quit","nextSib","prevSib","isLast","Game","detechDevice","deviceClasses","iOS","mobileOrTablet","iDevices","navigator","platform","pop","substr","userAgent","vendor","opera","scaleGame","vpSize","gameDimensions","viewport","toPrecision","transformOrigin","info","collectVideos","onplay","Viewport","screenPrototype","platformEventHandler","_ctx","keyCommands","vp","$html","RESIZE_HANDLERS","orientation","LANDSCAPE","PROTRAIT","SQUAREISH","innerWidth","innerHeight","onResize","offResize","watchAudio","captureScreens","focus","onKeys","_commands","sequence","chords","modifiers",13,16,17,18,27,37,38,39,40,91,"shift","ctrl","alt","esc","up","right","down","meta","modifier","eventMods","currentMods","command","keyCode","fromCharCode","shiftKey","ctrlKey","altKey","metaKey","_modifierDown","screenSelector","beginAudio","currentScreen","not","quitScreen","OPEN","current","createEvent","_props","eventObject","bubbles","cancelable","_data","platformEvent","EVENT_SAVE","frameElement","dispatchEvent"],"mappings":"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","file":"play.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Boot file for the Play library.\n\t *\n\t * @module\n\t *\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires jQExtentions\n\t * @requires play\n\t */\n\t\n\t__webpack_require__(4);\n\t\n\tvar _play = __webpack_require__(23);\n\t\n\tvar _play2 = _interopRequireDefault(_play);\n\t\n\t/**\n\t * Begin running the library\n\t */\n\tfunction run() {\n\t  _play2['default'].game.run();\n\t}\n\t\n\t// export namespace to global object.\n\twindow.play = window.pl = _play2['default'];\n\t\n\t// Invoke 'run' when DOM has finished loading.\n\tdocument.addEventListener('DOMContentLoaded', run, false);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(3);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (obj) {\n\t  return obj && obj.__esModule ? obj : {\n\t    default: obj\n\t  };\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Array$forEach = __webpack_require__(5)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Extentions to jQuery used by the library.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires types/Dimensions\n\t * @requires Matrix\n\t */\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _libMatrix = __webpack_require__(22);\n\t\n\tvar _libMatrix2 = _interopRequireDefault(_libMatrix);\n\t\n\t/**\n\t * jQuery's prototype\n\t * @external jQuery\n\t * @see {@link http://api.jquery.com/}\n\t */\n\t\n\t(function () {\n\t  var original;\n\t\n\t  original = {\n\t    position: this.position\n\t  };\n\t\n\t  /**\n\t   * Resolves the scope for each of the set of matched nodes.\n\t   * @function external:jQuery#scope\n\t   * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n\t   */\n\t  this.scope = function () {\n\t    var result;\n\t\n\t    result = [];\n\t\n\t    this.each(function () {\n\t      var $node, scope;\n\t\n\t      $node = $(this);\n\t      scope = $node.data('pl-scope');\n\t\n\t      if (!scope) {\n\t        scope = $node.closest('.pl-scope').data('pl-scope');\n\t      }\n\t\n\t      if (scope) result.push(scope);\n\t    });\n\t\n\t    return result.length > 1 ? result : result[0];\n\t  };\n\t\n\t  /**\n\t   * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n\t   * @function external:jQuery#id\n\t   * @arg {string} [_set] Name to set as the node's id.\n\t   * @returns {string} The resolved id.\n\t   */\n\t  this.id = function (_set) {\n\t    if (_set !== undefined) {\n\t      // Remove attribute.\n\t      if (~['', null].indexOf(_set)) {\n\t        this.attr('id', null);\n\t      }\n\t\n\t      // If document already has the id defined then set as a unique library id.\n\t      if ($('#' + _set).length) {\n\t        this.attr('pl-id', _set);\n\t      } else {\n\t        this.attr('id', _set);\n\t      }\n\t\n\t      return this;\n\t    }\n\t\n\t    return this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n\t  };\n\t\n\t  /**\n\t   * Provides the 'relative' CSS selector for the first node in the collection.\n\t   * @function external:jQuery#address\n\t   * @returns {string}\n\t   *\n\t   * @example\n\t   * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n\t   * $('#sweater').address() // div#sweater.wide\n\t   */\n\t  this.address = function () {\n\t    var tag, id, classes;\n\t\n\t    tag = this[0].nodeName.toLowerCase();\n\t    id = this.attr('id');\n\t    classes = this.attr('class') ? '.' + this.attr('class').split(' ').join('.') : '';\n\t\n\t    return tag + (id ? '#' + id : '') + classes;\n\t  };\n\t\n\t  /**\n\t   * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n\t   * @function external:jQuery#state\n\t   * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n\t   * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n\t   */\n\t  this.state = function (_test) {\n\t    var classes;\n\t\n\t    if (_test) return this.hasClass(_test.toUpperCase());\n\t\n\t    classes = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\t\n\t    return classes && (classes.length === 1 ? classes[0] : classes);\n\t  };\n\t\n\t  this.size = function () {\n\t    var size;\n\t\n\t    if (!arguments.length) {\n\t      size = _typesDimensions.Size.create().set(this.width(), this.height());\n\t    } else {\n\t      size = _typesDimensions.Size.create(arguments);\n\t      this.css(size);\n\t    }\n\t\n\t    return size;\n\t  };\n\t\n\t  this.position = function () {\n\t    var pos;\n\t\n\t    if (!arguments.length) {\n\t      pos = original.position.call(this);\n\t      pos = _typesDimensions.Point.create().set(pos.left, pos.top);\n\t    } else {\n\t      pos = _typesDimensions.Point.create(arguments);\n\t\n\t      this.css({\n\t        position: 'relative',\n\t        left: pos.x,\n\t        top: pos.y\n\t      });\n\t    }\n\t\n\t    return pos;\n\t  };\n\t\n\t  /**\n\t   * Provides the jQuery offset for the first node in the collection.\n\t   * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n\t   * @function external:jQuery#absolutePosition\n\t   * @returns {Point}\n\t   */\n\t  this.absolutePosition = function () {\n\t    var offset;\n\t\n\t    if (!arguments.length) {\n\t      offset = this.offset();\n\t\n\t      return _typesDimensions.Point.create().set(offset.left, offset.top);\n\t    } else {\n\t      offset = _typesDimensions.Point.create(arguments);\n\t\n\t      this.css({\n\t        position: 'absolute',\n\t        top: offset.y,\n\t        left: offset.x\n\t      });\n\t\n\t      return offset;\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n\t   * @function external:jQuery#transform\n\t   * @arg {number} [_scaleX] - scale x\n\t   * @arg {number} [_shearY] - shear y\n\t   * @arg {number} [_shearX] - shear x\n\t   * @arg {number} [_scaleY] - scale y\n\t   * @arg {number} [_translateX] - translate x\n\t   * @arg {number} [_translateY] - translate y\n\t   * @returns {Matrix}\n\t   */\n\t\n\t  /**\n\t   * Provides the CSS matrix transform for the first node in the collection.\n\t   * @function external:jQuery#transform\n\t   * @returns {Matrix}\n\t   */\n\t  this.transform = function () {\n\t    var t, matrix, is3d;\n\t\n\t    matrix = new _libMatrix2['default']();\n\t\n\t    if (!arguments.length) {\n\t      t = this.css('transform');\n\t      is3d = !! ~t.indexOf('matrix3d');\n\t\n\t      if (t !== 'none') {\n\t        t = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n\t        if (is3d) {\n\t          t = (function (_matrix) {\n\t            var i, result;\n\t\n\t            result = [];\n\t\n\t            for (i = 0; i < _matrix.length; i += 4) {\n\t              result = result.concat(_matrix.slice(i, i + 2));\n\t            }\n\t            return result;\n\t          })(t);\n\t        }\n\t\n\t        t = t.map(parseFloat);\n\t\n\t        matrix.setTransform.apply(matrix, t);\n\t\n\t        return matrix;\n\t      }\n\t\n\t      return t;\n\t    }\n\t\n\t    matrix.setTransform.apply(matrix, arguments);\n\t\n\t    this.css('transform', matrix.toCSS());\n\t\n\t    return matrix;\n\t  };\n\t\n\t  /**\n\t   * Getter/Setter for the CSS transform translation. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {Point} _point - A point object {x,y}\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Getter/Setter for the CSS transform translation.\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {number} _x - x coordinate\n\t   * @arg {number} _y - y coordinate\n\t   * @returns {Point}\n\t   */\n\t  this.transformPosition = function () {\n\t    var matrix, point;\n\t\n\t    matrix = this.transform();\n\t    point = _typesDimensions.Point.create().set(0, 0);\n\t\n\t    if (!arguments.length) {\n\t      if (matrix !== 'none') point.set(matrix.e, matrix.f);\n\t    } else {\n\t      if (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t      point.set.apply(point, arguments);\n\t      matrix.translate(point.x, point.y);\n\t      this.css('transform', matrix.toCSS());\n\t    }\n\t\n\t    return point;\n\t  };\n\t\n\t  /**\n\t   * Getter for the CSS transform scale. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Setter for the CSS transform scale. (overloaded)\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {Point} _point - A point object {x,y}\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Setter for the CSS transform scale.\n\t   * @function external:jQuery#transformPosition\n\t   * @arg {number} _x - x coordinate\n\t   * @arg {number} _y - y coordinate\n\t   * @returns {Point}\n\t   */\n\t  this.transformScale = function () {\n\t    var matrix, scale;\n\t\n\t    matrix = this.transform();\n\t    scale = _typesDimensions.Point.create().set(1, 1);\n\t\n\t    if (!arguments.length) {\n\t      if (matrix !== 'none') scale.set(matrix.a, matrix.d);\n\t    } else {\n\t      if (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t      scale.set.apply(scale, arguments);\n\t      matrix.scale(scale.x, scale.y);\n\t      this.css('transform', matrix.toCSS());\n\t    }\n\t\n\t    return scale;\n\t  };\n\t\n\t  /**\n\t   * Accessor method for `pl` attributes.\n\t   */\n\t  this.pl = function (_name, _value) {\n\t    var args, result;\n\t\n\t    if (!_name) {\n\t      result = {};\n\t      this.each(function () {\n\t        _Array$forEach(this.attributes, function (_attr) {\n\t          if (_attr.name.indexOf('pl-') === 0) {\n\t            result[_attr.name.slice(3)] = _attr.value;\n\t          }\n\t        });\n\t      });\n\t      return result;\n\t    }\n\t\n\t    args = ['pl-' + _name];\n\t    if (typeof _value !== 'undefined') args.push(_value);\n\t\n\t    if (_value === null) {\n\t      this.removeAttr('pl-' + _name);\n\t      return this;\n\t    }\n\t\n\t    return this.attr.apply(this, args);\n\t  };\n\t\n\t  /**\n\t   * Invoke a method of each item in the set of matched elements.\n\t   */\n\t  this.exec = function (_method, _args) {\n\t    return this.map(function () {\n\t      if (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n\t    }).toArray();\n\t  };\n\t}).call($.fn);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(6), __esModule: true };\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(7);\n\tmodule.exports = __webpack_require__(11).Array.forEach;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// JavaScript 1.6 / Strawman array statics shim\n\tvar $       = __webpack_require__(8)\n\t  , $export = __webpack_require__(9)\n\t  , $ctx    = __webpack_require__(12)\n\t  , $Array  = __webpack_require__(11).Array || Array\n\t  , statics = {};\n\tvar setStatics = function(keys, length){\n\t  $.each.call(keys.split(','), function(key){\n\t    if(length == undefined && key in $Array)statics[key] = $Array[key];\n\t    else if(key in [])statics[key] = $ctx(Function.call, [][key], length);\n\t  });\n\t};\n\tsetStatics('pop,reverse,shift,keys,values,entries', 1);\n\tsetStatics('indexOf,every,some,forEach,map,filter,find,findIndex,includes', 3);\n\tsetStatics('join,slice,concat,push,splice,unshift,sort,lastIndexOf,' +\n\t           'reduce,reduceRight,copyWithin,fill');\n\t$export($export.S, 'Array', statics);\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tvar $Object = Object;\n\tmodule.exports = {\n\t  create:     $Object.create,\n\t  getProto:   $Object.getPrototypeOf,\n\t  isEnum:     {}.propertyIsEnumerable,\n\t  getDesc:    $Object.getOwnPropertyDescriptor,\n\t  setDesc:    $Object.defineProperty,\n\t  setDescs:   $Object.defineProperties,\n\t  getKeys:    $Object.keys,\n\t  getNames:   $Object.getOwnPropertyNames,\n\t  getSymbols: $Object.getOwnPropertySymbols,\n\t  each:       [].forEach\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(10)\n\t  , core      = __webpack_require__(11)\n\t  , ctx       = __webpack_require__(12)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && key in target;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(param){\n\t        return this instanceof C ? new C(param) : C(param);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;  // forced\n\t$export.G = 2;  // global\n\t$export.S = 4;  // static\n\t$export.P = 8;  // proto\n\t$export.B = 16; // bind\n\t$export.W = 32; // wrap\n\tmodule.exports = $export;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '1.2.6'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(13);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(15)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t *\n\t * @module\n\t * @version 1.1\n\t * @author Micah Rolon <functionmicah@gmail.com>\n\t * @requires module:types/BasicArray~BasicArray\n\t *\n\t * @desc *Created: 11/12/14*\n\t *\n\t * This file contains objects for containing values about a plane. i.e. x or width.\n\t * Adds the convenience of keeping these values paired to passed around your application.\n\t * It also includes methods which you perform on the values and returns a new object\n\t * so the original values are maintained.\n\t *\n\t * #### Usage\n\t *\n\t * New instances can be created by calling the create method.\n\t * ```\n\t * cursorLocation = Point.create();\n\t * ```\n\t *\n\t * Then call `set()` to apply your values.\n\t * ```\n\t * cursorLocation.set(event.clientX, event.clientY);\n\t * ```\n\t *\n\t * Then you can use the calculation methods to perform transformations.\n\t * ```\n\t * relativeCursor = cursorLocation.scale(zoom);\n\t * ```\n\t *\n\t * #### Developer Notes\n\t *\n\t * When adding new methods make sure you are returning a new instance.\n\t * Dimensional objects are meant to be immutable.\n\t *\n\t * Follow this pattern:\n\t * ```\n\t * this.method = function () {\n\t *     // set with your calculated values.\n\t *     return this.create().set( ... )\n\t * }\n\t * ```\n\t *\n\t * #### Change Log\n\t * *v1.1 - 12/13/15*\n\t * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n\t */\n\t\n\t/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\t\n\tvar _typesBasicArray = __webpack_require__(17);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\tvar Dimension, Size, Point;\n\t\n\t/**\n\t * The native Array\n\t * @external Array\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n\t */\n\t\n\t/**\n\t * Array prototype extension\n\t * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n\t * @function external:Array#to\n\t * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n\t * @example\n\t * somePoint = [10, 10].to(Point);\n\t * somePoint = [10, 10].to('point');\n\t */\n\tArray.prototype.to = function (_Thing) {\n\t  var map;\n\t\n\t  map = {\n\t    point: Point,\n\t    size: Size\n\t  };\n\t\n\t  if (typeof _Thing === 'string') {\n\t    return map[_Thing.toLowerCase()].create().set(this);\n\t  } else if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n\t    if (!_Thing.isPrototypeOf(this)) {\n\t      return _Thing.set.apply(_Thing.create(), this);\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n\t * @class\n\t * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tDimension = _typesBasicArray2['default'].extend(function () {\n\t  var originalMap;\n\t\n\t  originalMap = this.map;\n\t\n\t  this[0] = this[1] = 0;\n\t  this.planeMap = null, this.length = 2;\n\t\n\t  /**\n\t   * Provides a new instance.\n\t   * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n\t   * @returns {Dimension}\n\t   */\n\t  this.create = function (_argumentsArray) {\n\t    var instance;\n\t\n\t    instance = this.proto();\n\t\n\t    if (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\t\n\t    return instance;\n\t  };\n\t\n\t  /**\n\t   * Incerement each plane by a value or specify each plane.\n\t   * @arg {number} _val - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.inc = function (_val, _plane2) {\n\t    var a, b;\n\t\n\t    if (_val.length === 2) {\n\t      a = _val[0];\n\t      b = _val[1];\n\t    } else if (_plane2 != null) {\n\t      a = _val;\n\t      b = _plane2;\n\t    } else {\n\t      a = b = _val;\n\t    }\n\t\n\t    return this.create().set(this[0] + a, this[1] + b);\n\t  };\n\t\n\t  /**\n\t   * Decerement each plane by a value or specify each plane.\n\t   * @arg {number} _val - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.dec = function (_val, _plane2) {\n\t    var a, b;\n\t\n\t    if (_val.length === 2) {\n\t      a = _val[0];\n\t      b = _val[1];\n\t    } else if (_plane2 != null) {\n\t      a = _val;\n\t      b = _plane2;\n\t    } else {\n\t      a = b = _val;\n\t    }\n\t\n\t    return this.create().set(this[0] - a, this[1] - b);\n\t  };\n\t\n\t  /**\n\t   * Multiply each plane by a value or specify each plane.\n\t   * @arg {number} _scale - plane a of (a,b)\n\t   * @arg {number} [_plane2] - plane b of (a,b)\n\t   * @returns {Dimension}\n\t   */\n\t  this.scale = function (_scale, _plane2) {\n\t    return this.create().set(this[0] * _scale, this[1] * (_plane2 != null ? _plane2 : _scale));\n\t  };\n\t\n\t  /**\n\t   * Perfom a Math function on each plane\n\t   * @arg {string} _fun - a string of the function name in the JS Math object,\n\t   * followed by the whatever arguments the function takes after its first\n\t   * since the first argument is the plane value.\n\t   * @returns {Dimension}\n\t   */\n\t  this.math = function (_fun) {\n\t    var args = [].slice.call(arguments, 1);\n\t\n\t    return this.create().set(Math[_fun].apply(Math, [this[0]].concat(args)), Math[_fun].apply(Math, [this[1]].concat(args)));\n\t  };\n\t\n\t  /**\n\t   * Takes each plane value and passes it to parseInt().\n\t   * @returns {Dimension}\n\t   */\n\t  this.parseInt = function () {\n\t    return this.create().set(parseInt(this[0]), parseInt(this[1]));\n\t  };\n\t\n\t  /**\n\t   * Takes each plane value and passes it to parseFloat().\n\t   * @returns {Dimension}\n\t   */\n\t  this.parseFloat = function () {\n\t    return this.create().set(parseFloat(this[0]), parseFloat(this[1]));\n\t  };\n\t\n\t  /**\n\t   * Resolves the name of the plane at the given index.\n\t   * @arg {number} _index - The index of the plane.\n\t   * @returns {string}\n\t   */\n\t  this.planeOf = function (_index) {\n\t    if (isNaN(parseInt(_index))) return null;\n\t    return this.planeMap[_index];\n\t  };\n\t\n\t  /**\n\t   * Make a new array by iterating over each plane.<br>\n\t   * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n\t   * @arg {function} _handler - handler for each index.\n\t   * @override\n\t   * @returns {Dimension}\n\t   */\n\t  this.map = function (_handler) {\n\t    return originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n\t  };\n\t\n\t  /**\n\t   * Multiplies the planes.\n\t   * @returns {number}\n\t   */\n\t  this.product = function () {\n\t    return this[0] * this[1];\n\t  };\n\t\n\t  /**\n\t   * Divides the planes.\n\t   * @returns {number}\n\t   */\n\t  this.ratio = function () {\n\t    return this[0] / this[1];\n\t  };\n\t\n\t  this.quotient = function () {\n\t    return Math.floor(this[0] / this[1]);\n\t  };\n\t\n\t  this.remainder = function () {\n\t    return this[0] % this[1];\n\t  };\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc 2 Dimensional object containing width and height.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} width - The width.\n\t * @prop {number} height - The height.\n\t */\n\tSize = Dimension.extend(function () {\n\t  /**\n\t   * Maps the names of the indexes.<br>\n\t   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t   * @protected\n\t   * @default ['width', 'height']\n\t   */\n\t  this.planeMap = ['width', 'height'];\n\t\n\t  _Object$defineProperties(this, {\n\t    width: {\n\t      get: function get() {\n\t        return this[0];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[0] = Number(_val);\n\t      }\n\t    },\n\t\n\t    height: {\n\t      get: function get() {\n\t        return this[1];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[1] = Number(_val);\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * Define the size with an object. (overloaded)\n\t   * @function module:types/Dimensions~Size#set\n\t   * @arg {object} _size - A size object {width, height}.\n\t   * @returns {Size}\n\t   */\n\t\n\t  /**\n\t   * Define the size with an array. (overloaded)\n\t   * @function module:types/Dimensions~Size#set\n\t   * @arg {array} _size - A size array [width, height].\n\t   * @returns {Size}\n\t   */\n\t\n\t  /**\n\t   * Define the size.\n\t   * @arg {number} _width - The width.\n\t   * @arg {number} _height - The height.\n\t   * @returns {Size}\n\t   */\n\t  this.set = function (_width, _height) {\n\t    if (arguments.length === 1) {\n\t      if (_width.width !== undefined && _width.height !== undefined) {\n\t        this[0] = Number(_width.width);\n\t        this[1] = Number(_width.height);\n\t      } else if (_width.length === 2) {\n\t        this[0] = Number(_width[0]);\n\t        this[1] = Number(_width[1]);\n\t      }\n\t    } else {\n\t      this[0] = Number(_width);\n\t      this[1] = Number(_height);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Calculates the hypotenuse.\n\t   * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n\t   * @returns {number}\n\t   */\n\t  this.hypotenuse = function () {\n\t    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n\t  };\n\t\n\t  /**\n\t   * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n\t   * @arg {object|HTMLElement} - The object or DOM node.\n\t   * @returns {this}\n\t   */\n\t  this.applyTo = function (_object) {\n\t    if (_object.nodeType === document.ELEMENT_NODE) {\n\t      if (!(_object.width !== undefined || _object.height !== undefined)) {\n\t        _object.style.width = this.width;\n\t        _object.style.height = this.height;\n\t\n\t        return this;\n\t      }\n\t    }\n\t\n\t    _object.width = this.width;\n\t    _object.height = this.height;\n\t\n\t    return this;\n\t  };\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} x - The x coordinate.\n\t * @prop {number} y - The y coordinate.\n\t */\n\tPoint = Dimension.extend(function () {\n\t  /**\n\t   * Maps the names of the indexes.<br>\n\t   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t   * @protected\n\t   * @default ['x', 'y']\n\t   */\n\t  this.planeMap = ['x', 'y'];\n\t\n\t  _Object$defineProperties(this, {\n\t    x: {\n\t      get: function get() {\n\t        return this[0];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[0] = Number(_val);\n\t      }\n\t    },\n\t\n\t    y: {\n\t      get: function get() {\n\t        return this[1];\n\t      },\n\t\n\t      set: function set(_val) {\n\t        this[1] = Number(_val);\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * Define the point with an object. (overloaded)\n\t   * @function module:types/Dimensions~Point#set\n\t   * @arg {object} _point - A point object {x, y}.\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Define the point with an array. (overloaded)\n\t   * @function module:types/Dimensions~Point#set\n\t   * @arg {array} _point - A point array [x, y].\n\t   * @returns {Point}\n\t   */\n\t\n\t  /**\n\t   * Define the point.\n\t   * @arg {number} _x - The x.\n\t   * @arg {number} _y - The y.\n\t   * @returns {Point}\n\t   */\n\t  this.set = function (_x, _y) {\n\t    if (arguments.length === 1) {\n\t      if (_x.x !== undefined && _x.y !== undefined) {\n\t        this[0] = Number(_x.x);\n\t        this[1] = Number(_x.y);\n\t      } else if (_x.length === 2) {\n\t        this[0] = Number(_x[0]);\n\t        this[1] = Number(_x[1]);\n\t      }\n\t    } else {\n\t      this[0] = Number(_x);\n\t      this[1] = Number(_y);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Calculates the distance between the insatnce and a point object.\n\t   * @arg {Point} _point - A point object {x,y}.\n\t   * @returns {Size}\n\t   */\n\t  this.distance = function (_point) {\n\t    if (_point.x !== undefined && _point.y !== undefined) {\n\t      return Size.create().set(_point.x - this.x, _point.y - this.y);\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n\t   * @arg {object|HTMLElement} - The object or DOM node.\n\t   * @returns {this}\n\t   */\n\t  this.applyTo = function (_object) {\n\t    if (_object.nodeType === document.ELEMENT_NODE) {\n\t      _object.style.left = this.x;\n\t      _object.style.top = this.y;\n\t    } else {\n\t      _object.x = this.x;\n\t      _object.y = this.y;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Rotate the point based on an origin point and an angle in degrees.\n\t   * @arg {Point} _origin - A point object {x,y}.\n\t   * @arg {number} _angle - The angle of rotation in degrees.\n\t   * @returns {this}\n\t   */\n\t  this.rotate = function (_origin, _angle) {\n\t    var x, y, rad;\n\t\n\t    rad = _angle * (Math.PI / 180);\n\t\n\t    x = this.x - _origin.x;\n\t    y = this.y - _origin.y;\n\t\n\t    return this.create().set(Math.sin(rad) * x - Math.cos(rad) * y + _origin.x, Math.cos(rad) * x + Math.sin(rad) * y + _origin.y);\n\t  };\n\t});\n\t\n\texports['default'] = { Dimension: Dimension, Size: Size, Point: Point };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(16), __esModule: true };\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function defineProperties(T, D){\n\t  return $.setDescs(T, D);\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'array like' objects.\n\t * @module\n\t * @requires module:util\n\t * @requires module:types/Basic\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n\t * @classdesc A base object type for 'array like' object.\n\t * @class\n\t * @extends external:Array\n\t * @extends module:types/Basic~Basic\n\t * @mixes module:types/Basic~Basic\n\t */\n\tvar BasicArray = (function () {\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @memberof module:types/BasicArray~BasicArray\n\t   * @readonly\n\t   * @default\n\t   */\n\t  this.baseType = 'TYPE_BASIC_ARRAY';\n\t\n\t  _util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t  return this;\n\t}).call([]);\n\t\n\texports['default'] = BasicArray;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * Utility functions.\n\t * @namespace\n\t * @author Micah Rolon <micah@ginasink.com>\n\t * @memberof module:play~pl\n\t */\n\tvar util = new function () {\n\t\n\t  /**\n\t   * Accepts one or more objects to combine their own properties to single object.\n\t   * @arg {object} _target - The object that will recieve all members.\n\t   * @arg {object} _sources... - The object(s) to join with the '_target'.\n\t   * @returns {object} _target\n\t   */\n\t  this.mixin = function () {\n\t    var member, i, target, objs;\n\t\n\t    target = arguments[0];\n\t    objs = [].slice.call(arguments, 1);\n\t\n\t    for (i = 0; i < objs.length; i += 1) {\n\t      for (member in objs[i]) {\n\t        if (!objs[i].hasOwnProperty(member)) continue;\n\t        target[member] = objs[i][member];\n\t      }\n\t    }\n\t\n\t    return target;\n\t  };\n\t\n\t  /**\n\t   * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n\t   * @arg {object} _obj - Object to search in.\n\t   * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t   * @returns {string} The name of the key in the object matching '_member'.\n\t   */\n\t  this.keyOf = function (_obj, _member) {\n\t    var member;\n\t\n\t    for (member in _obj) {\n\t      if (!_obj.hasOwnProperty(member)) continue;\n\t      if (_obj[member] === _member) return member;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n\t   * @arg {object} _obj - The object to search.\n\t   * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n\t   * @return {object} An object containing the name of the property and the owning object. {name, object}\n\t   */\n\t  this.getOwner = function (_obj, _member) {\n\t    var prototype, name;\n\t\n\t    prototype = Object.getPrototypeOf(_obj);\n\t\n\t    // keep searching until we go as deep as we can go.\n\t    while (prototype) {\n\t      // search for the key in the prototype\n\t      name = util.keyOf(prototype, _member);\n\t\n\t      // If we found the key in the prototype then we found\n\t      // our match and we can break out of the loop.\n\t      if (name) break;\n\t\n\t      // Otherwise go deeper (thats what she said ;p)\n\t      prototype = Object.getPrototypeOf(prototype);\n\t    }\n\t\n\t    return {\n\t      name: name,\n\t      object: prototype\n\t    };\n\t  };\n\t\n\t  /**\n\t   * Given a range; provides a random number in that range.\n\t   * @function play~pl.util.random\n\t   * @arg {number} _rangeA - A number for the low end of the range.\n\t   * @arg {number} _rangeB - The top end of the range.\n\t   * @returns {number|*} The resulting number in range or the member found at random.\n\t   */\n\t\n\t  /**\n\t   * Given an iterable; provides a random item.\n\t   * @arg {array} _collection - The iterable.\n\t   * @returns {number|*} The member found at random.\n\t   */\n\t  this.random = function (_collection_rangeA, _rangeB) {\n\t    var index, val;\n\t\n\t    index = Math.floor(Math.random() * _collection_rangeA.length);\n\t\n\t    if (arguments.length === 2) {\n\t      val = Math.round(Math.random() * _rangeB);\n\t\n\t      return val < _collection_rangeA ? _collection_rangeA : val;\n\t    }\n\t\n\t    if (index === _collection_rangeA.length) index = _collection_rangeA.length - 1;\n\t\n\t    return _collection_rangeA && _collection_rangeA[index];\n\t  };\n\t\n\t  /**\n\t   * Take string and makes it dot notation friendly.\n\t   * @arg {string} _id - The string to transform.\n\t   * @arg {boolean} _camelCase - Transform with camel case.\n\t   * @returns {string}\n\t   */\n\t  this.transformId = function (_id, _camelCase) {\n\t    if (_id && _camelCase) {\n\t      return _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n\t        return RegExp.$1.toUpperCase();\n\t      });\n\t    }\n\t\n\t    return _id && _id.replace(/[-\\s]+/g, '_');\n\t  };\n\t\n\t  /**\n\t   * Test all arguments for != null\n\t   * @return {boolean}\n\t   */\n\t  this.isSet = function () {\n\t    return [].every.call(arguments, function (_arg) {\n\t      return _arg != null;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * Parses a formated string and calculates it in milliseconds.\n\t   * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n\t   * @return {number}\n\t   */\n\t  this.toMillisec = function (_source) {\n\t    var tokens, time, units;\n\t\n\t    if (typeof _source === 'number') return _source;\n\t    if (!_source) return;\n\t\n\t    tokens = _source.split(/\\s+/);\n\t    time = 0;\n\t    units = {\n\t      d: 24 * 60 * 60 * 1000,\n\t      h: 60 * 60 * 1000,\n\t      m: 60 * 1000,\n\t      s: 1000\n\t    };\n\t\n\t    tokens.forEach(function (_token) {\n\t      var unit, value;\n\t\n\t      unit = (_token.match(/[dhms]/) || [])[0];\n\t\n\t      if (unit) {\n\t        value = Number(_token.slice(0, -1));\n\t        time += value * units[unit];\n\t      } else {\n\t        time += Number(_token);\n\t      }\n\t    });\n\t\n\t    return time;\n\t  };\n\t\n\t  /**\n\t   * Needs no introduction\n\t   * @arg {iterable} _collection - iterable.\n\t   * @return {array}\n\t   */\n\t  this.toArray = function (_collection) {\n\t    return Array.prototype.map.call(_collection, function (i) {\n\t      return i;\n\t    });\n\t  };\n\t\n\t  /**\n\t   * Resolves the value in the object at the given path.\n\t   * @arg {object} _obj - The object to query.\n\t   * @arg {string} _path - The path to the desired reference.\n\t   * @returns {*} The resulting reference value.\n\t   * @example\n\t   * var user = {\n\t   *   name: 'John',\n\t   *   family: {\n\t   *     guardians: {David}, // property could be an array of multiple guardians.\n\t   *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n\t   *   }\n\t   * };\n\t   *\n\t   * pl.util.resolvePath(user, 'family.sliblings[2].name');\n\t   * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n\t   * pl.util.resolvePath(user, 'family.guardians[0]?.name');\n\t   */\n\t  this.resolvePath = function (_obj, _path) {\n\t    var path, obj, i, name, index, testArray;\n\t\n\t    path = _path.split('.');\n\t    obj = _obj;\n\t    i = 0;\n\t\n\t    while (obj) {\n\t      testArray = /\\?$/.test(path[i]);\n\t      index = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n\t      name = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n\t      obj = obj[name];\n\t\n\t      if (~index && obj) {\n\t        obj = testArray ? obj[index] || obj : obj[index];\n\t      }\n\t\n\t      i += 1;\n\t\n\t      if (path.length === i) break;\n\t    }\n\t\n\t    return obj;\n\t  };\n\t\n\t  this.assignRef = function (_obj, _name, _ref) {\n\t    var name;\n\t\n\t    name = util.transformId(_name, true);\n\t\n\t    if (_obj[name] === _ref) return _ref;\n\t\n\t    if (_obj[name]) {\n\t      if (!_obj[name].__refCollction__) {\n\t        _obj[name] = [_obj[name]];\n\t\n\t        Object.defineProperty(_obj[name], '__refCollction__', {\n\t          value: true,\n\t          enumerable: false,\n\t          writeable: false,\n\t          configureable: false\n\t        });\n\t      }\n\t      _obj[name].push(_ref);\n\t    } else {\n\t      _obj[name] = _ref;\n\t    }\n\t\n\t    return _obj[name];\n\t  };\n\t\n\t  /**\n\t   * N0 OPeration.\n\t   */\n\t  this.noop = function () {};\n\t\n\t  /**\n\t   * Get the file name out of a simple file path.\n\t   * @arg {string} _path - The file path.\n\t   * @returns {string} The extracted name.\n\t   */\n\t  this.resolveFileName = function (_path) {\n\t    return _path.slice(_path.lastIndexOf('/') + 1);\n\t  };\n\t\n\t  /**\n\t   * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n\t   * - x; produces a letter a-f.\n\t   * - y; produces a digit 0-9.\n\t   * - z; produces a 4 character hex value derived from the now time stamp.\n\t   * @arg {string} _pattern - The xyz pattern.\n\t   * @returns {string} The generated ID.\n\t   */\n\t  this.createId = function (_pattern) {\n\t    return (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n\t      if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t      if (_token === 'y') return Math.floor(Math.random() * 10).toString(16);\n\t      return Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n\t    });\n\t  };\n\t}();\n\t\n\texports['default'] = util;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'classes' implementing methods for extention and super callbacks.\n\t * @module\n\t * @requires module:play~pl.util\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n\t * @classdesc The base type for all objects which will act as prototypes.\n\t * @class\n\t */\n\tvar Basic = {\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @readonly\n\t   * @default\n\t   */\n\t  baseType: 'TYPE_BASIC',\n\t\n\t  /**\n\t   * Creates a new object with the current object as its prototype.\n\t   * @instance\n\t   * @returns {Basic} The new instance.\n\t   */\n\t  create: function create() {\n\t    return _Object$create(this);\n\t  },\n\t\n\t  /**\n\t   * Creates a new object using a constructor function or object with the current object as its prototype.\n\t   * @instance\n\t   * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n\t   * @returns {Basic} The new instance.\n\t   *\n\t   * @todo define constructor property\n\t   */\n\t  extend: function extend(_implementation) {\n\t    var instance;\n\t\n\t    if (!_implementation) return null;\n\t\n\t    switch (typeof _implementation) {\n\t      case 'function':\n\t        _implementation.prototype = this;\n\t        instance = new _implementation();\n\t        break;\n\t\n\t      case 'object':\n\t        instance = this.create();\n\t        instance.mixin(_implementation);\n\t        break;\n\t\n\t      default:\n\t        console.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n\t    }\n\t\n\t    return instance;\n\t  },\n\t\n\t  /**\n\t   * Accepts one or more objects to combine their own properties to the instance.\n\t   * @instance\n\t   * @arg {object} _sources... - The object(s) to join with the instance.\n\t   * @returns this\n\t   */\n\t  mixin: function mixin() {\n\t    return _util2['default'].mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n\t  },\n\t\n\t  /**\n\t   * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n\t   * @instance\n\t   * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t   * @returns {string} The name of the key in the object matching '_member'.\n\t   */\n\t  keyOf: function keyOf(_member) {\n\t    return _util2['default'].keyOf(this, _member);\n\t  },\n\t\n\t  /**\n\t   * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n\t   * @instance\n\t   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t   * @returns {*} Whatever the caller returns.\n\t   */\n\t  proto: function proto() {\n\t    var method, name, owner, prototype;\n\t\n\t    // Get the function which invoked proto() in the call stack.\n\t    // If the caller is a behavior then we retrieve the method.\n\t    method = this.proto.caller.method || this.proto.caller;\n\t\n\t    // Check to see if 'this' owns the method.\n\t    // NOTE: We may want to move this logic into getOwner().\n\t    if (name = this.keyOf(method)) {\n\t      prototype = Object.getPrototypeOf(this);\n\t    }\n\t\n\t    // Otherwise find the object which owns the caller function.\n\t    else {\n\t        owner = _util2['default'].getOwner(this, method);\n\t        name = owner.name;\n\t        prototype = Object.getPrototypeOf(owner.object);\n\t      }\n\t\n\t    method = prototype[name];\n\t\n\t    if (!method) {\n\t      console.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n\t      return null;\n\t    }\n\t\n\t    return method.apply(this, arguments);\n\t  },\n\t\n\t  /**\n\t   * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n\t   * @instance\n\t   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t   * @returns {*} Whatever the caller returns.\n\t   */\n\t  sup: function sup() {\n\t    var method, name, owner, prototype;\n\t\n\t    // Get the function which invoked sup() in the call stack.\n\t    method = this.sup.caller;\n\t    owner = _util2['default'].getOwner(this, this.baseType);\n\t    prototype = owner.object;\n\t    name = this.keyOf(method);\n\t\n\t    // Check to see if 'this' owns the method.\n\t    // NOTE: We may want to move this logic into getOwner().\n\t    //\n\t    if (!name) {\n\t      owner = _util2['default'].getOwner(this, method);\n\t      name = owner.name;\n\t    }\n\t\n\t    method = prototype[name];\n\t\n\t    if (!method) {\n\t      console.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n\t      return null;\n\t    }\n\t\n\t    return method.apply(this, arguments);\n\t  },\n\t\n\t  /**\n\t   * Provides the object type.\n\t   * @instance\n\t   */\n\t  toString: function toString() {\n\t    var type;\n\t\n\t    if (this.baseType) {\n\t      type = this.baseType.replace('TYPE_', '');\n\t      type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t    } else {\n\t      type = this.constructor.name || 'Object';\n\t    }\n\t\n\t    return '[object ' + type + ']';\n\t  }\n\t\n\t};\n\t\n\texports['default'] = Basic;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(21), __esModule: true };\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function create(P, D){\n\t  return $.create(P, D);\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\r\n\t *\r\n\t * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n\t * All rights are reserved to Epistemex.\r\n\t *\r\n\t * 2D transformation matrix object initialized with identity matrix.\r\n\t *\r\n\t * The matrix can synchronize a canvas context by supplying the context\r\n\t * as an argument, or later apply current absolute transform to an\r\n\t * existing context.\r\n\t *\r\n\t * All values are handled as floating point values.\r\n\t *\r\n\t * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n\t * @prop {number} a - scale x\r\n\t * @prop {number} b - shear y\r\n\t * @prop {number} c - shear x\r\n\t * @prop {number} d - scale y\r\n\t * @prop {number} e - translate x\r\n\t * @prop {number} f - translate y\r\n\t * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n\t * @constructor\r\n\t */\n\tfunction Matrix(context) {\n\t\n\t    var me = this;\n\t    me._t = me.transform;\n\t\n\t    me.a = me.d = 1;\n\t    me.b = me.c = me.e = me.f = 0;\n\t\n\t    me.context = context;\n\t\n\t    // reset canvas transformations (if any) to enable 100% sync.\n\t    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\n\t}\n\t\n\tMatrix.prototype = {\n\t\n\t    /**\r\n\t     * Concatenates transforms of this matrix onto the given child matrix and\r\n\t     * returns a new matrix. This instance is used on left side.\r\n\t     *\r\n\t     * @param {Matrix} cm - child matrix to apply concatenation to\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    concat: function concat(cm) {\n\t        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the horizontal values.\r\n\t     */\n\t    flipX: function flipX() {\n\t        return this._t(-1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the vertical values.\r\n\t     */\n\t    flipY: function flipY() {\n\t        return this._t(1, 0, 0, -1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Reflects incoming (velocity) vector on the normal which will be the\r\n\t     * current transformed x axis. Call when a trigger condition is met.\r\n\t     *\r\n\t     * NOTE: BETA, simple implementation\r\n\t     *\r\n\t     * @param {number} x - vector end point for x (start = 0)\r\n\t     * @param {number} y - vector end point for y (start = 0)\r\n\t     * @returns {{x: number, y: number}}\r\n\t     */\n\t    reflectVector: function reflectVector(x, y) {\n\t\n\t        var v = this.applyToPoint(0, 1),\n\t            d = 2 * (v.x * x + v.y * y);\n\t\n\t        x -= d * v.x;\n\t        y -= d * v.y;\n\t\n\t        return { x: x, y: y };\n\t    },\n\t\n\t    /**\r\n\t     * Short-hand to reset current matrix to an identity matrix.\r\n\t     */\n\t    reset: function reset() {\n\t        return this.setTransform(1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Rotates current matrix accumulative by angle.\r\n\t     * @param {number} angle - angle in radians\r\n\t     */\n\t    rotate: function rotate(angle) {\n\t        var cos = Math.cos(angle),\n\t            sin = Math.sin(angle);\n\t        return this._t(cos, sin, -sin, cos, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Converts a vector given as x and y to angle, and\r\n\t     * rotates (accumulative).\r\n\t     * @param x\r\n\t     * @param y\r\n\t     * @returns {*}\r\n\t     */\n\t    rotateFromVector: function rotateFromVector(x, y) {\n\t        return this.rotate(Math.atan2(y, x));\n\t    },\n\t\n\t    /**\r\n\t     * Helper method to make a rotation based on an angle in degrees.\r\n\t     * @param {number} angle - angle in degrees\r\n\t     */\n\t    rotateDeg: function rotateDeg(angle) {\n\t        return this.rotate(angle * Math.PI / 180);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix uniformly and accumulative.\r\n\t     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n\t     */\n\t    scaleU: function scaleU(f) {\n\t        return this._t(f, 0, 0, f, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scale: function scale(sx, sy) {\n\t        return this._t(sx, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on x axis accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     */\n\t    scaleX: function scaleX(sx) {\n\t        return this._t(sx, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on y axis accumulative.\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scaleY: function scaleY(sy) {\n\t        return this._t(1, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shear: function shear(sx, sy) {\n\t        return this._t(1, sy, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for x to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     */\n\t    shearX: function shearX(sx) {\n\t        return this._t(1, 0, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for y to the current matrix accumulative.\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shearY: function shearY(sy) {\n\t        return this._t(1, sy, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skew: function skew(ax, ay) {\n\t        return this.shear(Math.tan(ax), Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for x to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     */\n\t    skewX: function skewX(ax) {\n\t        return this.shearX(Math.tan(ax));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for y to the current matrix accumulative.\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skewY: function skewY(ay) {\n\t        return this.shearY(Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Set current matrix to new absolute matrix.\r\n\t     * @param {number} a - scale x\r\n\t     * @param {number} b - shear y\r\n\t     * @param {number} c - shear x\r\n\t     * @param {number} d - scale y\r\n\t     * @param {number} e - translate x\r\n\t     * @param {number} f - translate y\r\n\t     */\n\t    setTransform: function setTransform(a, b, c, d, e, f) {\n\t        var me = this;\n\t        me.a = a;\n\t        me.b = b;\n\t        me.c = c;\n\t        me.d = d;\n\t        me.e = e;\n\t        me.f = f;\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translate: function translate(tx, ty) {\n\t        return this._t(1, 0, 0, 1, tx, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on x axis accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     */\n\t    translateX: function translateX(tx) {\n\t        return this._t(1, 0, 0, 1, tx, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on y axis accumulative.\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translateY: function translateY(ty) {\n\t        return this._t(1, 0, 0, 1, 0, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Multiplies current matrix with new matrix values.\r\n\t     * @param {number} a2 - scale x\r\n\t     * @param {number} b2 - shear y\r\n\t     * @param {number} c2 - shear x\r\n\t     * @param {number} d2 - scale y\r\n\t     * @param {number} e2 - translate x\r\n\t     * @param {number} f2 - translate y\r\n\t     */\n\t    transform: function transform(a2, b2, c2, d2, e2, f2) {\n\t\n\t        var me = this,\n\t            a1 = me.a,\n\t            b1 = me.b,\n\t            c1 = me.c,\n\t            d1 = me.d,\n\t            e1 = me.e,\n\t            f1 = me.f;\n\t\n\t        /* matrix order (canvas compatible):\r\n\t         * ace\r\n\t         * bdf\r\n\t         * 001\r\n\t         */\n\t        me.a = a1 * a2 + c1 * b2;\n\t        me.b = b1 * a2 + d1 * b2;\n\t        me.c = a1 * c2 + c1 * d2;\n\t        me.d = b1 * c2 + d1 * d2;\n\t        me.e = a1 * e2 + c1 * f2 + e1;\n\t        me.f = b1 * e2 + d1 * f2 + f1;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Divide this matrix on input matrix which must be invertible.\r\n\t     * @param {Matrix} m - matrix to divide on (divisor)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divide: function divide(m) {\n\t\n\t        if (!m.isInvertible()) throw \"Input matrix is not invertible\";\n\t\n\t        var im = m.inverse();\n\t\n\t        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\n\t    },\n\t\n\t    /**\r\n\t     * Divide current matrix on scalar value != 0.\r\n\t     * @param {number} d - divisor (can not be 0)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divideScalar: function divideScalar(d) {\n\t\n\t        var me = this;\n\t        me.a /= d;\n\t        me.b /= d;\n\t        me.c /= d;\n\t        me.d /= d;\n\t        me.e /= d;\n\t        me.f /= d;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Get an inverse matrix of current matrix. The method returns a new\r\n\t     * matrix with values you need to use to get to an identity matrix.\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    inverse: function inverse() {\n\t\n\t        if (this.isIdentity()) {\n\t            return new Matrix();\n\t        } else if (!this.isInvertible()) {\n\t            throw \"Matrix is not invertible.\";\n\t        } else {\n\t            var me = this,\n\t                a = me.a,\n\t                b = me.b,\n\t                c = me.c,\n\t                d = me.d,\n\t                e = me.e,\n\t                f = me.f,\n\t                m = new Matrix(),\n\t                dt = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t            m.a = d / dt;\n\t            m.b = -b / dt;\n\t            m.c = -c / dt;\n\t            m.d = a / dt;\n\t            m.e = (c * f - d * e) / dt;\n\t            m.f = -(a * f - b * e) / dt;\n\t\n\t            return m;\n\t        }\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation is naive. For animation use the\r\n\t     * intrpolateAnim() method instead.\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolate: function interpolate(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix();\n\t\n\t        m.a = me.a + (m2.a - me.a) * t;\n\t        m.b = me.b + (m2.b - me.b) * t;\n\t        m.c = me.c + (m2.c - me.c) * t;\n\t        m.d = me.d + (m2.d - me.d) * t;\n\t        m.e = me.e + (m2.e - me.e) * t;\n\t        m.f = me.f + (m2.f - me.f) * t;\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation method uses decomposition which makes\r\n\t     * it suitable for animations (in particular where rotation takes\r\n\t     * places).\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolateAnim: function interpolateAnim(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix(),\n\t            d1 = me.decompose(),\n\t            d2 = m2.decompose(),\n\t            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\n\t            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\n\t            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\n\t            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\n\t            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t;\n\t\n\t        m.translate(translateX, translateY);\n\t        m.rotate(rotation);\n\t        m.scale(scaleX, scaleY);\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Decompose the current matrix into simple transforms using either\r\n\t     * QR (default) or LU decomposition. Code adapted from\r\n\t     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n\t     *\r\n\t     * The result must be applied in the following order to reproduce the current matrix:\r\n\t     *\r\n\t     *     QR: translate -> rotate -> scale -> skewX\r\n\t     *     LU: translate -> skewY  -> scale -> skewX\r\n\t     *\r\n\t     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n\t     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n\t     */\n\t    decompose: function decompose(useLU) {\n\t\n\t        var me = this,\n\t            a = me.a,\n\t            b = me.b,\n\t            c = me.c,\n\t            d = me.d,\n\t            acos = Math.acos,\n\t            atan = Math.atan,\n\t            sqrt = Math.sqrt,\n\t            pi = Math.PI,\n\t            translate = { x: me.e, y: me.f },\n\t            rotation = 0,\n\t            scale = { x: 1, y: 1 },\n\t            skew = { x: 0, y: 0 },\n\t            determ = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t        if (useLU) {\n\t            if (a) {\n\t                skew = { x: atan(c / a), y: atan(b / a) };\n\t                scale = { x: a, y: determ / a };\n\t            } else if (b) {\n\t                rotation = pi * 0.5;\n\t                scale = { x: b, y: determ / b };\n\t                skew.x = atan(d / b);\n\t            } else {\n\t                // a = b = 0\n\t                scale = { x: c, y: d };\n\t                skew.x = pi * 0.25;\n\t            }\n\t        } else {\n\t            // Apply the QR-like decomposition.\n\t            if (a || b) {\n\t                var r = sqrt(a * a + b * b);\n\t                rotation = b > 0 ? acos(a / r) : -acos(a / r);\n\t                scale = { x: r, y: determ / r };\n\t                skew.x = atan((a * c + b * d) / (r * r));\n\t            } else if (c || d) {\n\t                var s = sqrt(c * c + d * d);\n\t                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\n\t                scale = { x: determ / s, y: s };\n\t                skew.y = atan((a * c + b * d) / (s * s));\n\t            } else {\n\t                // a = b = c = d = 0\n\t                scale = { x: 0, y: 0 }; // = invalid matrix\n\t            }\n\t        }\n\t\n\t        return {\n\t            scale: scale,\n\t            translate: translate,\n\t            rotation: rotation,\n\t            skew: skew\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Returns the determinant of the current matrix.\r\n\t     * @returns {number}\r\n\t     */\n\t    determinant: function determinant() {\n\t        return this.a * this.d - this.b * this.c;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to x and y point.\r\n\t     * Returns a point object.\r\n\t     *\r\n\t     * @param {number} x - value for x\r\n\t     * @param {number} y - value for y\r\n\t     * @returns {{x: number, y: number}} A new transformed point object\r\n\t     */\n\t    applyToPoint: function applyToPoint(x, y) {\n\t\n\t        var me = this;\n\t\n\t        return {\n\t            x: x * me.a + y * me.c + me.e,\n\t            y: x * me.b + y * me.d + me.f\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to array with point objects or point pairs.\r\n\t     * Returns a new array with points in the same format as the input array.\r\n\t     *\r\n\t     * A point object is an object literal:\r\n\t     *\r\n\t     * {x: x, y: y}\r\n\t     *\r\n\t     * so an array would contain either:\r\n\t     *\r\n\t     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n\t     *\r\n\t     * or\r\n\t     * [x1, y1, x2, y2, ... xn, yn]\r\n\t     *\r\n\t     * @param {Array} points - array with point objects or pairs\r\n\t     * @returns {Array} A new array with transformed points\r\n\t     */\n\t    applyToArray: function applyToArray(points) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l,\n\t            mxPoints = [];\n\t\n\t        if (typeof points[0] === 'number') {\n\t\n\t            l = points.length;\n\t\n\t            while (i < l) {\n\t                p = this.applyToPoint(points[i++], points[i++]);\n\t                mxPoints.push(p.x, p.y);\n\t            }\n\t        } else {\n\t            for (; p = points[i]; i++) {\n\t                mxPoints.push(this.applyToPoint(p.x, p.y));\n\t            }\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to a typed array with point pairs. Although\r\n\t     * the input array may be an ordinary array, this method is intended\r\n\t     * for more performant use where typed arrays are used. The returned\r\n\t     * array is regardless always returned as a Float32Array.\r\n\t     *\r\n\t     * @param {*} points - (typed) array with point pairs\r\n\t     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n\t     * @returns {*} A new typed array with transformed points\r\n\t     */\n\t    applyToTypedArray: function applyToTypedArray(points, use64) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l = points.length,\n\t            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\n\t\n\t        while (i < l) {\n\t            p = this.applyToPoint(points[i], points[i + 1]);\n\t            mxPoints[i++] = p.x;\n\t            mxPoints[i++] = p.y;\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply to any canvas 2D context object. This does not affect the\r\n\t     * context that optionally was referenced in constructor unless it is\r\n\t     * the same context.\r\n\t     * @param {CanvasRenderingContext2D} context\r\n\t     */\n\t    applyToContext: function applyToContext(context) {\n\t        var me = this;\n\t        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is an identity matrix (no transforms applied).\r\n\t     * @returns {boolean} True if identity (not transformed)\r\n\t     */\n\t    isIdentity: function isIdentity() {\n\t        var me = this;\n\t        return me._q(me.a, 1) && me._q(me.b, 0) && me._q(me.c, 0) && me._q(me.d, 1) && me._q(me.e, 0) && me._q(me.f, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is invertible\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isInvertible: function isInvertible() {\n\t        return !this._q(this.determinant(), 0);\n\t    },\n\t\n\t    /**\r\n\t     * Test if matrix is valid.\r\n\t     */\n\t    isValid: function isValid() {\n\t        return !this._q(this.a * this.d, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Clones current instance and returning a new matrix.\r\n\t     * @param {boolean} [noContext=false] don't clone context reference if true\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    clone: function clone(noContext) {\n\t        var me = this,\n\t            m = new Matrix();\n\t        m.a = me.a;\n\t        m.b = me.b;\n\t        m.c = me.c;\n\t        m.d = me.d;\n\t        m.e = me.e;\n\t        m.f = me.f;\n\t        if (!noContext) m.context = me.context;\n\t\n\t        return m;\n\t    },\n\t\n\t    /**\r\n\t     * Compares current matrix with another matrix. Returns true if equal\r\n\t     * (within epsilon tolerance).\r\n\t     * @param {Matrix} m - matrix to compare this matrix with\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isEqual: function isEqual(m) {\n\t\n\t        var me = this,\n\t            q = me._q;\n\t\n\t        return q(me.a, m.a) && q(me.b, m.b) && q(me.c, m.c) && q(me.d, m.d) && q(me.e, m.e) && q(me.f, m.f);\n\t    },\n\t\n\t    /**\r\n\t     * Returns an array with current matrix values.\r\n\t     * @returns {Array}\r\n\t     */\n\t    toArray: function toArray() {\n\t        var me = this;\n\t        return [me.a, me.b, me.c, me.d, me.e, me.f];\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS: function toCSS() {\n\t        return \"matrix(\" + this.toArray() + \")\";\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix3d() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS3D: function toCSS3D() {\n\t        var me = this;\n\t        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\n\t    },\n\t\n\t    /**\r\n\t     * Returns a JSON compatible string of current matrix.\r\n\t     * @returns {string}\r\n\t     */\n\t    toJSON: function toJSON() {\n\t        return JSON.stringify(this.toArray());\n\t    },\n\t\n\t    /**\r\n\t     * Returns a string with current matrix as comma-separated list.\r\n\t     * @returns {string}\r\n\t     */\n\t    toString: function toString() {\n\t        return \"\" + this.toArray();\n\t    },\n\t\n\t    /**\r\n\t     * Compares floating point values with some tolerance (epsilon)\r\n\t     * @param {number} f1 - float 1\r\n\t     * @param {number} f2 - float 2\r\n\t     * @returns {boolean}\r\n\t     * @private\r\n\t     */\n\t    _q: function _q(f1, f2) {\n\t        return Math.abs(f1 - f2) < 1e-14;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current absolute matrix to context if defined, to sync it.\r\n\t     * @private\r\n\t     */\n\t    _x: function _x() {\n\t        var me = this;\n\t        if (me.context) me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    }\n\t};\n\t\n\texports[\"default\"] = Matrix;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the global root level namespace for the library.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires game\n\t * @requires module:play~pl.util\n\t * @requires types/Basic\n\t * @requires types/Dimensions\n\t */\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar pl;\n\t/**\n\t * Resolves the event type for user interactions.\n\t */\n\tfunction resolveEventType() {\n\t  var resolution;\n\t\n\t  if (_playGame2['default'].feature('touch')) {\n\t    resolution = {\n\t      ACTION: 'touchend',\n\t      ACTION_DOWN: 'touchstart',\n\t      ACTION_UP: 'touchend',\n\t      ACTION_MOVE: 'touchmove',\n\t      ACTION_OUT: 'touchcancel'\n\t    };\n\t  } else {\n\t    resolution = {\n\t      ACTION: 'click',\n\t      ACTION_DOWN: 'mousedown',\n\t      ACTION_UP: 'mouseup',\n\t      ACTION_MOVE: 'mousemove',\n\t      ACTION_OUT: 'mouseout'\n\t    };\n\t  }\n\t\n\t  return resolution;\n\t}\n\t\n\t/**\n\t * Globaly accesable, root level namespace for the library.\n\t * @namespace\n\t * @prop {object} EVENT - Namespace for noralized event name constants.\n\t * @prop {Basic} Basic - Base object type.\n\t * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n\t * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n\t * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n\t * @prop {object} util - Namespace for utility functions.\n\t */\n\tpl = {\n\t  Basic: _typesBasic2['default'], Point: _typesDimensions.Point, Size: _typesDimensions.Size, Queue: _typesQueue2['default'],\n\t  game: _playGame2['default'],\n\t  util: _util2['default'],\n\t\n\t  /**\n\t   * @namespace\n\t   * @prop {string} ACTION - The device normalized `click` event name.\n\t   * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n\t   * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n\t   * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n\t   * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n\t   */\n\t  EVENT: resolveEventType()\n\t};\n\t\n\texports['default'] = pl;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @module game\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play.game.component\n\t * @requires play.game.manager\n\t * @requires util\n\t * @requires types/Events\n\t * @requires types/GlobalScope\n\t * @requires types/Entity\n\t * @requires types/Screen\n\t * @requires types/Game\n\t */\n\t\n\tvar _playGameComponent = __webpack_require__(25);\n\t\n\tvar _playGameComponent2 = _interopRequireDefault(_playGameComponent);\n\t\n\tvar _playGameManager = __webpack_require__(27);\n\t\n\tvar _playGameManager2 = _interopRequireDefault(_playGameManager);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesEntity = __webpack_require__(93);\n\t\n\tvar _typesEntity2 = _interopRequireDefault(_typesEntity);\n\t\n\tvar _typesScreen = __webpack_require__(94);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesGame = __webpack_require__(95);\n\t\n\tvar _typesGame2 = _interopRequireDefault(_typesGame);\n\t\n\tvar _platform = __webpack_require__(96);\n\t\n\tvar _platform2 = _interopRequireDefault(_platform);\n\t\n\tvar GAMES, CONFIG, READY_QUEUE;\n\t\n\t/**\n\t * Define a game scope for registration and/or initialization.\n\t * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction game(_name, _implementation) {\n\t  if (game.isDOMReady) {\n\t    initialize(_name, _implementation);\n\t  } else {\n\t    register(_name, _implementation);\n\t  }\n\t}\n\t\n\tfunction ready(_eventName) {\n\t  if (READY_QUEUE.length) return false;\n\t  game.trigger(_eventName || 'ready');\n\t}\n\t\n\t/**\n\t * Registers an implementation of a game scope for initialization.\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction register(_name, _implementation) {\n\t  if (! ~GAMES.indexOf(_name)) {\n\t    GAMES.push({\n\t      id: _name,\n\t      implementation: _implementation\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t * Initializes an implementation of a game scope. (overloaded)\n\t * @function initialize\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\t\n\t/**\n\t * Initializes an implementation of a game scope.\n\t * @protected\n\t * @arg {array} _collection - The collection of game scope records for initialization.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction initialize(nameCollection, implementation) {\n\t  switch (typeof nameCollection) {\n\t    case 'string':\n\t      _typesGlobalScope2['default'][nameCollection] = _typesGame2['default'].extend(implementation).initialize('#' + nameCollection);\n\t      break;\n\t\n\t    case 'object':\n\t      nameCollection.forEach(function (_item) {\n\t        initialize(_item.id, _item.implementation);\n\t      });\n\t      break;\n\t  }\n\t}\n\t\n\t/** @protected */\n\tGAMES = [];\n\t/** @protected */\n\tCONFIG = {};\n\t/** @protected */\n\tREADY_QUEUE = [];\n\t\n\t/**\n\t * Interface for game level configuration.\n\t * @namespace game\n\t * @memberof module:play~pl\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t  var audioContext;\n\t\n\t  this.component = _playGameComponent2['default'];\n\t  this.manager = _playGameManager2['default'];\n\t\n\t  _util2['default'].mixin(game, _typesEvents2['default']);\n\t\n\t  this.on('platform-event', function (_event) {\n\t    console.log('play.game -', _event.name, _event.gameData);\n\t  });\n\t\n\t  /**\n\t   * Starts the dominos falling\n\t   * @function run\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.run = function () {\n\t    game.isDOMReady = true;\n\t    game.trigger('dom-ready');\n\t\n\t    game.component.loadAll(function () {\n\t      // console.log('** All component sources loaded.');\n\t      initialize(GAMES);\n\t\n\t      GAMES = null;\n\t    });\n\t\n\t    _platform2['default'].emit(_platform2['default'].EVENT_INIT);\n\t  };\n\t\n\t  this.report = function (_name) {\n\t    _platform2['default'].emit(_name);\n\t\n\t    return this.report;\n\t  };\n\t\n\t  this.report.exit = function (_gameScope) {\n\t    _platform2['default'].saveGameState(_gameScope.progress());\n\t    _platform2['default'].emit(_platform2['default'].EVENT_EXIT);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.report.flip = function (_gameScope) {\n\t    var data = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    if (_gameScope.game) {\n\t      _gameScope = _gameScope.game;\n\t    }\n\t    _platform2['default'].emit(_platform2['default'].EVENT_FLIPPED, data);\n\t    _platform2['default'].saveGameState(_gameScope.progress());\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Getter/Setter for game level configuration.\n\t   * @function module:play~pl.game.config\n\t   * @arg {string} _key - The key to retrieve\n\t   * @returns {this}\n\t   */\n\t\n\t  /**\n\t   * Getter/Setter for game level configuration.\n\t   * @function config\n\t   * @memberof module:play~pl.game\n\t   * @arg {object} _mixin - Object to set properties on configuration.\n\t   * @returns {this}\n\t   */\n\t  this.config = function (keyMixin) {\n\t    switch (typeof keyMixin) {\n\t      case 'string':\n\t        return _util2['default'].resolvePath(CONFIG, keyMixin);\n\t      case 'object':\n\t        if (keyMixin) _util2['default'].mixin(CONFIG, keyMixin);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * @function provideEntityType\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.provideEntityType = function () {\n\t    return _typesEntity2['default'];\n\t  };\n\t\n\t  /**\n\t   * @function provideScreenType\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.provideScreenType = function () {\n\t    return _typesScreen2['default'];\n\t  };\n\t\n\t  /**\n\t   * Augments the global scope.\n\t   * @function scope\n\t   * @arg {function|object} _mixin - Object or constructor to define members.\n\t   * @returns {this}\n\t   *\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.scope = function (_mixin) {\n\t    if (typeof _mixin === 'function') {\n\t      _mixin.call(_typesGlobalScope2['default']);\n\t    } else if (_mixin) {\n\t      _typesGlobalScope2['default'].mixin(_mixin);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * @function queue\n\t   * @deprecated\n\t   * @memberof module:play~pl.game\n\t   */\n\t  this.queue = function (_item) {\n\t    if (! ~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.queue.complete = function (_item, _eventName) {\n\t    var index;\n\t\n\t    index = READY_QUEUE.indexOf(_item);\n\t    READY_QUEUE.splice(index, 1);\n\t\n\t    ready(_eventName);\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Accessor for the detected features supported by the browser.\n\t   *\n\t   * *Supported Feature Detectors*\n\t   * - touch\n\t   *\n\t   * @function feature;\n\t   * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n\t   * @returns {boolean} The support status for the specified feature.\n\t   */\n\t  this.feature = (function () {\n\t    var detect = {\n\t      touch: function touch() {\n\t        return window.hasOwnProperty('ontouchend');\n\t      }\n\t    };\n\t\n\t    return function (_name) {\n\t      var tester = detect[_name];\n\t      if (!tester && console) console.warn('No feature detection for \"' + _name + '\".');\n\t      return tester && tester();\n\t    };\n\t  })();\n\t\n\t  this.getAudioContext = function () {\n\t    if (!audioContext) {\n\t      audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\t      window.onfocus = function () {\n\t        audioContext.resume();\n\t      };\n\t      window.onblur = function () {\n\t        audioContext.suspend();\n\t      };\n\t    }\n\t    return audioContext;\n\t  };\n\t\n\t  this.enableAudioContext = function () {\n\t    var ctx, silence;\n\t\n\t    ctx = this.getAudioContext();\n\t    silence = ctx.createBufferSource();\n\t\n\t    silence.buffer = ctx.createBuffer(2, 1, 44100);\n\t    silence.connect(ctx.destination);\n\t    silence.start();\n\t    silence.disconnect();\n\t\n\t    return silence;\n\t  };\n\t}).call(game);\n\t\n\texports['default'] = game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play~pl.util\n\t * @requires types/Events\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\t/**\n\t * Collection of component behavior records\n\t * @const\n\t */\n\tvar COMPONENTS;\n\t\n\t/**\n\t * Registers a component behavior.\n\t * @arg {string} _name - The name for the component.\n\t * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n\t * @returns {@link module:play~pl.game}\n\t */\n\tfunction component(_name, _implementation) {\n\t  if (!component.get(_name)) {\n\t    COMPONENTS.push({\n\t      name: _name,\n\t      implementation: _implementation,\n\t      config: {}\n\t    });\n\t  }\n\t\n\t  return this;\n\t}\n\t\n\tCOMPONENTS = [];\n\t\n\t/**\n\t * Methods to manage and load component behavior scripts.\n\t * @namespace component\n\t * @memberof module:play~pl.game\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t  _util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t  /**\n\t   * Given a name; provides the component record. `{name, implementation}`\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {string} _name - The name of the component.\n\t   * @returns {object} The record.\n\t   */\n\t  this.get = function (_name) {\n\t    var i, record;\n\t\n\t    for (i = 0; record = COMPONENTS[i]; i += 1) {\n\t      if (record.name === _name) return record;\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  /**\n\t   * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n\t   * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {string} _name - The name of the component.\n\t   * @arg {function} _callback - Callback for load success.\n\t   * @todo Implement Promises.\n\t   * @returns `this`\n\t   */\n\t  this.load = function (_name, _callback) {\n\t    var path;\n\t\n\t    if (component.get(_name)) {\n\t      if (_callback) _callback.call(component, _name);\n\t      return null;\n\t    }\n\t\n\t    path = pl.game.config('componentDirectory') + _name + '/behavior.js';\n\t\n\t    $.getScript(path, function () {\n\t      if (_callback) _callback.call(component, _name);\n\t      component.trigger('loaded', [_name]);\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Loads all the component scripts for HTML elements with `pl-component` attributes.\n\t   * @memberof module:play~pl.game.component\n\t   * @arg {function} _callback - Callback for load success.\n\t   * @todo Implement Promises.\n\t   * @returns `this`\n\t   */\n\t  this.loadAll = function (_callback) {\n\t    var $components, queue;\n\t\n\t    $components = $('[pl-component]');\n\t    queue = [];\n\t\n\t    $components.each(function (_index) {\n\t      var name;\n\t\n\t      name = $(this).attr('pl-component');\n\t\n\t      if (~queue.indexOf(name)) return;\n\t\n\t      queue.push(name);\n\t    });\n\t\n\t    queue.slice(0).forEach(function (_name) {\n\t      component.load(_name, function () {\n\t        var index;\n\t\n\t        index = queue.indexOf(_name);\n\t        queue.splice(index, 1);\n\t\n\t        if (!queue.length && _callback) _callback.apply(component, arguments);\n\t      });\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  // Maybe?\n\t  // this.config = function () {};\n\t}).call(component);\n\t\n\texports['default'] = component;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Events\n\t*  @desc Contains methods for managing and dispatching events from objects.\n\t*  @proto Basic\n\t*/\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar Events = _typesBasic2['default'].extend(function () {\n\t  var i, method, methods;\n\t  /**\n\t  *  @desc Creates a function with a proxy to the jQuery method.\n\t  *  @param _name (String) The name of the method being proxied.\n\t  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t  *  @private\n\t  */\n\t  function createProxyFunction(_name) {\n\t    return function () {\n\t      var $jq = $();\n\t      // We must wrap our object in jQuery. If 'typeof this' is a function then we need\n\t      // to add it in this manner, otherwise jQuery treats it like a ready callback.\n\t      $jq.push(this);\n\t\n\t      return $.fn[_name].apply($jq, arguments);\n\t    };\n\t  }\n\t\n\t  methods = ['on', 'off', 'trigger'];\n\t\n\t  this.baseType = 'TYPE_EVENTS';\n\t\n\t  for (i = 0; method = methods[i]; i += 1) {\n\t    this[method] = createProxyFunction(method);\n\t  }\n\t});\n\t\n\texports['default'] = Events;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _playGameManagerDraggable = __webpack_require__(28);\n\t\n\tvar _playGameManagerDraggable2 = _interopRequireDefault(_playGameManagerDraggable);\n\t\n\texports.draggable = _playGameManagerDraggable2['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar COLLECTION_DRAGABLES = _typesCollection2['default'].create(); //eslint-ignore-line\n\t\n\tvar draggableStyleSheet;\n\t\n\tfunction boot() {\n\t  createHelperStyleSheet();\n\t  attachEvents();\n\t}\n\t\n\tfunction attachEvents() {\n\t  var state, E;\n\t\n\t  E = pl.EVENT;\n\t\n\t  // Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n\t  if (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\t\n\t  $(document).on(E.ACTION_DOWN, function (_event) {\n\t    var $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\t\n\t    $draggable = $(_event.target).closest('[pl-draggable]');\n\t\n\t    if ($draggable.length) {\n\t      scope = $draggable.scope();\n\t      cursor = resolveEventPoint(_event, 1 / scope.game.zoom);\n\t      mode = $draggable.pl('draggable');\n\t      game = {\n\t        position: scope.game.absolutePosition(),\n\t        scale: scope.game.transformScale().x\n\t      };\n\t      point = $draggable.absolutePosition().dec(game.position);\n\t      transform = $draggable.transform();\n\t      helperID = createID();\n\t      state = {\n\t        mode: mode,\n\t        $draggable: $draggable,\n\t        scope: scope,\n\t        $helper: null,\n\t\n\t        start: {\n\t          cursor: cursor,\n\t          point: point,\n\t          transform: transform\n\t        },\n\t\n\t        progress: {\n\t          distance: null,\n\t          point: null,\n\t          transform: null\n\t        }\n\t      };\n\t\n\t      // FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n\t      // so we need to account for the game transform scale.\n\t      //\n\t      if (game.scale !== 1) point = point.scale(1 / game.scale);\n\t\n\t      draggableStyleSheet.html(provideSource(helperID, createDraggableRule($draggable)));\n\t\n\t      switch (mode) {\n\t        case 'clone':\n\t          state.$helper = $draggable.clone();\n\t          state.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t          .addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t          break;\n\t\n\t        case 'pluck':\n\t          $draggable.addClass('PLUCKED');\n\t\n\t          state.$helper = $draggable.clone();\n\t          state.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t          .addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t          break;\n\t\n\t        default:\n\t          state.$helper = $draggable;\n\t          break;\n\t      }\n\t\n\t      state.$helper.removeClass('DRAG-ENDED').addClass('DRAG-START');\n\t\n\t      dragStartEvent = $.Event('drag-start', {\n\t        state: state,\n\t        targetScope: scope\n\t      });\n\t\n\t      scope.trigger(dragStartEvent);\n\t    }\n\t  }).on(E.ACTION_MOVE, function (_event) {\n\t    var cursor, $draggable, distance, point, transform, dragMoveEvent;\n\t\n\t    if (state) {\n\t      cursor = resolveEventPoint(_event, 1 / state.scope.game.zoom);\n\t      distance = state.start.cursor.distance(cursor);\n\t      point = _typesDimensions.Point.create();\n\t      transform = null;\n\t\n\t      if (state.start.transform !== 'none') {\n\t        transform = state.start.transform.clone();\n\t        transform.translate(distance.width, distance.height);\n\t        point.set(transform.applyToPoint(0, 0));\n\t      } else {\n\t        point = distance.to('point');\n\t      }\n\t\n\t      if (state.$helper.hasClass('DRAG-START')) {\n\t        state.$helper.removeClass('DRAG-START').addClass('DRAGGING');\n\t      }\n\t\n\t      dragMoveEvent = $.Event('drag-move', {\n\t        state: state,\n\t        targetScope: state.scope\n\t      });\n\t\n\t      state.progress.distance = distance;\n\t      state.progress.point = state.start.point.inc(point);\n\t      state.progress.transform = transform;\n\t\n\t      state.scope.translate(state.$helper, point);\n\t      state.scope.trigger(dragMoveEvent);\n\t    }\n\t  }).on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n\t    var $draggable, dragEndEvent;\n\t\n\t    if (state) {\n\t      // Do not end dragging if we dont mouse out of the document.\n\t      if (_event.type === 'mouseout' && ! ~[null, document.documentElement].indexOf(_event.toElement)) {\n\t        return;\n\t      }\n\t\n\t      $draggable = state.$draggable;\n\t\n\t      if (state.$helper.hasClass('draggable-helper')) {\n\t        state.$helper.on('transitionend', function () {\n\t          $draggable.removeClass('PLUCKED');\n\t          $(this).remove();\n\t        });\n\t      }\n\t\n\t      state.$helper.removeClass('DRAG-START DRAGGING').addClass('DRAG-ENDED');\n\t\n\t      dragEndEvent = $.Event('drag-end', {\n\t        state: state,\n\t        targetScope: state.scope\n\t      });\n\t\n\t      state.scope.trigger(dragEndEvent);\n\t\n\t      state = null;\n\t    }\n\t  });\n\t}\n\t\n\tattachEvents.disableTouchScroll = function () {\n\t  document.addEventListener('touchmove', function (_event) {\n\t    _event.preventDefault();\n\t  }, false);\n\t};\n\t\n\tfunction resolveEventPoint(_event, _scale) {\n\t  var scale = _scale || 1;\n\t\n\t  if (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t    /**\n\t     * For now, interactions should use the last touch if multiple fingers are captured.\n\t     * @todo Maybe invoke action for each touch.\n\t     */\n\t    _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t  }\n\t\n\t  return _typesDimensions.Point.create().set(new function () {\n\t    if (_event.touch) {\n\t      this.x = _event.touch.clientX * scale;\n\t      this.y = _event.touch.clientY * scale;\n\t    } else {\n\t      this.x = _event.clientX * scale;\n\t      this.y = _event.clientY * scale;\n\t    }\n\t  }());\n\t}\n\t\n\tfunction createHelperStyleSheet() {\n\t  draggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n\t}\n\t\n\tfunction createDraggableRule(_$draggable) {\n\t  var i, style, blacklist, rule, prop;\n\t\n\t  style = window.getComputedStyle(_$draggable[0]);\n\t  rule = {};\n\t  blacklist = ['zIndex', 'opacity', 'cursor', 'transition', 'transitionDelay', 'transitionDuration', 'transitionProperty', 'transitionTimingFunction'];\n\t\n\t  for (i = 0; i < style.length; i += 1) {\n\t    prop = _util2['default'].transformId(style[i], true);\n\t    if (~blacklist.indexOf(prop)) continue;\n\t    if (prop.indexOf('Webkit') === 0) prop = prop.slice(0, 1).toLowerCase() + prop.slice(1);\n\t    if (style[prop]) rule[prop] = style[prop];\n\t  }\n\t\n\t  return rule;\n\t}\n\t\n\tfunction provideSource(_id, _rule) {\n\t  var source, prop, value;\n\t\n\t  source = '#' + _id + '.draggable-helper {';\n\t\n\t  for (prop in _rule) {\n\t    if (!_rule.hasOwnProperty(prop)) continue;\n\t    value = _rule[prop];\n\t    source += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase() + ': ' + value + ';';\n\t  }\n\t\n\t  source += '}';\n\t\n\t  return source;\n\t}\n\t\n\tfunction createID() {\n\t  return 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n\t    if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t    return Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n\t  });\n\t}\n\t\n\tvar draggableManager = {};\n\t\n\t$(boot);\n\t\n\texports['default'] = draggableManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Collections are iterables which hold a consistent interface throughout its indexes.\n\t *\n\t * @module\n\t * @requires module:types/BasicArray\n\t */\n\t\n\tvar _typesBasicArray = __webpack_require__(17);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n\t * @classdesc Iterable holding record objects of the same interface.\n\t * @class\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tvar Collection = _typesBasicArray2['default'].extend(function () {\n\t  /**\n\t   * Gets the record object which has `_member` as a member.\n\t   * @instance\n\t   * @protected\n\t   * @memberof module:types/Collection~Collection\n\t   * @arg {*} _member - object reference to search for.\n\t   * @arg {string} _key - the target key to test the `_member` against.\n\t   * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n\t   * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n\t   */\n\t  function getRecord(_member, _key, _shouldCollect) {\n\t    var i, record, member, result;\n\t\n\t    result = [];\n\t\n\t    for (i = 0; record = this[i]; i += 1) {\n\t      if (_key !== undefined) {\n\t        if (record[_key] === _member) {\n\t          if (_shouldCollect) {\n\t            result.push(record);\n\t          } else {\n\t            return record;\n\t          }\n\t        }\n\t      } else if (record instanceof Array) {\n\t        if (~record.indexOf(_member)) {\n\t          if (_shouldCollect) {\n\t            result.push(record);\n\t          } else {\n\t            return record;\n\t          }\n\t        }\n\t      } else {\n\t        for (member in record) {\n\t          if (!record.hasOwnProperty(member)) continue;\n\t          if (record[member] === _member) {\n\t            if (_shouldCollect) {\n\t              result.push(record);\n\t            } else {\n\t              return record;\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    return result.length ? result : null;\n\t  }\n\t\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @memberof module:types/Collection~Collection\n\t   * @readonly\n\t   * @default\n\t   */\n\t  this.baseType = 'TYPE_COLLECTION';\n\t\n\t  this.add = function (_record) {\n\t    if (~this.indexOf(_record)) return false;\n\t    this.push(_record);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.remove = function (_record) {\n\t    var index;\n\t\n\t    index = this.indexOf(_record);\n\t    if (~index) this.splice(index, 1);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.has = function (_record) {\n\t    return !! ~this.indexOf(_record);\n\t  };\n\t\n\t  this.get = function (_member, _key) {\n\t    return getRecord.call(this, _member, _key);\n\t  };\n\t\n\t  this.filter = function (_member, _key) {\n\t    return getRecord.call(this, _member, _key, true);\n\t  };\n\t});\n\t\n\texports['default'] = Collection;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  GlobalScope\n\t*/\n\t\n\tvar _typesScope = __webpack_require__(31);\n\t\n\tvar GlobalScope = _typesScope.Scope.extend(function () {\n\t\n\t  this.baseType = 'TYPE_GLOBAL_SCOPE';\n\t});\n\t\n\texports['default'] = GlobalScope;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n\t * This enables properties and methods to be in context of the DOM node and its descendants.\n\t *\n\t * @module\n\t * @requires types/jQProxy\n\t * @requires types/Basic\n\t * @requires types/Queue\n\t * @requires play.game\n\t * @requires util\n\t * @requires evalAction\n\t *\n\t * @exports createEntity\n\t */\n\t\n\tvar _typesJQProxy = __webpack_require__(32);\n\t\n\tvar _typesJQProxy2 = _interopRequireDefault(_typesJQProxy);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _evalAction = __webpack_require__(41);\n\t\n\tvar _evalAction2 = _interopRequireDefault(_evalAction);\n\t\n\tvar _typesAudioManager = __webpack_require__(42);\n\t\n\t/**\n\t * Creates a new Enitiy instance with a context node and implementation.\n\t * The instance is prototyped from the parent scope.\n\t *\n\t * @memberof module:types/Scope~Scope#createEntity\n\t * @protected\n\t * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n\t * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n\t * @returns {module:types/Scope~Scope}\n\t */\n\tfunction createEntity(_$node, _implementation) {\n\t  var component, prototype, componentRecord, instance;\n\t\n\t  component = _$node.attr('pl-component');\n\t  prototype = this;\n\t\n\t  if (component) {\n\t    componentRecord = _playGame2['default'].component.get(component);\n\t\n\t    if (componentRecord) {\n\t      // If a scope is being defined as an extention of a component before the component scope\n\t      // has been allocated, we construct the component first then pass it as the proto.\n\t      // But we need to make sure we are not allocating the component it self.\n\t      if (componentRecord.implementation !== _implementation) {\n\t        prototype = this.extend(componentRecord.implementation);\n\t      }\n\t    } else {\n\t      throw new Error('No implementation record for the ' + component + 'component.');\n\t    }\n\t  }\n\t\n\t  instance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\t\n\t  return instance.initialize(_$node, component);\n\t}\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n\t * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n\t * @class\n\t * @extends module:types/jQProxy~jQProxy\n\t */\n\tvar Scope = _typesJQProxy2['default'].extend(function () {\n\t\n\t  /**\n\t   * Collection of records pairing a node with its action.\n\t   * @memberof module:types/Scope~Scope\n\t   * @static\n\t   * @protected\n\t   * @todo Convert to types/Collection\n\t   */\n\t  var Actionables;\n\t\n\t  function attachActionHandler() {\n\t    this.on(pl.EVENT.ACTION, function (_event) {\n\t      var target, record;\n\t\n\t      target = $(_event.target).closest('[pl-action]')[0];\n\t\n\t      if (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t        /**\n\t         * For now, interactions should use the last touch if multiple fingers are captured.\n\t         * @todo Maybe invoke action for each touch.\n\t         */\n\t        _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t      }\n\t\n\t      _event.cursor = _typesDimensions.Point.create().set(new function () {\n\t        if (_event.touch) {\n\t          this.x = _event.touch.clientX;\n\t          this.y = _event.touch.clientY;\n\t        } else {\n\t          this.x = _event.clientX;\n\t          this.y = _event.clientY;\n\t        }\n\t      }());\n\t\n\t      if (target) {\n\t        record = this.actionables.item(target);\n\t\n\t        if (record) {\n\t          _event.targetScope = this;\n\t          this.event = _event;\n\t          _evalAction2['default'](record.action, this);\n\t          this.event = null;\n\t        }\n\t      }\n\t    });\n\t  }\n\t\n\t  function getRecordBy(_key, _member, _collection) {\n\t    var i, record;\n\t\n\t    if (_collection) {\n\t      for (i = 0; record = _collection[i]; i += 1) {\n\t        if (record[_key] === _member) return record;\n\t      }\n\t    }\n\t\n\t    return null;\n\t  }\n\t\n\t  function removeRecord(_record, _collection) {\n\t    var index;\n\t\n\t    index = _collection.indexOf(_record);\n\t    if (~index) _collection.splice(index, 1);\n\t  }\n\t\n\t  function captureDropables(_scope) {\n\t    var collection;\n\t\n\t    collection = [];\n\t\n\t    _scope.find('> [pl-pluck]').each(function () {\n\t      var name;\n\t\n\t      name = $(this).attr('pl-pluck');\n\t\n\t      collection.push(this);\n\t      collection[name] = this;\n\t    });\n\t\n\t    return collection;\n\t  }\n\t\n\t  function pluckAndDrop(_dropables, _template) {\n\t    $(_template).find('[pl-drop]').each(function () {\n\t      var $node, name, dropable;\n\t\n\t      $node = $(this);\n\t      name = $node.attr('pl-drop');\n\t      dropable = _dropables[name];\n\t\n\t      if (dropable) {\n\t        $node.replaceWith(dropable.children);\n\t      }\n\t    });\n\t  }\n\t\n\t  // Protected\n\t  function loadComponentAssets(_name, _callback) {\n\t    var scope, path, totalRequests, transcludeMode, dropables;\n\t\n\t    function ready() {\n\t      ready.status += 1;\n\t\n\t      if (ready.status === totalRequests) {\n\t        if (_callback) {\n\t          _callback.call(scope, _name);\n\t        }\n\t      }\n\t    }\n\t\n\t    totalRequests = 0;\n\t    scope = this;\n\t    path = _playGame2['default'].config('componentDirectory') + _name + '/';\n\t    dropables = captureDropables(this);\n\t    transcludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n\t    ready.status = 0;\n\t\n\t    if (!this.children().length || transcludeMode) {\n\t      totalRequests += 1;\n\t      $('<div>').load(path + 'template.html', function () {\n\t        var memory;\n\t\n\t        memory = [];\n\t\n\t        switch (transcludeMode) {\n\t          case scope.TRANSCLUDE_APPEND:\n\t            scope.append(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_PREPEND:\n\t            scope.prepend(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_PLUCK:\n\t            pluckAndDrop(dropables, this);\n\t            scope.empty().append(this.children);\n\t            break;\n\t\n\t          case scope.TRANSCLUDE_REPLACE:\n\t            scope.empty().append(this.children);\n\t            break;\n\t\n\t          default:\n\t            if (transcludeMode) {\n\t              pluckAndDrop(new function () {\n\t                this[transcludeMode] = scope.node();\n\t              }(), this);\n\t              scope.empty().append(this.children);\n\t            } else {\n\t              scope.empty().append(this.children);\n\t            }\n\t\n\t        }\n\t\n\t        scope.findOwn('[pl-component]').each(function () {\n\t          var name;\n\t\n\t          name = $(this).attr('pl-component');\n\t\n\t          if (~memory.indexOf(name)) return;\n\t\n\t          memory.push(name);\n\t\n\t          totalRequests += 1;\n\t\n\t          _playGame2['default'].component.load(name, function () {\n\t            ready();\n\t          });\n\t        });\n\t        ready();\n\t      });\n\t    }\n\t\n\t    if (!$('style[pl-for-component=\"' + _name + '\"]').length && _playGame2['default'].config('shouldLoadComponentStyles') !== false) {\n\t      totalRequests += 1;\n\t      $('<style type=\"text/css\" pl-for-component=\"' + _name + '\">').load(path + 'style.css', ready).appendTo(document.body);\n\t    }\n\t\n\t    if (!totalRequests) _callback && _callback.call(this, _name);\n\t\n\t    return this;\n\t  }\n\t\n\t  function captureProperties() {\n\t    var i, attr, name, collection;\n\t\n\t    collection = (function () {\n\t\n\t      this.has = function (_name) {\n\t        return !! ~this.indexOf(_name);\n\t      };\n\t\n\t      return this;\n\t    }).call([]);\n\t\n\t    for (i = 0; attr = this.$els[0].attributes[i]; i += 1) {\n\t      // I explicitly want it to be at the beginning.\n\t      if (attr.name.indexOf('pl-') === 0) {\n\t        name = attr.name.slice(3);\n\t        collection[_util2['default'].transformId(name, true)] = attr.value;\n\t\n\t        collection.push(name);\n\t      }\n\t    }\n\t\n\t    if (collection.length) this.properties = collection;\n\t\n\t    return this;\n\t  }\n\t\n\t  function initializeEntities() {\n\t    if (!this.hasOwnProperty('entities')) return this;\n\t\n\t    this.entities.forEach(this.bind(function (_record, _index) {\n\t      var $nodes, query, index;\n\t\n\t      $nodes = this.findOwn(_record.selector);\n\t      query = ['#' + _record.selector, '[pl-id=' + _record.selector + ']', '[pl-component=' + _record.selector + ']', '[pl-' + _record.selector + ']'];\n\t      index = 0;\n\t\n\t      while (!$nodes.length) {\n\t        if (index === query.length) {\n\t          throw new Error('Unable to locate entity with selector', _record.selector);\n\t        }\n\t        $nodes = this.findOwn(query[index]);\n\t        index += 1;\n\t      }\n\t\n\t      $nodes.each(this.bind(function (_index, _node) {\n\t        var $node, instance, id;\n\t\n\t        $node = $(_node);\n\t\n\t        if (!Scope.isPrototypeOf(_record)) {\n\t          instance = createEntity.call(this, $node, _record.implementation);\n\t          if (!instance.isReady) this.assetQueue.add(instance);\n\t        } else {\n\t          instance = _record;\n\t        }\n\t\n\t        id = _util2['default'].transformId(instance.id(), true);\n\t        if (id) _util2['default'].assignRef(this, id, instance);\n\t      }));\n\t    }));\n\t\n\t    return this;\n\t  }\n\t\n\t  function handleProperties() {\n\t    var scope, property, handler;\n\t\n\t    scope = this;\n\t\n\t    if (this.hasOwnProperty('properties')) {\n\t      this.properties.forEach(function (_name) {\n\t        handler = scope.propertyHandlers[_name];\n\t        if (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n\t      });\n\t    }\n\t\n\t    if (this.propertyHandlers) {\n\t      for (property in this.propertyHandlers) {\n\t        // Only exclide members on the base type.\n\t        if (_typesBasic2['default'].hasOwnProperty(property)) continue;\n\t\n\t        handler = this.propertyHandlers[property];\n\t\n\t        this.findOwn('[pl-' + property + ']').each(function () {\n\t          var attr;\n\t\n\t          if (scope === $(this).scope()) {\n\t            attr = this.attributes.getNamedItem('pl-' + property);\n\t\n\t            if (handler) handler.call(scope, this, property, attr.value);\n\t          }\n\t        });\n\t      }\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function invokeLocal(_name) {\n\t    var args, owner;\n\t\n\t    args = [].slice.call(arguments, 1);\n\t\n\t    if (this.isMemberSafe(_name)) {\n\t      return this[_name].apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  function init() {\n\t    var willInitEvent, initEvent;\n\t\n\t    initEvent = $.Event('initialize', { targetScope: this });\n\t    willInitEvent = $.Event('will-initialize', { targetScope: this });\n\t\n\t    invokeLocal.call(this, 'willInit');\n\t    this.trigger(willInitEvent);\n\t\n\t    this.attachEvents();\n\t\n\t    initializeEntities.call(this);\n\t    handleProperties.call(this);\n\t\n\t    this.watchAssets();\n\t    this.captureAudioAssets();\n\t    this.captureReferences();\n\t\n\t    this.__init();\n\t    invokeLocal.call(this, 'init');\n\t\n\t    this.trigger(initEvent);\n\t\n\t    if (!this.isReady) this.assetQueue.ready();\n\t\n\t    return this;\n\t  }\n\t\n\t  function ready() {\n\t    var readyEvent, entities;\n\t\n\t    readyEvent = $.Event('ready', { targetScope: this });\n\t    entities = this.findOwn('.pl-scope').scope();\n\t\n\t    if (entities) {\n\t      if (entities.length > 0) {\n\t        this.entities = entities;\n\t      } else {\n\t        this.entities = [entities];\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Sort audio into DOM order.\n\t     * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n\t     */\n\t    if (this.hasOwnProperty('audio')) {\n\t      (this.game || this).media.addShadow(this.audio);\n\t      this.audio.collections().forEach((function (_collection) {\n\t        var map = {\n\t          voiceOver: 'voice-over',\n\t          background: 'background',\n\t          sfx: 'sfx'\n\t        };\n\t\n\t        if (!_collection.length) return;\n\t\n\t        this.findOwn('audio.' + map[_collection.type]).each(function (_index, _node) {\n\t          var id, audio, collection, index;\n\t\n\t          id = $(_node).id();\n\t          audio = (_collection.find('#' + id) || [])[0];\n\t          index = _collection.indexOf(audio);\n\t\n\t          if (index !== _index) {\n\t            _collection[index] = _collection[_index];\n\t            _collection[_index] = audio;\n\t          }\n\t        });\n\t      }).bind(this));\n\t    }\n\t\n\t    this.isReady = true;\n\t    this.addClass('READY');\n\t\n\t    this.__ready();\n\t    invokeLocal.call(this, 'ready');\n\t\n\t    this.trigger(readyEvent);\n\t  }\n\t\n\t  Actionables = (function () {\n\t\n\t    _util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t    this.add = function (_node, _action) {\n\t      if (!this.has(_node)) {\n\t        this.push({\n\t          node: _node,\n\t          action: _action\n\t        });\n\t      }\n\t\n\t      return this;\n\t    };\n\t\n\t    this.remove = function (_node) {\n\t      var item, index;\n\t\n\t      item = this.item(_node);\n\t      index = this.indexOf(item);\n\t      if (~index) this.splice(index, 1);\n\t\n\t      return this;\n\t    };\n\t\n\t    this.item = function (_node) {\n\t      var i, item;\n\t\n\t      for (i = 0; item = this[i]; i += 1) {\n\t        if (item.node === _node) return item;\n\t      }\n\t    };\n\t\n\t    this.has = function (_node) {\n\t      return !!this.item(_node);\n\t    };\n\t\n\t    return this;\n\t  }).call([]);\n\t\n\t  this.TRANSCLUDE_REPLACE = 'replace';\n\t  this.TRANSCLUDE_PREPEND = 'prepend';\n\t  this.TRANSCLUDE_APPEND = 'append';\n\t  this.TRANSCLUDE_PLUCK = 'pluck';\n\t\n\t  this.baseType = 'TYPE_SCOPE';\n\t  this.actionables = null;\n\t  this.isReady = null;\n\t  this.isComponent = false;\n\t  this.entities = null;\n\t  this.audio = null;\n\t  this.properties = null;\n\t  this.propertyHandlers = null;\n\t  this.assetQueue = null;\n\t  this.event = null;\n\t  this.currentMedia = {};\n\t\n\t  this.initialize = function (_node_selector, _componentName) {\n\t    var scope;\n\t\n\t    scope = this;\n\t\n\t    this.isReady = false;\n\t    this.isComponent = !!_componentName;\n\t    this.event = null;\n\t    this.assetQueue = _typesQueue2['default'].create();\n\t    this.$els = _node_selector.jquery ? _node_selector : $(_node_selector);\n\t\n\t    if (!this.$els.length) {\n\t      throw new ReferenceError('Unable to locate the element with selector ' + this.$els.selector + '.');\n\t    }\n\t\n\t    this.addClass('pl-scope ' + (_componentName ? _componentName + '-component' : ''));\n\t    this.data('pl-scope', this);\n\t    this.data('pl-isComponent', !!_componentName);\n\t\n\t    captureProperties.call(this);\n\t\n\t    if (_componentName) {\n\t      loadComponentAssets.call(this, _componentName, function () {\n\t        init.call(this);\n\t      });\n\t    } else {\n\t      init.call(this);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  // only for use in base types\n\t  this.__init = function () {\n\t    return this;\n\t  };\n\t  this.__ready = function () {\n\t    return this;\n\t  };\n\t\n\t  this.willInit = function () {\n\t    return this;\n\t  };\n\t  this.init = function () {\n\t    return this;\n\t  };\n\t  this.ready = function () {\n\t    return this;\n\t  };\n\t\n\t  this.watchAssets = function (_nodes) {\n\t    var createHandler, watch;\n\t\n\t    createHandler = this.bind(function (_node) {\n\t      return (function () {\n\t        var loadedEvent = $.Event('loaded', { targetScope: this });\n\t\n\t        this.assetQueue.ready(_node.src);\n\t        this.trigger(loadedEvent, [_node]);\n\t\n\t        _node.onload = null;\n\t      }).bind(this);\n\t    });\n\t\n\t    watch = this.bind(function (_index, _node) {\n\t      var node = typeof _index === 'number' ? _node : _index;\n\t\n\t      if (node.nodeName !== 'IMG' || node.complete) return;\n\t      if (this.assetQueue.add(node.src)) {\n\t        node.onload = createHandler(node);\n\t        node.onerror = function () {\n\t          console.error('Image failed to load', node.src);\n\t        };\n\t      }\n\t    });\n\t\n\t    if (_nodes) {\n\t      _nodes.forEach(watch);\n\t      return this;\n\t    }\n\t\n\t    this.each(watch);\n\t    this.findOwn('img').each(watch);\n\t\n\t    return this;\n\t  };\n\t\n\t  this.attachEvents = function () {\n\t\n\t    this.proto();\n\t\n\t    this.assetQueue.on('complete', this.bind(function () {\n\t      this.assetQueue.off();\n\t      ready.call(this);\n\t    }));\n\t\n\t    this.on('ready', function (_event) {\n\t      if (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n\t        this.assetQueue.ready(_event.targetScope);\n\t      }\n\t\n\t      if (!this.assetQueue.length && this.isReady) this.off('ready');\n\t    });\n\t\n\t    return this;\n\t  };\n\t\n\t  this.captureReferences = function () {\n\t    this.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n\t      var $node, id;\n\t\n\t      if (_node.nodeName === 'AUDIO') return;\n\t\n\t      $node = $(_node);\n\t      id = $node.attr('id') || $node.attr('pl-id');\n\t\n\t      if (!this[id]) {\n\t        _util2['default'].assignRef(this, id, $node.data('pl-scope') || $node);\n\t      }\n\t    }));\n\t  };\n\t\n\t  this.captureAudioAssets = function () {\n\t    var deQ, $audio;\n\t\n\t    if (!($audio = this.findOwn('audio')).length) return false;\n\t\n\t    deQ = (function (_item) {\n\t      [this, this.screen].forEach(function (_scope) {\n\t        if (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n\t          _scope.requiredQueue.ready(_item);\n\t        }\n\t      });\n\t    }).bind(this);\n\t\n\t    this.audio = _typesAudioManager.AudioManager.create(this.id());\n\t\n\t    $audio.each((function (_index, _node) {\n\t      this.assetQueue.add(_node.src);\n\t      this.audio.watch(_node).then((function (_audio) {\n\t        var loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\t\n\t        if ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\t\n\t        if (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\t\n\t        this.trigger(loadedEvent);\n\t      }).bind(this));\n\t    }).bind(this));\n\t\n\t    // proxy events\n\t    this.audio.on('play pause ended stopped', this.bind(function (_event) {\n\t      var map = {\n\t        background: 'BACKGROUND',\n\t        voiceOver: 'VOICE-OVER',\n\t        sfx: 'SFX'\n\t      };\n\t\n\t      switch (_event.type) {\n\t        case 'play':\n\t          [this, this.screen].forEach(function (_scope, _index, _set) {\n\t            if (_index === 1 && _scope === _set[0]) return;\n\t            if (_scope.$els) {\n\t              _scope.addClass('PLAYING ' + map[_event.target.type]);\n\t              _scope.currentMedia[map[_event.target.type]] = _event.target;\n\t            }\n\t          });\n\t\n\t          $(_event.targetNode).addClass('PLAYING');\n\t          break;\n\t\n\t        case 'pause':\n\t        case 'stopped':\n\t        case 'ended':\n\t          [this, this.screen].forEach(function (_scope, _index, _set) {\n\t            var state;\n\t\n\t            if (_index === 1 && _scope === _set[0]) return;\n\t\n\t            if (_scope.$els) {\n\t              _scope.removeClass(map[_event.target.type]);\n\t              state = _scope.attr('class');\n\t              if (!/BACKGROUND|VOICE-OVER|SFX/.test(state)) _scope.removeClass('PLAYING');\n\t              if (_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n\t            }\n\t          });\n\t\n\t          $(_event.targetNode).removeClass('PLAYING');\n\t          if (_event.type === 'ended') deQ(_event.target);\n\t          break;\n\t      }\n\t\n\t      var audioEvent = $.Event('audio-' + _event.type, {\n\t        target: _event.target,\n\t        targetSource: _event.targetSource,\n\t        targetNode: _event.targetNode,\n\t        targetScope: this\n\t      });\n\t\n\t      this.trigger(audioEvent);\n\t    }));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.handleProperty = function (_implementation) {\n\t    if (this.propertyHandlers) {\n\t      if (this.hasOwnProperty('propertyHandlers')) {\n\t        switch (typeof _implementation) {\n\t          case 'function':\n\t            _implementation.call(this.propertyHandlers);\n\t            break;\n\t\n\t          case 'object':\n\t            this.propertyHandlers.mixin(_implementation);\n\t            break;\n\t        }\n\t      } else {\n\t        this.propertyHandlers = this.propertyHandlers.extend(_implementation);\n\t      }\n\t    } else {\n\t      this.propertyHandlers = _typesBasic2['default'].extend(_implementation);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.entity = function (_selector, _implementation) {\n\t    var Entity, prototype, id;\n\t\n\t    Entity = _playGame2['default'].provideEntityType();\n\t\n\t    if (!this.hasOwnProperty('entities')) this.entities = [];\n\t\n\t    if (this.hasOwnProperty('$els')) {\n\t      throw new Error('Wait this hasn\\'t been tested.');\n\t      prototype = Entity.isPrototypeOf(this) ? this : Entity;\n\t      instance = prototype.extend(_implementation).initialize(this.find(_selector));\n\t      id = _util2['default'].transformId(instance.id());\n\t\n\t      // this.entities.push(instance);\n\t      if (id) this[id] = instance;\n\t    } else {\n\t      this.entities.push({\n\t        selector: _selector,\n\t        implementation: _implementation\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.has = function (_child) {\n\t    var child;\n\t\n\t    child = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\t\n\t    return !!this.$els.has(child).length;\n\t  };\n\t\n\t  this.toString = function () {\n\t    var type;\n\t\n\t    type = this.baseType.replace('TYPE_', '');\n\t    type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t\n\t    return ['[', this.id() || this.address(), ' ', type, ']'].join('');\n\t  };\n\t\n\t  this.log = function () {\n\t    var args;\n\t\n\t    args = _util2['default'].toArray(arguments);\n\t\n\t    console.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n\t    return this;\n\t  };\n\t\n\t  this.handleProperty(function () {\n\t\n\t    this.component = function (_node, _name, _value, _property) {\n\t      var $node, record, scope, id;\n\t\n\t      $node = $(_node);\n\t\n\t      if (!$node.data('pl-isComponent')) {\n\t        record = _playGame2['default'].component.get(_value);\n\t\n\t        if (record) {\n\t          scope = createEntity.call(this, $node, record.implementation);\n\t          id = _util2['default'].transformId(scope.id() || _value, true);\n\t          _util2['default'].assignRef(this, id, scope);\n\t\n\t          if (!scope.isReady) this.assetQueue.add(scope);\n\t        } else {\n\t          throw new Error('Ahh!');\n\t        }\n\t      }\n\t    };\n\t\n\t    this.action = function (_node, _name, _value) {\n\t      if (!this.hasOwnProperty('actionables')) {\n\t        this.actionables = Actionables.create();\n\t        attachActionHandler.call(this);\n\t      }\n\t\n\t      this.actionables.add(_node, _value);\n\t    };\n\t\n\t    this.required = function (_node, _name, _value) {\n\t      if (this.is(_node)) {\n\t        this.screen.require(this);\n\t      }\n\t    };\n\t\n\t    this.require = function (_node, _name, _value) {\n\t      var query, $node;\n\t\n\t      // if the node with the attribute is the node for this scope\n\t      if (this.is(_node)) {\n\t        query = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n\t        $node = this.find(query);\n\t\n\t        $node.on('ready', this.bind(function (_event) {\n\t          if ($node.is(_event.target)) {\n\t            this.require(_event.targetScope);\n\t          }\n\t        }));\n\t      }\n\t    };\n\t  });\n\t});\n\t\n\texports['default'] = { Scope: Scope, createEntity: createEntity };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  jQProxy\n\t*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n\t*  @proto Basic\n\t*\n\t*  NOTE: Custom events may trigger on scopes\n\t*  that also targets the same elments. Testing needed.\n\t*/\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar jQProxy = _typesBasic2['default'].extend(function () {\n\t  var method, exclude;\n\t\n\t  /**\n\t  *  @desc Creates a function with a proxy to the jQuery method.\n\t  *  @param _name (String) The name of the method being proxied.\n\t  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t  *  @private\n\t  */\n\t  function createProxyFunction(_name) {\n\t    return function () {\n\t      var response;\n\t\n\t      // This makes sure your not calling any jQuery methods before initialization.\n\t      if (!this.hasOwnProperty('$els')) {\n\t        if (_name === 'on') {\n\t          registerHandler.call(this, arguments);\n\t        } else {\n\t          throw new ReferenceError('Unable to invoke ' + _name + ' because the scope is not initialized.');\n\t        }\n\t        return;\n\t      }\n\t\n\t      response = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\t\n\t      if (response === this.$els || response && response.jquery && response.is(this.$els)) {\n\t        return this;\n\t      }\n\t\n\t      return response;\n\t    };\n\t  }\n\t\n\t  function resolveEventHandler(_scope, _method, _args) {\n\t    var i, arg, args;\n\t\n\t    args = [];\n\t\n\t    if (~['on', 'load'].indexOf(_method)) {\n\t      for (i = 0; arg = _args[i]; i += 1) {\n\t        if (typeof arg === 'function') {\n\t          args.push((function (_handler) {\n\t            return function () {\n\t              return _handler.apply(_scope, arguments);\n\t            };\n\t          })(arg));\n\t        } else {\n\t          args.push(arg);\n\t        }\n\t      }\n\t\n\t      return args;\n\t    }\n\t\n\t    return _args;\n\t  }\n\t\n\t  function registerHandler(_definition) {\n\t    if (!this.hasOwnProperty('eventRegistry')) {\n\t      if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t        this.eventRegistry = this.eventRegistry.slice(0);\n\t      } else {\n\t        this.eventRegistry = [];\n\t      }\n\t    }\n\t\n\t    this.eventRegistry.push(_definition);\n\t\n\t    return true;\n\t  }\n\t\n\t  // We don't want jQuery methods overridding our base type's methods.\n\t  exclude = ['constructor'].concat(_Object$keys(_typesBasic2['default']));\n\t\n\t  this.baseType = 'TYPE_JQPROXY';\n\t  this.$els = null;\n\t  this.eventRegistry = null;\n\t\n\t  for (method in $.fn) {\n\t    if (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n\t    this[method] = createProxyFunction(method);\n\t  }\n\t\n\t  this.node = function () {\n\t    return this.$els[0];\n\t  };\n\t\n\t  this.attachEvents = function () {\n\t    var self;\n\t\n\t    self = this;\n\t\n\t    if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t      this.eventRegistry.forEach(function (_definition) {\n\t        self.on.apply(self, _definition);\n\t      });\n\t    }\n\t  };\n\t\n\t  this.listen = function (_name, _isCapure_handler, _handler) {\n\t    var _isCapture, node, handler;\n\t\n\t    _isCapture = false;\n\t\n\t    // resolve arguments\n\t    typeof _isCapure_handler === 'boolean' ? _isCapture = _isCapure_handler : _handler = _isCapure_handler;\n\t\n\t    _handler.cb = _handler.bind(this);\n\t\n\t    if (this.$els) {\n\t      node = this.$els[0];\n\t      if (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n\t    } else {\n\t      return registerHandler([_name, _handler.cb, _isCapture]);\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.ignore = function (_name, _handler) {\n\t    var node = this.$els && this.$els[0];\n\t\n\t    if (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\t\n\t    return false;\n\t  };\n\t\n\t  // Wraps you function 'this' to the scope.\n\t  //\n\t  this.bind = function (_handler) {\n\t    var args;\n\t\n\t    args = [].map.call(arguments, function (m) {\n\t      return m;\n\t    }).slice(1);\n\t\n\t    return _handler.bind.apply(_handler, [this].concat(args));\n\t  };\n\t\n\t  this.findOwn = function (_selector) {\n\t    return this.find(_selector).filter(this.bind(function (_index, _node) {\n\t      var $node;\n\t\n\t      $node = $(_node);\n\t\n\t      if ($node.hasClass('pl-scope')) {\n\t        return $node.parent().scope() === this;\n\t      }\n\t\n\t      return $node.scope() === this;\n\t    }));\n\t  };\n\t\n\t  this.isMemberSafe = function (_name) {\n\t    var owner, elOwner, prototype;\n\t\n\t    if (this.hasOwnProperty(_name)) {\n\t      return true;\n\t    } else {\n\t      prototype = Object.getPrototypeOf(this);\n\t      owner = _util2['default'].getOwner(this, this[_name]);\n\t\n\t      if (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\t\n\t      if (prototype.$els) {\n\t        elOwner = _util2['default'].getOwner(prototype, prototype.$els);\n\t\n\t        if (owner.object.isPrototypeOf(elOwner.object)) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.is = function (_obj) {\n\t    if (!_obj) return false;\n\t    if (_obj.$els) return this.$els.is(_obj.$els);\n\t\n\t    return this.$els.is(_obj);\n\t  };\n\t});\n\t\n\texports['default'] = jQProxy;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(34), __esModule: true };\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(35);\n\tmodule.exports = __webpack_require__(11).Object.keys;\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 Object.keys(O)\n\tvar toObject = __webpack_require__(36);\n\t\n\t__webpack_require__(38)('keys', function($keys){\n\t  return function keys(it){\n\t    return $keys(toObject(it));\n\t  };\n\t});\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(37);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// most Object methods by ES6 should accept primitives\n\tvar $export = __webpack_require__(9)\n\t  , core    = __webpack_require__(11)\n\t  , fails   = __webpack_require__(39);\n\tmodule.exports = function(KEY, exec){\n\t  var fn  = (core.Object || {})[KEY] || Object[KEY]\n\t    , exp = {};\n\t  exp[KEY] = exec(fn);\n\t  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Queue\n\t*  @desc Contains...\n\t*  @proto Array, Events, Basic\n\t*/\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar Queue = _typesCollection2['default'].extend(function () {\n\t\n\t  this.baseType = 'TYPE_QUEUE';\n\t\n\t  this.ready = function (_record) {\n\t    if (_record != null) this.remove(_record);\n\t\n\t    if (!this.length) {\n\t      this.trigger('complete');\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  _util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t  return this;\n\t});\n\t\n\texports['default'] = Queue;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * @module evalAction\n\t */\n\t\n\t/**\n\t * Performs `eval()` on the value of an `action` attribute on an HTML element.\n\t * @arg {string} _source - JavaScript source code.\n\t * @arg {Scope} _scope - The context in which to run the source.\n\t * @returns {*} The result of the evaluated source.\n\t */\n\tfunction evalAction(_source, _scope) {\n\t  var error;\n\t\n\t  function target(_selector) {\n\t    if (_scope.event) {\n\t      return _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n\t    }\n\t  }\n\t\n\t  // expose members of the object as if they were local variables.\n\t  // NOTE: methods still retain their \"this\" binding to the object! :D\n\t  return eval('with (_scope) { try {' + _source + ';} catch (error) { console.error(\\'Error:\\', error.message, \\'evaluating action\\', _source, \\'in\\', _scope.id() || _scope.address()); } }');\n\t}\n\t\n\texports['default'] = evalAction;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Promise = __webpack_require__(43)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\t/**\n\t * Contains classes for managing different media types.\n\t * Providing an API for referencing and control.\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t */\n\t\n\tvar _typesType = __webpack_require__(90);\n\t\n\tvar _typesType2 = _interopRequireDefault(_typesType);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\t// Object type definitions are using  `$` as the augmentation method for Types.\n\t'use strict';var EventTargetInterface,\n\t    InspectorInterface,\n\t    PlayableInterface,\n\t    LegislatorInterface,\n\t    StateInterface,\n\t    $$ = window.jQuery;\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n\t * Manages any playing media (Audio, Video).\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Manages any playing media (Audio, Video).\n\t * <style>\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t *\n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t */\n\tfunction MediaManager($, sup) {\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t  $('video', function alloc(_id) {\n\t    sup(this, 'alloc', arguments);\n\t    this.video = _typesCollection2['default'].create();\n\t    this.initialize(_id, 'media manager');\n\t  });\n\t}\n\t\n\t/**\n\t * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t * - Background\n\t * - Voice Over\n\t * - SFX (Sound Effects)\n\t * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n\t * @class\n\t * @prop {type} member - Text.\n\t * @extends EventTargetInterface\n\t * @extends PlayableInterface\n\t * @extends InspectorInterface\n\t */\n\tfunction AudioManager($) {\n\t  var AUDIO_TYPES, BUFFER_CACHE;\n\t\n\t  /**\n\t   * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n\t   * @arg {HTMLAudioElement} _node - The loaded audio element.\n\t   * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n\t   */\n\t  function AudioBufferRecord(_node, _buffer) {\n\t    this.node = _node;\n\t    this.type = getAudioType(_node);\n\t    this.buffer = _buffer;\n\t  }\n\t  /**\n\t   * Provides the classification an audio element falls into.\n\t   * - Background (`background`)\n\t   * - Voice Over (`voiceOver`)\n\t   * - Sound Effects (`sfx`)\n\t   * @protected\n\t   * @arg {HTMLAudioElement} _audio - The audio element.\n\t   * @returns {string} - The type.\n\t   */\n\t  function getAudioType(_audio) {\n\t    return _util2['default'].transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n\t  }\n\t  /**\n\t   * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n\t   * @protected\n\t   * @arg {HTMLAudioElement} _audio - The audio element.\n\t   * @returns {Promise}\n\t   */\n\t  function loadArrayBuffer(_audio) {\n\t    var xhr, manager, fileName;\n\t\n\t    xhr = new (XMLHttpRequest || _util2['default'].noop)();\n\t    manager = this;\n\t    fileName = _util2['default'].resolveFileName(_audio.src);\n\t\n\t    if (!xhr.open) _Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\t\n\t    return new _Promise(function (resolve, reject) {\n\t      var cache = BUFFER_CACHE[fileName];\n\t\n\t      // Decodes ArrayBuffer into an AudioBuffer.\n\t      function onLoad() {\n\t        var ctx, promise;\n\t\n\t        if (xhr.status >= 200 && xhr.status < 300) {\n\t          if (ctx = pl.game.getAudioContext()) {\n\t            promise = new _Promise(function (resolveDecoding, rejectDecoding) {\n\t              try {\n\t                ctx.decodeAudioData(xhr.response, function (_buffer) {\n\t                  var audio = manager.collect(new AudioBufferRecord(_audio, _buffer));\n\t\n\t                  resolveDecoding(audio);\n\t                  // Cache the AudioBuffer to resolve duplicates.\n\t                  BUFFER_CACHE[fileName] = _buffer;\n\t                }, function () {\n\t                  rejectDecoding(\"Failed to decode ArrayBuffer for \" + fileName + '.');\n\t                });\n\t              } catch (e) {\n\t                rejectDecoding(e);\n\t              }\n\t            });\n\t\n\t            promise.then(resolve)['catch'](reject);\n\t\n\t            return promise;\n\t          }\n\t        } else {\n\t          reject(xhr.statusText);\n\t        }\n\t\n\t        xhr.removeEventListener('load', onLoad);\n\t        xhr = null;\n\t      }\n\t\n\t      function onError() {\n\t        reject(xhr.statusText);\n\t        xhr.removeEventListener('error', onError);\n\t        xhr = null;\n\t      }\n\t\n\t      if (cache && cache !== 'loading') return resolve(manager.collect(new AudioBufferRecord(_audio, cache)));\n\t\n\t      BUFFER_CACHE[fileName] = 'loading';\n\t\n\t      xhr.responseType = 'arraybuffer';\n\t\n\t      xhr.addEventListener('load', onLoad, false);\n\t      xhr.addEventListener('error', onError, false);\n\t      xhr.open('GET', _audio.src, true);\n\t      xhr.send();\n\t    });\n\t  }\n\t  /**\n\t   * The CSS class names reconized as audio types.\n\t   */\n\t  AUDIO_TYPES = /background|voice-over|sfx/i;\n\t  BUFFER_CACHE = {};\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t\n\t  // A little ugg but define instance members.\n\t  $(\n\t  // Declare properties.\n\t  'background, voiceOver, sfx, scope',\n\t\n\t  /**\n\t   * Define instance properties.\n\t   */\n\t  function alloc(_id) {\n\t    this.initialize(_id, 'audio manager');\n\t\n\t    ['background', 'voiceOver', 'sfx'].forEach((function (_type) {\n\t      var collection = this[_type] = AudioCollection.create(_type);\n\t      this.addShadow(collection);\n\t    }).bind(this));\n\t  },\n\t\n\t  /**\n\t   * Given an audio element begin loading the asset.\n\t   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t   * @returns {Promise}\n\t   * @todo Support loading from node source or a string argument. - Micah:2/19/16\n\t   */\n\t  function load(_audio) {\n\t    var manager, type;\n\t\n\t    manager = this;\n\t    type = getAudioType(_audio);\n\t\n\t    if (!type) return _Promise.reject('Audio is missing a type. Please classify as \\'background\\', \\'voiceOver\\' or \\'sfx\\'.');\n\t    // if (~['sfx', 'voiceOver'].indexOf(type))\n\t    return loadArrayBuffer.call(this, _audio);\n\t\n\t    // return new Promise(function (resolve, reject) {\n\t    //  _audio.onloadeddata = function () { resolve(manager.collect(this)); };\n\t    //  _audio.onerror = reject;\n\t    //  _audio.load();\n\t    // });\n\t  },\n\t\n\t  /**\n\t   * Begins loading an AudioElement waits for it to load.\n\t   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t   * @returns {Promise}\n\t   */\n\t  function watch(_audio) {\n\t    var promise;\n\t\n\t    if (_audio.nodeName !== 'AUDIO') return _Promise.reject('Invalid type for audio node. ' + typeof _audio + ' [' + _audio.protoype.constructor.name + ' ' + _audio.nodeName + '].');\n\t\n\t    function reject(_error) {\n\t      var scope = $$(_audio).scope();\n\t      console.warn(scope.id(), '-', _error);\n\t    }\n\t\n\t    (promise = this.load(_audio))['catch'](reject.bind(this));\n\t\n\t    return promise;\n\t  },\n\t\n\t  /**\n\t   * Adds a audio to the collection. You may also pass an itterable of items to add.\n\t   * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n\t   * @returns {Promise}\n\t   */\n\t  function collect(_audio) {\n\t    var type;\n\t\n\t    if (!_audio) return false;\n\t\n\t    if (_audio.length) {\n\t      return _audio.map(collect.bind(this));\n\t    }\n\t\n\t    type = _audio.type || getAudioType(_audio);\n\t\n\t    if (type && this[type]) return this[type].add(_audio);\n\t\n\t    return false;\n\t  },\n\t  /**\n\t   * Provides a collection of `AudioCollection` objects.\n\t   * @returns {array}\n\t   */\n\t  function collections() {\n\t    var result, types;\n\t\n\t    result = [];\n\t    types = _Object$keys(this);\n\t\n\t    types.forEach((function (_type) {\n\t      if (this[_type] instanceof AudioCollection) result.push(this[_type]);\n\t    }).bind(this));\n\t\n\t    return result;\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[object ' + (this.constructor.name || 'Object') + ']';\n\t  });\n\t}\n\t\n\t/**\n\t * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t * @extends Collection\n\t */\n\tfunction AudioCollection($, sup) {\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\t\n\t  $('type', function alloc(_type) {\n\t    if (_type) this.type = _type;\n\t    this.initialize(_type, 'collection');\n\t  },\n\t  /**\n\t   * Adds an Audio object to the collection.\n\t   * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n\t   * @override\n\t   * @returns {Audio}\n\t   */\n\t  function add(_audio) {\n\t    var audio;\n\t\n\t    if (!_audio) return false;\n\t\n\t    audio = _audio instanceof Audio ? _audio : Audio.create(_audio, this.type);\n\t\n\t    sup(this, 'add')(audio);\n\t    this.addShadow(audio);\n\t    if (audio.id()) _util2['default'].assignRef(this, audio.id(), audio);\n\t\n\t    return audio;\n\t  },\n\t  /**\n\t   * Get the owning manager interface for an Audio object.\n\t   * @returns {AudioManager}\n\t   */\n\t  function manager() {\n\t    return this.$el.closest('#man').data('context');\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[object ' + (this.constructor.name || 'Object') + ']';\n\t  });\n\t}\n\t/**\n\t * Extend AudioCollection with Collection.\n\t */\n\tAudioCollection.prototype = _Object$create(_typesCollection2['default'], {\n\t  constructor: {\n\t    value: AudioCollection,\n\t    enumerable: false,\n\t    writeable: false,\n\t    configureable: false\n\t  }\n\t});\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n\t * Returned as the result of some collection process.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Returned as the result of some collection process.\n\t *\n\t * @class\n\t * @extends AudioCollection\n\t * @extends EventTargetInterface\n\t * @extends InspectorInterface\n\t * @extends LegislatorInterface\n\t * @extends StateInterface\n\t */\n\tfunction MediaCollection($, sup) {\n\t  $(\n\t  /**\n\t   * @override\n\t   */\n\t  function add(_media) {\n\t    this.addShadow(_media);\n\t    if (_media.id()) _util2['default'].assignRef(this, _media.id(), _media);\n\t    return _typesCollection2['default'].add.call(this, _media);\n\t  },\n\t  /**\n\t   * @override\n\t   */\n\t  function addShadow(_media) {\n\t    var $clone;\n\t\n\t    $clone = _media.$el.clone();\n\t    $clone.data(_media.$el.data());\n\t\n\t    this.$el.append($clone);\n\t    return this;\n\t  });\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * An interface for controlling a MediaElement or AudioBuffer.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t */\n\tfunction Audio($) {\n\t\n\t  function accessConfig(_augment, _val) {\n\t    if (_val) {\n\t      return this[_augment] = _val;\n\t    } else if (typeof _augment === 'string') {\n\t      return this[_augment];\n\t    } else {\n\t      _util2['default'].mixin(this, _augment);\n\t    }\n\t\n\t    return _augment;\n\t  }\n\t\n\t  /**\n\t   * Duck typed multiple inheritance.\n\t   */\n\t  _util2['default'].mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\t\n\t  $('type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\t\n\t  /**\n\t   * Allocates instance props.\n\t   * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n\t   * @arg {string} _type - The collection type.\n\t   */\n\t  function alloc(_audio, _type) {\n\t    var $audio, config, ctx, readyEvent, id;\n\t\n\t    $audio = $$(_audio.node || _audio);\n\t    config = $audio.pl();\n\t    ctx = pl.game.getAudioContext();\n\t    readyEvent = $$.Event('ready', { targetScope: this });\n\t\n\t    if (!(id = $audio.id())) $audio.id(id = _util2['default'].createId());\n\t\n\t    this.type = _type || null;\n\t    this.fileName = _util2['default'].resolveFileName($audio.attr('src'));\n\t    this.media = $audio[0];\n\t    this.gain = ctx.createGain();\n\t\n\t    this.gain.connect(ctx.destination);\n\t\n\t    $audio.data('context', this);\n\t\n\t    if (_audio.buffer) this.buffer = _audio.buffer;\n\t\n\t    Object.defineProperty(this, 'config', {\n\t      value: accessConfig.bind(config),\n\t      writeable: false\n\t    });\n\t\n\t    this.initialize(id, 'audio ' + this.type);\n\t\n\t    $$(this.media).trigger(readyEvent);\n\t  },\n\t  /**\n\t   * Provides an `AudioNode` for a particular audio source.\n\t   * @returns\n\t   *  - `MediaElementSouceNode` for audio elements.\n\t   *  - `AudioBufferSourceNode` for an ArrayBuffer.\n\t   */\n\t  function getSource() {\n\t    var ctx, src;\n\t\n\t    ctx = this.audioContext || pl.game.getAudioContext();\n\t\n\t    if (ctx) {\n\t      if (this.buffer) {\n\t        src = ctx.createBufferSource();\n\t        src.buffer = this.buffer;\n\t        src.loop = this.media.loop;\n\t\n\t        return src;\n\t      } else {\n\t        try {\n\t          return this.activeSource || ctx.createMediaElementSource(this.media);\n\t        } catch (e) {\n\t          console.warn(e.message, this);\n\t        }\n\t      }\n\t    }\n\t\n\t    return null;\n\t  },\n\t  /**\n\t   * Get the owning collection interface for an Audio object.\n\t   * @returns {AudioCollection}\n\t   */\n\t  function collection() {\n\t    return this.$el.closest('.collection').data('context');\n\t  },\n\t  /**\n\t   * Get the owning manager interface for an Audio object.\n\t   * @returns {AudioManager}\n\t   */\n\t  function manager() {\n\t    return this.$el.closest('#man').data('context');\n\t  },\n\t  /**\n\t   * Proveds a string representation of the object type.\n\t   */\n\t  function toString() {\n\t    return '[audio#' + this.id() + ' ' + this.fileName + ']';\n\t  }, function setContext(ctx) {\n\t    this.gain = ctx.createGain();\n\t    this.gain.disconnect();\n\t    this.gain.connect(ctx.destination);\n\t    this.audioContext = ctx;\n\t  });\n\t}\n\t\n\t/**\n\t * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n\t * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n\t * That way you can listen for an event at any level of the interface.\n\t */\n\tEventTargetInterface = {\n\t  /**\n\t   * The shadow node.\n\t   */\n\t  $el: null,\n\t  /**\n\t   * Define a node for the shadow DOM.\n\t   * @arg {string} _id - Idendifier for the node.\n\t   * @arg {string} _class - Classification of the node.\n\t   */\n\t  initialize: function initialize(_id, _class) {\n\t    Object.defineProperty(this, '$el', {\n\t      value: $$('<div ' + (_id ? 'id=\"' + _id + '\"' : '') + ' ' + (_class ? 'class=\"' + _class + '\"' : '') + '>'),\n\t      writeable: false,\n\t      configureable: false,\n\t      enumerable: false\n\t    });\n\t\n\t    this.$el.data('context', this);\n\t  },\n\t  /**\n\t   * Get/set the id of the interface.\n\t   * @arg {string} _id - A valid CSS ID.\n\t   */\n\t  id: function id(_id) {\n\t    return this.$el.id(_id);\n\t  },\n\t  /**\n\t   * Add an interface to the shadow DOM.\n\t   * @arg {Audio|AudioCollection} _obj - The object to add.\n\t   * @returns this\n\t   */\n\t  addShadow: function addShadow(_obj) {\n\t    this.$el.append(_obj.$el);\n\t    return this;\n\t  },\n\t  /**\n\t   * Provides the parent level interface.\n\t   * @returns {AudioManager|AudioCollection}\n\t   */\n\t  parent: function parent() {\n\t    return this.$el.parent().data('context');\n\t  },\n\t  /**\n\t   * Find an interface in the API tree.\n\t   * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n\t   */\n\t  find: function find(_selector) {\n\t    var collection = MediaCollection.create();\n\t\n\t    this.$el.find(_selector).each(function () {\n\t      collection.add($$(this).data('context'));\n\t    });\n\t\n\t    return collection;\n\t  },\n\t  /**\n\t   *\n\t   */\n\t  filter: function filter(_selector) {\n\t    var collection;\n\t\n\t    if (!_selector) return this;\n\t\n\t    collection = MediaCollection.create();\n\t\n\t    this.$el.children().each(function () {\n\t      var $node = $$(this);\n\t      if ($node.is(_selector)) collection.add($node.data('context'));\n\t    });\n\t\n\t    return collection;\n\t  },\n\t  /**\n\t   * Attach events to a shadow node.\n\t   */\n\t  on: function on() {\n\t    this.$el.on.apply(this.$el, arguments);\n\t    return this;\n\t  },\n\t  /**\n\t   * Remove events from a shadow node.\n\t   */\n\t  off: function off() {\n\t    this.$el.off.apply(this.$el, arguments);\n\t    return this;\n\t  },\n\t  /**\n\t   * Dispatch a event from a shadow node.\n\t   */\n\t  trigger: function trigger() {\n\t    this.$el.trigger.apply(this.$el, arguments);\n\t    return this;\n\t  }\n\t};\n\t/**\n\t * Interface for inspecting an API level (i.e. manager or collection).\n\t */\n\tInspectorInterface = {\n\t  playing: function playing(_filterSelector) {\n\t    var playing = this.find('.PLAYING').filter(_filterSelector);\n\t    return !!playing.length && playing;\n\t  },\n\t  /**\n\t   * Query a collection for ownership of an audio object.\n\t   * @arg {string|Audio|HTMLAudioElement} The validating reference.\n\t   * @returns {boolean}\n\t   */\n\t  has: function has(_query) {\n\t    if (this.background) {\n\t      return ['background', 'voiceOver', 'sfx'].some((function (_name) {\n\t        return this[_name].has(_query);\n\t      }).bind(this));\n\t    }\n\t\n\t    if (this[_query]) return true;\n\t\n\t    return this.some(function (_audio) {\n\t      return _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n\t    });\n\t  }\n\t};\n\t\n\tLegislatorInterface = {\n\t  rule: function rule(_selector, _event, _handler) {\n\t    var handler, args;\n\t\n\t    handler = [typeof _event, typeof _handler].indexOf('function');\n\t    args = _util2['default'].toArray(arguments).slice(1);\n\t\n\t    if (typeof _event === 'function') _event = 'play pause stopped ended';\n\t\n\t    this.on(_event, (function (_e) {\n\t      if (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n\t    }).bind(this));\n\t  }\n\t};\n\t\n\tStateInterface = {\n\t  state: function state() {\n\t    return this.$el.state.apply(this.$el, arguments);\n\t  },\n\t\n\t  addState: function addState(_state) {\n\t    return this.$el.addClass(_state.toUpperCase());\n\t  },\n\t\n\t  removeState: function removeState(_state) {\n\t    return this.$el.removeClass(_state.toUpperCase());\n\t  }\n\t};\n\t\n\t/**\n\t * Interface for methods involving audio control for any API level.\n\t */\n\tPlayableInterface = {\n\t  proxyEvent: function proxyEvent(_event) {\n\t    var theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n\t\n\t    // proxy event to shadow DOM only when it has an active source.\n\t    if (this.activeSource) {\n\t      if (_event.type === 'ended') {\n\t        this.removeState('PLAYING');\n\t        this.activeSource = null;\n\t      }\n\t\n\t      this.trigger(theEvent);\n\t    }\n\t\n\t    _event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n\t  },\n\t  handler: function handler(_event) {\n\t    if (_event.type === 'ended' && _event.activeSource) {\n\t      _event.activeSource.disconnect();\n\t    }\n\t    this.proxyEvent.call(this, _event);\n\t  },\n\t  simEnd: function simEnd() {\n\t    if (this.activeSource) {\n\t      console.warn('Native `ended` failed to fire, simulating...');\n\t      this.handler({ target: this.activeSource, type: 'ended' });\n\t    }\n\t  },\n\t  playSource: function playSource() {\n\t    var time;\n\t    if (this.buffer) {\n\t      this.activeSource.start(0);\n\t      this.startTime = new Date();\n\t\n\t      if (!this.activeSource.loop) {\n\t        time = Math.ceil(this.buffer.duration * 1000) + 250;\n\t        this.timeout = setTimeout(this.simEnd.bind(this), time);\n\t      }\n\t    } else {\n\t      this.media.play();\n\t    }\n\t\n\t    this.delayID = null;\n\t  },\n\t  /**\n\t   * Play an audio object.\n\t   */\n\t  play: function play(_selector) {\n\t    var ctx, src, dest, delay, shouldPlay;\n\t\n\t    function response(_val) {\n\t      shouldPlay = _val;\n\t    }\n\t\n\t    ctx = this.audioContext || pl.game.getAudioContext();\n\t    shouldPlay = true;\n\t\n\t    /*\n\t     * I'm commenting out this line because having it there\n\t     * prevents new audio from starting while the game is out of focus\n\t     * which makes certain screens impossible to complete.\n\t     * Giving the game the ability to pause will remove the need for\n\t     * this line of code, anyway.\n\t     */\n\t    // if (ctx.state === 'suspended') return false;\n\t\n\t    if (this.background) return this.background.play();\n\t    if (this.length != null) {\n\t      if (_selector) {\n\t        if (this[_selector]) return this[_selector].play();\n\t\n\t        return this.find(_selector).play();\n\t      }\n\t      return this[0] && this[0].play();\n\t    }\n\t\n\t    if (!(src = this.getSource())) return false;\n\t\n\t    src.connect(this.gain);\n\t    src.addEventListener('ended', this.handler.bind(this), false);\n\t\n\t    this.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\t\n\t    if (shouldPlay) {\n\t      this.addState('PLAYING');\n\t      this.activeSource = src;\n\t\n\t      if (delay = this.config('delay')) {\n\t        this.delayID = setTimeout(this.playSource.bind(this), _util2['default'].toMillisec(delay));\n\t      } else {\n\t        this.playSource.call(this);\n\t      }\n\t\n\t      this.handler({ target: src, type: 'play' });\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Pause an audio object.\n\t   */\n\t  pause: function pause() {\n\t    if (this.buffer) {\n\t      this.pauseTime = new Date();\n\t      clearTimeout(this.timeout);\n\t      this.timeout = null;\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Resume an audio object.\n\t   */\n\t  resume: function resume() {\n\t    var time;\n\t    if (this.buffer) {\n\t      if (!this.activeSource.loop) {\n\t        time = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n\t        this.timeout = setTimeout(this.simEnd.bind(this), time);\n\t      }\n\t    }\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * Stop an audio object.\n\t   */\n\t  stop: function stop(_filterSelector) {\n\t    var stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\t\n\t    if (this.background) return this.background.stop(_filterSelector);\n\t    if (this.length != null) {\n\t      if (_filterSelector === '@ALL') {\n\t        this.forEach(function (_audio) {\n\t          _audio.stop();\n\t        });\n\t      } else {\n\t        return this[0] && this[0].stop();\n\t      }\n\t    }\n\t\n\t    if (!this.activeSource) return false;\n\t\n\t    if (this.buffer) {\n\t      if (!this.delayID) this.activeSource.stop();\n\t    } else {\n\t      this.media.pause();\n\t      this.media.currentTime = 0;\n\t    }\n\t\n\t    if (this.delayID) {\n\t      clearTimeout(this.delayID);\n\t      this.delayID = null;\n\t    }\n\t\n\t    this.activeSource = null;\n\t\n\t    this.removeState('PLAYING');\n\t    this.trigger(stopEvent);\n\t\n\t    return this;\n\t  },\n\t  /**\n\t   * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n\t   */\n\t  volume: function volume(_level, _filterSelector) {\n\t    if (this.background) return this.background.volume(_level);\n\t    if (this.length != null) {\n\t      if (_filterSelector === '@ALL') {\n\t        this.forEach(function (_audio) {\n\t          _audio.volume(_level);\n\t        });\n\t      } else {\n\t        return this[0] && this[0].volume(_level);\n\t      }\n\t    }\n\t\n\t    this.gain.gain.value = _level;\n\t  },\n\t  startTime: 0,\n\t  pauseTime: 0\n\t};\n\t\n\texports['default'] = _typesType2['default'](MediaManager, AudioManager, AudioCollection, Audio);\n\t\n\tAudioCollection.extend(MediaCollection);\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(44), __esModule: true };\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(45);\n\t__webpack_require__(46);\n\t__webpack_require__(62);\n\t__webpack_require__(69);\n\tmodule.exports = __webpack_require__(11).Promise;\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(47)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(49)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(48)\n\t  , defined   = __webpack_require__(37);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 48 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(50)\n\t  , $export        = __webpack_require__(9)\n\t  , redefine       = __webpack_require__(51)\n\t  , hide           = __webpack_require__(52)\n\t  , has            = __webpack_require__(55)\n\t  , Iterators      = __webpack_require__(56)\n\t  , $iterCreate    = __webpack_require__(57)\n\t  , setToStringTag = __webpack_require__(58)\n\t  , getProto       = __webpack_require__(8).getProto\n\t  , ITERATOR       = __webpack_require__(59)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , methods, key;\n\t  // Fix native\n\t  if($native){\n\t    var IteratorPrototype = getProto($default.call(new Base));\n\t    // Set @@toStringTag to native iterators\n\t    setToStringTag(IteratorPrototype, TAG, true);\n\t    // FF fix\n\t    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    // fix Array#{values, @@iterator}.name in V8 / FF\n\t    if(DEF_VALUES && $native.name !== VALUES){\n\t      VALUES_BUG = true;\n\t      $default = function values(){ return $native.call(this); };\n\t    }\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n\t      keys:    IS_SET      ? $default : getMethod(KEYS),\n\t      entries: !DEF_VALUES ? $default : getMethod('entries')\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 50 */\n/***/ function(module, exports) {\n\n\tmodule.exports = true;\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(52);\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $          = __webpack_require__(8)\n\t  , createDesc = __webpack_require__(53);\n\tmodule.exports = __webpack_require__(54) ? function(object, key, value){\n\t  return $.setDesc(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(39)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 55 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $              = __webpack_require__(8)\n\t  , descriptor     = __webpack_require__(53)\n\t  , setToStringTag = __webpack_require__(58)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(52)(IteratorPrototype, __webpack_require__(59)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(8).setDesc\n\t  , has = __webpack_require__(55)\n\t  , TAG = __webpack_require__(59)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store  = __webpack_require__(60)('wks')\n\t  , uid    = __webpack_require__(61)\n\t  , Symbol = __webpack_require__(10).Symbol;\n\tmodule.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n\t};\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(10)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 61 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(63);\n\tvar Iterators = __webpack_require__(56);\n\tIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(64)\n\t  , step             = __webpack_require__(65)\n\t  , Iterators        = __webpack_require__(56)\n\t  , toIObject        = __webpack_require__(66);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(49)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 64 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(){ /* empty */ };\n\n/***/ },\n/* 65 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(67)\n\t  , defined = __webpack_require__(37);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(68);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 68 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $          = __webpack_require__(8)\n\t  , LIBRARY    = __webpack_require__(50)\n\t  , global     = __webpack_require__(10)\n\t  , ctx        = __webpack_require__(12)\n\t  , classof    = __webpack_require__(70)\n\t  , $export    = __webpack_require__(9)\n\t  , isObject   = __webpack_require__(71)\n\t  , anObject   = __webpack_require__(72)\n\t  , aFunction  = __webpack_require__(13)\n\t  , strictNew  = __webpack_require__(73)\n\t  , forOf      = __webpack_require__(74)\n\t  , setProto   = __webpack_require__(79).set\n\t  , same       = __webpack_require__(80)\n\t  , SPECIES    = __webpack_require__(59)('species')\n\t  , speciesConstructor = __webpack_require__(81)\n\t  , asap       = __webpack_require__(82)\n\t  , PROMISE    = 'Promise'\n\t  , process    = global.process\n\t  , isNode     = classof(process) == 'process'\n\t  , P          = global[PROMISE]\n\t  , Wrapper;\n\t\n\tvar testResolve = function(sub){\n\t  var test = new P(function(){});\n\t  if(sub)test.constructor = Object;\n\t  return P.resolve(test) === test;\n\t};\n\t\n\tvar USE_NATIVE = function(){\n\t  var works = false;\n\t  function P2(x){\n\t    var self = new P(x);\n\t    setProto(self, P2.prototype);\n\t    return self;\n\t  }\n\t  try {\n\t    works = P && P.resolve && testResolve();\n\t    setProto(P2, P);\n\t    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n\t    // actual Firefox has broken subclass support, test that\n\t    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n\t      works = false;\n\t    }\n\t    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n\t    if(works && __webpack_require__(54)){\n\t      var thenableThenGotten = false;\n\t      P.resolve($.setDesc({}, 'then', {\n\t        get: function(){ thenableThenGotten = true; }\n\t      }));\n\t      works = thenableThenGotten;\n\t    }\n\t  } catch(e){ works = false; }\n\t  return works;\n\t}();\n\t\n\t// helpers\n\tvar sameConstructor = function(a, b){\n\t  // library wrapper special case\n\t  if(LIBRARY && a === P && b === Wrapper)return true;\n\t  return same(a, b);\n\t};\n\tvar getConstructor = function(C){\n\t  var S = anObject(C)[SPECIES];\n\t  return S != undefined ? S : C;\n\t};\n\tvar isThenable = function(it){\n\t  var then;\n\t  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n\t};\n\tvar PromiseCapability = function(C){\n\t  var resolve, reject;\n\t  this.promise = new C(function($$resolve, $$reject){\n\t    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n\t    resolve = $$resolve;\n\t    reject  = $$reject;\n\t  });\n\t  this.resolve = aFunction(resolve),\n\t  this.reject  = aFunction(reject)\n\t};\n\tvar perform = function(exec){\n\t  try {\n\t    exec();\n\t  } catch(e){\n\t    return {error: e};\n\t  }\n\t};\n\tvar notify = function(record, isReject){\n\t  if(record.n)return;\n\t  record.n = true;\n\t  var chain = record.c;\n\t  asap(function(){\n\t    var value = record.v\n\t      , ok    = record.s == 1\n\t      , i     = 0;\n\t    var run = function(reaction){\n\t      var handler = ok ? reaction.ok : reaction.fail\n\t        , resolve = reaction.resolve\n\t        , reject  = reaction.reject\n\t        , result, then;\n\t      try {\n\t        if(handler){\n\t          if(!ok)record.h = true;\n\t          result = handler === true ? value : handler(value);\n\t          if(result === reaction.promise){\n\t            reject(TypeError('Promise-chain cycle'));\n\t          } else if(then = isThenable(result)){\n\t            then.call(result, resolve, reject);\n\t          } else resolve(result);\n\t        } else reject(value);\n\t      } catch(e){\n\t        reject(e);\n\t      }\n\t    };\n\t    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n\t    chain.length = 0;\n\t    record.n = false;\n\t    if(isReject)setTimeout(function(){\n\t      var promise = record.p\n\t        , handler, console;\n\t      if(isUnhandled(promise)){\n\t        if(isNode){\n\t          process.emit('unhandledRejection', value, promise);\n\t        } else if(handler = global.onunhandledrejection){\n\t          handler({promise: promise, reason: value});\n\t        } else if((console = global.console) && console.error){\n\t          console.error('Unhandled promise rejection', value);\n\t        }\n\t      } record.a = undefined;\n\t    }, 1);\n\t  });\n\t};\n\tvar isUnhandled = function(promise){\n\t  var record = promise._d\n\t    , chain  = record.a || record.c\n\t    , i      = 0\n\t    , reaction;\n\t  if(record.h)return false;\n\t  while(chain.length > i){\n\t    reaction = chain[i++];\n\t    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n\t  } return true;\n\t};\n\tvar $reject = function(value){\n\t  var record = this;\n\t  if(record.d)return;\n\t  record.d = true;\n\t  record = record.r || record; // unwrap\n\t  record.v = value;\n\t  record.s = 2;\n\t  record.a = record.c.slice();\n\t  notify(record, true);\n\t};\n\tvar $resolve = function(value){\n\t  var record = this\n\t    , then;\n\t  if(record.d)return;\n\t  record.d = true;\n\t  record = record.r || record; // unwrap\n\t  try {\n\t    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n\t    if(then = isThenable(value)){\n\t      asap(function(){\n\t        var wrapper = {r: record, d: false}; // wrap\n\t        try {\n\t          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n\t        } catch(e){\n\t          $reject.call(wrapper, e);\n\t        }\n\t      });\n\t    } else {\n\t      record.v = value;\n\t      record.s = 1;\n\t      notify(record, false);\n\t    }\n\t  } catch(e){\n\t    $reject.call({r: record, d: false}, e); // wrap\n\t  }\n\t};\n\t\n\t// constructor polyfill\n\tif(!USE_NATIVE){\n\t  // 25.4.3.1 Promise(executor)\n\t  P = function Promise(executor){\n\t    aFunction(executor);\n\t    var record = this._d = {\n\t      p: strictNew(this, P, PROMISE),         // <- promise\n\t      c: [],                                  // <- awaiting reactions\n\t      a: undefined,                           // <- checked in isUnhandled reactions\n\t      s: 0,                                   // <- state\n\t      d: false,                               // <- done\n\t      v: undefined,                           // <- value\n\t      h: false,                               // <- handled rejection\n\t      n: false                                // <- notify\n\t    };\n\t    try {\n\t      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n\t    } catch(err){\n\t      $reject.call(record, err);\n\t    }\n\t  };\n\t  __webpack_require__(87)(P.prototype, {\n\t    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n\t    then: function then(onFulfilled, onRejected){\n\t      var reaction = new PromiseCapability(speciesConstructor(this, P))\n\t        , promise  = reaction.promise\n\t        , record   = this._d;\n\t      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n\t      reaction.fail = typeof onRejected == 'function' && onRejected;\n\t      record.c.push(reaction);\n\t      if(record.a)record.a.push(reaction);\n\t      if(record.s)notify(record, false);\n\t      return promise;\n\t    },\n\t    // 25.4.5.1 Promise.prototype.catch(onRejected)\n\t    'catch': function(onRejected){\n\t      return this.then(undefined, onRejected);\n\t    }\n\t  });\n\t}\n\t\n\t$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\n\t__webpack_require__(58)(P, PROMISE);\n\t__webpack_require__(88)(PROMISE);\n\tWrapper = __webpack_require__(11)[PROMISE];\n\t\n\t// statics\n\t$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n\t  // 25.4.4.5 Promise.reject(r)\n\t  reject: function reject(r){\n\t    var capability = new PromiseCapability(this)\n\t      , $$reject   = capability.reject;\n\t    $$reject(r);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n\t  // 25.4.4.6 Promise.resolve(x)\n\t  resolve: function resolve(x){\n\t    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n\t    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n\t    var capability = new PromiseCapability(this)\n\t      , $$resolve  = capability.resolve;\n\t    $$resolve(x);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(89)(function(iter){\n\t  P.all(iter)['catch'](function(){});\n\t})), PROMISE, {\n\t  // 25.4.4.1 Promise.all(iterable)\n\t  all: function all(iterable){\n\t    var C          = getConstructor(this)\n\t      , capability = new PromiseCapability(C)\n\t      , resolve    = capability.resolve\n\t      , reject     = capability.reject\n\t      , values     = [];\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, values.push, values);\n\t      var remaining = values.length\n\t        , results   = Array(remaining);\n\t      if(remaining)$.each.call(values, function(promise, index){\n\t        var alreadyCalled = false;\n\t        C.resolve(promise).then(function(value){\n\t          if(alreadyCalled)return;\n\t          alreadyCalled = true;\n\t          results[index] = value;\n\t          --remaining || resolve(results);\n\t        }, reject);\n\t      });\n\t      else resolve(results);\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  },\n\t  // 25.4.4.4 Promise.race(iterable)\n\t  race: function race(iterable){\n\t    var C          = getConstructor(this)\n\t      , capability = new PromiseCapability(C)\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, function(promise){\n\t        C.resolve(promise).then(capability.resolve, reject);\n\t      });\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  }\n\t});\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(68)\n\t  , TAG = __webpack_require__(59)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 71 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(71);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 73 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it, Constructor, name){\n\t  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n\t  return it;\n\t};\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx         = __webpack_require__(12)\n\t  , call        = __webpack_require__(75)\n\t  , isArrayIter = __webpack_require__(76)\n\t  , anObject    = __webpack_require__(72)\n\t  , toLength    = __webpack_require__(77)\n\t  , getIterFn   = __webpack_require__(78);\n\tmodule.exports = function(iterable, entries, fn, that){\n\t  var iterFn = getIterFn(iterable)\n\t    , f      = ctx(fn, that, entries ? 2 : 1)\n\t    , index  = 0\n\t    , length, step, iterator;\n\t  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n\t  // fast case for arrays with default iterator\n\t  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n\t    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n\t  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n\t    call(iterator, f, step.value, entries);\n\t  }\n\t};\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// call something on iterator step with safe closing on error\n\tvar anObject = __webpack_require__(72);\n\tmodule.exports = function(iterator, fn, value, entries){\n\t  try {\n\t    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n\t  // 7.4.6 IteratorClose(iterator, completion)\n\t  } catch(e){\n\t    var ret = iterator['return'];\n\t    if(ret !== undefined)anObject(ret.call(iterator));\n\t    throw e;\n\t  }\n\t};\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// check on default Array iterator\n\tvar Iterators  = __webpack_require__(56)\n\t  , ITERATOR   = __webpack_require__(59)('iterator')\n\t  , ArrayProto = Array.prototype;\n\t\n\tmodule.exports = function(it){\n\t  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n\t};\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(48)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 78 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(70)\n\t  , ITERATOR  = __webpack_require__(59)('iterator')\n\t  , Iterators = __webpack_require__(56);\n\tmodule.exports = __webpack_require__(11).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Works with __proto__ only. Old v8 can't work with null proto objects.\n\t/* eslint-disable no-proto */\n\tvar getDesc  = __webpack_require__(8).getDesc\n\t  , isObject = __webpack_require__(71)\n\t  , anObject = __webpack_require__(72);\n\tvar check = function(O, proto){\n\t  anObject(O);\n\t  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n\t};\n\tmodule.exports = {\n\t  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n\t    function(test, buggy, set){\n\t      try {\n\t        set = __webpack_require__(12)(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n\t        set(test, []);\n\t        buggy = !(test instanceof Array);\n\t      } catch(e){ buggy = true; }\n\t      return function setPrototypeOf(O, proto){\n\t        check(O, proto);\n\t        if(buggy)O.__proto__ = proto;\n\t        else set(O, proto);\n\t        return O;\n\t      };\n\t    }({}, false) : undefined),\n\t  check: check\n\t};\n\n/***/ },\n/* 80 */\n/***/ function(module, exports) {\n\n\t// 7.2.9 SameValue(x, y)\n\tmodule.exports = Object.is || function is(x, y){\n\t  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n\t};\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.3.20 SpeciesConstructor(O, defaultConstructor)\n\tvar anObject  = __webpack_require__(72)\n\t  , aFunction = __webpack_require__(13)\n\t  , SPECIES   = __webpack_require__(59)('species');\n\tmodule.exports = function(O, D){\n\t  var C = anObject(O).constructor, S;\n\t  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n\t};\n\n/***/ },\n/* 82 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(10)\n\t  , macrotask = __webpack_require__(83).set\n\t  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n\t  , process   = global.process\n\t  , Promise   = global.Promise\n\t  , isNode    = __webpack_require__(68)(process) == 'process'\n\t  , head, last, notify;\n\t\n\tvar flush = function(){\n\t  var parent, domain, fn;\n\t  if(isNode && (parent = process.domain)){\n\t    process.domain = null;\n\t    parent.exit();\n\t  }\n\t  while(head){\n\t    domain = head.domain;\n\t    fn     = head.fn;\n\t    if(domain)domain.enter();\n\t    fn(); // <- currently we use it only for Promise - try / catch not required\n\t    if(domain)domain.exit();\n\t    head = head.next;\n\t  } last = undefined;\n\t  if(parent)parent.enter();\n\t};\n\t\n\t// Node.js\n\tif(isNode){\n\t  notify = function(){\n\t    process.nextTick(flush);\n\t  };\n\t// browsers with MutationObserver\n\t} else if(Observer){\n\t  var toggle = 1\n\t    , node   = document.createTextNode('');\n\t  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n\t  notify = function(){\n\t    node.data = toggle = -toggle;\n\t  };\n\t// environments with maybe non-completely correct, but existent Promise\n\t} else if(Promise && Promise.resolve){\n\t  notify = function(){\n\t    Promise.resolve().then(flush);\n\t  };\n\t// for other environments - macrotask based on:\n\t// - setImmediate\n\t// - MessageChannel\n\t// - window.postMessag\n\t// - onreadystatechange\n\t// - setTimeout\n\t} else {\n\t  notify = function(){\n\t    // strange IE + webpack dev server bug - use .call(global)\n\t    macrotask.call(global, flush);\n\t  };\n\t}\n\t\n\tmodule.exports = function asap(fn){\n\t  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n\t  if(last)last.next = task;\n\t  if(!head){\n\t    head = task;\n\t    notify();\n\t  } last = task;\n\t};\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx                = __webpack_require__(12)\n\t  , invoke             = __webpack_require__(84)\n\t  , html               = __webpack_require__(85)\n\t  , cel                = __webpack_require__(86)\n\t  , global             = __webpack_require__(10)\n\t  , process            = global.process\n\t  , setTask            = global.setImmediate\n\t  , clearTask          = global.clearImmediate\n\t  , MessageChannel     = global.MessageChannel\n\t  , counter            = 0\n\t  , queue              = {}\n\t  , ONREADYSTATECHANGE = 'onreadystatechange'\n\t  , defer, channel, port;\n\tvar run = function(){\n\t  var id = +this;\n\t  if(queue.hasOwnProperty(id)){\n\t    var fn = queue[id];\n\t    delete queue[id];\n\t    fn();\n\t  }\n\t};\n\tvar listner = function(event){\n\t  run.call(event.data);\n\t};\n\t// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\n\tif(!setTask || !clearTask){\n\t  setTask = function setImmediate(fn){\n\t    var args = [], i = 1;\n\t    while(arguments.length > i)args.push(arguments[i++]);\n\t    queue[++counter] = function(){\n\t      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n\t    };\n\t    defer(counter);\n\t    return counter;\n\t  };\n\t  clearTask = function clearImmediate(id){\n\t    delete queue[id];\n\t  };\n\t  // Node.js 0.8-\n\t  if(__webpack_require__(68)(process) == 'process'){\n\t    defer = function(id){\n\t      process.nextTick(ctx(run, id, 1));\n\t    };\n\t  // Browsers with MessageChannel, includes WebWorkers\n\t  } else if(MessageChannel){\n\t    channel = new MessageChannel;\n\t    port    = channel.port2;\n\t    channel.port1.onmessage = listner;\n\t    defer = ctx(port.postMessage, port, 1);\n\t  // Browsers with postMessage, skip WebWorkers\n\t  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n\t  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n\t    defer = function(id){\n\t      global.postMessage(id + '', '*');\n\t    };\n\t    global.addEventListener('message', listner, false);\n\t  // IE8-\n\t  } else if(ONREADYSTATECHANGE in cel('script')){\n\t    defer = function(id){\n\t      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n\t        html.removeChild(this);\n\t        run.call(id);\n\t      };\n\t    };\n\t  // Rest old browsers\n\t  } else {\n\t    defer = function(id){\n\t      setTimeout(ctx(run, id, 1), 0);\n\t    };\n\t  }\n\t}\n\tmodule.exports = {\n\t  set:   setTask,\n\t  clear: clearTask\n\t};\n\n/***/ },\n/* 84 */\n/***/ function(module, exports) {\n\n\t// fast apply, http://jsperf.lnkit.com/fast-apply/5\n\tmodule.exports = function(fn, args, that){\n\t  var un = that === undefined;\n\t  switch(args.length){\n\t    case 0: return un ? fn()\n\t                      : fn.call(that);\n\t    case 1: return un ? fn(args[0])\n\t                      : fn.call(that, args[0]);\n\t    case 2: return un ? fn(args[0], args[1])\n\t                      : fn.call(that, args[0], args[1]);\n\t    case 3: return un ? fn(args[0], args[1], args[2])\n\t                      : fn.call(that, args[0], args[1], args[2]);\n\t    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n\t                      : fn.call(that, args[0], args[1], args[2], args[3]);\n\t  } return              fn.apply(that, args);\n\t};\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(10).document && document.documentElement;\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(71)\n\t  , document = __webpack_require__(10).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar redefine = __webpack_require__(51);\n\tmodule.exports = function(target, src){\n\t  for(var key in src)redefine(target, key, src[key]);\n\t  return target;\n\t};\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar core        = __webpack_require__(11)\n\t  , $           = __webpack_require__(8)\n\t  , DESCRIPTORS = __webpack_require__(54)\n\t  , SPECIES     = __webpack_require__(59)('species');\n\t\n\tmodule.exports = function(KEY){\n\t  var C = core[KEY];\n\t  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n\t    configurable: true,\n\t    get: function(){ return this; }\n\t  });\n\t};\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ITERATOR     = __webpack_require__(59)('iterator')\n\t  , SAFE_CLOSING = false;\n\t\n\ttry {\n\t  var riter = [7][ITERATOR]();\n\t  riter['return'] = function(){ SAFE_CLOSING = true; };\n\t  Array.from(riter, function(){ throw 2; });\n\t} catch(e){ /* empty */ }\n\t\n\tmodule.exports = function(exec, skipClosing){\n\t  if(!skipClosing && !SAFE_CLOSING)return false;\n\t  var safe = false;\n\t  try {\n\t    var arr  = [7]\n\t      , iter = arr[ITERATOR]();\n\t    iter.next = function(){ safe = true; };\n\t    arr[ITERATOR] = function(){ return iter; };\n\t    exec(arr);\n\t  } catch(e){ /* empty */ }\n\t  return safe;\n\t};\n\n/***/ },\n/* 90 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t/**\n\t * Defines an Object type using a named constructor function.\n\t * @module\n\t */\n\t\n\t/**\n\t * Constructs an object with methods bound to a context.\n\t * @arg {object} _from - Object with methods to bind.\n\t * @arg {object} _to - Context which methtods should be bound to.\n\t */\n\t\n\tvar _Object$defineProperty = __webpack_require__(91)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\texports.__esModule = true;\n\texports['default'] = type;\n\tfunction Bindings(_from, _to) {\n\t  var method;\n\t\n\t  // pull all methods from the prototype chain.\n\t  for (method in _from) {\n\t    if (typeof _from[method] !== 'function') continue;\n\t    this[method] = _from[method].bind(_to);\n\t  }\n\t}\n\t\n\t/**\n\t * Takes an itterable object and convert it into an Array.\n\t * @arg {object} _itterable\n\t * @returns {array}\n\t */\n\tfunction toArray(_itterable) {\n\t  return [].map.call(_itterable, function (m) {\n\t    return m;\n\t  });\n\t}\n\t\n\t/**\n\t * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n\t * @arg {function} _constructor... - any number of constructor functions.\n\t * @returns The constructor or an object containing all the defined types.\n\t */\n\t\n\tfunction type() {\n\t  var defs, module;\n\t\n\t  /**\n\t   * Constructs an interface which is accesed through the constructors arguments.\n\t   * These arguments are parsed from the function string and collected into an array.\n\t   * @arg {function} _constructor\n\t   * @returns {array} The collection of API functions requested by the constructor.\n\t   */\n\t  function createApi(_constructor) {\n\t    var args, api;\n\t\n\t    // Matches the names of the arguments defined in the source of the function.\n\t    // [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n\t    // It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n\t    // NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n\t    args = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/) || ['', ''])[1].split(/\\s*,\\s*/);\n\t    api = {\n\t      /**\n\t       * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n\t       *\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       *\n\t       * @example\n\t       * Car.extend(function Ford (proto) {\n\t       *     this.drive = function () {\n\t       *         proto(this, 'drive', arguments);\n\t       *         // do some opps.\n\t       *     };\n\t       * });\n\t       */\n\t      proto: function proto(_obj, _name, _args) {\n\t        var proto, method;\n\t\n\t        proto = Object.getPrototypeOf(this || _obj);\n\t        method = proto[_name];\n\t\n\t        if (typeof _obj[_name] !== 'function') {\n\t          throw new TypeError('Member ' + _name + ' is not a function.');\n\t        }\n\t\n\t        if (method) {\n\t          // Does _obj's prototype have the method and it's not the same reference as _obj.\n\t          if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t            return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t          }\n\t\n\t          // Otherwise, walk the prototype chain to find the prototype that has the parent method.\n\t          while (proto) {\n\t            if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t              return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t            }\n\t\n\t            proto = Object.getPrototypeOf(proto);\n\t          }\n\t        } else {\n\t          return new Bindings(proto, _obj);\n\t        }\n\t      },\n\t      /**\n\t       * Invokes the specified method which lives on the object type's prototype.\n\t       * If your instance overrides the object types method, or your many prototype\n\t       * levels away from the base prototype, this lets you track back to the original.\n\t       *\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       */\n\t      base: function base(_obj, _name, _args) {\n\t        var proto, method;\n\t\n\t        proto = _constructor.prototype;\n\t        method = proto[_name];\n\t\n\t        if (typeof method !== 'function') {\n\t          throw new TypeError('Member ' + _name + ' is not a function.');\n\t        }\n\t\n\t        if (method) {\n\t          return _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t        } else {\n\t          return new Bindings(proto, _obj);\n\t        }\n\t      },\n\t      /**\n\t       * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n\t       * @arg {object} _obj - The context which to find the parent function.\n\t       * @arg {string} _name - The method name.\n\t       * @arg {array} _args - A collection of arguments to invoke the method with\n\t       * @returns {*} Whatever the caller returns.\n\t       */\n\t      sup: function sup(_obj, _name, _args) {\n\t        return api.proto.apply(_constructor.prototype, arguments);\n\t      },\n\t      /**\n\t       * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n\t       * @arg {object} _obj - The context which to define members.\n\t       * @arg {string} _name - The member name.\n\t       * @arg {*} _value - The value.\n\t       * @returns api\n\t       */\n\t      constant: function constant(_obj, _name, _value) {\n\t        _Object$defineProperty(_obj, _name, {\n\t          value: _value,\n\t          configureable: false,\n\t          writeable: false\n\t        });\n\t\n\t        return api;\n\t      },\n\t      /**\n\t       * Defines members on the constructor.\n\t       * @function static\n\t       * @overload\n\t       * @arg {string} _name - The member name.\n\t       * @arg {*} _value - The value.\n\t       * @returns api\n\t       */\n\t\n\t      /**\n\t       * Defines members on the constructor.\n\t       * @arg {object} _def - An object with members to mixin.\n\t       * @returns api\n\t       */\n\t      'static': function _static(_name_def, _value) {\n\t        var member, _name, _def;\n\t\n\t        _value ? _name = _name_def : _def = _name_def;\n\t\n\t        if (_def) {\n\t          for (member in _def) {\n\t            if (!_def.hasOwnProperty(member)) continue;\n\t            _constructor[member] = _def[member];\n\t          }\n\t        }\n\t\n\t        if (_name) {\n\t          _constructor[_name] = _value;\n\t        }\n\t\n\t        return api;\n\t      },\n\t      /**\n\t       * A pretty way of define the interface of your object type.\n\t       *\n\t       * You may pass any number of arguments as functions or strings.\n\t       *\n\t       * **Example**\n\t       * ```javascript\n\t       * function Car ($) {$(\n\t       *     // Defines a member assigned to `null`.\n\t       *     'name',\n\t       *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n\t       *     'engineType = \"standard\", speed = 0',\n\t       *\n\t       *     // Define instance members.\n\t       *     function alloc (_name) {\n\t       *         this.name = _name;\n\t       *     },\n\t       *\n\t       *     function drive () {\n\t       *         this.speed += 1;\n\t       *     }\n\t       * )}\n\t       * ```\n\t       *\n\t       * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n\t       * @arg {string|function} _def - A string of property definitions or a named function.\n\t       * @todo Support property assignment in alloc. Micah: 2/24/2016\n\t       */\n\t      $: function $() {\n\t        var args = toArray(arguments);\n\t\n\t        args.forEach(function (_member) {\n\t          var memberType, props, key;\n\t\n\t          memberType = typeof _member;\n\t\n\t          switch (memberType) {\n\t            case 'string':\n\t              props = _member.split(/\\s*,\\s*/);\n\t\n\t              if (props) {\n\t                props.forEach(function (_def) {\n\t                  var prop, val;\n\t\n\t                  prop = _def.split(/\\s*[:=]\\s*/);\n\t                  try {\n\t                    val = JSON.parse(prop[1]);\n\t                  } catch (e) {}\n\t                  _constructor.prototype[prop[0]] = typeof prop[1] !== 'undefined' ? val || prop[1] : null;\n\t                });\n\t              }\n\t              break;\n\t\n\t            case 'object':\n\t              for (key in _member) {\n\t                if (!_member.hasOwnProperty(key)) continue;\n\t                _constructor.prototype[key] = _member[key];\n\t              }\n\t              break;\n\t\n\t            case 'function':\n\t              if (!_member.name) throw TypeError('Member must be a named function.');\n\t              _constructor.prototype[_member.name] = _member;\n\t              break;\n\t          }\n\t        });\n\t\n\t        return api;\n\t      }\n\t    };\n\t\n\t    return args.map(function (_call) {\n\t      return api[_call] || module[_call];\n\t    });\n\t  }\n\t\n\t  defs = toArray(arguments);\n\t  module = !this ? {} : this;\n\t\n\t  defs.forEach(function (_constructor) {\n\t    var api;\n\t\n\t    if (typeof _constructor === 'object') {\n\t      var Super,\n\t          keys = _Object$keys(_constructor);\n\t\n\t      if (keys.length === 1 && module[keys[0]]) {\n\t        Super = module[keys[0]];\n\t        return Super.extend.call(module, _constructor[keys[0]]);\n\t      }\n\t    }\n\t\n\t    api = createApi(_constructor);\n\t\n\t    /**\n\t     * Creates a new instance of the constructor prototype.\n\t     * This also invokes the `alloc()` on the instance so you can define instance props.\n\t     * @arg {*} ... - Any number of arguments for `alloc()`.\n\t     * @returns instance\n\t     */\n\t    _constructor.create = function () {\n\t      var instance = _Object$create(_constructor.prototype);\n\t      if (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n\t      return instance;\n\t    };\n\t\n\t    /**\n\t     * Extends the provided constructor prototype.\n\t     * @arg {function} _definition - Constructor for the object type.\n\t     * @returns _constructor\n\t     */\n\t    _constructor.extend = function (_definition) {\n\t      _definition.prototype = _Object$create(_constructor.prototype, {\n\t        constructor: {\n\t          value: _definition,\n\t          enumerable: false,\n\t          writeable: false,\n\t          configureable: false\n\t        }\n\t      });\n\t\n\t      return type.call(this === _constructor ? null : this, _definition);\n\t    };\n\t\n\t    _constructor.apply(_constructor.prototype, api);\n\t\n\t    module[_constructor.name] = _constructor;\n\t  });\n\t\n\t  return defs.length > 1 ? module : defs[0];\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(92), __esModule: true };\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $.setDesc(it, key, desc);\n\t};\n\n/***/ },\n/* 93 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tfunction invokeResponsibilities(_scope, _event) {\n\t  if (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n\t    _scope.responsibilities.forEach(function (_record) {\n\t      if (_record.name === _event.name) {\n\t\n\t        // console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n\t        _record.ability.call(_scope, _event);\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n\t * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n\t * <style>\n\t * .tag {\n\t *   padding: 1px 4px;\n\t *   border-radius: 4px;\n\t *\n\t *   color: #fff;\n\t *   background-color: #aaa;\n\t * }\n\t *\n\t * .tag.behavior {\n\t *   background-color: #0ba;\n\t * }\n\t *\n\t * .tag.state {\n\t *   background-color: #ba0;\n\t * }\n\t *\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t *\n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n\t * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n\t * @extends GlobalScope\n\t */\n\tvar Entity = _typesGlobalScope2['default'].extend(function () {\n\t\n\t  function resolveTarget(_target) {\n\t\n\t    switch (typeof _target) {\n\t      case 'string':\n\t        return this.findOwn(_target);\n\t      case 'object':\n\t        if (_target.jquery) return _target;\n\t        if (Entity.isPrototypeOf(_target)) return _target;\n\t        if (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function ResponsibilityRecord(_name, _ability) {\n\t    this.name = _name;\n\t    this.ability = _ability;\n\t  }\n\t\n\t  function dragGreeter(_event) {\n\t    switch (_event.type) {\n\t      case 'drag-start':\n\t        this.grab(_event.state);\n\t        break;\n\t\n\t      case 'drag-move':\n\t        this.dragging(_event.state);\n\t        break;\n\t\n\t      case 'drag-end':\n\t        this.release(_event.state);\n\t        break;\n\t    }\n\t  }\n\t\n\t  function attachDragEvents() {\n\t    if (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n\t      this.on('drag-start drag-move drag-end', dragGreeter);\n\t    }\n\t  }\n\t\n\t  this.baseType = 'TYPE_ENTITY';\n\t  this.STATE = {\n\t    PLAYING: 'PLAYING',\n\t    BACKGROUND: 'BACKGROUND',\n\t    VOICE_OVER: 'VOICE-OVER',\n\t    SFX: 'SFX'\n\t  };\n\t\n\t  this.timeoutID = null;\n\t  this.intervalID = null;\n\t  this.responsibilities = null;\n\t  this.isComplete = false;\n\t  this.shouldInheritAbilities = true;\n\t  this.frameHandlers = null;\n\t  this.frameRate = 60; // 60fps\n\t  this.draggables = null;\n\t  this.requiredQueue = null;\n\t  this.bgImageCollection = null;\n\t\n\t  this.handleProperty({\n\t    size: function size(_node, _name, _value) {\n\t      var size;\n\t\n\t      if (this.is(_node)) {\n\t        size = _value.split(/\\s*[x,]\\s*/);\n\t        this.css({\n\t          width: size[0],\n\t          height: size[1] || size[0]\n\t        });\n\t      }\n\t    },\n\t\n\t    position: function position(_node, _name, _value) {\n\t      var size;\n\t\n\t      if (this.is(_node)) {\n\t        size = _value.split(/\\s*[x,]\\s*/);\n\t        this.css({\n\t          top: size[1] || size[0],\n\t          left: size[0]\n\t        });\n\t      }\n\t    },\n\t\n\t    draggable: function draggable(_node, _name, _value) {\n\t      if (!this.hasOwnProperty('draggables')) {\n\t        this.draggables = $();\n\t      }\n\t\n\t      this.draggables.push(_node);\n\t    },\n\t\n\t    bg: function bg(_node, _name, _value) {\n\t      var img = new Image();\n\t\n\t      if (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\t\n\t      if (this.isMemberSafe('bgImageCollection')) {\n\t        img.src = _value;\n\t        this.bgImageCollection.push(img);\n\t        $(_node).css('background-image', 'url(' + _value + ')');\n\t      }\n\t    }\n\t  });\n\t\n\t  this.__init = function (_event) {\n\t    if (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n\t      this.watchAssets(this.bgImageCollection);\n\t    }\n\t    attachDragEvents.call(this);\n\t\n\t    return this.proto();\n\t  };\n\t\n\t  this.size = function () {\n\t    var size;\n\t\n\t    if (arguments.length) {\n\t      size = _typesDimensions.Size.create(arguments);\n\t      this.css(size);\n\t      return size;\n\t    }\n\t\n\t    return _typesDimensions.Size.create().set(this.width(), this.height());\n\t  };\n\t\n\t  this.propagateBehavior = function (_event) {\n\t    var ids;\n\t\n\t    ids = [];\n\t\n\t    this.findOwn('.pl-scope').each(function (_index, _node) {\n\t      var $node = $(_node);\n\t      ids.push($node.id() || $node.address());\n\t    });\n\t\n\t    if (this.hasOwnProperty('entities') && this.entities.length) {\n\t      // console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\t\n\t      this.entities.forEach(function (_scope) {\n\t        invokeResponsibilities(_scope, _event);\n\t        _scope.propagateBehavior(_event);\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.require = function (_entity) {\n\t    if (!this.hasOwnProperty('requiredQueue')) {\n\t      this.requiredQueue = _typesQueue2['default'].create();\n\t      this.requiredQueue.on('complete', this.bind(function () {\n\t        this.log('entity complete');\n\t        this.complete();\n\t      }));\n\t\n\t      this.respond('complete', function (_event) {\n\t        if (!this.has(_event.target)) return;\n\t        if (_event.targetScope === this) return;\n\t\n\t        this.requiredQueue.ready(_event.behaviorTarget);\n\t      });\n\t    }\n\t\n\t    this.requiredQueue.add(_entity);\n\t    this.gate();\n\t\n\t    return this;\n\t  };\n\t\n\t  this.behavior = function (_name, _behavior) {\n\t    _behavior.method = this[_name] = function () {\n\t      var behaviorEvent, result;\n\t\n\t      behaviorEvent = {\n\t        name: _name,\n\t        message: '',\n\t        targetScope: this,\n\t        behaviorTarget: this\n\t      };\n\t\n\t      result = _behavior.apply(this, arguments);\n\t\n\t      if (typeof result === 'object') {\n\t        behaviorEvent = _util2['default'].mixin(behaviorEvent, result);\n\t      }\n\t\n\t      if (result !== false) {\n\t        this.trigger($.Event('behavior', behaviorEvent));\n\t      }\n\t\n\t      return this;\n\t    };\n\t\n\t    return this;\n\t  };\n\t\n\t  this.respond = function () {\n\t    var name, ability, parentScope, abilities, protoAbilities;\n\t\n\t    if (!this.hasOwnProperty('responsibilities')) {\n\t      abilities = _typesCollection2['default'].create();\n\t      protoAbilities = this.provideAblilityPototype();\n\t\n\t      if (this.shouldInheritAbilities && protoAbilities && protoAbilities.responsibilities) {\n\t        abilities.push.apply(abilities, protoAbilities.responsibilities);\n\t      }\n\t\n\t      this.responsibilities = abilities;\n\t    }\n\t\n\t    if (arguments.length === 1) {\n\t      switch (typeof arguments[0]) {\n\t        case 'string':\n\t          name = arguments[0];break;\n\t\n\t        case 'function':\n\t        case 'object':\n\t          ability = arguments[0];break;\n\t      }\n\t    } else {\n\t      name = arguments[0];\n\t      ability = arguments[1];\n\t    }\n\t\n\t    switch (typeof ability) {\n\t      case 'object':\n\t        for (name in ability) {\n\t          if (!ability.hasOwnProperty(name)) continue;\n\t\n\t          this.respond(name, ability[name]);\n\t        }\n\t        break;\n\t\n\t      case 'function':\n\t        this.responsibilities.add(new ResponsibilityRecord(name, ability));\n\t        break;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.delay = function (_time, _cb) {\n\t    var time = _util2['default'].toMillisec(_time);\n\t\n\t    _util2['default'].assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.repeat = function (_time, _cb) {\n\t    var time = _util2['default'].toMillisec(_time);\n\t\n\t    _util2['default'].assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\t\n\t    return this;\n\t  };\n\t\n\t  this.kill = function (_timer) {\n\t    var id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\t\n\t    if (typeof id === 'number') {\n\t      (_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n\t      this[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n\t    } else if (id) {\n\t      id.forEach(function (_id) {\n\t        (_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n\t      });\n\t\n\t      _timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.eachFrame = function (_handler, _on) {\n\t    var binder, frame, lastTime, rate, frames;\n\t\n\t    rate = this.frameRate || 1000;\n\t    frames = 0;\n\t    lastTime = 0;\n\t\n\t    if (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n\t      frame = function (_time) {\n\t        var i, handler;\n\t\n\t        if (rate) {\n\t          if (_time - lastTime >= 1000 / rate) {\n\t            for (i = 0; handler = this.frameHandlers[i]; i += 1) {\n\t              handler.call(this, _time, Math.round(1000 / (_time - lastTime)), rate);\n\t            }\n\t\n\t            if (frames === rate) frames = 0;\n\t\n\t            frames += 1;\n\t            lastTime = _time;\n\t          }\n\t        }\n\t\n\t        if (this.frameHandlers.length) {\n\t          window.requestAnimationFrame(binder);\n\t        }\n\t      };\n\t\n\t      binder = this.bind(frame);\n\t\n\t      // allows methods passed as _handler's to\n\t      // be able to trace back for proto() callbacks.\n\t      frame.method = this.eachFrame;\n\t\n\t      this.frameHandlers = _typesCollection2['default'].create();\n\t      window.requestAnimationFrame(binder);\n\t    }\n\t\n\t    if (_on !== false) {\n\t      this.frameHandlers.add(_handler);\n\t    } else {\n\t      this.frameHandlers.remove(_handler);\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.state = function (_flag, _definition, _imp) {\n\t    var flag, tester, setter, getter, STATE, def, opperations, names;\n\t\n\t    if (!_definition) {\n\t      return this.proto(_flag);\n\t    }\n\t\n\t    def = _definition.split(/\\s+/);\n\t    names = _flag.split(/\\s+/);\n\t    opperations = [];\n\t\n\t    def.forEach(this.bind(function (_opp) {\n\t      var method, flag;\n\t\n\t      method = _opp.slice(0, 1) === '+' ? 'addClass' : 'removeClass';\n\t\n\t      opperations.push({\n\t        method: method,\n\t        flag: _opp.slice(1)\n\t      });\n\t\n\t      if (method === 'addClass') {\n\t        flag = _opp.slice(1);\n\t        STATE = _util2['default'].transformId(flag);\n\t        this.STATE[STATE] = flag;\n\t      }\n\t    }));\n\t\n\t    setter = names[0];\n\t    tester = names[1];\n\t\n\t    this[setter] = function (_target) {\n\t      var target, uiStateEvent, oppsPerformed;\n\t\n\t      target = resolveTarget.call(this, _target);\n\t      uiStateEvent = $.Event('ui-' + setter, {\n\t        target: target.jquery ? target[0] : target,\n\t        targetScope: this\n\t      });\n\t      oppsPerformed = 0;\n\t\n\t      if (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n\t        return !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n\t      }\n\t\n\t      if (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\t\n\t      opperations.forEach(function (_record) {\n\t        // If we are adding or removing a class, test if the target already has/removed it.\n\t        // If so, then bump \"oppsPerformed\".\n\t        oppsPerformed += Number(target.hasClass(_record.flag) === ! ~_record.method.indexOf('add'));\n\t        target[_record.method](_record.flag);\n\t      });\n\t\n\t      if (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\t\n\t      if (oppsPerformed) {\n\t        this.trigger(uiStateEvent);\n\t        return target;\n\t      }\n\t\n\t      return false;\n\t    };\n\t\n\t    if (tester) {\n\t      getter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\t\n\t      this[tester] = function (_target) {\n\t        var target;\n\t\n\t        target = resolveTarget.call(this, _target);\n\t\n\t        return target.hasClass(this.STATE[STATE]);\n\t      };\n\t\n\t      this[getter] = function () {\n\t        return this.findOwn('.' + this.STATE[STATE]);\n\t      };\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.provideBehaviorEventScope = function () {\n\t    return this;\n\t  };\n\t\n\t  this.provideAblilityPototype = function () {\n\t    var owner;\n\t\n\t    owner = _util2['default'].getOwner(this, this.baseType);\n\t\n\t    return !!owner && owner.object;\n\t  };\n\t\n\t  this.completed = function () {\n\t    return this.game.demoMode || this.hasOwnProperty('isComplete') && this.isComplete || !this.requiredQueue || this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0;\n\t  };\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n\t   * @function module:types/Entity~Entity#complete\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   */\n\t  this.behavior('complete', function () {\n\t    if (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\t\n\t    this.isComplete = true;\n\t    this.addClass('COMPLETE');\n\t\n\t    return {\n\t      behaviorTarget: this\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a drggable has been grabbed for dragging.\n\t   * @function module:types/Entity~Entity#grab\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('grab', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a draggable as being dragged.\n\t   * @function module:types/Entity~Entity#dragging\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('dragging', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag behavior\">Behavior</span>\n\t   * Reports a drggable as released or droped.\n\t   * @function module:types/Entity~Entity#release\n\t   * @arg {object} _state - An object containing the state of a draggable.\n\t   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t   *\n\t   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t   */\n\t  this.behavior('release', function (_state) {\n\t    return {\n\t      state: _state,\n\t      behaviorTarget: _state.$draggable\n\t    };\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#open\n\t   * @fires Entity#ui-open\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `OPEN` class name.\n\t   * @function module:types/Entity~Entity#opened\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Open'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `OPEN` class name.\n\t   * @function module:types/Entity~Entity#getOpened\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('open opened', '+OPEN -LEAVE');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#close\n\t   * @fires Entity#ui-close\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('close', '-OPEN');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#leave\n\t   * @fires Entity#ui-leave\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `LEAVE` class name.\n\t   * @function module:types/Entity~Entity#left\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Leave'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `LEAVE` class name.\n\t   * @function module:types/Entity~Entity#getLeft\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('leave left', '+LEAVE', {\n\t    willSet: function willSet(_target) {\n\t      this.close(_target);\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#enable\n\t   * @fires Entity#ui-enable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `ENABLED` class name.\n\t   * @function module:types/Entity~Entity#enabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Enabled'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `ENABLED` class name.\n\t   * @function module:types/Entity~Entity#getEnabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('enable enabled', '+ENABLED -DISABLED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#disable\n\t   * @fires Entity#ui-disable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `DISABLED` class name.\n\t   * @function module:types/Entity~Entity#disabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Disabled'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `DISABLED` class name.\n\t   * @function module:types/Entity~Entity#getDisabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('disable disabled', '+DISABLED -ENABLED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#select\n\t   * @fires Entity#ui-select\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `SELECTED` class name.\n\t   * @function module:types/Entity~Entity#selected\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Selected'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `SELECTED` class name.\n\t   * @function module:types/Entity~Entity#getDisabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('select selected', '+SELECTED', {\n\t    willSet: function willSet(_target) {\n\t      var target, $parent;\n\t\n\t      target = resolveTarget.call(this, _target);\n\t      $parent = target.parent();\n\t\n\t      $parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n\t        this.deselect(_node);\n\t      }));\n\t      $parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n\t        this.unhighlight(_node);\n\t      }));\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#deselect\n\t   * @fires Entity#ui-deselect\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('deselect', '-SELECTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#highlight\n\t   * @fires Entity#ui-highlight\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n\t   * @function module:types/Entity~Entity#highlighted\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Highlighted'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `HIGHLIGHTED` class name.\n\t   * @function module:types/Entity~Entity#getHighlighted\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('highlight highlighted', '+HIGHLIGHTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#unhighlight\n\t   * @fires Entity#ui-unhighlight\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('unhighlight', '-HIGHLIGHTED');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#draggable\n\t   * @fires Entity#ui-draggable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n\t   * @function module:types/Entity~Entity#dragEnabled\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Draggable'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `DRAGGABLE` class name.\n\t   * @function module:types/Entity~Entity#getDragEnabled\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('draggable dragEnabled', '+DRAGGABLE', {\n\t    didSet: function didSet(_target) {\n\t      this.translate(resolveTarget.call(this, _target));\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#undraggable\n\t   * @fires Entity#ui-undraggable\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('undraggable', '-DRAGGABLE');\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n\t   * @function module:types/Entity~Entity#translate\n\t   * @fires Entity#ui-translate\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n\t   * @function module:types/Entity~Entity#translate\n\t   * @fires Entity#ui-translate\n\t   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t   * @returns `this`\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n\t   * @function module:types/Entity~Entity#translated\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns {Boolean} Translate'ness.\n\t   */\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Provides the elements with the `TRANSLATED` class name.\n\t   * @function module:types/Entity~Entity#getTranslated\n\t   * @returns {jQuery} jQuery collection of matched nodes.\n\t   * @todo Return scope if available.\n\t   */\n\t  this.state('translate translated', '+TRANSLATED', {\n\t    willSet: function willSet(_target_point, _point) {\n\t      var point, target;\n\t\n\t      target = resolveTarget.call(this, _target_point);\n\t      point = ! ~[_target_point.x, _target_point.y].indexOf(undefined) ? _target_point : _point;\n\t\n\t      if (point) {\n\t        target.css('transform', 'translateX(' + point.x + 'px) translateY(' + point.y + 'px)');\n\t      }\n\t    }\n\t  });\n\t\n\t  /**\n\t   * <span class=\"tag state\">State</span>\n\t   * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n\t   * @function module:types/Entity~Entity#untranslate\n\t   * @fires Entity#ui-untranslate\n\t   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t   * @returns `this`\n\t   */\n\t  this.state('untranslate', '-TRANSLATED', {\n\t    willSet: function willSet() {\n\t      this.css('transform', 'none');\n\t    }\n\t  });\n\t\n\t  this.state('gate gated', '+GATED');\n\t});\n\t\n\texports['default'] = { Entity: Entity, invokeResponsibilities: invokeResponsibilities };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 94 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  Screen\n\t*  @desc Contains...\n\t*  @proto Entity\n\t*/\n\t\n\tvar _typesEntity = __webpack_require__(93);\n\t\n\tvar Screen = _typesEntity.Entity.extend(function () {\n\t\n\t  function attachBehaviorEvent() {\n\t    this.on('behavior', function (_event) {\n\t      // console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\t\n\t      if (this !== _event.targetScope) {\n\t        _typesEntity.invokeResponsibilities(this, _event);\n\t      }\n\t\n\t      this.propagateBehavior(_event);\n\t    });\n\t  }\n\t\n\t  this.baseType = 'TYPE_SCREEN';\n\t  this.game = null;\n\t  this.screen = null;\n\t\n\t  this.__init = function () {\n\t    this.proto();\n\t\n\t    if (this.is(pl.game.config('screenSelector'))) {\n\t      attachBehaviorEvent.call(this);\n\t    }\n\t  };\n\t\n\t  this.start = function () {\n\t    this.startAudio();\n\t    return this;\n\t  };\n\t\n\t  this.stop = function () {\n\t    this.stopAudio();\n\t    return this;\n\t  };\n\t\n\t  this.pause = function () {\n\t    this.pauseMedia();\n\t    if (this.hasOwnProperty('entities') && this.entities) {\n\t      this.entities.forEach(function (entity) {\n\t        if (typeof entity.pause === 'function') entity.pause();\n\t      });\n\t    }\n\t    return this;\n\t  };\n\t\n\t  this.resume = function () {\n\t    this.resumeMedia();\n\t    if (this.hasOwnProperty('entities') && this.entities) {\n\t      this.entities.forEach(function (entity) {\n\t        if (typeof entity.resume === 'function') entity.resume();\n\t      });\n\t    }\n\t    return this;\n\t  };\n\t\n\t  this.startAudio = function () {\n\t    if (!this.audio) return;\n\t    this.audio.background.play();\n\t    this.audio.voiceOver.play();\n\t  };\n\t\n\t  this.stopAudio = function () {\n\t    if (!this.audio) return;\n\t    this.audio.voiceOver.stop('@ALL');\n\t  };\n\t\n\t  this.pauseMedia = function () {\n\t    if (!this.currentMedia) return;\n\t    for (var media in this.currentMedia) {\n\t      if (this.currentMedia.hasOwnProperty(media)) {\n\t        if (this.currentMedia[media]) this.currentMedia[media].pause();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.resumeMedia = function () {\n\t    if (!this.currentMedia) return;\n\t    for (var media in this.currentMedia) {\n\t      if (this.currentMedia.hasOwnProperty(media)) {\n\t        if (this.currentMedia[media]) this.currentMedia[media].resume();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.index = function () {\n\t    if (this === this.screen) return this.game.screens.indexOf(this);\n\t    return this.$els.index();\n\t  };\n\t\n\t  this.next = function () {\n\t    if (!this.completed()) return false;\n\t    return this.game.screens[this.screen.index() + 1];\n\t  };\n\t\n\t  this.prev = function () {\n\t    return this.game.screens[this.screen.index() - 1];\n\t  };\n\t\n\t  this.quit = function () {\n\t    this.game.quit.open();\n\t  };\n\t\n\t  this.nextSib = function () {\n\t    return $.fn.next.apply(this.$els, arguments);\n\t  };\n\t\n\t  this.prevSib = function () {\n\t    return $.fn.prev.apply(this.$els, arguments);\n\t  };\n\t\n\t  this.isLast = function () {\n\t    return this.game.screens.indexOf(this.screen) === this.game.screens.length - 1;\n\t  };\n\t});\n\t\n\texports['default'] = Screen;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 95 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(15)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Node scope for the top level game node.\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesScreen = __webpack_require__(94);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesScope = __webpack_require__(31);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _typesAudioManager = __webpack_require__(42);\n\t\n\tvar Game = _typesGlobalScope2['default'].extend(function () {\n\t\n\t  var Viewport, screenPrototype, platformEventHandler;\n\t\n\t  /**\n\t   * Detects the device and adds the appropriate state classes.\n\t   */\n\t  function detechDevice() {\n\t    var deviceClasses = \"\";\n\t\n\t    if (iOS()) deviceClasses += \"iOS \";\n\t    if (mobileOrTablet()) deviceClasses += \"MOBILE \";\n\t\n\t    this.addClass(deviceClasses);\n\t  }\n\t\n\t  function iOS() {\n\t    var iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'];\n\t\n\t    if (!!navigator.platform) {\n\t      while (iDevices.length) {\n\t        if (navigator.platform === iDevices.pop()) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t\n\t    return false;\n\t  }\n\t\n\t  function mobileOrTablet() {\n\t    var check = false;\n\t    (function (a) {\n\t      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n\t    })(navigator.userAgent || navigator.vendor || window.opera);\n\t    return check;\n\t  }\n\t\n\t  /**\n\t   * Scales the game view to fill the browser window.\n\t   */\n\t  function scaleGame() {\n\t    var vpSize, gameDimensions, width, height, zoom;\n\t\n\t    vpSize = this.viewport.size();\n\t    gameDimensions = _playGame2['default'].config('dimensions');\n\t    width = gameDimensions.width || this.width();\n\t    height = Math.round(gameDimensions.width / gameDimensions.ratio);\n\t    zoom = this.viewport.width / width;\n\t\n\t    if (Math.round(height * zoom) > this.viewport.height) {\n\t      zoom = (this.viewport.height / height).toPrecision(4);\n\t    }\n\t\n\t    _util2['default'].mixin(this.node().style, {\n\t      width: width + 'px',\n\t      zoom: zoom\n\t    });\n\t\n\t    if (!this.css('zoom')) {\n\t      this.css({\n\t        transform: 'scale(' + zoom + ')',\n\t        transformOrigin: (zoom < 1 ? '0px' : '50%') + ' 0px 0px',\n\t        height: this.viewport.height / zoom\n\t      });\n\t    }\n\t\n\t    this.zoom = zoom;\n\t  }\n\t\n\t  function demoMode(_set) {\n\t    this.demoMode = _set != null ? _set : !this.demoMode;\n\t    this[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\t\n\t    console.info(this.id(), 'is now ' + (this.demoMode ? 'in' : 'out of') + ' Demo Mode.');\n\t  }\n\t\n\t  function collectVideos() {\n\t    this.find('video').each((function (_index, _node) {\n\t      this.media.video.add(_node);\n\t\n\t      _node.onplay = (function () {\n\t        var playing = this.media.playing('.background, .voiceOver');\n\t        if (playing) playing.stop('@ALL');\n\t        this.log('video play', playing);\n\t      }).bind(this);\n\t    }).bind(this));\n\t  }\n\t\n\t  screenPrototype = _typesScreen2['default'];\n\t  platformEventHandler = new function () {\n\t\n\t    this.invoke = function (_event, _ctx) {\n\t      if (typeof this[_event.name] === 'function') {\n\t        this[_event.name].call(_ctx, _event);\n\t      }\n\t    };\n\t\n\t    this['toggle-demo-mode'] = function (_set) {\n\t      demoMode.call(this);\n\t    };\n\t  }();\n\t\n\t  this.baseType = 'TYPE_GAME';\n\t  this.screens = null;\n\t  this.zoom = 1;\n\t  this.keyCommands = null;\n\t  this.demoMode = false;\n\t  this.media = null;\n\t  this.viewport = new function () {\n\t    var vp, $html, RESIZE_HANDLERS;\n\t\n\t    vp = this;\n\t    $html = $('html');\n\t    RESIZE_HANDLERS = [];\n\t\n\t    $(window).on('resize', function (_event) {\n\t      if (!$html.hasClass(vp.orientation)) {\n\t        $html.removeClass('squareish landscape protrait').addClass(vp.orientation);\n\t      }\n\t\n\t      RESIZE_HANDLERS.forEach(function (_handler) {\n\t        _handler(_event);\n\t      });\n\t    });\n\t\n\t    this.LANDSCAPE = 'landscape';\n\t    this.PROTRAIT = 'protrait';\n\t    this.SQUAREISH = 'squareish';\n\t\n\t    this.size = function () {\n\t      return _typesDimensions.Size.create().set(window.innerWidth, window.innerHeight);\n\t    };\n\t\n\t    _Object$defineProperties(this, {\n\t      width: {\n\t        get: function get() {\n\t          return window.innerWidth;\n\t        },\n\t\n\t        configurable: false\n\t      },\n\t\n\t      height: {\n\t        get: function get() {\n\t          return window.innerHeight;\n\t        },\n\t\n\t        configurable: false\n\t      },\n\t\n\t      orientation: {\n\t        get: function get() {\n\t          var ratio = this.size().ratio();\n\t\n\t          switch (true) {\n\t            case ratio > 0.9 && ratio < 1.1:\n\t              return 'squareish';\n\t            case ratio > 1.1:\n\t              return 'landscape';\n\t            case ratio < 0.9:\n\t              return 'protrait';\n\t          }\n\t        }\n\t      }\n\t    });\n\t\n\t    this.onResize = function (_handler) {\n\t      RESIZE_HANDLERS.push(_handler);\n\t    };\n\t\n\t    this.offResize = function (_handler) {\n\t      var index = RESIZE_HANDLERS.indexOf(_handler);\n\t\n\t      if (~index) RESIZE_HANDLERS.splice(index, 1);\n\t    };\n\t\n\t    $html.addClass(this.orientation);\n\t  }();;\n\t\n\t  this.willInit = function () {\n\t    this.addClass('pl-game');\n\t\n\t    detechDevice.call(this);\n\t    scaleGame.call(this);\n\t    this.watchAudio();\n\t    this.captureScreens();\n\t\n\t    this.viewport.onResize(this.bind(scaleGame));\n\t\n\t    pl.game.on('platform-event', this.bind(function (_event) {\n\t      platformEventHandler.invoke(_event, this);\n\t    }));\n\t\n\t    window.addEventListener('load', window.focus);\n\t    window.addEventListener('focus', (function () {\n\t      this.resume();\n\t    }).bind(this));\n\t    window.addEventListener('blur', (function () {\n\t      this.pause();\n\t    }).bind(this));\n\t\n\t    return this;\n\t  };\n\t\n\t  /**\n\t   * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n\t   * ### Key Names\n\t   * - *meta*: Command (aka Apple  or win)\n\t   * - *alt*: Alt (aka Option )\n\t   * - *shift*: Shift \n\t   * - *ctrl*: Control ^\n\t   * - *enter*: Enter or Return\n\t   * - *esc*: Escape\n\t   * - *left*: Left arrow\n\t   * - *up*: Up arrow\n\t   * - *right*: Right arrow\n\t   * - *down*: Down arrow\n\t   *\n\t   * ### Example\n\t   * ```javascript\n\t   * // Overriding print.\n\t   * this.game.onKeys('cmd+P', printHandler);\n\t   *\n\t   * // Holding Control and pressing \"K\" then \"B\"\n\t   * this.game.onKeys('ctrl+K,B', handler);\n\t   * ```\n\t   * @arg {string} _commands - The key or sequence of keys.\n\t   * @arg {function} _handler - Your event handler for when you key pattern is matched.\n\t   * @returns `this`\n\t   */\n\t  this.onKeys = function (_commands, _handler) {\n\t    var sequence, chords, modifiers, map;\n\t\n\t    if (!this.keyCommands) {\n\t      this.keyCommands = {};\n\t\n\t      map = {\n\t        13: 'enter',\n\t        16: 'shift',\n\t        17: 'ctrl',\n\t        18: 'alt',\n\t        27: 'esc',\n\t        37: 'left',\n\t        38: 'up',\n\t        39: 'right',\n\t        40: 'down',\n\t        91: 'meta',\n\t        enter: 13,\n\t        shift: 16,\n\t        ctrl: 17,\n\t        alt: 18,\n\t        esc: 27,\n\t        left: 37,\n\t        up: 38,\n\t        right: 39,\n\t        down: 40,\n\t        meta: 91\n\t      };\n\t\n\t      modifiers = [16, 17, 18, 91];\n\t      sequence = [];\n\t      chords = [];\n\t\n\t      this.on('keydown', function (_event) {\n\t        var modifier, key, eventMods, currentMods, command, handler;\n\t\n\t        modifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t        key = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t        currentMods = [];\n\t\n\t        // Collect the modifiers the event says are still down.\n\t        eventMods.forEach(function (_modifierDown, _index) {\n\t          // use the modifier name\n\t          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t        });\n\t\n\t        // Don't add keys we already have during rapid-fire events\n\t        if (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\t\n\t        // Construct the command\n\t        command = chords.length ? (chords.push(key), chords.join(',')) : (sequence.push(key), sequence.join('+'));\n\t\n\t        handler = this.keyCommands[command];\n\t\n\t        if (handler) {\n\t          handler.call(this, _event, command);\n\t          // Keep current modifiers.\n\t          sequence = currentMods.map(function (_key, _index) {\n\t            var key = sequence[_index];\n\t            return currentMods[currentMods.indexOf(key)];\n\t          });\n\t          chords = [];\n\t\n\t          // Override original key command (i.e. meta+Q).\n\t          _event.preventDefault();\n\t        }\n\t      });\n\t\n\t      this.on('keyup', function (_event) {\n\t        var key, index, modifier, eventMods, currentMods;\n\t\n\t        key = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t        index = sequence.indexOf(key);\n\t        modifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t        // Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n\t        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t        currentMods = [];\n\t\n\t        // Collect the modifiers the event says are still down.\n\t        eventMods.forEach(function (_modifierDown, _index) {\n\t          // use the modifier name\n\t          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t        });\n\t\n\t        // If the key released is a modifier...\n\t        if (key === modifier) {\n\t          // ...keep current modifiers...\n\t          sequence = currentMods.map(function (_key, _index) {\n\t            var key = sequence[_index];\n\t            return currentMods[currentMods.indexOf(key)];\n\t          });\n\t          // ...clear registered chords.\n\t          chords = [];\n\t        } else {\n\t          // If we had pressed more than one key...\n\t          if (sequence.length > 1) {\n\t            // Check if the first is a modifier then switch to chord capturing\n\t            if (~modifiers.indexOf(map[sequence[0]])) {\n\t              chords.push(sequence.join('+'));\n\t            }\n\t          }\n\t\n\t          if (~index) sequence.splice(index, 1);\n\t          if (!sequence.length) chords = [];\n\t        }\n\t      });\n\t    }\n\t\n\t    this.keyCommands[_commands] = _handler;\n\t\n\t    return this;\n\t  };\n\t\n\t  this.screen = function (_id, _implementation) {\n\t    var prototype, selector, screenSelector, instance;\n\t\n\t    if (arguments.length === 1 && typeof _id === 'function') {\n\t      screenPrototype = _typesScreen2['default'].extend(_id);\n\t      return this;\n\t    }\n\t\n\t    if (!this.hasOwnProperty('screens')) this.screens = _typesCollection2['default'].create();\n\t\n\t    if (this.hasOwnProperty('$els')) {\n\t      debugger;\n\t      screenSelector = pl.game.config('screenSelector');\n\t      prototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t      selector = typeof _id === 'number' ? screenSelector + ':nth-child(' + (_id + 1) + ')' : '#' + _id;\n\t      instance = prototype.extend(_implementation).initialize(this.find(selector));\n\t\n\t      instance.screen = instance;\n\t      if (!instance.game) {\n\t        instance.game = instance.closest('.pl-game').scope();\n\t      }\n\t    } else {\n\t      this.screens.push({\n\t        index: typeof _id === 'number' ? _id : null,\n\t        name: typeof _id === 'string' ? _id : null,\n\t        implementation: _implementation\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.captureScreens = function () {\n\t    var screenSelector, prototype, collection;\n\t\n\t    screenSelector = pl.game.config('screenSelector');\n\t    prototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t    collection = [];\n\t\n\t    this.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n\t      var $node, screen, record, key, id, index, component;\n\t\n\t      $node = $(_node);\n\t      id = $node.id();\n\t      key = id ? 'name' : (id = _index, 'index');\n\t      record = this.screens && this.screens.get(id, key);\n\t      component = $node.attr('pl-component');\n\t      screen = _typesScope.createEntity.call(prototype, $node, record && record.implementation);\n\t      screen.screen = screen;\n\t      screen.game = this;\n\t\n\t      if ($node.attr('pl-skip') == null) collection.push(screen);\n\t\n\t      if (key === 'name' || component) {\n\t        _util2['default'].assignRef(this, _util2['default'].transformId(key === 'name' && id || component, true), screen);\n\t      }\n\t    }));\n\t\n\t    if (collection.length) this.screens = collection;\n\t\n\t    return this;\n\t  };\n\t\n\t  this.watchAudio = function () {\n\t    this.media = _typesAudioManager.MediaManager.create(this.id());\n\t\n\t    /**\n\t     * Prevent duplicate playback of voiceOvers and backgrounds.\n\t     */\n\t    this.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n\t      var playing = this.playing() || [];\n\t      // shouldPlay = false if _event.target is already playing.\n\t      _event.response(!playing || !playing.length || ! ~playing.indexOf(_event.target) && !playing.has(_event.target.fileName));\n\t    });\n\t\n\t    /**\n\t     * \n\t     */\n\t    this.media.rule('.voiceOver', function (_event) {\n\t      var audio, playing;\n\t\n\t      audio = _event.target;\n\t      playing = audio && this.playing('.audio:not(#' + audio.id() + ')');\n\t\n\t      switch (_event.type) {\n\t        case 'play':\n\t          if (playing) {\n\t            playing.filter('.voiceOver').stop('@ALL');\n\t            playing.filter('.background').volume(_playGame2['default'].config('bgVolume.drop') || 0.2);\n\t          }\n\t          break;\n\t\n\t        case 'pause':\n\t        case 'stopped':\n\t        case 'ended':\n\t          if (playing) playing.filter('.background').volume(_playGame2['default'].config('bgVolume.max') || 1);\n\t          break;\n\t      }\n\t    });\n\t\n\t    this.media.rule('.background', 'play', function (_event) {\n\t      var playing = this.playing('.background:not(#' + _event.target.id() + ')');\n\t      if (playing) playing.stop('@ALL');\n\t    });\n\t\n\t    if (~pl.EVENT.ACTION.indexOf('touch')) {\n\t      this.on(pl.EVENT.ACTION, function beginAudio(_event) {\n\t        var ctx, screen;\n\t\n\t        ctx = _playGame2['default'].getAudioContext();\n\t        screen = this.currentScreen();\n\t\n\t        if (screen && ctx && ctx.state === 'suspended') {\n\t          _playGame2['default'].enableAudioContext();\n\t          this.log('awesome!');\n\t          screen.startAudio();\n\t          this.off(pl.EVENT.ACTION, beginAudio);\n\t        }\n\t      });\n\t    }\n\t\n\t    collectVideos.call(this);\n\t  };\n\t\n\t  this.progress = function () {\n\t    return {\n\t      currentScreen: this.currentScreen().index()\n\t    };\n\t  };\n\t\n\t  this.currentScreen = function () {\n\t    return this.findOwn(pl.game.config('screenSelector') + '.OPEN').not('#quit').scope();\n\t  };\n\t\n\t  this.flip = function () {\n\t    console.log('THATS A FLIP!');\n\t    _playGame2['default'].report.flip(this);\n\t  };\n\t\n\t  this.pause = function (quitScreen) {\n\t    if (!quitScreen) this.addClass('PAUSED');\n\t    this.screens.forEach(function (screen) {\n\t      if (screen.state(screen.STATE.OPEN)) {\n\t        screen.pause();\n\t      }\n\t    });\n\t    _playGame2['default'].getAudioContext().suspend();\n\t  };\n\t\n\t  this.resume = function () {\n\t    this.removeClass('PAUSED');\n\t    this.screens.forEach(function (screen) {\n\t      if (screen.state(screen.STATE.OPEN)) screen.resume();\n\t    });\n\t    if (!this.hasClass('QUIT-SCREEN')) _playGame2['default'].getAudioContext().resume();\n\t  };\n\t\n\t  this.exit = function () {\n\t    console.log('GOODBYE!');\n\t    _playGame2['default'].report.exit(this);\n\t  };\n\t\n\t  /**\n\t   * Demo mode key command\n\t   */\n\t  this.onKeys('ctrl+D,M', function () {\n\t    demoMode.call(this);\n\t  });\n\t\n\t  /**\n\t   * Keyboard screen navigation\n\t   */\n\t  this.onKeys('left', function () {\n\t    var current;\n\t\n\t    current = this.currentScreen();\n\t\n\t    if (current) current.prev();\n\t  });\n\t\n\t  this.onKeys('right', function () {\n\t    var current;\n\t\n\t    current = this.currentScreen();\n\t\n\t    if (current) current.next();\n\t  });\n\t});\n\t\n\texports['default'] = Game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * API for communicaion between a game and the platform.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar platform = new function () {\n\t\n\t  function createEvent(_name, _props) {\n\t    var eventObject;\n\t\n\t    eventObject = _util2['default'].mixin(new Event('game-event', { bubbles: true, cancelable: false }), {\n\t      name: _name,\n\t      respond: function respond(_data) {\n\t        var platformEvent;\n\t\n\t        platformEvent = $.Event('platform-event', {\n\t          name: _name,\n\t          gameData: _data\n\t        });\n\t\n\t        pl.game.trigger(platformEvent);\n\t      }\n\t    }, _props);\n\t\n\t    return eventObject;\n\t  }\n\t\n\t  this.EVENT_INIT = 'init';\n\t  this.EVENT_SAVE = 'save';\n\t  this.EVENT_EXIT = 'exit';\n\t  this.EVENT_FLIPPED = 'flipped';\n\t\n\t  this.emit = function (_name, data) {\n\t    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name, data));\n\t  };\n\t\n\t  this.saveGameState = function (_data) {\n\t    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n\t  };\n\t\n\t  window.addEventListener('platform-event', function (_event) {\n\t    var platformEvent;\n\t\n\t    platformEvent = $.Event('platform-event', {\n\t      name: _event.name\n\t    });\n\t\n\t    pl.game.trigger(platformEvent);\n\t  });\n\t}();\n\t\n\texports['default'] = platform;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** play.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cdf663bc8f89ec0e0fab\n **/","/**\n * Boot file for the Play library.\n *\n * @module\n *\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires jQExtentions\n * @requires play\n */\nimport 'jQExtentions';\nimport play from 'play';\n\n/**\n * Begin running the library\n */\nfunction run() {\n  play.game.run();\n}\n\n// export namespace to global object.\nwindow.play = window.pl = play;\n\n// Invoke 'run' when DOM has finished loading.\ndocument.addEventListener('DOMContentLoaded', run, false);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/main.js\n **/","module.exports = require(\"./interopRequireDefault.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interop-require-default.js\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interopRequireDefault.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\n * Extentions to jQuery used by the library.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires types/Dimensions\n * @requires Matrix\n */\nimport { Point, Size } from 'types/Dimensions';\nimport Matrix from 'lib/matrix';\n\n/**\n * jQuery's prototype\n * @external jQuery\n * @see {@link http://api.jquery.com/}\n */\n\n(function () {\n  var original;\n\n  original = {\n    position: this.position\n  };\n\n  /**\n   * Resolves the scope for each of the set of matched nodes.\n   * @function external:jQuery#scope\n   * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n   */\n  this.scope = function () {\n    var result;\n\n    result = [];\n\n    this.each(function () {\n      var $node, scope;\n\n      $node = $(this);\n      scope = $node.data('pl-scope');\n\n      if (!scope) {\n        scope = $node.closest('.pl-scope').data('pl-scope');\n      }\n\n      if (scope) result.push(scope);\n    });\n\n    return (result.length > 1) ? result : result[0];\n  };\n\n  /**\n   * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n   * @function external:jQuery#id\n   * @arg {string} [_set] Name to set as the node's id.\n   * @returns {string} The resolved id.\n   */\n  this.id = function (_set) {\n    if (_set !== undefined) {\n      // Remove attribute.\n      if (~['', null].indexOf(_set)) {\n        this.attr('id', null);\n      }\n\n      // If document already has the id defined then set as a unique library id.\n      if ($('#' + _set).length) {\n        this.attr('pl-id', _set);\n      } else {\n        this.attr('id', _set);\n      }\n\n      return this;\n    }\n\n    return this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n  };\n\n  /**\n   * Provides the 'relative' CSS selector for the first node in the collection.\n   * @function external:jQuery#address\n   * @returns {string}\n   *\n   * @example\n   * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n   * $('#sweater').address() // div#sweater.wide\n   */\n  this.address = function () {\n    var tag, id, classes;\n\n    tag = this[0].nodeName.toLowerCase();\n    id = this.attr('id');\n    classes = this.attr('class') ? '.' + this.attr('class').split(' ').join('.') : '';\n\n    return tag + (id ? '#' + id : '') + classes;\n  };\n\n  /**\n   * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n   * @function external:jQuery#state\n   * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n   * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n   */\n  this.state = function (_test) {\n    var classes;\n\n    if (_test) return this.hasClass(_test.toUpperCase());\n\n    classes = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\n    return classes && (classes.length === 1 ? classes[0] : classes);\n  };\n\n  this.size = function () {\n    var size;\n\n    if (!arguments.length) {\n      size = Size.create().set(this.width(), this.height());\n    } else {\n      size = Size.create(arguments);\n      this.css(size);\n    }\n\n    return size;\n  };\n\n  this.position = function () {\n    var pos;\n\n    if (!arguments.length) {\n      pos = original.position.call(this);\n      pos = Point.create().set(pos.left, pos.top);\n    } else {\n      pos = Point.create(arguments);\n\n      this.css({\n        position: 'relative',\n        left: pos.x,\n        top: pos.y\n      });\n    }\n\n    return pos;\n  };\n\n  /**\n   * Provides the jQuery offset for the first node in the collection.\n   * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n   * @function external:jQuery#absolutePosition\n   * @returns {Point}\n   */\n  this.absolutePosition = function () {\n    var offset;\n\n    if (!arguments.length) {\n      offset = this.offset();\n\n      return Point.create().set(offset.left, offset.top);\n    } else {\n      offset = Point.create(arguments);\n\n      this.css({\n        position: 'absolute',\n        top: offset.y,\n        left: offset.x\n      });\n\n      return offset;\n    }\n  };\n\n  /**\n   * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n   * @function external:jQuery#transform\n   * @arg {number} [_scaleX] - scale x\n   * @arg {number} [_shearY] - shear y\n   * @arg {number} [_shearX] - shear x\n   * @arg {number} [_scaleY] - scale y\n   * @arg {number} [_translateX] - translate x\n   * @arg {number} [_translateY] - translate y\n   * @returns {Matrix}\n   */\n\n  /**\n   * Provides the CSS matrix transform for the first node in the collection.\n   * @function external:jQuery#transform\n   * @returns {Matrix}\n   */\n  this.transform = function () {\n    var t, matrix, is3d;\n\n    matrix = new Matrix();\n\n    if (!arguments.length) {\n      t = this.css('transform');\n      is3d = !!~t.indexOf('matrix3d');\n\n      if (t !== 'none') {\n        t = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n        if (is3d) {\n          t = (function (_matrix) {\n            var i, result;\n\n            result = [];\n\n            for (i = 0; i < _matrix.length; i += 4) {\n              result = result.concat(_matrix.slice(i, i + 2));\n            }\n            return result;\n          }(t));\n        }\n\n        t = t.map(parseFloat);\n\n        matrix.setTransform.apply(matrix, t);\n\n        return matrix;\n      }\n\n      return t;\n    }\n\n    matrix.setTransform.apply(matrix, arguments);\n\n    this.css('transform', matrix.toCSS());\n\n    return matrix;\n  };\n\n  /**\n   * Getter/Setter for the CSS transform translation. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @arg {Point} _point - A point object {x,y}\n   * @returns {Point}\n   */\n\n  /**\n   * Getter/Setter for the CSS transform translation.\n   * @function external:jQuery#transformPosition\n   * @arg {number} _x - x coordinate\n   * @arg {number} _y - y coordinate\n   * @returns {Point}\n   */\n  this.transformPosition = function () {\n    var matrix, point;\n\n    matrix = this.transform();\n    point = Point.create().set(0, 0);\n\n    if (!arguments.length) {\n      if (matrix !== 'none') point.set(matrix.e, matrix.f);\n    } else {\n      if (matrix === 'none') matrix = new Matrix();\n\n      point.set.apply(point, arguments);\n      matrix.translate(point.x, point.y);\n      this.css('transform', matrix.toCSS());\n    }\n\n    return point;\n  };\n\n  /**\n   * Getter for the CSS transform scale. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @returns {Point}\n   */\n\n  /**\n   * Setter for the CSS transform scale. (overloaded)\n   * @function external:jQuery#transformPosition\n   * @arg {Point} _point - A point object {x,y}\n   * @returns {Point}\n   */\n\n  /**\n   * Setter for the CSS transform scale.\n   * @function external:jQuery#transformPosition\n   * @arg {number} _x - x coordinate\n   * @arg {number} _y - y coordinate\n   * @returns {Point}\n   */\n  this.transformScale = function () {\n    var matrix, scale;\n\n    matrix = this.transform();\n    scale = Point.create().set(1, 1);\n\n    if (!arguments.length) {\n      if (matrix !== 'none') scale.set(matrix.a, matrix.d);\n    } else {\n      if (matrix === 'none') matrix = new Matrix();\n\n      scale.set.apply(scale, arguments);\n      matrix.scale(scale.x, scale.y);\n      this.css('transform', matrix.toCSS());\n    }\n\n    return scale;\n  };\n\n  /**\n   * Accessor method for `pl` attributes.\n   */\n  this.pl = function (_name, _value) {\n    var args, result;\n\n    if (!_name) {\n      result = {};\n      this.each(function () {\n        Array.forEach(this.attributes, function (_attr) {\n          if (_attr.name.indexOf('pl-') === 0) {\n            result[_attr.name.slice(3)] = _attr.value;\n          }\n        });\n      });\n      return result;\n    }\n\n\n    args = ['pl-' + _name];\n    if (typeof _value !== 'undefined') args.push(_value);\n\n    if (_value === null) {\n      this.removeAttr('pl-' + _name);\n      return this;\n    }\n\n    return this.attr.apply(this, args);\n  };\n\n  /**\n   * Invoke a method of each item in the set of matched elements.\n   */\n  this.exec = function (_method, _args) {\n    return this.map(function () {\n      if (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n    }).toArray();\n  };\n\n}).call($.fn);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/jQExtentions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/for-each\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/for-each.js\n ** module id = 5\n ** module chunks = 0\n **/","require('../../modules/js.array.statics');\nmodule.exports = require('../../modules/$.core').Array.forEach;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/array/for-each.js\n ** module id = 6\n ** module chunks = 0\n **/","// JavaScript 1.6 / Strawman array statics shim\nvar $       = require('./$')\n  , $export = require('./$.export')\n  , $ctx    = require('./$.ctx')\n  , $Array  = require('./$.core').Array || Array\n  , statics = {};\nvar setStatics = function(keys, length){\n  $.each.call(keys.split(','), function(key){\n    if(length == undefined && key in $Array)statics[key] = $Array[key];\n    else if(key in [])statics[key] = $ctx(Function.call, [][key], length);\n  });\n};\nsetStatics('pop,reverse,shift,keys,values,entries', 1);\nsetStatics('indexOf,every,some,forEach,map,filter,find,findIndex,includes', 3);\nsetStatics('join,slice,concat,push,splice,unshift,sort,lastIndexOf,' +\n           'reduce,reduceRight,copyWithin,fill');\n$export($export.S, 'Array', statics);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/js.array.statics.js\n ** module id = 7\n ** module chunks = 0\n **/","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.js\n ** module id = 8\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.export.js\n ** module id = 9\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.global.js\n ** module id = 10\n ** module chunks = 0\n **/","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.core.js\n ** module id = 11\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.ctx.js\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.a-function.js\n ** module id = 13\n ** module chunks = 0\n **/","/**\n *\n * @module\n * @version 1.1\n * @author Micah Rolon <functionmicah@gmail.com>\n * @requires module:types/BasicArray~BasicArray\n *\n * @desc *Created: 11/12/14*\n *\n * This file contains objects for containing values about a plane. i.e. x or width.\n * Adds the convenience of keeping these values paired to passed around your application.\n * It also includes methods which you perform on the values and returns a new object\n * so the original values are maintained.\n *\n * #### Usage\n *\n * New instances can be created by calling the create method.\n * ```\n * cursorLocation = Point.create();\n * ```\n *\n * Then call `set()` to apply your values.\n * ```\n * cursorLocation.set(event.clientX, event.clientY);\n * ```\n *\n * Then you can use the calculation methods to perform transformations.\n * ```\n * relativeCursor = cursorLocation.scale(zoom);\n * ```\n *\n * #### Developer Notes\n *\n * When adding new methods make sure you are returning a new instance.\n * Dimensional objects are meant to be immutable.\n *\n * Follow this pattern:\n * ```\n * this.method = function () {\n *     // set with your calculated values.\n *     return this.create().set( ... )\n * }\n * ```\n *\n * #### Change Log\n * *v1.1 - 12/13/15*\n * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n */\n\n/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\nimport BasicArray from 'types/BasicArray';\n\nvar Dimension, Size, Point;\n\n/**\n * The native Array\n * @external Array\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n */\n\n/**\n * Array prototype extension\n * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n * @function external:Array#to\n * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n * @example\n * somePoint = [10, 10].to(Point);\n * somePoint = [10, 10].to('point');\n */\nArray.prototype.to = function (_Thing) {\n  var map;\n\n  map = {\n    point: Point,\n    size: Size\n  };\n\n  if (typeof _Thing === 'string') {\n    return map[_Thing.toLowerCase()].create().set(this);\n  }\n\n  else if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n    if (!_Thing.isPrototypeOf(this)) {\n      return _Thing.set.apply(_Thing.create(), this);\n    }\n  }\n\n  return this;\n};\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n * @class\n * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @extends module:types/BasicArray~BasicArray\n */\nDimension = BasicArray.extend(function () {\n  var originalMap;\n\n  originalMap = this.map;\n\n  this[0] = this[1] = 0;\n  this.planeMap = null,\n  this.length = 2;\n\n  /**\n   * Provides a new instance.\n   * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n   * @returns {Dimension}\n   */\n  this.create = function (_argumentsArray) {\n    var instance;\n\n    instance = this.proto();\n\n    if (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\n    return instance;\n  };\n\n  /**\n   * Incerement each plane by a value or specify each plane.\n   * @arg {number} _val - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.inc = function (_val, _plane2) {\n    var a, b;\n\n    if (_val.length === 2) {\n      a = _val[0];\n      b = _val[1];\n    }\n\n    else if (_plane2 != null) {\n      a = _val;\n      b = _plane2;\n    }\n\n    else {\n      a = b = _val;\n    }\n\n    return this.create().set(\n      this[0] + a,\n      this[1] + b\n    );\n  };\n\n  /**\n   * Decerement each plane by a value or specify each plane.\n   * @arg {number} _val - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.dec = function (_val, _plane2) {\n    var a, b;\n\n    if (_val.length === 2) {\n      a = _val[0];\n      b = _val[1];\n    }\n\n    else if (_plane2 != null) {\n      a = _val;\n      b = _plane2;\n    }\n\n    else {\n      a = b = _val;\n    }\n\n    return this.create().set(\n      this[0] - a,\n      this[1] - b\n    );\n  };\n\n  /**\n   * Multiply each plane by a value or specify each plane.\n   * @arg {number} _scale - plane a of (a,b)\n   * @arg {number} [_plane2] - plane b of (a,b)\n   * @returns {Dimension}\n   */\n  this.scale = function (_scale, _plane2) {\n    return this.create().set(\n      this[0] * _scale,\n      this[1] * (_plane2 != null ? _plane2 : _scale)\n    );\n  };\n\n  /**\n   * Perfom a Math function on each plane\n   * @arg {string} _fun - a string of the function name in the JS Math object,\n   * followed by the whatever arguments the function takes after its first\n   * since the first argument is the plane value.\n   * @returns {Dimension}\n   */\n  this.math = function (_fun) {\n    var args = [].slice.call(arguments, 1);\n\n    return this.create().set(\n      Math[_fun].apply(Math, [this[0]].concat(args)),\n      Math[_fun].apply(Math, [this[1]].concat(args))\n    );\n  };\n\n  /**\n   * Takes each plane value and passes it to parseInt().\n   * @returns {Dimension}\n   */\n  this.parseInt = function () {\n    return this.create().set(\n      parseInt(this[0]),\n      parseInt(this[1])\n    );\n  };\n\n  /**\n   * Takes each plane value and passes it to parseFloat().\n   * @returns {Dimension}\n   */\n  this.parseFloat = function () {\n    return this.create().set(\n      parseFloat(this[0]),\n      parseFloat(this[1])\n    );\n  };\n\n  /**\n   * Resolves the name of the plane at the given index.\n   * @arg {number} _index - The index of the plane.\n   * @returns {string}\n   */\n  this.planeOf = function (_index) {\n    if (isNaN(parseInt(_index))) return null;\n    return this.planeMap[_index];\n  };\n\n  /**\n   * Make a new array by iterating over each plane.<br>\n   * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n   * @arg {function} _handler - handler for each index.\n   * @override\n   * @returns {Dimension}\n   */\n  this.map = function (_handler) {\n    return originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n  };\n\n  /**\n   * Multiplies the planes.\n   * @returns {number}\n   */\n  this.product = function () {\n    return this[0] * this[1];\n  };\n\n  /**\n   * Divides the planes.\n   * @returns {number}\n   */\n  this.ratio = function () {\n    return this[0] / this[1];\n  };\n\n  this.quotient = function () {\n    return Math.floor(this[0] / this[1]);\n  };\n\n  this.remainder = function () {\n    return this[0] % this[1];\n  };\n\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc 2 Dimensional object containing width and height.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} width - The width.\n * @prop {number} height - The height.\n */\nSize = Dimension.extend(function () {\n  /**\n   * Maps the names of the indexes.<br>\n   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n   * @protected\n   * @default ['width', 'height']\n   */\n  this.planeMap = ['width', 'height'];\n\n  Object.defineProperties(this, {\n    width: {\n      get: function () {\n        return this[0];\n      },\n\n      set: function (_val) {\n        this[0] = Number(_val);\n      }\n    },\n\n    height: {\n      get: function () {\n        return this[1];\n      },\n\n      set: function (_val) {\n        this[1] = Number(_val);\n      }\n    }\n  });\n\n  /**\n   * Define the size with an object. (overloaded)\n   * @function module:types/Dimensions~Size#set\n   * @arg {object} _size - A size object {width, height}.\n   * @returns {Size}\n   */\n\n  /**\n   * Define the size with an array. (overloaded)\n   * @function module:types/Dimensions~Size#set\n   * @arg {array} _size - A size array [width, height].\n   * @returns {Size}\n   */\n\n  /**\n   * Define the size.\n   * @arg {number} _width - The width.\n   * @arg {number} _height - The height.\n   * @returns {Size}\n   */\n  this.set = function (_width, _height) {\n    if (arguments.length === 1) {\n      if (_width.width !== undefined && _width.height !== undefined) {\n        this[0] = Number(_width.width);\n        this[1] = Number(_width.height);\n      }\n\n      else if (_width.length === 2) {\n        this[0] = Number(_width[0]);\n        this[1] = Number(_width[1]);\n      }\n    }\n\n    else {\n      this[0] = Number(_width);\n      this[1] = Number(_height);\n    }\n\n    return this;\n  };\n\n  /**\n   * Calculates the hypotenuse.\n   * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n   * @returns {number}\n   */\n  this.hypotenuse = function () {\n    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n  };\n\n  /**\n   * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n   * @arg {object|HTMLElement} - The object or DOM node.\n   * @returns {this}\n   */\n  this.applyTo = function (_object) {\n    if (_object.nodeType === document.ELEMENT_NODE) {\n      if (!(_object.width !== undefined || _object.height !== undefined)) {\n        _object.style.width = this.width;\n        _object.style.height = this.height;\n\n        return this;\n      }\n    }\n\n    _object.width = this.width;\n    _object.height = this.height;\n\n    return this;\n  };\n\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} x - The x coordinate.\n * @prop {number} y - The y coordinate.\n */\nPoint = Dimension.extend(function () {\n  /**\n   * Maps the names of the indexes.<br>\n   * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n   * @protected\n   * @default ['x', 'y']\n   */\n  this.planeMap = ['x', 'y'];\n\n  Object.defineProperties(this, {\n    x: {\n      get: function () {\n        return this[0];\n      },\n\n      set: function (_val) {\n        this[0] = Number(_val);\n      }\n    },\n\n    y: {\n      get: function () {\n        return this[1];\n      },\n\n      set: function (_val) {\n        this[1] = Number(_val);\n      }\n    }\n  });\n\n  /**\n   * Define the point with an object. (overloaded)\n   * @function module:types/Dimensions~Point#set\n   * @arg {object} _point - A point object {x, y}.\n   * @returns {Point}\n   */\n\n  /**\n   * Define the point with an array. (overloaded)\n   * @function module:types/Dimensions~Point#set\n   * @arg {array} _point - A point array [x, y].\n   * @returns {Point}\n   */\n\n  /**\n   * Define the point.\n   * @arg {number} _x - The x.\n   * @arg {number} _y - The y.\n   * @returns {Point}\n   */\n  this.set = function (_x, _y) {\n    if (arguments.length === 1) {\n      if (_x.x !== undefined && _x.y !== undefined) {\n        this[0] = Number(_x.x);\n        this[1] = Number(_x.y);\n      }\n\n      else if (_x.length === 2) {\n        this[0] = Number(_x[0]);\n        this[1] = Number(_x[1]);\n      }\n    }\n\n    else {\n      this[0] = Number(_x);\n      this[1] = Number(_y);\n    }\n\n    return this;\n  };\n\n  /**\n   * Calculates the distance between the insatnce and a point object.\n   * @arg {Point} _point - A point object {x,y}.\n   * @returns {Size}\n   */\n  this.distance = function (_point) {\n    if (_point.x !== undefined && _point.y !== undefined) {\n      return Size.create().set(\n        _point.x - this.x,\n        _point.y - this.y\n      );\n    }\n\n    return null;\n  };\n\n  /**\n   * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n   * @arg {object|HTMLElement} - The object or DOM node.\n   * @returns {this}\n   */\n  this.applyTo = function (_object) {\n    if (_object.nodeType === document.ELEMENT_NODE) {\n      _object.style.left = this.x;\n      _object.style.top = this.y;\n    }\n\n    else {\n      _object.x = this.x;\n      _object.y = this.y;\n    }\n\n    return this;\n  };\n\n  /**\n   * Rotate the point based on an origin point and an angle in degrees.\n   * @arg {Point} _origin - A point object {x,y}.\n   * @arg {number} _angle - The angle of rotation in degrees.\n   * @returns {this}\n   */\n  this.rotate = function (_origin, _angle) {\n    var x, y, rad;\n\n    rad = _angle * (Math.PI / 180);\n\n    x = this.x - _origin.x;\n    y = this.y - _origin.y;\n\n    return this.create().set(\n      (Math.sin(rad) * x - Math.cos(rad) * y) + _origin.x,\n      (Math.cos(rad) * x + Math.sin(rad) * y) + _origin.y\n    );\n  };\n\n});\n\nexport default { Dimension, Size, Point };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Dimensions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-properties.js\n ** module id = 15\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function defineProperties(T, D){\n  return $.setDescs(T, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-properties.js\n ** module id = 16\n ** module chunks = 0\n **/","/**\n * Base object type for 'array like' objects.\n * @module\n * @requires module:util\n * @requires module:types/Basic\n */\nimport util from 'util';\nimport Basic from 'types/Basic';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n * @classdesc A base object type for 'array like' object.\n * @class\n * @extends external:Array\n * @extends module:types/Basic~Basic\n * @mixes module:types/Basic~Basic\n */\nvar BasicArray = (function () {\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @memberof module:types/BasicArray~BasicArray\n   * @readonly\n   * @default\n   */\n  this.baseType = 'TYPE_BASIC_ARRAY';\n\n  util.mixin(this, Basic);\n\n  return this;\n\n}).call([]);\n\nexport default BasicArray;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/BasicArray.js\n **/","/**\n * Utility functions.\n * @namespace\n * @author Micah Rolon <micah@ginasink.com>\n * @memberof module:play~pl\n */\nvar util = new (function () {\n\n  /**\n   * Accepts one or more objects to combine their own properties to single object.\n   * @arg {object} _target - The object that will recieve all members.\n   * @arg {object} _sources... - The object(s) to join with the '_target'.\n   * @returns {object} _target\n   */\n  this.mixin = function () {\n    var member, i, target, objs;\n\n    target = arguments[0];\n    objs = [].slice.call(arguments, 1);\n\n    for (i = 0; i < objs.length; i += 1) {\n      for (member in objs[i]) {\n        if (!objs[i].hasOwnProperty(member)) continue;\n        target[member] = objs[i][member];\n      }\n    }\n\n    return target;\n  };\n\n  /**\n   * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n   * @arg {object} _obj - Object to search in.\n   * @arg {*} _member - The reference which is expected to be in the object as a property.\n   * @returns {string} The name of the key in the object matching '_member'.\n   */\n  this.keyOf = function (_obj, _member) {\n    var member;\n\n    for (member in _obj) {\n      if (!_obj.hasOwnProperty(member)) continue;\n      if (_obj[member] === _member) return member;\n    }\n\n    return null;\n  };\n\n  /**\n   * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n   * @arg {object} _obj - The object to search.\n   * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n   * @return {object} An object containing the name of the property and the owning object. {name, object}\n   */\n  this.getOwner = function (_obj, _member) {\n    var prototype, name;\n\n    prototype = Object.getPrototypeOf(_obj);\n\n    // keep searching until we go as deep as we can go.\n    while (prototype) {\n      // search for the key in the prototype\n      name = util.keyOf(prototype, _member);\n\n      // If we found the key in the prototype then we found\n      // our match and we can break out of the loop.\n      if (name) break;\n\n      // Otherwise go deeper (thats what she said ;p)\n      prototype = Object.getPrototypeOf(prototype);\n    }\n\n    return {\n      name: name,\n      object: prototype\n    };\n  };\n\n  /**\n   * Given a range; provides a random number in that range.\n   * @function play~pl.util.random\n   * @arg {number} _rangeA - A number for the low end of the range.\n   * @arg {number} _rangeB - The top end of the range.\n   * @returns {number|*} The resulting number in range or the member found at random.\n   */\n\n  /**\n   * Given an iterable; provides a random item.\n   * @arg {array} _collection - The iterable.\n   * @returns {number|*} The member found at random.\n   */\n  this.random = function (_collection_rangeA, _rangeB) {\n    var index, val;\n\n    index = Math.floor(Math.random() * _collection_rangeA.length);\n\n    if (arguments.length === 2) {\n      val = Math.round(Math.random() * _rangeB);\n\n      return val < _collection_rangeA ? _collection_rangeA : val;\n    }\n\n    if (index === _collection_rangeA.length) index = _collection_rangeA.length - 1;\n\n    return _collection_rangeA && _collection_rangeA[index];\n  };\n\n  /**\n   * Take string and makes it dot notation friendly.\n   * @arg {string} _id - The string to transform.\n   * @arg {boolean} _camelCase - Transform with camel case.\n   * @returns {string}\n   */\n  this.transformId = function (_id, _camelCase) {\n    if (_id && _camelCase) {\n      return _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n        return RegExp.$1.toUpperCase();\n      });\n    }\n\n    return _id && _id.replace(/[-\\s]+/g, '_');\n  };\n\n  /**\n   * Test all arguments for != null\n   * @return {boolean}\n   */\n  this.isSet = function () {\n    return [].every.call(arguments, function (_arg) {\n      return _arg != null;\n    });\n  };\n\n  /**\n   * Parses a formated string and calculates it in milliseconds.\n   * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n   * @return {number}\n   */\n  this.toMillisec = function (_source) {\n    var tokens, time, units;\n\n    if (typeof _source === 'number') return _source;\n    if (!_source) return;\n\n    tokens = _source.split(/\\s+/);\n    time = 0;\n    units = {\n      d: 24 * 60 * 60 * 1000,\n      h: 60 * 60 * 1000,\n      m: 60 * 1000,\n      s: 1000\n    };\n\n    tokens.forEach(function (_token) {\n      var unit, value;\n\n      unit = (_token.match(/[dhms]/) || [])[0];\n\n      if (unit) {\n        value = Number(_token.slice(0, -1));\n        time += value * units[unit];\n      } else {\n        time += Number(_token);\n      }\n    });\n\n    return time;\n  };\n\n  /**\n   * Needs no introduction\n   * @arg {iterable} _collection - iterable.\n   * @return {array}\n   */\n  this.toArray = function (_collection) {\n    return Array.prototype.map.call(_collection, function (i) {\n      return i;\n    });\n  };\n\n  /**\n   * Resolves the value in the object at the given path.\n   * @arg {object} _obj - The object to query.\n   * @arg {string} _path - The path to the desired reference.\n   * @returns {*} The resulting reference value.\n   * @example\n   * var user = {\n   *   name: 'John',\n   *   family: {\n   *     guardians: {David}, // property could be an array of multiple guardians.\n   *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n   *   }\n   * };\n   *\n   * pl.util.resolvePath(user, 'family.sliblings[2].name');\n   * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n   * pl.util.resolvePath(user, 'family.guardians[0]?.name');\n   */\n  this.resolvePath = function (_obj, _path) {\n    var path, obj, i, name, index, testArray;\n\n    path = _path.split('.');\n    obj = _obj;\n    i = 0;\n\n    while (obj) {\n      testArray = (/\\?$/).test(path[i]);\n      index = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n      name = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n      obj = obj[name];\n\n      if (~index && obj) {\n        obj = testArray ? (obj[index] || obj) : obj[index];\n      }\n\n      i += 1;\n\n      if (path.length === i) break;\n    }\n\n    return obj;\n  };\n\n  this.assignRef = function (_obj, _name, _ref) {\n    var name;\n\n    name = util.transformId(_name, true);\n\n    if (_obj[name] === _ref) return _ref;\n\n    if (_obj[name]) {\n      if (!_obj[name].__refCollction__) {\n        _obj[name] = [_obj[name]];\n\n        Object.defineProperty(_obj[name], '__refCollction__', {\n          value: true,\n          enumerable: false,\n          writeable: false,\n          configureable: false\n        });\n      }\n      _obj[name].push(_ref);\n    } else {\n      _obj[name] = _ref;\n    }\n\n    return _obj[name];\n  };\n\n  /**\n   * N0 OPeration.\n   */\n  this.noop = function () {};\n\n  /**\n   * Get the file name out of a simple file path.\n   * @arg {string} _path - The file path.\n   * @returns {string} The extracted name.\n   */\n  this.resolveFileName = function (_path) {\n    return _path.slice(_path.lastIndexOf('/') + 1);\n  };\n\n  /**\n   * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n   * - x; produces a letter a-f.\n   * - y; produces a digit 0-9.\n   * - z; produces a 4 character hex value derived from the now time stamp.\n   * @arg {string} _pattern - The xyz pattern.\n   * @returns {string} The generated ID.\n   */\n  this.createId = function (_pattern) {\n    return (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n      if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n      if (_token === 'y') return (Math.floor(Math.random() * 10)).toString(16);\n      return Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n    });\n  };\n\n});\n\nexport default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/util.js\n **/","/**\n * Base object type for 'classes' implementing methods for extention and super callbacks.\n * @module\n * @requires module:play~pl.util\n */\nimport util from 'util';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n * @classdesc The base type for all objects which will act as prototypes.\n * @class\n */\nvar Basic = {\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @readonly\n   * @default\n   */\n  baseType: 'TYPE_BASIC',\n\n  /**\n   * Creates a new object with the current object as its prototype.\n   * @instance\n   * @returns {Basic} The new instance.\n   */\n  create: function () {\n    return Object.create(this);\n  },\n\n  /**\n   * Creates a new object using a constructor function or object with the current object as its prototype.\n   * @instance\n   * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n   * @returns {Basic} The new instance.\n   *\n   * @todo define constructor property\n   */\n  extend: function (_implementation) {\n    var instance;\n\n    if (!_implementation) return null;\n\n    switch (typeof _implementation) {\n    case 'function':\n      _implementation.prototype = this;\n      instance = new _implementation();\n      break;\n\n    case 'object':\n      instance = this.create();\n      instance.mixin(_implementation);\n      break;\n\n    default:\n      console.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n    }\n\n    return instance;\n  },\n\n  /**\n   * Accepts one or more objects to combine their own properties to the instance.\n   * @instance\n   * @arg {object} _sources... - The object(s) to join with the instance.\n   * @returns this\n   */\n  mixin: function () {\n    return util.mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n  },\n\n  /**\n   * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n   * @instance\n   * @arg {*} _member - The reference which is expected to be in the object as a property.\n   * @returns {string} The name of the key in the object matching '_member'.\n   */\n  keyOf: function (_member) {\n    return util.keyOf(this, _member);\n  },\n\n  /**\n   * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n   * @instance\n   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n   * @returns {*} Whatever the caller returns.\n   */\n  proto: function () {\n    var method, name, owner, prototype;\n\n    // Get the function which invoked proto() in the call stack.\n    // If the caller is a behavior then we retrieve the method.\n    method = this.proto.caller.method || this.proto.caller;\n\n    // Check to see if 'this' owns the method.\n    // NOTE: We may want to move this logic into getOwner().\n    if (name = this.keyOf(method)) {\n      prototype = Object.getPrototypeOf(this);\n    }\n\n    // Otherwise find the object which owns the caller function.\n    else {\n      owner = util.getOwner(this, method);\n      name = owner.name;\n      prototype = Object.getPrototypeOf(owner.object);\n    }\n\n    method = prototype[name];\n\n    if (!method) {\n      console.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n      return null;\n    }\n\n    return method.apply(this, arguments);\n  },\n\n  /**\n   * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n   * @instance\n   * @arg {*} _args... - Whatever amount of arguments the caller takes.\n   * @returns {*} Whatever the caller returns.\n   */\n  sup: function () {\n    var method, name, owner, prototype;\n\n    // Get the function which invoked sup() in the call stack.\n    method = this.sup.caller;\n    owner = util.getOwner(this, this.baseType);\n    prototype = owner.object;\n    name = this.keyOf(method);\n\n    // Check to see if 'this' owns the method.\n    // NOTE: We may want to move this logic into getOwner().\n    //\n    if (!name) {\n      owner = util.getOwner(this, method);\n      name = owner.name;\n    }\n\n    method = prototype[name];\n\n    if (!method) {\n      console.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n      return null;\n    }\n\n    return method.apply(this, arguments);\n  },\n\n  /**\n   * Provides the object type.\n   * @instance\n   */\n  toString: function () {\n    var type;\n\n    if (this.baseType) {\n      type = this.baseType.replace('TYPE_', '');\n      type = type.slice(0, 1) + type.slice(1).toLowerCase();\n    } else {\n      type = this.constructor.name || 'Object';\n    }\n\n    return '[object ' + type + ']';\n  }\n\n};\n\nexport default Basic;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Basic.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 20\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/create.js\n ** module id = 21\n ** module chunks = 0\n **/","/**\r\n *\r\n * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n * All rights are reserved to Epistemex.\r\n *\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\nfunction Matrix(context) {\r\n\r\n    var me = this;\r\n    me._t = me.transform;\r\n\r\n    me.a = me.d = 1;\r\n    me.b = me.c = me.e = me.f = 0;\r\n\r\n    me.context = context;\r\n\r\n    // reset canvas transformations (if any) to enable 100% sync.\r\n    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\r\n}\r\n\r\nMatrix.prototype = {\r\n\r\n    /**\r\n     * Concatenates transforms of this matrix onto the given child matrix and\r\n     * returns a new matrix. This instance is used on left side.\r\n     *\r\n     * @param {Matrix} cm - child matrix to apply concatenation to\r\n     * @returns {Matrix}\r\n     */\r\n    concat: function (cm) {\r\n        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\r\n    },\r\n\r\n    /**\r\n     * Flips the horizontal values.\r\n     */\r\n    flipX: function () {\r\n        return this._t(-1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Flips the vertical values.\r\n     */\r\n    flipY: function () {\r\n        return this._t(1, 0, 0, -1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Reflects incoming (velocity) vector on the normal which will be the\r\n     * current transformed x axis. Call when a trigger condition is met.\r\n     *\r\n     * NOTE: BETA, simple implementation\r\n     *\r\n     * @param {number} x - vector end point for x (start = 0)\r\n     * @param {number} y - vector end point for y (start = 0)\r\n     * @returns {{x: number, y: number}}\r\n     */\r\n    reflectVector: function (x, y) {\r\n\r\n        var v = this.applyToPoint(0, 1),\r\n            d = 2 * (v.x * x + v.y * y);\r\n\r\n        x -= d * v.x;\r\n        y -= d * v.y;\r\n\r\n        return {x: x, y: y};\r\n    },\r\n\r\n    /**\r\n     * Short-hand to reset current matrix to an identity matrix.\r\n     */\r\n    reset: function () {\r\n        return this.setTransform(1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Rotates current matrix accumulative by angle.\r\n     * @param {number} angle - angle in radians\r\n     */\r\n    rotate: function (angle) {\r\n        var cos = Math.cos(angle),\r\n            sin = Math.sin(angle);\r\n        return this._t(cos, sin, -sin, cos, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Converts a vector given as x and y to angle, and\r\n     * rotates (accumulative).\r\n     * @param x\r\n     * @param y\r\n     * @returns {*}\r\n     */\r\n    rotateFromVector: function (x, y) {\r\n        return this.rotate(Math.atan2(y, x));\r\n    },\r\n\r\n    /**\r\n     * Helper method to make a rotation based on an angle in degrees.\r\n     * @param {number} angle - angle in degrees\r\n     */\r\n    rotateDeg: function (angle) {\r\n        return this.rotate(angle * Math.PI / 180);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix uniformly and accumulative.\r\n     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n     */\r\n    scaleU: function (f) {\r\n        return this._t(f, 0, 0, f, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scale: function (sx, sy) {\r\n        return this._t(sx, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on x axis accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     */\r\n    scaleX: function (sx) {\r\n        return this._t(sx, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on y axis accumulative.\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scaleY: function (sy) {\r\n        return this._t(1, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shear: function (sx, sy) {\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for x to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     */\r\n    shearX: function (sx) {\r\n        return this._t(1, 0, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for y to the current matrix accumulative.\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shearY: function (sy) {\r\n        return this._t(1, sy, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply skew to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skew: function (ax, ay) {\r\n        return this.shear(Math.tan(ax), Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for x to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     */\r\n    skewX: function (ax) {\r\n        return this.shearX(Math.tan(ax));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for y to the current matrix accumulative.\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skewY: function (ay) {\r\n        return this.shearY(Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Set current matrix to new absolute matrix.\r\n     * @param {number} a - scale x\r\n     * @param {number} b - shear y\r\n     * @param {number} c - shear x\r\n     * @param {number} d - scale y\r\n     * @param {number} e - translate x\r\n     * @param {number} f - translate y\r\n     */\r\n    setTransform: function (a, b, c, d, e, f) {\r\n        var me = this;\r\n        me.a = a;\r\n        me.b = b;\r\n        me.c = c;\r\n        me.d = d;\r\n        me.e = e;\r\n        me.f = f;\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix accumulative.\r\n     * @param {number} tx - translation for x\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translate: function (tx, ty) {\r\n        return this._t(1, 0, 0, 1, tx, ty);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on x axis accumulative.\r\n     * @param {number} tx - translation for x\r\n     */\r\n    translateX: function (tx) {\r\n        return this._t(1, 0, 0, 1, tx, 0);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on y axis accumulative.\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translateY: function (ty) {\r\n        return this._t(1, 0, 0, 1, 0, ty);\r\n    },\r\n\r\n    /**\r\n     * Multiplies current matrix with new matrix values.\r\n     * @param {number} a2 - scale x\r\n     * @param {number} b2 - shear y\r\n     * @param {number} c2 - shear x\r\n     * @param {number} d2 - scale y\r\n     * @param {number} e2 - translate x\r\n     * @param {number} f2 - translate y\r\n     */\r\n    transform: function (a2, b2, c2, d2, e2, f2) {\r\n\r\n        var me = this,\r\n            a1 = me.a,\r\n            b1 = me.b,\r\n            c1 = me.c,\r\n            d1 = me.d,\r\n            e1 = me.e,\r\n            f1 = me.f;\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        me.a = a1 * a2 + c1 * b2;\r\n        me.b = b1 * a2 + d1 * b2;\r\n        me.c = a1 * c2 + c1 * d2;\r\n        me.d = b1 * c2 + d1 * d2;\r\n        me.e = a1 * e2 + c1 * f2 + e1;\r\n        me.f = b1 * e2 + d1 * f2 + f1;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Divide this matrix on input matrix which must be invertible.\r\n     * @param {Matrix} m - matrix to divide on (divisor)\r\n     * @returns {Matrix}\r\n     */\r\n    divide: function (m) {\r\n\r\n        if (!m.isInvertible())\r\n            throw \"Input matrix is not invertible\";\r\n\r\n        var im = m.inverse();\r\n\r\n        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\r\n    },\r\n\r\n    /**\r\n     * Divide current matrix on scalar value != 0.\r\n     * @param {number} d - divisor (can not be 0)\r\n     * @returns {Matrix}\r\n     */\r\n    divideScalar: function (d) {\r\n\r\n        var me = this;\r\n        me.a /= d;\r\n        me.b /= d;\r\n        me.c /= d;\r\n        me.d /= d;\r\n        me.e /= d;\r\n        me.f /= d;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Get an inverse matrix of current matrix. The method returns a new\r\n     * matrix with values you need to use to get to an identity matrix.\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     * @returns {Matrix}\r\n     */\r\n    inverse: function () {\r\n\r\n        if (this.isIdentity()) {\r\n            return new Matrix();\r\n        }\r\n        else if (!this.isInvertible()) {\r\n            throw \"Matrix is not invertible.\";\r\n        }\r\n        else {\r\n            var me = this,\r\n                a = me.a,\r\n                b = me.b,\r\n                c = me.c,\r\n                d = me.d,\r\n                e = me.e,\r\n                f = me.f,\r\n\r\n                m = new Matrix(),\r\n                dt = a * d - b * c; // determinant(), skip DRY here...\r\n\r\n            m.a = d / dt;\r\n            m.b = -b / dt;\r\n            m.c = -c / dt;\r\n            m.d = a / dt;\r\n            m.e = (c * f - d * e) / dt;\r\n            m.f = -(a * f - b * e) / dt;\r\n\r\n            return m;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation is naive. For animation use the\r\n     * intrpolateAnim() method instead.\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolate: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix();\r\n\r\n        m.a = me.a + (m2.a - me.a) * t;\r\n        m.b = me.b + (m2.b - me.b) * t;\r\n        m.c = me.c + (m2.c - me.c) * t;\r\n        m.d = me.d + (m2.d - me.d) * t;\r\n        m.e = me.e + (m2.e - me.e) * t;\r\n        m.f = me.f + (m2.f - me.f) * t;\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation method uses decomposition which makes\r\n     * it suitable for animations (in particular where rotation takes\r\n     * places).\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolateAnim: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix(),\r\n            d1 = me.decompose(),\r\n            d2 = m2.decompose(),\r\n            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\r\n            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\r\n            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\r\n            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\r\n            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t\r\n            ;\r\n\r\n        m.translate(translateX, translateY);\r\n        m.rotate(rotation);\r\n        m.scale(scaleX, scaleY);\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Decompose the current matrix into simple transforms using either\r\n     * QR (default) or LU decomposition. Code adapted from\r\n     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n     *\r\n     * The result must be applied in the following order to reproduce the current matrix:\r\n     *\r\n     *     QR: translate -> rotate -> scale -> skewX\r\n     *     LU: translate -> skewY  -> scale -> skewX\r\n     *\r\n     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n     */\r\n    decompose: function (useLU) {\r\n\r\n        var me = this,\r\n            a = me.a,\r\n            b = me.b,\r\n            c = me.c,\r\n            d = me.d,\r\n            acos = Math.acos,\r\n            atan = Math.atan,\r\n            sqrt = Math.sqrt,\r\n            pi = Math.PI,\r\n\r\n            translate = {x: me.e, y: me.f},\r\n            rotation = 0,\r\n            scale = {x: 1, y: 1},\r\n            skew = {x: 0, y: 0},\r\n\r\n            determ = a * d - b * c; // determinant(), skip DRY here...\r\n\r\n        if (useLU) {\r\n            if (a) {\r\n                skew = {x: atan(c / a), y: atan(b / a)};\r\n                scale = {x: a, y: determ / a};\r\n            }\r\n            else if (b) {\r\n                rotation = pi * 0.5;\r\n                scale = {x: b, y: determ / b};\r\n                skew.x = atan(d / b);\r\n            }\r\n            else { // a = b = 0\r\n                scale = {x: c, y: d};\r\n                skew.x = pi * 0.25;\r\n            }\r\n        }\r\n        else {\r\n            // Apply the QR-like decomposition.\r\n            if (a || b) {\r\n                var r = sqrt(a * a + b * b);\r\n                rotation = b > 0 ? acos(a / r) : -acos(a / r);\r\n                scale = {x: r, y: determ / r};\r\n                skew.x = atan((a * c + b * d) / (r * r));\r\n            }\r\n            else if (c || d) {\r\n                var s = sqrt(c * c + d * d);\r\n                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\r\n                scale = {x: determ / s, y: s};\r\n                skew.y = atan((a * c + b * d) / (s * s));\r\n            }\r\n            else { // a = b = c = d = 0\r\n                scale = {x: 0, y: 0};   // = invalid matrix\r\n            }\r\n        }\r\n\r\n        return {\r\n            scale: scale,\r\n            translate: translate,\r\n            rotation: rotation,\r\n            skew: skew\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Returns the determinant of the current matrix.\r\n     * @returns {number}\r\n     */\r\n    determinant: function () {\r\n        return this.a * this.d - this.b * this.c;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to x and y point.\r\n     * Returns a point object.\r\n     *\r\n     * @param {number} x - value for x\r\n     * @param {number} y - value for y\r\n     * @returns {{x: number, y: number}} A new transformed point object\r\n     */\r\n    applyToPoint: function (x, y) {\r\n\r\n        var me = this;\r\n\r\n        return {\r\n            x: x * me.a + y * me.c + me.e,\r\n            y: x * me.b + y * me.d + me.f\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to array with point objects or point pairs.\r\n     * Returns a new array with points in the same format as the input array.\r\n     *\r\n     * A point object is an object literal:\r\n     *\r\n     * {x: x, y: y}\r\n     *\r\n     * so an array would contain either:\r\n     *\r\n     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n     *\r\n     * or\r\n     * [x1, y1, x2, y2, ... xn, yn]\r\n     *\r\n     * @param {Array} points - array with point objects or pairs\r\n     * @returns {Array} A new array with transformed points\r\n     */\r\n    applyToArray: function (points) {\r\n\r\n        var i = 0, p, l,\r\n            mxPoints = [];\r\n\r\n        if (typeof points[0] === 'number') {\r\n\r\n            l = points.length;\r\n\r\n            while (i < l) {\r\n                p = this.applyToPoint(points[i++], points[i++]);\r\n                mxPoints.push(p.x, p.y);\r\n            }\r\n        }\r\n        else {\r\n            for (; p = points[i]; i++) {\r\n                mxPoints.push(this.applyToPoint(p.x, p.y));\r\n            }\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to a typed array with point pairs. Although\r\n     * the input array may be an ordinary array, this method is intended\r\n     * for more performant use where typed arrays are used. The returned\r\n     * array is regardless always returned as a Float32Array.\r\n     *\r\n     * @param {*} points - (typed) array with point pairs\r\n     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n     * @returns {*} A new typed array with transformed points\r\n     */\r\n    applyToTypedArray: function (points, use64) {\r\n\r\n        var i = 0, p,\r\n            l = points.length,\r\n            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\r\n\r\n        while (i < l) {\r\n            p = this.applyToPoint(points[i], points[i + 1]);\r\n            mxPoints[i++] = p.x;\r\n            mxPoints[i++] = p.y;\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply to any canvas 2D context object. This does not affect the\r\n     * context that optionally was referenced in constructor unless it is\r\n     * the same context.\r\n     * @param {CanvasRenderingContext2D} context\r\n     */\r\n    applyToContext: function (context) {\r\n        var me = this;\r\n        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is an identity matrix (no transforms applied).\r\n     * @returns {boolean} True if identity (not transformed)\r\n     */\r\n    isIdentity: function () {\r\n        var me = this;\r\n        return (me._q(me.a, 1) &&\r\n        me._q(me.b, 0) &&\r\n        me._q(me.c, 0) &&\r\n        me._q(me.d, 1) &&\r\n        me._q(me.e, 0) &&\r\n        me._q(me.f, 0));\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is invertible\r\n     * @returns {boolean}\r\n     */\r\n    isInvertible: function () {\r\n        return !this._q(this.determinant(), 0)\r\n    },\r\n\r\n    /**\r\n     * Test if matrix is valid.\r\n     */\r\n    isValid: function () {\r\n        return !this._q(this.a * this.d, 0);\r\n    },\r\n\r\n    /**\r\n     * Clones current instance and returning a new matrix.\r\n     * @param {boolean} [noContext=false] don't clone context reference if true\r\n     * @returns {Matrix}\r\n     */\r\n    clone: function (noContext) {\r\n        var me = this,\r\n            m = new Matrix();\r\n        m.a = me.a;\r\n        m.b = me.b;\r\n        m.c = me.c;\r\n        m.d = me.d;\r\n        m.e = me.e;\r\n        m.f = me.f;\r\n        if (!noContext) m.context = me.context;\r\n\r\n        return m;\r\n    },\r\n\r\n    /**\r\n     * Compares current matrix with another matrix. Returns true if equal\r\n     * (within epsilon tolerance).\r\n     * @param {Matrix} m - matrix to compare this matrix with\r\n     * @returns {boolean}\r\n     */\r\n    isEqual: function (m) {\r\n\r\n        var me = this,\r\n            q = me._q;\r\n\r\n        return (q(me.a, m.a) &&\r\n        q(me.b, m.b) &&\r\n        q(me.c, m.c) &&\r\n        q(me.d, m.d) &&\r\n        q(me.e, m.e) &&\r\n        q(me.f, m.f));\r\n    },\r\n\r\n    /**\r\n     * Returns an array with current matrix values.\r\n     * @returns {Array}\r\n     */\r\n    toArray: function () {\r\n        var me = this;\r\n        return [me.a, me.b, me.c, me.d, me.e, me.f];\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS: function () {\r\n        return \"matrix(\" + this.toArray() + \")\";\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix3d() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS3D: function () {\r\n        var me = this;\r\n        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\r\n    },\r\n\r\n    /**\r\n     * Returns a JSON compatible string of current matrix.\r\n     * @returns {string}\r\n     */\r\n    toJSON: function () {\r\n        return JSON.stringify(this.toArray());\r\n    },\r\n\r\n    /**\r\n     * Returns a string with current matrix as comma-separated list.\r\n     * @returns {string}\r\n     */\r\n    toString: function () {\r\n        return \"\" + this.toArray();\r\n    },\r\n\r\n    /**\r\n     * Compares floating point values with some tolerance (epsilon)\r\n     * @param {number} f1 - float 1\r\n     * @param {number} f2 - float 2\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n    _q: function (f1, f2) {\r\n        return Math.abs(f1 - f2) < 1e-14;\r\n    },\r\n\r\n    /**\r\n     * Apply current absolute matrix to context if defined, to sync it.\r\n     * @private\r\n     */\r\n    _x: function () {\r\n        var me = this;\r\n        if (me.context)\r\n            me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    }\r\n};\r\n\r\nexport default Matrix;\n\n\n/** WEBPACK FOOTER **\n ** ./source/lib/matrix.js\n **/","/**\n * Defines the global root level namespace for the library.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires game\n * @requires module:play~pl.util\n * @requires types/Basic\n * @requires types/Dimensions\n */\nimport game from 'play.game';\nimport util from 'util';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point, Size } from 'types/Dimensions';\n\nvar pl;\n/**\n * Resolves the event type for user interactions.\n */\nfunction resolveEventType() {\n  var resolution;\n\n  if (game.feature('touch')) {\n    resolution = {\n      ACTION: 'touchend',\n      ACTION_DOWN: 'touchstart',\n      ACTION_UP: 'touchend',\n      ACTION_MOVE: 'touchmove',\n      ACTION_OUT: 'touchcancel'\n    };\n  } else {\n    resolution = {\n      ACTION: 'click',\n      ACTION_DOWN: 'mousedown',\n      ACTION_UP: 'mouseup',\n      ACTION_MOVE: 'mousemove',\n      ACTION_OUT: 'mouseout'\n    };\n  }\n\n  return resolution;\n}\n\n/**\n * Globaly accesable, root level namespace for the library.\n * @namespace\n * @prop {object} EVENT - Namespace for noralized event name constants.\n * @prop {Basic} Basic - Base object type.\n * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n * @prop {object} util - Namespace for utility functions.\n */\npl = {\n  Basic, Point, Size, Queue,\n  game,\n  util,\n\n  /**\n   * @namespace\n   * @prop {string} ACTION - The device normalized `click` event name.\n   * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n   * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n   * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n   * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n   */\n  EVENT: resolveEventType()\n};\n\nexport default pl;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.js\n **/","/**\n * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @module game\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play.game.component\n * @requires play.game.manager\n * @requires util\n * @requires types/Events\n * @requires types/GlobalScope\n * @requires types/Entity\n * @requires types/Screen\n * @requires types/Game\n */\nimport component from 'play.game.component';\nimport manager from 'play.game.manager';\nimport util from 'util';\nimport Events from 'types/Events';\nimport { default as SCOPE } from 'types/GlobalScope';\nimport Entity from 'types/Entity';\nimport Screen from 'types/Screen';\nimport Game from 'types/Game';\nimport platform from 'platform';\n\nvar GAMES, CONFIG, READY_QUEUE;\n\n/**\n * Define a game scope for registration and/or initialization.\n * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction game(_name, _implementation) {\n  if (game.isDOMReady) {\n    initialize(_name, _implementation);\n  } else {\n    register(_name, _implementation);\n  }\n}\n\nfunction ready(_eventName) {\n  if (READY_QUEUE.length) return false;\n  game.trigger(_eventName || 'ready');\n}\n\n/**\n * Registers an implementation of a game scope for initialization.\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction register(_name, _implementation) {\n  if (!~GAMES.indexOf(_name)) {\n    GAMES.push({\n      id: _name,\n      implementation: _implementation\n    });\n  }\n}\n\n/**\n * Initializes an implementation of a game scope. (overloaded)\n * @function initialize\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\n\n/**\n * Initializes an implementation of a game scope.\n * @protected\n * @arg {array} _collection - The collection of game scope records for initialization.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction initialize(nameCollection, implementation) {\n  switch (typeof nameCollection) {\n  case 'string':\n    SCOPE[nameCollection] = Game\n        .extend(implementation)\n        .initialize('#' + nameCollection);\n    break;\n\n  case 'object':\n    nameCollection.forEach(function (_item) {\n      initialize(_item.id, _item.implementation);\n    });\n    break;\n  }\n}\n\n\n/** @protected */\nGAMES = [];\n/** @protected */\nCONFIG = {};\n/** @protected */\nREADY_QUEUE = [];\n\n/**\n * Interface for game level configuration.\n * @namespace game\n * @memberof module:play~pl\n * @mixes Events\n */\n(function () {\n\n  var audioContext;\n\n  this.component = component;\n  this.manager = manager;\n\n  util.mixin(game, Events);\n\n  this.on('platform-event', function (_event) {\n    console.log('play.game -', _event.name, _event.gameData);\n  });\n\n  /**\n   * Starts the dominos falling\n   * @function run\n   * @memberof module:play~pl.game\n   */\n  this.run = function () {\n    game.isDOMReady = true;\n    game.trigger('dom-ready');\n\n    game.component.loadAll(function () {\n      // console.log('** All component sources loaded.');\n      initialize(GAMES);\n\n      GAMES = null;\n    });\n\n    platform.emit(platform.EVENT_INIT);\n  };\n\n  this.report = function (_name) {\n    platform.emit(_name);\n\n    return this.report;\n  };\n\n  this.report.exit = function (_gameScope) {\n    platform.saveGameState(_gameScope.progress());\n    platform.emit(platform.EVENT_EXIT);\n\n    return this;\n  };\n\n  this.report.flip = function (_gameScope, data = {}) {\n    if (_gameScope.game) {\n      _gameScope = _gameScope.game;\n    }\n    platform.emit(platform.EVENT_FLIPPED, data);\n    platform.saveGameState(_gameScope.progress());\n\n    return this;\n  };\n\n\n  /**\n   * Getter/Setter for game level configuration.\n   * @function module:play~pl.game.config\n   * @arg {string} _key - The key to retrieve\n   * @returns {this}\n   */\n\n  /**\n   * Getter/Setter for game level configuration.\n   * @function config\n   * @memberof module:play~pl.game\n   * @arg {object} _mixin - Object to set properties on configuration.\n   * @returns {this}\n   */\n  this.config = function (keyMixin) {\n    switch (typeof keyMixin) {\n    case 'string': return util.resolvePath(CONFIG, keyMixin);\n    case 'object':\n      if (keyMixin) util.mixin(CONFIG, keyMixin);\n    }\n\n    return this;\n  };\n\n  /**\n   * @function provideEntityType\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.provideEntityType = function () {\n    return Entity;\n  };\n\n  /**\n   * @function provideScreenType\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.provideScreenType = function () {\n    return Screen;\n  };\n\n  /**\n   * Augments the global scope.\n   * @function scope\n   * @arg {function|object} _mixin - Object or constructor to define members.\n   * @returns {this}\n   *\n   * @memberof module:play~pl.game\n   */\n  this.scope = function (_mixin) {\n    if (typeof _mixin === 'function') {\n      _mixin.call(SCOPE);\n    }\n\n    else if (_mixin) {\n      SCOPE.mixin(_mixin);\n    }\n\n    return this;\n  };\n\n  /**\n   * @function queue\n   * @deprecated\n   * @memberof module:play~pl.game\n   */\n  this.queue = function (_item) {\n    if (!~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\n    return this;\n  };\n\n  this.queue.complete = function (_item, _eventName) {\n    var index;\n\n    index = READY_QUEUE.indexOf(_item);\n    READY_QUEUE.splice(index, 1);\n\n    ready(_eventName);\n\n    return this;\n  };\n\n  /**\n   * Accessor for the detected features supported by the browser.\n   *\n   * *Supported Feature Detectors*\n   * - touch\n   *\n   * @function feature;\n   * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n   * @returns {boolean} The support status for the specified feature.\n   */\n  this.feature = (function () {\n    var detect = {\n      touch: function () {\n        return window.hasOwnProperty('ontouchend');\n      }\n    };\n\n    return function (_name) {\n      var tester = detect[_name];\n      if (!tester && console) console.warn('No feature detection for \"'+_name+'\".');\n      return tester && tester();\n    };\n  }());\n\n  this.getAudioContext = function () {\n    if (!audioContext) {\n      audioContext = new (window.AudioContext || window.webkitAudioContext);\n      window.onfocus = function () {\n        audioContext.resume();\n      };\n      window.onblur = function () {\n        audioContext.suspend();\n      };\n    }\n    return audioContext;\n  };\n\n  this.enableAudioContext = function () {\n    var ctx, silence;\n\n    ctx = this.getAudioContext();\n    silence = ctx.createBufferSource();\n\n    silence.buffer = ctx.createBuffer(2, 1, 44100);\n    silence.connect(ctx.destination);\n    silence.start();\n    silence.disconnect();\n\n    return silence;\n  };\n\n}).call(game);\n\nexport default game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.js\n **/","/**\n * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play~pl.util\n * @requires types/Events\n */\nimport util from 'util';\nimport Events from 'types/Events';\n\n/**\n * Collection of component behavior records\n * @const\n */\nvar COMPONENTS;\n\n/**\n * Registers a component behavior.\n * @arg {string} _name - The name for the component.\n * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n * @returns {@link module:play~pl.game}\n */\nfunction component(_name, _implementation) {\n  if (!component.get(_name)) {\n    COMPONENTS.push({\n      name: _name,\n      implementation: _implementation,\n      config: {}\n    });\n  }\n\n  return this;\n}\n\nCOMPONENTS = [];\n\n/**\n * Methods to manage and load component behavior scripts.\n * @namespace component\n * @memberof module:play~pl.game\n * @mixes Events\n */\n(function () {\n\n  util.mixin(this, Events);\n\n  /**\n   * Given a name; provides the component record. `{name, implementation}`\n   * @memberof module:play~pl.game.component\n   * @arg {string} _name - The name of the component.\n   * @returns {object} The record.\n   */\n  this.get = function (_name) {\n    var i, record;\n\n    for (i = 0; record = COMPONENTS[i]; i += 1) {\n      if (record.name === _name) return record;\n    }\n\n    return null;\n  };\n\n  /**\n   * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n   * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n   * @memberof module:play~pl.game.component\n   * @arg {string} _name - The name of the component.\n   * @arg {function} _callback - Callback for load success.\n   * @todo Implement Promises.\n   * @returns `this`\n   */\n  this.load = function (_name, _callback) {\n    var path;\n\n    if (component.get(_name)) {\n      if (_callback) _callback.call(component, _name);\n      return null;\n    }\n\n    path = pl.game.config('componentDirectory') + _name + '/behavior.js';\n\n    $.getScript(path, function () {\n      if (_callback) _callback.call(component, _name);\n      component.trigger('loaded', [_name]);\n    });\n\n    return this;\n  };\n\n  /**\n   * Loads all the component scripts for HTML elements with `pl-component` attributes.\n   * @memberof module:play~pl.game.component\n   * @arg {function} _callback - Callback for load success.\n   * @todo Implement Promises.\n   * @returns `this`\n   */\n  this.loadAll = function (_callback) {\n    var $components, queue;\n\n    $components = $('[pl-component]');\n    queue = [];\n\n    $components.each(function (_index) {\n      var name;\n\n      name = $(this).attr('pl-component');\n\n      if (~queue.indexOf(name)) return;\n\n      queue.push(name);\n    });\n\n    queue.slice(0).forEach(function (_name) {\n      component.load(_name, function () {\n        var index;\n\n        index = queue.indexOf(_name);\n        queue.splice(index, 1);\n\n        if (!queue.length && _callback) _callback.apply(component, arguments);\n      });\n    });\n\n    return this;\n  };\n\n  // Maybe?\n  // this.config = function () {};\n\n}).call(component);\n\nexport default component;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.component.js\n **/","/**\n*  Events\n*  @desc Contains methods for managing and dispatching events from objects.\n*  @proto Basic\n*/\n\nimport Basic from 'types/Basic';\n\nvar Events = Basic.extend(function () {\n  var i, method, methods;\n  /**\n  *  @desc Creates a function with a proxy to the jQuery method.\n  *  @param _name (String) The name of the method being proxied.\n  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n  *  @private\n  */\n  function createProxyFunction(_name) {\n    return function () {\n      var $jq = $();\n      // We must wrap our object in jQuery. If 'typeof this' is a function then we need\n      // to add it in this manner, otherwise jQuery treats it like a ready callback.\n      $jq.push(this);\n\n      return $.fn[_name].apply($jq, arguments);\n    };\n  }\n\n  methods = ['on', 'off', 'trigger'];\n\n  this.baseType = 'TYPE_EVENTS';\n\n  for (i = 0; method = methods[i]; i += 1) {\n    this[method] = createProxyFunction(method);\n  }\n});\n\nexport default Events;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Events.js\n **/","import draggable from 'play.game.manager.draggable';\n\nexport { draggable };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.js\n **/","import util from 'util';\nimport Collection from 'types/Collection';\nimport { Point } from 'types/Dimensions';\n\nconst COLLECTION_DRAGABLES = Collection.create(); //eslint-ignore-line\n\nvar draggableStyleSheet;\n\nfunction boot() {\n  createHelperStyleSheet();\n  attachEvents();\n}\n\nfunction attachEvents() {\n  var state, E;\n\n  E = pl.EVENT;\n\n  // Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n  if (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\n  $(document)\n    .on(E.ACTION_DOWN, function (_event) {\n      var $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\n      $draggable = $(_event.target).closest('[pl-draggable]');\n\n      if ($draggable.length) {\n        scope = $draggable.scope();\n        cursor = resolveEventPoint(_event, 1 / scope.game.zoom);\n        mode = $draggable.pl('draggable');\n        game = {\n          position: scope.game.absolutePosition(),\n          scale: scope.game.transformScale().x\n        };\n        point = $draggable.absolutePosition().dec(game.position);\n        transform = $draggable.transform();\n        helperID = createID();\n        state = {\n          mode: mode,\n          $draggable: $draggable,\n          scope: scope,\n          $helper: null,\n\n          start: {\n            cursor: cursor,\n            point: point,\n            transform: transform\n          },\n\n          progress: {\n            distance: null,\n            point: null,\n            transform: null\n          }\n        };\n\n        // FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n        // so we need to account for the game transform scale.\n        //\n        if (game.scale !== 1) point = point.scale(1 / game.scale);\n\n        draggableStyleSheet.html( provideSource( helperID, createDraggableRule($draggable)));\n\n        switch (mode) {\n        case 'clone':\n          state.$helper = $draggable.clone();\n          state.$helper\n              .id(helperID)\n              .pl('draggable', null) // helpers are not to be captured as draggable\n              .addClass('draggable-helper')\n              .appendTo(document.body)\n              .absolutePosition(point);\n          break;\n\n        case 'pluck':\n          $draggable.addClass('PLUCKED');\n\n          state.$helper = $draggable.clone();\n          state.$helper\n              .id(helperID)\n              .pl('draggable', null) // helpers are not to be captured as draggable\n              .addClass('draggable-helper')\n              .appendTo(document.body)\n              .absolutePosition(point);\n          break;\n\n        default:\n          state.$helper = $draggable;\n          break;\n        }\n\n        state.$helper.removeClass('DRAG-ENDED')\n          .addClass('DRAG-START');\n\n        dragStartEvent = $.Event('drag-start', {\n          state: state,\n          targetScope: scope\n        });\n\n        scope.trigger(dragStartEvent);\n      }\n    })\n\n    .on(E.ACTION_MOVE, function (_event) {\n      var cursor, $draggable, distance, point, transform, dragMoveEvent;\n\n      if (state) {\n        cursor = resolveEventPoint(_event, 1 / state.scope.game.zoom);\n        distance = state.start.cursor.distance(cursor);\n        point = Point.create();\n        transform = null;\n\n        if (state.start.transform !== 'none') {\n          transform = state.start.transform.clone();\n          transform.translate(distance.width, distance.height);\n          point.set(transform.applyToPoint(0, 0));\n        } else {\n          point = distance.to('point');\n        }\n\n        if (state.$helper.hasClass('DRAG-START')) {\n          state.$helper\n            .removeClass('DRAG-START')\n            .addClass('DRAGGING');\n        }\n\n        dragMoveEvent = $.Event('drag-move', {\n          state: state,\n          targetScope: state.scope\n        });\n\n        state.progress.distance = distance;\n        state.progress.point = state.start.point.inc(point);\n        state.progress.transform = transform;\n\n        state.scope.translate(state.$helper, point);\n        state.scope.trigger(dragMoveEvent);\n      }\n    })\n\n    .on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n      var $draggable, dragEndEvent;\n\n      if (state) {\n        // Do not end dragging if we dont mouse out of the document.\n        if (_event.type === 'mouseout' && !~[null, document.documentElement].indexOf(_event.toElement)) {\n          return;\n        }\n\n        $draggable = state.$draggable;\n\n        if (state.$helper.hasClass('draggable-helper')) {\n          state.$helper.on('transitionend', function () {\n            $draggable.removeClass('PLUCKED');\n            $(this).remove();\n          });\n        }\n\n        state.$helper\n          .removeClass('DRAG-START DRAGGING')\n          .addClass('DRAG-ENDED');\n\n        dragEndEvent = $.Event('drag-end', {\n          state: state,\n          targetScope: state.scope\n        });\n\n        state.scope.trigger(dragEndEvent);\n\n        state = null;\n      }\n    });\n}\n\nattachEvents.disableTouchScroll = function () {\n  document.addEventListener('touchmove', function (_event) {\n    _event.preventDefault();\n  }, false);\n};\n\nfunction resolveEventPoint(_event, _scale) {\n  var scale = _scale || 1;\n\n  if (_event.originalEvent && _event.originalEvent.changedTouches) {\n    /**\n     * For now, interactions should use the last touch if multiple fingers are captured.\n     * @todo Maybe invoke action for each touch.\n     */\n    _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n  }\n\n  return Point.create().set(new function () {\n    if (_event.touch) {\n      this.x = _event.touch.clientX * scale;\n      this.y = _event.touch.clientY * scale;\n    } else {\n      this.x = _event.clientX * scale;\n      this.y = _event.clientY * scale;\n    }\n  });\n}\n\nfunction createHelperStyleSheet() {\n  draggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n}\n\nfunction createDraggableRule(_$draggable) {\n  var i, style, blacklist, rule, prop;\n\n  style = window.getComputedStyle(_$draggable[0]);\n  rule = {};\n  blacklist = [\n    'zIndex',\n    'opacity',\n    'cursor',\n    'transition',\n    'transitionDelay',\n    'transitionDuration',\n    'transitionProperty',\n    'transitionTimingFunction'\n  ];\n\n  for (i = 0; i < style.length; i += 1) {\n    prop = util.transformId(style[i], true);\n    if (~blacklist.indexOf(prop)) continue;\n    if (prop.indexOf('Webkit') === 0) prop = prop.slice(0, 1).toLowerCase() + prop.slice(1);\n    if (style[prop]) rule[prop] = style[prop];\n  }\n\n  return rule;\n}\n\nfunction provideSource(_id, _rule) {\n  var source, prop, value;\n\n  source = '#' + _id + '.draggable-helper {';\n\n  for (prop in _rule) {\n    if (!_rule.hasOwnProperty(prop)) continue;\n    value = _rule[prop];\n    source += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase() + ': ' + value + ';';\n  }\n\n  source += '}';\n\n  return source;\n}\n\nfunction createID() {\n  return 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n    if (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n    return Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n  });\n}\n\nvar draggableManager = {\n\n};\n\n$(boot);\n\nexport default draggableManager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.draggable.js\n **/","/**\n * Collections are iterables which hold a consistent interface throughout its indexes.\n *\n * @module\n * @requires module:types/BasicArray\n */\nimport BasicArray from 'types/BasicArray';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n * @classdesc Iterable holding record objects of the same interface.\n * @class\n * @extends module:types/BasicArray~BasicArray\n */\nvar Collection = BasicArray.extend(function () {\n  /**\n   * Gets the record object which has `_member` as a member.\n   * @instance\n   * @protected\n   * @memberof module:types/Collection~Collection\n   * @arg {*} _member - object reference to search for.\n   * @arg {string} _key - the target key to test the `_member` against.\n   * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n   * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n   */\n  function getRecord(_member, _key, _shouldCollect) {\n    var i, record, member, result;\n\n    result = [];\n\n    for (i = 0; record = this[i]; i += 1) {\n      if (_key !== undefined) {\n        if (record[_key] === _member) {\n          if (_shouldCollect) {\n            result.push(record);\n          }\n\n          else {\n            return record;\n          }\n        }\n      }\n\n      else if (record instanceof Array) {\n        if (~record.indexOf(_member)) {\n          if (_shouldCollect) {\n            result.push(record);\n          }\n\n          else {\n            return record;\n          }\n        }\n      }\n\n      else {\n        for (member in record) {\n          if (!record.hasOwnProperty(member)) continue;\n          if (record[member] === _member) {\n            if (_shouldCollect) {\n              result.push(record);\n            }\n\n            else {\n              return record;\n            }\n          }\n        }\n      }\n    }\n\n    return result.length ? result : null;\n  }\n\n  /**\n   * Objects with this as an own property will be identified as the root object.\n   * @memberof module:types/Collection~Collection\n   * @readonly\n   * @default\n   */\n  this.baseType = 'TYPE_COLLECTION';\n\n  this.add = function (_record) {\n    if (~this.indexOf(_record)) return false;\n    this.push(_record);\n\n    return this;\n  };\n\n  this.remove = function (_record) {\n    var index;\n\n    index = this.indexOf(_record);\n    if (~index) this.splice(index, 1);\n\n    return this;\n  };\n\n  this.has = function (_record) {\n    return !!~this.indexOf(_record);\n  };\n\n  this.get = function (_member, _key) {\n    return getRecord.call(this, _member, _key);\n  };\n\n  this.filter = function (_member, _key) {\n    return getRecord.call(this, _member, _key, true);\n  };\n\n});\n\nexport default Collection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Collection.js\n **/","/**\n*  GlobalScope\n*/\n\nimport { Scope } from 'types/Scope';\n\nvar GlobalScope = Scope.extend(function () {\n\n  this.baseType = 'TYPE_GLOBAL_SCOPE';\n\n});\n\nexport default GlobalScope;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/GlobalScope.js\n **/","/**\n * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n * This enables properties and methods to be in context of the DOM node and its descendants.\n *\n * @module\n * @requires types/jQProxy\n * @requires types/Basic\n * @requires types/Queue\n * @requires play.game\n * @requires util\n * @requires evalAction\n *\n * @exports createEntity\n */\nimport jQProxy from 'types/jQProxy';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point } from 'types/Dimensions';\nimport game from 'play.game';\nimport util from 'util';\nimport evalAction from 'evalAction';\nimport { AudioManager } from 'types/AudioManager';\n\n/**\n * Creates a new Enitiy instance with a context node and implementation.\n * The instance is prototyped from the parent scope.\n *\n * @memberof module:types/Scope~Scope#createEntity\n * @protected\n * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n * @returns {module:types/Scope~Scope}\n */\nfunction createEntity(_$node, _implementation) {\n  var component, prototype, componentRecord, instance;\n\n  component = _$node.attr('pl-component');\n  prototype = this;\n\n  if (component) {\n    componentRecord = game.component.get(component);\n\n    if (componentRecord) {\n      // If a scope is being defined as an extention of a component before the component scope\n      // has been allocated, we construct the component first then pass it as the proto.\n      // But we need to make sure we are not allocating the component it self.\n      if (componentRecord.implementation !== _implementation) {\n        prototype = this.extend(componentRecord.implementation);\n      }\n    }\n\n    else {\n      throw new Error('No implementation record for the ' + component + 'component.');\n    }\n  }\n\n  instance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\n  return instance.initialize(_$node, component);\n}\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n * @class\n * @extends module:types/jQProxy~jQProxy\n */\nvar Scope = jQProxy.extend(function () {\n\n  /**\n   * Collection of records pairing a node with its action.\n   * @memberof module:types/Scope~Scope\n   * @static\n   * @protected\n   * @todo Convert to types/Collection\n   */\n  var Actionables;\n\n  function attachActionHandler() {\n    this.on(pl.EVENT.ACTION, function (_event) {\n      var target, record;\n\n      target = $(_event.target).closest('[pl-action]')[0];\n\n      if (_event.originalEvent && _event.originalEvent.changedTouches) {\n        /**\n         * For now, interactions should use the last touch if multiple fingers are captured.\n         * @todo Maybe invoke action for each touch.\n         */\n        _event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n      }\n\n      _event.cursor = Point.create().set(new function () {\n        if (_event.touch) {\n          this.x = _event.touch.clientX;\n          this.y = _event.touch.clientY;\n        } else {\n          this.x = _event.clientX;\n          this.y = _event.clientY;\n        }\n      });\n\n      if (target) {\n        record = this.actionables.item(target);\n\n        if (record) {\n          _event.targetScope = this;\n          this.event = _event;\n          evalAction(record.action, this);\n          this.event = null;\n        }\n      }\n    });\n  }\n\n  function getRecordBy(_key, _member, _collection) {\n    var i, record;\n\n    if (_collection) {\n      for (i = 0; record = _collection[i]; i += 1) {\n        if (record[_key] === _member) return record;\n      }\n    }\n\n    return null;\n  }\n\n  function removeRecord(_record, _collection) {\n    var index;\n\n    index = _collection.indexOf(_record);\n    if (~index) _collection.splice(index, 1);\n  }\n\n  function captureDropables(_scope) {\n    var collection;\n\n    collection = [];\n\n    _scope.find('> [pl-pluck]').each(function () {\n      var name;\n\n      name = $(this).attr('pl-pluck');\n\n      collection.push(this);\n      collection[name] = this;\n    });\n\n    return collection;\n  }\n\n  function pluckAndDrop(_dropables, _template) {\n    $(_template).find('[pl-drop]').each(function () {\n      var $node, name, dropable;\n\n      $node = $(this);\n      name = $node.attr('pl-drop');\n      dropable = _dropables[name];\n\n      if (dropable) {\n        $node.replaceWith(dropable.children);\n      }\n    });\n  }\n\n  // Protected\n  function loadComponentAssets(_name, _callback) {\n    var scope, path, totalRequests, transcludeMode, dropables;\n\n    function ready() {\n      ready.status += 1;\n\n      if (ready.status === totalRequests) {\n        if (_callback) {\n          _callback.call(scope, _name);\n        }\n      }\n    }\n\n    totalRequests = 0;\n    scope = this;\n    path = game.config('componentDirectory') + _name + '/';\n    dropables = captureDropables(this);\n    transcludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n    ready.status = 0;\n\n    if (!this.children().length || transcludeMode) {\n      totalRequests += 1;\n      $('<div>').load(path + 'template.html', function () {\n        var memory;\n\n        memory = [];\n\n        switch (transcludeMode) {\n        case scope.TRANSCLUDE_APPEND:\n          scope.append(this.children);\n          break;\n\n        case scope.TRANSCLUDE_PREPEND:\n          scope.prepend(this.children);\n          break;\n\n        case scope.TRANSCLUDE_PLUCK:\n          pluckAndDrop(dropables, this);\n          scope.empty().append(this.children);\n          break;\n\n        case scope.TRANSCLUDE_REPLACE:\n          scope.empty().append(this.children);\n          break;\n\n        default:\n          if (transcludeMode) {\n              pluckAndDrop(new (function () {\n                this[transcludeMode] = scope.node();\n              }), this);\n              scope.empty().append(this.children);\n            }\n\n            else {\n              scope.empty().append(this.children);\n            }\n\n        }\n\n        scope.findOwn('[pl-component]').each(function () {\n          var name;\n\n          name = $(this).attr('pl-component');\n\n          if (~memory.indexOf(name)) return;\n\n          memory.push(name);\n\n          totalRequests += 1;\n\n          game.component.load(name, function () {\n            ready();\n          });\n        });\n        ready();\n      });\n    }\n\n    if (!$('style[pl-for-component=\"' + _name + '\"]').length && game.config('shouldLoadComponentStyles') !== false) {\n      totalRequests += 1;\n      $('<style type=\"text/css\" pl-for-component=\"' + _name + '\">')\n        .load(path + 'style.css', ready)\n        .appendTo(document.body);\n    }\n\n    if (!totalRequests) _callback && _callback.call(this, _name);\n\n    return this;\n  }\n\n  function captureProperties() {\n    var i, attr, name, collection;\n\n    collection = (function () {\n\n      this.has = function (_name) {\n        return !!~this.indexOf(_name);\n      };\n\n      return this;\n\n    }).call([]);\n\n    for (i = 0; attr = this.$els[0].attributes[i]; i += 1) {\n      // I explicitly want it to be at the beginning.\n      if (attr.name.indexOf('pl-') === 0) {\n        name = attr.name.slice(3);\n        collection[util.transformId(name, true)] = attr.value;\n\n        collection.push(name);\n      }\n    }\n\n    if (collection.length) this.properties = collection;\n\n    return this;\n  }\n\n  function initializeEntities() {\n    if (!this.hasOwnProperty('entities')) return this;\n\n    this.entities.forEach(this.bind(function (_record, _index) {\n      var $nodes, query, index;\n\n      $nodes = this.findOwn(_record.selector);\n      query = ['#' + _record.selector, '[pl-id=' + _record.selector + ']', '[pl-component=' + _record.selector + ']', '[pl-' + _record.selector + ']'];\n      index = 0;\n\n      while (!$nodes.length) {\n        if (index === query.length) {\n          throw new Error('Unable to locate entity with selector', _record.selector);\n        }\n        $nodes = this.findOwn(query[index]);\n        index += 1;\n      }\n\n      $nodes.each(this.bind(function (_index, _node) {\n        var $node, instance, id;\n\n        $node = $(_node);\n\n        if (!Scope.isPrototypeOf(_record)) {\n          instance = createEntity.call(this, $node, _record.implementation);\n          if (!instance.isReady) this.assetQueue.add(instance);\n        } else {\n          instance = _record;\n        }\n\n        id = util.transformId(instance.id(), true);\n        if (id) util.assignRef(this, id, instance);\n      }));\n    }));\n\n    return this;\n  }\n\n  function handleProperties() {\n    var scope, property, handler;\n\n    scope = this;\n\n    if (this.hasOwnProperty('properties')) {\n      this.properties.forEach(function (_name) {\n        handler = scope.propertyHandlers[_name];\n        if (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n      });\n    }\n\n    if (this.propertyHandlers) {\n      for (property in this.propertyHandlers) {\n        // Only exclide members on the base type.\n        if (Basic.hasOwnProperty(property)) continue;\n\n        handler = this.propertyHandlers[property];\n\n        this.findOwn('[pl-' + property + ']').each(function () {\n          var attr;\n\n          if (scope === $(this).scope()) {\n            attr = this.attributes.getNamedItem('pl-' + property);\n\n            if (handler) handler.call(scope, this, property, attr.value);\n          }\n        });\n      }\n    }\n\n    return this;\n  }\n\n  function invokeLocal(_name) {\n    var args, owner;\n\n    args = [].slice.call(arguments, 1);\n\n    if (this.isMemberSafe(_name)) {\n      return this[_name].apply(this, arguments);\n    }\n  }\n\n  function init() {\n    var willInitEvent, initEvent;\n\n    initEvent = $.Event('initialize', { targetScope: this });\n    willInitEvent = $.Event('will-initialize', { targetScope: this });\n\n    invokeLocal.call(this, 'willInit');\n    this.trigger(willInitEvent);\n\n    this.attachEvents();\n\n    initializeEntities.call(this);\n    handleProperties.call(this);\n\n    this.watchAssets();\n    this.captureAudioAssets();\n    this.captureReferences();\n\n    this.__init();\n    invokeLocal.call(this, 'init');\n\n    this.trigger(initEvent);\n\n    if (!this.isReady) this.assetQueue.ready();\n\n    return this;\n  }\n\n  function ready() {\n    var readyEvent, entities;\n\n    readyEvent = $.Event('ready', { targetScope: this });\n    entities = this.findOwn('.pl-scope').scope();\n\n    if (entities) {\n      if (entities.length > 0) {\n        this.entities = entities;\n      } else {\n        this.entities = [entities];\n      }\n    }\n\n    /**\n     * Sort audio into DOM order.\n     * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n     */\n    if (this.hasOwnProperty('audio')) {\n      (this.game || this).media.addShadow(this.audio);\n      this.audio.collections().forEach(function (_collection) {\n        var map = {\n          voiceOver: 'voice-over',\n          background: 'background',\n          sfx: 'sfx'\n        };\n\n        if (!_collection.length) return;\n\n        this.findOwn('audio.' + map[_collection.type]).each(function (_index, _node) {\n          var id, audio, collection, index;\n\n          id = $(_node).id();\n          audio = (_collection.find('#' + id) || [])[0];\n          index = _collection.indexOf(audio);\n\n          if (index !== _index) {\n            _collection[index] = _collection[_index];\n            _collection[_index] = audio;\n          }\n        });\n      }.bind(this));\n    }\n\n    this.isReady = true;\n    this.addClass('READY');\n\n    this.__ready();\n    invokeLocal.call(this, 'ready');\n\n    this.trigger(readyEvent);\n  }\n\n  Actionables = (function () {\n\n    util.mixin(this, Basic);\n\n    this.add = function (_node, _action) {\n      if (!this.has(_node)) {\n        this.push({\n          node: _node,\n          action: _action\n        });\n      }\n\n      return this;\n    };\n\n    this.remove = function (_node) {\n      var item, index;\n\n      item = this.item(_node);\n      index = this.indexOf(item);\n      if (~index) this.splice(index, 1);\n\n      return this;\n    };\n\n    this.item = function (_node) {\n      var i, item;\n\n      for (i = 0; item = this[i]; i += 1) {\n        if (item.node === _node) return item;\n      }\n    };\n\n    this.has = function (_node) {\n      return !!this.item(_node);\n    };\n\n    return this;\n\n  }).call([]);\n\n  this.TRANSCLUDE_REPLACE = 'replace';\n  this.TRANSCLUDE_PREPEND = 'prepend';\n  this.TRANSCLUDE_APPEND = 'append';\n  this.TRANSCLUDE_PLUCK = 'pluck';\n\n  this.baseType = 'TYPE_SCOPE';\n  this.actionables = null;\n  this.isReady = null;\n  this.isComponent = false;\n  this.entities = null;\n  this.audio = null;\n  this.properties = null;\n  this.propertyHandlers = null;\n  this.assetQueue = null;\n  this.event = null;\n  this.currentMedia = {};\n\n  this.initialize = function (_node_selector, _componentName) {\n    var scope;\n\n    scope = this;\n\n    this.isReady = false;\n    this.isComponent = !!_componentName;\n    this.event = null;\n    this.assetQueue = Queue.create();\n    this.$els = (_node_selector.jquery) ? _node_selector : $(_node_selector);\n\n    if (!this.$els.length) {\n      throw new ReferenceError('Unable to locate the element with selector ' + this.$els.selector + '.');\n    }\n\n    this.addClass('pl-scope ' + (_componentName ? _componentName + '-component' : ''));\n    this.data('pl-scope', this);\n    this.data('pl-isComponent', !!_componentName);\n\n    captureProperties.call(this);\n\n    if (_componentName) {\n      loadComponentAssets.call(this, _componentName, function () {\n        init.call(this);\n      });\n    }\n\n    else {\n      init.call(this);\n    }\n\n    return this;\n  };\n\n  // only for use in base types\n  this.__init = function () { return this; };\n  this.__ready = function () { return this; };\n\n  this.willInit = function () { return this; };\n  this.init = function () { return this; };\n  this.ready = function () { return this; };\n\n  this.watchAssets = function (_nodes) {\n    var createHandler, watch;\n\n    createHandler = this.bind(function (_node) {\n      return (function () {\n        var loadedEvent = $.Event('loaded', { targetScope: this });\n\n        this.assetQueue.ready(_node.src);\n        this.trigger(loadedEvent, [_node]);\n\n        _node.onload = null;\n      }).bind(this);\n    });\n\n    watch = this.bind(function (_index, _node) {\n      var node = typeof _index === 'number' ? _node : _index;\n\n      if (node.nodeName !== 'IMG' || node.complete) return;\n      if (this.assetQueue.add(node.src)) {\n        node.onload = createHandler(node);\n        node.onerror = function () {\n          console.error('Image failed to load', node.src);\n        };\n      }\n    });\n\n    if (_nodes) {\n      _nodes.forEach(watch);\n      return this;\n    }\n\n    this.each(watch);\n    this.findOwn('img').each(watch);\n\n    return this;\n  };\n\n  this.attachEvents = function () {\n\n    this.proto();\n\n    this.assetQueue.on('complete', this.bind(function () {\n      this.assetQueue.off();\n      ready.call(this);\n    }));\n\n    this.on('ready', function (_event) {\n      if (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n        this.assetQueue.ready(_event.targetScope);\n      }\n\n      if (!this.assetQueue.length && this.isReady) this.off('ready');\n    });\n\n    return this;\n  };\n\n  this.captureReferences = function () {\n    this.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n      var $node, id;\n\n      if (_node.nodeName === 'AUDIO') return;\n\n      $node = $(_node);\n      id = $node.attr('id') || $node.attr('pl-id');\n\n      if (!this[id]) {\n        util.assignRef(this, id, $node.data('pl-scope') || $node);\n      }\n    }));\n  };\n\n  this.captureAudioAssets = function () {\n    var deQ, $audio;\n\n    if (!($audio = this.findOwn('audio')).length) return false;\n\n    deQ = function (_item) {\n      [this, this.screen].forEach(function (_scope) {\n        if (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n          _scope.requiredQueue.ready(_item);\n        }\n      });\n    }.bind(this);\n\n    this.audio = AudioManager.create(this.id());\n\n    $audio.each(function (_index, _node) {\n      this.assetQueue.add(_node.src);\n      this.audio.watch(_node).then(function (_audio) {\n        var loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\n        if ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\n        if (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\n        this.trigger(loadedEvent);\n      }.bind(this));\n    }.bind(this));\n\n    // proxy events\n    this.audio.on('play pause ended stopped', this.bind(function (_event) {\n      var map = {\n        background: 'BACKGROUND',\n        voiceOver: 'VOICE-OVER',\n        sfx: 'SFX'\n      };\n\n      switch (_event.type) {\n      case 'play':\n        [this, this.screen].forEach(function (_scope, _index, _set) {\n            if (_index === 1 && _scope === _set[0]) return;\n            if (_scope.$els) {\n              _scope.addClass('PLAYING '+map[_event.target.type]);\n              _scope.currentMedia[map[_event.target.type]] = _event.target;\n            }\n          });\n\n        $(_event.targetNode).addClass('PLAYING');\n        break;\n\n      case 'pause':\n      case 'stopped':\n      case 'ended':\n        [this, this.screen].forEach(function (_scope, _index, _set) {\n            var state;\n\n            if (_index === 1 && _scope === _set[0]) return;\n\n            if (_scope.$els) {\n              _scope.removeClass(map[_event.target.type]);\n              state = _scope.attr('class');\n              if (!(/BACKGROUND|VOICE-OVER|SFX/).test(state)) _scope.removeClass('PLAYING');\n              if(_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n            }\n          });\n\n        $(_event.targetNode).removeClass('PLAYING');\n        if (_event.type === 'ended') deQ(_event.target);\n        break;\n      }\n\n      var audioEvent = $.Event('audio-' + _event.type, {\n        target: _event.target,\n        targetSource: _event.targetSource,\n        targetNode: _event.targetNode,\n        targetScope: this\n      });\n\n      this.trigger(audioEvent);\n    }));\n\n    return this;\n  };\n\n  this.handleProperty = function (_implementation) {\n    if (this.propertyHandlers) {\n      if (this.hasOwnProperty('propertyHandlers')) {\n        switch (typeof _implementation) {\n        case 'function':\n          _implementation.call(this.propertyHandlers);\n          break;\n\n        case 'object':\n          this.propertyHandlers.mixin(_implementation);\n          break;\n        }\n      }\n\n      else {\n        this.propertyHandlers = this.propertyHandlers.extend(_implementation);\n      }\n    }\n\n    else {\n      this.propertyHandlers = Basic.extend(_implementation);\n    }\n\n    return this;\n  };\n\n  this.entity = function (_selector, _implementation) {\n    var Entity, prototype, id;\n\n    Entity = game.provideEntityType();\n\n    if (!this.hasOwnProperty('entities')) this.entities = [];\n\n    if (this.hasOwnProperty('$els')) {\n      throw new Error('Wait this hasn\\'t been tested.');\n      prototype = (Entity.isPrototypeOf(this)) ? this : Entity;\n      instance = prototype.extend(_implementation).initialize(this.find(_selector));\n      id = util.transformId(instance.id());\n\n      // this.entities.push(instance);\n      if (id) this[id] = instance;\n    }\n\n    else {\n      this.entities.push({\n        selector: _selector,\n        implementation: _implementation\n      });\n    }\n\n    return this;\n  };\n\n  this.has = function (_child) {\n    var child;\n\n    child = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\n    return !!this.$els.has(child).length;\n  };\n\n  this.toString = function () {\n    var type;\n\n    type = this.baseType.replace('TYPE_', '');\n    type = type.slice(0, 1) + type.slice(1).toLowerCase();\n\n    return ['[', this.id() || this.address(), ' ', type, ']'].join('');\n  };\n\n  this.log = function () {\n    var args;\n\n    args = util.toArray(arguments);\n\n    console.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n    return this;\n  };\n\n  this.handleProperty(function () {\n\n    this.component = function (_node, _name, _value, _property) {\n      var $node, record, scope, id;\n\n      $node = $(_node);\n\n      if (!$node.data('pl-isComponent')) {\n        record = game.component.get(_value);\n\n        if (record) {\n          scope = createEntity.call(this, $node, record.implementation);\n          id = util.transformId(scope.id() || _value, true);\n          util.assignRef(this, id, scope);\n\n          if (!scope.isReady) this.assetQueue.add(scope);\n        }\n\n        else {\n          throw new Error('Ahh!');\n        }\n      }\n    };\n\n    this.action = function (_node, _name, _value) {\n      if (!this.hasOwnProperty('actionables')) {\n        this.actionables = Actionables.create();\n        attachActionHandler.call(this);\n      }\n\n      this.actionables.add(_node, _value);\n    };\n\n    this.required = function (_node, _name, _value) {\n      if (this.is(_node)) {\n        this.screen.require(this);\n      }\n    };\n\n    this.require = function (_node, _name, _value) {\n      var query, $node;\n\n      // if the node with the attribute is the node for this scope\n      if (this.is(_node)) {\n        query = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n        $node = this.find(query);\n\n        $node.on('ready', this.bind(function (_event) {\n          if ($node.is(_event.target)) {\n            this.require(_event.targetScope);\n          }\n        }));\n      }\n    };\n\n  });\n\n});\n\nexport default { Scope, createEntity };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Scope.js\n **/","/**\n*  jQProxy\n*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n*  @proto Basic\n*\n*  NOTE: Custom events may trigger on scopes\n*  that also targets the same elments. Testing needed.\n*/\n\nimport util from 'util';\nimport Basic from 'types/Basic';\n\nvar jQProxy = Basic.extend(function () {\n  var method, exclude;\n\n  /**\n  *  @desc Creates a function with a proxy to the jQuery method.\n  *  @param _name (String) The name of the method being proxied.\n  *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n  *  @private\n  */\n  function createProxyFunction(_name) {\n    return function () {\n      var response;\n\n      // This makes sure your not calling any jQuery methods before initialization.\n      if (!this.hasOwnProperty('$els')) {\n        if (_name === 'on') {\n          registerHandler.call(this, arguments);\n        }\n\n        else {\n          throw new ReferenceError('Unable to invoke ' + _name + ' because the scope is not initialized.');\n        }\n        return;\n      }\n\n      response = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\n      if (response === this.$els || (response && response.jquery && response.is(this.$els))) {\n        return this;\n      }\n\n      return response;\n    };\n  }\n\n  function resolveEventHandler(_scope, _method, _args) {\n    var i, arg, args;\n\n    args = [];\n\n    if (~(['on', 'load']).indexOf(_method)) {\n      for (i = 0; arg = _args[i]; i += 1) {\n        if (typeof arg === 'function') {\n          args.push((function (_handler) {\n            return function () { return _handler.apply(_scope, arguments); };\n          }(arg)));\n        }\n\n        else {\n          args.push(arg);\n        }\n      }\n\n      return args;\n    }\n\n    return _args;\n  }\n\n  function registerHandler(_definition) {\n    if (!this.hasOwnProperty('eventRegistry')) {\n      if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n        this.eventRegistry = this.eventRegistry.slice(0);\n      }\n\n      else {\n        this.eventRegistry = [];\n      }\n    }\n\n    this.eventRegistry.push(_definition);\n\n    return true;\n  }\n\n  // We don't want jQuery methods overridding our base type's methods.\n  exclude = ['constructor'].concat(Object.keys(Basic));\n\n  this.baseType = 'TYPE_JQPROXY';\n  this.$els = null;\n  this.eventRegistry = null;\n\n  for (method in $.fn) {\n    if (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n    this[method] = createProxyFunction(method);\n  }\n\n  this.node = function () {\n    return this.$els[0];\n  };\n\n  this.attachEvents = function () {\n    var self;\n\n    self = this;\n\n    if (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n      this.eventRegistry.forEach(function (_definition) {\n        self.on.apply(self, _definition);\n      });\n    }\n  };\n\n  this.listen = function (_name, _isCapure_handler, _handler) {\n    var _isCapture, node, handler;\n\n    _isCapture = false;\n\n    // resolve arguments\n    (typeof _isCapure_handler === 'boolean') ?\n      _isCapture = _isCapure_handler :\n      _handler = _isCapure_handler;\n\n    _handler.cb = _handler.bind(this);\n\n    if (this.$els) {\n      node = this.$els[0];\n      if (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n    }\n\n    else {\n      return registerHandler([_name, _handler.cb, _isCapture]);\n    }\n\n    return false;\n  };\n\n  this.ignore = function (_name, _handler) {\n    var node = this.$els && this.$els[0];\n\n    if (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\n    return false;\n  };\n\n  // Wraps you function 'this' to the scope.\n  //\n  this.bind = function (_handler) {\n    var args;\n\n    args = [].map.call(arguments, function (m) { return m; }).slice(1);\n\n    return _handler.bind.apply(_handler, [this].concat(args));\n  };\n\n  this.findOwn = function (_selector) {\n    return this.find(_selector).filter(this.bind(function (_index, _node) {\n      var $node;\n\n      $node = $(_node);\n\n      if ($node.hasClass('pl-scope')) {\n        return $node.parent().scope() === this;\n      }\n\n      return $node.scope() === this;\n    }));\n  };\n\n  this.isMemberSafe = function (_name) {\n    var owner, elOwner, prototype;\n\n    if (this.hasOwnProperty(_name)) {\n      return true;\n    }\n\n    else {\n      prototype = Object.getPrototypeOf(this);\n      owner = util.getOwner(this, this[_name]);\n\n      if (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\n      if (prototype.$els) {\n        elOwner = util.getOwner(prototype, prototype.$els);\n\n        if (owner.object.isPrototypeOf(elOwner.object)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  this.is = function (_obj) {\n    if (!_obj) return false;\n    if (_obj.$els) return this.$els.is(_obj.$els);\n\n    return this.$els.is(_obj);\n  };\n});\n\nexport default jQProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/jQProxy.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/keys.js\n ** module id = 33\n ** module chunks = 0\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/keys.js\n ** module id = 34\n ** module chunks = 0\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.keys.js\n ** module id = 35\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-object.js\n ** module id = 36\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.defined.js\n ** module id = 37\n ** module chunks = 0\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.object-sap.js\n ** module id = 38\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.fails.js\n ** module id = 39\n ** module chunks = 0\n **/","/**\n*  Queue\n*  @desc Contains...\n*  @proto Array, Events, Basic\n*/\n\nimport util from 'util';\nimport Collection from 'types/Collection';\nimport Events from 'types/Events';\n\nvar Queue = Collection.extend(function () {\n\n  this.baseType = 'TYPE_QUEUE';\n\n  this.ready = function (_record) {\n    if (_record != null) this.remove(_record);\n\n    if (!this.length) {\n      this.trigger('complete');\n    }\n\n    return this;\n  };\n\n  util.mixin(this, Events);\n\n  return this;\n\n});\n\nexport default Queue;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Queue.js\n **/","/**\n * @module evalAction\n */\n\n/**\n * Performs `eval()` on the value of an `action` attribute on an HTML element.\n * @arg {string} _source - JavaScript source code.\n * @arg {Scope} _scope - The context in which to run the source.\n * @returns {*} The result of the evaluated source.\n */\nfunction evalAction(_source, _scope) {\n  var error;\n\n  function target(_selector) {\n    if (_scope.event) {\n      return _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n    }\n  }\n\n  // expose members of the object as if they were local variables.\n  // NOTE: methods still retain their \"this\" binding to the object! :D\n  return eval('with (_scope) { try {' + _source + ';} catch (error) { console.error(\\'Error:\\', error.message, \\'evaluating action\\', _source, \\'in\\', _scope.id() || _scope.address()); } }');\n}\n\nexport default evalAction;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/evalAction.js\n **/","'use strict';\n/**\n * Contains classes for managing different media types.\n * Providing an API for referencing and control.\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n */\nimport type from 'types/type';\nimport util from 'util';\nimport Collection from 'types/Collection';\n\n// Object type definitions are using  `$` as the augmentation method for Types.\nvar EventTargetInterface,\n  InspectorInterface,\n  PlayableInterface,\n  LegislatorInterface,\n  StateInterface,\n  $$ = window.jQuery;\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n * Manages any playing media (Audio, Video).\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Manages any playing media (Audio, Video).\n * <style>\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n *\n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n */\nfunction MediaManager($, sup) {\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n  $(\n  'video',\n\n  function alloc(_id) {\n    sup(this, 'alloc', arguments);\n    this.video = Collection.create();\n    this.initialize(_id, 'media manager');\n  }\n);}\n\n/**\n * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n * - Background\n * - Voice Over\n * - SFX (Sound Effects)\n * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n * @class\n * @prop {type} member - Text.\n * @extends EventTargetInterface\n * @extends PlayableInterface\n * @extends InspectorInterface\n */\nfunction AudioManager($) {\n  var AUDIO_TYPES, BUFFER_CACHE;\n\n  /**\n   * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n   * @arg {HTMLAudioElement} _node - The loaded audio element.\n   * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n   */\n  function AudioBufferRecord(_node, _buffer) {\n    this.node = _node;\n    this.type = getAudioType(_node);\n    this.buffer = _buffer;\n  }\n  /**\n   * Provides the classification an audio element falls into.\n   * - Background (`background`)\n   * - Voice Over (`voiceOver`)\n   * - Sound Effects (`sfx`)\n   * @protected\n   * @arg {HTMLAudioElement} _audio - The audio element.\n   * @returns {string} - The type.\n   */\n  function getAudioType(_audio) {\n    return util.transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n  }\n  /**\n   * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n   * @protected\n   * @arg {HTMLAudioElement} _audio - The audio element.\n   * @returns {Promise}\n   */\n  function loadArrayBuffer(_audio) {\n    var xhr, manager, fileName;\n\n    xhr = new (XMLHttpRequest || util.noop);\n    manager = this;\n    fileName = util.resolveFileName(_audio.src);\n\n    if (!xhr.open) Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\n    return new Promise(function (resolve, reject) {\n      var cache = BUFFER_CACHE[fileName];\n\n      // Decodes ArrayBuffer into an AudioBuffer.\n      function onLoad() {\n        var ctx, promise;\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          if (ctx = pl.game.getAudioContext()) {\n            promise = new Promise(function (resolveDecoding, rejectDecoding) {\n              try {\n                ctx.decodeAudioData(xhr.response, function (_buffer) {\n                  var audio = manager.collect( new AudioBufferRecord(_audio, _buffer));\n\n                  resolveDecoding(audio);\n                  // Cache the AudioBuffer to resolve duplicates.\n                  BUFFER_CACHE[fileName] = _buffer;\n                }, function () {\n                  rejectDecoding(\"Failed to decode ArrayBuffer for \" + fileName+'.');\n                });\n              } catch(e) {\n                rejectDecoding(e);\n              }\n            });\n\n            promise.then(resolve).catch(reject);\n\n            return promise;\n          }\n\n        } else {\n          reject(xhr.statusText);\n        }\n\n        xhr.removeEventListener('load', onLoad);\n        xhr = null;\n      }\n\n      function onError() {\n        reject(xhr.statusText);\n        xhr.removeEventListener('error', onError);\n        xhr = null;\n      }\n\n      if (cache && cache !== 'loading') return resolve( manager.collect( new AudioBufferRecord(_audio, cache)));\n\n      BUFFER_CACHE[fileName] = 'loading';\n\n      xhr.responseType = 'arraybuffer';\n\n      xhr.addEventListener('load', onLoad, false);\n      xhr.addEventListener('error', onError, false);\n      xhr.open('GET', _audio.src, true);\n      xhr.send();\n    });\n  }\n  /**\n   * The CSS class names reconized as audio types.\n   */\n  AUDIO_TYPES = /background|voice-over|sfx/i;\n  BUFFER_CACHE = {};\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\n// A little ugg but define instance members.\n  $(\n  // Declare properties.\n  'background, voiceOver, sfx, scope',\n\n  /**\n   * Define instance properties.\n   */\n  function alloc(_id) {\n    this.initialize(_id, 'audio manager');\n\n    ['background', 'voiceOver', 'sfx'].forEach(function (_type) {\n      var collection = this[_type] = AudioCollection.create(_type);\n      this.addShadow(collection);\n    }.bind(this));\n  },\n\n  /**\n   * Given an audio element begin loading the asset.\n   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n   * @returns {Promise}\n   * @todo Support loading from node source or a string argument. - Micah:2/19/16\n   */\n  function load(_audio) {\n    var manager, type;\n\n    manager = this;\n    type = getAudioType(_audio);\n\n    if (!type) return Promise.reject('Audio is missing a type. Please classify as \\'background\\', \\'voiceOver\\' or \\'sfx\\'.');\n    // if (~['sfx', 'voiceOver'].indexOf(type))\n    return loadArrayBuffer.call(this, _audio);\n\n    // return new Promise(function (resolve, reject) {\n    //  _audio.onloadeddata = function () { resolve(manager.collect(this)); };\n    //  _audio.onerror = reject;\n    //  _audio.load();\n    // });\n  },\n\n  /**\n   * Begins loading an AudioElement waits for it to load.\n   * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n   * @returns {Promise}\n   */\n  function watch(_audio) {\n    var promise;\n\n    if (_audio.nodeName !== 'AUDIO') return Promise.reject('Invalid type for audio node. ' + (typeof _audio) + ' [' + _audio.protoype.constructor.name + ' ' + _audio.nodeName + '].');\n\n    function reject(_error) {\n      var scope = $$(_audio).scope();\n      console.warn(scope.id(), '-', _error);\n    }\n\n    (promise = this.load(_audio)).catch(reject.bind(this));\n\n    return promise;\n  },\n\n  /**\n   * Adds a audio to the collection. You may also pass an itterable of items to add.\n   * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n   * @returns {Promise}\n   */\n  function collect(_audio) {\n    var type;\n\n    if (!_audio) return false;\n\n    if (_audio.length) {\n      return _audio.map(collect.bind(this));\n    }\n\n    type = _audio.type || getAudioType(_audio);\n\n    if (type && this[type]) return this[type].add(_audio);\n\n    return false;\n  },\n  /**\n   * Provides a collection of `AudioCollection` objects.\n   * @returns {array}\n   */\n  function collections() {\n    var result, types;\n\n    result = [];\n    types = Object.keys(this);\n\n    types.forEach(function (_type) {\n      if (this[_type] instanceof AudioCollection) result.push(this[_type]);\n    }.bind(this));\n\n    return result;\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString() {\n    return '[object ' + (this.constructor.name || 'Object') + ']';\n  }\n);}\n\n/**\n * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n * @extends Collection\n */\nfunction AudioCollection($, sup) {\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\n  $(\n  'type',\n\n  function alloc(_type) {\n    if (_type) this.type = _type;\n    this.initialize(_type, 'collection');\n  },\n  /**\n   * Adds an Audio object to the collection.\n   * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n   * @override\n   * @returns {Audio}\n   */\n  function add(_audio) {\n    var audio;\n\n    if (!_audio) return false;\n\n    audio = (_audio instanceof Audio) ? _audio : Audio.create(_audio, this.type);\n\n    sup(this, 'add')(audio);\n    this.addShadow(audio);\n    if (audio.id()) util.assignRef(this, audio.id(), audio);\n\n    return audio;\n  },\n  /**\n   * Get the owning manager interface for an Audio object.\n   * @returns {AudioManager}\n   */\n  function manager() {\n    return this.$el.closest('#man').data('context');\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString() {\n    return '[object ' + (this.constructor.name || 'Object') + ']';\n  }\n);}\n/**\n * Extend AudioCollection with Collection.\n */\nAudioCollection.prototype = Object.create(Collection, {\n  constructor: {\n    value: AudioCollection,\n    enumerable: false,\n    writeable: false,\n    configureable: false\n  }\n});\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n * Returned as the result of some collection process.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Returned as the result of some collection process.\n *\n * @class\n * @extends AudioCollection\n * @extends EventTargetInterface\n * @extends InspectorInterface\n * @extends LegislatorInterface\n * @extends StateInterface\n */\nfunction MediaCollection($, sup) { $(\n  /**\n   * @override\n   */\n  function add(_media) {\n    this.addShadow(_media);\n    if (_media.id()) util.assignRef(this, _media.id(), _media);\n    return Collection.add.call(this, _media);\n  },\n  /**\n   * @override\n   */\n  function addShadow(_media) {\n    var $clone;\n\n    $clone = _media.$el.clone();\n    $clone.data(_media.$el.data());\n\n    this.$el.append($clone);\n    return this;\n  }\n);}\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * An interface for controlling a MediaElement or AudioBuffer.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n */\nfunction Audio ($) {\n\n  function accessConfig (_augment, _val) {\n    if (_val) {\n      return this[_augment] = _val;\n    } else if (typeof _augment === 'string') {\n      return this[_augment];\n    } else {\n      util.mixin(this, _augment);\n    }\n\n    return _augment;\n  }\n\n  /**\n   * Duck typed multiple inheritance.\n   */\n  util.mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\n$(\n  'type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\n  /**\n   * Allocates instance props.\n   * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n   * @arg {string} _type - The collection type.\n   */\n  function alloc (_audio, _type) {\n    var $audio, config, ctx, readyEvent, id;\n\n    $audio = $$(_audio.node || _audio);\n    config = $audio.pl();\n    ctx = pl.game.getAudioContext();\n    readyEvent = $$.Event('ready', {targetScope: this});\n\n    if (!(id = $audio.id())) $audio.id(id = util.createId());\n\n    this.type = _type || null;\n    this.fileName = util.resolveFileName($audio.attr('src'));\n    this.media = $audio[0];\n    this.gain = ctx.createGain();\n\n    this.gain.connect(ctx.destination);\n\n    $audio.data('context', this);\n\n    if (_audio.buffer) this.buffer = _audio.buffer;\n\n    Object.defineProperty(this, 'config', {\n      value: accessConfig.bind(config),\n      writeable: false\n    });\n\n    this.initialize(id, 'audio '+this.type);\n\n    $$(this.media).trigger(readyEvent);\n  },\n  /**\n   * Provides an `AudioNode` for a particular audio source.\n   * @returns\n   *  - `MediaElementSouceNode` for audio elements.\n   *  - `AudioBufferSourceNode` for an ArrayBuffer.\n   */\n  function getSource () {\n    var ctx, src;\n\n    ctx = this.audioContext || pl.game.getAudioContext();\n\n    if (ctx) {\n      if (this.buffer) {\n        src = ctx.createBufferSource();\n        src.buffer = this.buffer;\n        src.loop = this.media.loop;\n\n        return src;\n      } else {\n        try {\n          return this.activeSource || ctx.createMediaElementSource(this.media);\n        } catch(e) {\n          console.warn(e.message, this);\n        }\n      }\n    }\n\n    return null;\n  },\n  /**\n   * Get the owning collection interface for an Audio object.\n   * @returns {AudioCollection}\n   */\n  function collection () {\n    return this.$el.closest('.collection').data('context');\n  },\n  /**\n   * Get the owning manager interface for an Audio object.\n   * @returns {AudioManager}\n   */\n  function manager () {\n    return this.$el.closest('#man').data('context');\n  },\n  /**\n   * Proveds a string representation of the object type.\n   */\n  function toString () {\n    return '[audio#'+this.id()+' '+this.fileName+']';\n  },\n  function setContext (ctx) {\n    this.gain = ctx.createGain();\n    this.gain.disconnect();\n    this.gain.connect(ctx.destination);\n    this.audioContext = ctx;\n  }\n)}\n\n/**\n * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n * That way you can listen for an event at any level of the interface.\n */\nEventTargetInterface = {\n  /**\n   * The shadow node.\n   */\n  $el: null,\n  /**\n   * Define a node for the shadow DOM.\n   * @arg {string} _id - Idendifier for the node.\n   * @arg {string} _class - Classification of the node.\n   */\n  initialize: function (_id, _class) {\n    Object.defineProperty(this, '$el', {\n      value: $$('<div ' + (_id ? 'id=\"' + _id + '\"' : '') + ' ' + (_class ? 'class=\"' + _class + '\"' : '') + '>'),\n      writeable: false,\n      configureable: false,\n      enumerable: false\n    });\n\n    this.$el.data('context', this);\n  },\n  /**\n   * Get/set the id of the interface.\n   * @arg {string} _id - A valid CSS ID.\n   */\n  id: function (_id) {\n    return this.$el.id(_id);\n  },\n  /**\n   * Add an interface to the shadow DOM.\n   * @arg {Audio|AudioCollection} _obj - The object to add.\n   * @returns this\n   */\n  addShadow: function (_obj) {\n    this.$el.append(_obj.$el);\n    return this;\n  },\n  /**\n   * Provides the parent level interface.\n   * @returns {AudioManager|AudioCollection}\n   */\n  parent: function () {\n    return this.$el.parent().data('context');\n  },\n  /**\n   * Find an interface in the API tree.\n   * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n   */\n  find: function (_selector) {\n    var collection = MediaCollection.create();\n\n    this.$el.find(_selector).each(function () {\n      collection.add($$(this).data('context'));\n    });\n\n    return collection;\n  },\n  /**\n   *\n   */\n  filter: function (_selector) {\n    var collection;\n\n    if (!_selector) return this;\n\n    collection = MediaCollection.create();\n\n    this.$el.children().each(function () {\n      var $node = $$(this);\n      if ($node.is(_selector)) collection.add($node.data('context'));\n    });\n\n    return collection;\n  },\n  /**\n   * Attach events to a shadow node.\n   */\n  on: function () {\n    this.$el.on.apply(this.$el, arguments);\n    return this;\n  },\n  /**\n   * Remove events from a shadow node.\n   */\n  off: function () {\n    this.$el.off.apply(this.$el, arguments);\n    return this;\n  },\n  /**\n   * Dispatch a event from a shadow node.\n   */\n  trigger: function () {\n    this.$el.trigger.apply(this.$el, arguments);\n    return this;\n  }\n};\n/**\n * Interface for inspecting an API level (i.e. manager or collection).\n */\nInspectorInterface = {\n  playing: function (_filterSelector) {\n    var playing = this.find('.PLAYING').filter(_filterSelector);\n    return !!playing.length && playing;\n  },\n  /**\n   * Query a collection for ownership of an audio object.\n   * @arg {string|Audio|HTMLAudioElement} The validating reference.\n   * @returns {boolean}\n   */\n  has: function (_query) {\n    if (this.background) {\n      return ['background', 'voiceOver', 'sfx'].some(function (_name) {\n        return this[_name].has(_query);\n      }.bind(this));\n    }\n\n    if (this[_query]) return true;\n\n    return this.some(function (_audio) {\n      return _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n    });\n  },\n};\n\nLegislatorInterface = {\n  rule: function (_selector, _event, _handler) {\n    var handler, args;\n\n    handler = [typeof _event, typeof _handler].indexOf('function');\n    args = util.toArray(arguments).slice(1);\n\n    if (typeof _event === 'function') _event = 'play pause stopped ended';\n\n    this.on(_event, function (_e) {\n      if (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n    }.bind(this));\n  }\n};\n\nStateInterface = {\n  state: function () {\n    return this.$el.state.apply(this.$el, arguments);\n  },\n\n  addState: function (_state) {\n    return this.$el.addClass(_state.toUpperCase());\n  },\n\n  removeState: function (_state) {\n    return this.$el.removeClass(_state.toUpperCase());\n  }\n};\n\n/**\n * Interface for methods involving audio control for any API level.\n */\nPlayableInterface = {\n  proxyEvent: function(_event) {\n    var theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n    \n    // proxy event to shadow DOM only when it has an active source.\n    if (this.activeSource) {\n      if (_event.type === 'ended') {\n        this.removeState('PLAYING');\n        this.activeSource = null;\n      }\n\n      this.trigger(theEvent);\n    }\n\n    _event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n  },\n  handler: function(_event) {\n    if (_event.type === 'ended' && _event.activeSource) {\n      _event.activeSource.disconnect();\n    }\n    this.proxyEvent.call(this,_event);\n  },\n  simEnd: function() {\n    if (this.activeSource) {\n      console.warn('Native `ended` failed to fire, simulating...');\n      this.handler({target: this.activeSource, type: 'ended'});\n    }\n  },\n  playSource: function() {\n    var time;\n    if (this.buffer) {\n      this.activeSource.start(0);\n      this.startTime = new Date();\n\n      if (!this.activeSource.loop) {\n        time = Math.ceil(this.buffer.duration * 1000) + 250;\n        this.timeout = setTimeout(this.simEnd.bind(this), time);\n      }\n    } else {\n      this.media.play();\n    }\n\n    this.delayID = null;\n  },\n  /**\n   * Play an audio object.\n   */\n  play: function (_selector) {\n    var ctx, src, dest, delay, shouldPlay;\n\n\n    function response (_val) {\n      shouldPlay = _val;\n    }\n\n    ctx = this.audioContext || pl.game.getAudioContext();\n    shouldPlay = true;\n\n    /*\n     * I'm commenting out this line because having it there\n     * prevents new audio from starting while the game is out of focus\n     * which makes certain screens impossible to complete.\n     * Giving the game the ability to pause will remove the need for\n     * this line of code, anyway.\n     */\n    // if (ctx.state === 'suspended') return false;\n\n    if (this.background) return this.background.play();\n    if (this.length != null) {\n      if (_selector) {\n        if (this[_selector]) return this[_selector].play();\n\n        return this.find(_selector).play();\n      }\n      return this[0] && this[0].play();\n    }\n\n    if (!(src = this.getSource())) return false;\n\n    src.connect(this.gain);\n    src.addEventListener('ended', this.handler.bind(this), false);\n\n    this.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\n    if (shouldPlay) {\n      this.addState('PLAYING');\n      this.activeSource = src;\n\n      if (delay = this.config('delay')) {\n        this.delayID = setTimeout(this.playSource.bind(this), util.toMillisec(delay));\n      } else {\n        this.playSource.call(this);\n      }\n\n      this.handler({target: src, type: 'play'});\n    }\n\n    return this;\n  },\n  /**\n   * Pause an audio object.\n   */\n  pause: function () {\n    if (this.buffer) {\n      this.pauseTime = new Date();\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n\n    return this;\n  },\n  /**\n   * Resume an audio object.\n   */\n  resume: function () {\n    var time;\n    if (this.buffer) {\n      if (!this.activeSource.loop) {\n        time = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n        this.timeout = setTimeout(this.simEnd.bind(this), time);\n      }\n    }\n\n    return this;\n  },\n  /**\n   * Stop an audio object.\n   */\n  stop: function (_filterSelector) {\n    var stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\n    if (this.background) return this.background.stop(_filterSelector);\n    if (this.length != null) {\n      if (_filterSelector === '@ALL') {\n        this.forEach(function (_audio) {\n          _audio.stop();\n        });\n      } else {\n        return this[0] && this[0].stop();\n      }\n    }\n\n    if (!this.activeSource) return false;\n\n    if (this.buffer) {\n      if (!this.delayID) this.activeSource.stop();\n    } else {\n      this.media.pause();\n      this.media.currentTime = 0;\n    }\n\n    if (this.delayID) {\n      clearTimeout(this.delayID);\n      this.delayID = null;\n    }\n    \n    this.activeSource = null;\n\n    this.removeState('PLAYING');\n    this.trigger(stopEvent);\n\n    return this;\n  },\n  /**\n   * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n   */\n  volume: function (_level, _filterSelector) {\n    if (this.background) return this.background.volume(_level);\n    if (this.length != null) {\n      if (_filterSelector === '@ALL') {\n        this.forEach(function (_audio) {\n          _audio.volume(_level);\n        });\n      } else {\n        return this[0] && this[0].volume(_level);\n      }\n    }\n\n    this.gain.gain.value = _level;\n  },\n  startTime: 0,\n  pauseTime: 0,\n};\n\nexport default type(MediaManager, AudioManager, AudioCollection, Audio);\n\nAudioCollection.extend(MediaCollection);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/AudioManager.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/promise.js\n ** module id = 43\n ** module chunks = 0\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/promise.js\n ** module id = 44\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.string.iterator.js\n ** module id = 46\n ** module chunks = 0\n **/","var toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.string-at.js\n ** module id = 47\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-integer.js\n ** module id = 48\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-define.js\n ** module id = 49\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.library.js\n ** module id = 50\n ** module chunks = 0\n **/","module.exports = require('./$.hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine.js\n ** module id = 51\n ** module chunks = 0\n **/","var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.hide.js\n ** module id = 52\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.property-desc.js\n ** module id = 53\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.descriptors.js\n ** module id = 54\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.has.js\n ** module id = 55\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iterators.js\n ** module id = 56\n ** module chunks = 0\n **/","'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-create.js\n ** module id = 57\n ** module chunks = 0\n **/","var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-to-string-tag.js\n ** module id = 58\n ** module chunks = 0\n **/","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.wks.js\n ** module id = 59\n ** module chunks = 0\n **/","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.shared.js\n ** module id = 60\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.uid.js\n ** module id = 61\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar Iterators = require('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/web.dom.iterable.js\n ** module id = 62\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.array.iterator.js\n ** module id = 63\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.add-to-unscopables.js\n ** module id = 64\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-step.js\n ** module id = 65\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-iobject.js\n ** module id = 66\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iobject.js\n ** module id = 67\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.cof.js\n ** module id = 68\n ** module chunks = 0\n **/","'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(function(){});\n  if(sub)test.constructor = Object;\n  return P.resolve(test) === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.promise.js\n ** module id = 69\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.classof.js\n ** module id = 70\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-object.js\n ** module id = 71\n ** module chunks = 0\n **/","var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.an-object.js\n ** module id = 72\n ** module chunks = 0\n **/","module.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.strict-new.js\n ** module id = 73\n ** module chunks = 0\n **/","var ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.for-of.js\n ** module id = 74\n ** module chunks = 0\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-call.js\n ** module id = 75\n ** module chunks = 0\n **/","// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-array-iter.js\n ** module id = 76\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-length.js\n ** module id = 77\n ** module chunks = 0\n **/","var classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 78\n ** module chunks = 0\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-proto.js\n ** module id = 79\n ** module chunks = 0\n **/","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.same-value.js\n ** module id = 80\n ** module chunks = 0\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.species-constructor.js\n ** module id = 81\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.microtask.js\n ** module id = 82\n ** module chunks = 0\n **/","var ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.task.js\n ** module id = 83\n ** module chunks = 0\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.invoke.js\n ** module id = 84\n ** module chunks = 0\n **/","module.exports = require('./$.global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.html.js\n ** module id = 85\n ** module chunks = 0\n **/","var isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.dom-create.js\n ** module id = 86\n ** module chunks = 0\n **/","var redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine-all.js\n ** module id = 87\n ** module chunks = 0\n **/","'use strict';\nvar core        = require('./$.core')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-species.js\n ** module id = 88\n ** module chunks = 0\n **/","var ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ safe = true; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-detect.js\n ** module id = 89\n ** module chunks = 0\n **/","'use strict';\n/**\n * Defines an Object type using a named constructor function.\n * @module\n */\n\n/**\n * Constructs an object with methods bound to a context.\n * @arg {object} _from - Object with methods to bind.\n * @arg {object} _to - Context which methtods should be bound to.\n */\nfunction Bindings(_from, _to) {\n  var method;\n\n  // pull all methods from the prototype chain.\n  for (method in _from) {\n    if (typeof _from[method] !== 'function') continue;\n    this[method] = _from[method].bind(_to);\n  }\n}\n\n/**\n * Takes an itterable object and convert it into an Array.\n * @arg {object} _itterable\n * @returns {array}\n */\nfunction toArray(_itterable) {\n  return [].map.call(_itterable, function (m) { return m; });\n}\n\n/**\n * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n * @arg {function} _constructor... - any number of constructor functions.\n * @returns The constructor or an object containing all the defined types.\n */\nexport default function type() {\n  var defs, module;\n\n  /**\n   * Constructs an interface which is accesed through the constructors arguments.\n   * These arguments are parsed from the function string and collected into an array.\n   * @arg {function} _constructor\n   * @returns {array} The collection of API functions requested by the constructor.\n   */\n  function createApi(_constructor) {\n    var args, api;\n\n    // Matches the names of the arguments defined in the source of the function.\n    // [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n    // It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n    // NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n    args = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/) || ['', ''])[1].split(/\\s*,\\s*/);\n    api = {\n      /**\n       * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n       *\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       *\n       * @example\n       * Car.extend(function Ford (proto) {\n       *     this.drive = function () {\n       *         proto(this, 'drive', arguments);\n       *         // do some opps.\n       *     };\n       * });\n       */\n      proto: function (_obj, _name, _args) {\n        var proto, method;\n\n        proto = Object.getPrototypeOf(this || _obj);\n        method = proto[_name];\n\n        if (typeof _obj[_name] !== 'function') {\n          throw new TypeError('Member ' + _name + ' is not a function.');\n        }\n\n        if (method) {\n          // Does _obj's prototype have the method and it's not the same reference as _obj.\n          if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n            return _args ? method.apply(_obj, _args) : method.bind(_obj);\n          }\n\n          // Otherwise, walk the prototype chain to find the prototype that has the parent method.\n          while (proto) {\n            if (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n              return _args ? method.apply(_obj, _args) : method.bind(_obj);\n            }\n\n            proto = Object.getPrototypeOf(proto);\n          }\n        } else {\n          return new Bindings(proto, _obj);\n        }\n      },\n      /**\n       * Invokes the specified method which lives on the object type's prototype.\n       * If your instance overrides the object types method, or your many prototype\n       * levels away from the base prototype, this lets you track back to the original.\n       *\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       */\n      base: function (_obj, _name, _args) {\n        var proto, method;\n\n        proto = _constructor.prototype;\n        method = proto[_name];\n\n        if (typeof method !== 'function') {\n          throw new TypeError('Member ' + _name + ' is not a function.');\n        }\n\n        if (method) {\n          return _args ? method.apply(_obj, _args) : method.bind(_obj);\n        } else {\n          return new Bindings(proto, _obj);\n        }\n      },\n      /**\n       * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n       * @arg {object} _obj - The context which to find the parent function.\n       * @arg {string} _name - The method name.\n       * @arg {array} _args - A collection of arguments to invoke the method with\n       * @returns {*} Whatever the caller returns.\n       */\n      sup: function (_obj, _name, _args) {\n        return api.proto.apply(_constructor.prototype, arguments);\n      },\n      /**\n       * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n       * @arg {object} _obj - The context which to define members.\n       * @arg {string} _name - The member name.\n       * @arg {*} _value - The value.\n       * @returns api\n       */\n      constant: function (_obj, _name, _value) {\n        Object.defineProperty(_obj, _name, {\n          value: _value,\n          configureable: false,\n          writeable: false\n        });\n\n        return api;\n      },\n      /**\n       * Defines members on the constructor.\n       * @function static\n       * @overload\n       * @arg {string} _name - The member name.\n       * @arg {*} _value - The value.\n       * @returns api\n       */\n\n      /**\n       * Defines members on the constructor.\n       * @arg {object} _def - An object with members to mixin.\n       * @returns api\n       */\n      static: function (_name_def, _value) {\n        var member, _name, _def;\n\n        _value ? _name = _name_def : _def = _name_def;\n\n        if (_def) {\n          for (member in _def) {\n            if (!_def.hasOwnProperty(member)) continue;\n            _constructor[member] = _def[member];\n          }\n        }\n\n        if (_name) {\n          _constructor[_name] = _value;\n        }\n\n        return api;\n      },\n      /**\n       * A pretty way of define the interface of your object type.\n       *\n       * You may pass any number of arguments as functions or strings.\n       *\n       * **Example**\n       * ```javascript\n       * function Car ($) {$(\n       *     // Defines a member assigned to `null`.\n       *     'name',\n       *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n       *     'engineType = \"standard\", speed = 0',\n       *\n       *     // Define instance members.\n       *     function alloc (_name) {\n       *         this.name = _name;\n       *     },\n       *\n       *     function drive () {\n       *         this.speed += 1;\n       *     }\n       * )}\n       * ```\n       *\n       * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n       * @arg {string|function} _def - A string of property definitions or a named function.\n       * @todo Support property assignment in alloc. Micah: 2/24/2016\n       */\n      $: function () {\n        var args = toArray(arguments);\n\n        args.forEach(function (_member) {\n          var memberType, props, key;\n\n          memberType = typeof _member;\n\n          switch (memberType) {\n          case 'string':\n            props = _member.split(/\\s*,\\s*/);\n\n            if (props) {\n                props.forEach(function (_def) {\n                  var prop, val;\n\n                  prop = _def.split(/\\s*[:=]\\s*/);\n                  try { val = JSON.parse(prop[1]); } catch(e) {}\n                  _constructor.prototype[prop[0]] = (typeof prop[1] !== 'undefined') ? val || prop[1] : null;\n                });\n              }\n            break;\n\n          case 'object':\n            for (key in _member) {\n                if (!_member.hasOwnProperty(key)) continue;\n                _constructor.prototype[key] = _member[key];\n              }\n            break;\n\n          case 'function':\n            if (!_member.name) throw TypeError('Member must be a named function.');\n            _constructor.prototype[_member.name] = _member;\n            break;\n          }\n        });\n\n        return api;\n      }\n    };\n\n    return args.map(function (_call) {\n      return api[_call] || module[_call];\n    });\n  }\n\n  defs = toArray(arguments);\n  module = (!this) ? {} : this;\n\n  defs.forEach(function (_constructor) {\n    var api;\n\n    if (typeof _constructor === 'object') {\n      var Super, keys = Object.keys(_constructor);\n\n      if (keys.length === 1 && module[keys[0]]) {\n        Super = module[keys[0]];\n        return Super.extend.call(module, _constructor[keys[0]]);\n      }\n    }\n\n    api = createApi(_constructor);\n\n    /**\n     * Creates a new instance of the constructor prototype.\n     * This also invokes the `alloc()` on the instance so you can define instance props.\n     * @arg {*} ... - Any number of arguments for `alloc()`.\n     * @returns instance\n     */\n    _constructor.create = function () {\n      var instance = Object.create(_constructor.prototype);\n      if (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n      return instance;\n    };\n\n    /**\n     * Extends the provided constructor prototype.\n     * @arg {function} _definition - Constructor for the object type.\n     * @returns _constructor\n     */\n    _constructor.extend = function (_definition) {\n      _definition.prototype = Object.create(_constructor.prototype, {\n        constructor: {\n          value: _definition,\n          enumerable: false,\n          writeable: false,\n          configureable: false\n        }\n      });\n\n      return type.call(this === _constructor ? null : this, _definition);\n    };\n\n    _constructor.apply(_constructor.prototype, api);\n\n    module[_constructor.name] = _constructor;\n  });\n\n  return defs.length > 1 ? module : defs[0];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/type.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 91\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-property.js\n ** module id = 92\n ** module chunks = 0\n **/","/**\n * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n *\n * @module\n */\nimport util from 'util';\nimport GlobalScope from 'types/GlobalScope';\nimport Collection from 'types/Collection';\nimport { Point, Size } from 'types/Dimensions';\nimport Queue from 'types/Queue';\n\nfunction invokeResponsibilities(_scope, _event) {\n  if (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n    _scope.responsibilities.forEach(function (_record) {\n      if (_record.name === _event.name) {\n\n        // console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n        _record.ability.call(_scope, _event);\n      }\n    });\n  }\n}\n\n/**\n * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n * <style>\n * .tag {\n *   padding: 1px 4px;\n *   border-radius: 4px;\n *\n *   color: #fff;\n *   background-color: #aaa;\n * }\n *\n * .tag.behavior {\n *   background-color: #0ba;\n * }\n *\n * .tag.state {\n *   background-color: #ba0;\n * }\n *\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n *\n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n * @extends GlobalScope\n */\nvar Entity = GlobalScope.extend(function () {\n\n  function resolveTarget(_target) {\n\n    switch (typeof _target) {\n    case 'string': return this.findOwn(_target);\n    case 'object':\n      if (_target.jquery) return _target;\n      if (Entity.isPrototypeOf(_target)) return _target;\n      if (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n    }\n\n    return this;\n  }\n\n  function ResponsibilityRecord(_name, _ability) {\n    this.name = _name;\n    this.ability = _ability;\n  }\n\n  function dragGreeter(_event) {\n    switch (_event.type) {\n    case 'drag-start':\n      this.grab(_event.state);\n      break;\n\n    case 'drag-move':\n      this.dragging(_event.state);\n      break;\n\n    case 'drag-end':\n      this.release(_event.state);\n      break;\n    }\n  }\n\n  function attachDragEvents() {\n    if (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n      this.on('drag-start drag-move drag-end', dragGreeter);\n    }\n  }\n\n  this.baseType = 'TYPE_ENTITY';\n  this.STATE = {\n    PLAYING: 'PLAYING',\n    BACKGROUND: 'BACKGROUND',\n    VOICE_OVER: 'VOICE-OVER',\n    SFX: 'SFX'\n  };\n\n  this.timeoutID = null;\n  this.intervalID = null;\n  this.responsibilities = null;\n  this.isComplete = false;\n  this.shouldInheritAbilities = true;\n  this.frameHandlers = null;\n  this.frameRate = 60; // 60fps\n  this.draggables = null;\n  this.requiredQueue = null;\n  this.bgImageCollection = null;\n\n  this.handleProperty({\n    size: function (_node, _name, _value) {\n      var size;\n\n      if (this.is(_node)) {\n        size = _value.split(/\\s*[x,]\\s*/);\n        this.css({\n          width: size[0],\n          height: size[1] || size[0]\n        });\n      }\n    },\n\n    position: function (_node, _name, _value) {\n      var size;\n\n      if (this.is(_node)) {\n        size = _value.split(/\\s*[x,]\\s*/);\n        this.css({\n          top: size[1] || size[0],\n          left: size[0]\n        });\n      }\n    },\n\n    draggable: function (_node, _name, _value) {\n      if (!this.hasOwnProperty('draggables')) {\n        this.draggables = $();\n      }\n\n      this.draggables.push(_node);\n    },\n\n    bg: function (_node, _name, _value) {\n      var img = new Image();\n\n      if (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\n      if (this.isMemberSafe('bgImageCollection')) {\n        img.src = _value;\n        this.bgImageCollection.push(img);\n        $(_node).css('background-image', 'url(' + _value + ')');\n      }\n    }\n  });\n\n  this.__init = function (_event) {\n    if (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n      this.watchAssets(this.bgImageCollection);\n    }\n    attachDragEvents.call(this);\n\n    return this.proto();\n  };\n\n  this.size = function () {\n    var size;\n\n    if (arguments.length) {\n      size = Size.create(arguments);\n      this.css(size);\n      return size;\n    }\n\n    return Size.create().set(this.width(), this.height());\n  };\n\n  this.propagateBehavior = function (_event) {\n    var ids;\n\n    ids = [];\n\n    this.findOwn('.pl-scope').each(function (_index, _node) {\n      var $node = $(_node);\n      ids.push($node.id() || $node.address());\n    });\n\n    if (this.hasOwnProperty('entities') && this.entities.length) {\n      // console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\n      this.entities.forEach(function (_scope) {\n        invokeResponsibilities(_scope, _event);\n        _scope.propagateBehavior(_event);\n      });\n    }\n\n    return this;\n  };\n\n  this.require = function (_entity) {\n    if (!this.hasOwnProperty('requiredQueue')) {\n      this.requiredQueue = Queue.create();\n      this.requiredQueue.on('complete', this.bind(function () {\n        this.log('entity complete');\n        this.complete();\n      }));\n\n      this.respond('complete', function (_event) {\n        if (!this.has(_event.target)) return;\n        if (_event.targetScope === this) return;\n\n        this.requiredQueue.ready(_event.behaviorTarget);\n      });\n    }\n\n    this.requiredQueue.add(_entity);\n    this.gate();\n\n    return this;\n  };\n\n  this.behavior = function (_name, _behavior) {\n    _behavior.method = this[_name] = function () {\n      var behaviorEvent, result;\n\n      behaviorEvent = {\n        name: _name,\n        message: '',\n        targetScope: this,\n        behaviorTarget: this\n      };\n\n      result = _behavior.apply(this, arguments);\n\n      if (typeof result === 'object') {\n        behaviorEvent = util.mixin(behaviorEvent, result);\n      }\n\n      if (result !== false) {\n        this.trigger($.Event('behavior', behaviorEvent));\n      }\n\n      return this;\n    };\n\n    return this;\n  };\n\n  this.respond = function () {\n    var name, ability, parentScope, abilities, protoAbilities;\n\n    if (!this.hasOwnProperty('responsibilities')) {\n      abilities = Collection.create();\n      protoAbilities = this.provideAblilityPototype();\n\n      if (this.shouldInheritAbilities && (protoAbilities && protoAbilities.responsibilities)) {\n        abilities.push.apply(abilities, protoAbilities.responsibilities);\n      }\n\n      this.responsibilities = abilities;\n    }\n\n    if (arguments.length === 1) {\n      switch (typeof arguments[0]) {\n      case 'string': name = arguments[0]; break;\n\n      case 'function':\n      case 'object': ability = arguments[0]; break;\n      }\n    }\n\n    else {\n      name = arguments[0];\n      ability = arguments[1];\n    }\n\n    switch (typeof ability) {\n    case 'object':\n      for (name in ability) {\n          if (!ability.hasOwnProperty(name)) continue;\n\n          this.respond(name, ability[name]);\n        }\n      break;\n\n    case 'function':\n      this.responsibilities.add(new ResponsibilityRecord(name, ability));\n      break;\n    }\n\n    return this;\n  };\n\n  this.delay = function (_time, _cb) {\n    var time = util.toMillisec(_time);\n\n    util.assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\n    return this;\n  };\n\n  this.repeat = function (_time, _cb) {\n    var time = util.toMillisec(_time);\n\n    util.assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\n    return this;\n  };\n\n  this.kill = function (_timer) {\n    var id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\n    if (typeof id === 'number') {\n      (_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n      this[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n    }\n\n    else if (id) {\n      id.forEach(function (_id) {\n        (_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n      });\n\n      _timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n    }\n\n    return this;\n  };\n\n  this.eachFrame = function (_handler, _on) {\n    var binder, frame, lastTime, rate, frames;\n\n    rate = this.frameRate || 1000;\n    frames = 0;\n    lastTime = 0;\n\n    if (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n      frame = function (_time) {\n        var i, handler;\n\n        if (rate) {\n          if (_time - lastTime >= (1000 / rate)) {\n            for (i = 0; handler = this.frameHandlers[i]; i += 1) {\n              handler.call(this, _time, Math.round(1000 / (_time - lastTime)), rate);\n            }\n\n            if (frames === rate) frames = 0;\n\n            frames += 1;\n            lastTime = _time;\n          }\n        }\n\n        if (this.frameHandlers.length) {\n          window.requestAnimationFrame(binder);\n        }\n      };\n\n      binder = this.bind(frame);\n\n      // allows methods passed as _handler's to\n      // be able to trace back for proto() callbacks.\n      frame.method = this.eachFrame;\n\n      this.frameHandlers = Collection.create();\n      window.requestAnimationFrame(binder);\n    }\n\n    if (_on !== false) {\n      this.frameHandlers.add(_handler);\n    }\n\n    else {\n      this.frameHandlers.remove(_handler);\n    }\n\n    return this;\n  };\n\n  this.state = function (_flag, _definition, _imp) {\n    var flag, tester, setter, getter, STATE, def, opperations, names;\n\n    if (!_definition) {\n      return this.proto(_flag);\n    }\n\n    def = _definition.split(/\\s+/);\n    names = _flag.split(/\\s+/);\n    opperations = [];\n\n    def.forEach(this.bind(function (_opp) {\n      var method, flag;\n\n      method = (_opp.slice(0, 1) === '+') ? 'addClass' : 'removeClass';\n\n      opperations.push({\n        method: method,\n        flag: _opp.slice(1)\n      });\n\n      if (method === 'addClass') {\n        flag = _opp.slice(1);\n        STATE = util.transformId(flag);\n        this.STATE[STATE] = flag;\n      }\n    }));\n\n    setter = names[0];\n    tester = names[1];\n\n    this[setter] = function (_target) {\n      var target, uiStateEvent, oppsPerformed;\n\n      target = resolveTarget.call(this, _target);\n      uiStateEvent = $.Event('ui-' + setter, {\n        target: target.jquery ? target[0] : target,\n        targetScope: this\n      });\n      oppsPerformed = 0;\n\n      if (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n        return !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n      }\n\n      if (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\n      opperations.forEach(function (_record) {\n        // If we are adding or removing a class, test if the target already has/removed it.\n        // If so, then bump \"oppsPerformed\".\n        oppsPerformed += Number(target.hasClass(_record.flag) === !~_record.method.indexOf('add'));\n        target[_record.method](_record.flag);\n      });\n\n      if (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\n\n      if (oppsPerformed) {\n        this.trigger(uiStateEvent);\n        return target;\n      }\n\n      return false;\n    };\n\n    if (tester) {\n      getter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\n      this[tester] = function (_target) {\n        var target;\n\n        target = resolveTarget.call(this, _target);\n\n        return target.hasClass(this.STATE[STATE]);\n      };\n\n      this[getter] = function () {\n        return this.findOwn('.' + this.STATE[STATE]);\n      };\n    }\n\n    return this;\n  };\n\n  this.provideBehaviorEventScope = function () {\n    return this;\n  };\n\n  this.provideAblilityPototype = function () {\n    var owner;\n\n    owner = util.getOwner(this, this.baseType);\n\n    return !!owner && owner.object;\n  };\n\n  this.completed = function () {\n    return this.game.demoMode || (this.hasOwnProperty('isComplete') && this.isComplete) || !this.requiredQueue || (this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0);\n  };\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n   * @function module:types/Entity~Entity#complete\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   */\n  this.behavior('complete', function () {\n    if (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\n    this.isComplete = true;\n    this.addClass('COMPLETE');\n\n    return {\n      behaviorTarget: this\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a drggable has been grabbed for dragging.\n   * @function module:types/Entity~Entity#grab\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('grab', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a draggable as being dragged.\n   * @function module:types/Entity~Entity#dragging\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('dragging', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag behavior\">Behavior</span>\n   * Reports a drggable as released or droped.\n   * @function module:types/Entity~Entity#release\n   * @arg {object} _state - An object containing the state of a draggable.\n   * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n   *\n   * @see module:play~pl.game.manager.draggable for more info on draggable state.\n   */\n  this.behavior('release', function (_state) {\n    return {\n      state: _state,\n      behaviorTarget: _state.$draggable\n    };\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#open\n   * @fires Entity#ui-open\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `OPEN` class name.\n   * @function module:types/Entity~Entity#opened\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Open'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `OPEN` class name.\n   * @function module:types/Entity~Entity#getOpened\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('open opened', '+OPEN -LEAVE');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#close\n   * @fires Entity#ui-close\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('close', '-OPEN');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#leave\n   * @fires Entity#ui-leave\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `LEAVE` class name.\n   * @function module:types/Entity~Entity#left\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Leave'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `LEAVE` class name.\n   * @function module:types/Entity~Entity#getLeft\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('leave left', '+LEAVE', {\n    willSet: function (_target) {\n      this.close(_target);\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#enable\n   * @fires Entity#ui-enable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `ENABLED` class name.\n   * @function module:types/Entity~Entity#enabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Enabled'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `ENABLED` class name.\n   * @function module:types/Entity~Entity#getEnabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('enable enabled', '+ENABLED -DISABLED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#disable\n   * @fires Entity#ui-disable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `DISABLED` class name.\n   * @function module:types/Entity~Entity#disabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Disabled'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `DISABLED` class name.\n   * @function module:types/Entity~Entity#getDisabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('disable disabled', '+DISABLED -ENABLED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#select\n   * @fires Entity#ui-select\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `SELECTED` class name.\n   * @function module:types/Entity~Entity#selected\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Selected'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `SELECTED` class name.\n   * @function module:types/Entity~Entity#getDisabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('select selected', '+SELECTED', {\n    willSet: function (_target) {\n      var target, $parent;\n\n      target = resolveTarget.call(this, _target);\n      $parent = target.parent();\n\n      $parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n        this.deselect(_node);\n      }));\n      $parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n        this.unhighlight(_node);\n      }));\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#deselect\n   * @fires Entity#ui-deselect\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('deselect', '-SELECTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#highlight\n   * @fires Entity#ui-highlight\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n   * @function module:types/Entity~Entity#highlighted\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Highlighted'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `HIGHLIGHTED` class name.\n   * @function module:types/Entity~Entity#getHighlighted\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('highlight highlighted', '+HIGHLIGHTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#unhighlight\n   * @fires Entity#ui-unhighlight\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('unhighlight', '-HIGHLIGHTED');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n   * @function module:types/Entity~Entity#draggable\n   * @fires Entity#ui-draggable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n   * @function module:types/Entity~Entity#dragEnabled\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Draggable'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `DRAGGABLE` class name.\n   * @function module:types/Entity~Entity#getDragEnabled\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('draggable dragEnabled', '+DRAGGABLE', {\n    didSet: function (_target) {\n      this.translate( resolveTarget.call(this, _target) );\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#undraggable\n   * @fires Entity#ui-undraggable\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('undraggable', '-DRAGGABLE');\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n   * @function module:types/Entity~Entity#translate\n   * @fires Entity#ui-translate\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n   * @function module:types/Entity~Entity#translate\n   * @fires Entity#ui-translate\n   * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n   * @returns `this`\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n   * @function module:types/Entity~Entity#translated\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns {Boolean} Translate'ness.\n   */\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Provides the elements with the `TRANSLATED` class name.\n   * @function module:types/Entity~Entity#getTranslated\n   * @returns {jQuery} jQuery collection of matched nodes.\n   * @todo Return scope if available.\n   */\n  this.state('translate translated', '+TRANSLATED', {\n    willSet: function (_target_point, _point) {\n      var point, target;\n\n      target = resolveTarget.call(this, _target_point);\n      point = (!~[_target_point.x, _target_point.y].indexOf(undefined)) ? _target_point : _point;\n\n      if (point) {\n        target.css('transform', 'translateX(' + point.x + 'px) translateY(' + point.y + 'px)');\n      }\n    }\n  });\n\n  /**\n   * <span class=\"tag state\">State</span>\n   * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n   * @function module:types/Entity~Entity#untranslate\n   * @fires Entity#ui-untranslate\n   * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n   * @returns `this`\n   */\n  this.state('untranslate', '-TRANSLATED', {\n    willSet: function () {\n      this.css('transform', 'none');\n    }\n  });\n\n  this.state('gate gated', '+GATED');\n\n});\n\nexport default { Entity, invokeResponsibilities };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Entity.js\n **/","/**\n*  Screen\n*  @desc Contains...\n*  @proto Entity\n*/\n\nimport { Entity, invokeResponsibilities } from 'types/Entity';\n\nvar Screen = Entity.extend(function () {\n\n  function attachBehaviorEvent () {\n    this.on('behavior', function (_event) {\n      // console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\n      if (this !== _event.targetScope) {\n        invokeResponsibilities(this,  _event);\n      }\n      \n      this.propagateBehavior(_event);\n    });\n  }\n  \n  this.baseType = 'TYPE_SCREEN';\n  this.game = null;\n  this.screen = null;\n\n  this.__init = function () {\n    this.proto();\n\n    if (this.is(pl.game.config('screenSelector'))) {\n      attachBehaviorEvent.call(this);\n    }\n  };\n\n  this.start = function () {\n    this.startAudio();\n    return this;\n  };\n\n  this.stop = function () {\n    this.stopAudio();\n    return this;\n  };\n\n  this.pause = function() {\n    this.pauseMedia();\n    if(this.hasOwnProperty('entities') && this.entities) {\n      this.entities.forEach(function(entity) {\n        if(typeof entity.pause === 'function') entity.pause();\n      });\n    }\n    return this;\n  };\n\n  this.resume = function() {\n    this.resumeMedia();\n    if(this.hasOwnProperty('entities') && this.entities) {\n      this.entities.forEach(function(entity) {\n        if(typeof entity.resume === 'function') entity.resume();\n      });\n    }\n    return this;\n  };\n\n  this.startAudio = function () {\n    if (!this.audio) return;\n    this.audio.background.play();\n    this.audio.voiceOver.play();\n  };\n\n  this.stopAudio = function () {\n    if (!this.audio) return;\n    this.audio.voiceOver.stop('@ALL');\n  };\n\n  this.pauseMedia = function() {\n    if(!this.currentMedia) return;\n    for(var media in this.currentMedia) { \n      if(this.currentMedia.hasOwnProperty(media)) {\n        if(this.currentMedia[media]) this.currentMedia[media].pause();\n      }\n    }\n  };\n\n  this.resumeMedia = function() {\n    if(!this.currentMedia) return;\n    for(var media in this.currentMedia) { \n      if(this.currentMedia.hasOwnProperty(media)) {\n        if(this.currentMedia[media]) this.currentMedia[media].resume();\n      }\n    }\n  };\n\n  this.index = function () {\n    if (this === this.screen) return this.game.screens.indexOf(this);\n    return this.$els.index();\n  };\n\n  this.next = function () {\n    if (!this.completed()) return false;\n    return this.game.screens[this.screen.index()+1];\n  };\n\n  this.prev = function () {\n    return this.game.screens[this.screen.index()-1];\n  };\n\n  this.quit = function () {\n    this.game.quit.open();\n  };\n\n  this.nextSib = function () {\n    return $.fn.next.apply(this.$els, arguments);\n  };\n\n  this.prevSib = function () {\n    return $.fn.prev.apply(this.$els, arguments);\n  };\n\n  this.isLast = function () {\n    return this.game.screens.indexOf(this.screen) === this.game.screens.length-1;\n  };\n\n});\n\nexport default Screen;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Screen.js\n **/","/**\n * Node scope for the top level game node.\n */\nimport util from 'util';\nimport game from 'play.game';\nimport GlobalScope from 'types/GlobalScope';\nimport Screen from 'types/Screen';\nimport Collection from 'types/Collection';\nimport { createEntity } from 'types/Scope';\nimport { Size } from 'types/Dimensions';\nimport { MediaManager } from 'types/AudioManager';\n\nvar Game = GlobalScope.extend(function () {\n\n  var Viewport, screenPrototype, platformEventHandler;\n\n  /**\n   * Detects the device and adds the appropriate state classes.\n   */\n  function detechDevice() {\n    var deviceClasses = \"\";\n\n    if(iOS()) deviceClasses += \"iOS \";\n    if(mobileOrTablet()) deviceClasses += \"MOBILE \";\n\n    this.addClass(deviceClasses);\n  }\n\n  function iOS() {\n    var iDevices = [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod'\n    ];\n\n    if (!!navigator.platform) {\n      while (iDevices.length) {\n        if (navigator.platform === iDevices.pop()){ return true; }\n      }\n    }\n\n    return false;\n  }\n\n  function mobileOrTablet() {\n    var check = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n    return check;\n  }\n\n  /**\n   * Scales the game view to fill the browser window.\n   */\n  function scaleGame () {\n    var vpSize, gameDimensions, width, height, zoom;\n\n    vpSize = this.viewport.size();\n    gameDimensions = game.config('dimensions');\n    width = gameDimensions.width || this.width();\n    height = Math.round(gameDimensions.width / gameDimensions.ratio);\n    zoom = this.viewport.width / width;\n\n    if (Math.round(height * zoom) > this.viewport.height) {\n      zoom = (this.viewport.height / height).toPrecision(4);\n    }\n\n    util.mixin(this.node().style, {\n      width: width+'px',\n      zoom: zoom\n    });\n\n    if (!this.css('zoom')) {\n      this.css({\n        transform: 'scale('+zoom+')',\n        transformOrigin: (zoom < 1 ? '0px' : '50%')+' 0px 0px',\n        height: this.viewport.height / zoom\n      });\n    }\n\n    this.zoom = zoom;\n  }\n\n  function demoMode (_set) {\n    this.demoMode = _set != null ? _set : !this.demoMode;\n    this[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\n    console.info(this.id(), 'is now '+(this.demoMode ? 'in' : 'out of')+' Demo Mode.');\n  }\n\n  function collectVideos () {\n    this.find('video').each(function (_index, _node) {\n      this.media.video.add(_node);\n      \n      _node.onplay = function () {\n        var playing = this.media.playing('.background, .voiceOver');\n        if (playing) playing.stop('@ALL');\n        this.log('video play', playing);\n      }.bind(this);\n    }.bind(this));\n  }\n\n  screenPrototype = Screen;\n  platformEventHandler = new (function () {\n    \n    this.invoke = function (_event, _ctx) {\n      if (typeof this[_event.name] === 'function') {\n        this[_event.name].call(_ctx, _event);\n      }\n    };\n\n    this['toggle-demo-mode'] = function (_set) {\n      demoMode.call(this);\n    };\n  });\n\n  this.baseType = 'TYPE_GAME';\n  this.screens = null;\n  this.zoom = 1;\n  this.keyCommands = null;\n  this.demoMode = false;\n  this.media = null;\n  this.viewport = new (function () {\n    var vp, $html, RESIZE_HANDLERS;\n\n    vp = this;\n    $html = $('html');\n    RESIZE_HANDLERS = [];\n\n    $(window).on('resize', function (_event) {\n      if (!$html.hasClass(vp.orientation)) {\n        $html\n          .removeClass('squareish landscape protrait')\n          .addClass(vp.orientation);\n      }\n\n      RESIZE_HANDLERS.forEach(function (_handler) {\n        _handler(_event);\n      });\n    });\n\n    this.LANDSCAPE = 'landscape';\n    this.PROTRAIT = 'protrait';\n    this.SQUAREISH = 'squareish';\n    \n    this.size = function () {\n      return Size.create().set(window.innerWidth, window.innerHeight);\n    };\n\n    Object.defineProperties(this, {\n      width: {\n        get: function () {\n          return window.innerWidth;\n        },\n\n        configurable: false\n      },\n\n      height: {\n        get: function () {\n          return window.innerHeight;\n        },\n\n        configurable: false\n      },\n\n      orientation: {\n        get: function () {\n          var ratio = this.size().ratio();\n\n          switch (true) {\n            case ratio > 0.9 && ratio < 1.1: return 'squareish';\n            case ratio > 1.1: return 'landscape';\n            case ratio < 0.9: return 'protrait';\n          }\n        }\n      }\n    });\n\n    this.onResize = function (_handler) {\n      RESIZE_HANDLERS.push(_handler);\n    };\n\n    this.offResize = function (_handler) {\n      var index = RESIZE_HANDLERS.indexOf(_handler);\n\n      if (~index) RESIZE_HANDLERS.splice(index, 1);\n    };\n\n    $html.addClass(this.orientation);\n\n  });;\n\n  this.willInit = function () {\n    this.addClass('pl-game');\n\n    detechDevice.call(this);\n    scaleGame.call(this);\n    this.watchAudio();\n    this.captureScreens();\n\n    this.viewport.onResize(this.bind(scaleGame));\n\n    pl.game.on('platform-event', this.bind(function (_event) {\n      platformEventHandler.invoke(_event, this);\n    }));\n\n    window.addEventListener('load', window.focus);\n    window.addEventListener('focus', function() {\n      this.resume();\n    }.bind(this));\n    window.addEventListener('blur', function() {\n      this.pause();\n    }.bind(this));\n\n    return this;\n  };\n\n  /**\n   * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n   * ### Key Names\n   * - *meta*: Command (aka Apple  or win)\n   * - *alt*: Alt (aka Option )\n   * - *shift*: Shift \n   * - *ctrl*: Control ^\n   * - *enter*: Enter or Return\n   * - *esc*: Escape\n   * - *left*: Left arrow\n   * - *up*: Up arrow\n   * - *right*: Right arrow\n   * - *down*: Down arrow\n   *\n   * ### Example\n   * ```javascript\n   * // Overriding print.\n   * this.game.onKeys('cmd+P', printHandler);\n   *\n   * // Holding Control and pressing \"K\" then \"B\"\n   * this.game.onKeys('ctrl+K,B', handler);\n   * ```\n   * @arg {string} _commands - The key or sequence of keys.\n   * @arg {function} _handler - Your event handler for when you key pattern is matched.\n   * @returns `this`\n   */\n  this.onKeys = function (_commands, _handler) {\n    var sequence, chords, modifiers, map;\n\n    if (!this.keyCommands) {\n      this.keyCommands = {};\n\n      map = {\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        27: 'esc',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        91: 'meta',\n        enter: 13,\n        shift: 16,\n        ctrl : 17,\n        alt  : 18,\n        esc  : 27,\n        left : 37,\n        up   : 38,\n        right: 39,\n        down : 40,\n        meta : 91\n      };\n\n      modifiers = [16, 17, 18, 91];\n      sequence = [];\n      chords = [];\n\n      this.on('keydown', function (_event) {\n        var modifier, key, eventMods, currentMods, command, handler;\n\n        modifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n        key = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n        currentMods = [];\n\n        // Collect the modifiers the event says are still down.\n        eventMods.forEach(function (_modifierDown, _index) {\n          // use the modifier name\n          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n        });\n\n        // Don't add keys we already have during rapid-fire events\n        if (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\n        // Construct the command\n        command = chords.length ?\n          (chords.push(key), chords.join(',')) :\n          (sequence.push(key), sequence.join('+'));\n\n        handler = this.keyCommands[command];\n\n        if (handler) {\n          handler.call(this, _event, command);\n          // Keep current modifiers.\n          sequence = currentMods.map(function (_key, _index) {\n            var key = sequence[_index];\n            return currentMods[currentMods.indexOf(key)];\n          });\n          chords = [];\n\n          // Override original key command (i.e. meta+Q).\n          _event.preventDefault();\n        }\n      });\n\n      this.on('keyup', function (_event) {\n        var key, index, modifier, eventMods, currentMods;\n\n        key = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n        index = sequence.indexOf(key);\n        modifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n        // Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n        eventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n        currentMods = [];\n\n        // Collect the modifiers the event says are still down.\n        eventMods.forEach(function (_modifierDown, _index) {\n          // use the modifier name\n          if (_modifierDown) currentMods.push(map[modifiers[_index]]);\n        });\n\n        // If the key released is a modifier...\n        if (key === modifier) {\n          // ...keep current modifiers...\n          sequence = currentMods.map(function (_key, _index) {\n            var key = sequence[_index];\n            return currentMods[currentMods.indexOf(key)];\n          });\n          // ...clear registered chords.\n          chords = [];\n        }\n\n        else {\n          // If we had pressed more than one key...\n          if (sequence.length > 1) {\n            // Check if the first is a modifier then switch to chord capturing\n            if (~modifiers.indexOf(map[sequence[0]])) {\n              chords.push(sequence.join('+'));\n            }\n          }\n          \n          if (~index) sequence.splice(index, 1);\n          if (!sequence.length) chords = [];\n        }\n      });\n    }\n\n    this.keyCommands[_commands] = _handler;\n\n    return this;\n  };\n\n  this.screen = function (_id, _implementation) {\n    var prototype, selector, screenSelector, instance;\n\n    if (arguments.length === 1 && typeof _id === 'function') {\n      screenPrototype = Screen.extend(_id);\n      return this;\n    }\n\n    if (!this.hasOwnProperty('screens')) this.screens = Collection.create();\n\n    if (this.hasOwnProperty('$els')) {\n      debugger;\n      screenSelector = pl.game.config('screenSelector');\n      prototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n      selector = (typeof _id === 'number') ? screenSelector+':nth-child('+(_id+1)+')' : '#'+_id;\n      instance = prototype.extend(_implementation).initialize(this.find(selector));\n\n      instance.screen = instance;\n      if (!instance.game) {\n        instance.game = instance.closest('.pl-game').scope();\n      }\n    }\n\n    else {\n      this.screens.push({\n        index: (typeof _id === 'number') ? _id : null,\n        name: (typeof _id === 'string') ? _id : null,\n        implementation: _implementation\n      });\n    }\n\n    return this;\n  };\n\n  this.captureScreens = function () {\n    var screenSelector, prototype, collection;\n\n    screenSelector = pl.game.config('screenSelector');\n    prototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n    collection = [];\n    \n    this.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n      var $node, screen, record, key, id, index, component;\n\n      $node = $(_node);\n      id = $node.id();\n      key = (id) ? 'name' : (id = _index, 'index');\n      record = this.screens && this.screens.get(id, key);\n      component = $node.attr('pl-component');\n      screen = createEntity.call(prototype, $node, record && record.implementation);\n      screen.screen = screen;\n      screen.game = this;\n\n      if ($node.attr('pl-skip') == null) collection.push(screen);\n      \n      if (key === 'name' || component) {\n        util.assignRef(this, util.transformId((key === 'name' && id) || component, true), screen);\n      }\n    }));\n\n    if (collection.length) this.screens = collection;\n\n    return this;\n  };\n\n  this.watchAudio = function () {\n    this.media = MediaManager.create(this.id());\n\n    /**\n     * Prevent duplicate playback of voiceOvers and backgrounds.\n     */\n    this.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n      var playing = this.playing() || [];\n      // shouldPlay = false if _event.target is already playing.\n      _event.response(!playing || !playing.length || (!~playing.indexOf(_event.target) && !playing.has(_event.target.fileName)));\n    });\n\n    /**\n     * \n     */\n    this.media.rule('.voiceOver', function (_event) {\n      var audio, playing;\n\n      audio = _event.target;\n      playing = audio && this.playing('.audio:not(#'+audio.id()+')');\n\n      switch (_event.type) {\n        case 'play':\n          if (playing) {\n            playing.filter('.voiceOver').stop('@ALL');\n            playing.filter('.background').volume(game.config('bgVolume.drop') || 0.2);\n          }\n          break;\n\n        case 'pause':\n        case 'stopped':\n        case 'ended':\n          if (playing) playing.filter('.background').volume(game.config('bgVolume.max') || 1);\n          break;\n      }\n    });\n\n    this.media.rule('.background', 'play', function (_event) {\n      var playing = this.playing('.background:not(#'+_event.target.id()+')');\n      if (playing) playing.stop('@ALL');\n    });\n\n    if (~pl.EVENT.ACTION.indexOf('touch')) {\n      this.on(pl.EVENT.ACTION, function beginAudio (_event) {\n        var ctx, screen;\n\n        ctx = game.getAudioContext();\n        screen = this.currentScreen();\n\n        if (screen && ctx && ctx.state === 'suspended') {\n          game.enableAudioContext();\n          this.log('awesome!');\n          screen.startAudio();\n          this.off(pl.EVENT.ACTION, beginAudio);\n        }\n      });\n    }\n\n    collectVideos.call(this);\n  };\n\n  this.progress = function () {\n    return {\n      currentScreen: this.currentScreen().index()\n    };\n  };\n\n  this.currentScreen = function () {\n    return this.findOwn(pl.game.config('screenSelector')+'.OPEN').not('#quit').scope();\n  };\n\n  this.flip = function () {\n    console.log('THATS A FLIP!');\n    game.report.flip(this);\n  };\n\n  this.pause = function(quitScreen) {\n    if(!quitScreen) this.addClass('PAUSED');\n    this.screens.forEach(function(screen) {\n      if(screen.state(screen.STATE.OPEN)) {\n        screen.pause();\n      }\n    });\n    game.getAudioContext().suspend();\n  }\n\n  this.resume = function() {\n    this.removeClass('PAUSED');\n    this.screens.forEach(function(screen) {\n      if(screen.state(screen.STATE.OPEN)) screen.resume();\n    });\n    if(!this.hasClass('QUIT-SCREEN')) game.getAudioContext().resume();\n  }\n\n  this.exit = function () {\n    console.log('GOODBYE!');\n    game.report.exit(this);\n  };\n\n  /**\n   * Demo mode key command\n   */\n  this.onKeys('ctrl+D,M', function () {\n    demoMode.call(this);\n  });\n\n  /**\n   * Keyboard screen navigation\n   */\n  this.onKeys('left', function () {\n    var current;\n\n    current = this.currentScreen();\n\n    if (current) current.prev();\n  });\n\n  this.onKeys('right', function () {\n    var current;\n\n    current = this.currentScreen();\n    \n    if (current) current.next();\n  });\n\n});\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Game.js\n **/","/**\n * API for communicaion between a game and the platform.\n *\n * @module\n */\nimport util from 'util';\n\nvar platform = new (function () {\n\n  function createEvent(_name, _props) {\n    var eventObject;\n\n    eventObject = util.mixin(new Event('game-event', {bubbles: true, cancelable: false}), {\n      name: _name,\n      respond: function (_data) {\n        var platformEvent;\n\n        platformEvent = $.Event('platform-event', {\n          name: _name,\n          gameData: _data\n        });\n\n        pl.game.trigger(platformEvent);\n      }\n    }, _props);\n\n    return eventObject;\n  }\n\n  this.EVENT_INIT = 'init';\n  this.EVENT_SAVE = 'save';\n  this.EVENT_EXIT = 'exit';\n  this.EVENT_FLIPPED = 'flipped';\n\n  this.emit = function (_name, data) {\n    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name, data));\n  };\n\n  this.saveGameState = function (_data) {\n    if (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n  };\n\n  window.addEventListener('platform-event', function (_event) {\n    var platformEvent;\n\n    platformEvent = $.Event('platform-event', {\n      name: _event.name\n    });\n\n    pl.game.trigger(platformEvent);\n  });\n\n});\n\nexport default platform;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/platform.js\n **/"],"sourceRoot":""}