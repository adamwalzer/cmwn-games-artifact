{"version":3,"sources":["webpack:///play.js","webpack:///webpack/bootstrap 135fe33fdc9e64b9e63d","webpack:///./source/main.js","webpack:///./~/babel-runtime/helpers/interop-require-default.js","webpack:///./~/babel-runtime/helpers/interopRequireDefault.js","webpack:///./source/jQExtentions.js","webpack:///./~/babel-runtime/core-js/array/for-each.js","webpack:///./~/core-js/library/fn/array/for-each.js","webpack:///./~/core-js/library/modules/js.array.statics.js","webpack:///./~/core-js/library/modules/$.js","webpack:///./~/core-js/library/modules/$.export.js","webpack:///./~/core-js/library/modules/$.global.js","webpack:///./~/core-js/library/modules/$.core.js","webpack:///./~/core-js/library/modules/$.ctx.js","webpack:///./~/core-js/library/modules/$.a-function.js","webpack:///./source/types/Dimensions.js","webpack:///./~/babel-runtime/core-js/object/define-properties.js","webpack:///./~/core-js/library/fn/object/define-properties.js","webpack:///./source/types/BasicArray.js","webpack:///./source/util.js","webpack:///./source/types/Basic.js","webpack:///./~/babel-runtime/core-js/object/create.js","webpack:///./~/core-js/library/fn/object/create.js","webpack:///./source/lib/matrix.js","webpack:///./source/play.js","webpack:///./source/play.game.js","webpack:///./source/play.game.component.js","webpack:///./source/types/Events.js","webpack:///./source/play.game.manager.js","webpack:///./source/play.game.manager.draggable.js","webpack:///./source/types/Collection.js","webpack:///./source/types/GlobalScope.js","webpack:///./source/types/Scope.js","webpack:///./source/types/jQProxy.js","webpack:///./~/babel-runtime/core-js/object/keys.js","webpack:///./~/core-js/library/fn/object/keys.js","webpack:///./~/core-js/library/modules/es6.object.keys.js","webpack:///./~/core-js/library/modules/$.to-object.js","webpack:///./~/core-js/library/modules/$.defined.js","webpack:///./~/core-js/library/modules/$.object-sap.js","webpack:///./~/core-js/library/modules/$.fails.js","webpack:///./source/types/Queue.js","webpack:///./source/evalAction.js","webpack:///./source/types/AudioManager.js","webpack:///./~/babel-runtime/core-js/promise.js","webpack:///./~/core-js/library/fn/promise.js","webpack:///./~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/core-js/library/modules/$.string-at.js","webpack:///./~/core-js/library/modules/$.to-integer.js","webpack:///./~/core-js/library/modules/$.iter-define.js","webpack:///./~/core-js/library/modules/$.library.js","webpack:///./~/core-js/library/modules/$.redefine.js","webpack:///./~/core-js/library/modules/$.hide.js","webpack:///./~/core-js/library/modules/$.property-desc.js","webpack:///./~/core-js/library/modules/$.descriptors.js","webpack:///./~/core-js/library/modules/$.has.js","webpack:///./~/core-js/library/modules/$.iterators.js","webpack:///./~/core-js/library/modules/$.iter-create.js","webpack:///./~/core-js/library/modules/$.set-to-string-tag.js","webpack:///./~/core-js/library/modules/$.wks.js","webpack:///./~/core-js/library/modules/$.shared.js","webpack:///./~/core-js/library/modules/$.uid.js","webpack:///./~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/core-js/library/modules/$.add-to-unscopables.js","webpack:///./~/core-js/library/modules/$.iter-step.js","webpack:///./~/core-js/library/modules/$.to-iobject.js","webpack:///./~/core-js/library/modules/$.iobject.js","webpack:///./~/core-js/library/modules/$.cof.js","webpack:///./~/core-js/library/modules/es6.promise.js","webpack:///./~/core-js/library/modules/$.classof.js","webpack:///./~/core-js/library/modules/$.is-object.js","webpack:///./~/core-js/library/modules/$.an-object.js","webpack:///./~/core-js/library/modules/$.strict-new.js","webpack:///./~/core-js/library/modules/$.for-of.js","webpack:///./~/core-js/library/modules/$.iter-call.js","webpack:///./~/core-js/library/modules/$.is-array-iter.js","webpack:///./~/core-js/library/modules/$.to-length.js","webpack:///./~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/core-js/library/modules/$.set-proto.js","webpack:///./~/core-js/library/modules/$.same-value.js","webpack:///./~/core-js/library/modules/$.species-constructor.js","webpack:///./~/core-js/library/modules/$.microtask.js","webpack:///./~/core-js/library/modules/$.task.js","webpack:///./~/core-js/library/modules/$.invoke.js","webpack:///./~/core-js/library/modules/$.html.js","webpack:///./~/core-js/library/modules/$.dom-create.js","webpack:///./~/core-js/library/modules/$.redefine-all.js","webpack:///./~/core-js/library/modules/$.set-species.js","webpack:///./~/core-js/library/modules/$.iter-detect.js","webpack:///./source/types/type.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./source/types/Entity.js","webpack:///./source/types/Screen.js","webpack:///./source/types/Game.js","webpack:///./source/platform.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","run","_play2","game","_interopRequireDefault","_play","window","play","pl","document","addEventListener","__esModule","obj","default","_Array$forEach","_typesDimensions","_libMatrix","_libMatrix2","original","position","this","scope","result","each","$node","$","data","closest","push","length","_set","undefined","indexOf","attr","address","tag","classes","nodeName","toLowerCase","split","join","state","_test","hasClass","toUpperCase","match","size","arguments","Size","create","css","set","width","height","pos","Point","left","x","top","y","absolutePosition","offset","transform","t","matrix","is3d","setTransform","apply","toCSS","_matrix","i","concat","slice","map","parseFloat","transformPosition","point","translate","e","f","transformScale","scale","a","d","_name","_value","args","removeAttr","attributes","_attr","name","value","exec","_method","_args","toArray","fn","Array","forEach","$export","$ctx","$Array","statics","setStatics","keys","key","Function","S","$Object","Object","getProto","getPrototypeOf","isEnum","propertyIsEnumerable","getDesc","getOwnPropertyDescriptor","setDesc","defineProperty","setDescs","defineProperties","getKeys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","global","core","ctx","PROTOTYPE","type","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","target","own","out","C","param","Math","self","__g","version","__e","aFunction","that","b","it","TypeError","_Object$defineProperties","_typesBasicArray","_typesBasicArray2","Dimension","prototype","to","_Thing","isPrototypeOf","extend","originalMap","planeMap","_argumentsArray","instance","proto","inc","_val","_plane2","dec","_scale","math","_fun","parseInt","planeOf","_index","isNaN","_handler","product","ratio","quotient","floor","remainder","get","Number","_width","_height","hypotenuse","sqrt","pow","applyTo","_object","nodeType","ELEMENT_NODE","style","_x","_y","distance","_point","rotate","_origin","_angle","rad","PI","sin","cos","T","D","_util","_util2","_typesBasic","_typesBasic2","BasicArray","baseType","mixin","util","member","objs","hasOwnProperty","keyOf","_obj","_member","getOwner","object","random","_collection_rangeA","_rangeB","index","val","round","transformId","_id","_camelCase","replace","_match","RegExp","$1","isSet","every","_arg","toMillisec","_source","tokens","time","units","h","s","_token","unit","_collection","resolvePath","_path","path","testArray","test","assignRef","_ref","__refCollction__","enumerable","writeable","configureable","noop","resolveFileName","lastIndexOf","createId","_pattern","toString","Date","now","_Object$create","Basic","_implementation","console","error","method","owner","caller","sup","constructor","Matrix","context","me","_t","cm","clone","flipX","flipY","reflectVector","v","applyToPoint","reset","angle","rotateFromVector","atan2","rotateDeg","scaleU","sx","sy","scaleX","scaleY","shear","shearX","shearY","skew","ax","ay","tan","skewX","skewY","tx","ty","translateX","translateY","a2","b2","c2","d2","e2","f2","a1","b1","c1","d1","e1","f1","divide","isInvertible","im","inverse","divideScalar","isIdentity","dt","interpolate","m2","interpolateAnim","decompose","rotation","useLU","acos","atan","pi","determ","r","determinant","applyToArray","points","l","mxPoints","applyToTypedArray","use64","Float64Array","Float32Array","applyToContext","_q","isValid","noContext","isEqual","q","toCSS3D","toJSON","JSON","stringify","abs","resolveEventType","resolution","_playGame2","feature","ACTION","ACTION_DOWN","ACTION_UP","ACTION_MOVE","ACTION_OUT","_playGame","_typesQueue","_typesQueue2","Queue","EVENT","isDOMReady","initialize","register","ready","_eventName","READY_QUEUE","trigger","GAMES","implementation","_name_collection","_typesGlobalScope2","_typesGame2","_item","_playGameComponent","_playGameComponent2","_playGameManager","_playGameManager2","_typesEvents","_typesEvents2","_typesGlobalScope","_typesEntity","_typesEntity2","_typesScreen","_typesScreen2","_typesGame","_platform","_platform2","CONFIG","audioContext","component","manager","on","_event","log","gameData","loadAll","emit","EVENT_INIT","report","exit","_gameScope","saveGameState","progress","EVENT_EXIT","flip","EVENT_FLIPPED","config","_key_mixin","provideEntityType","provideScreenType","_mixin","queue","complete","splice","detect","touch","tester","warn","getAudioContext","AudioContext","webkitAudioContext","enableAudioContext","silence","createBufferSource","buffer","createBuffer","connect","destination","start","disconnect","COMPONENTS","record","load","_callback","getScript","$components","Events","createProxyFunction","$jq","methods","_playGameManagerDraggable","_playGameManagerDraggable2","draggable","boot","createHelperStyleSheet","attachEvents","E","disableTouchScroll","$draggable","cursor","mode","helperID","dragStartEvent","resolveEventPoint","zoom","createID","$helper","draggableStyleSheet","html","provideSource","createDraggableRule","addClass","appendTo","body","removeClass","Event","targetScope","dragMoveEvent","dragEndEvent","documentElement","toElement","remove","originalEvent","changedTouches","clientX","clientY","_$draggable","blacklist","rule","prop","getComputedStyle","_rule","_typesCollection","_typesCollection2","COLLECTION_DRAGABLES","preventDefault","draggableManager","Collection","getRecord","_key","_shouldCollect","add","_record","has","filter","_typesScope","GlobalScope","Scope","createEntity","_$node","componentRecord","Error","_typesJQProxy","_typesJQProxy2","_evalAction","_evalAction2","_typesAudioManager","attachActionHandler","actionables","item","event","action","getRecordBy","removeRecord","captureDropables","_scope","collection","find","pluckAndDrop","_dropables","_template","dropable","replaceWith","children","loadComponentAssets","status","totalRequests","transcludeMode","dropables","TRANSCLUDE_PLUCK","properties","transclude","memory","TRANSCLUDE_APPEND","append","TRANSCLUDE_PREPEND","prepend","empty","TRANSCLUDE_REPLACE","node","findOwn","captureProperties","$els","initializeEntities","entities","bind","$nodes","query","selector","_node","isReady","assetQueue","handleProperties","property","handler","propertyHandlers","getNamedItem","invokeLocal","isMemberSafe","init","willInitEvent","initEvent","watchAssets","captureAudioAssets","captureReferences","__init","readyEvent","media","addShadow","audio","collections","voiceOver","background","sfx","__ready","Actionables","_action","isComponent","currentMedia","_node_selector","_componentName","jquery","ReferenceError","willInit","_nodes","createHandler","watch","loadedEvent","src","onload","onerror","off","deQ","$audio","screen","requiredQueue","AudioManager","then","_audio","is","require","targetNode","audioEvent","targetSource","handleProperty","entity","_selector","Entity","_child","child","_property","required","_Object$keys","jQProxy","response","registerHandler","resolveEventHandler","arg","_definition","eventRegistry","exclude","listen","_isCapure_handler","_isCapture","cb","ignore","removeEventListener","parent","elOwner","toObject","$keys","defined","fails","KEY","exp","evalAction","eval","MediaManager","EventTargetInterface","InspectorInterface","LegislatorInterface","StateInterface","alloc","video","AudioBufferRecord","_buffer","getAudioType","className","AUDIO_TYPES","loadArrayBuffer","xhr","fileName","XMLHttpRequest","open","_Promise","reject","resolve","onLoad","promise","resolveDecoding","rejectDecoding","decodeAudioData","collect","BUFFER_CACHE","statusText","onError","cache","responseType","send","PlayableInterface","_type","AudioCollection","_error","$$","protoype","types","Audio","$el","MediaCollection","_media","$clone","accessConfig","_augment","gain","createGain","getSource","loop","activeSource","createMediaElementSource","message","setContext","_typesType","_typesType2","jQuery","_class","playing","_filterSelector","_query","some","_e","addState","_state","removeState","proxyEvent","theEvent","simEnd","playSource","startTime","ceil","duration","timeout","setTimeout","delayID","shouldPlay","dest","delay","pause","pauseTime","clearTimeout","resume","stop","stopEvent","currentTime","volume","_level","Promise","$at","String","iterated","_i","O","done","toInteger","TO_STRING","charCodeAt","charAt","LIBRARY","redefine","hide","Iterators","$iterCreate","setToStringTag","ITERATOR","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","Base","NAME","Constructor","next","DEFAULT","IS_SET","FORCED","getMethod","kind","values","entries","TAG","DEF_VALUES","VALUES_BUG","$native","$default","IteratorPrototype","createDesc","bitmap","configurable","writable","descriptor","def","stat","store","uid","Symbol","SHARED","px","NodeList","HTMLCollection","addToUnscopables","step","toIObject","_k","Arguments","IObject","cof","classof","isObject","anObject","strictNew","forOf","setProto","same","SPECIES","speciesConstructor","asap","PROMISE","process","isNode","Wrapper","testResolve","sub","USE_NATIVE","P2","works","thenableThenGotten","sameConstructor","getConstructor","isThenable","PromiseCapability","$$resolve","$$reject","perform","notify","isReject","n","chain","ok","reaction","fail","isUnhandled","onunhandledrejection","reason","_d","$reject","$resolve","wrapper","executor","err","onFulfilled","onRejected","catch","capability","iter","all","iterable","abrupt","remaining","results","alreadyCalled","race","ARG","callee","isArrayIter","toLength","getIterFn","iterFn","iterator","ret","ArrayProto","min","getIteratorMethod","check","setPrototypeOf","buggy","__proto__","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","last","flush","domain","enter","nextTick","toggle","createTextNode","observe","characterData","task","invoke","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","ONREADYSTATECHANGE","defer","channel","port","listner","port2","port1","onmessage","postMessage","importScripts","appendChild","removeChild","clear","un","createElement","DESCRIPTORS","SAFE_CLOSING","riter","from","skipClosing","safe","arr","Bindings","_from","_to","_itterable","createApi","_constructor","api","base","constant","_Object$defineProperty","static","_static","_name_def","_def","memberType","props","parse","_call","defs","Super","desc","invokeResponsibilities","responsibilities","ability","resolveTarget","_target","ResponsibilityRecord","_ability","dragGreeter","grab","dragging","release","attachDragEvents","draggables","STATE","PLAYING","BACKGROUND","VOICE_OVER","SFX","timeoutID","intervalID","isComplete","shouldInheritAbilities","frameHandlers","frameRate","bgImageCollection","bg","img","Image","propagateBehavior","ids","_entity","respond","behaviorTarget","gate","behavior","_behavior","behaviorEvent","parentScope","abilities","protoAbilities","provideAblilityPototype","_time","_cb","repeat","setInterval","kill","_timer","clearInterval","eachFrame","_on","binder","frame","lastTime","rate","frames","requestAnimationFrame","_flag","_imp","flag","setter","getter","opperations","names","_opp","uiStateEvent","oppsPerformed","shouldSet","notSet","willSet","didSet","provideBehaviorEventScope","completed","demoMode","close","$parent","deselect","unhighlight","_target_point","Screen","attachBehaviorEvent","startAudio","stopAudio","pauseMedia","resumeMedia","screens","prev","quit","nextSib","prevSib","isLast","Game","detechDevice","deviceClasses","iOS","mobileOrTablet","iDevices","navigator","platform","pop","substr","userAgent","vendor","opera","scaleGame","vpSize","gameDimensions","viewport","toPrecision","transformOrigin","info","collectVideos","onplay","Viewport","screenPrototype","platformEventHandler","_ctx","keyCommands","vp","$html","RESIZE_HANDLERS","orientation","LANDSCAPE","PROTRAIT","SQUAREISH","innerWidth","innerHeight","onResize","offResize","watchAudio","captureScreens","focus","onKeys","_commands","sequence","chords","modifiers",13,16,17,18,27,37,38,39,40,91,"shift","ctrl","alt","esc","up","right","down","meta","modifier","eventMods","currentMods","command","keyCode","fromCharCode","shiftKey","ctrlKey","altKey","metaKey","_modifierDown","screenSelector","beginAudio","currentScreen","not","quitScreen","OPEN","suspend","current","createEvent","_props","eventObject","bubbles","cancelable","_data","platformEvent","EVENT_SAVE","frameElement","dispatchEvent"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAE,WACAE,GAAAJ,SACAK,QAAA,EAUA,OANAP,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,QAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBAqCA,OATAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAU,EAAA,UAGAV,oBAAA,KDMM,SAASI,OAAQD,QAASH,qBAE/BI,OAAOD,QAAUH,oBAAoB,IAKhC,SAASI,OAAQD,QAASH,qBEnChC,QAASW,OACRC,OAAA,WAAKC,KAAKF,MFoCV,GAAIG,wBAAyBd,oBAAoB,GAAG,UAapDA,qBExDM,EF0DN,IAAIe,OAAQf,oBEzDI,IF2DZY,OAASE,uBAAuBC,MEjDrCC,QAAOC,KAAOD,OAAOE,GAAEN,OAAA,WAGvBO,SAASC,iBAAiB,mBAAoBT,KAAK,IF+D7C,SAASP,OAAQD,QAASH,qBGvFhCI,OAAAD,QAAAH,oBAAA,IH6FM,SAASI,OAAQD,SI7FvB,YAEAA,SAAAkB,YAAA,EAEAlB,mBAAA,SAAAmB,KACA,MAAAA,UAAAD,WAAAC,KACAC,UAAAD,OJqGM,SAASlB,OAAQD,QAASH,qBAE/B,GAAIwB,gBAAiBxB,oBAAoB,GAAG,WAExCc,uBAAyBd,oBAAoB,GAAG,WAYhDyB,iBAAmBzB,oBKlHI,ILoHvB0B,WAAa1B,oBKnHC,ILqHd2B,YAAcb,uBAAuBY,aK7G1C,WACC,GAAIE,SAEJA,WACCC,SAAUC,KAAKD,UAQhBC,KAAKC,MAAQ,WACZ,GAAIC,OAiBJ,OAfAA,WAEAF,KAAKG,KAAK,WACT,GAAIC,OAAOH,KAEXG,OAAQC,EAAEL,MACVC,MAAQG,MAAME,KAAK,YAEdL,QACJA,MAAQG,MAAMG,QAAQ,aAAaD,KAAK,aAGrCL,OAAOC,OAAOM,KAAKP,SAGhBC,OAAOO,OAAS,EAAKP,OAASA,OAAO,IAS9CF,KAAKzB,GAAK,SAAUmC,MACnB,MAAaC,UAATD,QAEG,GAAI,MAAME,QAAQF,OACvBV,KAAKa,KAAK,KAAM,MAIbR,EAAE,IAAIK,MAAMD,OACfT,KAAKa,KAAK,QAASH,MAInBV,KAAKa,KAAK,KAAMH,MAGVV,MAGDA,KAAKa,KAAK,OAASb,KAAKa,KAAK,UAAYb,KAAKa,KAAK,iBAY3Db,KAAKc,QAAU,WACd,GAAIC,KAAKxC,GAAIyC,OAMb,OAJAD,KAAMf,KAAK,GAAGiB,SAASC,cACvB3C,GAAKyB,KAAKa,KAAK,MACfG,QAAUhB,KAAKa,KAAK,SAAW,IAAIb,KAAKa,KAAK,SAASM,MAAM,KAAKC,KAAK,KAAO,GAEtEL,KAAKxC,GAAK,IAAIA,GAAK,IAAIyC,SAS/BhB,KAAKqB,MAAQ,SAAUC,OACtB,GAAIN,QAEJ,OAAIM,OAActB,KAAKuB,SAASD,MAAME,gBAEtCR,SAAWhB,KAAKa,KAAK,UAAY,IAAIY,MAAM,6BAEpCT,UAA+B,IAAnBA,QAAQP,OAAeO,QAAQ,GAAKA,WAGxDhB,KAAK0B,KAAO,WACX,GAAIA,KASJ,OAPKC,WAAUlB,QAGdiB,KAAO/B,iBAAAiC,KAAKC,OAAOF,WACnB3B,KAAK8B,IAAIJ,OAHTA,KAAO/B,iBAAAiC,KAAKC,SAASE,IAAI/B,KAAKgC,QAAShC,KAAKiC,UAMtCP,MAGR1B,KAAKD,SAAW,WACf,GAAImC,IAeJ,OAbKP,WAAUlB,QAIdyB,IAAMvC,iBAAAwC,MAAMN,OAAOF,WAEnB3B,KAAK8B,KACJ/B,SAAU,WACVqC,KAAMF,IAAIG,EACVC,IAAKJ,IAAIK,MARVL,IAAMpC,SAASC,SAAStB,KAAKuB,MAC7BkC,IAAMvC,iBAAAwC,MAAMN,SAASE,IAAIG,IAAIE,KAAMF,IAAII,MAWjCJ,KASRlC,KAAKwC,iBAAmB,WACvB,GAAIC,OAEJ,OAAKd,WAAUlB,QAOdgC,OAAS9C,iBAAAwC,MAAMN,OAAOF,WAEtB3B,KAAK8B,KACJ/B,SAAU,WACVuC,IAAKG,OAAOF,EACZH,KAAMK,OAAOJ,IAGPI,SAdPA,OAASzC,KAAKyC,SAEP9C,iBAAAwC,MAAMN,SAASE,IAAIU,OAAOL,KAAMK,OAAOH,OAiChDtC,KAAK0C,UAAY,WAChB,GAAIC,GAAGC,OAAQC,IAIf,OAFAD,QAAS,GAAA/C,aAAA,WAEJ8B,UAAUlB,QA6BfmC,OAAOE,aAAaC,MAAMH,OAAQjB,WAElC3B,KAAK8B,IAAI,YAAac,OAAOI,SAEtBJ,SAhCND,EAAI3C,KAAK8B,IAAI,aACbe,QAAUF,EAAE/B,QAAQ,YAEV,SAAN+B,GACHA,IAAMA,EAAElB,MAAM,2BAA6B,IAAM,IAAIN,MAAM,WACvD0B,OACHF,EAAK,SAAUM,SACd,GAAIC,GAAGhD,MAIP,KAFAA,UAEKgD,EAAE,EAAGA,EAAID,QAAQxC,OAAQyC,GAAG,EAChChD,OAASA,OAAOiD,OAAOF,QAAQG,MAAMF,EAAGA,EAAE,GAE3C,OAAOhD,SACNyC,IAGHA,EAAIA,EAAEU,IAAIC,YAEVV,OAAOE,aAAaC,MAAMH,OAAQD,GAE3BC,QAGDD,IAwBT3C,KAAKuD,kBAAoB,WACxB,GAAIX,QAAQY,KAeZ,OAbAZ,QAAS5C,KAAK0C,YACdc,MAAQ7D,iBAAAwC,MAAMN,SAASE,IAAI,EAAE,GAExBJ,UAAUlB,QAGC,SAAXmC,SAAmBA,OAAS,GAAA/C,aAAA,YAEhC2D,MAAMzB,IAAIgB,MAAMS,MAAO7B,WACvBiB,OAAOa,UAAUD,MAAMnB,EAAGmB,MAAMjB,GAChCvC,KAAK8B,IAAI,YAAac,OAAOI,UANd,SAAXJ,QAAmBY,MAAMzB,IAAIa,OAAOc,EAAGd,OAAOe,GAS5CH,OAuBRxD,KAAK4D,eAAiB,WACrB,GAAIhB,QAAQiB,KAeZ,OAbAjB,QAAS5C,KAAK0C,YACdmB,MAAQlE,iBAAAwC,MAAMN,SAASE,IAAI,EAAE,GAExBJ,UAAUlB,QAGC,SAAXmC,SAAmBA,OAAS,GAAA/C,aAAA,YAEhCgE,MAAM9B,IAAIgB,MAAMc,MAAOlC,WACvBiB,OAAOiB,MAAMA,MAAMxB,EAAGwB,MAAMtB,GAC5BvC,KAAK8B,IAAI,YAAac,OAAOI,UANd,SAAXJ,QAAmBiB,MAAM9B,IAAIa,OAAOkB,EAAGlB,OAAOmB,GAS5CF,OAMR7D,KAAKZ,GAAK,SAAU4E,MAAOC,QAC1B,GAAIC,MAAMhE,MAEV,OAAK8D,QAaLE,MAAQ,MAAMF,OACQ,mBAAXC,SAAwBC,KAAK1D,KAAKyD,QAE9B,OAAXA,QACHjE,KAAKmE,WAAW,MAAMH,OACfhE,MAGDA,KAAKa,KAAKkC,MAAM/C,KAAMkE,QApB5BhE,UACAF,KAAKG,KAAK,WACTT,eAAcM,KAAKoE,WAAY,SAAUC,OACN,IAA9BA,MAAMC,KAAK1D,QAAQ,SACtBV,OAAOmE,MAAMC,KAAKlB,MAAM,IAAMiB,MAAME,WAIhCrE,SAkBTF,KAAKwE,KAAO,SAAUC,QAASC,OAC9B,MAAO1E,MAAKqD,IAAI,WACf,MAA6B,kBAAlBrD,MAAKyE,SAAgCzE,KAAKyE,SAAS1B,MAAM/C,KAAM0E,OAA1E,SACEC,aAGFlG,KAAK4B,EAAEuE,KLmHJ,SAAStG,OAAQD,QAASH,qBM1chCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,GAAAqB,YAAA,INgdZ,SAASjB,OAAQD,QAASH,qBOhdhCA,oBAAA,GACAI,OAAAD,QAAAH,oBAAA,IAAA2G,MAAAC,SPsdM,SAASxG,OAAQD,QAASH,qBQtdhC,GAAAmC,GAAAnC,oBAAA,GACA6G,QAAA7G,oBAAA,GACA8G,KAAA9G,oBAAA,IACA+G,OAAA/G,oBAAA,IAAA2G,aACAK,WACAC,WAAA,SAAAC,KAAA3E,QACAJ,EAAAF,KAAA1B,KAAA2G,KAAAjE,MAAA,cAAAkE,KACA1E,QAAAF,QAAA4E,MAAAJ,QAAAC,QAAAG,KAAAJ,OAAAI,KACAA,WAAAH,QAAAG,KAAAL,KAAAM,SAAA7G,QAAA4G,KAAA5E,WAGA0E,YAAA,2CACAA,WAAA,mEACAA,WAAA,6FAEAJ,gBAAAQ,EAAA,QAAAL,UR6dM,SAAS5G,OAAQD,SS7evB,GAAAmH,SAAAC,MACAnH,QAAAD,SACAwD,OAAA2D,QAAA3D,OACA6D,SAAAF,QAAAG,eACAC,UAAgBC,qBAChBC,QAAAN,QAAAO,yBACAC,QAAAR,QAAAS,eACAC,SAAAV,QAAAW,iBACAC,QAAAZ,QAAAJ,KACAiB,SAAAb,QAAAc,oBACAC,WAAAf,QAAAgB,sBACArG,QAAA2E,UTofM,SAASxG,OAAQD,QAASH,qBU/fhC,GAAAuI,QAAAvI,oBAAA,IACAwI,KAAAxI,oBAAA,IACAyI,IAAAzI,oBAAA,IACA0I,UAAA,YAEA7B,QAAA,SAAA8B,KAAAvC,KAAAwC,QACA,GAAAC,WAAAF,KAAA9B,QAAAiC,EACAC,UAAAJ,KAAA9B,QAAAmC,EACAC,UAAAN,KAAA9B,QAAAQ,EACA6B,SAAAP,KAAA9B,QAAAsC,EACAC,QAAAT,KAAA9B,QAAAwC,EACAC,QAAAX,KAAA9B,QAAA0C,EACApJ,QAAA4I,UAAAP,UAAApC,QAAAoC,KAAApC,UACAoD,OAAAT,UAAAR,OAAAU,UAAAV,OAAAnC,OAAAmC,OAAAnC,WAAqFsC,WACrFvB,IAAAsC,IAAAC,GACAX,aAAAH,OAAAxC,KACA,KAAAe,MAAAyB,QAEAa,KAAAZ,WAAAW,QAAArC,MAAAqC,QACAC,KAAAtC,MAAAhH,WAEAuJ,IAAAD,IAAAD,OAAArC,KAAAyB,OAAAzB,KAEAhH,QAAAgH,KAAA4B,WAAA,kBAAAS,QAAArC,KAAAyB,OAAAzB,KAEAiC,SAAAK,IAAAhB,IAAAiB,IAAAnB,QAEAe,SAAAE,OAAArC,MAAAuC,IAAA,SAAAC,GACA,GAAAb,GAAA,SAAAc,OACA,MAAA9H,gBAAA6H,GAAA,GAAAA,GAAAC,OAAAD,EAAAC,OAGA,OADAd,GAAAJ,WAAAiB,EAAAjB,WACAI,GAEKY,KAAAR,UAAA,kBAAAQ,KAAAjB,IAAArB,SAAA7G,KAAAmJ,SACLR,YAAA/I,QAAAuI,aAAAvI,QAAAuI,gBAA+DvB,KAAAuC,MAI/D7C,SAAAiC,EAAA,EACAjC,QAAAmC,EAAA,EACAnC,QAAAQ,EAAA,EACAR,QAAAsC,EAAA,EACAtC,QAAAwC,EAAA,GACAxC,QAAA0C,EAAA,GACAnJ,OAAAD,QAAA0G,SVqgBM,SAASzG,OAAQD,SWjjBvB,GAAAoI,QAAAnI,OAAAD,QAAA,mBAAAa,gBAAA6I,WACA7I,OAAA,mBAAA8I,YAAAD,WAAAC,KAAA1C,SAAA,gBACA,iBAAA2C,WAAAxB,SXwjBM,SAASnI,OAAQD,SY3jBvB,GAAAqI,MAAApI,OAAAD,SAA6B6J,QAAA,QAC7B,iBAAAC,WAAAzB,OZikBM,SAASpI,OAAQD,QAASH,qBajkBhC,GAAAkK,WAAAlK,oBAAA,GACAI,QAAAD,QAAA,SAAAuG,GAAAyD,KAAA5H,QAEA,GADA2H,UAAAxD,IACAjE,SAAA0H,KAAA,MAAAzD,GACA,QAAAnE,QACA,uBAAAqD,GACA,MAAAc,IAAAnG,KAAA4J,KAAAvE,GAEA,wBAAAA,EAAAwE,GACA,MAAA1D,IAAAnG,KAAA4J,KAAAvE,EAAAwE,GAEA,wBAAAxE,EAAAwE,EAAA3J,GACA,MAAAiG,IAAAnG,KAAA4J,KAAAvE,EAAAwE,EAAA3J,IAGA,kBACA,MAAAiG,IAAA7B,MAAAsF,KAAA1G,cb0kBM,SAASrD,OAAQD,Sc3lBvBC,OAAAD,QAAA,SAAAkK,IACA,qBAAAA,IAAA,KAAAC,WAAAD,GAAA,sBACA,OAAAA,MdkmBM,SAASjK,OAAQD,QAASH,qBAE/B,GAAIuK,0BAA2BvK,oBAAoB,IAAI,WAEnDc,uBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAoDrB,IAAImJ,kBAAmBxK,oBe3mBD,If6mBlByK,kBAAoB3J,uBAAuB0J,kBe3mB5CE,UAAWhH,KAAMO,KAiBrB0C,OAAMgE,UAAUC,GAAK,SAAUC,QAC9B,GAAI1F,IAOJ,OALAA,MACCG,MAAOrB,MACPT,KAAME,MAGe,gBAAXmH,QACH1F,IAAI0F,OAAO7H,eAAeW,SAASE,IAAI/B,MAGpB,gBAAX+I,WAAyB5G,MAAMJ,IAAKH,KAAKG,KAAKnB,QAAQmI,OAAOhH,OACvEgH,OAAOC,cAAchJ,MAClB+I,OAAOhH,IAAIgB,MAAMgG,OAAOlH,SAAU7B,MAIpCA,MAUR4I,UAAYD,kBAAA,WAAWM,OAAO,WAC7B,GAAIC,YAEJA,aAAclJ,KAAKqD,IAEnBrD,KAAK,GAAKA,KAAK,GAAK,EACpBA,KAAKmJ,SAAW,KAChBnJ,KAAKS,OAAS,EAOdT,KAAK6B,OAAS,SAAUuH,iBACvB,GAAIC,SAMJ,OAJAA,UAAWrJ,KAAKsJ,QAEZF,iBAAiBC,SAAStH,IAAIgB,MAAMsG,SAAUD,iBAE3CC,UASRrJ,KAAKuJ,IAAM,SAAUC,KAAMC,SAC1B,GAAI3F,GAAEwE,CAgBN,OAdoB,KAAhBkB,KAAK/I,QACRqD,EAAI0F,KAAK,GACTlB,EAAIkB,KAAK,IAGU,MAAXC,SACR3F,EAAI0F,KACJlB,EAAImB,SAIJ3F,EAAIwE,EAAIkB,KAGFxJ,KAAK6B,SAASE,IACpB/B,KAAK,GAAK8D,EACV9D,KAAK,GAAKsI,IAUZtI,KAAK0J,IAAM,SAAUF,KAAMC,SAC1B,GAAI3F,GAAEwE,CAgBN,OAdoB,KAAhBkB,KAAK/I,QACRqD,EAAI0F,KAAK,GACTlB,EAAIkB,KAAK,IAGU,MAAXC,SACR3F,EAAI0F,KACJlB,EAAImB,SAIJ3F,EAAIwE,EAAIkB,KAGFxJ,KAAK6B,SAASE,IACpB/B,KAAK,GAAK8D,EACV9D,KAAK,GAAKsI,IAUZtI,KAAK6D,MAAQ,SAAU8F,OAAQF,SAC9B,MAAOzJ,MAAK6B,SAASE,IACpB/B,KAAK,GAAK2J,OACV3J,KAAK,IAAiB,MAAXyJ,QAAkBA,QAAUE,UAWzC3J,KAAK4J,KAAO,SAAUC,MACrB,GAAI3F,SAAUd,MAAM3E,KAAKkD,UAAW,EAEpC,OAAO3B,MAAK6B,SAASE,IACpBgG,KAAK8B,MAAM9G,MAAMgF,MAAO/H,KAAK,IAAImD,OAAOe,OACxC6D,KAAK8B,MAAM9G,MAAMgF,MAAO/H,KAAK,IAAImD,OAAOe,SAQ1ClE,KAAK8J,SAAW,WACf,MAAO9J,MAAK6B,SAASE,IACpB+H,SAAS9J,KAAK,IACd8J,SAAS9J,KAAK,MAQhBA,KAAKsD,WAAa,WACjB,MAAOtD,MAAK6B,SAASE,IACpBuB,WAAWtD,KAAK,IAChBsD,WAAWtD,KAAK,MASlBA,KAAK+J,QAAU,SAAUC,QACxB,MAAIC,OAAMH,SAASE,SAAiB,KAC7BhK,KAAKmJ,SAASa,SAUtBhK,KAAKqD,IAAM,SAAU6G,UACpB,MAAOhB,aAAYzK,KAAKuB,KAAMkK,UAAUpB,GAAGrD,OAAOE,eAAe3F,QAOlEA,KAAKmK,QAAU,WACd,MAAOnK,MAAK,GAAKA,KAAK,IAOvBA,KAAKoK,MAAQ,WACZ,MAAOpK,MAAK,GAAKA,KAAK,IAGvBA,KAAKqK,SAAW,WACf,MAAOtC,MAAKuC,MAAMtK,KAAK,GAAKA,KAAK,KAGlCA,KAAKuK,UAAY,WAChB,MAAOvK,MAAK,GAAKA,KAAK,MAcxB4B,KAAOgH,UAAUK,OAAO,WAOvBjJ,KAAKmJ,UAAY,QAAS,UAE1BV,yBAAwBzI,MACvBgC,OACCwI,IAAK,QAAAA,OACJ,MAAOxK,MAAK,IAGb+B,IAAK,QAAAA,KAAUyH,MACdxJ,KAAK,GAAKyK,OAAOjB,QAInBvH,QACCuI,IAAK,QAAAA,OACJ,MAAOxK,MAAK,IAGb+B,IAAK,QAAAA,KAAUyH,MACdxJ,KAAK,GAAKyK,OAAOjB,UAyBpBxJ,KAAK+B,IAAM,SAAU2I,OAAQC,SAkB5B,MAjByB,KAArBhJ,UAAUlB,OACQE,SAAjB+J,OAAO1I,OAAyCrB,SAAlB+J,OAAOzI,QACxCjC,KAAK,GAAKyK,OAAOC,OAAO1I,OACxBhC,KAAK,GAAKyK,OAAOC,OAAOzI,SAGE,IAAlByI,OAAOjK,SACfT,KAAK,GAAKyK,OAAOC,OAAO,IACxB1K,KAAK,GAAKyK,OAAOC,OAAO,MAKzB1K,KAAK,GAAKyK,OAAOC,QACjB1K,KAAK,GAAKyK,OAAOE,UAGX3K,MAQRA,KAAK4K,WAAa,WACjB,MAAO7C,MAAK8C,KAAK9C,KAAK+C,IAAI9K,KAAKgC,MAAO,GAAK+F,KAAK+C,IAAI9K,KAAKiC,OAAQ,KAQlEjC,KAAK+K,QAAU,SAAUC,SACxB,MAAIA,SAAQC,WAAa5L,SAAS6L,cACTvK,SAAlBqK,QAAQhJ,OAA0CrB,SAAnBqK,QAAQ/I,QAC5C+I,QAAQG,MAAMnJ,MAAQhC,KAAKgC,MAC3BgJ,QAAQG,MAAMlJ,OAASjC,KAAKiC,OAErBjC,OAITgL,QAAQhJ,MAAQhC,KAAKgC,MACrBgJ,QAAQ/I,OAASjC,KAAKiC,OAEfjC,SAcTmC,MAAQyG,UAAUK,OAAO,WAOxBjJ,KAAKmJ,UAAY,IAAK,KAEtBV,yBAAwBzI,MACvBqC,GACCmI,IAAK,QAAAA,OACJ,MAAOxK,MAAK,IAGb+B,IAAK,QAAAA,KAAUyH,MACdxJ,KAAK,GAAKyK,OAAOjB,QAInBjH,GACCiI,IAAK,QAAAA,OACJ,MAAOxK,MAAK,IAGb+B,IAAK,QAAAA,KAAUyH,MACdxJ,KAAK,GAAKyK,OAAOjB,UAyBpBxJ,KAAK+B,IAAM,SAAUqJ,GAAIC,IAkBxB,MAjByB,KAArB1J,UAAUlB,OACAE,SAATyK,GAAG/I,GAA4B1B,SAATyK,GAAG7I,GAC5BvC,KAAK,GAAKyK,OAAOW,GAAG/I,GACpBrC,KAAK,GAAKyK,OAAOW,GAAG7I,IAGE,IAAd6I,GAAG3K,SACXT,KAAK,GAAKyK,OAAOW,GAAG,IACpBpL,KAAK,GAAKyK,OAAOW,GAAG,MAKrBpL,KAAK,GAAKyK,OAAOW,IACjBpL,KAAK,GAAKyK,OAAOY,KAGXrL,MAQRA,KAAKsL,SAAW,SAAUC,QACzB,MAAiB5K,UAAb4K,OAAOlJ,GAAgC1B,SAAb4K,OAAOhJ,EAC7BX,KAAKC,SAASE,IACpBwJ,OAAOlJ,EAAIrC,KAAKqC,EAChBkJ,OAAOhJ,EAAIvC,KAAKuC,GAIX,MAQRvC,KAAK+K,QAAU,SAAUC,SAWxB,MAVIA,SAAQC,WAAa5L,SAAS6L,cACjCF,QAAQG,MAAM/I,KAAOpC,KAAKqC,EAC1B2I,QAAQG,MAAM7I,IAAMtC,KAAKuC,IAIzByI,QAAQ3I,EAAIrC,KAAKqC,EACjB2I,QAAQzI,EAAIvC,KAAKuC,GAGXvC,MASRA,KAAKwL,OAAS,SAAUC,QAASC,QAChC,GAAIrJ,GAAGE,EAAGoJ,GAOV,OALAA,KAAMD,QAAU3D,KAAK6D,GAAG,KAExBvJ,EAAIrC,KAAKqC,EAAIoJ,QAAQpJ,EACrBE,EAAIvC,KAAKuC,EAAIkJ,QAAQlJ,EAEdvC,KAAK6B,SAASE,IACnBgG,KAAK8D,IAAIF,KAAOtJ,EAAI0F,KAAK+D,IAAIH,KAAOpJ,EAAKkJ,QAAQpJ,EACjD0F,KAAK+D,IAAIH,KAAOtJ,EAAI0F,KAAK8D,IAAIF,KAAOpJ,EAAKkJ,QAAQlJ,MfmkBpDlE,QAAQ,Ye7jBQuK,oBAAWhH,UAAMO,af8jBjC7D,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBgBnlChCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,IAAAqB,YAAA,IhBylCZ,SAASjB,OAAQD,QAASH,qBiBzlChC,GAAAmC,GAAAnC,oBAAA,EACAI,QAAAD,QAAA,QAAA8H,kBAAA4F,EAAAC,GACA,MAAA3L,GAAA6F,SAAA6F,EAAAC,KjBgmCM,SAAS1N,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAQrB,IAAI0M,OAAQ/N,oBkBxmCI,IlB0mCZgO,OAASlN,uBAAuBiN,OAEhCE,YAAcjO,oBkB3mCD,IlB6mCbkO,aAAepN,uBAAuBmN,akBnmCvCE,WAAa,WAWhB,MAJArM,MAAKsM,SAAW,mBAEhBJ,OAAA,WAAKK,MAAMvM,KAAIoM,aAAA,YAERpM,MAELvB,QlB8mCFJ,SAAQ,WkB5mCMgO,WlB6mCd/N,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,SAEtBA,QAAQkB,YAAa,CmB7oCtB,IAAIiN,MAAO,GAAK,YAQfxM,KAAKuM,MAAQ,WACZ,GAAIE,QAAQvJ,EAAGwE,OAAQgF,IAKvB,KAHAhF,OAAS/F,UAAU,GACnB+K,QAAUtJ,MAAM3E,KAAKkD,UAAW,GAE3BuB,EAAE,EAAGA,EAAIwJ,KAAKjM,OAAQyC,GAAG,EAC7B,IAAKuJ,SAAUC,MAAKxJ,GACdwJ,KAAKxJ,GAAGyJ,eAAeF,UAC5B/E,OAAO+E,QAAUC,KAAKxJ,GAAGuJ,QAI3B,OAAO/E,SASR1H,KAAK4M,MAAQ,SAAUC,KAAMC,SAC5B,GAAIL,OAEJ,KAAKA,SAAUI,MACd,GAAKA,KAAKF,eAAeF,SACrBI,KAAKJ,UAAYK,QAAS,MAAOL,OAGtC,OAAO,OASRzM,KAAK+M,SAAW,SAAUF,KAAMC,SAC/B,GAAIjE,WAAWvE,IAKf,KAHAuE,UAAYpD,OAAOE,eAAekH,MAG3BhE,aAENvE,KAAOkI,KAAKI,MAAM/D,UAAWiE,WAO7BjE,UAAYpD,OAAOE,eAAekD,UAGnC,QACCvE,KAAMA,KACN0I,OAAQnE,YAiBV7I,KAAKiN,OAAS,SAAUC,mBAAoBC,SAC3C,GAAIC,OAAOC,GAIX,OAFAD,OAAQrF,KAAKuC,MAAMvC,KAAKkF,SAASC,mBAAmBzM,QAE3B,IAArBkB,UAAUlB,QACb4M,IAAMtF,KAAKuF,MAAMvF,KAAKkF,SAASE,SAElBD,mBAANG,IAA2BH,mBAAqBG,MAGpDD,QAAUF,mBAAmBzM,SAAQ2M,MAAQF,mBAAmBzM,OAAO,GAEpEyM,oBAAsBA,mBAAmBE,SASjDpN,KAAKuN,YAAc,SAAUC,IAAKC,YACjC,MAAID,MAAOC,WACHD,IAAIE,QAAQ,mBAAoB,SAAUC,QAChD,MAAOC,QAAOC,GAAGrM,gBAIZgM,KAAOA,IAAIE,QAAQ,UAAW,MAOtC1N,KAAK8N,MAAQ,WACZ,SAAUC,MAAMtP,KAAKkD,UAAW,SAAUqM,MAAQ,MAAe,OAARA,QAQ1DhO,KAAKiO,WAAa,SAAUC,SAC3B,GAAIC,QAAQC,KAAMC,KAElB,IAAuB,gBAAZH,SAAsB,MAAOA,QACxC,IAAKA,QA0BL,MAxBAC,QAASD,QAAQ/M,MAAM,OACvBiN,KAAO,EACPC,OACCtK,EAAG,MACHuK,EAAG,KACH5P,EAAG,IACH6P,EAAG,KAGJJ,OAAOrJ,QAAQ,SAAU0J,QACxB,GAAIC,MAAMlK,KAEVkK,OAAQD,OAAO/M,MAAM,eAAiB,GAElCgN,MACHlK,MAAQkG,OAAO+D,OAAOpL,MAAM,EAAG,KAC/BgL,MAAQ7J,MAAQ8J,MAAMI,OAItBL,MAAQ3D,OAAO+D,UAIVJ,MAQRpO,KAAK2E,QAAU,SAAU+J,aACxB,MAAO7J,OAAMgE,UAAUxF,IAAI5E,KAAKiQ,YAAa,SAAUxL,GAAK,MAAOA,MAqBpElD,KAAK2O,YAAc,SAAU9B,KAAM+B,OAClC,GAAIC,MAAMrP,IAAK0D,EAAGoB,KAAM8I,MAAO0B,SAM/B,KAJAD,KAAOD,MAAMzN,MAAM,KACnB3B,IAAMqN,KACN3J,EAAI,EAEG1D,MACNsP,UAAa,MAAOC,KAAKF,KAAK3L,IAC9BkK,OAASyB,KAAK3L,GAAGzB,MAAM,kBAAoB,IAAM,GACjD6C,MAAQ8I,MAAQyB,KAAK3L,GAAGE,MAAM,EAAGyL,KAAK3L,GAAGtC,QAAQ,MAAQiO,KAAK3L,GAC9D1D,IAAMA,IAAI8E,OAEL8I,OAAS5N,MACbA,IAAMsP,UAAatP,IAAI4N,QAAU5N,IAAOA,IAAI4N,QAG7ClK,GAAG,EAEC2L,KAAKpO,SAAWyC,KAGrB,MAAO1D,MAGRQ,KAAKgP,UAAY,SAAUnC,KAAM7I,MAAOiL,MACvC,GAAI3K,KAIJ,OAFAA,MAAOkI,KAAKe,YAAYvJ,OAAO,GAE3B6I,KAAKvI,QAAU2K,KAAaA,MAE5BpC,KAAKvI,OACHuI,KAAKvI,MAAM4K,mBACfrC,KAAKvI,OAASuI,KAAKvI,OAEnBmB,OAAOQ,eAAe4G,KAAKvI,MAAO,oBACjCC,OAAO,EACP4K,YAAY,EACZC,WAAW,EACXC,eAAe,KAIjBxC,KAAKvI,MAAM9D,KAAKyO,OAIhBpC,KAAKvI,MAAQ2K,KAGPpC,KAAKvI,QAMbtE,KAAKsP,KAAO,aAOZtP,KAAKuP,gBAAkB,SAAUX,OAChC,MAAOA,OAAMxL,MAAMwL,MAAMY,YAAY,KAAK,IAW3CxP,KAAKyP,SAAW,SAAUC,UACzB,OAAQA,UAAY,QAAQhC,QAAQ,SAAU,SAAUc,QACvD,MAAe,MAAXA,QAAwBzG,KAAKuC,MAAsB,EAAhBvC,KAAKkF,UAAgB,IAAI0C,SAAS,IAC1D,MAAXnB,OAAwBzG,KAAKuC,MAAsB,GAAhBvC,KAAKkF,UAAgB0C,SAAS,IAC9D5H,KAAKuC,MAAMvC,KAAKkF,SAAW2C,KAAKC,OAAOF,SAAS,IAAIvM,MAAM,EAAG,MnBypCtE/E,SAAQ,WmBnpCMmO,KnBopCdlO,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAI4R,gBAAiB5R,oBAAoB,IAAI,WAEzCc,uBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAOrB,IAAI0M,OAAQ/N,oBoBz7CI,IpB27CZgO,OAASlN,uBAAuBiN,OoBp7CjC8D,OAMHzD,SAAU,aAOVzK,OAAQ,QAAAA,UACP,MAAOiO,gBAAc9P,OAWtBiJ,OAAQ,QAAAA,QAAU+G,iBACjB,GAAI3G,SAEJ,KAAK2G,gBAAiB,MAAO,KAE7B,cAAeA,kBACd,IAAK,WACJA,gBAAgBnH,UAAY7I,KAC5BqJ,SAAW,GAAI2G,gBACf,MAED,KAAK,SACJ3G,SAAWrJ,KAAK6B,SAChBwH,SAASkD,MAAMyD,gBACf,MAED,SACCC,QAAQC,MAAM,4DAA8DF,kBAG9E,MAAO3G,WASRkD,MAAO,QAAAA,SACN,MAAOL,QAAA,WAAKK,MAAMxJ,MAAM,MAAO/C,MAAMmD,UAAUC,MAAM3E,KAAKkD,UAAW,MAStEiL,MAAO,QAAAA,OAAUE,SAChB,MAAOZ,QAAA,WAAKU,MAAM5M,KAAM8M,UASzBxD,MAAO,QAAAA,SACN,GAAI6G,QAAQ7L,KAAM8L,MAAOvH,SAqBzB,OAjBAsH,QAASnQ,KAAKsJ,MAAM+G,OAAOF,QAAUnQ,KAAKsJ,MAAM+G,QAI5C/L,KAAOtE,KAAK4M,MAAMuD,SACrBtH,UAAYpD,OAAOE,eAAe3F,OAKlCoQ,MAAQlE,OAAA,WAAKa,SAAS/M,KAAMmQ,QAC5B7L,KAAO8L,MAAM9L,KACbuE,UAAYpD,OAAOE,eAAeyK,MAAMpD,SAGzCmD,OAAStH,UAAUvE,MAEd6L,OAMEA,OAAOpN,MAAM/C,KAAM2B,YALzBsO,QAAQC,MAAM,qDAAsDlQ,KAAKsJ,MAAM+G,QAExE,OAYTC,IAAK,QAAAA,OACJ,GAAIH,QAAQ7L,KAAM8L,MAAOvH,SAkBzB,OAfAsH,QAASnQ,KAAKsQ,IAAID,OAClBD,MAAQlE,OAAA,WAAKa,SAAS/M,KAAMA,KAAKsM,UACjCzD,UAAYuH,MAAMpD,OAClB1I,KAAOtE,KAAK4M,MAAMuD,QAKb7L,OACJ8L,MAAQlE,OAAA,WAAKa,SAAS/M,KAAMmQ,QAC5B7L,KAAO8L,MAAM9L,MAGd6L,OAAStH,UAAUvE,MAEd6L,OAKEA,OAAOpN,MAAM/C,KAAM2B,YAJzBsO,QAAQC,MAAM,qDAAsDlQ,KAAKsQ,IAAID,QACtE,OAUTV,SAAU,QAAAA,YACT,GAAI9I,KASJ,OAPI7G,MAAKsM,UACRzF,KAAO7G,KAAKsM,SAASoB,QAAQ,QAAS,IACtC7G,KAAOA,KAAKzD,MAAM,EAAE,GAAGyD,KAAKzD,MAAM,GAAGlC,eAErC2F,KAAO7G,KAAKuQ,YAAYjM,MAAQ,SAG1B,WAAWuC,KAAK,KpBg8CxBxI,SAAQ,WoB37CM0R,MpB47CdzR,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBqBzmDhCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,IAAAqB,YAAA,IrB+mDZ,SAASjB,OAAQD,QAASH,qBsB/mDhC,GAAAmC,GAAAnC,oBAAA,EACAI,QAAAD,QAAA,QAAAwD,QAAAwF,EAAA2E,GACA,MAAA3L,GAAAwB,OAAAwF,EAAA2E,KtBsnDM,SAAS1N,OAAQD,SuBjmDvB,QAASmS,QAAOC,SAEZ,GAAIC,IAAK1Q,IACT0Q,IAAGC,GAAKD,GAAGhO,UAEXgO,GAAG5M,EAAI4M,GAAG3M,EAAI,EACd2M,GAAGpI,EAAIoI,GAAG/R,EAAI+R,GAAGhN,EAAIgN,GAAG/M,EAAI,EAE5B+M,GAAGD,QAAUA,QAGTA,SAASA,QAAQ3N,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GvBwlDpDzE,QAAQkB,YAAa,EuBrlDtBiR,OAAO3H,WASH1F,OAAQ,QAAAA,QAAUyN,IACd,MAAO5Q,MAAK6Q,QAAQF,GAAGC,GAAG9M,EAAG8M,GAAGtI,EAAGsI,GAAGjS,EAAGiS,GAAG7M,EAAG6M,GAAGlN,EAAGkN,GAAGjN,IAM5DmN,MAAO,QAAAA,SACH,MAAO9Q,MAAK2Q,GAAG,GAAI,EAAG,EAAG,EAAG,EAAG,IAMnCI,MAAO,QAAAA,SACH,MAAO/Q,MAAK2Q,GAAG,EAAG,EAAG,EAAG,GAAI,EAAG,IAanCK,cAAe,QAAAA,eAAU3O,EAAGE,GAExB,GAAI0O,GAAIjR,KAAKkR,aAAa,EAAG,GACzBnN,EAAI,GAAKkN,EAAE5O,EAAIA,EAAI4O,EAAE1O,EAAIA,EAK7B,OAHAF,IAAK0B,EAAIkN,EAAE5O,EACXE,GAAKwB,EAAIkN,EAAE1O,GAEHF,EAAGA,EAAGE,EAAGA,IAMrB4O,MAAO,QAAAA,SACH,MAAOnR,MAAK8C,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,IAO5C0I,OAAQ,QAAAA,QAAU4F,OACd,GAAItF,KAAM/D,KAAK+D,IAAIsF,OACfvF,IAAM9D,KAAK8D,IAAIuF,MACnB,OAAOpR,MAAK2Q,GAAG7E,IAAKD,KAAMA,IAAKC,IAAK,EAAG,IAU3CuF,iBAAkB,QAAAA,kBAAUhP,EAAGE,GAC3B,MAAOvC,MAAKwL,OAAOzD,KAAKuJ,MAAM/O,EAAGF,KAOrCkP,UAAW,QAAAA,WAAUH,OACjB,MAAOpR,MAAKwL,OAAO4F,MAAQrJ,KAAK6D,GAAK,MAOzC4F,OAAQ,QAAAA,QAAU7N,GACd,MAAO3D,MAAK2Q,GAAGhN,EAAG,EAAG,EAAGA,EAAG,EAAG,IAQlCE,MAAO,QAAAA,OAAU4N,GAAIC,IACjB,MAAO1R,MAAK2Q,GAAGc,GAAI,EAAG,EAAGC,GAAI,EAAG,IAOpCC,OAAQ,QAAAA,QAAUF,IACd,MAAOzR,MAAK2Q,GAAGc,GAAI,EAAG,EAAG,EAAG,EAAG,IAOnCG,OAAQ,QAAAA,QAAUF,IACd,MAAO1R,MAAK2Q,GAAG,EAAG,EAAG,EAAGe,GAAI,EAAG,IAQnCG,MAAO,QAAAA,OAAUJ,GAAIC,IACjB,MAAO1R,MAAK2Q,GAAG,EAAGe,GAAID,GAAI,EAAG,EAAG,IAOpCK,OAAQ,QAAAA,QAAUL,IACd,MAAOzR,MAAK2Q,GAAG,EAAG,EAAGc,GAAI,EAAG,EAAG,IAOnCM,OAAQ,QAAAA,QAAUL,IACd,MAAO1R,MAAK2Q,GAAG,EAAGe,GAAI,EAAG,EAAG,EAAG,IAQnCM,KAAM,QAAAA,MAAUC,GAAIC,IAChB,MAAOlS,MAAK6R,MAAM9J,KAAKoK,IAAIF,IAAKlK,KAAKoK,IAAID,MAO7CE,MAAO,QAAAA,OAAUH,IACb,MAAOjS,MAAK8R,OAAO/J,KAAKoK,IAAIF,MAOhCI,MAAO,QAAAA,OAAUH,IACb,MAAOlS,MAAK+R,OAAOhK,KAAKoK,IAAID,MAYhCpP,aAAc,QAAAA,cAAUgB,EAAGwE,EAAG3J,EAAGoF,EAAGL,EAAGC,GACnC,GAAI+M,IAAK1Q,IAOT,OANA0Q,IAAG5M,EAAIA,EACP4M,GAAGpI,EAAIA,EACPoI,GAAG/R,EAAIA,EACP+R,GAAG3M,EAAIA,EACP2M,GAAGhN,EAAIA,EACPgN,GAAG/M,EAAIA,EACA+M,GAAGtF,MAQd3H,UAAW,QAAAA,WAAU6O,GAAIC,IACrB,MAAOvS,MAAK2Q,GAAG,EAAG,EAAG,EAAG,EAAG2B,GAAIC,KAOnCC,WAAY,QAAAA,YAAUF,IAClB,MAAOtS,MAAK2Q,GAAG,EAAG,EAAG,EAAG,EAAG2B,GAAI,IAOnCG,WAAY,QAAAA,YAAUF,IAClB,MAAOvS,MAAK2Q,GAAG,EAAG,EAAG,EAAG,EAAG,EAAG4B,KAYlC7P,UAAW,QAAAA,WAAUgQ,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,IAErC,GAAIrC,IAAK1Q,KACLgT,GAAKtC,GAAG5M,EACRmP,GAAKvC,GAAGpI,EACR4K,GAAKxC,GAAG/R,EACRwU,GAAKzC,GAAG3M,EACRqP,GAAK1C,GAAGhN,EACR2P,GAAK3C,GAAG/M,CAcZ,OAPA+M,IAAG5M,EAAIkP,GAAKN,GAAKQ,GAAKP,GACtBjC,GAAGpI,EAAI2K,GAAKP,GAAKS,GAAKR,GACtBjC,GAAG/R,EAAIqU,GAAKJ,GAAKM,GAAKL,GACtBnC,GAAG3M,EAAIkP,GAAKL,GAAKO,GAAKN,GACtBnC,GAAGhN,EAAIsP,GAAKF,GAAKI,GAAKH,GAAKK,GAC3B1C,GAAG/M,EAAIsP,GAAKH,GAAKK,GAAKJ,GAAKM,GAEpB3C,GAAGtF,MAQdkI,OAAQ,QAAAA,QAAU5U,GAEd,IAAKA,EAAE6U,eACH,KAAM,gCAEV,IAAIC,IAAK9U,EAAE+U,SAEX,OAAOzT,MAAK2Q,GAAG6C,GAAG1P,EAAG0P,GAAGlL,EAAGkL,GAAG7U,EAAG6U,GAAGzP,EAAGyP,GAAG9P,EAAG8P,GAAG7P,IAQpD+P,aAAc,QAAAA,cAAU3P,GAEpB,GAAI2M,IAAK1Q,IAQT,OAPA0Q,IAAG5M,GAAKC,EACR2M,GAAGpI,GAAKvE,EACR2M,GAAG/R,GAAKoF,EACR2M,GAAG3M,GAAKA,EACR2M,GAAGhN,GAAKK,EACR2M,GAAG/M,GAAKI,EAED2M,GAAGtF,MASdqI,QAAS,QAAAA,WAEL,GAAIzT,KAAK2T,aACL,MAAO,IAAInD,OAEV,IAAKxQ,KAAKuT,eAGV,CACD,GAAI7C,IAAK1Q,KACL8D,EAAI4M,GAAG5M,EACPwE,EAAIoI,GAAGpI,EACP3J,EAAI+R,GAAG/R,EACPoF,EAAI2M,GAAG3M,EACPL,EAAIgN,GAAGhN,EACPC,EAAI+M,GAAG/M,EAEPjF,EAAI,GAAI8R,QACRoD,GAAK9P,EAAIC,EAAIuE,EAAI3J,CASrB,OAPAD,GAAEoF,EAAIC,EAAI6P,GACVlV,EAAE4J,GAAKA,EAAIsL,GACXlV,EAAEC,GAAKA,EAAIiV,GACXlV,EAAEqF,EAAID,EAAI8P,GACVlV,EAAEgF,GAAK/E,EAAIgF,EAAII,EAAIL,GAAKkQ,GACxBlV,EAAEiF,IAAMG,EAAIH,EAAI2E,EAAI5E,GAAKkQ,GAElBlV,EArBP,KAAM,6BAwCdmV,YAAa,QAAAA,aAAUC,GAAInR,EAAG8N,SAE1B,GAAIC,IAAK1Q,KACLtB,EAAI+R,QAAU,GAAID,QAAOC,SAAW,GAAID,OAS5C,OAPA9R,GAAEoF,EAAI4M,GAAG5M,GAAKgQ,GAAGhQ,EAAI4M,GAAG5M,GAAKnB,EAC7BjE,EAAE4J,EAAIoI,GAAGpI,GAAKwL,GAAGxL,EAAIoI,GAAGpI,GAAK3F,EAC7BjE,EAAEC,EAAI+R,GAAG/R,GAAKmV,GAAGnV,EAAI+R,GAAG/R,GAAKgE,EAC7BjE,EAAEqF,EAAI2M,GAAG3M,GAAK+P,GAAG/P,EAAI2M,GAAG3M,GAAKpB,EAC7BjE,EAAEgF,EAAIgN,GAAGhN,GAAKoQ,GAAGpQ,EAAIgN,GAAGhN,GAAKf,EAC7BjE,EAAEiF,EAAI+M,GAAG/M,GAAKmQ,GAAGnQ,EAAI+M,GAAG/M,GAAKhB,EAEtBjE,EAAE0M,MAmBb2I,gBAAiB,QAAAA,iBAAUD,GAAInR,EAAG8N,SAE9B,GAAIC,IAAK1Q,KACLtB,EAAI+R,QAAU,GAAID,QAAOC,SAAW,GAAID,QACxC2C,GAAKzC,GAAGsD,YACRnB,GAAKiB,GAAGE,YACRC,SAAWd,GAAGc,UAAYpB,GAAGoB,SAAWd,GAAGc,UAAYtR,EACvD6P,WAAaW,GAAG1P,UAAUpB,GAAKwQ,GAAGpP,UAAUpB,EAAI8Q,GAAG1P,UAAUpB,GAAKM,EAClE8P,WAAaU,GAAG1P,UAAUlB,GAAKsQ,GAAGpP,UAAUlB,EAAI4Q,GAAG1P,UAAUlB,GAAKI,EAClEgP,OAASwB,GAAGtP,MAAMxB,GAAKwQ,GAAGhP,MAAMxB,EAAI8Q,GAAGtP,MAAMxB,GAAKM,EAClDiP,OAASuB,GAAGtP,MAAMtB,GAAKsQ,GAAGhP,MAAMtB,EAAI4Q,GAAGtP,MAAMtB,GAAKI,CAOtD,OAJAjE,GAAE+E,UAAU+O,WAAYC,YACxB/T,EAAE8M,OAAOyI,UACTvV,EAAEmF,MAAM8N,OAAQC,QAETlT,EAAE0M,MAgBb4I,UAAW,QAAAA,WAAUE,OAEjB,GAAIxD,IAAK1Q,KACL8D,EAAI4M,GAAG5M,EACPwE,EAAIoI,GAAGpI,EACP3J,EAAI+R,GAAG/R,EACPoF,EAAI2M,GAAG3M,EACPoQ,KAAOpM,KAAKoM,KACZC,KAAOrM,KAAKqM,KACZvJ,KAAO9C,KAAK8C,KACZwJ,GAAKtM,KAAK6D,GAEVnI,WAAapB,EAAGqO,GAAGhN,EAAGnB,EAAGmO,GAAG/M,GAC5BsQ,SAAW,EACXpQ,OAASxB,EAAG,EAAGE,EAAG,GAClByP,MAAQ3P,EAAG,EAAGE,EAAG,GAEjB+R,OAASxQ,EAAIC,EAAIuE,EAAI3J,CAEzB,IAAIuV,MACIpQ,GACAkO,MAAQ3P,EAAG+R,KAAKzV,EAAImF,GAAIvB,EAAG6R,KAAK9L,EAAIxE,IACpCD,OAASxB,EAAGyB,EAAGvB,EAAG+R,OAASxQ,IAEtBwE,GACL2L,SAAgB,GAALI,GACXxQ,OAASxB,EAAGiG,EAAG/F,EAAG+R,OAAShM,GAC3B0J,KAAK3P,EAAI+R,KAAKrQ,EAAIuE,KAGlBzE,OAASxB,EAAG1D,EAAG4D,EAAGwB,GAClBiO,KAAK3P,EAAS,IAALgS,QAKb,IAAIvQ,GAAKwE,EAAG,CACR,GAAIiM,GAAI1J,KAAK/G,EAAIA,EAAIwE,EAAIA,EACzB2L,UAAW3L,EAAI,EAAI6L,KAAKrQ,EAAIyQ,IAAMJ,KAAKrQ,EAAIyQ,GAC3C1Q,OAASxB,EAAGkS,EAAGhS,EAAG+R,OAASC,GAC3BvC,KAAK3P,EAAI+R,MAAMtQ,EAAInF,EAAI2J,EAAIvE,IAAMwQ,EAAIA,QAEpC,IAAI5V,GAAKoF,EAAG,CACb,GAAIwK,GAAI1D,KAAKlM,EAAIA,EAAIoF,EAAIA,EACzBkQ,UAAgB,GAALI,IAAYtQ,EAAI,EAAIoQ,MAAMxV,EAAI4P,IAAM4F,KAAKxV,EAAI4P,IACxD1K,OAASxB,EAAGiS,OAAS/F,EAAGhM,EAAGgM,GAC3ByD,KAAKzP,EAAI6R,MAAMtQ,EAAInF,EAAI2J,EAAIvE,IAAMwK,EAAIA,QAGrC1K,QAASxB,EAAG,EAAGE,EAAG,EAI1B,QACIsB,MAAOA,MACPJ,UAAWA,UACXwQ,SAAUA,SACVjC,KAAMA,OAQdwC,YAAa,QAAAA,eACT,MAAOxU,MAAK8D,EAAI9D,KAAK+D,EAAI/D,KAAKsI,EAAItI,KAAKrB,GAW3CuS,aAAc,QAAAA,cAAU7O,EAAGE,GAEvB,GAAImO,IAAK1Q,IAET,QACIqC,EAAGA,EAAIqO,GAAG5M,EAAIvB,EAAImO,GAAG/R,EAAI+R,GAAGhN,EAC5BnB,EAAGF,EAAIqO,GAAGpI,EAAI/F,EAAImO,GAAG3M,EAAI2M,GAAG/M,IAsBpC8Q,aAAc,QAAAA,cAAUC,QAEpB,GAAIxR,GAAI,EAAGtE,EAAG+V,EACVC,WAEJ,IAAyB,gBAAdF,QAAO,GAId,IAFAC,EAAID,OAAOjU,OAEAkU,EAAJzR,GACHtE,EAAIoB,KAAKkR,aAAawD,OAAOxR,KAAMwR,OAAOxR,MAC1C0R,SAASpU,KAAK5B,EAAEyD,EAAGzD,EAAE2D,OAIzB,MAAO3D,EAAI8V,OAAOxR,GAAIA,IAClB0R,SAASpU,KAAKR,KAAKkR,aAAatS,EAAEyD,EAAGzD,EAAE2D,GAI/C,OAAOqS,WAaXC,kBAAmB,QAAAA,mBAAUH,OAAQI,OAMjC,IAJA,GAAI5R,GAAI,EAAGtE,EACP+V,EAAID,OAAOjU,OACXmU,SAAWE,MAAQ,GAAIC,cAAaJ,GAAK,GAAIK,cAAaL,GAEnDA,EAAJzR,GACHtE,EAAIoB,KAAKkR,aAAawD,OAAOxR,GAAIwR,OAAOxR,EAAI,IAC5C0R,SAAS1R,KAAOtE,EAAEyD,EAClBuS,SAAS1R,KAAOtE,EAAE2D,CAGtB,OAAOqS,WASXK,eAAgB,QAAAA,gBAAUxE,SACtB,GAAIC,IAAK1Q,IAET,OADAyQ,SAAQ3N,aAAa4N,GAAG5M,EAAG4M,GAAGpI,EAAGoI,GAAG/R,EAAG+R,GAAG3M,EAAG2M,GAAGhN,EAAGgN,GAAG/M,GAC/C+M,IAOXiD,WAAY,QAAAA,cACR,GAAIjD,IAAK1Q,IACT,OAAQ0Q,IAAGwE,GAAGxE,GAAG5M,EAAG,IACpB4M,GAAGwE,GAAGxE,GAAGpI,EAAG,IACZoI,GAAGwE,GAAGxE,GAAG/R,EAAG,IACZ+R,GAAGwE,GAAGxE,GAAG3M,EAAG,IACZ2M,GAAGwE,GAAGxE,GAAGhN,EAAG,IACZgN,GAAGwE,GAAGxE,GAAG/M,EAAG,IAOhB4P,aAAc,QAAAA,gBACV,OAAQvT,KAAKkV,GAAGlV,KAAKwU,cAAe,IAMxCW,QAAS,QAAAA,WACL,OAAQnV,KAAKkV,GAAGlV,KAAK8D,EAAI9D,KAAK+D,EAAG,IAQrC8M,MAAO,QAAAA,OAAUuE,WACb,GAAI1E,IAAK1Q,KACLtB,EAAI,GAAI8R,OASZ,OARA9R,GAAEoF,EAAI4M,GAAG5M,EACTpF,EAAE4J,EAAIoI,GAAGpI,EACT5J,EAAEC,EAAI+R,GAAG/R,EACTD,EAAEqF,EAAI2M,GAAG3M,EACTrF,EAAEgF,EAAIgN,GAAGhN,EACThF,EAAEiF,EAAI+M,GAAG/M,EACJyR,YAAW1W,EAAE+R,QAAUC,GAAGD,SAExB/R,GASX2W,QAAS,QAAAA,SAAU3W,GAEf,GAAIgS,IAAK1Q,KACLsV,EAAI5E,GAAGwE,EAEX,OAAQI,GAAE5E,GAAG5M,EAAGpF,EAAEoF,IAClBwR,EAAE5E,GAAGpI,EAAG5J,EAAE4J,IACVgN,EAAE5E,GAAG/R,EAAGD,EAAEC,IACV2W,EAAE5E,GAAG3M,EAAGrF,EAAEqF,IACVuR,EAAE5E,GAAGhN,EAAGhF,EAAEgF,IACV4R,EAAE5E,GAAG/M,EAAGjF,EAAEiF,IAOdgB,QAAS,QAAAA,WACL,GAAI+L,IAAK1Q,IACT,QAAQ0Q,GAAG5M,EAAG4M,GAAGpI,EAAGoI,GAAG/R,EAAG+R,GAAG3M,EAAG2M,GAAGhN,EAAGgN,GAAG/M,IAO7CX,MAAO,QAAAA,SACH,MAAO,UAAYhD,KAAK2E,UAAY,KAOxC4Q,QAAS,QAAAA,WACL,GAAI7E,IAAK1Q,IACT,OAAO,YAAc0Q,GAAG5M,EAAI,KAAO4M,GAAGpI,EAAI,WAAaoI,GAAG/R,EAAI,KAAO+R,GAAG3M,EAAI,uBAAyB2M,GAAGhN,EAAI,KAAOgN,GAAG/M,EAAI,WAO9H6R,OAAQ,QAAAA,UACJ,MAAOC,MAAKC,UAAU1V,KAAK2E,YAO/BgL,SAAU,QAAAA,YACN,MAAO,GAAK3P,KAAK2E,WAUrBuQ,GAAI,QAAAA,IAAU7B,GAAIN,IACd,MAAOhL,MAAK4N,IAAItC,GAAKN,IAAM,OAO/B3H,GAAI,QAAAA,MACA,GAAIsF,IAAK1Q,IAGT,OAFI0Q,IAAGD,SACHC,GAAGD,QAAQ3N,aAAa4N,GAAG5M,EAAG4M,GAAGpI,EAAGoI,GAAG/R,EAAG+R,GAAG3M,EAAG2M,GAAGhN,EAAGgN,GAAG/M,GACtD+M,KvB4mDdrS,QAAQ,WuBxmDMmS,OvBymDdlS,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBwBjzEhC,QAAS0X,oBACR,GAAIC,WAoBJ,OAjBCA,YADGC,WAAA,WAAKC,QAAQ,UAEfC,OAAQ,WACRC,YAAa,aACbC,UAAW,WACXC,YAAa,YACbC,WAAY,gBAIZJ,OAAQ,QACRC,YAAa,YACbC,UAAW,UACXC,YAAa,YACbC,WAAY,YxBkyEd,GAAIpX,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAarB,IAAI8W,WAAYnY,oBwB50EA,IxB80EZ4X,WAAa9W,uBAAuBqX,WAEpCpK,MAAQ/N,oBwB/0EI,IxBi1EZgO,OAASlN,uBAAuBiN,OAEhCE,YAAcjO,oBwBl1ED,IxBo1EbkO,aAAepN,uBAAuBmN,aAEtCmK,YAAcpY,oBwBr1ED,IxBu1EbqY,aAAevX,uBAAuBsX,aAEtC3W,iBAAmBzB,oBwBx1EI,IAExBkB,EAsCJA,KACC2Q,MAAK3D,aAAA,WAAEjK,MAAKxC,iBAAAwC,MAAEP,KAAIjC,iBAAAiC,KAAE4U,MAAKD,aAAA,WACzBxX,KAAI+W,WAAA,WACJtJ,KAAIN,OAAA,WAUJuK,MAAOb,oBxB21EPvX,QAAQ,WwBx1EMe,GxBy1Edd,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qByBl4EhC,QAASa,MAAMiF,MAAOgM,iBACjBjR,KAAK2X,WACRC,WAAW3S,MAAOgM,iBAIlB4G,SAAS5S,MAAOgM,iBAIlB,QAAS6G,OAAOC,YACf,MAAIC,aAAYtW,QAAe,MAC/B1B,MAAKiY,QAAQF,YAAc,SAS5B,QAASF,UAAU5S,MAAOgM,kBACnBiH,MAAMrW,QAAQoD,QACnBiT,MAAMzW,MACLjC,GAAIyF,MACJkT,eAAgBlH,kBAmBnB,QAAS2G,YAAYQ,iBAAkBnH,iBACtC,aAAemH,mBACd,IAAK,SACJC,mBAAA,WAAMD,kBAAoBE,YAAA,WACxBpO,OAAO+G,iBACP2G,WAAW,IAAIQ,iBACjB,MAED,KAAK,SACJA,iBAAiBrS,QAAQ,SAAUwS,MAAOtN,QACzC2M,WAAWW,MAAM/Y,GAAI+Y,MAAMJ,mBzB80E9B,GAAIlY,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAiBrB,IAAIgY,oBAAqBrZ,oByB16EJ,IzB46EjBsZ,oBAAsBxY,uBAAuBuY,oBAE7CE,iBAAmBvZ,oByB76EJ,IzB+6EfwZ,kBAAoB1Y,uBAAuByY,kBAE3CxL,MAAQ/N,oByBh7EI,IzBk7EZgO,OAASlN,uBAAuBiN,OAEhC0L,aAAezZ,oByBn7ED,IzBq7Ed0Z,cAAgB5Y,uBAAuB2Y,cAEvCE,kBAAoB3Z,oByBt7EQ,IzBw7E5BkZ,mBAAqBpY,uBAAuB6Y,mBAE5CC,aAAe5Z,oByBz7ED,IzB27Ed6Z,cAAgB/Y,uBAAuB8Y,cAEvCE,aAAe9Z,oByB57ED,IzB87Ed+Z,cAAgBjZ,uBAAuBgZ,cAEvCE,WAAaha,oByB/7ED,IzBi8EZmZ,YAAcrY,uBAAuBkZ,YAErCC,UAAYja,oByBl8EI,IzBo8EhBka,WAAapZ,uBAAuBmZ,WyBl8ErClB,MAAOoB,OAAQtB,WAuEnBE,UAEAoB,UAEAtB,eAQA,WAEC,GAAIuB,aAEJtY,MAAKuY,UAASf,oBAAA,WACdxX,KAAKwY,QAAOd,kBAAA,WAEZxL,OAAA,WAAKK,MAAMxN,KAAI6Y,cAAA,YAEf5X,KAAKyY,GAAG,iBAAkB,SAAUC,QACnCzI,QAAQ0I,IAAI,cAAeD,OAAOpU,KAAMoU,OAAOE,YAQhD5Y,KAAKnB,IAAM,WACVE,KAAK2X,YAAa,EAClB3X,KAAKiY,QAAQ,aAEbjY,KAAKwZ,UAAUM,QAAQ,WAEtBlC,WAAWM,OAEXA,MAAQ,OAGTmB,WAAA,WAASU,KAAKV,WAAA,WAASW,aAGxB/Y,KAAKgZ,OAAS,SAAUhV,OAGvB,MAFAoU,YAAA,WAASU,KAAK9U,OAEPhE,KAAKgZ,QAGbhZ,KAAKgZ,OAAOC,KAAO,SAAUC,YAI5B,MAHAd,YAAA,WAASe,cAAcD,WAAWE,YAClChB,WAAA,WAASU,KAAKV,WAAA,WAASiB,YAEhBrZ,MAGRA,KAAKgZ,OAAOM,KAAO,SAAUJ,YAI5B,MAHAd,YAAA,WAASe,cAAcD,WAAWE,YAClChB,WAAA,WAASU,KAAKV,WAAA,WAASmB,eAEhBvZ,MAkBRA,KAAKwZ,OAAS,SAAUC,YACvB,aAAeA,aACd,IAAK,SAAU,MAAOvN,QAAA,WAAKyC,YAAY0J,OAAQoB,WAC/C,KAAK,SACAA,YAAYvN,OAAA,WAAKK,MAAM8L,OAAQoB,YAGrC,MAAOzZ,OAQRA,KAAK0Z,kBAAoB,WACxB,MAAA3B,eAAA,YAQD/X,KAAK2Z,kBAAoB,WACxB,MAAA1B,eAAA,YAWDjY,KAAKC,MAAQ,SAAU2Z,QAStB,MARsB,kBAAXA,QACVA,OAAOnb,KAAI2Y,mBAAA,YAGHwC,QACRxC,mBAAA,WAAM7K,MAAMqN,QAGN5Z,MAQRA,KAAK6Z,MAAQ,SAAUvC,OAGtB,OAFMP,YAAYnW,QAAQ0W,QAAQP,YAAYvW,KAAK8W,OAE5CtX,MAGRA,KAAK6Z,MAAMC,SAAW,SAAUxC,MAAOR,YACtC,GAAI1J,MAOJ,OALAA,OAAQ2J,YAAYnW,QAAQ0W,OAC5BP,YAAYgD,OAAO3M,MAAO,GAE1ByJ,MAAMC,YAEC9W,MAaRA,KAAK+V,QAAW,WACf,GAAIiE,SACHC,MAAO,QAAAA,SACN,MAAO/a,QAAOyN,eAAe,eAI/B,OAAO,UAAU3I,OAChB,GAAIkW,QAASF,OAAOhW,MAEpB,QADKkW,QAAUjK,SAASA,QAAQkK,KAAK,6BAA6BnW,MAAM,MACjEkW,QAAUA,aAInBla,KAAKoa,gBAAkB,WAMtB,MALK9B,gBACJA,aAAe,IAAKpZ,OAAOmb,cAAgBnb,OAAOob,qBAI5ChC,cAGRtY,KAAKua,mBAAqB,WACzB,GAAI5T,KAAK6T,OAUT,OARA7T,KAAM3G,KAAKoa,kBACXI,QAAU7T,IAAI8T,qBAEdD,QAAQE,OAAS/T,IAAIgU,aAAa,EAAG,EAAG,OACxCH,QAAQI,QAAQjU,IAAIkU,aACpBL,QAAQM,QACRN,QAAQO,aAEDP,UAGN/b,KAAKM,MzB87EPV,QAAQ,WyB57EMU,KzB67EdT,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qB0B/sFhC,QAASqa,WAAWvU,MAAOgM,iBAS1B,MARKuI,WAAU/N,IAAIxG,QAClBgX,WAAWxa,MACV8D,KAAMN,MACNkT,eAAgBlH,gBAChBwJ,YAIKxZ,K1BwsFP,GAAIhB,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAWrB,IAAI0M,OAAQ/N,oB0B7uFI,I1B+uFZgO,OAASlN,uBAAuBiN,OAEhC0L,aAAezZ,oB0BhvFD,I1BkvFd0Z,cAAgB5Y,uBAAuB2Y,c0B5uFxCqD,UAoBJA,eAQA,WAEC9O,OAAA,WAAKK,MAAMvM,KAAI4X,cAAA,YAQf5X,KAAKwK,IAAM,SAAUxG,OACpB,GAAId,GAAG+X,MAEP,KAAK/X,EAAE,EAAG+X,OAASD,WAAW9X,GAAIA,GAAG,EACpC,GAAI+X,OAAO3W,OAASN,MAAO,MAAOiX,OAGnC,OAAO,OAYRjb,KAAKkb,KAAO,SAAUlX,MAAOmX,WAC5B,GAAItM,KAEJ,OAAI0J,WAAU/N,IAAIxG,QACbmX,WAAWA,UAAU1c,KAAK8Z,UAAWvU,OAClC,OAGR6K,KAAOzP,GAAGL,KAAKya,OAAO,sBAAsBxV,MAAM,eAElD3D,EAAE+a,UAAUvM,KAAM,WACbsM,WAAWA,UAAU1c,KAAK8Z,UAAWvU,OACzCuU,UAAUvB,QAAQ,UAAWhT,UAGvBhE,OAURA,KAAK6Y,QAAU,SAAUsC,WACxB,GAAIE,aAAaxB,KA0BjB,OAxBAwB,aAAchb,EAAE,kBAChBwZ,SAEAwB,YAAYlb,KAAK,SAAU6J,QAC1B,GAAI1F,KAEJA,MAAOjE,EAAEL,MAAMa,KAAK,iBAEfgZ,MAAMjZ,QAAQ0D,OAEnBuV,MAAMrZ,KAAK8D,QAGZuV,MAAMzW,MAAM,GAAG0B,QAAQ,SAAUd,OAChCuU,UAAU2C,KAAKlX,MAAO,WACrB,GAAIoJ,MAEJA,OAAQyM,MAAMjZ,QAAQoD,OACtB6V,MAAME,OAAO3M,MAAO,IAEfyM,MAAMpZ,QAAU0a,WAAWA,UAAUpY,MAAMwV,UAAW5W,eAItD3B,OAMNvB,KAAK8Z,W1BmvFPla,QAAQ,W0BjvFMka,U1BkvFdja,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAOrB,IAAI4M,aAAcjO,oB2Bh4FD,I3Bk4FbkO,aAAepN,uBAAuBmN,a2Bh4FvCmP,OAASlP,aAAA,WAAMnD,OAAO,WAQzB,QAASsS,qBAAqBvX,OAC7B,MAAO,YACN,GAAIwX,KAAMnb,GAKV,OAFAmb,KAAIhb,KAAKR,MAEFK,EAAEuE,GAAGZ,OAAOjB,MAAMyY,IAAK7Z,YAdhC,GAAIuB,GAAGiN,OAAQsL,OAsBf,KAJAA,SAAW,KAAM,MAAO,WAExBzb,KAAKsM,SAAW,cAEXpJ,EAAE,EAAGiN,OAASsL,QAAQvY,GAAIA,GAAG,EACjClD,KAAKmQ,QAAUoL,oBAAoBpL,S3Bs4FpC9R,SAAQ,W2Bl4FMid,O3Bm4Fdhd,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAErB,IAAImc,2BAA4Bxd,oB4Bj7FX,I5Bm7FjByd,2BAA6B3c,uBAAuB0c,0BAExDrd,S4Bn7FQud,UAASD,2BAAA,Y5Bu7FZ,SAASrd,OAAQD,QAASH,qB6Bj7FhC,QAAS2d,QACRC,yBACAC,eAGD,QAASA,gBACR,GAAI1a,OAAO2a,CAEXA,GAAI5c,GAAGqX,MAGe,cAAlBuF,EAAE7F,aAA6B4F,aAAaE,qBAEhD5b,EAAEhB,UACAoZ,GAAGuD,EAAE/F,YAAa,SAAUyC,QAC5B,GAAIwD,YAAYjc,MAAOkc,OAAQC,KAAMrd,KAAMyE,MAAOd,UAAW2Z,SAAUC,cAIvE,IAFAJ,WAAa7b,EAAEqY,OAAOhR,QAAQnH,QAAQ,kBAElC2b,WAAWzb,OAAQ,CAqCtB,OApCAR,MAAQic,WAAWjc,QACnBkc,OAASI,kBAAkB7D,OAAQ,EAAEzY,MAAMlB,KAAKyd;AAChDJ,KAAOF,WAAW9c,GAAG,aACrBL,MACCgB,SAAUE,MAAMlB,KAAKyD,mBACrBqB,MAAO5D,MAAMlB,KAAK6E,iBAAiBvB,GAEpCmB,MAAQ0Y,WAAW1Z,mBAAmBkH,IAAI3K,KAAKgB,UAC/C2C,UAAYwZ,WAAWxZ,YACvB2Z,SAAWI,WACXpb,OACC+a,KAAMA,KACNF,WAAYA,WACZjc,MAAOA,MACPyc,QAAS,KAET5B,OACCqB,OAAQA,OACR3Y,MAAOA,MACPd,UAAWA,WAGZ0W,UACC9N,SAAU,KACV9H,MAAO,KACPd,UAAW,OAOM,IAAf3D,KAAK8E,QAAaL,MAAQA,MAAMK,MAAM,EAAE9E,KAAK8E,QAEjD8Y,oBAAoBC,KAAMC,cAAeR,SAAUS,oBAAoBZ,cAE/DE,MACP,IAAK,QACJ/a,MAAMqb,QAAUR,WAAWrL,QAC3BxP,MAAMqb,QACJne,GAAG8d,UACHjd,GAAG,YAAa,MAChB2d,SAAS,oBACTC,SAAS3d,SAAS4d,MAClBza,iBAAiBgB,MACnB,MAED,KAAK,QACJ0Y,WAAWa,SAAS,WAEpB1b,MAAMqb,QAAUR,WAAWrL,QAC3BxP,MAAMqb,QACJne,GAAG8d,UACHjd,GAAG,YAAa,MAChB2d,SAAS,oBACTC,SAAS3d,SAAS4d,MAClBza,iBAAiBgB,MACnB,MAED,SACCnC,MAAMqb,QAAUR,WAIlB7a,MAAMqb,QAAQQ,YAAY,cACxBH,SAAS,cAEXT,eAAiBjc,EAAE8c,MAAM,cACxB9b,MAAOA,MACP+b,YAAand,QAGdA,MAAM+W,QAAQsF,mBAIf7D,GAAGuD,EAAE7F,YAAa,SAAUuC,QAC5B,GAAIyD,QAAQD,WAAY5Q,SAAU9H,MAAOd,UAAW2a,aAEhDhc,SACH8a,OAASI,kBAAkB7D,OAAQ,EAAErX,MAAMpB,MAAMlB,KAAKyd,MACtDlR,SAAWjK,MAAMyZ,MAAMqB,OAAO7Q,SAAS6Q,QACvC3Y,MAAQ7D,iBAAAwC,MAAMN,SACda,UAAY,KAEkB,SAA1BrB,MAAMyZ,MAAMpY,WACfA,UAAYrB,MAAMyZ,MAAMpY,UAAUmO,QAClCnO,UAAUe,UAAU6H,SAAStJ,MAAOsJ,SAASrJ,QAC7CuB,MAAMzB,IAAIW,UAAUwO,aAAa,EAAG,KAIpC1N,MAAQ8H,SAASxC,GAAG,SAGjBzH,MAAMqb,QAAQnb,SAAS,eAC1BF,MAAMqb,QACJQ,YAAY,cACZH,SAAS,YAGZM,cAAgBhd,EAAE8c,MAAM,aACvB9b,MAAOA,MACP+b,YAAa/b,MAAMpB,QAGpBoB,MAAM+X,SAAS9N,SAAWA,SAC1BjK,MAAM+X,SAAS5V,MAAQnC,MAAMyZ,MAAMtX,MAAM+F,IAAI/F,OAC7CnC,MAAM+X,SAAS1W,UAAYA,UAE3BrB,MAAMpB,MAAMwD,UAAUpC,MAAMqb,QAASlZ,OACrCnC,MAAMpB,MAAM+W,QAAQqG,kBAIrB5E,IAAIuD,EAAE9F,UAAW8F,EAAE5F,YAAYhV,KAAK,KAAM,SAAUsX,QACpD,GAAIwD,YAAYoB,YAEhB,IAAIjc,MAAO,CAEV,GAAoB,aAAhBqX,OAAO7R,SAA0B,KAAMxH,SAASke,iBAAiB3c,QAAQ8X,OAAO8E,WACnF,MAGDtB,YAAa7a,MAAM6a,WAEf7a,MAAMqb,QAAQnb,SAAS,qBAC1BF,MAAMqb,QAAQjE,GAAG,gBAAiB,WACjCyD,WAAWgB,YAAY,WACvB7c,EAAEL,MAAMyd,WAIVpc,MAAMqb,QACJQ,YAAY,uBACZH,SAAS,cAEXO,aAAejd,EAAE8c,MAAM,YACtB9b,MAAOA,MACP+b,YAAa/b,MAAMpB,QAGpBoB,MAAMpB,MAAM+W,QAAQsG,cAEpBjc,MAAQ,QAWZ,QAASkb,mBAAmB7D,OAAQ/O,QACnC,GAAI9F,OAAQ8F,QAAU,CAUtB,OARI+O,QAAOgF,eAAiBhF,OAAOgF,cAAcC,iBAKhDjF,OAAOuB,MAAQvB,OAAOgF,cAAcC,eAAejF,OAAOgF,cAAcC,eAAeld,OAAO,IAGxFd,iBAAAwC,MAAMN,SAASE,IAAI,GAAI,YACzB2W,OAAOuB,OACVja,KAAKqC,EAAIqW,OAAOuB,MAAM2D,QAAU/Z,MAChC7D,KAAKuC,EAAImW,OAAOuB,MAAM4D,QAAUha,QAEhC7D,KAAKqC,EAAIqW,OAAOkF,QAAU/Z,MAC1B7D,KAAKuC,EAAImW,OAAOmF,QAAUha,SAK7B,QAASiY,0BACRa,oBAAsBtc,EAAE,6DAA6D2c,SAAS3d,SAAS4d,MAGxG,QAASH,qBAAqBgB,aAC7B,GAAI5a,GAAGiI,MAAO4S,UAAWC,KAAMC,IAe/B,KAbA9S,MAAQjM,OAAOgf,iBAAiBJ,YAAY,IAC5CE,QACAD,WACC,SACA,UACA,SACA,aACA,kBACA,qBACA,qBACA,4BAGI7a,EAAE,EAAGA,EAAIiI,MAAM1K,OAAQyC,GAAG,EAC9B+a,KAAO/R,OAAA,WAAKqB,YAAYpC,MAAMjI,IAAI,IAC7B6a,UAAUnd,QAAQqd,QACQ,IAA3BA,KAAKrd,QAAQ,YAAiBqd,KAAOA,KAAK7a,MAAM,EAAE,GAAGlC,cAAc+c,KAAK7a,MAAM,IAC9E+H,MAAM8S,QAAOD,KAAKC,MAAQ9S,MAAM8S,OAGrC,OAAOD,MAGR,QAASnB,eAAerP,IAAK2Q,OAC5B,GAAIrX,QAAQmX,KAAM1Z,KAElBuC,QAAS,IAAI0G,IAAI,qBAEjB,KAAKyQ,OAAQE,OACPA,MAAMxR,eAAesR,QAC1B1Z,MAAQ4Z,MAAMF,MACdnX,QAAUmX,KAAKvQ,QAAQ,YAAa,OAAOxM,cAAc,KAAKqD,MAAM,IAKrE,OAFAuC,SAAU,IAKX,QAAS2V,YACR,MAAO,YAAY/O,QAAQ,OAAQ,SAAUc,QAC5C,MAAe,MAAXA,QAAwBzG,KAAKuC,MAAsB,EAAhBvC,KAAKkF,UAAgB,IAAI0C,SAAS,IAClE5H,KAAKuC,MAAMvC,KAAKkF,SAAW2C,KAAKC,OAAOF,SAAS,IAAIvM,MAAM,K7B6rFlE,GAAIpE,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAErB,IAAI0M,OAAQ/N,oB6B/7FI,I7Bi8FZgO,OAASlN,uBAAuBiN,OAEhCmS,iBAAmBlgB,oB6Bl8FD,I7Bo8FlBmgB,kBAAoBrf,uBAAuBof,kBAE3Cze,iBAAmBzB,oB6Br8FF,IAEhBogB,qBAAuBD,kBAAA,WAAWxc,SAEpC8a,mBA2KJZ,cAAaE,mBAAqB,WACjC5c,SAASC,iBAAiB,YAAa,SAAUoZ,QAChDA,OAAO6F,mBACL,GA8EJ,IAAIC,oBAIJne,GAAEwb,M7Bw6FDxd,QAAQ,W6Bt6FMmgB,iB7Bu6FdlgB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAQrB,IAAImJ,kBAAmBxK,oB8BzrGD,I9B2rGlByK,kBAAoB3J,uBAAuB0J,kB8BnrG5C+V,WAAa9V,kBAAA,WAAWM,OAAO,WAWlC,QAASyV,WAAW5R,QAAS6R,KAAMC,gBAClC,GAAI1b,GAAG+X,OAAQxO,OAAQvM,MAIvB,KAFAA,UAEKgD,EAAE,EAAG+X,OAASjb,KAAKkD,GAAIA,GAAG,EAC9B,GAAavC,SAATge,MACH,GAAI1D,OAAO0D,QAAU7R,QAAS,CAC7B,IAAI8R,eAKH,MAAO3D,OAJP/a,QAAOM,KAAKya,aASV,IAAIA,iBAAkBpW,QAC1B,IAAKoW,OAAOra,QAAQkM,SAAU,CAC7B,IAAI8R,eAKH,MAAO3D,OAJP/a,QAAOM,KAAKya,aAUd,KAAKxO,SAAUwO,QACd,GAAKA,OAAOtO,eAAeF,SACvBwO,OAAOxO,UAAYK,QAAS,CAC/B,IAAI8R,eAKH,MAAO3D,OAJP/a,QAAOM,KAAKya,QAWjB,MAAO/a,QAAOO,OAASP,OAAS,KASjCF,KAAKsM,SAAW,kBAEhBtM,KAAK6e,IAAM,SAAUC,SACpB,OAAK9e,KAAKY,QAAQke,UAAiB,GACnC9e,KAAKQ,KAAKse,SAEH9e,OAGRA,KAAKyd,OAAS,SAAUqB,SACvB,GAAI1R,MAKJ,OAHAA,OAAQpN,KAAKY,QAAQke,UAChB1R,OAAOpN,KAAK+Z,OAAO3M,MAAO,GAExBpN,MAGRA,KAAK+e,IAAM,SAAUD,SACpB,SAAU9e,KAAKY,QAAQke,UAGxB9e,KAAKwK,IAAM,SAAUsC,QAAS6R,MAC7B,MAAOD,WAAUjgB,KAAKuB,KAAM8M,QAAS6R,OAGtC3e,KAAKgf,OAAS,SAAUlS,QAAS6R,MAChC,MAAOD,WAAUjgB,KAAKuB,KAAM8M,QAAS6R,MAAM,K9BqrG5CtgB,SAAQ,W8BhrGMogB,W9BirGdngB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/BG,QAAQkB,YAAa,CAKrB,IAAI0f,aAAc/gB,oB+BxyGG,IAElBghB,YAAcD,YAAAE,MAAMlW,OAAO,WAE9BjJ,KAAKsM,SAAW,qB/B2yGhBjO,SAAQ,W+BvyGM6gB,Y/BwyGd5gB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBgCvxGhC,QAASkhB,cAAcC,OAAQrP,iBAC9B,GAAIuI,WAAW1P,UAAWyW,gBAAiBjW,QAK3C,IAHAkP,UAAY8G,OAAOxe,KAAK,gBACxBgI,UAAY7I,KAERuY,UAAW,CAGd,GAFA+G,gBAAkBxJ,WAAA,WAAKyC,UAAU/N,IAAI+N,YAEjC+G,gBAUH,KAAM,IAAIC,OAAM,oCAAoChH,UAAU,aAN1D+G,iBAAgBpI,iBAAmBlH,kBACtCnH,UAAY7I,KAAKiJ,OAAOqW,gBAAgBpI,iBAW3C,MAFA7N,UAAsC,kBAApB2G,iBAAiCnH,UAAUI,OAAO+G,iBAAmBnH,UAAUhH,SAE1FwH,SAASsN,WAAW0I,OAAQ9G,WhCgwGnC,GAAIvZ,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAgBrB,IAAIigB,eAAgBthB,oBgC9zGD,IhCg0GfuhB,eAAiBzgB,uBAAuBwgB,eAExCrT,YAAcjO,oBgCj0GD,IhCm0GbkO,aAAepN,uBAAuBmN,aAEtCmK,YAAcpY,oBgCp0GD,IhCs0GbqY,aAAevX,uBAAuBsX,aAEtC3W,iBAAmBzB,oBgCv0GF,IhCy0GjBmY,UAAYnY,oBgCx0GA,IhC00GZ4X,WAAa9W,uBAAuBqX,WAEpCpK,MAAQ/N,oBgC30GI,IhC60GZgO,OAASlN,uBAAuBiN,OAEhCyT,YAAcxhB,oBgC90GI,IhCg1GlByhB,aAAe3gB,uBAAuB0gB,aAEtCE,mBAAqB1hB,oBgCj1GG,IA8CzBihB,MAAQM,eAAA,WAAQxW,OAAO,WAW1B,QAAS4W,uBACR7f,KAAKyY,GAAGrZ,GAAGqX,MAAMT,OAAQ,SAAU0C,QAClC,GAAIhR,QAAQuT,MAEZvT,QAASrH,EAAEqY,OAAOhR,QAAQnH,QAAQ,eAAe,GAE7CmY,OAAOgF,eAAiBhF,OAAOgF,cAAcC,iBAKhDjF,OAAOuB,MAAQvB,OAAOgF,cAAcC,eAAejF,OAAOgF,cAAcC,eAAeld,OAAO,IAG/FiY,OAAOyD,OAASxc,iBAAAwC,MAAMN,SAASE,IAAI,GAAI,YAClC2W,OAAOuB,OACVja,KAAKqC,EAAIqW,OAAOuB,MAAM2D,QACtB5d,KAAKuC,EAAImW,OAAOuB,MAAM4D,UAEtB7d,KAAKqC,EAAIqW,OAAOkF,QAChB5d,KAAKuC,EAAImW,OAAOmF,WAIdnW,SACHuT,OAASjb,KAAK8f,YAAYC,KAAKrY,QAE3BuT,SACHvC,OAAO0E,YAAcpd,KACrBA,KAAKggB,MAAQtH,OACbiH,aAAA,WAAW1E,OAAOgF,OAAQjgB,MAC1BA,KAAKggB,MAAQ,SAMjB,QAASE,aAAavB,KAAM7R,QAAS4B,aACpC,GAAIxL,GAAG+X,MAEP,IAAIvM,YACH,IAAKxL,EAAE,EAAG+X,OAASvM,YAAYxL,GAAIA,GAAG,EACrC,GAAI+X,OAAO0D,QAAU7R,QAAS,MAAOmO,OAIvC,OAAO,MAGR,QAASkF,cAAcrB,QAASpQ,aAC/B,GAAItB,MAEJA,OAAQsB,YAAY9N,QAAQke,UACvB1R,OAAOsB,YAAYqL,OAAO3M,MAAO,GAGvC,QAASgT,kBAAkBC,QAC1B,GAAIC,WAaJ,OAXAA,eAEAD,OAAOE,KAAK,gBAAgBpgB,KAAK,WAChC,GAAImE,KAEJA,MAAOjE,EAAEL,MAAMa,KAAK,YAEpByf,WAAW9f,KAAKR,MAChBsgB,WAAWhc,MAAQtE,OAGbsgB,WAGR,QAASE,cAAcC,WAAYC,WAClCrgB,EAAEqgB,WAAWH,KAAK,aAAapgB,KAAK,WACnC,GAAIC,OAAOkE,KAAMqc,QAEjBvgB,OAAQC,EAAEL,MACVsE,KAAOlE,MAAMS,KAAK,WAClB8f,SAAWF,WAAWnc,MAElBqc,UACHvgB,MAAMwgB,YAAYD,SAASE,YAM9B,QAASC,qBAAqB9c,MAAOmX,WAGpC,QAAStE,SACRA,MAAMkK,QAAS,EAEXlK,MAAMkK,SAAWC,eAChB7F,WACHA,UAAU1c,KAAKwB,MAAO+D,OAPzB,GAAI/D,OAAO4O,KAAMmS,cAAeC,eAAgBC,SAsFhD,OA1EAF,eAAgB,EAChB/gB,MAAQD,KACR6O,KAAOiH,WAAA,WAAK0D,OAAO,sBAAsBxV,MAAM,IAC/Ckd,UAAYd,iBAAiBpgB,MAC7BihB,eAAiBC,UAAUzgB,OAAST,KAAKmhB,iBAAmBnhB,KAAKohB,WAAWC,WAC5ExK,MAAMkK,OAAS,IAEV/gB,KAAK6gB,WAAWpgB,QAAUwgB,kBAC9BD,eAAe,EACf3gB,EAAE,SAAS6a,KAAKrM,KAAK,gBAAiB,WACrC,GAAIyS,OAIJ,QAFAA,UAEQL,gBACP,IAAKhhB,OAAMshB,kBACVthB,MAAMuhB,OAAOxhB,KAAK6gB,SAClB,MAED,KAAK5gB,OAAMwhB,mBACVxhB,MAAMyhB,QAAQ1hB,KAAK6gB,SACnB,MAED,KAAK5gB,OAAMkhB,iBACVX,aAAaU,UAAWlhB,MACxBC,MAAM0hB,QAAQH,OAAOxhB,KAAK6gB,SAC1B,MAED,KAAK5gB,OAAM2hB,mBACV3hB,MAAM0hB,QAAQH,OAAOxhB,KAAK6gB,SAC1B,MAED,SACKI,gBACHT,aAAa,GAAK,YACjBxgB,KAAKihB,gBAAkBhhB,MAAM4hB,QAC1B7hB,MACJC,MAAM0hB,QAAQH,OAAOxhB,KAAK6gB,WAI1B5gB,MAAM0hB,QAAQH,OAAOxhB,KAAK6gB,UAK7B5gB,MAAM6hB,QAAQ,kBAAkB3hB,KAAK,WACpC,GAAImE,KAEJA,MAAOjE,EAAEL,MAAMa,KAAK,iBAEfygB,OAAO1gB,QAAQ0D,QAEpBgd,OAAO9gB,KAAK8D,MAEZ0c,eAAe,EAEflL,WAAA,WAAKyC,UAAU2C,KAAK5W,KAAM,WACzBuS,aAGFA,WAIGxW,EAAE,2BAA2B2D,MAAM,MAAMvD,QAAUqV,WAAA,WAAK0D,OAAO,gCAAiC,IACpGwH,eAAe,EACf3gB,EAAE,4CAA4C2D,MAAM,MAClDkX,KAAKrM,KAAK,YAAagI,OACvBmG,SAAS3d,SAAS4d,OAGhB+D,eAAe7F,WAAaA,UAAU1c,KAAKuB,KAAMgE,OAE/ChE,KAGR,QAAS+hB,qBACR,GAAI7e,GAAGrC,KAAMyD,KAAMgc,UAYnB,KAVAA,WAAa,WAMZ,MAJAtgB,MAAK+e,IAAM,SAAU/a,OACpB,SAAUhE,KAAKY,QAAQoD,QAGjBhE,MAELvB,SAEEyE,EAAE,EAAGrC,KAAOb,KAAKgiB,KAAK,GAAG5d,WAAWlB,GAAIA,GAAG,EAEd,IAA7BrC,KAAKyD,KAAK1D,QAAQ,SACrB0D,KAAOzD,KAAKyD,KAAKlB,MAAM,GACvBkd,WAAWpU,OAAA,WAAKqB,YAAYjJ,MAAM,IAASzD,KAAK0D,MAEhD+b,WAAW9f,KAAK8D,MAMlB,OAFIgc,YAAW7f,SAAQT,KAAKohB,WAAad,YAElCtgB,KAGR,QAASiiB,sBACR,MAAKjiB,MAAK2M,eAAe,aAEzB3M,KAAKkiB,SAASpd,QAAQ9E,KAAKmiB,KAAK,SAAUrD,QAAS9U,QAClD,GAAIoY,QAAQC,MAAOjV,KAMnB,KAJAgV,OAASpiB,KAAK8hB,QAAQhD,QAAQwD,UAC9BD,OAAS,IAAIvD,QAAQwD,SAAU,UAAUxD,QAAQwD,SAAS,IAAK,iBAAiBxD,QAAQwD,SAAS,IAAK,OAAOxD,QAAQwD,SAAS,KAC9HlV,MAAQ,GAEAgV,OAAO3hB,QAAQ,CACtB,GAAI2M,QAAUiV,MAAM5hB,OACnB,KAAM,IAAI8e,OAAM,wCAAyCT,QAAQwD,SAElEF,QAASpiB,KAAK8hB,QAAQO,MAAMjV,QAC5BA,OAAO,EAGRgV,OAAOjiB,KAAKH,KAAKmiB,KAAK,SAAUnY,OAAQuY,OACvC,GAAIniB,OAAOiJ,SAAU9K,EAErB6B,OAAQC,EAAEkiB,OAELpD,MAAMnW,cAAc8V,SAIxBzV,SAAWyV,SAHXzV,SAAW+V,aAAa3gB,KAAKuB,KAAMI,MAAO0e,QAAQ5H,gBAC7C7N,SAASmZ,SAASxiB,KAAKyiB,WAAW5D,IAAIxV,WAK5C9K,GAAK2N,OAAA,WAAKqB,YAAYlE,SAAS9K,MAAM,GACjCA,IAAI2N,OAAA,WAAK8C,UAAUhP,KAAMzB,GAAI8K,gBAI5BrJ,MAlCsCA,KAqC9C,QAAS0iB,oBACR,GAAIziB,OAAO0iB,SAAUC,OAWrB,IATA3iB,MAAQD,KAEJA,KAAK2M,eAAe,eACvB3M,KAAKohB,WAAWtc,QAAQ,SAAUd,OACjC4e,QAAU3iB,MAAM4iB,iBAAiB7e,OAC7B4e,SAASA,QAAQnkB,KAAKwB,MAAOA,MAAM+hB,KAAK,GAAIhe,MAAO/D,MAAMmhB,WAAWpd,UAItEhE,KAAK6iB,iBACR,IAAKF,WAAY3iB,MAAK6iB,iBAEjBzW,aAAA,WAAMO,eAAegW,YAEzBC,QAAU5iB,KAAK6iB,iBAAiBF,UAEhC3iB,KAAK8hB,QAAQ,OAAOa,SAAS,KAAKxiB,KAAK,WACtC,GAAIU,KAEAZ,SAAUI,EAAEL,MAAMC,UACrBY,KAAOb,KAAKoE,WAAW0e,aAAa,MAAMH,UAEtCC,SAASA,QAAQnkB,KAAKwB,MAAOD,KAAM2iB,SAAU9hB,KAAK0D,UAM1D,OAAOvE,MAGR,QAAS+iB,aAAa/e,OACrB,GAAIE,MAAMkM,KAIV,OAFAlM,SAAUd,MAAM3E,KAAKkD,UAAW,GAE5B3B,KAAKgjB,aAAahf,OACdhE,KAAKgE,OAAOjB,MAAM/C,KAAM2B,WADhC,OAKD,QAASshB,QACR,GAAIC,eAAeC,SAwBnB,OAtBAA,WAAY9iB,EAAE8c,MAAM,cAAgBC,YAAapd,OACjDkjB,cAAgB7iB,EAAE8c,MAAM,mBAAqBC,YAAapd,OAE1D+iB,YAAYtkB,KAAKuB,KAAM,YACvBA,KAAKgX,QAAQkM,eAEbljB,KAAK+b,eAELkG,mBAAmBxjB,KAAKuB,MACxB0iB,iBAAiBjkB,KAAKuB,MAEtBA,KAAKojB,cACLpjB,KAAKqjB,qBACLrjB,KAAKsjB,oBAELtjB,KAAKujB,SACLR,YAAYtkB,KAAKuB,KAAM,QAEvBA,KAAKgX,QAAQmM,WAERnjB,KAAKwiB,SAASxiB,KAAKyiB,WAAW5L,QAE5B7W,KAGR,QAAS6W,SACR,GAAI2M,YAAYtB,QAEhBsB,YAAanjB,EAAE8c,MAAM,SAAWC,YAAapd,OAC7CkiB,SAAWliB,KAAK8hB,QAAQ,aAAa7hB,QAEjCiiB,WACCA,SAASzhB,OAAS,EACrBT,KAAKkiB,SAAWA,SAEhBliB,KAAKkiB,UAAYA,WAQfliB,KAAK2M,eAAe,YACtB3M,KAAKjB,MAAQiB,MAAMyjB,MAAMC,UAAU1jB,KAAK2jB,OACzC3jB,KAAK2jB,MAAMC,cAAc9e,QAAQ,SAAU4J,aAC1C,GAAIrL,MACHwgB,UAAW,aACXC,WAAY,aACZC,IAAK,MAGDrV,aAAYjO,QAEjBT,KAAK8hB,QAAQ,SAASze,IAAIqL,YAAY7H,OAAO1G,KAAK,SAAU6J,OAAQuY,OACnE,GAAIhkB,IAAIolB,MAAOrD,WAAYlT,KAE3B7O,IAAK8B,EAAEkiB,OAAOhkB,KACdolB,OAASjV,YAAY6R,KAAK,IAAIhiB,SAAW,GACzC6O,MAAQsB,YAAY9N,QAAQ+iB,OAExBvW,QAAUpD,SACb0E,YAAYtB,OAASsB,YAAY1E,QACjC0E,YAAY1E,QAAU2Z,UAGvBxB,KAAKniB,QAGRA,KAAKwiB,SAAU,EACfxiB,KAAK+c,SAAS,SAEd/c,KAAKgkB,UACLjB,YAAYtkB,KAAKuB,KAAM,SAEvBA,KAAKgX,QAAQwM,YAhXd,GAAIS,YAmXJA,aAAc,WAqCb,MAnCA/X,QAAA,WAAKK,MAAMvM,KAAIoM,aAAA,YAEfpM,KAAK6e,IAAM,SAAU0D,MAAO2B,SAQ3B,MAPKlkB,MAAK+e,IAAIwD,QACbviB,KAAKQ,MACJqhB,KAAMU,MACNtC,OAAQiE,UAIHlkB,MAGRA,KAAKyd,OAAS,SAAU8E,OACvB,GAAIxC,MAAM3S,KAMV,OAJA2S,MAAO/f,KAAK+f,KAAKwC,OACjBnV,MAAQpN,KAAKY,QAAQmf,OAChB3S,OAAOpN,KAAK+Z,OAAO3M,MAAO,GAExBpN,MAGRA,KAAK+f,KAAO,SAAUwC,OACrB,GAAIrf,GAAG6c,IAEP,KAAK7c,EAAE,EAAG6c,KAAO/f,KAAKkD,GAAIA,GAAG,EAC5B,GAAI6c,KAAK8B,OAASU,MAAO,MAAOxC,OAIlC/f,KAAK+e,IAAM,SAAUwD,OACpB,QAASviB,KAAK+f,KAAKwC,QAGbviB,MAELvB,SAEHuB,KAAK4hB,mBAAqB,UAC1B5hB,KAAKyhB,mBAAqB,UAC1BzhB,KAAKuhB,kBAAoB,SACzBvhB,KAAKmhB,iBAAmB,QAExBnhB,KAAKsM,SAAW,aAChBtM,KAAK8f,YAAc,KACnB9f,KAAKwiB,QAAU,KACfxiB,KAAKmkB,aAAc,EACnBnkB,KAAKkiB,SAAW,KAChBliB,KAAK2jB,MAAQ,KACb3jB,KAAKohB,WAAa,KAClBphB,KAAK6iB,iBAAmB,KACxB7iB,KAAKyiB,WAAa,KAClBziB,KAAKggB,MAAQ,KACbhgB,KAAKokB,gBAELpkB,KAAK2W,WAAa,SAAU0N,eAAgBC,gBAC3C,GAAIrkB,MAUJ,IARAA,MAAQD,KAERA,KAAKwiB,SAAU,EACfxiB,KAAKmkB,cAAgBG,eACrBtkB,KAAKggB,MAAQ,KACbhgB,KAAKyiB,WAAalM,aAAA,WAAM1U,SACxB7B,KAAKgiB,KAAQqC,eAAeE,OAAUF,eAAiBhkB,EAAEgkB,iBAEpDrkB,KAAKgiB,KAAKvhB,OACd,KAAM,IAAI+jB,gBAAe,8CAA8CxkB,KAAKgiB,KAAKM,SAAS,IAmB3F,OAhBAtiB,MAAK+c,SAAS,aAAauH,eAAiBA,eAAe,aAAe,KAC1EtkB,KAAKM,KAAK,WAAYN,MACtBA,KAAKM,KAAK,mBAAoBgkB,gBAE9BvC,kBAAkBtjB,KAAKuB,MAEnBskB,eACHxD,oBAAoBriB,KAAKuB,KAAMskB,eAAgB,WAC9CrB,KAAKxkB,KAAKuB,QAKXijB,KAAKxkB,KAAKuB,MAGJA,MAIRA,KAAKujB,OAAS,WAAc,MAAOvjB,OACnCA,KAAKgkB,QAAU,WAAc,MAAOhkB,OAEpCA,KAAKykB,SAAW,WAAc,MAAOzkB,OACrCA,KAAKijB,KAAO,WAAc,MAAOjjB,OACjCA,KAAK6W,MAAQ,WAAc,MAAO7W,OAElCA,KAAKojB,YAAc,SAAUsB,QAC5B,GAAIC,eAAeC,KAyBnB,OAvBAD,eAAgB3kB,KAAKmiB,KAAK,SAAUI,OACnC,MAAO,YACN,GAAIsC,aAAcxkB,EAAE8c,MAAM,UAAYC,YAAapd,MAEnDA,MAAKyiB,WAAW5L,MAAM0L,MAAMuC,KAC5B9kB,KAAKgX,QAAQ6N,aAActC,QAE3BA,MAAMwC,OAAS,MACb5C,KAAKniB,QAGT4kB,MAAQ5kB,KAAKmiB,KAAK,SAAUnY,OAAQuY,OACnC,GAAIV,MAAyB,gBAAX7X,QAAsBuY,MAAQvY,MAE1B,SAAlB6X,KAAK5gB,UAAsB4gB,KAAK/H,UAChC9Z,KAAKyiB,WAAW5D,IAAIgD,KAAKiD,OAC5BjD,KAAKkD,OAASJ,cAAc9C,MAC5BA,KAAKmD,QAAU,WACd/U,QAAQC,MAAM,uBAAwB2R,KAAKiD,SAK1CJ,QACHA,OAAO5f,QAAQ8f,OACR5kB,OAGRA,KAAKG,KAAKykB,OACV5kB,KAAK8hB,QAAQ,OAAO3hB,KAAKykB,OAElB5kB,OAGRA,KAAK+b,aAAe,WAiBnB,MAfA/b,MAAKsJ,QAELtJ,KAAKyiB,WAAWhK,GAAG,WAAYzY,KAAKmiB,KAAK,WACxCniB,KAAKyiB,WAAWwC,MAChBpO,MAAMpY,KAAKuB,SAGZA,KAAKyY,GAAG,QAAS,SAAUC,QACtB1Y,KAAK+e,IAAIrG,OAAO0E,cAAgBpd,KAAKyiB,WAAW1D,IAAIrG,OAAO0E,cAC9Dpd,KAAKyiB,WAAW5L,MAAM6B,OAAO0E,cAGzBpd,KAAKyiB,WAAWhiB,QAAUT,KAAKwiB,SAASxiB,KAAKilB,IAAI,WAGhDjlB,MAGRA,KAAKsjB,kBAAoB,WACxBtjB,KAAK8hB,QAAQ,iBAAiB3hB,KAAKH,KAAKmiB,KAAK,SAAUnY,OAAQuY,OAC9D,GAAIniB,OAAO7B,EAEY,WAAnBgkB,MAAMthB,WAEVb,MAAQC,EAAEkiB,OACVhkB,GAAK6B,MAAMS,KAAK,OAAST,MAAMS,KAAK,SAE/Bb,KAAKzB,KACT2N,OAAA,WAAK8C,UAAUhP,KAAMzB,GAAI6B,MAAME,KAAK,aAAeF,YAKtDJ,KAAKqjB,mBAAqB,WACzB,GAAI6B,KAAKC,MAET,QAAMA,OAASnlB,KAAK8hB,QAAQ,UAAUrhB,QAEtCykB,IAAM,SAAU5N,QACdtX,KAAMA,KAAKolB,QAAQtgB,QAAQ,SAAUub,QACjCA,OAAOgF,eAAiBhF,OAAO2C,aAAa,kBAAoB3C,OAAOgF,cAActG,IAAIzH,QAC5F+I,OAAOgF,cAAcxO,MAAMS,UAG5B6K,KAAKniB,MAEPA,KAAK2jB,MAAQ/D,mBAAA0F,aAAazjB,OAAO7B,KAAKzB,MAEtC4mB,OAAOhlB,KAAK,SAAU6J,OAAQuY,OAC7BviB,KAAKyiB,WAAW5D,IAAI0D,MAAMuC,KAC1B9kB,KAAK2jB,MAAMiB,MAAMrC,OAAOgD,KAAK,SAAUC,QACtC,GAAIX,aAAcxkB,EAAE8c,MAAM,UAAYzV,OAAQ6a,MAAOnF,YAAapd,MAE9DK,GAAEkiB,OAAOkD,GAAG,kBAAkBzlB,KAAKolB,OAAOM,QAAQF,QAElDxlB,KAAKyiB,WAAW1D,IAAIwD,MAAMuC,MAAM9kB,KAAKyiB,WAAW5L,MAAM0L,MAAMuC,KAEhE9kB,KAAKgX,QAAQ6N,cACZ1C,KAAKniB,QACNmiB,KAAKniB,OAGPA,KAAK2jB,MAAMlL,GAAG,2BAA4BzY,KAAKmiB,KAAK,SAAUzJ,QAC7D,GAAIrV,MACHygB,WAAY,aACZD,UAAW,aACXE,IAAK,MAGN,QAAQrL,OAAO7R,MACd,IAAK,QACH7G,KAAMA,KAAKolB,QAAQtgB,QAAQ,SAAUub,OAAQrW,OAAQtJ,OACtC,IAAXsJ,QAAgBqW,SAAW3f,KAAK,KAChC2f,OAAO2B,OACV3B,OAAOtD,SAAS,WAAW1Z,IAAIqV,OAAOhR,OAAOb,OAC7CwZ,OAAO+D,aAAa/gB,IAAIqV,OAAOhR,OAAOb,OAAS6R,OAAOhR,UAIxDrH,EAAEqY,OAAOiN,YAAY5I,SAAS,UAC9B,MAED,KAAK,QACL,IAAK,UACL,IAAK,SACH/c,KAAMA,KAAKolB,QAAQtgB,QAAQ,SAAUub,OAAQrW,OAAQtJ,MACrD,GAAIW,QAEW,IAAX2I,QAAgBqW,SAAW3f,KAAK,KAEhC2f,OAAO2B,OACV3B,OAAOnD,YAAY7Z,IAAIqV,OAAOhR,OAAOb,OACrCxF,MAAQgf,OAAOxf,KAAK,SACd,4BAA6BkO,KAAK1N,QAAQgf,OAAOnD,YAAY,WAChEmD,OAAO+D,aAAa/gB,IAAIqV,OAAOhR,OAAOb,SAAW6R,OAAOhR,SAAQ2Y,OAAO+D,aAAa/gB,IAAIqV,OAAOhR,OAAOb,OAAS,SAIpHxG,EAAEqY,OAAOiN,YAAYzI,YAAY,WACb,UAAhBxE,OAAO7R,MAAkBqe,IAAIxM,OAAOhR,QAI1C,GAAIke,YAAavlB,EAAE8c,MAAM,SAASzE,OAAO7R,MACxCa,OAAQgR,OAAOhR,OACfme,aAAcnN,OAAOmN,aACrBF,WAAYjN,OAAOiN,WACnBvI,YAAapd,MAGdA,MAAKgX,QAAQ4O,eAGP5lB,OA7E8C,GAgFtDA,KAAK8lB,eAAiB,SAAU9V,iBAC/B,GAAIhQ,KAAK6iB,iBACR,GAAI7iB,KAAK2M,eAAe,oBACvB,aAAeqD,kBACd,IAAK,WACJA,gBAAgBvR,KAAKuB,KAAK6iB,iBAC1B,MAED,KAAK,SACJ7iB,KAAK6iB,iBAAiBtW,MAAMyD,qBAM9BhQ,MAAK6iB,iBAAmB7iB,KAAK6iB,iBAAiB5Z,OAAO+G,qBAKtDhQ,MAAK6iB,iBAAmBzW,aAAA,WAAMnD,OAAO+G,gBAGtC,OAAOhQ,OAGRA,KAAK+lB,OAAS,SAAUC,UAAWhW,iBAClC,GAAIiW,QAAQpd,UAAWtK,EAMvB,IAJA0nB,OAASnQ,WAAA,WAAK4D,oBAET1Z,KAAK2M,eAAe,cAAa3M,KAAKkiB,aAEvCliB,KAAK2M,eAAe,QACvB,KAAM,IAAI4S,OAAM,gCAgBjB,OANCvf,MAAKkiB,SAAS1hB,MACb8hB,SAAU0D,UACV9O,eAAgBlH,kBAIXhQ,MAGRA,KAAK+e,IAAM,SAAUmH,QACpB,GAAIC,MAIJ,OAFAA,OAAQhH,MAAMnW,cAAckd,QAAUA,OAAOlE,KAAOkE,SAE3ClmB,KAAKgiB,KAAKjD,IAAIoH,OAAO1lB,QAG/BT,KAAK2P,SAAW,WACf,GAAI9I,KAKJ,OAHAA,MAAO7G,KAAKsM,SAASoB,QAAQ,QAAS,IACtC7G,KAAOA,KAAKzD,MAAM,EAAE,GAAGyD,KAAKzD,MAAM,GAAGlC,eAE7B,IAAKlB,KAAKzB,MAAQyB,KAAKc,UAAW,IAAK+F,KAAM,KAAKzF,KAAK,KAGhEpB,KAAK2Y,IAAM,WACV,GAAIzU,KAKJ,OAHAA,MAAOgI,OAAA,WAAKvH,QAAQhD,WAEpBsO,QAAQ0I,IAAI5V,MAAMkN,SAAUjQ,KAAKzB,MAAQyB,KAAKc,UAAW,KAAKqC,OAAOe,OAC9DlE,MAGRA,KAAK8lB,eAAe,WAEnB9lB,KAAKuY,UAAY,SAAUgK,MAAOve,MAAOC,OAAQmiB,WAChD,GAAIhmB,OAAO6a,OAAQhb,MAAO1B,EAI1B,IAFA6B,MAAQC,EAAEkiB,QAELniB,MAAME,KAAK,kBAAmB,CAGlC,GAFA2a,OAASnF,WAAA,WAAKyC,UAAU/N,IAAIvG,SAExBgX,OASH,KAAM,IAAIsE,OAAM,OARhBtf,OAAQmf,aAAa3gB,KAAKuB,KAAMI,MAAO6a,OAAO/D,gBAC9C3Y,GAAK2N,OAAA,WAAKqB,YAAYtN,MAAM1B,MAAQ0F,QAAQ,GAC5CiI,OAAA,WAAK8C,UAAUhP,KAAMzB,GAAI0B,OAEpBA,MAAMuiB,SAASxiB,KAAKyiB,WAAW5D,IAAI5e,SAS3CD,KAAKigB,OAAS,SAAUsC,MAAOve,MAAOC,QAChCjE,KAAK2M,eAAe,iBACxB3M,KAAK8f,YAAcmE,YAAYpiB,SAC/Bge,oBAAoBphB,KAAKuB,OAG1BA,KAAK8f,YAAYjB,IAAI0D,MAAOte,SAG7BjE,KAAKqmB,SAAW,SAAU9D,MAAOve,MAAOC,QACnCjE,KAAKylB,GAAGlD,QACXviB,KAAKolB,OAAOM,QAAQ1lB,OAItBA,KAAK0lB,QAAU,SAAUnD,MAAOve,MAAOC,QACtC,GAAIoe,OAAOjiB,KAGPJ,MAAKylB,GAAGlD,SACXF,MAAQ,iDAAiD3U,QAAQ,UAAWzJ,QAC5E7D,MAAQJ,KAAKugB,KAAK8B,OAElBjiB,MAAMqY,GAAG,QAASzY,KAAKmiB,KAAK,SAAUzJ,QACjCtY,MAAMqlB,GAAG/M,OAAOhR,SACnB1H,KAAK0lB,QAAQhN,OAAO0E,qBhCi1GzB/e,SAAQ,YgCv0GQ8gB,YAAOC,2BhCw0GvB9gB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIooB,cAAepoB,oBAAoB,IAAI,WAEvCc,uBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAUrB,IAAI0M,OAAQ/N,oBiC3pII,IjC6pIZgO,OAASlN,uBAAuBiN,OAEhCE,YAAcjO,oBiC9pID,IjCgqIbkO,aAAepN,uBAAuBmN,aiC9pIvCoa,QAAUna,aAAA,WAAMnD,OAAO,WAS1B,QAASsS,qBAAqBvX,OAC7B,MAAO,YACN,GAAIwiB,SAGJ,KAAKxmB,KAAK2M,eAAe,QAAS,CACjC,GAAc,OAAV3I,MAKH,KAAM,IAAIwgB,gBAAe,oBAAoBxgB,MAAM,yCAEpD,YANCyiB,iBAAgBhoB,KAAKuB,KAAM2B,WAW7B,MAFA6kB,UAAWnmB,EAAEuE,GAAGZ,OAAOjB,MAAM/C,KAAKgiB,KAAM0E,oBAAoB1mB,KAAMgE,MAAOrC,YAErE6kB,WAAaxmB,KAAKgiB,MAASwE,UAAYA,SAASjC,QAAUiC,SAASf,GAAGzlB,KAAKgiB,MACvEhiB,KAGDwmB,UAIT,QAASE,qBAAqBrG,OAAQ5b,QAASC,OAC9C,GAAIxB,GAAGyjB,IAAKziB,IAIZ,IAFAA,UAEO,KAAM,QAAStD,QAAQ6D,SAAU,CACvC,IAAKvB,EAAE,EAAGyjB,IAAMjiB,MAAMxB,GAAIA,GAAG,EACT,kBAARyjB,KACVziB,KAAK1D,KAAM,SAAU0J,UACpB,MAAO,YAAc,MAAOA,UAASnH,MAAMsd,OAAQ1e,aAClDglB,MAIFziB,KAAK1D,KAAKmmB,IAIZ,OAAOziB,MAGR,MAAOQ,OAGR,QAAS+hB,iBAAiBG,aAazB,MAZK5mB,MAAK2M,eAAe,mBACpB3M,KAAK6mB,eAAiB7mB,KAAKgjB,aAAa,iBAC3ChjB,KAAK6mB,cAAgB7mB,KAAK6mB,cAAczjB,MAAM,GAI9CpD,KAAK6mB,kBAIP7mB,KAAK6mB,cAAcrmB,KAAKomB,cAEjB,EAvER,GAAIzW,QAAQ2W,OA2EZA,UAAW,eAAe3jB,OAAOmjB,aAAAla,aAAA,aAEjCpM,KAAKsM,SAAW,eAChBtM,KAAKgiB,KAAO,KACZhiB,KAAK6mB,cAAgB,IAErB,KAAK1W,SAAU9P,GAAEuE,GACXvE,EAAEuE,GAAG+H,eAAewD,WAAY2W,QAAQlmB,QAAQuP,UACrDnQ,KAAKmQ,QAAUoL,oBAAoBpL,QAGpCnQ,MAAK6hB,KAAO,WACX,MAAO7hB,MAAKgiB,KAAK,IAGlBhiB,KAAK+b,aAAe,WACnB,GAAI/T,KAEJA,MAAOhI,KAEHA,KAAK6mB,eAAiB7mB,KAAKgjB,aAAa,kBAC3ChjB,KAAK6mB,cAAc/hB,QAAQ,SAAU8hB,aACpC5e,KAAKyQ,GAAG1V,MAAMiF,KAAM4e,gBAKvB5mB,KAAK+mB,OAAS,SAAU/iB,MAAOgjB,kBAAmB9c,UACjD,GAAI+c,YAAYpF,KAAMe,OAWtB,OATAqE,aAAa,EAGiB,iBAAtBD,mBACPC,WAAaD,kBACb9c,SAAW8c,kBAEZ9c,SAASgd,GAAKhd,SAASiY,KAAKniB,MAExBA,KAAKgiB,MACRH,KAAO7hB,KAAKgiB,KAAK,IACAH,KAAKviB,iBAAiB0E,MAAOkG,SAASgd,GAAID,aAOrD,EAHCR,iBAAiBziB,MAAOkG,SAASgd,GAAID,cAM9CjnB,KAAKmnB,OAAS,SAAUnjB,MAAOkG,UAC9B,GAAI2X,MAAO7hB,KAAKgiB,MAAQhiB,KAAKgiB,KAAK,EAElC,OAAIH,MAAaA,KAAKuF,oBAAoBpjB,MAAOkG,SAASgd,IAAMhd,WAEzD,GAKRlK,KAAKmiB,KAAO,SAAUjY,UACrB,GAAIhG,KAIJ,OAFAA,SAAUb,IAAI5E,KAAKkD,UAAW,SAAUjD,GAAK,MAAOA,KAAK0E,MAAM,GAExD8G,SAASiY,KAAKpf,MAAMmH,UAAWlK,MAAMmD,OAAOe,QAGpDlE,KAAK8hB,QAAU,SAAUkE,WACxB,MAAOhmB,MAAKugB,KAAKyF,WAAWhH,OAAOhf,KAAKmiB,KAAK,SAAUnY,OAAQuY,OAC9D,GAAIniB,MAIJ,OAFAA,OAAQC,EAAEkiB,OAENniB,MAAMmB,SAAS,YACXnB,MAAMinB,SAASpnB,UAAYD,KAG5BI,MAAMH,UAAYD,SAI3BA,KAAKgjB,aAAe,SAAUhf,OAC7B,GAAIoM,OAAOkX,QAASze,SAEpB,OAAI7I,MAAK2M,eAAe3I,QAChB,GAIP6E,UAAYpD,OAAOE,eAAe3F,MAClCoQ,MAAQlE,OAAA,WAAKa,SAAS/M,KAAMA,KAAKgE,QAE7BoM,MAAMpD,OAAOL,eAAe,SAAW9D,UAAU8D,eAAe,SAAgB,EAEhF9D,UAAUmZ,OACbsF,QAAUpb,OAAA,WAAKa,SAASlE,UAAWA,UAAUmZ,MAEzC5R,MAAMpD,OAAOhE,cAAcse,QAAQta,UAC/B,GAIF,IAMThN,KAAKylB,GAAK,SAAU5Y,MACnB,MAAKA,MACDA,KAAKmV,KAAahiB,KAAKgiB,KAAKyD,GAAG5Y,KAAKmV,MAEjChiB,KAAKgiB,KAAKyD,GAAG5Y,OAHF,IjC+pInBxO,SAAQ,WiCxpIMkoB,QjCypIdjoB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBkC32IhCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,IAAAqB,YAAA,IlCi3IZ,SAASjB,OAAQD,QAASH,qBmCj3IhCA,oBAAA,IACAI,OAAAD,QAAAH,oBAAA,IAAAuH,OAAAL,MnCu3IM,SAAS9G,OAAQD,QAASH,qBoCv3IhC,GAAAqpB,UAAArpB,oBAAA,GAEAA,qBAAA,oBAAAspB,OACA,eAAApiB,MAAAmD,IACA,MAAAif,OAAAD,SAAAhf,SpCg4IM,SAASjK,OAAQD,QAASH,qBqCp4IhC,GAAAupB,SAAAvpB,oBAAA,GACAI,QAAAD,QAAA,SAAAkK,IACA,MAAA9C,QAAAgiB,QAAAlf,OrC44IM,SAASjK,OAAQD,SsC94IvBC,OAAAD,QAAA,SAAAkK,IACA,GAAA5H,QAAA4H,GAAA,KAAAC,WAAA,yBAAAD,GACA,OAAAA,MtCs5IM,SAASjK,OAAQD,QAASH,qBuCx5IhC,GAAA6G,SAAA7G,oBAAA,GACAwI,KAAAxI,oBAAA,IACAwpB,MAAAxpB,oBAAA,GACAI,QAAAD,QAAA,SAAAspB,IAAAnjB,MACA,GAAAI,KAAA8B,KAAAjB,YAA8BkiB,MAAAliB,OAAAkiB,KAC9BC,MACAA,KAAAD,KAAAnjB,KAAAI,IACAG,gBAAAQ,EAAAR,QAAAiC,EAAA0gB,MAAA,WAAmD9iB,GAAA,KAAS,SAAAgjB,OvCg6ItD,SAAStpB,OAAQD,SwCx6IvBC,OAAAD,QAAA,SAAAmG,MACA,IACA,QAAAA,OACG,MAAAd,GACH,YxCg7IM,SAASpF,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAOrB,IAAI0M,OAAQ/N,oByCz7II,IzC27IZgO,OAASlN,uBAAuBiN,OAEhCmS,iBAAmBlgB,oByC57ID,IzC87IlBmgB,kBAAoBrf,uBAAuBof,kBAE3CzG,aAAezZ,oByC/7ID,IzCi8Id0Z,cAAgB5Y,uBAAuB2Y,cyC/7IxCnB,MAAQ6H,kBAAA,WAAWpV,OAAO,WAgB7B,MAdAjJ,MAAKsM,SAAW,aAEhBtM,KAAK6W,MAAQ,SAAUiI,SAOtB,MANe,OAAXA,SAAiB9e,KAAKyd,OAAOqB,SAE5B9e,KAAKS,QACTT,KAAKgX,QAAQ,YAGPhX,MAGRkM,OAAA,WAAKK,MAAMvM,KAAI4X,cAAA,YAER5X,MzCo8IP3B,SAAQ,WyCh8IMmY,MzCi8IdlY,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,S0Cz9IvB,QAASwpB,YAAY3Z,QAASmS,QAG7B,QAAS3Y,QAAQse,WAChB,MAAI3F,QAAOL,MACHgG,UAAY3lB,EAAEggB,OAAOL,MAAMtY,QAAQnH,QAAQylB,WAAa3lB,EAAEggB,OAAOL,MAAMtY,QAD/E,OAHD,GAAIwI,MAUJ,OAAO4X,MAAK,wBAAwB5Z,QAAQ,uI1Cg9I5C7P,QAAQkB,YAAa,EAyBrBlB,QAAQ,W0Ct+IMwpB,W1Cu+IdvpB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qB2C19IhC,QAAS6pB,cAAc1nB,EAAGiQ,KAIzBpE,OAAA,WAAKK,MAAMvM,KAAMgoB,qBAAsBC,mBAAoBC,oBAAqBC,gBACjF9nB,EACC,QAEA,QAAS+nB,OAAO5a,KACf8C,IAAItQ,KAAM,QAAS2B,WACnB3B,KAAKqoB,MAAQhK,kBAAA,WAAWxc,SACxB7B,KAAK2W,WAAWnJ,IAAK,mBAoBvB,QAAS8X,cAAcjlB,GAQtB,QAASioB,mBAAmB/F,MAAOgG,SAClCvoB,KAAK6hB,KAAOU,MACZviB,KAAK6G,KAAO2hB,aAAajG,OACzBviB,KAAK0a,OAAS6N,QAWf,QAASC,cAAchD,QACtB,MAAOtZ,QAAA,WAAKqB,aAAaiY,OAAOiD,UAAUhnB,MAAMinB,kBAAoB,IAAI,GAQzE,QAASC,iBAAiBnD,QACzB,GAAIoD,KAAKpQ,QAASqQ,QAQlB,OANAD,KAAM,IAAKE,gBAAkB5c,OAAA,WAAKoD,MAClCkJ,QAAUxY,KACV6oB,SAAW3c,OAAA,WAAKqD,gBAAgBiW,OAAOV,KAElC8D,IAAIG,MAAMC,SAAQC,OAAO,yDAEvB,GAAAD,UAAY,SAAUE,QAASD,QAIrC,QAASE,UACR,GAAIxiB,KAAKyiB,OAET,IAAIR,IAAI7H,QAAU,KAAO6H,IAAI7H,OAAS,KACrC,GAAIpa,IAAMvH,GAAGL,KAAKqb,kBAmBjB,MAlBAgP,SAAU,GAAAJ,UAAY,SAAUK,gBAAiBC,gBAChD,IACC3iB,IAAI4iB,gBAAgBX,IAAIpC,SAAU,SAAU+B,SAC3C,GAAI5E,OAAQnL,QAAQgR,QAAS,GAAIlB,mBAAkB9C,OAAQ+C,SAE3Dc,iBAAgB1F,OAEhB8F,aAAaZ,UAAYN,SACvB,WACFe,eAAe,oCAAoCT,SAAS,OAE5D,MAAOnlB,GACR4lB,eAAe5lB,MAIjB0lB,QAAQ7D,KAAK2D,SAAQ,SAAOD,QAErBG,YAIRH,QAAOL,IAAIc,WAGZd,KAAIxB,oBAAoB,OAAQ+B,QAChCP,IAAM,KAGP,QAASe,WACRV,OAAOL,IAAIc,YACXd,IAAIxB,oBAAoB,QAASuC,SACjCf,IAAM,KAxCP,GAAIgB,OAAQH,aAAaZ,SA2CzB,OAAIe,QAAmB,YAAVA,MAA4BV,QAAS1Q,QAAQgR,QAAS,GAAIlB,mBAAkB9C,OAAQoE,UAEjGH,aAAaZ,UAAY,UAEzBD,IAAIiB,aAAe,cAEnBjB,IAAItpB,iBAAiB,OAAQ6pB,QAAQ,GACrCP,IAAItpB,iBAAiB,QAASqqB,SAAS,GACvCf,IAAIG,KAAK,MAAOvD,OAAOV,KAAK,OAC5B8D,KAAIkB,UA5FN,GAAIpB,aAAae,YAkGjBf,aAAc,6BACde,gBAIAvd,OAAA,WAAKK,MAAMvM,KAAMgoB,qBAAsB+B,kBAAmB9B,mBAAoBC,oBAAqBC,gBAGpG9nB,EAEC,oCAKA,QAAS+nB,OAAO5a,KACfxN,KAAK2W,WAAWnJ,IAAK,kBAEpB,aAAa,YAAY,OAAO1I,QAAQ,SAAUklB,OAClD,GAAI1J,YAAatgB,KAAKgqB,OAASC,gBAAgBpoB,OAAOmoB,MACtDhqB,MAAK0jB,UAAUpD,aACd6B,KAAKniB,QASR,QAASkb,MAAMsK,QACd,GAAIhN,SAAS3R,IAKb,OAHA2R,SAAUxY,KACV6G,KAAO2hB,aAAahD,QAEf3e,KAEE8hB,gBAAgBlqB,KAAKuB,KAAMwlB,QAFhBwD,SAAQC,OAAO,oFAgBlC,QAASrE,OAAOY,QAKf,QAASyD,QAAQiB,QAChB,GAAIjqB,OAAQkqB,GAAG3E,QAAQvlB,OACvBgQ,SAAQkK,KAAKla,MAAM1B,KAAM,IAAK2rB,QAN/B,GAAId,QAEJ,OAAwB,UAApB5D,OAAOvkB,SAA6B+nB,SAAQC,OAAO,sCAAwCzD,QAAQ,KAAKA,OAAO4E,SAAS7Z,YAAYjM,KAAK,IAAIkhB,OAAOvkB,SAAS,QAOhKmoB,QAAUppB,KAAKkb,KAAKsK,SAAO,SAAQyD,OAAO9G,KAAKniB,OAEzCopB,UAQR,QAASI,SAAShE,QACjB,GAAI3e,KAEJ,OAAK2e,QAEDA,OAAO/kB,OACH+kB,OAAOniB,IAAImmB,QAAQrH,KAAKniB,QAGhC6G,KAAO2e,OAAO3e,MAAQ2hB,aAAahD,QAE/B3e,MAAQ7G,KAAK6G,MAAc7G,KAAK6G,MAAMgY,IAAI2G,SAEvC,IAVa,GAgBrB,QAAS5B,eACR,GAAI1jB,QAAQmqB,KASZ,OAPAnqB,WACAmqB,MAAQ/D,aAAYtmB,MAEpBqqB,MAAMvlB,QAAQ,SAAUklB,OACnBhqB,KAAKgqB,gBAAkBC,kBAAiB/pB,OAAOM,KAAKR,KAAKgqB,SAC5D7H,KAAKniB,OAEAE,QAKR,QAASyP,YACR,MAAO,YAAY3P,KAAKuQ,YAAYjM,MAAQ,UAAU,MAYxD,QAAS2lB,iBAAiB5pB,EAAGiQ,KAI5BpE,OAAA,WAAKK,MAAMvM,KAAMgoB,qBAAsB+B,kBAAmB9B,mBAAoBE,gBAE/E9nB,EACC,OAEA,QAAS+nB,OAAO4B,OACXA,QAAOhqB,KAAK6G,KAAOmjB,OACvBhqB,KAAK2W,WAAWqT,MAAO,eAQxB,QAASnL,KAAK2G,QACb,GAAI7B,MAEJ,OAAK6B,SAEL7B,MAAS6B,iBAAkB8E,OAAS9E,OAAS8E,MAAMzoB,OAAO2jB,OAAQxlB,KAAK6G,MAEvEyJ,IAAItQ,KAAM,OAAO2jB,OACjB3jB,KAAK0jB,UAAUC,OACXA,MAAMplB,MAAM2N,OAAA,WAAK8C,UAAUhP,KAAM2jB,MAAMplB,KAAMolB,OAE1CA,QARa,GAcrB,QAASnL,WACR,MAAOxY,MAAKuqB,IAAIhqB,QAAQ,QAAQD,KAAK,YAKtC,QAASqP,YACR,MAAO,YAAY3P,KAAKuQ,YAAYjM,MAAQ,UAAU,MA2BxD,QAASkmB,iBAAiBnqB,EAAGiQ,KAAMjQ,EAIlC,QAASwe,KAAK4L,QAGb,MAFAzqB,MAAK0jB,UAAU+G,QACXA,OAAOlsB,MAAM2N,OAAA,WAAK8C,UAAUhP,KAAMyqB,OAAOlsB,KAAMksB,QAC5CpM,kBAAA,WAAWQ,IAAIpgB,KAAKuB,KAAMyqB,SAKlC,QAAS/G,WAAW+G,QACnB,GAAIC,OAMJ,OAJAA,QAASD,OAAOF,IAAI1Z,QACpB6Z,OAAOpqB,KAAKmqB,OAAOF,IAAIjqB,QAEvBN,KAAKuqB,IAAI/I,OAAOkJ,QACT1qB,OAUT,QAASsqB,OAAOjqB,GAEf,QAASsqB,cAAcC,SAAUphB,MAChC,MAAIA,MACIxJ,KAAK4qB,UAAYphB,KACM,gBAAbohB,UACV5qB,KAAK4qB,WAEZ1e,OAAA,WAAKK,MAAMvM,KAAM4qB,UAGXA,UAMR1e,OAAA,WAAKK,MAAMvM,KAAMgoB,qBAAsB+B,kBAAmB5B,gBAE3D9nB,EACC,4EAOA,QAAS+nB,OAAO5C,OAAQwE,OACvB,GAAI7E,QAAQ3L,OAAQ7S,IAAK6c,WAAYjlB,EAErC4mB,QAASgF,GAAG3E,OAAO3D,MAAQ2D,QAC3BhM,OAAS2L,OAAO/lB,KAChBuH,IAAMvH,GAAGL,KAAKqb,kBACdoJ,WAAa2G,GAAGhN,MAAM,SAAUC,YAAapd,QAEvCzB,GAAK4mB,OAAO5mB,OAAO4mB,OAAO5mB,GAAGA,GAAK2N,OAAA,WAAKuD,YAE7CzP,KAAK6G,KAAOmjB,OAAS,KACrBhqB,KAAK6oB,SAAW3c,OAAA,WAAKqD,gBAAgB4V,OAAOtkB,KAAK,QACjDb,KAAKyjB,MAAQ0B,OAAO,GACpBnlB,KAAK6qB,KAAOlkB,IAAImkB,aAEhB9qB,KAAK6qB,KAAKjQ,QAAQjU,IAAIkU,aAEtBsK,OAAO7kB,KAAK,UAAWN,MAEnBwlB,OAAO9K,SAAQ1a,KAAK0a,OAAS8K,OAAO9K,QAExCjV,OAAOQ,eAAejG,KAAM,UAC3BuE,MAAOomB,aAAaxI,KAAK3I,QACzBpK,WAAW,IAGZpP,KAAK2W,WAAWpY,GAAI,SAASyB,KAAK6G,MAElCsjB,GAAGnqB,KAAKyjB,OAAOzM,QAAQwM,aAQxB,QAASuH,aACR,GAAIpkB,KAAKme,GAIT,IAFAne,IAAM3G,KAAKsY,cAAgBlZ,GAAGL,KAAKqb,kBAE1B,CACR,GAAIpa,KAAK0a,OAKR,MAJAoK,KAAMne,IAAI8T,qBACVqK,IAAIpK,OAAS1a,KAAK0a,OAClBoK,IAAIkG,KAAOhrB,KAAKyjB,MAAMuH,KAEflG,GAEP,KACC,MAAO9kB,MAAKirB,cAAgBtkB,IAAIukB,yBAAyBlrB,KAAKyjB,OAC7D,MAAM/f,GACPuM,QAAQkK,KAAKzW,EAAEynB,QAASnrB,OAK3B,MAAO;EAMR,QAASsgB,cACR,MAAOtgB,MAAKuqB,IAAIhqB,QAAQ,eAAeD,KAAK,YAM7C,QAASkY,WACR,MAAOxY,MAAKuqB,IAAIhqB,QAAQ,QAAQD,KAAK,YAKtC,QAASqP,YACR,MAAO,UAAU3P,KAAKzB,KAAK,IAAIyB,KAAK6oB,SAAS,KAE9C,QAASuC,YAAYzkB,KACpB3G,KAAK6qB,KAAOlkB,IAAImkB,aAChB9qB,KAAK6qB,KAAK9P,aACV/a,KAAK6qB,KAAKjQ,QAAQjU,IAAIkU,aACtB7a,KAAKsY,aAAe3R,M3CkhIrB,GAAIqiB,UAAW9qB,oBAAoB,IAAI,WAEnCooB,aAAepoB,oBAAoB,IAAI,WAEvC4R,eAAiB5R,oBAAoB,IAAI,WAEzCc,uBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CASrB,IAAI8rB,YAAantB,oB2C/gJD,I3CihJZotB,YAActsB,uBAAuBqsB,YAErCpf,MAAQ/N,oB2ClhJI,I3CohJZgO,OAASlN,uBAAuBiN,OAEhCmS,iBAAmBlgB,oB2CrhJD,I3CuhJlBmgB,kBAAoBrf,uBAAuBof,kB2CphJ5C4J,qBACHC,mBACA8B,kBACA7B,oBACAC,eACAgC,GAAKjrB,OAAOqsB,MAkUbtB,iBAAgBphB,UAAYiH,eAAAuO,kBAAA,YAC3B9N,aACChM,MAAO0lB,gBACP9a,YAAY,EACZC,WAAW,EACXC,eAAe,KAoKjB2Y,sBAICuC,IAAK,KAML5T,WAAY,QAAAA,YAAUnJ,IAAKge,QAC1B/lB,OAAOQ,eAAejG,KAAM,OAC3BuE,MAAO4lB,GAAG,SAAS3c,IAAM,OAAOA,IAAI,IAAM,IAAI,KAAKge,OAAS,UAAUA,OAAO,IAAM,IAAI,KACvFpc,WAAW,EACXC,eAAe,EACfF,YAAY,IAGbnP,KAAKuqB,IAAIjqB,KAAK,UAAWN,OAM1BzB,GAAI,QAAAA,IAAUiP,KACb,MAAOxN,MAAKuqB,IAAIhsB,GAAGiP,MAOpBkW,UAAW,QAAAA,WAAU7W,MAEpB,MADA7M,MAAKuqB,IAAI/I,OAAO3U,KAAK0d,KACdvqB,MAMRqnB,OAAQ,QAAAA,UACP,MAAOrnB,MAAKuqB,IAAIlD,SAAS/mB,KAAK,YAM/BigB,KAAM,QAAAA,MAAUyF,WACf,GAAI1F,YAAakK,gBAAgB3oB,QAMjC,OAJA7B,MAAKuqB,IAAIhK,KAAKyF,WAAW7lB,KAAK,WAC7BmgB,WAAWzB,IAAIsL,GAAGnqB,MAAMM,KAAK,cAGvBggB,YAKRtB,OAAQ,QAAAA,QAAUgH,WACjB,GAAI1F,WAEJ,OAAK0F,YAEL1F,WAAakK,gBAAgB3oB,SAE7B7B,KAAKuqB,IAAI1J,WAAW1gB,KAAK,WACxB,GAAIC,OAAQ+pB,GAAGnqB,KACXI,OAAMqlB,GAAGO,YAAY1F,WAAWzB,IAAIze,MAAME,KAAK,cAG7CggB,YATgBtgB,MAcxByY,GAAI,QAAAA,MAEH,MADAzY,MAAKuqB,IAAI9R,GAAG1V,MAAM/C,KAAKuqB,IAAK5oB,WACrB3B,MAKRilB,IAAK,QAAAA,OAEJ,MADAjlB,MAAKuqB,IAAItF,IAAIliB,MAAM/C,KAAKuqB,IAAK5oB,WACtB3B,MAKRgX,QAAS,QAAAA,WAER,MADAhX,MAAKuqB,IAAIvT,QAAQjU,MAAM/C,KAAKuqB,IAAK5oB,WAC1B3B,OAMTioB,oBACCwD,QAAS,QAAAA,SAAUC,iBAClB,GAAID,SAAUzrB,KAAKugB,KAAK,YAAYvB,OAAO0M,gBAC3C,SAASD,QAAQhrB,QAAUgrB,SAO5B1M,IAAK,QAAAA,KAAU4M,QACd,MAAI3rB,MAAK8jB,YACA,aAAc,YAAa,OAAO8H,KAAK,SAAU5nB,OACxD,MAAOhE,MAAKgE,OAAO+a,IAAI4M,SACtBxJ,KAAKniB,OAGJA,KAAK2rB,SAAgB,EAElB3rB,KAAK4rB,KAAK,SAAUpG,QAC1B,MAAOA,UAAWmG,QAAUnG,OAAO/B,QAAUkI,QAAUnG,OAAOqD,WAAa8C,QAAUnG,OAAOjnB,OAASotB,WAKxGzD,qBACClK,KAAM,QAAAA,MAAUgI,UAAWtN,OAAQxO,UAClC,GAAI0Y,SAAS1e,IAEb0e,gBAAkBlK,cAAexO,WAAUtJ,QAAQ,YACnDsD,KAAOgI,OAAA,WAAKvH,QAAQhD,WAAWyB,MAAM,GAEf,kBAAXsV,UAAuBA,OAAS,4BAE3C1Y,KAAKyY,GAAGC,OAAQ,SAAUmT,IACrBA,GAAGnkB,OAAO6iB,IAAI9E,GAAGO,YAAY9hB,KAAK0e,SAAS7f,MAAM/C,KAAM2B,YAC1DwgB,KAAKniB,SAITmoB,gBACC9mB,MAAO,QAAAA,SACN,MAAOrB,MAAKuqB,IAAIlpB,MAAM0B,MAAM/C,KAAKuqB,IAAK5oB,YAGvCmqB,SAAU,QAAAA,UAAUC,QACnB,MAAO/rB,MAAKuqB,IAAIxN,SAASgP,OAAOvqB,gBAGjCwqB,YAAa,QAAAA,aAAUD,QACtB,MAAO/rB,MAAKuqB,IAAIrN,YAAY6O,OAAOvqB,iBAOrCuoB,mBACCkC,WAAY,QAAAA,YAASvT,QACpB,GAAIwT,UAAW/B,GAAGhN,MAAMzE,OAAO7R,MAAQa,OAAQ1H,KAAM6lB,aAAcnN,OAAOhR,OAAQie,WAAY3lB,KAAKyjB,OAG/FzjB,MAAKirB,eACY,UAAhBvS,OAAO7R,OACV7G,KAAKgsB,YAAY,WACjBhsB,KAAKirB,aAAe,MAGrBjrB,KAAKgX,QAAQkV,WAGdxT,OAAOhR,OAAO0f,oBAAoB1O,OAAO7R,KAAM7G,KAAK4iB,QAAQT,KAAKniB,OAAO,IAEzE4iB,QAAS,QAAAA,SAASlK,QACG,UAAhBA,OAAO7R,MAAoB6R,OAAOuS,cACrCvS,OAAOuS,aAAalQ,aAErB/a,KAAKisB,WAAWxtB,KAAKuB,KAAK0Y,SAE3ByT,OAAQ,QAAAA,UACHnsB,KAAKirB,eACRhb,QAAQkK,KAAK,gDACbna,KAAK4iB,SAASlb,OAAQ1H,KAAKirB,aAAcpkB,KAAM,YAGjDulB,WAAY,QAAAA,cACX,GAAIhe,KACApO,MAAK0a,QACR1a,KAAKirB,aAAanQ,MAAM,GACxB9a,KAAKqsB,UAAY,GAAIzc,MAEhB5P,KAAKirB,aAAaD,OACtB5c,KAAOrG,KAAKukB,KAA4B,IAAvBtsB,KAAK0a,OAAO6R,UAAmB,IAChDvsB,KAAKwsB,QAAUC,WAAWzsB,KAAKmsB,OAAOhK,KAAKniB,MAAOoO,QAGnDpO,KAAKyjB,MAAMtkB,OAGZa,KAAK0sB,QAAU,MAKhBvtB,KAAM,QAAAA,MAAU6mB,WAIf,QAASQ,UAAUhd,MAClBmjB,WAAanjB,KAJd,GAAI7C,KAAKme,IAAK8H,KAAMC,MAAOF,UAmB3B,OAZAhmB,KAAM3G,KAAKsY,cAAgBlZ,GAAGL,KAAKqb,kBACnCuS,YAAa,EAWT3sB,KAAK8jB,WAAmB9jB,KAAK8jB,WAAW3kB,OACzB,MAAfa,KAAKS,OACJulB,UACChmB,KAAKgmB,WAAmBhmB,KAAKgmB,WAAW7mB,OAErCa,KAAKugB,KAAKyF,WAAW7mB,OAEtBa,KAAK,IAAMA,KAAK,GAAGb,QAGrB2lB,IAAM9kB,KAAK+qB,cAEjBjG,IAAIlK,QAAQ5a,KAAK6qB,MACjB/F,IAAIxlB,iBAAiB,QAASU,KAAK4iB,QAAQT,KAAKniB,OAAO,GAEvDA,KAAKgX,QAAQmT,GAAGhN,MAAM,cAAgBzV,OAAQ1H,KAAM6lB,aAAcf,IAAKa,WAAY3lB,KAAKyjB,MAAO+C,SAAUA,YAErGmG,aACH3sB,KAAK8rB,SAAS,WACd9rB,KAAKirB,aAAenG,KAEhB+H,MAAQ7sB,KAAKwZ,OAAO,UACvBxZ,KAAK0sB,QAAUD,WAAWzsB,KAAKosB,WAAWjK,KAAKniB,MAAOkM,OAAA,WAAK+B,WAAW4e,QAEtE7sB,KAAKosB,WAAW3tB,KAAKuB,MAGtBA,KAAK4iB,SAASlb,OAAQod,IAAKje,KAAM,UAG3B7G,OApB+B,GAyBvC8sB,MAAO,QAAAA,SAON,MANI9sB,MAAK0a,SACR1a,KAAK+sB,UAAY,GAAInd,MACrBod,aAAahtB,KAAKwsB,SAClBxsB,KAAKwsB,QAAU,MAGTxsB,MAKRitB,OAAQ,QAAAA,UACP,GAAI7e,KAQJ,OAPIpO,MAAK0a,SACH1a,KAAKirB,aAAaD,OACtB5c,KAAOrG,KAAKukB,KAA4B,IAAvBtsB,KAAK0a,OAAO6R,UAAmBvsB,KAAK+sB,UAAY/sB,KAAKqsB,YAAc,IACpFrsB,KAAKwsB,QAAUC,WAAWzsB,KAAKmsB,OAAOhK,KAAKniB,MAAOoO,QAI7CpO,MAKRktB,KAAM,QAAAA,MAAUxB,iBACf,GAAIyB,WAAYhD,GAAGhN,MAAM,WAAazV,OAAQ1H,KAAM6lB,aAAc7lB,KAAKirB,aAActF,WAAY3lB,KAAKyjB,OAEtG,IAAIzjB,KAAK8jB,WAAY,MAAO9jB,MAAK8jB,WAAWoJ,KAAKxB,gBACjD,IAAmB,MAAf1rB,KAAKS,OAAgB,CACxB,GAAwB,SAApBirB,gBAKH,MAAO1rB,MAAK,IAAMA,KAAK,GAAGktB,MAJ1BltB,MAAK8E,QAAQ,SAAU0gB,QACtBA,OAAO0H,SAOV,MAAKltB,MAAKirB,cAENjrB,KAAK0a,OACH1a,KAAK0sB,SAAS1sB,KAAKirB,aAAaiC,QAErCltB,KAAKyjB,MAAMqJ,QACX9sB,KAAKyjB,MAAM2J,YAAc,GAGtBptB,KAAK0sB,UACRM,aAAahtB,KAAK0sB,SAClB1sB,KAAK0sB,QAAU,MAGhB1sB,KAAKirB,aAAe,KAEpBjrB,KAAKgsB,YAAY,WACjBhsB,KAAKgX,QAAQmW,WAENntB,OAnBwB,GAwBhCqtB,OAAQ,QAAAA,QAAUC,OAAQ5B,iBACzB,GAAI1rB,KAAK8jB,WAAY,MAAO9jB,MAAK8jB,WAAWuJ,OAAOC,OACnD,IAAmB,MAAfttB,KAAKS,OAAgB,CACxB,GAAwB,SAApBirB,gBAKH,MAAO1rB,MAAK,IAAMA,KAAK,GAAGqtB,OAAOC,OAJjCttB,MAAK8E,QAAQ,SAAU0gB,QACtBA,OAAO6H,OAAOC,UAOjBttB,KAAK6qB,KAAKA,KAAKtmB,MAAQ+oB,QAExBjB,UAAW,EACXU,UAAW,G3CihJX1uB,QAAQ,W2C9gJMitB,YAAA,WAAKvD,aAAczC,aAAc2E,gBAAiBK,OAEjEL,gBAAgBhhB,OAAOuhB,iB3C+gJtBlsB,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qB4Cp2KhCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,IAAAqB,YAAA,I5C02KZ,SAASjB,OAAQD,QAASH,qB6C12KhCA,oBAAA,IACAA,oBAAA,IACAA,oBAAA,IACAA,oBAAA,IACAI,OAAAD,QAAAH,oBAAA,IAAAqvB,S7Cg3KM,SAASjvB,OAAQD,WAMjB,SAASC,OAAQD,QAASH,qB8C13KhC,YACA,IAAAsvB,KAAAtvB,oBAAA,OAGAA,qBAAA,IAAAuvB,OAAA,kBAAAC,UACA1tB,KAAA2Q,GAAA8c,OAAAC,UACA1tB,KAAA2tB,GAAA,GAEC,WACD,GAAAC,GAAA5tB,KAAA2Q,GACAvD,MAAApN,KAAA2tB,GACAnqB,KACA,OAAA4J,QAAAwgB,EAAAntB,QAA+B8D,MAAA5D,OAAAktB,MAAA,IAC/BrqB,MAAAgqB,IAAAI,EAAAxgB,OACApN,KAAA2tB,IAAAnqB,MAAA/C,QACU8D,MAAAf,MAAAqqB,MAAA,O9Ci4KJ,SAASvvB,OAAQD,QAASH,qB+Ch5KhC,GAAA4vB,WAAA5vB,oBAAA,IACAupB,QAAAvpB,oBAAA,GAGAI,QAAAD,QAAA,SAAA0vB,WACA,gBAAA1lB,KAAAnG,KACA,GAAAqM,GAAAkf,OAAAhG,QAAApf,OACAnF,EAAA4qB,UAAA5rB,KACAyS,EAAApG,EAAA9N,OACAqD,EAAAwE,CACA,UAAApF,MAAAyR,EAAAoZ,UAAA,GAAAptB,QACAmD,EAAAyK,EAAAyf,WAAA9qB,GACA,MAAAY,KAAA,OAAAZ,EAAA,IAAAyR,IAAArM,EAAAiG,EAAAyf,WAAA9qB,EAAA,WAAAoF,EAAA,MACAylB,UAAAxf,EAAA0f,OAAA/qB,GAAAY,EACAiqB,UAAAxf,EAAAnL,MAAAF,IAAA,IAAAY,EAAA,YAAAwE,EAAA,iB/Cw5KM,SAAShK,OAAQD,SgDr6KvB,GAAAiuB,MAAAvkB,KAAAukB,KACAhiB,MAAAvC,KAAAuC,KACAhM,QAAAD,QAAA,SAAAkK,IACA,MAAA0B,OAAA1B,QAAA,GAAAA,GAAA,EAAA+B,MAAAgiB,MAAA/jB,MhD66KM,SAASjK,OAAQD,QAASH,qBiDj7KhC,YACA,IAAAgwB,SAAAhwB,oBAAA,IACA6G,QAAA7G,oBAAA,GACAiwB,SAAAjwB,oBAAA,IACAkwB,KAAAlwB,oBAAA,IACA6gB,IAAA7gB,oBAAA,IACAmwB,UAAAnwB,oBAAA,IACAowB,YAAApwB,oBAAA,IACAqwB,eAAArwB,oBAAA,IACAwH,SAAAxH,oBAAA,GAAAwH,SACA8oB,SAAAtwB,oBAAA,gBACAuwB,WAAArpB,MAAA,WAAAA,QACAspB,YAAA,aACAC,KAAA,OACAC,OAAA,SAEAC,WAAA,WAA4B,MAAA7uB,MAE5B1B,QAAAD,QAAA,SAAAywB,KAAAC,KAAAC,YAAAC,KAAAC,QAAAC,OAAAC,QACAd,YAAAU,YAAAD,KAAAE,KACA,IAAAI,WAAA,SAAAC,MACA,IAAAb,OAAAa,OAAAhmB,OAAA,MAAAA,OAAAgmB,KACA,QAAAA,MACA,IAAAX,MAAA,eAAAvpB,QAAwC,UAAA4pB,aAAAhvB,KAAAsvB,MACxC,KAAAV,QAAA,eAAAW,UAA4C,UAAAP,aAAAhvB,KAAAsvB,OACvC,eAAAE,WAA2B,UAAAR,aAAAhvB,KAAAsvB,QAEhCG,IAAAV,KAAA,YACAW,WAAAR,SAAAN,OACAe,YAAA,EACArmB,MAAAwlB,KAAAjmB,UACA+mB,QAAAtmB,MAAAklB,WAAAllB,MAAAolB,cAAAQ,SAAA5lB,MAAA4lB,SACAW,SAAAD,SAAAP,UAAAH,SACAzT,QAAApW,GAEA,IAAAuqB,QAAA,CACA,GAAAE,mBAAApqB,SAAAmqB,SAAApxB,KAAA,GAAAqwB,OAEAP,gBAAAuB,kBAAAL,KAAA,IAEAvB,SAAAnP,IAAAzV,MAAAolB,cAAAN,KAAA0B,kBAAAtB,SAAAK,YAEAa,YAAAE,QAAAtrB,OAAAsqB,SACAe,YAAA,EACAE,SAAA,QAAAN,UAAmC,MAAAK,SAAAnxB,KAAAuB,QAUnC,GANAkuB,UAAAkB,SAAAX,QAAAkB,YAAArmB,MAAAklB,WACAJ,KAAA9kB,MAAAklB,SAAAqB,UAGAxB,UAAAU,MAAAc,SACAxB,UAAAoB,KAAAZ,WACAK,QAMA,GALAzT,SACA8T,OAAAG,WAAAG,SAAAR,UAAAT,QACAxpB,KAAA+pB,OAAAU,SAAAR,UAAAV,MACAa,QAAAE,WAAAL,UAAA,WAAAQ,UAEAT,OAAA,IAAA/pB,MAAAoW,SACApW,MAAAiE,QAAA6kB,SAAA7kB,MAAAjE,IAAAoW,QAAApW,UACKN,iBAAAsC,EAAAtC,QAAAiC,GAAAynB,OAAAkB,YAAAZ,KAAAtT,QAEL,OAAAA,WjDw7KM,SAASnd,OAAQD,SkDx/KvBC,OAAAD,SAAA,GlD8/KM,SAASC,OAAQD,QAASH,qBmD9/KhCI,OAAAD,QAAAH,oBAAA,KnDogLM,SAASI,OAAQD,QAASH,qBoDpgLhC,GAAAmC,GAAAnC,oBAAA,GACA6xB,WAAA7xB,oBAAA,GACAI,QAAAD,QAAAH,oBAAA,aAAA8O,OAAA3H,IAAAd,OACA,MAAAlE,GAAA2F,QAAAgH,OAAA3H,IAAA0qB,WAAA,EAAAxrB,SACC,SAAAyI,OAAA3H,IAAAd,OAED,MADAyI,QAAA3H,KAAAd,MACAyI,SpD2gLM,SAAS1O,OAAQD,SqDjhLvBC,OAAAD,QAAA,SAAA2xB,OAAAzrB,OACA,OACA4K,aAAA,EAAA6gB,QACAC,eAAA,EAAAD,QACAE,WAAA,EAAAF,QACAzrB,erDyhLM,SAASjG,OAAQD,QAASH,qBsD7hLhCI,OAAAD,SAAAH,oBAAA,eACA,MAAsE,IAAtEuH,OAAAQ,kBAAiC,KAAQuE,IAAA,WAAgB,YAAa1G,KtDqiLhE,SAASxF,OAAQD,SuDviLvB,GAAAsO,mBAAuBA,cACvBrO,QAAAD,QAAA,SAAAkK,GAAAlD,KACA,MAAAsH,gBAAAlO,KAAA8J,GAAAlD,OvD8iLM,SAAS/G,OAAQD,SwDhjLvBC,OAAAD,YxDsjLM,SAASC,OAAQD,QAASH,qByDtjLhC,YACA,IAAAmC,GAAAnC,oBAAA,GACAiyB,WAAAjyB,oBAAA,IACAqwB,eAAArwB,oBAAA,IACA4xB,oBAGA5xB,qBAAA,IAAA4xB,kBAAA5xB,oBAAA,2BAAkF,MAAA8B,QAElF1B,OAAAD,QAAA,SAAA2wB,YAAAD,KAAAE,MACAD,YAAAnmB,UAAAxI,EAAAwB,OAAAiuB,mBAAuDb,KAAAkB,WAAA,EAAAlB,QACvDV,eAAAS,YAAAD,KAAA,ezD6jLM,SAASzwB,OAAQD,QAASH,qB0DxkLhC,GAAAkyB,KAAAlyB,oBAAA,GAAA8H,QACA+Y,IAAA7gB,oBAAA,IACAuxB,IAAAvxB,oBAAA,kBAEAI,QAAAD,QAAA,SAAAkK,GAAAxH,IAAAsvB,MACA9nB,KAAAwW,IAAAxW,GAAA8nB,KAAA9nB,MAAAM,UAAA4mB,MAAAW,IAAA7nB,GAAAknB,KAAkEQ,cAAA,EAAA1rB,MAAAxD,Q1D+kL5D,SAASzC,OAAQD,QAASH,qB2DplLhC,GAAAoyB,OAAApyB,oBAAA,WACAqyB,IAAAryB,oBAAA,IACAsyB,OAAAtyB,oBAAA,IAAAsyB,MACAlyB,QAAAD,QAAA,SAAAiG,MACA,MAAAgsB,OAAAhsB,QAAAgsB,MAAAhsB,MACAksB,eAAAlsB,QAAAksB,QAAAD,KAAA,UAAAjsB,S3D2lLM,SAAShG,OAAQD,QAASH,qB4DhmLhC,GAAAuI,QAAAvI,oBAAA,IACAuyB,OAAA,qBACAH,MAAA7pB,OAAAgqB,UAAAhqB,OAAAgqB,WACAnyB,QAAAD,QAAA,SAAAgH,KACA,MAAAirB,OAAAjrB,OAAAirB,MAAAjrB,W5DumLM,SAAS/G,OAAQD,S6D3mLvB,GAAAE,IAAA,EACAmyB,GAAA3oB,KAAAkF,QACA3O,QAAAD,QAAA,SAAAgH,KACA,gBAAAlC,OAAAxC,SAAA0E,IAAA,GAAAA,IAAA,QAAA9G,GAAAmyB,IAAA/gB,SAAA,O7DknLM,SAASrR,OAAQD,QAASH,qB8DrnLhCA,oBAAA,GACA,IAAAmwB,WAAAnwB,oBAAA,GACAmwB,WAAAsC,SAAAtC,UAAAuC,eAAAvC,UAAAxpB,O9D2nLM,SAASvG,OAAQD,QAASH,qB+D7nLhC,YACA,IAAA2yB,kBAAA3yB,oBAAA,IACA4yB,KAAA5yB,oBAAA,IACAmwB,UAAAnwB,oBAAA,IACA6yB,UAAA7yB,oBAAA,GAMAI,QAAAD,QAAAH,oBAAA,IAAA2G,MAAA,iBAAA6oB,SAAA4B,MACAtvB,KAAA2Q,GAAAogB,UAAArD,UACA1tB,KAAA2tB,GAAA,EACA3tB,KAAAgxB,GAAA1B,MAEC,WACD,GAAA1B,GAAA5tB,KAAA2Q,GACA2e,KAAAtvB,KAAAgxB,GACA5jB,MAAApN,KAAA2tB,IACA,QAAAC,GAAAxgB,OAAAwgB,EAAAntB,QACAT,KAAA2Q,GAAAhQ,OACAmwB,KAAA,IAEA,QAAAxB,KAAAwB,KAAA,EAAA1jB,OACA,UAAAkiB,KAAAwB,KAAA,EAAAlD,EAAAxgB,QACA0jB,KAAA,GAAA1jB,MAAAwgB,EAAAxgB,UACC,UAGDihB,UAAA4C,UAAA5C,UAAAxpB,MAEAgsB,iBAAA,QACAA,iBAAA,UACAA,iBAAA,Y/DmoLM,SAASvyB,OAAQD,SgEpqLvBC,OAAAD,QAAA,chE0qLM,SAASC,OAAQD,SiE1qLvBC,OAAAD,QAAA,SAAAwvB,KAAAtpB,OACA,OAAUA,YAAAspB,ejEirLJ,SAASvvB,OAAQD,QAASH,qBkEjrLhC,GAAAgzB,SAAAhzB,oBAAA,IACAupB,QAAAvpB,oBAAA,GACAI,QAAAD,QAAA,SAAAkK,IACA,MAAA2oB,SAAAzJ,QAAAlf,OlEyrLM,SAASjK,OAAQD,QAASH,qBmE5rLhC,GAAAizB,KAAAjzB,oBAAA,GACAI,QAAAD,QAAAoH,OAAA,KAAAI,qBAAA,GAAAJ,OAAA,SAAA8C,IACA,gBAAA4oB,IAAA5oB,OAAApH,MAAA,IAAAsE,OAAA8C,MnEosLM,SAASjK,OAAQD,SoEvsLvB,GAAAsR,aAAiBA,QAEjBrR,QAAAD,QAAA,SAAAkK,IACA,MAAAoH,UAAAlR,KAAA8J,IAAAnF,MAAA,QpE8sLM,SAAS9E,OAAQD,QAASH,qBqEjtLhC,YACA,IAAAmC,GAAAnC,oBAAA,GACAgwB,QAAAhwB,oBAAA,IACAuI,OAAAvI,oBAAA,IACAyI,IAAAzI,oBAAA,IACAkzB,QAAAlzB,oBAAA,IACA6G,QAAA7G,oBAAA,GACAmzB,SAAAnzB,oBAAA,IACAozB,SAAApzB,oBAAA,IACAkK,UAAAlK,oBAAA,IACAqzB,UAAArzB,oBAAA,IACAszB,MAAAtzB,oBAAA,IACAuzB,SAAAvzB,oBAAA,IAAA6D,IACA2vB,KAAAxzB,oBAAA,IACAyzB,QAAAzzB,oBAAA,eACA0zB,mBAAA1zB,oBAAA,IACA2zB,KAAA3zB,oBAAA,IACA4zB,QAAA,UACAC,QAAAtrB,OAAAsrB,QACAC,OAAA,WAAAZ,QAAAW,SACA1qB,EAAAZ,OAAAqrB,SACAG,QAEAC,YAAA,SAAAC,KACA,GAAApjB,MAAA,GAAA1H,GAAA,aAEA,OADA8qB,OAAApjB,KAAAwB,YAAA9K,QACA4B,EAAA6hB,QAAAna,cAGAqjB,WAAA,WAEA,QAAAC,IAAAhwB,GACA,GAAA2F,MAAA,GAAAX,GAAAhF,EAEA,OADAovB,UAAAzpB,KAAAqqB,GAAAxpB,WACAb,KAJA,GAAAsqB,QAAA,CAMA,KASA,GARAA,MAAAjrB,KAAA6hB,SAAAgJ,cACAT,SAAAY,GAAAhrB,GACAgrB,GAAAxpB,UAAAxI,EAAAwB,OAAAwF,EAAAwB,WAA0C0H,aAAchM,MAAA8tB,MAExDA,GAAAnJ,QAAA,GAAA3D,KAAA,uBAAwC8M,MACxCC,OAAA,GAGAA,OAAAp0B,oBAAA,KACA,GAAAq0B,qBAAA,CACAlrB,GAAA6hB,QAAA7oB,EAAA2F,WAA4B,QAC5BwE,IAAA,WAAwB+nB,oBAAA,MAExBD,MAAAC,oBAEG,MAAA7uB,GAAU4uB,OAAA,EACb,MAAAA,UAIAE,gBAAA,SAAA1uB,EAAAwE,GAEA,MAAA4lB,UAAApqB,IAAAuD,GAAAiB,IAAA2pB,SAAA,EACAP,KAAA5tB,EAAAwE,IAEAmqB,eAAA,SAAA5qB,GACA,GAAAtC,GAAA+rB,SAAAzpB,GAAA8pB,QACA,OAAAhxB,SAAA4E,IAAAsC,GAEA6qB,WAAA,SAAAnqB,IACA,GAAAgd,KACA,OAAA8L,UAAA9oB,KAAA,mBAAAgd,KAAAhd,GAAAgd,YAAA,GAEAoN,kBAAA,SAAA9qB,GACA,GAAAqhB,SAAAD,MACAjpB,MAAAopB,QAAA,GAAAvhB,GAAA,SAAA+qB,UAAAC,UACA,GAAAlyB,SAAAuoB,SAAAvoB,SAAAsoB,OAAA,KAAAzgB,WAAA,0BACA0gB,SAAA0J,UACA3J,OAAA4J,WAEA7yB,KAAAkpB,QAAA9gB,UAAA8gB,SACAlpB,KAAAipB,OAAA7gB,UAAA6gB,SAEA6J,QAAA,SAAAtuB,MACA,IACAA,OACG,MAAAd,GACH,OAAYwM,MAAAxM,KAGZqvB,OAAA,SAAA9X,OAAA+X,UACA,IAAA/X,OAAAgY,EAAA,CACAhY,OAAAgY,GAAA,CACA,IAAAC,OAAAjY,OAAAtc,CACAkzB,MAAA,WAuBA,IAtBA,GAAAttB,OAAA0W,OAAAhK,EACAkiB,GAAA,GAAAlY,OAAA1M,EACArL,EAAA,EACArE,IAAA,SAAAu0B,UACA,GAAAxQ,SAAAuQ,GAAAC,SAAAD,GAAAC,SAAAC,KACAnK,QAAAkK,SAAAlK,QACAD,OAAAmK,SAAAnK,OACA/oB,OAAAqlB,IACA,KACA3C,SACAuQ,KAAAlY,OAAA3M,GAAA,GACApO,OAAA0iB,WAAA,EAAAre,MAAAqe,QAAAre,OACArE,SAAAkzB,SAAAhK,QACAH,OAAAzgB,UAAA,yBACW+c,KAAAmN,WAAAxyB,SACXqlB,KAAA9mB,KAAAyB,OAAAgpB,QAAAD,QACWC,QAAAhpB,SACF+oB,OAAA1kB,OACF,MAAAb,GACPulB,OAAAvlB,KAGAwvB,MAAAzyB,OAAAyC,GAAArE,IAAAq0B,MAAAhwB,KACAgwB,OAAAzyB,OAAA,EACAwa,OAAAgY,GAAA,EACAD,UAAAvG,WAAA,WACA,GAAArD,SAAAnO,OAAArc,EACAgkB,QAAA3S,OACAqjB,aAAAlK,WACA4I,OACAD,QAAAjZ,KAAA,qBAAAvU,MAAA6kB,UACSxG,QAAAnc,OAAA8sB,sBACT3Q,SAAmBwG,gBAAAoK,OAAAjvB,SACV0L,QAAAxJ,OAAAwJ,kBAAAC,OACTD,QAAAC,MAAA,8BAAA3L,QAEO0W,OAAAnX,EAAAnD,QACF,OAGL2yB,YAAA,SAAAlK,SACA,GAAAnO,QAAAmO,QAAAqK,GACAP,MAAAjY,OAAAnX,GAAAmX,OAAAtc,EACAuE,EAAA,EACAkwB,QACA,IAAAnY,OAAA3M,EAAA,QACA,MAAA4kB,MAAAzyB,OAAAyC,GAEA,GADAkwB,SAAAF,MAAAhwB,KACAkwB,SAAAC,OAAAC,YAAAF,SAAAhK,SAAA,QACG,WAEHsK,QAAA,SAAAnvB,OACA,GAAA0W,QAAAjb,IACAib,QAAAlX,IACAkX,OAAAlX,GAAA,EACAkX,cAAA1G,GAAA0G,OACAA,OAAAhK,EAAA1M,MACA0W,OAAA1M,EAAA,EACA0M,OAAAnX,EAAAmX,OAAAtc,EAAAyE,QACA2vB,OAAA9X,QAAA,KAEA0Y,SAAA,SAAApvB,OACA,GAAA0W,QAAAjb,KACAulB,IACA,KAAAtK,OAAAlX,EAAA,CACAkX,OAAAlX,GAAA,EACAkX,cAAA1G,GAAA0G,MACA,KACA,GAAAA,OAAArc,IAAA2F,MAAA,KAAAiE,WAAA,qCACA+c,KAAAmN,WAAAnuB,QACAstB,KAAA,WACA,GAAA+B,UAAuBrf,EAAA0G,OAAAlX,GAAA,EACvB,KACAwhB,KAAA9mB,KAAA8F,MAAAoC,IAAAgtB,SAAAC,QAAA,GAAAjtB,IAAA+sB,QAAAE,QAAA,IACS,MAAAlwB,GACTgwB,QAAAj1B,KAAAm1B,QAAAlwB,OAIAuX,OAAAhK,EAAA1M,MACA0W,OAAA1M,EAAA,EACAwkB,OAAA9X,QAAA,IAEG,MAAAvX,GACHgwB,QAAAj1B,MAAkB8V,EAAA0G,OAAAlX,GAAA,GAAoBL,KAKtC0uB,cAEA/qB,EAAA,QAAAkmB,SAAAsG,UACAzrB,UAAAyrB,SACA,IAAA5Y,QAAAjb,KAAAyzB,IACA70B,EAAA2yB,UAAAvxB,KAAAqH,EAAAyqB,SACAnzB,KACAmF,EAAAnD,OACA4N,EAAA,EACAxK,GAAA,EACAkN,EAAAtQ,OACA2N,GAAA,EACA2kB,GAAA,EAEA,KACAY,SAAAltB,IAAAgtB,SAAA1Y,OAAA,GAAAtU,IAAA+sB,QAAAzY,OAAA,IACK,MAAA6Y,KACLJ,QAAAj1B,KAAAwc,OAAA6Y,OAGA51B,oBAAA,IAAAmJ,EAAAwB,WAEA0c,KAAA,QAAAA,MAAAwO,YAAAC,YACA,GAAAZ,UAAA,GAAAT,mBAAAf,mBAAA5xB,KAAAqH,IACA+hB,QAAAgK,SAAAhK,QACAnO,OAAAjb,KAAAyzB,EAMA,OALAL,UAAAD,GAAA,kBAAAY,0BAAA,EACAX,SAAAC,KAAA,kBAAAW,wBACA/Y,OAAAtc,EAAA6B,KAAA4yB,UACAnY,OAAAnX,GAAAmX,OAAAnX,EAAAtD,KAAA4yB,UACAnY,OAAA1M,GAAAwkB,OAAA9X,QAAA,GACAmO,SAGA6K,QAAA,SAAAD,YACA,MAAAh0B,MAAAulB,KAAA5kB,OAAAqzB,gBAKAjvB,gBAAAmC,EAAAnC,QAAA0C,EAAA1C,QAAAiC,GAAAorB,YAA0D7E,QAAAlmB,IAC1DnJ,oBAAA,IAAAmJ,EAAAyqB,SACA5zB,oBAAA,IAAA4zB,SACAG,QAAA/zB,oBAAA,IAAA4zB,SAGA/sB,gBAAAQ,EAAAR,QAAAiC,GAAAorB,WAAAN,SAEA7I,OAAA,QAAAA,QAAA1U,GACA,GAAA2f,YAAA,GAAAvB,mBAAA3yB,MACA6yB,SAAAqB,WAAAjL,MAEA,OADA4J,UAAAte,GACA2f,WAAA9K,WAGArkB,gBAAAQ,EAAAR,QAAAiC,IAAAorB,YAAAF,aAAA,IAAAJ,SAEA5I,QAAA,QAAAA,SAAA7mB,GAEA,GAAAA,YAAAgF,IAAAmrB,gBAAAnwB,EAAAkO,YAAAvQ,MAAA,MAAAqC,EACA,IAAA6xB,YAAA,GAAAvB,mBAAA3yB,MACA4yB,UAAAsB,WAAAhL,OAEA,OADA0J,WAAAvwB,GACA6xB,WAAA9K,WAGArkB,gBAAAQ,EAAAR,QAAAiC,IAAAorB,YAAAl0B,oBAAA,aAAAi2B,MACA9sB,EAAA+sB,IAAAD,MAAA,0BACCrC,SAEDsC,IAAA,QAAAA,KAAAC,UACA,GAAAxsB,GAAA4qB,eAAAzyB,MACAk0B,WAAA,GAAAvB,mBAAA9qB,GACAqhB,QAAAgL,WAAAhL,QACAD,OAAAiL,WAAAjL,OACAsG,UACA+E,OAAAxB,QAAA,WACAtB,MAAA6C,UAAA,EAAA9E,OAAA/uB,KAAA+uB,OACA,IAAAgF,WAAAhF,OAAA9uB,OACA+zB,QAAA3vB,MAAA0vB,UACAA,WAAAl0B,EAAAF,KAAA1B,KAAA8wB,OAAA,SAAAnG,QAAAhc,OACA,GAAAqnB,gBAAA,CACA5sB,GAAAqhB,QAAAE,SAAA7D,KAAA,SAAAhhB,OACAkwB,gBACAA,eAAA,EACAD,QAAApnB,OAAA7I,QACAgwB,WAAArL,QAAAsL,WACSvL,UAETC,QAAAsL,UAGA,OADAF,SAAArL,OAAAqL,OAAApkB,OACAgkB,WAAA9K,SAGAsL,KAAA,QAAAA,MAAAL,UACA,GAAAxsB,GAAA4qB,eAAAzyB,MACAk0B,WAAA,GAAAvB,mBAAA9qB,GACAohB,OAAAiL,WAAAjL,OACAqL,OAAAxB,QAAA,WACAtB,MAAA6C,UAAA,WAAAjL,SACAvhB,EAAAqhB,QAAAE,SAAA7D,KAAA2O,WAAAhL,QAAAD,WAIA,OADAqL,SAAArL,OAAAqL,OAAApkB,OACAgkB,WAAA9K,YrEytLM,SAAS9qB,OAAQD,QAASH,qBsEt/LhC,GAAAizB,KAAAjzB,oBAAA,IACAuxB,IAAAvxB,oBAAA,mBAEAy2B,IAA6C,aAA7CxD,IAAA,WAAyB,MAAAxvB,cAEzBrD,QAAAD,QAAA,SAAAkK,IACA,GAAAqlB,GAAA7hB,EAAAxE,CACA,OAAA5G,UAAA4H,GAAA,mBAAAA,GAAA,OAEA,iBAAAwD,GAAA6hB,EAAAnoB,OAAA8C,KAAAknB,MAAA1jB,EAEA4oB,IAAAxD,IAAAvD,GAEA,WAAArmB,EAAA4pB,IAAAvD,KAAA,kBAAAA,GAAAgH,OAAA,YAAArtB,ItE8/LM,SAASjJ,OAAQD,SuE5gMvBC,OAAAD,QAAA,SAAAkK,IACA,sBAAAA,IAAA,OAAAA,GAAA,kBAAAA,MvEmhMM,SAASjK,OAAQD,QAASH,qBwEphMhC,GAAAmzB,UAAAnzB,oBAAA,GACAI,QAAAD,QAAA,SAAAkK,IACA,IAAA8oB,SAAA9oB,IAAA,KAAAC,WAAAD,GAAA,qBACA,OAAAA,MxE2hMM,SAASjK,OAAQD,SyE9hMvBC,OAAAD,QAAA,SAAAkK,GAAAymB,YAAA1qB,MACA,KAAAiE,aAAAymB,cAAA,KAAAxmB,WAAAlE,KAAA,4BACA,OAAAiE,MzEqiMM,SAASjK,OAAQD,QAASH,qB0EviMhC,GAAAyI,KAAAzI,oBAAA,IACAO,KAAAP,oBAAA,IACA22B,YAAA32B,oBAAA,IACAozB,SAAApzB,oBAAA,IACA42B,SAAA52B,oBAAA,IACA62B,UAAA72B,oBAAA,GACAI,QAAAD,QAAA,SAAAg2B,SAAA7E,QAAA5qB,GAAAyD,MACA,GAAA2sB,QAAAD,UAAAV,UACA1wB,EAAAgD,IAAA/B,GAAAyD,KAAAmnB,QAAA,KACApiB,MAAA,EACA3M,OAAAqwB,KAAAmE,QACA,sBAAAD,QAAA,KAAAxsB,WAAA6rB,SAAA,oBAEA,IAAAQ,YAAAG,QAAA,IAAAv0B,OAAAq0B,SAAAT,SAAA5zB,QAAgEA,OAAA2M,MAAgBA,QAChFoiB,QAAA7rB,EAAA2tB,SAAAR,KAAAuD,SAAAjnB,QAAA,GAAA0jB,KAAA,IAAAntB,EAAA0wB,SAAAjnB,YACG,KAAA6nB,SAAAD,OAAAv2B,KAAA41B,YAA2CvD,KAAAmE,SAAAhG,QAAApB,MAC9CpvB,KAAAw2B,SAAAtxB,EAAAmtB,KAAAvsB,MAAAirB,W1E+iMM,SAASlxB,OAAQD,QAASH,qB2E9jMhC,GAAAozB,UAAApzB,oBAAA,GACAI,QAAAD,QAAA,SAAA42B,SAAArwB,GAAAL,MAAAirB,SACA,IACA,MAAAA,SAAA5qB,GAAA0sB,SAAA/sB,OAAA,GAAAA,MAAA,IAAAK,GAAAL,OAEG,MAAAb,GACH,GAAAwxB,KAAAD,SAAA,SAEA,MADAt0B,UAAAu0B,KAAA5D,SAAA4D,IAAAz2B,KAAAw2B,WACAvxB,K3EukMM,SAASpF,OAAQD,QAASH,qB4E/kMhC,GAAAmwB,WAAAnwB,oBAAA,IACAswB,SAAAtwB,oBAAA,gBACAi3B,WAAAtwB,MAAAgE,SAEAvK,QAAAD,QAAA,SAAAkK,IACA,MAAA5H,UAAA4H,KAAA8lB,UAAAxpB,QAAA0D,IAAA4sB,WAAA3G,YAAAjmB,M5EulMM,SAASjK,OAAQD,QAASH,qB6E5lMhC,GAAA4vB,WAAA5vB,oBAAA,IACAk3B,IAAArtB,KAAAqtB,GACA92B,QAAAD,QAAA,SAAAkK,IACA,MAAAA,IAAA,EAAA6sB,IAAAtH,UAAAvlB,IAAA,sB7EomMM,SAASjK,OAAQD,QAASH,qB8ExmMhC,GAAAkzB,SAAAlzB,oBAAA,IACAswB,SAAAtwB,oBAAA,gBACAmwB,UAAAnwB,oBAAA,GACAI,QAAAD,QAAAH,oBAAA,IAAAm3B,kBAAA,SAAA9sB,IACA,MAAA5H,SAAA4H,MAAAimB,WACAjmB,GAAA,eACA8lB,UAAA+C,QAAA7oB,KAFA,S9EinMM,SAASjK,OAAQD,QAASH,qB+EnnMhC,GAAA4H,SAAA5H,oBAAA,GAAA4H,QACAurB,SAAAnzB,oBAAA,IACAozB,SAAApzB,oBAAA,IACAo3B,MAAA,SAAA1H,EAAAtkB,OAEA,GADAgoB,SAAA1D,IACAyD,SAAA/nB,QAAA,OAAAA,MAAA,KAAAd,WAAAc,MAAA,6BAEAhL,QAAAD,SACA0D,IAAA0D,OAAA8vB,iBAAA,gBACA,SAAAxmB,KAAAymB,MAAAzzB,KACA,IACAA,IAAA7D,oBAAA,IAAAoH,SAAA7G,KAAAqH,QAAAL,OAAAoD,UAAA,aAAA9G,IAAA,GACAA,IAAAgN,SACAymB,QAAAzmB,eAAAlK,QACO,MAAAnB,GAAU8xB,OAAA,EACjB,eAAAD,gBAAA3H,EAAAtkB,OAIA,MAHAgsB,OAAA1H,EAAAtkB,OACAksB,MAAA5H,EAAA6H,UAAAnsB,MACAvH,IAAA6rB,EAAAtkB,OACAskB,QAEQ,GAAAjtB,QACR20B,c/E4nMM,SAASh3B,OAAQD,SgFnpMvBC,OAAAD,QAAAoH,OAAAggB,IAAA,QAAAA,IAAApjB,EAAAE,GACA,MAAAF,KAAAE,EAAA,IAAAF,GAAA,EAAAA,IAAA,EAAAE,EAAAF,MAAAE,OhF2pMM,SAASjE,OAAQD,QAASH,qBiF5pMhC,GAAAozB,UAAApzB,oBAAA,IACAkK,UAAAlK,oBAAA,IACAyzB,QAAAzzB,oBAAA,cACAI,QAAAD,QAAA,SAAAuvB,EAAA5hB,GACA,GAAAnE,GAAAypB,SAAA1D,GAAArd,YAAAhL,CACA,OAAA5E,UAAAkH,GAAAlH,SAAA4E,EAAA+rB,SAAAzpB,GAAA8pB,UAAA3lB,EAAA5D,UAAA7C,KjFoqMM,SAASjH,OAAQD,QAASH,qBkF1qMhC,GAAAuI,QAAAvI,oBAAA,IACAw3B,UAAAx3B,oBAAA,IAAA6D,IACA4zB,SAAAlvB,OAAAmvB,kBAAAnvB,OAAAovB,uBACA9D,QAAAtrB,OAAAsrB,QACAxE,QAAA9mB,OAAA8mB,QACAyE,OAAA,WAAA9zB,oBAAA,IAAA6zB,SACA+D,KAAAC,KAAAhD,OAEAiD,MAAA,WACA,GAAA3O,QAAA4O,OAAArxB,EAKA,KAJAotB,SAAA3K,OAAA0K,QAAAkE,UACAlE,QAAAkE,OAAA,KACA5O,OAAApO,QAEA6c,MACAG,OAAAH,KAAAG,OACArxB,GAAAkxB,KAAAlxB,GACAqxB,eAAAC,QACAtxB,KACAqxB,eAAAhd,OACA6c,UAAA7G,IACG8G,MAAAp1B,OACH0mB,eAAA6O,QAIA,IAAAlE,OACAe,OAAA,WACAhB,QAAAoE,SAAAH,YAGC,IAAAL,SAAA,CACD,GAAAS,QAAA,EACAvU,KAAAxiB,SAAAg3B,eAAA,GACA,IAAAV,UAAAK,OAAAM,QAAAzU,MAAqC0U,eAAA,IACrCxD,OAAA,WACAlR,KAAAvhB,KAAA81B,oBAIArD,QADCxF,iBAAArE,QACD,WACAqE,QAAArE,UAAA3D,KAAAyQ,QASA,WAEAN,UAAAj3B,KAAAgI,OAAAuvB,OAIA13B,QAAAD,QAAA,QAAAwzB,MAAAjtB,IACA,GAAA4xB,OAAc5xB,MAAAqqB,KAAAtuB,OAAAs1B,OAAAjE,QAAAD,QAAAkE,OACdF,aAAA9G,KAAAuH,MACAV,OACAA,KAAAU,KACAzD,UACGgD,KAAAS,OlFirMG,SAASl4B,OAAQD,QAASH,qBmF/uMhC,GAAAyI,KAAAzI,oBAAA,IACAu4B,OAAAv4B,oBAAA,IACA0e,KAAA1e,oBAAA,IACAw4B,IAAAx4B,oBAAA,IACAuI,OAAAvI,oBAAA,IACA6zB,QAAAtrB,OAAAsrB,QACA4E,QAAAlwB,OAAAmwB,aACAC,UAAApwB,OAAAqwB,eACAC,eAAAtwB,OAAAswB,eACAC,QAAA,EACAnd,SACAod,mBAAA,qBACAC,MAAAC,QAAAC,KACAv4B,IAAA,WACA,GAAAN,KAAAyB,IACA,IAAA6Z,MAAAlN,eAAApO,IAAA,CACA,GAAAqG,IAAAiV,MAAAtb,UACAsb,OAAAtb,IACAqG,OAGAyyB,QAAA,SAAArX,OACAnhB,IAAAJ,KAAAuhB,MAAA1f,MAGAq2B,UAAAE,YACAF,QAAA,QAAAC,cAAAhyB,IAEA,IADA,GAAAV,SAAAhB,EAAA,EACAvB,UAAAlB,OAAAyC,GAAAgB,KAAA1D,KAAAmB,UAAAuB,KAKA,OAJA2W,SAAAmd,SAAA,WACAP,OAAA,kBAAA7xB,OAAAU,SAAAV,IAAAV,OAEAgzB,MAAAF,SACAA,SAEAH,UAAA,QAAAC,gBAAAv4B,UACAsb,OAAAtb,KAGA,WAAAL,oBAAA,IAAA6zB,SACAmF,MAAA,SAAA34B,IACAwzB,QAAAoE,SAAAxvB,IAAA9H,IAAAN,GAAA,KAGGw4B,gBACHI,QAAA,GAAAJ,gBACAK,KAAAD,QAAAG,MACAH,QAAAI,MAAAC,UAAAH,QACAH,MAAAvwB,IAAAywB,KAAAK,YAAAL,KAAA,IAGG3wB,OAAAnH,kBAAA,kBAAAm4B,eAAAhxB,OAAAixB,eACHR,MAAA,SAAA34B,IACAkI,OAAAgxB,YAAAl5B,GAAA,SAEAkI,OAAAnH,iBAAA,UAAA+3B,SAAA,IAGAH,MADGD,qBAAAP,KAAA,UACH,SAAAn4B,IACAqe,KAAA+a,YAAAjB,IAAA,WAAAO,oBAAA,WACAra,KAAAgb,YAAA53B,MACAnB,IAAAJ,KAAAF,MAKA,SAAAA,IACAkuB,WAAA9lB,IAAA9H,IAAAN,GAAA,QAIAD,OAAAD,SACA0D,IAAA40B,QACAkB,MAAAhB,YnFsvMM,SAASv4B,OAAQD,SoF9zMvBC,OAAAD,QAAA,SAAAuG,GAAAV,KAAAmE,MACA,GAAAyvB,IAAAn3B,SAAA0H,IACA,QAAAnE,KAAAzD,QACA,aAAAq3B,IAAAlzB,KACAA,GAAAnG,KAAA4J,KACA,cAAAyvB,IAAAlzB,GAAAV,KAAA,IACAU,GAAAnG,KAAA4J,KAAAnE,KAAA,GACA,cAAA4zB,IAAAlzB,GAAAV,KAAA,GAAAA,KAAA,IACAU,GAAAnG,KAAA4J,KAAAnE,KAAA,GAAAA,KAAA,GACA,cAAA4zB,IAAAlzB,GAAAV,KAAA,GAAAA,KAAA,GAAAA,KAAA,IACAU,GAAAnG,KAAA4J,KAAAnE,KAAA,GAAAA,KAAA,GAAAA,KAAA,GACA,cAAA4zB,IAAAlzB,GAAAV,KAAA,GAAAA,KAAA,GAAAA,KAAA,GAAAA,KAAA,IACAU,GAAAnG,KAAA4J,KAAAnE,KAAA,GAAAA,KAAA,GAAAA,KAAA,GAAAA,KAAA,IACG,MAAAU,IAAA7B,MAAAsF,KAAAnE,QpFs0MG,SAAS5F,OAAQD,QAASH,qBqFp1MhCI,OAAAD,QAAAH,oBAAA,IAAAmB,mBAAAke,iBrF01MM,SAASjf,OAAQD,QAASH,qBsF11MhC,GAAAmzB,UAAAnzB,oBAAA,IACAmB,SAAAnB,oBAAA,IAAAmB,SAEAomB,GAAA4L,SAAAhyB,WAAAgyB,SAAAhyB,SAAA04B,cACAz5B,QAAAD,QAAA,SAAAkK,IACA,MAAAkd,IAAApmB,SAAA04B,cAAAxvB,StFi2MM,SAASjK,OAAQD,QAASH,qBuFt2MhC,GAAAiwB,UAAAjwB,oBAAA,GACAI,QAAAD,QAAA,SAAAqJ,OAAAod,KACA,OAAAzf,OAAAyf,KAAAqJ,SAAAzmB,OAAArC,IAAAyf,IAAAzf,KACA,OAAAqC,UvF62MM,SAASpJ,OAAQD,QAASH,qBwFh3MhC,YACA,IAAAwI,MAAAxI,oBAAA,IACAmC,EAAAnC,oBAAA,GACA85B,YAAA95B,oBAAA,IACAyzB,QAAAzzB,oBAAA,cAEAI,QAAAD,QAAA,SAAAspB,KACA,GAAA9f,GAAAnB,KAAAihB,IACAqQ,cAAAnwB,MAAA8pB,UAAAtxB,EAAA2F,QAAA6B,EAAA8pB,SACA1B,cAAA,EACAzlB,IAAA,WAAoB,MAAAxK,WxFw3Md,SAAS1B,OAAQD,QAASH,qByFl4MhC,GAAAswB,UAAAtwB,oBAAA,gBACA+5B,cAAA,CAEA,KACA,GAAAC,QAAA,GAAA1J,WACA0J,OAAA,qBAA+BD,cAAA,GAC/BpzB,MAAAszB,KAAAD,MAAA,WAA+B,UAC9B,MAAAx0B,IAEDpF,OAAAD,QAAA,SAAAmG,KAAA4zB,aACA,IAAAA,cAAAH,aAAA,QACA,IAAAI,OAAA,CACA,KACA,GAAAC,MAAA,GACAnE,KAAAmE,IAAA9J,WACA2F,MAAAlF,KAAA,WAA2BoJ,MAAA,GAC3BC,IAAA9J,UAAA,WAA+B,MAAA2F,OAC/B3vB,KAAA8zB,KACG,MAAA50B,IACH,MAAA20B,QzFy4MM,SAAS/5B,OAAQD,QAASH,qB0F55MhC,YAWA,SAASq6B,UAAUC,MAAOC,KACzB,GAAItoB,OAGJ,KAAKA,SAAUqoB,OACe,kBAAlBA,OAAMroB,UACjBnQ,KAAKmQ,QAAUqoB,MAAMroB,QAAQgS,KAAKsW,MASpC,QAAS9zB,SAAS+zB,YACjB,SAAUr1B,IAAI5E,KAAKi6B,WAAY,SAAUh6B,GAAK,MAAOA,KAQvC,QAASmI,QASvB,QAAS8xB,WAAWC,cACnB,GAAI10B,MAAM20B,GA6MV,OAvMA30B,OAAQoB,SAASuD,UAAU8G,SAASlR,KAAKm6B,cAAcn3B,MAAM,sCAAsC,GAAG,KAAK,GAAGN,MAAM,WACpH03B,KAiBCvvB,MAAO,QAAAA,OAAUuD,KAAM7I,MAAOU,OAC7B,GAAI4E,OAAO6G,MAKX,IAHA7G,MAAQ7D,OAAOE,eAAe3F,MAAQ6M,MACtCsD,OAAS7G,MAAMtF,OAEY,kBAAhB6I,MAAK7I,OACf,KAAM,IAAIwE,WAAU,UAAUxE,MAAM,sBAGrC,KAAImM,OAeH,MAAO,IAAIooB,UAASjvB,MAAOuD,KAb3B,IAAIvD,MAAMqD,eAAe3I,QAAU6I,KAAK7I,SAAWsF,MAAMtF,OACxD,MAAOU,OAAQyL,OAAOpN,MAAM8J,KAAMnI,OAASyL,OAAOgS,KAAKtV,KAIxD,MAAOvD,OAAO,CACb,GAAIA,MAAMqD,eAAe3I,QAAU6I,KAAK7I,SAAWsF,MAAMtF,OACxD,MAAOU,OAAQyL,OAAOpN,MAAM8J,KAAMnI,OAASyL,OAAOgS,KAAKtV,KAGxDvD,OAAQ7D,OAAOE,eAAe2D,SAgBjCwvB,KAAM,QAAAA,MAAUjsB,KAAM7I,MAAOU,OAC5B,GAAI4E,OAAO6G,MAKX,IAHA7G,MAAQsvB,aAAa/vB,UACrBsH,OAAS7G,MAAMtF,OAEO,kBAAXmM,QACV,KAAM,IAAI3H,WAAU,UAAUxE,MAAM,sBAGrC,OAAImM,QACIzL,MAAQyL,OAAOpN,MAAM8J,KAAMnI,OAASyL,OAAOgS,KAAKtV,MAEhD,GAAI0rB,UAASjvB,MAAOuD,OAU7ByD,IAAK,QAAAA,KAAUzD,KAAM7I,MAAOU,OAC3B,MAAOm0B,KAAIvvB,MAAMvG,MAAM61B,aAAa/vB,UAAWlH,YAShDo3B,SAAU,QAAAA,UAAUlsB,KAAM7I,MAAOC,QAOhC,MANA+0B,wBAAsBnsB,KAAM7I,OAC3BO,MAAON,OACPoL,eAAe,EACfD,WAAW,IAGLypB,KAgBRI,SAAQ,QAAAC,SAAUC,UAAWl1B,QAC5B,GAAIwI,QAAQzI,MAAOo1B,IAInB,IAFAn1B,OAASD,MAAQm1B,UAAYC,KAAOD,UAEhCC,KACH,IAAK3sB,SAAU2sB,MACTA,KAAKzsB,eAAeF,UACzBmsB,aAAansB,QAAU2sB,KAAK3sB,QAQ9B,OAJIzI,SACH40B,aAAa50B,OAASC,QAGhB40B,KA8BRx4B,EAAG,QAAAA,KACF,GAAI6D,MAAOS,QAAQhD,UAoCnB,OAlCAuC,MAAKY,QAAQ,SAAUgI,SACtB,GAAIusB,YAAYC,MAAOj0B,GAIvB,QAFAg0B,iBAAoBvsB,UAGnB,IAAK,SACJwsB,MAAQxsB,QAAQ3L,MAAM,WAElBm4B,OACHA,MAAMx0B,QAAQ,SAAUs0B,MACvB,GAAInb,MAAM5Q,GAEV4Q,MAAOmb,KAAKj4B,MAAM,aAClB,KAAMkM,IAAMoI,KAAK8jB,MAAMtb,KAAK,IAAM,MAAOva,IACzCk1B,aAAa/vB,UAAUoV,KAAK,IAA0B,mBAAZA,MAAK,GAAsB5Q,KAAO4Q,KAAK,GAAK,MAGxF,MAED,KAAK,SACJ,IAAK5Y,MAAOyH,SACNA,QAAQH,eAAetH,OAC5BuzB,aAAa/vB,UAAUxD,KAAOyH,QAAQzH,KAEvC,MAED,KAAK,WACJ,IAAKyH,QAAQxI,KAAM,KAAMkE,WAAU,mCACnCowB,cAAa/vB,UAAUiE,QAAQxI,MAAQwI,WAKnC+rB,MAIF30B,KAAKb,IAAI,SAAUm2B,OACzB,MAAOX,KAAIW,QAAUl7B,OAAOk7B,SAvN9B,GAAIC,MAAMn7B,MA+QV,OApDAm7B,MAAO90B,QAAQhD,WACfrD,OAAW0B,KAAaA,QAExBy5B,KAAK30B,QAAQ,SAAU8zB,cACtB,GAAIC,IAEJ,IAA4B,gBAAjBD,cAA2B,CACrC,GAAIc,OAAOt0B,KAAOkhB,aAAYsS,aAE9B,IAAoB,IAAhBxzB,KAAK3E,QAAgBnC,OAAO8G,KAAK,IAEpC,MADAs0B,OAAQp7B,OAAO8G,KAAK,IACbs0B,MAAMzwB,OAAOxK,KAAKH,OAAQs6B,aAAaxzB,KAAK,KAIrDyzB,IAAMF,UAAUC,cAQhBA,aAAa/2B,OAAS,WACrB,GAAIwH,UAAWyG,eAAc8oB,aAAa/vB,UAE1C,OAD8B,kBAAnBQ,UAAS+e,OAAsB/e,SAAS+e,MAAMrlB,MAAMsG,SAAU1H,WAClE0H,UAQRuvB,aAAa3vB,OAAS,SAAU2d,aAU/B,MATAA,aAAY/d,UAAYiH,eAAc8oB,aAAa/vB,WAClD0H,aACChM,MAAOqiB,YACPzX,YAAY,EACZC,WAAW,EACXC,eAAe,KAIVxI,KAAKpI,KAAKuB,OAAS44B,aAAe,KAAO54B,KAAM4mB,cAGvDgS,aAAa71B,MAAM61B,aAAa/vB,UAAWgwB,KAE3Cv6B,OAAOs6B,aAAat0B,MAAQs0B,eAGtBa,KAAKh5B,OAAS,EAAInC,OAASm7B,KAAK,G1FunMvC,GAAIT,wBAAyB96B,oBAAoB,IAAI,WAEjDooB,aAAepoB,oBAAoB,IAAI,WAEvC4R,eAAiB5R,oBAAoB,IAAI,UAE7CG,SAAQkB,YAAa,EACrBlB,QAAQ,W0F94MewI,K1FgsNvBvI,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qB2FvuNhCI,OAAAD,SAAkBoB,UAAAvB,oBAAA,IAAAqB,YAAA,I3F6uNZ,SAASjB,OAAQD,QAASH,qB4F7uNhC,GAAAmC,GAAAnC,oBAAA,EACAI,QAAAD,QAAA,QAAA4H,gBAAAsC,GAAAlD,IAAAs0B,MACA,MAAAt5B,GAAA2F,QAAAuC,GAAAlD,IAAAs0B,Q5FovNM,SAASr7B,OAAQD,QAASH,qB6F3uNhC,QAAS07B,wBAAwBvZ,OAAQ3H,QACpC2H,QAAUA,OAAOwZ,kBAAoBxZ,OAAO2C,aAAa,qBAC5D3C,OAAOwZ,iBAAiB/0B,QAAQ,SAAUga,SACrCA,QAAQxa,OAASoU,OAAOpU,MAG3Bwa,QAAQgb,QAAQr7B,KAAK4hB,OAAQ3H,U7FuuNhC,GAAI1Z,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAOrB,IAAI0M,OAAQ/N,oB6F5vNI,I7F8vNZgO,OAASlN,uBAAuBiN,OAEhC4L,kBAAoB3Z,oB6F/vND,I7FiwNnBkZ,mBAAqBpY,uBAAuB6Y,mBAE5CuG,iBAAmBlgB,oB6FlwND,I7FowNlBmgB,kBAAoBrf,uBAAuBof,kBAE3Cze,iBAAmBzB,oB6FrwNI,I7FuwNvBoY,YAAcpY,oB6FtwND,I7FwwNbqY,aAAevX,uBAAuBsX,a6FntNvC2P,OAAS7O,mBAAA,WAAYnO,OAAO,WAE/B,QAAS8wB,eAAeC,SAEvB,aAAeA,UACd,IAAK,SAAU,MAAOh6B,MAAK8hB,QAAQkY,QACnC,KAAK,SACJ,GAAIA,QAAQzV,OAAQ,MAAOyV,QAC3B,IAAI/T,OAAOjd,cAAcgxB,SAAU,MAAOA,QAC1C,IAAIA,QAAQ/uB,WAAa5L,SAAS6L,aAAc,MAAO7K,GAAE25B,SAG3D,MAAOh6B;CAGR,QAASi6B,sBAAsBj2B,MAAOk2B,UACrCl6B,KAAKsE,KAAON,MACZhE,KAAK85B,QAAUI,SAGhB,QAASC,aAAazhB,QACrB,OAAQA,OAAO7R,MACd,IAAK,aACJ7G,KAAKo6B,KAAK1hB,OAAOrX,MACjB,MAED,KAAK,YACJrB,KAAKq6B,SAAS3hB,OAAOrX,MACrB,MAED,KAAK,WACJrB,KAAKs6B,QAAQ5hB,OAAOrX,QAKvB,QAASk5B,oBACJv6B,KAAKw6B,YAAcx6B,KAAKgjB,aAAa,eAAiBhjB,KAAKw6B,WAAW/5B,QACzET,KAAKyY,GAAG,gCAAiC0hB,aAI3Cn6B,KAAKsM,SAAW,cAChBtM,KAAKy6B,OACJC,QAAS,UACTC,WAAY,aACZC,WAAY,aACZC,IAAK,OAGN76B,KAAK86B,UAAY,KACjB96B,KAAK+6B,WAAa,KAClB/6B,KAAK65B,iBAAmB,KACxB75B,KAAKg7B,YAAa,EAClBh7B,KAAKi7B,wBAAyB,EAC9Bj7B,KAAKk7B,cAAgB,KACrBl7B,KAAKm7B,UAAY,GACjBn7B,KAAKw6B,WAAa,KAClBx6B,KAAKqlB,cAAgB,KACrBrlB,KAAKo7B,kBAAoB,KAEzBp7B,KAAK8lB,gBACJpkB,KAAM,QAAAA,MAAU6gB,MAAOve,MAAOC,QAC7B,GAAIvC,KAEA1B,MAAKylB,GAAGlD,SACX7gB,KAAOuC,OAAO9C,MAAM,cACpBnB,KAAK8B,KACJE,MAAON,KAAK,GACZO,OAAQP,KAAK,IAAMA,KAAK,OAK3B3B,SAAU,QAAAA,UAAUwiB,MAAOve,MAAOC,QACjC,GAAIvC,KAEA1B,MAAKylB,GAAGlD,SACX7gB,KAAOuC,OAAO9C,MAAM,cACpBnB,KAAK8B,KACJQ,IAAKZ,KAAK,IAAMA,KAAK,GACrBU,KAAMV,KAAK,OAKdka,UAAW,QAAAA,WAAU2G,MAAOve,MAAOC,QAC7BjE,KAAK2M,eAAe,gBACxB3M,KAAKw6B,WAAan6B,KAGnBL,KAAKw6B,WAAWh6B,KAAK+hB,QAGtB8Y,GAAI,QAAAA,IAAU9Y,MAAOve,MAAOC,QAC3B,GAAIq3B,KAAM,GAAIC,MAETv7B,MAAK2M,eAAe,uBAAsB3M,KAAKo7B,sBAEhDp7B,KAAKgjB,aAAa,uBACrBsY,IAAIxW,IAAM7gB,OACVjE,KAAKo7B,kBAAkB56B,KAAK86B,KAC5Bj7B,EAAEkiB,OAAOzgB,IAAI,mBAAoB,OAAOmC,OAAO,SAKlDjE,KAAKujB,OAAS,SAAU7K,QAMvB,MALI1Y,MAAKo7B,mBAAqBp7B,KAAKgjB,aAAa,sBAC/ChjB,KAAKojB,YAAYpjB,KAAKo7B,mBAEvBb,iBAAiB97B,KAAKuB,MAEfA,KAAKsJ,SAGbtJ,KAAK0B,KAAO,WACX,GAAIA,KAEJ,OAAIC,WAAUlB,QACbiB,KAAO/B,iBAAAiC,KAAKC,OAAOF,WACnB3B,KAAK8B,IAAIJ,MACFA,MAGD/B,iBAAAiC,KAAKC,SAASE,IAAI/B,KAAKgC,QAAShC,KAAKiC,WAG7CjC,KAAKw7B,kBAAoB,SAAU9iB,QAClC,GAAI+iB,IAkBJ,OAhBAA,QAEAz7B,KAAK8hB,QAAQ,aAAa3hB,KAAK,SAAU6J,OAAQuY,OAChD,GAAIniB,OAAQC,EAAEkiB,MACdkZ,KAAIj7B,KAAKJ,MAAM7B,MAAQ6B,MAAMU,aAG1Bd,KAAK2M,eAAe,aAAe3M,KAAKkiB,SAASzhB,QAGpDT,KAAKkiB,SAASpd,QAAQ,SAAUub,QAC/BuZ,uBAAuBvZ,OAAQ3H,QAC/B2H,OAAOmb,kBAAkB9iB,UAIpB1Y,MAGRA,KAAK0lB,QAAU,SAAUgW,SAmBxB,MAlBK17B,MAAK2M,eAAe,mBACxB3M,KAAKqlB,cAAgB9O,aAAA,WAAM1U,SAC3B7B,KAAKqlB,cAAc5M,GAAG,WAAYzY,KAAKmiB,KAAK,WAC3CniB,KAAK2Y,IAAI,mBACT3Y,KAAK8Z,cAGN9Z,KAAK27B,QAAQ,WAAY,SAAUjjB,QAC7B1Y,KAAK+e,IAAIrG,OAAOhR,SACjBgR,OAAO0E,cAAgBpd,MAE3BA,KAAKqlB,cAAcxO,MAAM6B,OAAOkjB,mBAIlC57B,KAAKqlB,cAAcxG,IAAI6c,SACvB17B,KAAK67B,OAEE77B,MAGRA,KAAK87B,SAAW,SAAU93B,MAAO+3B,WAwBhC,MAvBAA,WAAU5rB,OAASnQ,KAAKgE,OAAS,WAChC,GAAIg4B,eAAe97B,MAmBnB,OAjBA87B,gBACC13B,KAAMN,MACNmnB,QAAS,GACT/N,YAAapd,KACb47B,eAAgB57B,MAGjBE,OAAS67B,UAAUh5B,MAAM/C,KAAM2B,WAET,gBAAXzB,UACV87B,cAAgB9vB,OAAA,WAAKK,MAAMyvB,cAAe97B,SAGvCA,UAAW,GACdF,KAAKgX,QAAQ3W,EAAE8c,MAAM,WAAY6e,gBAG3Bh8B,MAGDA,MAGRA,KAAK27B,QAAU,WACd,GAAIr3B,MAAMw1B,QAASmC,YAAaC,UAAWC,cAa3C,IAXKn8B,KAAK2M,eAAe,sBACxBuvB,UAAY7d,kBAAA,WAAWxc,SACvBs6B,eAAiBn8B,KAAKo8B,0BAElBp8B,KAAKi7B,wBAA2BkB,gBAAkBA,eAAetC,kBACpEqC,UAAU17B,KAAKuC,MAAMm5B,UAAWC,eAAetC,kBAGhD75B,KAAK65B,iBAAmBqC,WAGA,IAArBv6B,UAAUlB,OACb,aAAekB,WAAU,IACxB,IAAK,SAAU2C,KAAO3C,UAAU,EAAI,MAEpC,KAAK,WACL,IAAK,SAAUm4B,QAAUn4B,UAAU,OAKpC2C,MAAO3C,UAAU,GACjBm4B,QAAUn4B,UAAU,EAGrB,cAAem4B,UACd,IAAK,SACJ,IAAKx1B,OAAQw1B,SACPA,QAAQntB,eAAerI,OAE5BtE,KAAK27B,QAAQr3B,KAAMw1B,QAAQx1B,MAE5B,MAED,KAAK,WACJtE,KAAK65B,iBAAiBhb,IAAI,GAAIob,sBAAqB31B,KAAMw1B,UAI3D,MAAO95B,OAGRA,KAAK6sB,MAAQ,SAAUwP,MAAOC,KAC7B,GAAIluB,MAAOlC,OAAA,WAAK+B,WAAWouB,MAI3B,OAFAnwB,QAAA,WAAK8C,UAAUhP,KAAM,YAAaysB,WAAW6P,IAAIna,KAAKniB,MAAOoO,OAEtDpO,MAGRA,KAAKu8B,OAAS,SAAUF,MAAOC,KAC9B,GAAIluB,MAAOlC,OAAA,WAAK+B,WAAWouB,MAI3B,OAFAnwB,QAAA,WAAK8C,UAAUhP,KAAM,aAAcw8B,YAAYF,IAAIna,KAAKniB,MAAOoO,OAExDpO,MAGRA,KAAKy8B,KAAO,SAAUC,QACrB,GAAIn+B,IAAgB,WAAXm+B,OAAsB18B,KAAK+6B,WAAa/6B,KAAK86B,SAetD,OAbkB,gBAAPv8B,MACE,WAAXm+B,OAAsBC,cAAgB3P,cAAczuB,IACrDyB,KAAgB,WAAX08B,OAAsB,aAAe,aAAe,MAGjDn+B,KACRA,GAAGuG,QAAQ,SAAU0I,MACR,WAAXkvB,OAAsBC,cAAgB3P,cAAcxf,OAG3C,WAAXkvB,OAAsB18B,KAAK+6B,WAAa,KAAO/6B,KAAK86B,UAAY,MAG1D96B,MAGRA,KAAK48B,UAAY,SAAU1yB,SAAU2yB,KACpC,GAAIC,QAAQC,MAAOC,SAAUC,KAAMC,MA8CnC,OA5CAD,MAAOj9B,KAAKm7B,WAAa,IACzB+B,OAAS,EACTF,SAAW,EAENh9B,KAAK2M,eAAe,kBAAkD,IAA9B3M,KAAKk7B,cAAcz6B,SAC/Ds8B,MAAQ,SAAUV,OACjB,GAAIn5B,GAAG0f,OAEP,IAAIqa,MACCZ,MAAQW,UAAa,IAAKC,KAAO,CACpC,IAAK/5B,EAAE,EAAG0f,QAAU5iB,KAAKk7B,cAAch4B,GAAIA,GAAG,EAC7C0f,QAAQnkB,KAAKuB,KAAMq8B,MAAOt0B,KAAKuF,MAAM,KAAM+uB,MAAQW,WAAYC,KAG5DC,UAAWD,OAAMC,OAAS,GAE9BA,QAAQ,EACRF,SAAWX,MAITr8B,KAAKk7B,cAAcz6B,QACtBvB,OAAOi+B,sBAAsBL,SAI/BA,OAAS98B,KAAKmiB,KAAK4a,OAInBA,MAAM5sB,OAASnQ,KAAK48B,UAEpB58B,KAAKk7B,cAAgB7c,kBAAA,WAAWxc,SAChC3C,OAAOi+B,sBAAsBL,SAG1BD,OAAQ,EACX78B,KAAKk7B,cAAcrc,IAAI3U,UAIvBlK,KAAKk7B,cAAczd,OAAOvT,UAGpBlK,MAGRA,KAAKqB,MAAQ,SAAU+7B,MAAOxW,YAAayW,MAC1C,GAAIC,MAAMpjB,OAAQqjB,OAAQC,OAAQ/C,MAAOrK,IAAKqN,YAAaC,KAE3D,OAAK9W,cAILwJ,IAAMxJ,YAAYzlB,MAAM,OACxBu8B,MAAQN,MAAMj8B,MAAM,OACpBs8B,eAEArN,IAAItrB,QAAQ9E,KAAKmiB,KAAK,SAAUwb,MAC/B,GAAIxtB,QAAQmtB,IAEZntB,QAA+B,MAArBwtB,KAAKv6B,MAAM,EAAG,GAAc,WAAa,cAEnDq6B,YAAYj9B,MACX2P,OAAQA,OACRmtB,KAAMK,KAAKv6B,MAAM,KAGH,aAAX+M,SACHmtB,KAAOK,KAAKv6B,MAAM,GAClBq3B,MAAQvuB,OAAA,WAAKqB,YAAY+vB,MACzBt9B,KAAKy6B,MAAMA,OAAS6C,SAItBC,OAASG,MAAM,GACfxjB,OAASwjB,MAAM,GAEf19B,KAAKu9B,QAAU,SAAUvD,SACxB,GAAItyB,QAAQk2B,aAAcC,aAS1B,OAPAn2B,QAASqyB,cAAct7B,KAAKuB,KAAMg6B,SAClC4D,aAAev9B,EAAE8c,MAAM,MAAMogB,QAC5B71B,OAAQA,OAAO6c,OAAS7c,OAAO,GAAKA,OACpC0V,YAAapd,OAEd69B,cAAgB,EAEZR,MAAQA,KAAKS,WAAaT,KAAKS,UAAU/6B,MAAM/C,KAAM2B,cAAe,KAC7D07B,OAAQA,KAAKU,SAAWV,KAAKU,OAAOh7B,MAAM/C,KAAM2B,YAGvD07B,MAAQA,KAAKW,SAASX,KAAKW,QAAQj7B,MAAM/C,KAAM2B,WAEnD87B,YAAY34B,QAAQ,SAAUga,SAG7B+e,eAAiBpzB,OAAO/C,OAAOnG,SAASud,QAAQwe,UAAYxe,QAAQ3O,OAAOvP,QAAQ,QACnF8G,OAAOoX,QAAQ3O,QAAQ2O,QAAQwe,QAG5BD,MAAQA,KAAKY,QAAQZ,KAAKY,OAAOl7B,MAAM/C,KAAM2B,WAG7Ck8B,eACH79B,KAAKgX,QAAQ4mB,cACNl2B,SAGD,IAGJwS,SACHsjB,OAAS,MAAQtjB,OAAO9W,MAAM,EAAG,GAAG5B,cAAgB0Y,OAAO9W,MAAM,GAEjEpD,KAAKka,QAAU,SAAU8f,SACxB,GAAItyB,OAIJ,OAFAA,QAASqyB,cAAct7B,KAAKuB,KAAMg6B,SAE3BtyB,OAAOnG,SAASvB,KAAKy6B,MAAMA,SAGnCz6B,KAAKw9B,QAAU,WACd,MAAOx9B,MAAK8hB,QAAQ,IAAI9hB,KAAKy6B,MAAMA,UAI9Bz6B,MA7ECA,KAAKsJ,MAAM8zB,QAgFpBp9B,KAAKk+B,0BAA4B,WAChC,MAAOl+B,OAGRA,KAAKo8B,wBAA0B,WAC9B,GAAIhsB,MAIJ,OAFAA,OAAQlE,OAAA,WAAKa,SAAS/M,KAAMA,KAAKsM,YAExB8D,OAASA,MAAMpD,QAGzBhN,KAAKm+B,UAAY,WAChB,MAAOn+B,MAAKjB,KAAKq/B,UAAap+B,KAAK2M,eAAe,eAAiB3M,KAAKg7B,aAAgBh7B,KAAKqlB,eAAkBrlB,KAAK2M,eAAe,kBAAkD,IAA9B3M,KAAKqlB,cAAc5kB,QAS3KT,KAAK87B,SAAS,WAAY,WACzB,MAAI97B,MAAK2M,eAAe,eAAiB3M,KAAKg7B,YAAmB,GAEjEh7B,KAAKg7B,YAAa,EAClBh7B,KAAK+c,SAAS,aAGb6e,eAAgB57B,SAalBA,KAAK87B,SAAS,OAAQ,SAAU/P,QAC/B,OACC1qB,MAAO0qB,OACP6P,eAAgB7P,OAAO7P,cAazBlc,KAAK87B,SAAS,WAAY,SAAU/P,QACnC,OACC1qB,MAAO0qB,OACP6P,eAAgB7P,OAAO7P,cAazBlc,KAAK87B,SAAS,UAAW,SAAU/P,QAClC,OACC1qB,MAAO0qB,OACP6P,eAAgB7P,OAAO7P,cA4BzBlc,KAAKqB,MAAM,cAAe,gBAU1BrB,KAAKqB,MAAM,QAAS,SA0BpBrB,KAAKqB,MAAM,aAAc,UACxB28B,QAAS,QAAAA,SAAUhE,SAClBh6B,KAAKq+B,MAAMrE,YA4Bbh6B,KAAKqB,MAAM,iBAAkB,sBA0B7BrB,KAAKqB,MAAM,mBAAoB,sBA0B/BrB,KAAKqB,MAAM,kBAAmB,aAC7B28B,QAAS,QAAAA,SAAUhE,SAClB,GAAItyB,QAAQ42B,OAEZ52B,QAASqyB,cAAct7B,KAAKuB,KAAMg6B,SAClCsE,QAAU52B,OAAO2f,SAEjBiX,QAAQ/d,KAAK,eAAepgB,KAAKH,KAAKmiB,KAAK,SAAUnY,OAAQuY,OAC5DviB,KAAKu+B,SAAShc,UAEf+b,QAAQ/d,KAAK,kBAAkBpgB,KAAKH,KAAKmiB,KAAK,SAAUnY,OAAQuY,OAC/DviB,KAAKw+B,YAAYjc,aAapBviB,KAAKqB,MAAM,WAAY,aA0BvBrB,KAAKqB,MAAM,wBAAyB,gBAUpCrB,KAAKqB,MAAM,cAAe,gBA0B1BrB,KAAKqB,MAAM,wBAAyB,cACnC48B,OAAQ,QAAAA,QAAUjE,SACjBh6B,KAAKyD,UAAWs2B,cAAct7B,KAAKuB,KAAMg6B,aAY3Ch6B,KAAKqB,MAAM,cAAe,cAoC1BrB,KAAKqB,MAAM,uBAAwB,eAClC28B,QAAS,QAAAA,SAAUS,cAAelzB,QACjC,GAAI/H,OAAOkE,MAEXA,QAASqyB,cAAct7B,KAAKuB,KAAMy+B,eAClCj7B,QAAYi7B,cAAcp8B,EAAGo8B,cAAcl8B,GAAG3B,QAAQD,QAA8B4K,OAAhBkzB,cAEhEj7B,OACHkE,OAAO5F,IAAI,YAAa,cAAc0B,MAAMnB,EAAE,kBAAkBmB,MAAMjB,EAAE,UAa3EvC,KAAKqB,MAAM,cAAe,eACzB28B,QAAS,QAAAA,WACRh+B,KAAK8B,IAAI,YAAa,WAIxB9B,KAAKqB,MAAM,aAAc,W7FuwNzBhD,SAAQ,Y6FnwNQ4nB,cAAQ2T,+C7FowNxBt7B,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/BG,QAAQkB,YAAa,CAOrB,IAAIuY,cAAe5Z,oB8F5mP2B,IAE3CwgC,OAAS5mB,aAAAmO,OAAOhd,OAAO,WAE1B,QAAS01B,uBACR3+B,KAAKyY,GAAG,WAAY,SAAUC,QAGzB1Y,OAAS0Y,OAAO0E,aACnBtF,aAAA8hB,uBAAuB55B,KAAO0Y,QAG/B1Y,KAAKw7B,kBAAkB9iB,UAIzB1Y,KAAKsM,SAAW,cAChBtM,KAAKjB,KAAO,KACZiB,KAAKolB,OAAS,KAEdplB,KAAKujB,OAAS,WACbvjB,KAAKsJ,QAEDtJ,KAAKylB,GAAGrmB,GAAGL,KAAKya,OAAO,oBAC1BmlB,oBAAoBlgC,KAAKuB,OAI3BA,KAAK8a,MAAQ,WAEZ,MADA9a,MAAK4+B,aACE5+B,MAGRA,KAAKktB,KAAO,WAEX,MADAltB,MAAK6+B,YACE7+B,MAGRA,KAAK8sB,MAAQ,WAOZ,MANA9sB,MAAK8+B,aACF9+B,KAAK2M,eAAe,aAAe3M,KAAKkiB,UAC1CliB,KAAKkiB,SAASpd,QAAQ,SAASihB,QACH,kBAAjBA,QAAO+G,OAAsB/G,OAAO+G,UAGzC9sB,MAGRA,KAAKitB,OAAS,WAOb,MANAjtB,MAAK++B,cACF/+B,KAAK2M,eAAe,aAAe3M,KAAKkiB,UAC1CliB,KAAKkiB,SAASpd,QAAQ,SAASihB,QACF,kBAAlBA,QAAOkH,QAAuBlH,OAAOkH,WAG1CjtB,MAGRA,KAAK4+B,WAAa,WACZ5+B,KAAK2jB,QACV3jB,KAAK2jB,MAAMG,WAAW3kB,OACtBa,KAAK2jB,MAAME,UAAU1kB,SAGtBa,KAAK6+B,UAAY,WACX7+B,KAAK2jB,OACV3jB,KAAK2jB,MAAME,UAAUqJ,KAAK,SAG3BltB,KAAK8+B,WAAa,WACjB,GAAI9+B,KAAKokB,aACT,IAAI,GAAIX,SAASzjB,MAAKokB,aAClBpkB,KAAKokB,aAAazX,eAAe8W,QAChCzjB,KAAKokB,aAAaX,QAAQzjB,KAAKokB,aAAaX,OAAOqJ,SAKzD9sB,KAAK++B,YAAc,WAClB,GAAI/+B,KAAKokB,aACT,IAAI,GAAIX,SAASzjB,MAAKokB,aAClBpkB,KAAKokB,aAAazX,eAAe8W,QAChCzjB,KAAKokB,aAAaX,QAAQzjB,KAAKokB,aAAaX,OAAOwJ,UAKzDjtB,KAAKoN,MAAQ,WACZ,MAAIpN,QAASA,KAAKolB,OAAeplB,KAAKjB,KAAKigC,QAAQp+B,QAAQZ,MACpDA,KAAKgiB,KAAK5U,SAGlBpN,KAAKivB,KAAO,WACX,MAAKjvB,MAAKm+B,YACHn+B,KAAKjB,KAAKigC,QAAQh/B,KAAKolB,OAAOhY,QAAQ,IADf,GAI/BpN,KAAKi/B,KAAO,WACX,MAAOj/B,MAAKjB,KAAKigC,QAAQh/B,KAAKolB,OAAOhY,QAAQ,IAG9CpN,KAAKk/B,KAAO,WACXl/B,KAAKjB,KAAKmgC,KAAKnW,QAGhB/oB,KAAKm/B,QAAU,WACd,MAAO9+B,GAAEuE,GAAGqqB,KAAKlsB,MAAM/C,KAAKgiB,KAAMrgB,YAGnC3B,KAAKo/B,QAAU,WACd,MAAO/+B,GAAEuE,GAAGq6B,KAAKl8B,MAAM/C,KAAKgiB,KAAMrgB,YAGnC3B,KAAKq/B,OAAS,WACb,MAAOr/B,MAAKjB,KAAKigC,QAAQp+B,QAAQZ,KAAKolB,UAAYplB,KAAKjB,KAAKigC,QAAQv+B,OAAO,I9FgnP5EpC,SAAQ,W8F3mPMqgC,O9F4mPdpgC,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIuK,0BAA2BvK,oBAAoB,IAAI,WAEnDc,uBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAKrB,IAAI0M,OAAQ/N,oB+FrvPI,I/FuvPZgO,OAASlN,uBAAuBiN,OAEhCoK,UAAYnY,oB+FxvPA,I/F0vPZ4X,WAAa9W,uBAAuBqX,WAEpCwB,kBAAoB3Z,oB+F3vPD,I/F6vPnBkZ,mBAAqBpY,uBAAuB6Y,mBAE5CG,aAAe9Z,oB+F9vPD,I/FgwPd+Z,cAAgBjZ,uBAAuBgZ,cAEvCoG,iBAAmBlgB,oB+FjwPD,I/FmwPlBmgB,kBAAoBrf,uBAAuBof,kBAE3Ca,YAAc/gB,oB+FpwPU,I/FswPxByB,iBAAmBzB,oB+FrwPH,I/FuwPhB0hB,mBAAqB1hB,oB+FtwPG,IAEzBohC,KAAOloB,mBAAA,WAAYnO,OAAO,WAO7B,QAASs2B,gBACR,GAAIC,eAAgB,EAEjBC,SAAOD,eAAiB,QACxBE,mBAAkBF,eAAiB,WAEtCx/B,KAAK+c,SAASyiB,eAGf,QAASC,OACR,GAAIE,WACH,iBACA,mBACA,iBACA,OACA,SACA,OAGD,IAAMC,UAAUC,SACf,KAAOF,SAASl/B,QACf,GAAIm/B,UAAUC,WAAaF,SAASG,MAAQ,OAAO,CAIrD,QAAO,EAGR,QAASJ,kBACR,GAAIpK,QAAQ,CAEZ,OADA,UAAUxxB,IAAM,sVAAsViL,KAAKjL,IAAI,0kDAA0kDiL,KAAKjL,EAAEi8B,OAAO,EAAE,OAAIzK,OAAQ,IAAOsK,UAAUI,WAAWJ,UAAUK,QAAQ/gC,OAAOghC,OACngE5K,MAMR,QAAS6K,aACR,GAAIC,QAAQC,eAAgBr+B,MAAOC,OAAQua,IAE3C4jB,QAASpgC,KAAKsgC,SAAS5+B,OACvB2+B,eAAiBvqB,WAAA,WAAK0D,OAAO,cAC7BxX,MAAQq+B,eAAer+B,OAAShC,KAAKgC,QACrCC,OAAS8F,KAAKuF,MAAM+yB,eAAer+B,MAAQq+B,eAAej2B,OAC1DoS,KAAOxc,KAAKsgC,SAASt+B,MAAQA,MAEzB+F,KAAKuF,MAAMrL,OAASua,MAAQxc,KAAKsgC,SAASr+B,SAC7Cua,MAAQxc,KAAKsgC,SAASr+B,OAASA,QAAQs+B,YAAY,IAGpDr0B,OAAA,WAAKK,MAAMvM,KAAK6hB,OAAO1W,OACtBnJ,MAAOA,MAAM,KACbwa,KAAMA,OAGFxc,KAAK8B,IAAI,SACb9B,KAAK8B,KACJY,UAAW,SAAS8Z,KAAK,IACzBgkB,iBAAyB,EAAPhkB,KAAW,MAAQ,OAAO,WAC5Cva,OAAQjC,KAAKsgC,SAASr+B,OAASua,OAIjCxc,KAAKwc,KAAOA,KAGb,QAAS4hB,UAAU19B,MAClBV,KAAKo+B,SAAmB,MAAR19B,KAAeA,MAAQV,KAAKo+B,SAC5Cp+B,KAAKA,KAAKo+B,SAAW,WAAa,eAAe,QAEjDnuB,QAAQwwB,KAAKzgC,KAAKzB,KAAM,WAAWyB,KAAKo+B,SAAW,KAAO,UAAU,eAGrE,QAASsC,iBACR1gC,KAAKugB,KAAK,SAASpgB,KAAK,SAAU6J,OAAQuY,OACzCviB,KAAKyjB,MAAM4E,MAAMxJ,IAAI0D,OAErBA,MAAMoe,OAAS,WACd,GAAIlV,SAAUzrB,KAAKyjB,MAAMgI,QAAQ,0BAC7BA,UAASA,QAAQyB,KAAK,QAC1BltB,KAAK2Y,IAAI,aAAc8S,UACtBtJ,KAAKniB,OACNmiB,KAAKniB,OAvFR,GAAI4gC,UAAUC,gBAAiBC,oBA0F/BD,iBAAe5oB,cAAA,WACf6oB,qBAAuB,GAAK,YAE3B9gC,KAAKy2B,OAAS,SAAU/d,OAAQqoB,MACE,kBAAtB/gC,MAAK0Y,OAAOpU,OACtBtE,KAAK0Y,OAAOpU,MAAM7F,KAAKsiC,KAAMroB,SAI/B1Y,KAAK,oBAAsB,SAAUU,MACpC09B,SAAS3/B,KAAKuB,QAIhBA,KAAKsM,SAAW,YAChBtM,KAAKg/B,QAAU,KACfh/B,KAAKwc,KAAO,EACZxc,KAAKghC,YAAc,KACnBhhC,KAAKo+B,UAAW,EAChBp+B,KAAKyjB,MAAQ,KACbzjB,KAAKsgC,SAAW,GAAK,YACpB,GAAIW,IAAIC,MAAOC,eAEfF,IAAKjhC,KACLkhC,MAAQ7gC,EAAE,QACV8gC,mBAEA9gC,EAAEnB,QAAQuZ,GAAG,SAAU,SAAUC,QAC3BwoB,MAAM3/B,SAAS0/B,GAAGG,cACtBF,MACEhkB,YAAY,gCACZH,SAASkkB,GAAGG,aAGfD,gBAAgBr8B,QAAQ,SAAUoF,UACjCA,SAASwO,YAIX1Y,KAAKqhC,UAAY,YACjBrhC,KAAKshC,SAAW,WAChBthC,KAAKuhC,UAAY,YAEjBvhC,KAAK0B,KAAO,WACX,MAAO/B,kBAAAiC,KAAKC,SAASE,IAAI7C,OAAOsiC,WAAYtiC,OAAOuiC,cAGpDh5B,yBAAwBzI,MACvBgC,OACCwI,IAAK,QAAAA,OACJ,MAAOtL,QAAOsiC,YAGfvR,cAAc,GAGfhuB,QACCuI,IAAK,QAAAA,OACJ,MAAOtL,QAAOuiC,aAGfxR,cAAc,GAGfmR,aACC52B,IAAK,QAAAA,OACJ,GAAIJ,OAAQpK,KAAK0B,OAAO0I,OAExB,SAAQ,GACP,IAAKA,OAAQ,IAAe,IAARA,MAAa,MAAO,WACxC,KAAKA,OAAQ,IAAK,MAAO,WACzB,KAAa,GAARA,MAAa,MAAO,gBAM7BpK,KAAK0hC,SAAW,SAAUx3B,UACzBi3B,gBAAgB3gC,KAAK0J,WAGtBlK,KAAK2hC,UAAY,SAAUz3B,UAC1B,GAAIkD,OAAQ+zB,gBAAgBvgC,QAAQsJ,WAE/BkD,OAAO+zB,gBAAgBpnB,OAAO3M,MAAO,IAG3C8zB,MAAMnkB,SAAS/c,KAAKohC,cAIrBphC,KAAKykB,SAAW,WAsBf,MArBAzkB,MAAK+c,SAAS,WAEdwiB,aAAa9gC,KAAKuB,MAClBmgC,UAAU1hC,KAAKuB,MACfA,KAAK4hC,aACL5hC,KAAK6hC,iBAEL7hC,KAAKsgC,SAASoB,SAAS1hC,KAAKmiB,KAAKge,YAEjC/gC,GAAGL,KAAK0Z,GAAG,iBAAkBzY,KAAKmiB,KAAK,SAAUzJ,QAChDooB,qBAAqBrK,OAAO/d,OAAQ1Y,SAGrCd,OAAOI,iBAAiB,OAAQJ,OAAO4iC,OACvC5iC,OAAOI,iBAAiB,QAAS,WAChCU,KAAKitB,UACJ9K,KAAKniB,OACPd,OAAOI,iBAAiB,OAAQ,WAC/BU,KAAK8sB,SACJ3K,KAAKniB,OAEAA,MA6BRA,KAAK+hC,OAAS,SAAUC,UAAW93B,UAClC,GAAI+3B,UAAUC,OAAQC,UAAW9+B,GAkHjC,OAhHKrD,MAAKghC,cACThhC,KAAKghC,eAEL39B,KACC++B,GAAI,QACJC,GAAI,QACJC,GAAI,OACJC,GAAI,MACJC,GAAI,MACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OACJC,GAAI,OACJ3M,MAAO,GACP4M,MAAO,GACPC,KAAO,GACPC,IAAO,GACPC,IAAO,GACP7gC,KAAO,GACP8gC,GAAO,GACPC,MAAO,GACPC,KAAO,GACPC,KAAO,IAGRlB,WAAa,GAAI,GAAI,GAAI,IACzBF,YACAC,UAEAliC,KAAKyY,GAAG,UAAW,SAAUC,QAC5B,GAAI4qB,UAAUj+B,IAAKk+B,UAAWC,YAAaC,QAAS7gB,OAEpD0gB,aAAenB,UAAUvhC,QAAQ8X,OAAOgrB,UAAargC,IAAIqV,OAAOgrB,SAChEr+B,IAAOi+B,SAAYA,SAAWjgC,IAAIqV,OAAOgrB,UAAYjW,OAAOkW,aAAajrB,OAAOgrB,SAChFH,WAAa7qB,OAAOkrB,SAAUlrB,OAAOmrB,QAASnrB,OAAOorB,OAAQprB,OAAOqrB,SACpEP,eAGAD,UAAUz+B,QAAQ,SAAUk/B,cAAeh6B,QAEtCg6B,eAAeR,YAAYhjC,KAAK6C,IAAI8+B,UAAUn4B,aAI9Ck4B,OAAOthC,QAAQyE,OAAS48B,SAASrhC,QAAQyE,OAG9Co+B,QAAUvB,OAAOzhC,QACfyhC,OAAO1hC,KAAK6E,KAAM68B,OAAO9gC,KAAK,OAC9B6gC,SAASzhC,KAAK6E,KAAM48B,SAAS7gC,KAAK,MAEpCwhB,QAAU5iB,KAAKghC,YAAYyC,SAEvB7gB,UACHA,QAAQnkB,KAAKuB,KAAM0Y,OAAQ+qB,SAE3BxB,SAAWuB,YAAYngC,IAAI,SAAUsb,KAAM3U,QAC1C,GAAI3E,KAAM48B,SAASj4B,OACnB,OAAOw5B,aAAYA,YAAY5iC,QAAQyE,QAExC68B,UAGAxpB,OAAO6F,qBAITve,KAAKyY,GAAG,QAAS,SAAUC,QAC1B,GAAIrT,KAAK+H,MAAOk2B,SAAUC,UAAWC,WAErCn+B,KAAOi+B,SAAYA,SAAWjgC,IAAIqV,OAAOgrB,UAAYjW,OAAOkW,aAAajrB,OAAOgrB,SAChFt2B,MAAQ60B,SAASrhC,QAAQyE,KACzBi+B,YAAenB,UAAUvhC,QAAQ8X,OAAOgrB,UAAargC,IAAIqV,OAAOgrB,SAEhEH,WAAa7qB,OAAOkrB,SAAUlrB,OAAOmrB,QAASnrB,OAAOorB,OAAQprB,OAAOqrB,SACpEP,eAGAD,UAAUz+B,QAAQ,SAAUk/B,cAAeh6B,QAEtCg6B,eAAeR,YAAYhjC,KAAK6C,IAAI8+B,UAAUn4B,YAI/C3E,MAAQi+B,UAEXrB,SAAWuB,YAAYngC,IAAI,SAAUsb,KAAM3U,QAC1C,GAAI3E,KAAM48B,SAASj4B,OACnB,OAAOw5B,aAAYA,YAAY5iC,QAAQyE,QAGxC68B,YAKID,SAASxhC,OAAS,IAEhB0hC,UAAUvhC,QAAQyC,IAAI4+B,SAAS,MACnCC,OAAO1hC,KAAKyhC,SAAS7gC,KAAK,OAIvBgM,OAAO60B,SAASloB,OAAO3M,MAAO,GAC9B60B,SAASxhC,SAAQyhC,eAKzBliC,KAAKghC,YAAYgB,WAAa93B,SAEvBlK,MAGRA,KAAKolB,OAAS,SAAU5X,IAAKwC,iBAC5B,GAAInH,WAAWyZ,SAAU2hB,eAAgB56B,QAEzC,OAAyB,KAArB1H,UAAUlB,QAA+B,kBAAR+M,MACpCqzB,gBAAkB5oB,cAAA,WAAOhP,OAAOuE,KACzBxN,OAGHA,KAAK2M,eAAe,aAAY3M,KAAKg/B,QAAU3gB,kBAAA,WAAWxc,UAE3D7B,KAAK2M,eAAe,SAEvBs3B,eAAiB7kC,GAAGL,KAAKya,OAAO,kBAChC3Q,UAAag4B,gBAAgB73B,cAAchJ,MAASA,KAAO6gC,gBAC3Dve,SAA2B,gBAAR9U,KAAoBy2B,eAAe,eAAez2B,IAAI,GAAG,IAAM,IAAIA,IACtFnE,SAAWR,UAAUI,OAAO+G,iBAAiB2G,WAAW3W,KAAKugB,KAAK+B,WAElEjZ,SAAS+b,OAAS/b,SACbA,SAAStK,OACbsK,SAAStK,KAAOsK,SAAS9I,QAAQ,YAAYN,UAK9CD,KAAKg/B,QAAQx+B,MACZ4M,MAAuB,gBAARI,KAAoBA,IAAM,KACzClJ,KAAsB,gBAARkJ,KAAoBA,IAAM,KACxC0J,eAAgBlH,kBAIXhQ,OAGRA,KAAK6hC,eAAiB,WACrB,GAAIoC,gBAAgBp7B,UAAWyX,UA2B/B,OAzBA2jB,gBAAiB7kC,GAAGL,KAAKya,OAAO,kBAChC3Q,UAAag4B,gBAAgB73B,cAAchJ,MAASA,KAAO6gC,gBAC3DvgB,cAEAtgB,KAAK8hB,QAAQmiB,gBAAgB9jC,KAAKH,KAAKmiB,KAAK,SAAUnY,OAAQuY,OAC7D,GAAIniB,OAAOglB,OAAQnK,OAAQ5V,IAAK9G,GAAI6O,MAAOmL,SAE3CnY,OAAQC,EAAEkiB,OACVhkB,GAAK6B,MAAM7B,KACX8G,IAAO9G,GAAM,QAAUA,GAAKyL,OAAQ,SACpCiR,OAASjb,KAAKg/B,SAAWh/B,KAAKg/B,QAAQx0B,IAAIjM,GAAI8G,KAC9CkT,UAAYnY,MAAMS,KAAK,gBACvBukB,OAASnG,YAAAG,aAAa3gB,KAAKoK,UAAWzI,MAAO6a,QAAUA,OAAO/D,gBAC9DkO,OAAOA,OAASA,OAChBA,OAAOrmB,KAAOiB,KAEe,MAAzBI,MAAMS,KAAK,YAAoByf,WAAW9f,KAAK4kB,SAEvC,SAAR/f,KAAkBkT,YACrBrM,OAAA,WAAK8C,UAAUhP,KAAMkM,OAAA,WAAKqB,YAAqB,SAARlI,KAAkB9G,IAAOga,WAAW,GAAO6M,WAIhF9E,WAAW7f,SAAQT,KAAKg/B,QAAU1e,YAE/BtgB,MAGRA,KAAK4hC,WAAa,WACjB5hC,KAAKyjB,MAAQ7D,mBAAAmI,aAAalmB,OAAO7B,KAAKzB,MAKtCyB,KAAKyjB,MAAMzF,KAAK,0BAA2B,aAAc,SAAUtF,QAClE,GAAI+S,SAAUzrB,KAAKyrB,aAEnB/S,QAAO8N,UAAUiF,UAAYA,QAAQhrB,UAAagrB,QAAQ7qB,QAAQ8X,OAAOhR,UAAY+jB,QAAQ1M,IAAIrG,OAAOhR,OAAOmhB,aAMhH7oB,KAAKyjB,MAAMzF,KAAK,aAAc,SAAUtF,QACvC,GAAIiL,OAAO8H,OAKX,QAHA9H,MAAQjL,OAAOhR,OACf+jB,QAAU9H,OAAS3jB,KAAKyrB,QAAQ,eAAe9H,MAAMplB,KAAK,KAElDma,OAAO7R,MACd,IAAK,OACA4kB,UACHA,QAAQzM,OAAO,cAAckO,KAAK,QAClCzB,QAAQzM,OAAO,eAAeqO,OAAOvX,WAAA,WAAK0D,OAAO,kBAAoB,IAEtE,MAED,KAAK,QACL,IAAK,UACL,IAAK,QACAiS,SAASA,QAAQzM,OAAO,eAAeqO,OAAOvX,WAAA,WAAK0D,OAAO,iBAAmB,MAKpFxZ,KAAKyjB,MAAMzF,KAAK,cAAe,OAAQ,SAAUtF,QAChD,GAAI+S,SAAUzrB,KAAKyrB,QAAQ,oBAAoB/S,OAAOhR,OAAOnJ,KAAK,IAC9DktB,UAASA,QAAQyB,KAAK,WAGtB9tB,GAAGqX,MAAMT,OAAOpV,QAAQ,UAC5BZ,KAAKyY,GAAGrZ,GAAGqX,MAAMT,OAAQ,QAASkuB,YAAYxrB,QAC7C,GAAI/R,KAAKye,MAETze,KAAMmP,WAAA,WAAKsE,kBACXgL,OAASplB,KAAKmkC,gBAEV/e,QAAUze,KAAqB,cAAdA,IAAItF,QACxByU,WAAA,WAAKyE,qBACLva,KAAK2Y,IAAI,YACTyM,OAAOwZ,aACP5+B,KAAKilB,IAAI7lB,GAAGqX,MAAMT,OAAQkuB,eAK7BxD,cAAcjiC,KAAKuB,OAGpBA,KAAKoZ,SAAW,WACf,OACC+qB,cAAenkC,KAAKmkC,gBAAgB/2B,UAItCpN,KAAKmkC,cAAgB,WACpB,MAAOnkC,MAAK8hB,QAAQ1iB,GAAGL,KAAKya,OAAO,kBAAkB,SAAS4qB,IAAI,SAASnkC,SAG5ED,KAAKsZ,KAAO,WACXrJ,QAAQ0I,IAAI,iBACZ7C,WAAA,WAAKkD,OAAOM,KAAKtZ,OAGlBA,KAAK8sB,MAAQ,SAASuX,YACjBA,YAAYrkC,KAAK+c,SAAS,UAC9B/c,KAAKg/B,QAAQl6B,QAAQ,SAASsgB,QAC1BA,OAAO/jB,MAAM+jB,OAAOqV,MAAM6J,OAC5Blf,OAAO0H,UAGThX,WAAA,WAAKsE,kBAAkBmqB,WAGxBvkC,KAAKitB,OAAS,WACbjtB,KAAKkd,YAAY,UACjBld,KAAKg/B,QAAQl6B,QAAQ,SAASsgB,QAC1BA,OAAO/jB,MAAM+jB,OAAOqV,MAAM6J,OAAOlf,OAAO6H,WAExCjtB,KAAKuB,SAAS,gBAAgBuU,WAAA,WAAKsE,kBAAkB6S,UAG1DjtB,KAAKiZ,KAAO,WACXhJ,QAAQ0I,IAAI,YACZ7C,WAAA,WAAKkD,OAAOC,KAAKjZ,OAMlBA,KAAK+hC,OAAO,WAAY,WACvB3D,SAAS3/B,KAAKuB,QAMfA,KAAK+hC,OAAO,OAAQ,WACnB,GAAIyC,QAEJA,SAAUxkC,KAAKmkC,gBAEXK,SAASA,QAAQvF,SAGtBj/B,KAAK+hC,OAAO,QAAS,WACpB,GAAIyC,QAEJA,SAAUxkC,KAAKmkC,gBAEXK,SAASA,QAAQvV,U/FiwPtB5wB,SAAQ,W+F5vPMihC,K/F6vPdhhC,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,QAASH,qBAE/B,GAAIc,wBAAyBd,oBAAoB,GAAG,UAEpDG,SAAQkB,YAAa,CAOrB,IAAI0M,OAAQ/N,oBgGnzQI,IhGqzQZgO,OAASlN,uBAAuBiN,OgGnzQjC4zB,SAAW,GAAK,YAEnB,QAAS4E,aAAazgC,MAAO0gC,QAC5B,GAAIC,YAgBJ,OAdAA,aAAcz4B,OAAA,WAAKK,MAAM,GAAI4Q,OAAM,cAAeynB,SAAQ,EAAMC,YAAW,KAC1EvgC,KAAMN,MACN23B,QAAS,QAAAA,SAAUmJ,OAClB,GAAIC,cAEJA,eAAgB1kC,EAAE8c,MAAM,kBACvB7Y,KAAMN,MACN4U,SAAUksB,QAGX1lC,GAAGL,KAAKiY,QAAQ+tB,iBAEfL,QAKJ1kC,KAAK+Y,WAAa,OAClB/Y,KAAKglC,WAAa,OAClBhlC,KAAKqZ,WAAa,OAClBrZ,KAAKuZ,cAAgB,UAErBvZ,KAAK8Y,KAAO,SAAU9U,OACjB9E,OAAO+lC,cAAc/lC,OAAO+lC,aAAaC,cAAcT,YAAYzgC,SAGxEhE,KAAKmZ,cAAgB,SAAU2rB,OAC1B5lC,OAAO+lC,cAAc/lC,OAAO+lC,aAAaC,cAAcT,YAAYzkC,KAAKglC,YAAcpsB,SAAUksB,UAGrG5lC,OAAOI,iBAAiB,iBAAkB,SAAUoZ,QACnD,GAAIqsB,cAEJA,eAAgB1kC,EAAE8c,MAAM,kBACvB7Y,KAAMoU,OAAOpU,OAGdlF,GAAGL,KAAKiY,QAAQ+tB,iBhGyzQjB1mC,SAAQ,WgGpzQMwhC,ShGqzQdvhC,OAAOD,QAAUA,QAAQ","file":"play.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Boot file for the Play library.\n\t *\n\t * @module\n\t *\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires jQExtentions\n\t * @requires play\n\t */\n\t\n\t__webpack_require__(4);\n\t\n\tvar _play = __webpack_require__(23);\n\t\n\tvar _play2 = _interopRequireDefault(_play);\n\t\n\t/**\n\t * Begin running the library\n\t */\n\tfunction run() {\n\t  _play2['default'].game.run();\n\t}\n\t\n\t// export namespace to global object.\n\twindow.play = window.pl = _play2['default'];\n\t\n\t// Invoke 'run' when DOM has finished loading.\n\tdocument.addEventListener('DOMContentLoaded', run, false);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(3);\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (obj) {\n\t  return obj && obj.__esModule ? obj : {\n\t    default: obj\n\t  };\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Array$forEach = __webpack_require__(5)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\t/**\n\t * Extentions to jQuery used by the library.\n\t * \n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires types/Dimensions\n\t * @requires Matrix\n\t */\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _libMatrix = __webpack_require__(22);\n\t\n\tvar _libMatrix2 = _interopRequireDefault(_libMatrix);\n\t\n\t/**\n\t * jQuery's prototype\n\t * @external jQuery\n\t * @see {@link http://api.jquery.com/}\n\t */\n\t\n\t(function () {\n\t\tvar original;\n\t\n\t\toriginal = {\n\t\t\tposition: this.position\n\t\t};\n\t\n\t\t/**\n\t  * Resolves the scope for each of the set of matched nodes.\n\t  * @function external:jQuery#scope\n\t  * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n\t  */\n\t\tthis.scope = function () {\n\t\t\tvar result;\n\t\n\t\t\tresult = [];\n\t\n\t\t\tthis.each(function () {\n\t\t\t\tvar $node, scope;\n\t\n\t\t\t\t$node = $(this);\n\t\t\t\tscope = $node.data('pl-scope');\n\t\n\t\t\t\tif (!scope) {\n\t\t\t\t\tscope = $node.closest('.pl-scope').data('pl-scope');\n\t\t\t\t}\n\t\n\t\t\t\tif (scope) result.push(scope);\n\t\t\t});\n\t\n\t\t\treturn result.length > 1 ? result : result[0];\n\t\t};\n\t\n\t\t/**\n\t  * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n\t  * @function external:jQuery#id\n\t  * @arg {string} [_set] Name to set as the node's id.\n\t  * @returns {string} The resolved id.\n\t  */\n\t\tthis.id = function (_set) {\n\t\t\tif (_set !== undefined) {\n\t\t\t\t// Remove attribute.\n\t\t\t\tif (~['', null].indexOf(_set)) {\n\t\t\t\t\tthis.attr('id', null);\n\t\t\t\t}\n\t\n\t\t\t\t// If document already has the id defined then set as a unique library id.\n\t\t\t\tif ($('#' + _set).length) {\n\t\t\t\t\tthis.attr('pl-id', _set);\n\t\t\t\t} else {\n\t\t\t\t\tthis.attr('id', _set);\n\t\t\t\t}\n\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\treturn this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n\t\t};\n\t\n\t\t/**\n\t  * Provides the 'relative' CSS selector for the first node in the collection.\n\t  * @function external:jQuery#address\n\t  * @returns {string}\n\t  *\n\t  * @example\n\t  * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n\t  * $('#sweater').address() // div#sweater.wide\n\t  */\n\t\tthis.address = function () {\n\t\t\tvar tag, id, classes;\n\t\n\t\t\ttag = this[0].nodeName.toLowerCase();\n\t\t\tid = this.attr('id');\n\t\t\tclasses = this.attr('class') ? '.' + this.attr('class').split(' ').join('.') : '';\n\t\n\t\t\treturn tag + (id ? '#' + id : '') + classes;\n\t\t};\n\t\n\t\t/**\n\t  * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n\t  * @function external:jQuery#state\n\t  * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n\t  * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n\t  */\n\t\tthis.state = function (_test) {\n\t\t\tvar classes;\n\t\n\t\t\tif (_test) return this.hasClass(_test.toUpperCase());\n\t\n\t\t\tclasses = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\t\n\t\t\treturn classes && (classes.length === 1 ? classes[0] : classes);\n\t\t};\n\t\n\t\tthis.size = function () {\n\t\t\tvar size;\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\tsize = _typesDimensions.Size.create().set(this.width(), this.height());\n\t\t\t} else {\n\t\t\t\tsize = _typesDimensions.Size.create(arguments);\n\t\t\t\tthis.css(size);\n\t\t\t}\n\t\n\t\t\treturn size;\n\t\t};\n\t\n\t\tthis.position = function () {\n\t\t\tvar pos;\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\tpos = original.position.call(this);\n\t\t\t\tpos = _typesDimensions.Point.create().set(pos.left, pos.top);\n\t\t\t} else {\n\t\t\t\tpos = _typesDimensions.Point.create(arguments);\n\t\n\t\t\t\tthis.css({\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\tleft: pos.x,\n\t\t\t\t\ttop: pos.y\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn pos;\n\t\t};\n\t\n\t\t/**\n\t  * Provides the jQuery offset for the first node in the collection.\n\t  * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n\t  * @function external:jQuery#absolutePosition\n\t  * @returns {Point}\n\t  */\n\t\tthis.absolutePosition = function () {\n\t\t\tvar offset;\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\toffset = this.offset();\n\t\n\t\t\t\treturn _typesDimensions.Point.create().set(offset.left, offset.top);\n\t\t\t} else {\n\t\t\t\toffset = _typesDimensions.Point.create(arguments);\n\t\n\t\t\t\tthis.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: offset.y,\n\t\t\t\t\tleft: offset.x\n\t\t\t\t});\n\t\n\t\t\t\treturn offset;\n\t\t\t}\n\t\t};\n\t\n\t\t/**\n\t  * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n\t  * @function external:jQuery#transform\n\t  * @arg {number} [_scaleX] - scale x\n\t  * @arg {number} [_shearY] - shear y\n\t  * @arg {number} [_shearX] - shear x\n\t  * @arg {number} [_scaleY] - scale y\n\t  * @arg {number} [_translateX] - translate x\n\t  * @arg {number} [_translateY] - translate y\n\t  * @returns {Matrix}\n\t  */\n\t\n\t\t/**\n\t  * Provides the CSS matrix transform for the first node in the collection.\n\t  * @function external:jQuery#transform\n\t  * @returns {Matrix}\n\t  */\n\t\tthis.transform = function () {\n\t\t\tvar t, matrix, is3d;\n\t\n\t\t\tmatrix = new _libMatrix2['default']();\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\tt = this.css('transform');\n\t\t\t\tis3d = !! ~t.indexOf('matrix3d');\n\t\n\t\t\t\tif (t !== 'none') {\n\t\t\t\t\tt = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n\t\t\t\t\tif (is3d) {\n\t\t\t\t\t\tt = (function (_matrix) {\n\t\t\t\t\t\t\tvar i, result;\n\t\n\t\t\t\t\t\t\tresult = [];\n\t\n\t\t\t\t\t\t\tfor (i = 0; i < _matrix.length; i += 4) {\n\t\t\t\t\t\t\t\tresult = result.concat(_matrix.slice(i, i + 2));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t})(t);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tt = t.map(parseFloat);\n\t\n\t\t\t\t\tmatrix.setTransform.apply(matrix, t);\n\t\n\t\t\t\t\treturn matrix;\n\t\t\t\t}\n\t\n\t\t\t\treturn t;\n\t\t\t}\n\t\n\t\t\tmatrix.setTransform.apply(matrix, arguments);\n\t\n\t\t\tthis.css('transform', matrix.toCSS());\n\t\n\t\t\treturn matrix;\n\t\t};\n\t\n\t\t/**\n\t  * Getter/Setter for the CSS transform translation. (overloaded)\n\t  * @function external:jQuery#transformPosition\n\t  * @arg {Point} _point - A point object {x,y}\n\t  * @returns {Point}\n\t  */\n\t\n\t\t/**\n\t  * Getter/Setter for the CSS transform translation.\n\t  * @function external:jQuery#transformPosition\n\t  * @arg {number} _x - x coordinate\n\t  * @arg {number} _y - y coordinate\n\t  * @returns {Point}\n\t  */\n\t\tthis.transformPosition = function () {\n\t\t\tvar matrix, point;\n\t\n\t\t\tmatrix = this.transform();\n\t\t\tpoint = _typesDimensions.Point.create().set(0, 0);\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\tif (matrix !== 'none') point.set(matrix.e, matrix.f);\n\t\t\t} else {\n\t\t\t\tif (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t\t\t\tpoint.set.apply(point, arguments);\n\t\t\t\tmatrix.translate(point.x, point.y);\n\t\t\t\tthis.css('transform', matrix.toCSS());\n\t\t\t}\n\t\n\t\t\treturn point;\n\t\t};\n\t\n\t\t/**\n\t  * Getter for the CSS transform scale. (overloaded)\n\t  * @function external:jQuery#transformPosition\n\t  * @returns {Point}\n\t  */\n\t\n\t\t/**\n\t  * Setter for the CSS transform scale. (overloaded)\n\t  * @function external:jQuery#transformPosition\n\t  * @arg {Point} _point - A point object {x,y}\n\t  * @returns {Point}\n\t  */\n\t\n\t\t/**\n\t  * Setter for the CSS transform scale.\n\t  * @function external:jQuery#transformPosition\n\t  * @arg {number} _x - x coordinate\n\t  * @arg {number} _y - y coordinate\n\t  * @returns {Point}\n\t  */\n\t\tthis.transformScale = function () {\n\t\t\tvar matrix, scale;\n\t\n\t\t\tmatrix = this.transform();\n\t\t\tscale = _typesDimensions.Point.create().set(1, 1);\n\t\n\t\t\tif (!arguments.length) {\n\t\t\t\tif (matrix !== 'none') scale.set(matrix.a, matrix.d);\n\t\t\t} else {\n\t\t\t\tif (matrix === 'none') matrix = new _libMatrix2['default']();\n\t\n\t\t\t\tscale.set.apply(scale, arguments);\n\t\t\t\tmatrix.scale(scale.x, scale.y);\n\t\t\t\tthis.css('transform', matrix.toCSS());\n\t\t\t}\n\t\n\t\t\treturn scale;\n\t\t};\n\t\n\t\t/**\n\t  * Accessor method for `pl` attributes.\n\t  */\n\t\tthis.pl = function (_name, _value) {\n\t\t\tvar args, result;\n\t\n\t\t\tif (!_name) {\n\t\t\t\tresult = {};\n\t\t\t\tthis.each(function () {\n\t\t\t\t\t_Array$forEach(this.attributes, function (_attr) {\n\t\t\t\t\t\tif (_attr.name.indexOf('pl-') === 0) {\n\t\t\t\t\t\t\tresult[_attr.name.slice(3)] = _attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\n\t\t\targs = ['pl-' + _name];\n\t\t\tif (typeof _value !== 'undefined') args.push(_value);\n\t\n\t\t\tif (_value === null) {\n\t\t\t\tthis.removeAttr('pl-' + _name);\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\treturn this.attr.apply(this, args);\n\t\t};\n\t\n\t\t/**\n\t  * Invoke a method of each item in the set of matched elements.\n\t  */\n\t\tthis.exec = function (_method, _args) {\n\t\t\treturn this.map(function () {\n\t\t\t\tif (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n\t\t\t}).toArray();\n\t\t};\n\t}).call($.fn);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(6), __esModule: true };\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(7);\n\tmodule.exports = __webpack_require__(11).Array.forEach;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// JavaScript 1.6 / Strawman array statics shim\n\tvar $       = __webpack_require__(8)\n\t  , $export = __webpack_require__(9)\n\t  , $ctx    = __webpack_require__(12)\n\t  , $Array  = __webpack_require__(11).Array || Array\n\t  , statics = {};\n\tvar setStatics = function(keys, length){\n\t  $.each.call(keys.split(','), function(key){\n\t    if(length == undefined && key in $Array)statics[key] = $Array[key];\n\t    else if(key in [])statics[key] = $ctx(Function.call, [][key], length);\n\t  });\n\t};\n\tsetStatics('pop,reverse,shift,keys,values,entries', 1);\n\tsetStatics('indexOf,every,some,forEach,map,filter,find,findIndex,includes', 3);\n\tsetStatics('join,slice,concat,push,splice,unshift,sort,lastIndexOf,' +\n\t           'reduce,reduceRight,copyWithin,fill');\n\t$export($export.S, 'Array', statics);\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tvar $Object = Object;\n\tmodule.exports = {\n\t  create:     $Object.create,\n\t  getProto:   $Object.getPrototypeOf,\n\t  isEnum:     {}.propertyIsEnumerable,\n\t  getDesc:    $Object.getOwnPropertyDescriptor,\n\t  setDesc:    $Object.defineProperty,\n\t  setDescs:   $Object.defineProperties,\n\t  getKeys:    $Object.keys,\n\t  getNames:   $Object.getOwnPropertyNames,\n\t  getSymbols: $Object.getOwnPropertySymbols,\n\t  each:       [].forEach\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(10)\n\t  , core      = __webpack_require__(11)\n\t  , ctx       = __webpack_require__(12)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && key in target;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(param){\n\t        return this instanceof C ? new C(param) : C(param);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;  // forced\n\t$export.G = 2;  // global\n\t$export.S = 4;  // static\n\t$export.P = 8;  // proto\n\t$export.B = 16; // bind\n\t$export.W = 32; // wrap\n\tmodule.exports = $export;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '1.2.6'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(13);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(15)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * \n\t * @module\n\t * @version 1.1\n\t * @author Micah Rolon <functionmicah@gmail.com>\n\t * @requires module:types/BasicArray~BasicArray\n\t *\n\t * @desc *Created: 11/12/14*\n\t *\n\t * This file contains objects for containing values about a plane. i.e. x or width.\n\t * Adds the convenience of keeping these values paired to passed around your application.\n\t * It also includes methods which you perform on the values and returns a new object\n\t * so the original values are maintained.\n\t *\n\t * #### Usage\n\t *\n\t * New instances can be created by calling the create method.\n\t * ```\n\t * cursorLocation = Point.create();\n\t * ```\n\t *\n\t * Then call `set()` to apply your values.\n\t * ```\n\t * cursorLocation.set(event.clientX, event.clientY);\n\t * ```\n\t *\n\t * Then you can use the calculation methods to perform transformations.\n\t * ```\n\t * relativeCursor = cursorLocation.scale(zoom);\n\t * ```\n\t *\n\t * #### Developer Notes\n\t *\n\t * When adding new methods make sure you are returning a new instance.\n\t * Dimensional objects are meant to be immutable.\n\t *\n\t * Follow this pattern:\n\t * ```\n\t * this.method = function () {\n\t *     // set with your calculated values.\n\t *     return this.create().set( ... )\n\t * }\n\t * ```\n\t *\n\t * #### Change Log\n\t * *v1.1 - 12/13/15*\n\t * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n\t */\n\t\n\t/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\t\n\tvar _typesBasicArray = __webpack_require__(17);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\tvar Dimension, Size, Point;\n\t\n\t/**\n\t * The native Array\n\t * @external Array\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n\t */\n\t\n\t/**\n\t * Array prototype extension\n\t * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n\t * @function external:Array#to\n\t * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n\t * @example\n\t * somePoint = [10, 10].to(Point);\n\t * somePoint = [10, 10].to('point');\n\t */\n\tArray.prototype.to = function (_Thing) {\n\t\tvar map;\n\t\n\t\tmap = {\n\t\t\tpoint: Point,\n\t\t\tsize: Size\n\t\t};\n\t\n\t\tif (typeof _Thing === 'string') {\n\t\t\treturn map[_Thing.toLowerCase()].create().set(this);\n\t\t} else if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n\t\t\tif (!_Thing.isPrototypeOf(this)) {\n\t\t\t\treturn _Thing.set.apply(_Thing.create(), this);\n\t\t\t}\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n\t * @class\n\t * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tDimension = _typesBasicArray2['default'].extend(function () {\n\t\tvar originalMap;\n\t\n\t\toriginalMap = this.map;\n\t\n\t\tthis[0] = this[1] = 0;\n\t\tthis.planeMap = null, this.length = 2;\n\t\n\t\t/**\n\t  * Provides a new instance.\n\t  * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.create = function (_argumentsArray) {\n\t\t\tvar instance;\n\t\n\t\t\tinstance = this.proto();\n\t\n\t\t\tif (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\t\n\t\t\treturn instance;\n\t\t};\n\t\n\t\t/**\n\t  * Incerement each plane by a value or specify each plane.\n\t  * @arg {number} _val - plane a of (a,b)\n\t  * @arg {number} [_plane2] - plane b of (a,b)\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.inc = function (_val, _plane2) {\n\t\t\tvar a, b;\n\t\n\t\t\tif (_val.length === 2) {\n\t\t\t\ta = _val[0];\n\t\t\t\tb = _val[1];\n\t\t\t} else if (_plane2 != null) {\n\t\t\t\ta = _val;\n\t\t\t\tb = _plane2;\n\t\t\t} else {\n\t\t\t\ta = b = _val;\n\t\t\t}\n\t\n\t\t\treturn this.create().set(this[0] + a, this[1] + b);\n\t\t};\n\t\n\t\t/**\n\t  * Decerement each plane by a value or specify each plane.\n\t  * @arg {number} _val - plane a of (a,b)\n\t  * @arg {number} [_plane2] - plane b of (a,b)\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.dec = function (_val, _plane2) {\n\t\t\tvar a, b;\n\t\n\t\t\tif (_val.length === 2) {\n\t\t\t\ta = _val[0];\n\t\t\t\tb = _val[1];\n\t\t\t} else if (_plane2 != null) {\n\t\t\t\ta = _val;\n\t\t\t\tb = _plane2;\n\t\t\t} else {\n\t\t\t\ta = b = _val;\n\t\t\t}\n\t\n\t\t\treturn this.create().set(this[0] - a, this[1] - b);\n\t\t};\n\t\n\t\t/**\n\t  * Multiply each plane by a value or specify each plane.\n\t  * @arg {number} _scale - plane a of (a,b)\n\t  * @arg {number} [_plane2] - plane b of (a,b)\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.scale = function (_scale, _plane2) {\n\t\t\treturn this.create().set(this[0] * _scale, this[1] * (_plane2 != null ? _plane2 : _scale));\n\t\t};\n\t\n\t\t/**\n\t  * Perfom a Math function on each plane\n\t  * @arg {string} _fun - a string of the function name in the JS Math object,\n\t  * followed by the whatever arguments the function takes after its first\n\t  * since the first argument is the plane value.\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.math = function (_fun) {\n\t\t\tvar args = [].slice.call(arguments, 1);\n\t\n\t\t\treturn this.create().set(Math[_fun].apply(Math, [this[0]].concat(args)), Math[_fun].apply(Math, [this[1]].concat(args)));\n\t\t};\n\t\n\t\t/**\n\t  * Takes each plane value and passes it to parseInt().\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.parseInt = function () {\n\t\t\treturn this.create().set(parseInt(this[0]), parseInt(this[1]));\n\t\t};\n\t\n\t\t/**\n\t  * Takes each plane value and passes it to parseFloat().\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.parseFloat = function () {\n\t\t\treturn this.create().set(parseFloat(this[0]), parseFloat(this[1]));\n\t\t};\n\t\n\t\t/**\n\t  * Resolves the name of the plane at the given index.\n\t  * @arg {number} _index - The index of the plane.\n\t  * @returns {string}\n\t  */\n\t\tthis.planeOf = function (_index) {\n\t\t\tif (isNaN(parseInt(_index))) return null;\n\t\t\treturn this.planeMap[_index];\n\t\t};\n\t\n\t\t/**\n\t  * Make a new array by iterating over each plane.<br>\n\t  * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n\t  * @arg {function} _handler - handler for each index.\n\t  * @override\n\t  * @returns {Dimension}\n\t  */\n\t\tthis.map = function (_handler) {\n\t\t\treturn originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n\t\t};\n\t\n\t\t/**\n\t  * Multiplies the planes.\n\t  * @returns {number}\n\t  */\n\t\tthis.product = function () {\n\t\t\treturn this[0] * this[1];\n\t\t};\n\t\n\t\t/**\n\t  * Divides the planes.\n\t  * @returns {number}\n\t  */\n\t\tthis.ratio = function () {\n\t\t\treturn this[0] / this[1];\n\t\t};\n\t\n\t\tthis.quotient = function () {\n\t\t\treturn Math.floor(this[0] / this[1]);\n\t\t};\n\t\n\t\tthis.remainder = function () {\n\t\t\treturn this[0] % this[1];\n\t\t};\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc 2 Dimensional object containing width and height.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} width - The width.\n\t * @prop {number} height - The height.\n\t */\n\tSize = Dimension.extend(function () {\n\t\t/**\n\t  * Maps the names of the indexes.<br>\n\t  * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t  * @protected\n\t  * @default ['width', 'height']\n\t  */\n\t\tthis.planeMap = ['width', 'height'];\n\t\n\t\t_Object$defineProperties(this, {\n\t\t\twidth: {\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn this[0];\n\t\t\t\t},\n\t\n\t\t\t\tset: function set(_val) {\n\t\t\t\t\tthis[0] = Number(_val);\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\theight: {\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn this[1];\n\t\t\t\t},\n\t\n\t\t\t\tset: function set(_val) {\n\t\t\t\t\tthis[1] = Number(_val);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * Define the size with an object. (overloaded)\n\t  * @function module:types/Dimensions~Size#set\n\t  * @arg {object} _size - A size object {width, height}.\n\t  * @returns {Size}\n\t  */\n\t\n\t\t/**\n\t  * Define the size with an array. (overloaded)\n\t  * @function module:types/Dimensions~Size#set\n\t  * @arg {array} _size - A size array [width, height].\n\t  * @returns {Size}\n\t  */\n\t\n\t\t/**\n\t  * Define the size.\n\t  * @arg {number} _width - The width.\n\t  * @arg {number} _height - The height.\n\t  * @returns {Size}\n\t  */\n\t\tthis.set = function (_width, _height) {\n\t\t\tif (arguments.length === 1) {\n\t\t\t\tif (_width.width !== undefined && _width.height !== undefined) {\n\t\t\t\t\tthis[0] = Number(_width.width);\n\t\t\t\t\tthis[1] = Number(_width.height);\n\t\t\t\t} else if (_width.length === 2) {\n\t\t\t\t\tthis[0] = Number(_width[0]);\n\t\t\t\t\tthis[1] = Number(_width[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis[0] = Number(_width);\n\t\t\t\tthis[1] = Number(_height);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Calculates the hypotenuse.\n\t  * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n\t  * @returns {number}\n\t  */\n\t\tthis.hypotenuse = function () {\n\t\t\treturn Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n\t\t};\n\t\n\t\t/**\n\t  * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n\t  * @arg {object|HTMLElement} - The object or DOM node.\n\t  * @returns {this}\n\t  */\n\t\tthis.applyTo = function (_object) {\n\t\t\tif (_object.nodeType === document.ELEMENT_NODE) {\n\t\t\t\tif (!(_object.width !== undefined || _object.height !== undefined)) {\n\t\t\t\t\t_object.style.width = this.width;\n\t\t\t\t\t_object.style.height = this.height;\n\t\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t_object.width = this.width;\n\t\t\t_object.height = this.height;\n\t\n\t\t\treturn this;\n\t\t};\n\t});\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n\t * @class\n\t * @extends module:types/Dimensions~Dimension\n\t * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n\t * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n\t * @prop {number} x - The x coordinate.\n\t * @prop {number} y - The y coordinate.\n\t */\n\tPoint = Dimension.extend(function () {\n\t\t/**\n\t  * Maps the names of the indexes.<br>\n\t  * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t  * @protected\n\t  * @default ['x', 'y']\n\t  */\n\t\tthis.planeMap = ['x', 'y'];\n\t\n\t\t_Object$defineProperties(this, {\n\t\t\tx: {\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn this[0];\n\t\t\t\t},\n\t\n\t\t\t\tset: function set(_val) {\n\t\t\t\t\tthis[0] = Number(_val);\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\ty: {\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn this[1];\n\t\t\t\t},\n\t\n\t\t\t\tset: function set(_val) {\n\t\t\t\t\tthis[1] = Number(_val);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * Define the point with an object. (overloaded)\n\t  * @function module:types/Dimensions~Point#set\n\t  * @arg {object} _point - A point object {x, y}.\n\t  * @returns {Point}\n\t  */\n\t\n\t\t/**\n\t  * Define the point with an array. (overloaded)\n\t  * @function module:types/Dimensions~Point#set\n\t  * @arg {array} _point - A point array [x, y].\n\t  * @returns {Point}\n\t  */\n\t\n\t\t/**\n\t  * Define the point.\n\t  * @arg {number} _x - The x.\n\t  * @arg {number} _y - The y.\n\t  * @returns {Point}\n\t  */\n\t\tthis.set = function (_x, _y) {\n\t\t\tif (arguments.length === 1) {\n\t\t\t\tif (_x.x !== undefined && _x.y !== undefined) {\n\t\t\t\t\tthis[0] = Number(_x.x);\n\t\t\t\t\tthis[1] = Number(_x.y);\n\t\t\t\t} else if (_x.length === 2) {\n\t\t\t\t\tthis[0] = Number(_x[0]);\n\t\t\t\t\tthis[1] = Number(_x[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis[0] = Number(_x);\n\t\t\t\tthis[1] = Number(_y);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Calculates the distance between the insatnce and a point object.\n\t  * @arg {Point} _point - A point object {x,y}.\n\t  * @returns {Size}\n\t  */\n\t\tthis.distance = function (_point) {\n\t\t\tif (_point.x !== undefined && _point.y !== undefined) {\n\t\t\t\treturn Size.create().set(_point.x - this.x, _point.y - this.y);\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t};\n\t\n\t\t/**\n\t  * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n\t  * @arg {object|HTMLElement} - The object or DOM node.\n\t  * @returns {this}\n\t  */\n\t\tthis.applyTo = function (_object) {\n\t\t\tif (_object.nodeType === document.ELEMENT_NODE) {\n\t\t\t\t_object.style.left = this.x;\n\t\t\t\t_object.style.top = this.y;\n\t\t\t} else {\n\t\t\t\t_object.x = this.x;\n\t\t\t\t_object.y = this.y;\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Rotate the point based on an origin point and an angle in degrees.\n\t  * @arg {Point} _origin - A point object {x,y}.\n\t  * @arg {number} _angle - The angle of rotation in degrees.\n\t  * @returns {this}\n\t  */\n\t\tthis.rotate = function (_origin, _angle) {\n\t\t\tvar x, y, rad;\n\t\n\t\t\trad = _angle * (Math.PI / 180);\n\t\n\t\t\tx = this.x - _origin.x;\n\t\t\ty = this.y - _origin.y;\n\t\n\t\t\treturn this.create().set(Math.sin(rad) * x - Math.cos(rad) * y + _origin.x, Math.cos(rad) * x + Math.sin(rad) * y + _origin.y);\n\t\t};\n\t});\n\t\n\texports['default'] = { Dimension: Dimension, Size: Size, Point: Point };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(16), __esModule: true };\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function defineProperties(T, D){\n\t  return $.setDescs(T, D);\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'array like' objects.\n\t * @module\n\t * @requires module:util\n\t * @requires module:types/Basic\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n\t * @classdesc A base object type for 'array like' object.\n\t * @class\n\t * @extends external:Array\n\t * @extends module:types/Basic~Basic\n\t * @mixes module:types/Basic~Basic\n\t */\n\tvar BasicArray = (function () {\n\t  /**\n\t   * Objects with this as an own property will be identified as the root object.\n\t   * @memberof module:types/BasicArray~BasicArray\n\t   * @readonly\n\t   * @default\n\t   */\n\t  this.baseType = 'TYPE_BASIC_ARRAY';\n\t\n\t  _util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t  return this;\n\t}).call([]);\n\t\n\texports['default'] = BasicArray;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * Utility functions.\n\t * @namespace\n\t * @author Micah Rolon <micah@ginasink.com>\n\t * @memberof module:play~pl\n\t */\n\tvar util = new function () {\n\t\n\t\t/**\n\t  * Accepts one or more objects to combine their own properties to single object.\n\t  * @arg {object} _target - The object that will recieve all members.\n\t  * @arg {object} _sources... - The object(s) to join with the '_target'.\n\t  * @returns {object} _target\n\t  */\n\t\tthis.mixin = function () {\n\t\t\tvar member, i, target, objs;\n\t\n\t\t\ttarget = arguments[0];\n\t\t\tobjs = [].slice.call(arguments, 1);\n\t\n\t\t\tfor (i = 0; i < objs.length; i += 1) {\n\t\t\t\tfor (member in objs[i]) {\n\t\t\t\t\tif (!objs[i].hasOwnProperty(member)) continue;\n\t\t\t\t\ttarget[member] = objs[i][member];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn target;\n\t\t};\n\t\n\t\t/**\n\t  * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n\t  * @arg {object} _obj - Object to search in.\n\t  * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t  * @returns {string} The name of the key in the object matching '_member'.\n\t  */\n\t\tthis.keyOf = function (_obj, _member) {\n\t\t\tvar member;\n\t\n\t\t\tfor (member in _obj) {\n\t\t\t\tif (!_obj.hasOwnProperty(member)) continue;\n\t\t\t\tif (_obj[member] === _member) return member;\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t};\n\t\n\t\t/**\n\t  * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n\t  * @arg {object} _obj - The object to search.\n\t  * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n\t  * @return {object} An object containing the name of the property and the owning object. {name, object}\n\t  */\n\t\tthis.getOwner = function (_obj, _member) {\n\t\t\tvar prototype, name;\n\t\n\t\t\tprototype = Object.getPrototypeOf(_obj);\n\t\n\t\t\t// keep searching until we go as deep as we can go.\n\t\t\twhile (prototype) {\n\t\t\t\t// search for the key in the prototype\n\t\t\t\tname = util.keyOf(prototype, _member);\n\t\n\t\t\t\t// If we found the key in the prototype then we found\n\t\t\t\t// our match and we can break out of the loop.\n\t\t\t\tif (name) break;\n\t\n\t\t\t\t// Otherwise go deeper (thats what she said ;p)\n\t\t\t\tprototype = Object.getPrototypeOf(prototype);\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\tname: name,\n\t\t\t\tobject: prototype\n\t\t\t};\n\t\t};\n\t\n\t\t/**\n\t  * Given a range; provides a random number in that range.\n\t  * @function play~pl.util.random\n\t  * @arg {number} _rangeA - A number for the low end of the range.\n\t  * @arg {number} _rangeB - The top end of the range.\n\t  * @returns {number|*} The resulting number in range or the member found at random.\n\t  */\n\t\n\t\t/**\n\t  * Given an iterable; provides a random item.\n\t  * @arg {array} _collection - The iterable.\n\t  * @returns {number|*} The member found at random.\n\t  */\n\t\tthis.random = function (_collection_rangeA, _rangeB) {\n\t\t\tvar index, val;\n\t\n\t\t\tindex = Math.floor(Math.random() * _collection_rangeA.length);\n\t\n\t\t\tif (arguments.length === 2) {\n\t\t\t\tval = Math.round(Math.random() * _rangeB);\n\t\n\t\t\t\treturn val < _collection_rangeA ? _collection_rangeA : val;\n\t\t\t}\n\t\n\t\t\tif (index === _collection_rangeA.length) index = _collection_rangeA.length - 1;\n\t\n\t\t\treturn _collection_rangeA && _collection_rangeA[index];\n\t\t};\n\t\n\t\t/**\n\t  * Take string and makes it dot notation friendly.\n\t  * @arg {string} _id - The string to transform.\n\t  * @arg {boolean} _camelCase - Transform with camel case.\n\t  * @returns {string}\n\t  */\n\t\tthis.transformId = function (_id, _camelCase) {\n\t\t\tif (_id && _camelCase) {\n\t\t\t\treturn _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n\t\t\t\t\treturn RegExp.$1.toUpperCase();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn _id && _id.replace(/[-\\s]+/g, '_');\n\t\t};\n\t\n\t\t/**\n\t  * Test all arguments for != null\n\t  * @return {boolean}\n\t  */\n\t\tthis.isSet = function () {\n\t\t\treturn [].every.call(arguments, function (_arg) {\n\t\t\t\treturn _arg != null;\n\t\t\t});\n\t\t};\n\t\n\t\t/**\n\t  * Parses a formated string and calculates it in milliseconds.\n\t  * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n\t  * @return {number}\n\t  */\n\t\tthis.toMillisec = function (_source) {\n\t\t\tvar tokens, time, units;\n\t\n\t\t\tif (typeof _source === 'number') return _source;\n\t\t\tif (!_source) return;\n\t\n\t\t\ttokens = _source.split(/\\s+/);\n\t\t\ttime = 0;\n\t\t\tunits = {\n\t\t\t\td: 24 * 60 * 60 * 1000,\n\t\t\t\th: 60 * 60 * 1000,\n\t\t\t\tm: 60 * 1000,\n\t\t\t\ts: 1000\n\t\t\t};\n\t\n\t\t\ttokens.forEach(function (_token) {\n\t\t\t\tvar unit, value;\n\t\n\t\t\t\tunit = (_token.match(/[dhms]/) || [])[0];\n\t\n\t\t\t\tif (unit) {\n\t\t\t\t\tvalue = Number(_token.slice(0, -1));\n\t\t\t\t\ttime += value * units[unit];\n\t\t\t\t} else {\n\t\t\t\t\ttime += Number(_token);\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn time;\n\t\t};\n\t\n\t\t/**\n\t  * Needs no introduction\n\t  * @arg {iterable} _collection - iterable.\n\t  * @return {array}\n\t  */\n\t\tthis.toArray = function (_collection) {\n\t\t\treturn Array.prototype.map.call(_collection, function (i) {\n\t\t\t\treturn i;\n\t\t\t});\n\t\t};\n\t\n\t\t/**\n\t  * Resolves the value in the object at the given path.\n\t  * @arg {object} _obj - The object to query.\n\t  * @arg {string} _path - The path to the desired reference.\n\t  * @returns {*} The resulting reference value.\n\t  * @example\n\t  * var user = {\n\t  *   name: 'John',\n\t  *   family: {\n\t  *\t   guardians: {David}, // property could be an array of multiple guardians.\n\t  *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n\t  *   }\n\t  * };\n\t  *\n\t  * pl.util.resolvePath(user, 'family.sliblings[2].name');\n\t  * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n\t  * pl.util.resolvePath(user, 'family.guardians[0]?.name'); \n\t  */\n\t\tthis.resolvePath = function (_obj, _path) {\n\t\t\tvar path, obj, i, name, index, testArray;\n\t\n\t\t\tpath = _path.split('.');\n\t\t\tobj = _obj;\n\t\t\ti = 0;\n\t\n\t\t\twhile (obj) {\n\t\t\t\ttestArray = /\\?$/.test(path[i]);\n\t\t\t\tindex = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n\t\t\t\tname = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n\t\t\t\tobj = obj[name];\n\t\n\t\t\t\tif (~index && obj) {\n\t\t\t\t\tobj = testArray ? obj[index] || obj : obj[index];\n\t\t\t\t}\n\t\n\t\t\t\ti += 1;\n\t\n\t\t\t\tif (path.length === i) break;\n\t\t\t}\n\t\n\t\t\treturn obj;\n\t\t};\n\t\n\t\tthis.assignRef = function (_obj, _name, _ref) {\n\t\t\tvar name;\n\t\n\t\t\tname = util.transformId(_name, true);\n\t\n\t\t\tif (_obj[name] === _ref) return _ref;\n\t\n\t\t\tif (_obj[name]) {\n\t\t\t\tif (!_obj[name].__refCollction__) {\n\t\t\t\t\t_obj[name] = [_obj[name]];\n\t\n\t\t\t\t\tObject.defineProperty(_obj[name], '__refCollction__', {\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twriteable: false,\n\t\t\t\t\t\tconfigureable: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\t_obj[name].push(_ref);\n\t\t\t} else {\n\t\t\t\t_obj[name] = _ref;\n\t\t\t}\n\t\n\t\t\treturn _obj[name];\n\t\t};\n\t\n\t\t/**\n\t  * N0 OPeration.\n\t  */\n\t\tthis.noop = function () {};\n\t\n\t\t/**\n\t  * Get the file name out of a simple file path.\n\t  * @arg {string} _path - The file path. \n\t  * @returns {string} The extracted name.\n\t  */\n\t\tthis.resolveFileName = function (_path) {\n\t\t\treturn _path.slice(_path.lastIndexOf('/') + 1);\n\t\t};\n\t\n\t\t/**\n\t  * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n\t  * - x; produces a letter a-f.\n\t  * - y; produces a digit 0-9.\n\t  * - z; produces a 4 character hex value derived from the now time stamp.\n\t  * @arg {string} _pattern - The xyz pattern.\n\t  * @returns {string} The generated ID.\n\t  */\n\t\tthis.createId = function (_pattern) {\n\t\t\treturn (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n\t\t\t\tif (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t\t\t\tif (_token === 'y') return Math.floor(Math.random() * 10).toString(16);\n\t\t\t\treturn Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n\t\t\t});\n\t\t};\n\t}();\n\t\n\texports['default'] = util;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base object type for 'classes' implementing methods for extention and super callbacks.\n\t * @module\n\t * @requires module:play~pl.util\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n\t * @classdesc The base type for all objects which will act as prototypes.\n\t * @class\n\t */\n\tvar Basic = {\n\t\t/**\n\t  * Objects with this as an own property will be identified as the root object.\n\t  * @readonly\n\t  * @default\n\t  */\n\t\tbaseType: 'TYPE_BASIC',\n\t\n\t\t/**\n\t  * Creates a new object with the current object as its prototype.\n\t  * @instance\n\t  * @returns {Basic} The new instance.\n\t  */\n\t\tcreate: function create() {\n\t\t\treturn _Object$create(this);\n\t\t},\n\t\n\t\t/**\n\t  * Creates a new object using a constructor function or object with the current object as its prototype.\n\t  * @instance\n\t  * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n\t  * @returns {Basic} The new instance.\n\t  *\n\t  * @todo define constructor property\n\t  */\n\t\textend: function extend(_implementation) {\n\t\t\tvar instance;\n\t\n\t\t\tif (!_implementation) return null;\n\t\n\t\t\tswitch (typeof _implementation) {\n\t\t\t\tcase 'function':\n\t\t\t\t\t_implementation.prototype = this;\n\t\t\t\t\tinstance = new _implementation();\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'object':\n\t\t\t\t\tinstance = this.create();\n\t\t\t\t\tinstance.mixin(_implementation);\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n\t\t\t}\n\t\n\t\t\treturn instance;\n\t\t},\n\t\n\t\t/**\n\t  * Accepts one or more objects to combine their own properties to the instance.\n\t  * @instance\n\t  * @arg {object} _sources... - The object(s) to join with the instance.\n\t  * @returns this\n\t  */\n\t\tmixin: function mixin() {\n\t\t\treturn _util2['default'].mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n\t\t},\n\t\n\t\t/**\n\t  * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n\t  * @instance\n\t  * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t  * @returns {string} The name of the key in the object matching '_member'.\n\t  */\n\t\tkeyOf: function keyOf(_member) {\n\t\t\treturn _util2['default'].keyOf(this, _member);\n\t\t},\n\t\n\t\t/**\n\t  * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n\t  * @instance\n\t  * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t  * @returns {*} Whatever the caller returns.\n\t  */\n\t\tproto: function proto() {\n\t\t\tvar method, name, owner, prototype;\n\t\n\t\t\t// Get the function which invoked proto() in the call stack.\n\t\t\t// If the caller is a behavior then we retrieve the method.\n\t\t\tmethod = this.proto.caller.method || this.proto.caller;\n\t\n\t\t\t// Check to see if 'this' owns the method.\n\t\t\t// NOTE: We may want to move this logic into getOwner().\n\t\t\tif (name = this.keyOf(method)) {\n\t\t\t\tprototype = Object.getPrototypeOf(this);\n\t\t\t}\n\t\n\t\t\t// Otherwise find the object which owns the caller function.\n\t\t\telse {\n\t\t\t\t\towner = _util2['default'].getOwner(this, method);\n\t\t\t\t\tname = owner.name;\n\t\t\t\t\tprototype = Object.getPrototypeOf(owner.object);\n\t\t\t\t}\n\t\n\t\t\tmethod = prototype[name];\n\t\n\t\t\tif (!method) {\n\t\t\t\tconsole.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n\t\t\t\tdebugger;\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\treturn method.apply(this, arguments);\n\t\t},\n\t\n\t\t/**\n\t  * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n\t  * @instance\n\t  * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t  * @returns {*} Whatever the caller returns.\n\t  */\n\t\tsup: function sup() {\n\t\t\tvar method, name, owner, prototype;\n\t\n\t\t\t// Get the function which invoked sup() in the call stack.\n\t\t\tmethod = this.sup.caller;\n\t\t\towner = _util2['default'].getOwner(this, this.baseType);\n\t\t\tprototype = owner.object;\n\t\t\tname = this.keyOf(method);\n\t\n\t\t\t// Check to see if 'this' owns the method.\n\t\t\t// NOTE: We may want to move this logic into getOwner().\n\t\t\t//\n\t\t\tif (!name) {\n\t\t\t\towner = _util2['default'].getOwner(this, method);\n\t\t\t\tname = owner.name;\n\t\t\t}\n\t\n\t\t\tmethod = prototype[name];\n\t\n\t\t\tif (!method) {\n\t\t\t\tconsole.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\treturn method.apply(this, arguments);\n\t\t},\n\t\n\t\t/**\n\t  * Provides the object type.\n\t  * @instance\n\t  */\n\t\ttoString: function toString() {\n\t\t\tvar type;\n\t\n\t\t\tif (this.baseType) {\n\t\t\t\ttype = this.baseType.replace('TYPE_', '');\n\t\t\t\ttype = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t\t\t} else {\n\t\t\t\ttype = this.constructor.name || 'Object';\n\t\t\t}\n\t\n\t\t\treturn '[object ' + type + ']';\n\t\t}\n\t\n\t};\n\t\n\texports['default'] = Basic;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(21), __esModule: true };\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function create(P, D){\n\t  return $.create(P, D);\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\r\n\t *\r\n\t * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n\t * All rights are reserved to Epistemex.\r\n\t *\r\n\t * 2D transformation matrix object initialized with identity matrix.\r\n\t *\r\n\t * The matrix can synchronize a canvas context by supplying the context\r\n\t * as an argument, or later apply current absolute transform to an\r\n\t * existing context.\r\n\t *\r\n\t * All values are handled as floating point values.\r\n\t *\r\n\t * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n\t * @prop {number} a - scale x\r\n\t * @prop {number} b - shear y\r\n\t * @prop {number} c - shear x\r\n\t * @prop {number} d - scale y\r\n\t * @prop {number} e - translate x\r\n\t * @prop {number} f - translate y\r\n\t * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n\t * @constructor\r\n\t */\n\tfunction Matrix(context) {\n\t\n\t    var me = this;\n\t    me._t = me.transform;\n\t\n\t    me.a = me.d = 1;\n\t    me.b = me.c = me.e = me.f = 0;\n\t\n\t    me.context = context;\n\t\n\t    // reset canvas transformations (if any) to enable 100% sync.\n\t    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\n\t}\n\t\n\tMatrix.prototype = {\n\t\n\t    /**\r\n\t     * Concatenates transforms of this matrix onto the given child matrix and\r\n\t     * returns a new matrix. This instance is used on left side.\r\n\t     *\r\n\t     * @param {Matrix} cm - child matrix to apply concatenation to\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    concat: function concat(cm) {\n\t        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the horizontal values.\r\n\t     */\n\t    flipX: function flipX() {\n\t        return this._t(-1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Flips the vertical values.\r\n\t     */\n\t    flipY: function flipY() {\n\t        return this._t(1, 0, 0, -1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Reflects incoming (velocity) vector on the normal which will be the\r\n\t     * current transformed x axis. Call when a trigger condition is met.\r\n\t     *\r\n\t     * NOTE: BETA, simple implementation\r\n\t     *\r\n\t     * @param {number} x - vector end point for x (start = 0)\r\n\t     * @param {number} y - vector end point for y (start = 0)\r\n\t     * @returns {{x: number, y: number}}\r\n\t     */\n\t    reflectVector: function reflectVector(x, y) {\n\t\n\t        var v = this.applyToPoint(0, 1),\n\t            d = 2 * (v.x * x + v.y * y);\n\t\n\t        x -= d * v.x;\n\t        y -= d * v.y;\n\t\n\t        return { x: x, y: y };\n\t    },\n\t\n\t    /**\r\n\t     * Short-hand to reset current matrix to an identity matrix.\r\n\t     */\n\t    reset: function reset() {\n\t        return this.setTransform(1, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Rotates current matrix accumulative by angle.\r\n\t     * @param {number} angle - angle in radians\r\n\t     */\n\t    rotate: function rotate(angle) {\n\t        var cos = Math.cos(angle),\n\t            sin = Math.sin(angle);\n\t        return this._t(cos, sin, -sin, cos, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Converts a vector given as x and y to angle, and\r\n\t     * rotates (accumulative).\r\n\t     * @param x\r\n\t     * @param y\r\n\t     * @returns {*}\r\n\t     */\n\t    rotateFromVector: function rotateFromVector(x, y) {\n\t        return this.rotate(Math.atan2(y, x));\n\t    },\n\t\n\t    /**\r\n\t     * Helper method to make a rotation based on an angle in degrees.\r\n\t     * @param {number} angle - angle in degrees\r\n\t     */\n\t    rotateDeg: function rotateDeg(angle) {\n\t        return this.rotate(angle * Math.PI / 180);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix uniformly and accumulative.\r\n\t     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n\t     */\n\t    scaleU: function scaleU(f) {\n\t        return this._t(f, 0, 0, f, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scale: function scale(sx, sy) {\n\t        return this._t(sx, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on x axis accumulative.\r\n\t     * @param {number} sx - scale factor x (1 does nothing)\r\n\t     */\n\t    scaleX: function scaleX(sx) {\n\t        return this._t(sx, 0, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Scales current matrix on y axis accumulative.\r\n\t     * @param {number} sy - scale factor y (1 does nothing)\r\n\t     */\n\t    scaleY: function scaleY(sy) {\n\t        return this._t(1, 0, 0, sy, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shear: function shear(sx, sy) {\n\t        return this._t(1, sy, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for x to the current matrix accumulative.\r\n\t     * @param {number} sx - amount of shear for x\r\n\t     */\n\t    shearX: function shearX(sx) {\n\t        return this._t(1, 0, sx, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply shear for y to the current matrix accumulative.\r\n\t     * @param {number} sy - amount of shear for y\r\n\t     */\n\t    shearY: function shearY(sy) {\n\t        return this._t(1, sy, 0, 1, 0, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skew: function skew(ax, ay) {\n\t        return this.shear(Math.tan(ax), Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for x to the current matrix accumulative.\r\n\t     * @param {number} ax - angle of skew for x\r\n\t     */\n\t    skewX: function skewX(ax) {\n\t        return this.shearX(Math.tan(ax));\n\t    },\n\t\n\t    /**\r\n\t     * Apply skew for y to the current matrix accumulative.\r\n\t     * @param {number} ay - angle of skew for y\r\n\t     */\n\t    skewY: function skewY(ay) {\n\t        return this.shearY(Math.tan(ay));\n\t    },\n\t\n\t    /**\r\n\t     * Set current matrix to new absolute matrix.\r\n\t     * @param {number} a - scale x\r\n\t     * @param {number} b - shear y\r\n\t     * @param {number} c - shear x\r\n\t     * @param {number} d - scale y\r\n\t     * @param {number} e - translate x\r\n\t     * @param {number} f - translate y\r\n\t     */\n\t    setTransform: function setTransform(a, b, c, d, e, f) {\n\t        var me = this;\n\t        me.a = a;\n\t        me.b = b;\n\t        me.c = c;\n\t        me.d = d;\n\t        me.e = e;\n\t        me.f = f;\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translate: function translate(tx, ty) {\n\t        return this._t(1, 0, 0, 1, tx, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on x axis accumulative.\r\n\t     * @param {number} tx - translation for x\r\n\t     */\n\t    translateX: function translateX(tx) {\n\t        return this._t(1, 0, 0, 1, tx, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Translate current matrix on y axis accumulative.\r\n\t     * @param {number} ty - translation for y\r\n\t     */\n\t    translateY: function translateY(ty) {\n\t        return this._t(1, 0, 0, 1, 0, ty);\n\t    },\n\t\n\t    /**\r\n\t     * Multiplies current matrix with new matrix values.\r\n\t     * @param {number} a2 - scale x\r\n\t     * @param {number} b2 - shear y\r\n\t     * @param {number} c2 - shear x\r\n\t     * @param {number} d2 - scale y\r\n\t     * @param {number} e2 - translate x\r\n\t     * @param {number} f2 - translate y\r\n\t     */\n\t    transform: function transform(a2, b2, c2, d2, e2, f2) {\n\t\n\t        var me = this,\n\t            a1 = me.a,\n\t            b1 = me.b,\n\t            c1 = me.c,\n\t            d1 = me.d,\n\t            e1 = me.e,\n\t            f1 = me.f;\n\t\n\t        /* matrix order (canvas compatible):\r\n\t         * ace\r\n\t         * bdf\r\n\t         * 001\r\n\t         */\n\t        me.a = a1 * a2 + c1 * b2;\n\t        me.b = b1 * a2 + d1 * b2;\n\t        me.c = a1 * c2 + c1 * d2;\n\t        me.d = b1 * c2 + d1 * d2;\n\t        me.e = a1 * e2 + c1 * f2 + e1;\n\t        me.f = b1 * e2 + d1 * f2 + f1;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Divide this matrix on input matrix which must be invertible.\r\n\t     * @param {Matrix} m - matrix to divide on (divisor)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divide: function divide(m) {\n\t\n\t        if (!m.isInvertible()) throw \"Input matrix is not invertible\";\n\t\n\t        var im = m.inverse();\n\t\n\t        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\n\t    },\n\t\n\t    /**\r\n\t     * Divide current matrix on scalar value != 0.\r\n\t     * @param {number} d - divisor (can not be 0)\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    divideScalar: function divideScalar(d) {\n\t\n\t        var me = this;\n\t        me.a /= d;\n\t        me.b /= d;\n\t        me.c /= d;\n\t        me.d /= d;\n\t        me.e /= d;\n\t        me.f /= d;\n\t\n\t        return me._x();\n\t    },\n\t\n\t    /**\r\n\t     * Get an inverse matrix of current matrix. The method returns a new\r\n\t     * matrix with values you need to use to get to an identity matrix.\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    inverse: function inverse() {\n\t\n\t        if (this.isIdentity()) {\n\t            return new Matrix();\n\t        } else if (!this.isInvertible()) {\n\t            throw \"Matrix is not invertible.\";\n\t        } else {\n\t            var me = this,\n\t                a = me.a,\n\t                b = me.b,\n\t                c = me.c,\n\t                d = me.d,\n\t                e = me.e,\n\t                f = me.f,\n\t                m = new Matrix(),\n\t                dt = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t            m.a = d / dt;\n\t            m.b = -b / dt;\n\t            m.c = -c / dt;\n\t            m.d = a / dt;\n\t            m.e = (c * f - d * e) / dt;\n\t            m.f = -(a * f - b * e) / dt;\n\t\n\t            return m;\n\t        }\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation is naive. For animation use the\r\n\t     * intrpolateAnim() method instead.\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolate: function interpolate(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix();\n\t\n\t        m.a = me.a + (m2.a - me.a) * t;\n\t        m.b = me.b + (m2.b - me.b) * t;\n\t        m.c = me.c + (m2.c - me.c) * t;\n\t        m.d = me.d + (m2.d - me.d) * t;\n\t        m.e = me.e + (m2.e - me.e) * t;\n\t        m.f = me.f + (m2.f - me.f) * t;\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Interpolate this matrix with another and produce a new matrix.\r\n\t     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n\t     * 1 is equal to the second matrix. The t value is not constrained.\r\n\t     *\r\n\t     * Context from parent matrix is not applied to the returned matrix.\r\n\t     *\r\n\t     * Note: this interpolation method uses decomposition which makes\r\n\t     * it suitable for animations (in particular where rotation takes\r\n\t     * places).\r\n\t     *\r\n\t     * @param {Matrix} m2 - the matrix to interpolate with.\r\n\t     * @param {number} t - interpolation [0.0, 1.0]\r\n\t     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n\t     * @returns {Matrix} - new instance with the interpolated result\r\n\t     */\n\t    interpolateAnim: function interpolateAnim(m2, t, context) {\n\t\n\t        var me = this,\n\t            m = context ? new Matrix(context) : new Matrix(),\n\t            d1 = me.decompose(),\n\t            d2 = m2.decompose(),\n\t            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\n\t            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\n\t            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\n\t            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\n\t            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t;\n\t\n\t        m.translate(translateX, translateY);\n\t        m.rotate(rotation);\n\t        m.scale(scaleX, scaleY);\n\t\n\t        return m._x();\n\t    },\n\t\n\t    /**\r\n\t     * Decompose the current matrix into simple transforms using either\r\n\t     * QR (default) or LU decomposition. Code adapted from\r\n\t     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n\t     *\r\n\t     * The result must be applied in the following order to reproduce the current matrix:\r\n\t     *\r\n\t     *     QR: translate -> rotate -> scale -> skewX\r\n\t     *     LU: translate -> skewY  -> scale -> skewX\r\n\t     *\r\n\t     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n\t     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n\t     */\n\t    decompose: function decompose(useLU) {\n\t\n\t        var me = this,\n\t            a = me.a,\n\t            b = me.b,\n\t            c = me.c,\n\t            d = me.d,\n\t            acos = Math.acos,\n\t            atan = Math.atan,\n\t            sqrt = Math.sqrt,\n\t            pi = Math.PI,\n\t            translate = { x: me.e, y: me.f },\n\t            rotation = 0,\n\t            scale = { x: 1, y: 1 },\n\t            skew = { x: 0, y: 0 },\n\t            determ = a * d - b * c; // determinant(), skip DRY here...\n\t\n\t        if (useLU) {\n\t            if (a) {\n\t                skew = { x: atan(c / a), y: atan(b / a) };\n\t                scale = { x: a, y: determ / a };\n\t            } else if (b) {\n\t                rotation = pi * 0.5;\n\t                scale = { x: b, y: determ / b };\n\t                skew.x = atan(d / b);\n\t            } else {\n\t                // a = b = 0\n\t                scale = { x: c, y: d };\n\t                skew.x = pi * 0.25;\n\t            }\n\t        } else {\n\t            // Apply the QR-like decomposition.\n\t            if (a || b) {\n\t                var r = sqrt(a * a + b * b);\n\t                rotation = b > 0 ? acos(a / r) : -acos(a / r);\n\t                scale = { x: r, y: determ / r };\n\t                skew.x = atan((a * c + b * d) / (r * r));\n\t            } else if (c || d) {\n\t                var s = sqrt(c * c + d * d);\n\t                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\n\t                scale = { x: determ / s, y: s };\n\t                skew.y = atan((a * c + b * d) / (s * s));\n\t            } else {\n\t                // a = b = c = d = 0\n\t                scale = { x: 0, y: 0 }; // = invalid matrix\n\t            }\n\t        }\n\t\n\t        return {\n\t            scale: scale,\n\t            translate: translate,\n\t            rotation: rotation,\n\t            skew: skew\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Returns the determinant of the current matrix.\r\n\t     * @returns {number}\r\n\t     */\n\t    determinant: function determinant() {\n\t        return this.a * this.d - this.b * this.c;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to x and y point.\r\n\t     * Returns a point object.\r\n\t     *\r\n\t     * @param {number} x - value for x\r\n\t     * @param {number} y - value for y\r\n\t     * @returns {{x: number, y: number}} A new transformed point object\r\n\t     */\n\t    applyToPoint: function applyToPoint(x, y) {\n\t\n\t        var me = this;\n\t\n\t        return {\n\t            x: x * me.a + y * me.c + me.e,\n\t            y: x * me.b + y * me.d + me.f\n\t        };\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to array with point objects or point pairs.\r\n\t     * Returns a new array with points in the same format as the input array.\r\n\t     *\r\n\t     * A point object is an object literal:\r\n\t     *\r\n\t     * {x: x, y: y}\r\n\t     *\r\n\t     * so an array would contain either:\r\n\t     *\r\n\t     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n\t     *\r\n\t     * or\r\n\t     * [x1, y1, x2, y2, ... xn, yn]\r\n\t     *\r\n\t     * @param {Array} points - array with point objects or pairs\r\n\t     * @returns {Array} A new array with transformed points\r\n\t     */\n\t    applyToArray: function applyToArray(points) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l,\n\t            mxPoints = [];\n\t\n\t        if (typeof points[0] === 'number') {\n\t\n\t            l = points.length;\n\t\n\t            while (i < l) {\n\t                p = this.applyToPoint(points[i++], points[i++]);\n\t                mxPoints.push(p.x, p.y);\n\t            }\n\t        } else {\n\t            for (; p = points[i]; i++) {\n\t                mxPoints.push(this.applyToPoint(p.x, p.y));\n\t            }\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current matrix to a typed array with point pairs. Although\r\n\t     * the input array may be an ordinary array, this method is intended\r\n\t     * for more performant use where typed arrays are used. The returned\r\n\t     * array is regardless always returned as a Float32Array.\r\n\t     *\r\n\t     * @param {*} points - (typed) array with point pairs\r\n\t     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n\t     * @returns {*} A new typed array with transformed points\r\n\t     */\n\t    applyToTypedArray: function applyToTypedArray(points, use64) {\n\t\n\t        var i = 0,\n\t            p,\n\t            l = points.length,\n\t            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\n\t\n\t        while (i < l) {\n\t            p = this.applyToPoint(points[i], points[i + 1]);\n\t            mxPoints[i++] = p.x;\n\t            mxPoints[i++] = p.y;\n\t        }\n\t\n\t        return mxPoints;\n\t    },\n\t\n\t    /**\r\n\t     * Apply to any canvas 2D context object. This does not affect the\r\n\t     * context that optionally was referenced in constructor unless it is\r\n\t     * the same context.\r\n\t     * @param {CanvasRenderingContext2D} context\r\n\t     */\n\t    applyToContext: function applyToContext(context) {\n\t        var me = this;\n\t        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is an identity matrix (no transforms applied).\r\n\t     * @returns {boolean} True if identity (not transformed)\r\n\t     */\n\t    isIdentity: function isIdentity() {\n\t        var me = this;\n\t        return me._q(me.a, 1) && me._q(me.b, 0) && me._q(me.c, 0) && me._q(me.d, 1) && me._q(me.e, 0) && me._q(me.f, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Returns true if matrix is invertible\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isInvertible: function isInvertible() {\n\t        return !this._q(this.determinant(), 0);\n\t    },\n\t\n\t    /**\r\n\t     * Test if matrix is valid.\r\n\t     */\n\t    isValid: function isValid() {\n\t        return !this._q(this.a * this.d, 0);\n\t    },\n\t\n\t    /**\r\n\t     * Clones current instance and returning a new matrix.\r\n\t     * @param {boolean} [noContext=false] don't clone context reference if true\r\n\t     * @returns {Matrix}\r\n\t     */\n\t    clone: function clone(noContext) {\n\t        var me = this,\n\t            m = new Matrix();\n\t        m.a = me.a;\n\t        m.b = me.b;\n\t        m.c = me.c;\n\t        m.d = me.d;\n\t        m.e = me.e;\n\t        m.f = me.f;\n\t        if (!noContext) m.context = me.context;\n\t\n\t        return m;\n\t    },\n\t\n\t    /**\r\n\t     * Compares current matrix with another matrix. Returns true if equal\r\n\t     * (within epsilon tolerance).\r\n\t     * @param {Matrix} m - matrix to compare this matrix with\r\n\t     * @returns {boolean}\r\n\t     */\n\t    isEqual: function isEqual(m) {\n\t\n\t        var me = this,\n\t            q = me._q;\n\t\n\t        return q(me.a, m.a) && q(me.b, m.b) && q(me.c, m.c) && q(me.d, m.d) && q(me.e, m.e) && q(me.f, m.f);\n\t    },\n\t\n\t    /**\r\n\t     * Returns an array with current matrix values.\r\n\t     * @returns {Array}\r\n\t     */\n\t    toArray: function toArray() {\n\t        var me = this;\n\t        return [me.a, me.b, me.c, me.d, me.e, me.f];\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS: function toCSS() {\n\t        return \"matrix(\" + this.toArray() + \")\";\n\t    },\n\t\n\t    /**\r\n\t     * Generates a matrix3d() string that can be used with CSS transform.\r\n\t     * @returns {string}\r\n\t     */\n\t    toCSS3D: function toCSS3D() {\n\t        var me = this;\n\t        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\n\t    },\n\t\n\t    /**\r\n\t     * Returns a JSON compatible string of current matrix.\r\n\t     * @returns {string}\r\n\t     */\n\t    toJSON: function toJSON() {\n\t        return JSON.stringify(this.toArray());\n\t    },\n\t\n\t    /**\r\n\t     * Returns a string with current matrix as comma-separated list.\r\n\t     * @returns {string}\r\n\t     */\n\t    toString: function toString() {\n\t        return \"\" + this.toArray();\n\t    },\n\t\n\t    /**\r\n\t     * Compares floating point values with some tolerance (epsilon)\r\n\t     * @param {number} f1 - float 1\r\n\t     * @param {number} f2 - float 2\r\n\t     * @returns {boolean}\r\n\t     * @private\r\n\t     */\n\t    _q: function _q(f1, f2) {\n\t        return Math.abs(f1 - f2) < 1e-14;\n\t    },\n\t\n\t    /**\r\n\t     * Apply current absolute matrix to context if defined, to sync it.\r\n\t     * @private\r\n\t     */\n\t    _x: function _x() {\n\t        var me = this;\n\t        if (me.context) me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\n\t        return me;\n\t    }\n\t};\n\t\n\texports[\"default\"] = Matrix;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the global root level namespace for the library.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires game\n\t * @requires module:play~pl.util\n\t * @requires types/Basic\n\t * @requires types/Dimensions\n\t */\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar pl;\n\t/**\n\t * Resolves the event type for user interactions.\n\t */\n\tfunction resolveEventType() {\n\t\tvar resolution;\n\t\n\t\tif (_playGame2['default'].feature('touch')) {\n\t\t\tresolution = {\n\t\t\t\tACTION: 'touchend',\n\t\t\t\tACTION_DOWN: 'touchstart',\n\t\t\t\tACTION_UP: 'touchend',\n\t\t\t\tACTION_MOVE: 'touchmove',\n\t\t\t\tACTION_OUT: 'touchcancel'\n\t\t\t};\n\t\t} else {\n\t\t\tresolution = {\n\t\t\t\tACTION: 'click',\n\t\t\t\tACTION_DOWN: 'mousedown',\n\t\t\t\tACTION_UP: 'mouseup',\n\t\t\t\tACTION_MOVE: 'mousemove',\n\t\t\t\tACTION_OUT: 'mouseout'\n\t\t\t};\n\t\t}\n\t\n\t\treturn resolution;\n\t}\n\t\n\t/**\n\t * Globaly accesable, root level namespace for the library.\n\t * @namespace\n\t * @prop {object} EVENT - Namespace for noralized event name constants.\n\t * @prop {Basic} Basic - Base object type.\n\t * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n\t * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n\t * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n\t * @prop {object} util - Namespace for utility functions.\n\t */\n\tpl = {\n\t\tBasic: _typesBasic2['default'], Point: _typesDimensions.Point, Size: _typesDimensions.Size, Queue: _typesQueue2['default'],\n\t\tgame: _playGame2['default'],\n\t\tutil: _util2['default'],\n\t\n\t\t/**\n\t  * @namespace\n\t  * @prop {string} ACTION - The device normalized `click` event name.\n\t  * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n\t  * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n\t  * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n\t  * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n\t  */\n\t\tEVENT: resolveEventType()\n\t};\n\t\n\texports['default'] = pl;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @module game\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play.game.component\n\t * @requires play.game.manager\n\t * @requires util\n\t * @requires types/Events\n\t * @requires types/GlobalScope\n\t * @requires types/Entity\n\t * @requires types/Screen\n\t * @requires types/Game\n\t */\n\t\n\tvar _playGameComponent = __webpack_require__(25);\n\t\n\tvar _playGameComponent2 = _interopRequireDefault(_playGameComponent);\n\t\n\tvar _playGameManager = __webpack_require__(27);\n\t\n\tvar _playGameManager2 = _interopRequireDefault(_playGameManager);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesEntity = __webpack_require__(93);\n\t\n\tvar _typesEntity2 = _interopRequireDefault(_typesEntity);\n\t\n\tvar _typesScreen = __webpack_require__(94);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesGame = __webpack_require__(95);\n\t\n\tvar _typesGame2 = _interopRequireDefault(_typesGame);\n\t\n\tvar _platform = __webpack_require__(96);\n\t\n\tvar _platform2 = _interopRequireDefault(_platform);\n\t\n\tvar GAMES, CONFIG, READY_QUEUE;\n\t\n\t/**\n\t * Define a game scope for registration and/or initialization.\n\t * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n\t *\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction game(_name, _implementation) {\n\t\tif (game.isDOMReady) {\n\t\t\tinitialize(_name, _implementation);\n\t\t} else {\n\t\t\tregister(_name, _implementation);\n\t\t}\n\t}\n\t\n\tfunction ready(_eventName) {\n\t\tif (READY_QUEUE.length) return false;\n\t\tgame.trigger(_eventName || 'ready');\n\t}\n\t\n\t/**\n\t * Registers an implementation of a game scope for initialization.\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction register(_name, _implementation) {\n\t\tif (! ~GAMES.indexOf(_name)) {\n\t\t\tGAMES.push({\n\t\t\t\tid: _name,\n\t\t\t\timplementation: _implementation\n\t\t\t});\n\t\t}\n\t}\n\t\n\t/**\n\t * Initializes an implementation of a game scope. (overloaded)\n\t * @function initialize\n\t * @protected\n\t * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\t\n\t/**\n\t * Initializes an implementation of a game scope.\n\t * @protected\n\t * @arg {array} _collection - The collection of game scope records for initialization.\n\t * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n\t */\n\tfunction initialize(_name_collection, _implementation) {\n\t\tswitch (typeof _name_collection) {\n\t\t\tcase 'string':\n\t\t\t\t_typesGlobalScope2['default'][_name_collection] = _typesGame2['default'].extend(_implementation).initialize('#' + _name_collection);\n\t\t\t\tbreak;\n\t\n\t\t\tcase 'object':\n\t\t\t\t_name_collection.forEach(function (_item, _index) {\n\t\t\t\t\tinitialize(_item.id, _item.implementation);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t/** @protected */\n\tGAMES = [];\n\t/** @protected */\n\tCONFIG = {};\n\t/** @protected */\n\tREADY_QUEUE = [];\n\t\n\t/**\n\t * Interface for game level configuration.\n\t * @namespace game\n\t * @memberof module:play~pl\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t\tvar audioContext;\n\t\n\t\tthis.component = _playGameComponent2['default'];\n\t\tthis.manager = _playGameManager2['default'];\n\t\n\t\t_util2['default'].mixin(game, _typesEvents2['default']);\n\t\n\t\tthis.on('platform-event', function (_event) {\n\t\t\tconsole.log('play.game -', _event.name, _event.gameData);\n\t\t});\n\t\n\t\t/**\n\t  * Starts the dominos falling\n\t  * @function run\n\t  * @memberof module:play~pl.game\n\t  */\n\t\tthis.run = function () {\n\t\t\tgame.isDOMReady = true;\n\t\t\tgame.trigger('dom-ready');\n\t\n\t\t\tgame.component.loadAll(function () {\n\t\t\t\t// console.log('** All component sources loaded.');\n\t\t\t\tinitialize(GAMES);\n\t\n\t\t\t\tGAMES = null;\n\t\t\t});\n\t\n\t\t\t_platform2['default'].emit(_platform2['default'].EVENT_INIT);\n\t\t};\n\t\n\t\tthis.report = function (_name) {\n\t\t\t_platform2['default'].emit(_name);\n\t\n\t\t\treturn this.report;\n\t\t};\n\t\n\t\tthis.report.exit = function (_gameScope) {\n\t\t\t_platform2['default'].saveGameState(_gameScope.progress());\n\t\t\t_platform2['default'].emit(_platform2['default'].EVENT_EXIT);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.report.flip = function (_gameScope) {\n\t\t\t_platform2['default'].saveGameState(_gameScope.progress());\n\t\t\t_platform2['default'].emit(_platform2['default'].EVENT_FLIPPED);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Getter/Setter for game level configuration.\n\t  * @function module:play~pl.game.config\n\t  * @arg {string} _key - The key to retrieve\n\t  * @returns {this}\n\t  */\n\t\n\t\t/**\n\t  * Getter/Setter for game level configuration.\n\t  * @function config\n\t  * @memberof module:play~pl.game\n\t  * @arg {object} _mixin - Object to set properties on configuration.\n\t  * @returns {this}\n\t  */\n\t\tthis.config = function (_key_mixin) {\n\t\t\tswitch (typeof _key_mixin) {\n\t\t\t\tcase 'string':\n\t\t\t\t\treturn _util2['default'].resolvePath(CONFIG, _key_mixin);\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (_key_mixin) _util2['default'].mixin(CONFIG, _key_mixin);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * @function provideEntityType\n\t  * @deprecated\n\t  * @memberof module:play~pl.game\n\t  */\n\t\tthis.provideEntityType = function () {\n\t\t\treturn _typesEntity2['default'];\n\t\t};\n\t\n\t\t/**\n\t  * @function provideScreenType\n\t  * @deprecated\n\t  * @memberof module:play~pl.game\n\t  */\n\t\tthis.provideScreenType = function () {\n\t\t\treturn _typesScreen2['default'];\n\t\t};\n\t\n\t\t/**\n\t  * Augments the global scope.\n\t  * @function scope\n\t  * @arg {function|object} _mixin - Object or constructor to define members.\n\t  * @returns {this}\n\t  *\n\t  * @memberof module:play~pl.game\n\t  */\n\t\tthis.scope = function (_mixin) {\n\t\t\tif (typeof _mixin === 'function') {\n\t\t\t\t_mixin.call(_typesGlobalScope2['default']);\n\t\t\t} else if (_mixin) {\n\t\t\t\t_typesGlobalScope2['default'].mixin(_mixin);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * @function queue\n\t  * @deprecated\n\t  * @memberof module:play~pl.game\n\t  */\n\t\tthis.queue = function (_item) {\n\t\t\tif (! ~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.queue.complete = function (_item, _eventName) {\n\t\t\tvar index;\n\t\n\t\t\tindex = READY_QUEUE.indexOf(_item);\n\t\t\tREADY_QUEUE.splice(index, 1);\n\t\n\t\t\tready(_eventName);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Accessor for the detected features supported by the browser.\n\t  *\n\t  * *Supported Feature Detectors*\n\t  * - touch\n\t  *\n\t  * @function feature;\n\t  * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n\t  * @returns {boolean} The support status for the specified feature.\n\t  */\n\t\tthis.feature = (function () {\n\t\t\tvar detect = {\n\t\t\t\ttouch: function touch() {\n\t\t\t\t\treturn window.hasOwnProperty('ontouchend');\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\treturn function (_name) {\n\t\t\t\tvar tester = detect[_name];\n\t\t\t\tif (!tester && console) console.warn('No feature detection for \"' + _name + '\".');\n\t\t\t\treturn tester && tester();\n\t\t\t};\n\t\t})();\n\t\n\t\tthis.getAudioContext = function () {\n\t\t\tif (!audioContext) {\n\t\t\t\taudioContext = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\t\t// window.onfocus = function() { audioContext.resume(); };\n\t\t\t\t// window.onblur = function() { audioContext.suspend(); };\n\t\t\t}\n\t\t\treturn audioContext;\n\t\t};\n\t\n\t\tthis.enableAudioContext = function () {\n\t\t\tvar ctx, silence;\n\t\n\t\t\tctx = this.getAudioContext();\n\t\t\tsilence = ctx.createBufferSource();\n\t\n\t\t\tsilence.buffer = ctx.createBuffer(2, 1, 44100);\n\t\t\tsilence.connect(ctx.destination);\n\t\t\tsilence.start();\n\t\t\tsilence.disconnect();\n\t\n\t\t\treturn silence;\n\t\t};\n\t}).call(game);\n\t\n\texports['default'] = game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n\t *\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t *\n\t * @requires play~pl.util\n\t * @requires types/Events\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\t/**\n\t * Collection of component behavior records\n\t * @const\n\t */\n\tvar COMPONENTS;\n\t\n\t/**\n\t * Registers a component behavior.\n\t * @arg {string} _name - The name for the component.\n\t * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n\t * @returns {@link module:play~pl.game}\n\t */\n\tfunction component(_name, _implementation) {\n\t\tif (!component.get(_name)) {\n\t\t\tCOMPONENTS.push({\n\t\t\t\tname: _name,\n\t\t\t\timplementation: _implementation,\n\t\t\t\tconfig: {}\n\t\t\t});\n\t\t}\n\t\n\t\treturn this;\n\t}\n\t\n\tCOMPONENTS = [];\n\t\n\t/**\n\t * Methods to manage and load component behavior scripts.\n\t * @namespace component\n\t * @memberof module:play~pl.game\n\t * @mixes Events\n\t */\n\t(function () {\n\t\n\t\t_util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t\t/**\n\t  * Given a name; provides the component record. `{name, implementation}`\n\t  * @memberof module:play~pl.game.component\n\t  * @arg {string} _name - The name of the component.\n\t  * @returns {object} The record.\n\t  */\n\t\tthis.get = function (_name) {\n\t\t\tvar i, record;\n\t\n\t\t\tfor (i = 0; record = COMPONENTS[i]; i += 1) {\n\t\t\t\tif (record.name === _name) return record;\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t};\n\t\n\t\t/**\n\t  * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n\t  * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n\t  * @memberof module:play~pl.game.component\n\t  * @arg {string} _name - The name of the component.\n\t  * @arg {function} _callback - Callback for load success.\n\t  * @todo Implement Promises.\n\t  * @returns `this`\n\t  */\n\t\tthis.load = function (_name, _callback) {\n\t\t\tvar path;\n\t\n\t\t\tif (component.get(_name)) {\n\t\t\t\tif (_callback) _callback.call(component, _name);\n\t\t\t\treturn null;\n\t\t\t}\n\t\n\t\t\tpath = pl.game.config('componentDirectory') + _name + '/behavior.js';\n\t\n\t\t\t$.getScript(path, function () {\n\t\t\t\tif (_callback) _callback.call(component, _name);\n\t\t\t\tcomponent.trigger('loaded', [_name]);\n\t\t\t});\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Loads all the component scripts for HTML elements with `pl-component` attributes.\n\t  * @memberof module:play~pl.game.component\n\t  * @arg {function} _callback - Callback for load success.\n\t  * @todo Implement Promises.\n\t  * @returns `this`\n\t  */\n\t\tthis.loadAll = function (_callback) {\n\t\t\tvar $components, queue;\n\t\n\t\t\t$components = $('[pl-component]');\n\t\t\tqueue = [];\n\t\n\t\t\t$components.each(function (_index) {\n\t\t\t\tvar name;\n\t\n\t\t\t\tname = $(this).attr('pl-component');\n\t\n\t\t\t\tif (~queue.indexOf(name)) return;\n\t\n\t\t\t\tqueue.push(name);\n\t\t\t});\n\t\n\t\t\tqueue.slice(0).forEach(function (_name) {\n\t\t\t\tcomponent.load(_name, function () {\n\t\t\t\t\tvar index;\n\t\n\t\t\t\t\tindex = queue.indexOf(_name);\n\t\t\t\t\tqueue.splice(index, 1);\n\t\n\t\t\t\t\tif (!queue.length && _callback) _callback.apply(component, arguments);\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t// Maybe?\n\t\t// this.config = function () {};\n\t}).call(component);\n\t\n\texports['default'] = component;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Events\n\t*  @desc Contains methods for managing and dispatching events from objects.\n\t*  @proto Basic\n\t*/\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar Events = _typesBasic2['default'].extend(function () {\n\t\tvar i, method, methods;\n\t\t/**\n\t *  @desc Creates a function with a proxy to the jQuery method.\n\t *  @param _name (String) The name of the method being proxied.\n\t *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t *  @private\n\t */\n\t\tfunction createProxyFunction(_name) {\n\t\t\treturn function () {\n\t\t\t\tvar $jq = $();\n\t\t\t\t// We must wrap our object in jQuery. If 'typeof this' is a function then we need\n\t\t\t\t// to add it in this manner, otherwise jQuery treats it like a ready callback.\n\t\t\t\t$jq.push(this);\n\t\n\t\t\t\treturn $.fn[_name].apply($jq, arguments);\n\t\t\t};\n\t\t}\n\t\n\t\tmethods = ['on', 'off', 'trigger'];\n\t\n\t\tthis.baseType = 'TYPE_EVENTS';\n\t\n\t\tfor (i = 0; method = methods[i]; i += 1) {\n\t\t\tthis[method] = createProxyFunction(method);\n\t\t}\n\t});\n\t\n\texports['default'] = Events;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _playGameManagerDraggable = __webpack_require__(28);\n\t\n\tvar _playGameManagerDraggable2 = _interopRequireDefault(_playGameManagerDraggable);\n\t\n\texports.draggable = _playGameManagerDraggable2['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar COLLECTION_DRAGABLES = _typesCollection2['default'].create();\n\t\n\tvar draggableStyleSheet;\n\t\n\tfunction boot() {\n\t\tcreateHelperStyleSheet();\n\t\tattachEvents();\n\t}\n\t\n\tfunction attachEvents() {\n\t\tvar state, E;\n\t\n\t\tE = pl.EVENT;\n\t\n\t\t// Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n\t\tif (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\t\n\t\t$(document).on(E.ACTION_DOWN, function (_event) {\n\t\t\tvar $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\t\n\t\t\t$draggable = $(_event.target).closest('[pl-draggable]');\n\t\n\t\t\tif ($draggable.length) {\n\t\t\t\tscope = $draggable.scope();\n\t\t\t\tcursor = resolveEventPoint(_event, 1 / scope.game.zoom);\n\t\t\t\tmode = $draggable.pl('draggable');\n\t\t\t\tgame = {\n\t\t\t\t\tposition: scope.game.absolutePosition(),\n\t\t\t\t\tscale: scope.game.transformScale().x\n\t\t\t\t};\n\t\t\t\tpoint = $draggable.absolutePosition().dec(game.position);\n\t\t\t\ttransform = $draggable.transform();\n\t\t\t\thelperID = createID();\n\t\t\t\tstate = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\t$draggable: $draggable,\n\t\t\t\t\tscope: scope,\n\t\t\t\t\t$helper: null,\n\t\n\t\t\t\t\tstart: {\n\t\t\t\t\t\tcursor: cursor,\n\t\t\t\t\t\tpoint: point,\n\t\t\t\t\t\ttransform: transform\n\t\t\t\t\t},\n\t\n\t\t\t\t\tprogress: {\n\t\t\t\t\t\tdistance: null,\n\t\t\t\t\t\tpoint: null,\n\t\t\t\t\t\ttransform: null\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t// FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n\t\t\t\t// so we need to account for the game transform scale.\n\t\t\t\t//\n\t\t\t\tif (game.scale !== 1) point = point.scale(1 / game.scale);\n\t\n\t\t\t\tdraggableStyleSheet.html(provideSource(helperID, createDraggableRule($draggable)));\n\t\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase 'clone':\n\t\t\t\t\t\tstate.$helper = $draggable.clone();\n\t\t\t\t\t\tstate.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t\t\t\t\t\t.addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 'pluck':\n\t\t\t\t\t\t$draggable.addClass('PLUCKED');\n\t\n\t\t\t\t\t\tstate.$helper = $draggable.clone();\n\t\t\t\t\t\tstate.$helper.id(helperID).pl('draggable', null) // helpers are not to be captured as draggable\n\t\t\t\t\t\t.addClass('draggable-helper').appendTo(document.body).absolutePosition(point);\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstate.$helper = $draggable;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\tstate.$helper.removeClass('DRAG-ENDED').addClass('DRAG-START');\n\t\n\t\t\t\tdragStartEvent = $.Event('drag-start', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: scope\n\t\t\t\t});\n\t\n\t\t\t\tscope.trigger(dragStartEvent);\n\t\t\t}\n\t\t}).on(E.ACTION_MOVE, function (_event) {\n\t\t\tvar cursor, $draggable, distance, point, transform, dragMoveEvent;\n\t\n\t\t\tif (state) {\n\t\t\t\tcursor = resolveEventPoint(_event, 1 / state.scope.game.zoom);\n\t\t\t\tdistance = state.start.cursor.distance(cursor);\n\t\t\t\tpoint = _typesDimensions.Point.create();\n\t\t\t\ttransform = null;\n\t\n\t\t\t\tif (state.start.transform !== 'none') {\n\t\t\t\t\ttransform = state.start.transform.clone();\n\t\t\t\t\ttransform.translate(distance.width, distance.height);\n\t\t\t\t\tpoint.set(transform.applyToPoint(0, 0));\n\t\t\t\t} else {\n\t\t\t\t\tpoint = distance.to('point');\n\t\t\t\t}\n\t\n\t\t\t\tif (state.$helper.hasClass('DRAG-START')) {\n\t\t\t\t\tstate.$helper.removeClass('DRAG-START').addClass('DRAGGING');\n\t\t\t\t}\n\t\n\t\t\t\tdragMoveEvent = $.Event('drag-move', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: state.scope\n\t\t\t\t});\n\t\n\t\t\t\tstate.progress.distance = distance;\n\t\t\t\tstate.progress.point = state.start.point.inc(point);\n\t\t\t\tstate.progress.transform = transform;\n\t\n\t\t\t\tstate.scope.translate(state.$helper, point);\n\t\t\t\tstate.scope.trigger(dragMoveEvent);\n\t\t\t}\n\t\t}).on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n\t\t\tvar $draggable, dragEndEvent;\n\t\n\t\t\tif (state) {\n\t\t\t\t// Do not end dragging if we dont mouse out of the document.\n\t\t\t\tif (_event.type === 'mouseout' && ! ~[null, document.documentElement].indexOf(_event.toElement)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t$draggable = state.$draggable;\n\t\n\t\t\t\tif (state.$helper.hasClass('draggable-helper')) {\n\t\t\t\t\tstate.$helper.on('transitionend', function () {\n\t\t\t\t\t\t$draggable.removeClass('PLUCKED');\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\tstate.$helper.removeClass('DRAG-START DRAGGING').addClass('DRAG-ENDED');\n\t\n\t\t\t\tdragEndEvent = $.Event('drag-end', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: state.scope\n\t\t\t\t});\n\t\n\t\t\t\tstate.scope.trigger(dragEndEvent);\n\t\n\t\t\t\tstate = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tattachEvents.disableTouchScroll = function () {\n\t\tdocument.addEventListener(\"touchmove\", function (_event) {\n\t\t\t_event.preventDefault();\n\t\t}, false);\n\t};\n\t\n\tfunction resolveEventPoint(_event, _scale) {\n\t\tvar scale = _scale || 1;\n\t\n\t\tif (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t\t\t/**\n\t   * For now, interactions should use the last touch if multiple fingers are captured.\n\t   * @todo Maybe invoke action for each touch.\n\t   */\n\t\t\t_event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t\t}\n\t\n\t\treturn _typesDimensions.Point.create().set(new function () {\n\t\t\tif (_event.touch) {\n\t\t\t\tthis.x = _event.touch.clientX * scale;\n\t\t\t\tthis.y = _event.touch.clientY * scale;\n\t\t\t} else {\n\t\t\t\tthis.x = _event.clientX * scale;\n\t\t\t\tthis.y = _event.clientY * scale;\n\t\t\t}\n\t\t}());\n\t}\n\t\n\tfunction createHelperStyleSheet() {\n\t\tdraggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n\t}\n\t\n\tfunction createDraggableRule(_$draggable) {\n\t\tvar i, style, blacklist, rule, prop;\n\t\n\t\tstyle = window.getComputedStyle(_$draggable[0]);\n\t\trule = {};\n\t\tblacklist = [\"zIndex\", \"opacity\", \"cursor\", \"transition\", \"transitionDelay\", \"transitionDuration\", \"transitionProperty\", \"transitionTimingFunction\"];\n\t\n\t\tfor (i = 0; i < style.length; i += 1) {\n\t\t\tprop = _util2['default'].transformId(style[i], true);\n\t\t\tif (~blacklist.indexOf(prop)) continue;\n\t\t\tif (prop.indexOf('Webkit') === 0) prop = prop.slice(0, 1).toLowerCase() + prop.slice(1);\n\t\t\tif (style[prop]) rule[prop] = style[prop];\n\t\t}\n\t\n\t\treturn rule;\n\t}\n\t\n\tfunction provideSource(_id, _rule) {\n\t\tvar source, prop, value;\n\t\n\t\tsource = '#' + _id + '.draggable-helper {';\n\t\n\t\tfor (prop in _rule) {\n\t\t\tif (!_rule.hasOwnProperty(prop)) continue;\n\t\t\tvalue = _rule[prop];\n\t\t\tsource += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase() + ': ' + value + ';';\n\t\t}\n\t\n\t\tsource += '}';\n\t\n\t\treturn source;\n\t};\n\t\n\tfunction createID() {\n\t\treturn 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n\t\t\tif (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t\t\treturn Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n\t\t});\n\t}\n\t\n\tvar draggableManager = {};\n\t\n\t$(boot);\n\t\n\texports['default'] = draggableManager;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Collections are iterables which hold a consistent interface throughout its indexes.\n\t *\n\t * @module\n\t * @requires module:types/BasicArray\n\t */\n\t\n\tvar _typesBasicArray = __webpack_require__(17);\n\t\n\tvar _typesBasicArray2 = _interopRequireDefault(_typesBasicArray);\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n\t * @classdesc Iterable holding record objects of the same interface.\n\t * @class\n\t * @extends module:types/BasicArray~BasicArray\n\t */\n\tvar Collection = _typesBasicArray2['default'].extend(function () {\n\t\t/**\n\t  * Gets the record object which has `_member` as a member.\n\t  * @instance\n\t  * @protected\n\t  * @memberof module:types/Collection~Collection\n\t  * @arg {*} _member - object reference to search for.\n\t  * @arg {string} _key - the target key to test the `_member` against.\n\t  * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n\t  * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n\t  */\n\t\tfunction getRecord(_member, _key, _shouldCollect) {\n\t\t\tvar i, record, member, result;\n\t\n\t\t\tresult = [];\n\t\n\t\t\tfor (i = 0; record = this[i]; i += 1) {\n\t\t\t\tif (_key !== undefined) {\n\t\t\t\t\tif (record[_key] === _member) {\n\t\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn record;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (record instanceof Array) {\n\t\t\t\t\tif (~record.indexOf(_member)) {\n\t\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn record;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (member in record) {\n\t\t\t\t\t\tif (!record.hasOwnProperty(member)) continue;\n\t\t\t\t\t\tif (record[member] === _member) {\n\t\t\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn record;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn result.length ? result : null;\n\t\t}\n\t\n\t\t/**\n\t  * Objects with this as an own property will be identified as the root object.\n\t  * @memberof module:types/Collection~Collection\n\t  * @readonly\n\t  * @default\n\t  */\n\t\tthis.baseType = 'TYPE_COLLECTION';\n\t\n\t\tthis.add = function (_record) {\n\t\t\tif (~this.indexOf(_record)) return false;\n\t\t\tthis.push(_record);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.remove = function (_record) {\n\t\t\tvar index;\n\t\n\t\t\tindex = this.indexOf(_record);\n\t\t\tif (~index) this.splice(index, 1);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.has = function (_record) {\n\t\t\treturn !! ~this.indexOf(_record);\n\t\t};\n\t\n\t\tthis.get = function (_member, _key) {\n\t\t\treturn getRecord.call(this, _member, _key);\n\t\t};\n\t\n\t\tthis.filter = function (_member, _key) {\n\t\t\treturn getRecord.call(this, _member, _key, true);\n\t\t};\n\t});\n\t\n\texports['default'] = Collection;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  GlobalScope\n\t*/\n\t\n\tvar _typesScope = __webpack_require__(31);\n\t\n\tvar GlobalScope = _typesScope.Scope.extend(function () {\n\t\n\t\tthis.baseType = 'TYPE_GLOBAL_SCOPE';\n\t});\n\t\n\texports['default'] = GlobalScope;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n\t * This enables properties and methods to be in context of the DOM node and its descendants.\n\t *\n\t * @module\n\t * @requires types/jQProxy\n\t * @requires types/Basic\n\t * @requires types/Queue\n\t * @requires play.game\n\t * @requires util\n\t * @requires evalAction\n\t *\n\t * @exports createEntity\n\t */\n\t\n\tvar _typesJQProxy = __webpack_require__(32);\n\t\n\tvar _typesJQProxy2 = _interopRequireDefault(_typesJQProxy);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _evalAction = __webpack_require__(41);\n\t\n\tvar _evalAction2 = _interopRequireDefault(_evalAction);\n\t\n\tvar _typesAudioManager = __webpack_require__(42);\n\t\n\t/**\n\t * Creates a new Enitiy instance with a context node and implementation.\n\t * The instance is prototyped from the parent scope.\n\t *\n\t * @memberof module:types/Scope~Scope#createEntity\n\t * @protected\n\t * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n\t * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n\t * @returns {module:types/Scope~Scope}\n\t */\n\tfunction createEntity(_$node, _implementation) {\n\t\tvar component, prototype, componentRecord, instance;\n\t\n\t\tcomponent = _$node.attr('pl-component');\n\t\tprototype = this;\n\t\n\t\tif (component) {\n\t\t\tcomponentRecord = _playGame2['default'].component.get(component);\n\t\n\t\t\tif (componentRecord) {\n\t\t\t\t// If a scope is being defined as an extention of a component before the component scope\n\t\t\t\t// has been allocated, we construct the component first then pass it as the proto.\n\t\t\t\t// But we need to make sure we are not allocating the component it self.\n\t\t\t\tif (componentRecord.implementation !== _implementation) {\n\t\t\t\t\tprototype = this.extend(componentRecord.implementation);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('No implementation record for the ' + component + 'component.');\n\t\t\t}\n\t\t}\n\t\n\t\tinstance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\t\n\t\treturn instance.initialize(_$node, component);\n\t}\n\t\n\t/**\n\t * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n\t * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n\t * @class\n\t * @extends module:types/jQProxy~jQProxy\n\t */\n\tvar Scope = _typesJQProxy2['default'].extend(function () {\n\t\n\t\t/**\n\t  * Collection of records pairing a node with its action.\n\t  * @memberof module:types/Scope~Scope\n\t  * @static\n\t  * @protected\n\t  * @todo Convert to types/Collection\n\t  */\n\t\tvar Actionables;\n\t\n\t\tfunction attachActionHandler() {\n\t\t\tthis.on(pl.EVENT.ACTION, function (_event) {\n\t\t\t\tvar target, record;\n\t\n\t\t\t\ttarget = $(_event.target).closest('[pl-action]')[0];\n\t\n\t\t\t\tif (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t\t\t\t\t/**\n\t     * For now, interactions should use the last touch if multiple fingers are captured.\n\t     * @todo Maybe invoke action for each touch.\n\t     */\n\t\t\t\t\t_event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length - 1];\n\t\t\t\t}\n\t\n\t\t\t\t_event.cursor = _typesDimensions.Point.create().set(new function () {\n\t\t\t\t\tif (_event.touch) {\n\t\t\t\t\t\tthis.x = _event.touch.clientX;\n\t\t\t\t\t\tthis.y = _event.touch.clientY;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.x = _event.clientX;\n\t\t\t\t\t\tthis.y = _event.clientY;\n\t\t\t\t\t}\n\t\t\t\t}());\n\t\n\t\t\t\tif (target) {\n\t\t\t\t\trecord = this.actionables.item(target);\n\t\n\t\t\t\t\tif (record) {\n\t\t\t\t\t\t_event.targetScope = this;\n\t\t\t\t\t\tthis.event = _event;\n\t\t\t\t\t\t_evalAction2['default'](record.action, this);\n\t\t\t\t\t\tthis.event = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tfunction getRecordBy(_key, _member, _collection) {\n\t\t\tvar i, record;\n\t\n\t\t\tif (_collection) {\n\t\t\t\tfor (i = 0; record = _collection[i]; i += 1) {\n\t\t\t\t\tif (record[_key] === _member) return record;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t}\n\t\n\t\tfunction removeRecord(_record, _collection) {\n\t\t\tvar index;\n\t\n\t\t\tindex = _collection.indexOf(_record);\n\t\t\tif (~index) _collection.splice(index, 1);\n\t\t}\n\t\n\t\tfunction captureDropables(_scope) {\n\t\t\tvar collection;\n\t\n\t\t\tcollection = [];\n\t\n\t\t\t_scope.find('> [pl-pluck]').each(function () {\n\t\t\t\tvar name;\n\t\n\t\t\t\tname = $(this).attr('pl-pluck');\n\t\n\t\t\t\tcollection.push(this);\n\t\t\t\tcollection[name] = this;\n\t\t\t});\n\t\n\t\t\treturn collection;\n\t\t}\n\t\n\t\tfunction pluckAndDrop(_dropables, _template) {\n\t\t\t$(_template).find('[pl-drop]').each(function () {\n\t\t\t\tvar $node, name, dropable;\n\t\n\t\t\t\t$node = $(this);\n\t\t\t\tname = $node.attr('pl-drop');\n\t\t\t\tdropable = _dropables[name];\n\t\n\t\t\t\tif (dropable) {\n\t\t\t\t\t$node.replaceWith(dropable.children);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\t// Protected\n\t\tfunction loadComponentAssets(_name, _callback) {\n\t\t\tvar scope, path, totalRequests, transcludeMode, dropables;\n\t\n\t\t\tfunction ready() {\n\t\t\t\tready.status += 1;\n\t\n\t\t\t\tif (ready.status === totalRequests) {\n\t\t\t\t\tif (_callback) {\n\t\t\t\t\t\t_callback.call(scope, _name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\ttotalRequests = 0;\n\t\t\tscope = this;\n\t\t\tpath = _playGame2['default'].config('componentDirectory') + _name + '/';\n\t\t\tdropables = captureDropables(this);\n\t\t\ttranscludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n\t\t\tready.status = 0;\n\t\n\t\t\tif (!this.children().length || transcludeMode) {\n\t\t\t\ttotalRequests += 1;\n\t\t\t\t$('<div>').load(path + 'template.html', function () {\n\t\t\t\t\tvar memory;\n\t\n\t\t\t\t\tmemory = [];\n\t\n\t\t\t\t\tswitch (transcludeMode) {\n\t\t\t\t\t\tcase scope.TRANSCLUDE_APPEND:\n\t\t\t\t\t\t\tscope.append(this.children);\n\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\tcase scope.TRANSCLUDE_PREPEND:\n\t\t\t\t\t\t\tscope.prepend(this.children);\n\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\tcase scope.TRANSCLUDE_PLUCK:\n\t\t\t\t\t\t\tpluckAndDrop(dropables, this);\n\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\tcase scope.TRANSCLUDE_REPLACE:\n\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (transcludeMode) {\n\t\t\t\t\t\t\t\tpluckAndDrop(new function () {\n\t\t\t\t\t\t\t\t\tthis[transcludeMode] = scope.node();\n\t\t\t\t\t\t\t\t}(), this);\n\t\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tscope.findOwn('[pl-component]').each(function () {\n\t\t\t\t\t\tvar name;\n\t\n\t\t\t\t\t\tname = $(this).attr('pl-component');\n\t\n\t\t\t\t\t\tif (~memory.indexOf(name)) return;\n\t\n\t\t\t\t\t\tmemory.push(name);\n\t\n\t\t\t\t\t\ttotalRequests += 1;\n\t\n\t\t\t\t\t\t_playGame2['default'].component.load(name, function () {\n\t\t\t\t\t\t\tready();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tready();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tif (!$('style[pl-for-component=\"' + _name + '\"]').length && _playGame2['default'].config('shouldLoadComponentStyles') !== false) {\n\t\t\t\ttotalRequests += 1;\n\t\t\t\t$('<style type=\"text/css\" pl-for-component=\"' + _name + '\">').load(path + 'style.css', ready).appendTo(document.body);\n\t\t\t}\n\t\n\t\t\tif (!totalRequests) _callback && _callback.call(this, _name);\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction captureProperties() {\n\t\t\tvar i, attr, name, collection;\n\t\n\t\t\tcollection = (function () {\n\t\n\t\t\t\tthis.has = function (_name) {\n\t\t\t\t\treturn !! ~this.indexOf(_name);\n\t\t\t\t};\n\t\n\t\t\t\treturn this;\n\t\t\t}).call([]);\n\t\n\t\t\tfor (i = 0; attr = this.$els[0].attributes[i]; i += 1) {\n\t\t\t\t// I explicitly want it to be at the beginning.\n\t\t\t\tif (attr.name.indexOf('pl-') === 0) {\n\t\t\t\t\tname = attr.name.slice(3);\n\t\t\t\t\tcollection[_util2['default'].transformId(name, true)] = attr.value;\n\t\n\t\t\t\t\tcollection.push(name);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (collection.length) this.properties = collection;\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction initializeEntities() {\n\t\t\tif (!this.hasOwnProperty('entities')) return this;\n\t\n\t\t\tthis.entities.forEach(this.bind(function (_record, _index) {\n\t\t\t\tvar $nodes, query, index;\n\t\n\t\t\t\t$nodes = this.findOwn(_record.selector);\n\t\t\t\tquery = ['#' + _record.selector, '[pl-id=' + _record.selector + ']', '[pl-component=' + _record.selector + ']', '[pl-' + _record.selector + ']'];\n\t\t\t\tindex = 0;\n\t\n\t\t\t\twhile (!$nodes.length) {\n\t\t\t\t\tif (index === query.length) {\n\t\t\t\t\t\tthrow new Error(\"Unable to locate entity with selector\", _record.selector);\n\t\t\t\t\t}\n\t\t\t\t\t$nodes = this.findOwn(query[index]);\n\t\t\t\t\tindex += 1;\n\t\t\t\t}\n\t\n\t\t\t\t$nodes.each(this.bind(function (_index, _node) {\n\t\t\t\t\tvar $node, instance, id;\n\t\n\t\t\t\t\t$node = $(_node);\n\t\n\t\t\t\t\tif (!Scope.isPrototypeOf(_record)) {\n\t\t\t\t\t\tinstance = createEntity.call(this, $node, _record.implementation);\n\t\t\t\t\t\tif (!instance.isReady) this.assetQueue.add(instance);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinstance = _record;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tid = _util2['default'].transformId(instance.id(), true);\n\t\t\t\t\tif (id) _util2['default'].assignRef(this, id, instance);\n\t\t\t\t}));\n\t\t\t}));\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction handleProperties() {\n\t\t\tvar scope, property, handler;\n\t\n\t\t\tscope = this;\n\t\n\t\t\tif (this.hasOwnProperty('properties')) {\n\t\t\t\tthis.properties.forEach(function (_name) {\n\t\t\t\t\thandler = scope.propertyHandlers[_name];\n\t\t\t\t\tif (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tif (this.propertyHandlers) {\n\t\t\t\tfor (property in this.propertyHandlers) {\n\t\t\t\t\t// Only exclide members on the base type.\n\t\t\t\t\tif (_typesBasic2['default'].hasOwnProperty(property)) continue;\n\t\n\t\t\t\t\thandler = this.propertyHandlers[property];\n\t\n\t\t\t\t\tthis.findOwn('[pl-' + property + ']').each(function () {\n\t\t\t\t\t\tvar attr;\n\t\n\t\t\t\t\t\tif (scope === $(this).scope()) {\n\t\t\t\t\t\t\tattr = this.attributes.getNamedItem('pl-' + property);\n\t\n\t\t\t\t\t\t\tif (handler) handler.call(scope, this, property, attr.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction invokeLocal(_name) {\n\t\t\tvar args, owner;\n\t\n\t\t\targs = [].slice.call(arguments, 1);\n\t\n\t\t\tif (this.isMemberSafe(_name)) {\n\t\t\t\treturn this[_name].apply(this, arguments);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction init() {\n\t\t\tvar willInitEvent, initEvent;\n\t\n\t\t\tinitEvent = $.Event('initialize', { targetScope: this });\n\t\t\twillInitEvent = $.Event('will-initialize', { targetScope: this });\n\t\n\t\t\tinvokeLocal.call(this, 'willInit');\n\t\t\tthis.trigger(willInitEvent);\n\t\n\t\t\tthis.attachEvents();\n\t\n\t\t\tinitializeEntities.call(this);\n\t\t\thandleProperties.call(this);\n\t\n\t\t\tthis.watchAssets();\n\t\t\tthis.captureAudioAssets();\n\t\t\tthis.captureReferences();\n\t\n\t\t\tthis.__init();\n\t\t\tinvokeLocal.call(this, 'init');\n\t\n\t\t\tthis.trigger(initEvent);\n\t\n\t\t\tif (!this.isReady) this.assetQueue.ready();\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction ready() {\n\t\t\tvar readyEvent, entities;\n\t\n\t\t\treadyEvent = $.Event('ready', { targetScope: this });\n\t\t\tentities = this.findOwn('.pl-scope').scope();\n\t\n\t\t\tif (entities) {\n\t\t\t\tif (entities.length > 0) {\n\t\t\t\t\tthis.entities = entities;\n\t\t\t\t} else {\n\t\t\t\t\tthis.entities = [entities];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Sort audio into DOM order.\n\t   * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n\t   */\n\t\t\tif (this.hasOwnProperty('audio')) {\n\t\t\t\t(this.game || this).media.addShadow(this.audio);\n\t\t\t\tthis.audio.collections().forEach((function (_collection) {\n\t\t\t\t\tvar map = {\n\t\t\t\t\t\tvoiceOver: 'voice-over',\n\t\t\t\t\t\tbackground: 'background',\n\t\t\t\t\t\tsfx: 'sfx'\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (!_collection.length) return;\n\t\n\t\t\t\t\tthis.findOwn('audio.' + map[_collection.type]).each(function (_index, _node) {\n\t\t\t\t\t\tvar id, audio, collection, index;\n\t\n\t\t\t\t\t\tid = $(_node).id();\n\t\t\t\t\t\taudio = (_collection.find('#' + id) || [])[0];\n\t\t\t\t\t\tindex = _collection.indexOf(audio);\n\t\n\t\t\t\t\t\tif (index !== _index) {\n\t\t\t\t\t\t\t_collection[index] = _collection[_index];\n\t\t\t\t\t\t\t_collection[_index] = audio;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).bind(this));\n\t\t\t}\n\t\n\t\t\tthis.isReady = true;\n\t\t\tthis.addClass('READY');\n\t\n\t\t\tthis.__ready();\n\t\t\tinvokeLocal.call(this, 'ready');\n\t\n\t\t\tthis.trigger(readyEvent);\n\t\t}\n\t\n\t\tActionables = (function () {\n\t\n\t\t\t_util2['default'].mixin(this, _typesBasic2['default']);\n\t\n\t\t\tthis.add = function (_node, _action) {\n\t\t\t\tif (!this.has(_node)) {\n\t\t\t\t\tthis.push({\n\t\t\t\t\t\tnode: _node,\n\t\t\t\t\t\taction: _action\n\t\t\t\t\t});\n\t\t\t\t}\n\t\n\t\t\t\treturn this;\n\t\t\t};\n\t\n\t\t\tthis.remove = function (_node) {\n\t\t\t\tvar item, index;\n\t\n\t\t\t\titem = this.item(_node);\n\t\t\t\tindex = this.indexOf(item);\n\t\t\t\tif (~index) this.splice(index, 1);\n\t\n\t\t\t\treturn this;\n\t\t\t};\n\t\n\t\t\tthis.item = function (_node) {\n\t\t\t\tvar i, item;\n\t\n\t\t\t\tfor (i = 0; item = this[i]; i += 1) {\n\t\t\t\t\tif (item.node === _node) return item;\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.has = function (_node) {\n\t\t\t\treturn !!this.item(_node);\n\t\t\t};\n\t\n\t\t\treturn this;\n\t\t}).call([]);\n\t\n\t\tthis.TRANSCLUDE_REPLACE = 'replace';\n\t\tthis.TRANSCLUDE_PREPEND = 'prepend';\n\t\tthis.TRANSCLUDE_APPEND = 'append';\n\t\tthis.TRANSCLUDE_PLUCK = 'pluck';\n\t\n\t\tthis.baseType = 'TYPE_SCOPE';\n\t\tthis.actionables = null;\n\t\tthis.isReady = null;\n\t\tthis.isComponent = false;\n\t\tthis.entities = null;\n\t\tthis.audio = null;\n\t\tthis.properties = null;\n\t\tthis.propertyHandlers = null;\n\t\tthis.assetQueue = null;\n\t\tthis.event = null;\n\t\tthis.currentMedia = {};\n\t\n\t\tthis.initialize = function (_node_selector, _componentName) {\n\t\t\tvar scope;\n\t\n\t\t\tscope = this;\n\t\n\t\t\tthis.isReady = false;\n\t\t\tthis.isComponent = !!_componentName;\n\t\t\tthis.event = null;\n\t\t\tthis.assetQueue = _typesQueue2['default'].create();\n\t\t\tthis.$els = _node_selector.jquery ? _node_selector : $(_node_selector);\n\t\n\t\t\tif (!this.$els.length) {\n\t\t\t\tthrow new ReferenceError('Unable to locate the element with selector ' + this.$els.selector + '.');\n\t\t\t}\n\t\n\t\t\tthis.addClass('pl-scope ' + (_componentName ? _componentName + '-component' : ''));\n\t\t\tthis.data('pl-scope', this);\n\t\t\tthis.data('pl-isComponent', !!_componentName);\n\t\n\t\t\tcaptureProperties.call(this);\n\t\n\t\t\tif (_componentName) {\n\t\t\t\tloadComponentAssets.call(this, _componentName, function () {\n\t\t\t\t\tinit.call(this);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinit.call(this);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t// only for use in base types\n\t\tthis.__init = function () {\n\t\t\treturn this;\n\t\t};\n\t\tthis.__ready = function () {\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.willInit = function () {\n\t\t\treturn this;\n\t\t};\n\t\tthis.init = function () {\n\t\t\treturn this;\n\t\t};\n\t\tthis.ready = function () {\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.watchAssets = function (_nodes) {\n\t\t\tvar createHandler, watch;\n\t\n\t\t\tcreateHandler = this.bind(function (_node) {\n\t\t\t\treturn (function () {\n\t\t\t\t\tvar loadedEvent = $.Event('loaded', { targetScope: this });\n\t\n\t\t\t\t\tthis.assetQueue.ready(_node.src);\n\t\t\t\t\tthis.trigger(loadedEvent, [_node]);\n\t\n\t\t\t\t\t_node.onload = null;\n\t\t\t\t}).bind(this);\n\t\t\t});\n\t\n\t\t\twatch = this.bind(function (_index, _node) {\n\t\t\t\tvar node = typeof _index === 'number' ? _node : _index;\n\t\n\t\t\t\tif (node.nodeName !== 'IMG' || node.complete) return;\n\t\t\t\tif (this.assetQueue.add(node.src)) {\n\t\t\t\t\tnode.onload = createHandler(node);\n\t\t\t\t\tnode.onerror = function () {\n\t\t\t\t\t\tconsole.error('Image failed to load', node.src);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tif (_nodes) {\n\t\t\t\t_nodes.forEach(watch);\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\tthis.each(watch);\n\t\t\tthis.findOwn('img').each(watch);\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.attachEvents = function () {\n\t\n\t\t\tthis.proto();\n\t\n\t\t\tthis.assetQueue.on('complete', this.bind(function () {\n\t\t\t\tthis.assetQueue.off();\n\t\t\t\tready.call(this);\n\t\t\t}));\n\t\n\t\t\tthis.on('ready', function (_event) {\n\t\t\t\tif (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n\t\t\t\t\tthis.assetQueue.ready(_event.targetScope);\n\t\t\t\t}\n\t\n\t\t\t\tif (!this.assetQueue.length && this.isReady) this.off('ready');\n\t\t\t});\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.captureReferences = function () {\n\t\t\tthis.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n\t\t\t\tvar $node, id;\n\t\n\t\t\t\tif (_node.nodeName === 'AUDIO') return;\n\t\n\t\t\t\t$node = $(_node);\n\t\t\t\tid = $node.attr('id') || $node.attr('pl-id');\n\t\n\t\t\t\tif (!this[id]) {\n\t\t\t\t\t_util2['default'].assignRef(this, id, $node.data('pl-scope') || $node);\n\t\t\t\t}\n\t\t\t}));\n\t\t};\n\t\n\t\tthis.captureAudioAssets = function () {\n\t\t\tvar deQ, $audio;\n\t\n\t\t\tif (!($audio = this.findOwn('audio')).length) return false;\n\t\n\t\t\tdeQ = (function (_item) {\n\t\t\t\t[this, this.screen].forEach(function (_scope) {\n\t\t\t\t\tif (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n\t\t\t\t\t\t_scope.requiredQueue.ready(_item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).bind(this);\n\t\n\t\t\tthis.audio = _typesAudioManager.AudioManager.create(this.id());\n\t\n\t\t\t$audio.each((function (_index, _node) {\n\t\t\t\tthis.assetQueue.add(_node.src);\n\t\t\t\tthis.audio.watch(_node).then((function (_audio) {\n\t\t\t\t\tvar loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\t\n\t\t\t\t\tif ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\t\n\t\t\t\t\tif (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\t\n\t\t\t\t\tthis.trigger(loadedEvent);\n\t\t\t\t}).bind(this));\n\t\t\t}).bind(this));\n\t\n\t\t\t// proxy events\n\t\t\tthis.audio.on('play pause ended stopped', this.bind(function (_event) {\n\t\t\t\tvar map = {\n\t\t\t\t\tbackground: 'BACKGROUND',\n\t\t\t\t\tvoiceOver: 'VOICE-OVER',\n\t\t\t\t\tsfx: 'SFX'\n\t\t\t\t};\n\t\n\t\t\t\tswitch (_event.type) {\n\t\t\t\t\tcase 'play':\n\t\t\t\t\t\t[this, this.screen].forEach(function (_scope, _index, _set) {\n\t\t\t\t\t\t\tif (_index === 1 && _scope === _set[0]) return;\n\t\t\t\t\t\t\tif (_scope.$els) {\n\t\t\t\t\t\t\t\t_scope.addClass('PLAYING ' + map[_event.target.type]);\n\t\t\t\t\t\t\t\t_scope.currentMedia[map[_event.target.type]] = _event.target;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t$(_event.targetNode).addClass('PLAYING');\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 'pause':\n\t\t\t\t\tcase 'stopped':\n\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t[this, this.screen].forEach(function (_scope, _index, _set) {\n\t\t\t\t\t\t\tvar state;\n\t\n\t\t\t\t\t\t\tif (_index === 1 && _scope === _set[0]) return;\n\t\n\t\t\t\t\t\t\tif (_scope.$els) {\n\t\t\t\t\t\t\t\t_scope.removeClass(map[_event.target.type]);\n\t\t\t\t\t\t\t\tstate = _scope.attr('class');\n\t\t\t\t\t\t\t\tif (!/BACKGROUND|VOICE-OVER|SFX/.test(state)) _scope.removeClass('PLAYING');\n\t\t\t\t\t\t\t\tif (_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t$(_event.targetNode).removeClass('PLAYING');\n\t\t\t\t\t\tif (_event.type === 'ended') deQ(_event.target);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\tvar audioEvent = $.Event('audio-' + _event.type, {\n\t\t\t\t\ttarget: _event.target,\n\t\t\t\t\ttargetSource: _event.targetSource,\n\t\t\t\t\ttargetNode: _event.targetNode,\n\t\t\t\t\ttargetScope: this\n\t\t\t\t});\n\t\n\t\t\t\tthis.trigger(audioEvent);\n\t\t\t}));\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.handleProperty = function (_implementation) {\n\t\t\tif (this.propertyHandlers) {\n\t\t\t\tif (this.hasOwnProperty('propertyHandlers')) {\n\t\t\t\t\tswitch (typeof _implementation) {\n\t\t\t\t\t\tcase 'function':\n\t\t\t\t\t\t\t_implementation.call(this.propertyHandlers);\n\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\tcase 'object':\n\t\t\t\t\t\t\tthis.propertyHandlers.mixin(_implementation);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.propertyHandlers = this.propertyHandlers.extend(_implementation);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.propertyHandlers = _typesBasic2['default'].extend(_implementation);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.entity = function (_selector, _implementation) {\n\t\t\tvar Entity, prototype, id;\n\t\n\t\t\tEntity = _playGame2['default'].provideEntityType();\n\t\n\t\t\tif (!this.hasOwnProperty('entities')) this.entities = [];\n\t\n\t\t\tif (this.hasOwnProperty('$els')) {\n\t\t\t\tthrow new Error('Wait this hasn\\'t been tested.');\n\t\t\t\tprototype = Entity.isPrototypeOf(this) ? this : Entity;\n\t\t\t\tinstance = prototype.extend(_implementation).initialize(this.find(_selector));\n\t\t\t\tid = _util2['default'].transformId(instance.id());\n\t\n\t\t\t\t// this.entities.push(instance);\n\t\t\t\tif (id) this[id] = instance;\n\t\t\t} else {\n\t\t\t\tthis.entities.push({\n\t\t\t\t\tselector: _selector,\n\t\t\t\t\timplementation: _implementation\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.has = function (_child) {\n\t\t\tvar child;\n\t\n\t\t\tchild = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\t\n\t\t\treturn !!this.$els.has(child).length;\n\t\t};\n\t\n\t\tthis.toString = function () {\n\t\t\tvar type;\n\t\n\t\t\ttype = this.baseType.replace('TYPE_', '');\n\t\t\ttype = type.slice(0, 1) + type.slice(1).toLowerCase();\n\t\n\t\t\treturn ['[', this.id() || this.address(), ' ', type, ']'].join('');\n\t\t};\n\t\n\t\tthis.log = function () {\n\t\t\tvar args;\n\t\n\t\t\targs = _util2['default'].toArray(arguments);\n\t\n\t\t\tconsole.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.handleProperty(function () {\n\t\n\t\t\tthis.component = function (_node, _name, _value, _property) {\n\t\t\t\tvar $node, record, scope, id;\n\t\n\t\t\t\t$node = $(_node);\n\t\n\t\t\t\tif (!$node.data('pl-isComponent')) {\n\t\t\t\t\trecord = _playGame2['default'].component.get(_value);\n\t\n\t\t\t\t\tif (record) {\n\t\t\t\t\t\tscope = createEntity.call(this, $node, record.implementation);\n\t\t\t\t\t\tid = _util2['default'].transformId(scope.id() || _value, true);\n\t\t\t\t\t\t_util2['default'].assignRef(this, id, scope);\n\t\n\t\t\t\t\t\tif (!scope.isReady) this.assetQueue.add(scope);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Ahh!');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.action = function (_node, _name, _value) {\n\t\t\t\tif (!this.hasOwnProperty('actionables')) {\n\t\t\t\t\tthis.actionables = Actionables.create();\n\t\t\t\t\tattachActionHandler.call(this);\n\t\t\t\t}\n\t\n\t\t\t\tthis.actionables.add(_node, _value);\n\t\t\t};\n\t\n\t\t\tthis.required = function (_node, _name, _value) {\n\t\t\t\tif (this.is(_node)) {\n\t\t\t\t\tthis.screen.require(this);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.require = function (_node, _name, _value) {\n\t\t\t\tvar query, $node;\n\t\n\t\t\t\t// if the node with the attribute is the node for this scope\n\t\t\t\tif (this.is(_node)) {\n\t\t\t\t\tquery = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n\t\t\t\t\t$node = this.find(query);\n\t\n\t\t\t\t\t$node.on('ready', this.bind(function (_event) {\n\t\t\t\t\t\tif ($node.is(_event.target)) {\n\t\t\t\t\t\t\tthis.require(_event.targetScope);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t});\n\t\n\texports['default'] = { Scope: Scope, createEntity: createEntity };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  jQProxy\n\t*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n\t*  @proto Basic\n\t*  \n\t*  NOTE: Custom events may trigger on scopes\n\t*  that also targets the same elments. Testing needed.\n\t*/\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesBasic = __webpack_require__(19);\n\t\n\tvar _typesBasic2 = _interopRequireDefault(_typesBasic);\n\t\n\tvar jQProxy = _typesBasic2['default'].extend(function () {\n\t\tvar method, exclude;\n\t\n\t\t/**\n\t *  @desc Creates a function with a proxy to the jQuery method.\n\t *  @param _name (String) The name of the method being proxied.\n\t *  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t *  @private\n\t */\n\t\tfunction createProxyFunction(_name) {\n\t\t\treturn function () {\n\t\t\t\tvar response;\n\t\n\t\t\t\t// This makes sure your not calling any jQuery methods before initialization.\n\t\t\t\tif (!this.hasOwnProperty('$els')) {\n\t\t\t\t\tif (_name === 'on') {\n\t\t\t\t\t\tregisterHandler.call(this, arguments);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new ReferenceError('Unable to invoke ' + _name + ' because the scope is not initialized.');\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tresponse = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\t\n\t\t\t\tif (response === this.$els || response && response.jquery && response.is(this.$els)) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\n\t\t\t\treturn response;\n\t\t\t};\n\t\t}\n\t\n\t\tfunction resolveEventHandler(_scope, _method, _args) {\n\t\t\tvar i, arg, args;\n\t\n\t\t\targs = [];\n\t\n\t\t\tif (~['on', 'load'].indexOf(_method)) {\n\t\t\t\tfor (i = 0; arg = _args[i]; i += 1) {\n\t\t\t\t\tif (typeof arg === 'function') {\n\t\t\t\t\t\targs.push((function (_handler) {\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\treturn _handler.apply(_scope, arguments);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(arg));\n\t\t\t\t\t} else {\n\t\t\t\t\t\targs.push(arg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn args;\n\t\t\t}\n\t\n\t\t\treturn _args;\n\t\t}\n\t\n\t\tfunction registerHandler(_definition) {\n\t\t\tif (!this.hasOwnProperty('eventRegistry')) {\n\t\t\t\tif (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t\t\t\t\tthis.eventRegistry = this.eventRegistry.slice(0);\n\t\t\t\t} else {\n\t\t\t\t\tthis.eventRegistry = [];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.eventRegistry.push(_definition);\n\t\n\t\t\treturn true;\n\t\t}\n\t\n\t\t// We don't want jQuery methods overridding our base type's methods.\n\t\texclude = ['constructor'].concat(_Object$keys(_typesBasic2['default']));\n\t\n\t\tthis.baseType = 'TYPE_JQPROXY';\n\t\tthis.$els = null;\n\t\tthis.eventRegistry = null;\n\t\n\t\tfor (method in $.fn) {\n\t\t\tif (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n\t\t\tthis[method] = createProxyFunction(method);\n\t\t}\n\t\n\t\tthis.node = function () {\n\t\t\treturn this.$els[0];\n\t\t};\n\t\n\t\tthis.attachEvents = function () {\n\t\t\tvar self;\n\t\n\t\t\tself = this;\n\t\n\t\t\tif (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t\t\t\tthis.eventRegistry.forEach(function (_definition) {\n\t\t\t\t\tself.on.apply(self, _definition);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\tthis.listen = function (_name, _isCapure_handler, _handler) {\n\t\t\tvar _isCapture, node, handler;\n\t\n\t\t\t_isCapture = false;\n\t\n\t\t\t// resolve arguments\n\t\t\ttypeof _isCapure_handler === 'boolean' ? _isCapture = _isCapure_handler : _handler = _isCapure_handler;\n\t\n\t\t\t_handler.cb = _handler.bind(this);\n\t\n\t\t\tif (this.$els) {\n\t\t\t\tnode = this.$els[0];\n\t\t\t\tif (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n\t\t\t} else {\n\t\t\t\treturn registerHandler([_name, _handler.cb, _isCapture]);\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t};\n\t\n\t\tthis.ignore = function (_name, _handler) {\n\t\t\tvar node = this.$els && this.$els[0];\n\t\n\t\t\tif (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\t\n\t\t\treturn false;\n\t\t};\n\t\n\t\t// Wraps you function 'this' to the scope.\n\t\t//\n\t\tthis.bind = function (_handler) {\n\t\t\tvar args;\n\t\n\t\t\targs = [].map.call(arguments, function (m) {\n\t\t\t\treturn m;\n\t\t\t}).slice(1);\n\t\n\t\t\treturn _handler.bind.apply(_handler, [this].concat(args));\n\t\t};\n\t\n\t\tthis.findOwn = function (_selector) {\n\t\t\treturn this.find(_selector).filter(this.bind(function (_index, _node) {\n\t\t\t\tvar $node;\n\t\n\t\t\t\t$node = $(_node);\n\t\n\t\t\t\tif ($node.hasClass('pl-scope')) {\n\t\t\t\t\treturn $node.parent().scope() === this;\n\t\t\t\t}\n\t\n\t\t\t\treturn $node.scope() === this;\n\t\t\t}));\n\t\t};\n\t\n\t\tthis.isMemberSafe = function (_name) {\n\t\t\tvar owner, elOwner, prototype;\n\t\n\t\t\tif (this.hasOwnProperty(_name)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tprototype = Object.getPrototypeOf(this);\n\t\t\t\towner = _util2['default'].getOwner(this, this[_name]);\n\t\n\t\t\t\tif (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\t\n\t\t\t\tif (prototype.$els) {\n\t\t\t\t\telOwner = _util2['default'].getOwner(prototype, prototype.$els);\n\t\n\t\t\t\t\tif (owner.object.isPrototypeOf(elOwner.object)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\treturn true;\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t};\n\t\n\t\tthis.is = function (_obj) {\n\t\t\tif (!_obj) return false;\n\t\t\tif (_obj.$els) return this.$els.is(_obj.$els);\n\t\n\t\t\treturn this.$els.is(_obj);\n\t\t};\n\t});\n\t\n\texports['default'] = jQProxy;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(34), __esModule: true };\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(35);\n\tmodule.exports = __webpack_require__(11).Object.keys;\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 19.1.2.14 Object.keys(O)\n\tvar toObject = __webpack_require__(36);\n\t\n\t__webpack_require__(38)('keys', function($keys){\n\t  return function keys(it){\n\t    return $keys(toObject(it));\n\t  };\n\t});\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.13 ToObject(argument)\n\tvar defined = __webpack_require__(37);\n\tmodule.exports = function(it){\n\t  return Object(defined(it));\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t// 7.2.1 RequireObjectCoercible(argument)\n\tmodule.exports = function(it){\n\t  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n\t  return it;\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// most Object methods by ES6 should accept primitives\n\tvar $export = __webpack_require__(9)\n\t  , core    = __webpack_require__(11)\n\t  , fails   = __webpack_require__(39);\n\tmodule.exports = function(KEY, exec){\n\t  var fn  = (core.Object || {})[KEY] || Object[KEY]\n\t    , exp = {};\n\t  exp[KEY] = exec(fn);\n\t  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t*  Queue\n\t*  @desc Contains...\n\t*  @proto Array, Events, Basic\n\t*/\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesEvents = __webpack_require__(26);\n\t\n\tvar _typesEvents2 = _interopRequireDefault(_typesEvents);\n\t\n\tvar Queue = _typesCollection2['default'].extend(function () {\n\t\n\t\tthis.baseType = 'TYPE_QUEUE';\n\t\n\t\tthis.ready = function (_record) {\n\t\t\tif (_record != null) this.remove(_record);\n\t\n\t\t\tif (!this.length) {\n\t\t\t\tthis.trigger('complete');\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t_util2['default'].mixin(this, _typesEvents2['default']);\n\t\n\t\treturn this;\n\t});\n\t\n\texports['default'] = Queue;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\texports.__esModule = true;\n\t/**\n\t * @module evalAction\n\t */\n\t\n\t/**\n\t * Performs `eval()` on the value of an `action` attribute on an HTML element.\n\t * @arg {string} _source - JavaScript source code.\n\t * @arg {Scope} _scope - The context in which to run the source.\n\t * @returns {*} The result of the evaluated source.\n\t */\n\tfunction evalAction(_source, _scope) {\n\t\tvar error;\n\t\n\t\tfunction target(_selector) {\n\t\t\tif (_scope.event) {\n\t\t\t\treturn _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n\t\t\t}\n\t\t}\n\t\n\t\t// expose members of the object as if they were local variables.\n\t\t// NOTE: methods still retain their \"this\" binding to the object! :D\n\t\treturn eval(\"with (_scope) { try {\" + _source + \";} catch (error) { console.error('Error:', error.message, 'evaluating action', _source, 'in', _scope.id() || _scope.address()); } }\");\n\t}\n\t\n\texports[\"default\"] = evalAction;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Promise = __webpack_require__(43)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t\n\t/**\n\t * Contains classes for managing different media types.\n\t * Providing an API for referencing and control.\n\t * @module\n\t * @author Micah Rolon <micah@ginasink.com>\n\t */\n\t\n\tvar _typesType = __webpack_require__(90);\n\t\n\tvar _typesType2 = _interopRequireDefault(_typesType);\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\t// Object type definitions are using  `$` as the augmentation method for Types.\n\t\"use strict\";var EventTargetInterface,\n\t    InspectorInterface,\n\t    PlayableInterface,\n\t    LegislatorInterface,\n\t    StateInterface,\n\t    $$ = window.jQuery;\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n\t * Manages any playing media (Audio, Video).\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Manages any playing media (Audio, Video).\n\t * <style>\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t * \n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t */\n\tfunction MediaManager($, sup) {\n\t\t/**\n\t  * Duck typed multiple inheritance.\n\t  */\n\t\t_util2['default'].mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t\t$('video', function alloc(_id) {\n\t\t\tsup(this, 'alloc', arguments);\n\t\t\tthis.video = _typesCollection2['default'].create();\n\t\t\tthis.initialize(_id, 'media manager');\n\t\t});\n\t}\n\t\n\t/**\n\t * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n\t * - Background\n\t * - Voice Over\n\t * - SFX (Sound Effects)\n\t * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n\t * @class\n\t * @prop {type} member - Text.\n\t * @extends EventTargetInterface\n\t * @extends PlayableInterface\n\t * @extends InspectorInterface\n\t */\n\tfunction AudioManager($) {\n\t\tvar AUDIO_TYPES, BUFFER_CACHE;\n\t\n\t\t/**\n\t  * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n\t  * @arg {HTMLAudioElement} _node - The loaded audio element.\n\t  * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n\t  */\n\t\tfunction AudioBufferRecord(_node, _buffer) {\n\t\t\tthis.node = _node;\n\t\t\tthis.type = getAudioType(_node);\n\t\t\tthis.buffer = _buffer;\n\t\t}\n\t\t/**\n\t  * Provides the classification an audio element falls into.\n\t  * - Background (`background`)\n\t  * - Voice Over (`voiceOver`)\n\t  * - Sound Effects (`sfx`)\n\t  * @protected\n\t  * @arg {HTMLAudioElement} _audio - The audio element.\n\t  * @returns {string} - The type.\n\t  */\n\t\tfunction getAudioType(_audio) {\n\t\t\treturn _util2['default'].transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n\t\t}\n\t\t/**\n\t  * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n\t  * @protected\n\t  * @arg {HTMLAudioElement} _audio - The audio element.\n\t  * @returns {Promise}\n\t  */\n\t\tfunction loadArrayBuffer(_audio) {\n\t\t\tvar xhr, manager, fileName;\n\t\n\t\t\txhr = new (XMLHttpRequest || _util2['default'].noop)();\n\t\t\tmanager = this;\n\t\t\tfileName = _util2['default'].resolveFileName(_audio.src);\n\t\n\t\t\tif (!xhr.open) _Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\t\n\t\t\treturn new _Promise(function (resolve, reject) {\n\t\t\t\tvar cache = BUFFER_CACHE[fileName];\n\t\n\t\t\t\t// Decodes ArrayBuffer into an AudioBuffer.\n\t\t\t\tfunction onLoad() {\n\t\t\t\t\tvar ctx, promise;\n\t\n\t\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\t\tif (ctx = pl.game.getAudioContext()) {\n\t\t\t\t\t\t\tpromise = new _Promise(function (resolveDecoding, rejectDecoding) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tctx.decodeAudioData(xhr.response, function (_buffer) {\n\t\t\t\t\t\t\t\t\t\tvar audio = manager.collect(new AudioBufferRecord(_audio, _buffer));\n\t\n\t\t\t\t\t\t\t\t\t\tresolveDecoding(audio);\n\t\t\t\t\t\t\t\t\t\t// Cache the AudioBuffer to resolve duplicates.\n\t\t\t\t\t\t\t\t\t\tBUFFER_CACHE[fileName] = _buffer;\n\t\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\t\trejectDecoding(\"Failed to decode ArrayBuffer for \" + fileName + \".\");\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\trejectDecoding(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t\tpromise.then(resolve)['catch'](reject);\n\t\n\t\t\t\t\t\t\treturn promise;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(xhr.statusText);\n\t\t\t\t\t}\n\t\n\t\t\t\t\txhr.removeEventListener('load', onLoad);\n\t\t\t\t\txhr = null;\n\t\t\t\t}\n\t\n\t\t\t\tfunction onError() {\n\t\t\t\t\treject(xhr.statusText);\n\t\t\t\t\txhr.removeEventListener('error', onError);\n\t\t\t\t\txhr = null;\n\t\t\t\t}\n\t\n\t\t\t\tif (cache && cache !== 'loading') return resolve(manager.collect(new AudioBufferRecord(_audio, cache)));\n\t\n\t\t\t\tBUFFER_CACHE[fileName] = 'loading';\n\t\n\t\t\t\txhr.responseType = 'arraybuffer';\n\t\n\t\t\t\txhr.addEventListener('load', onLoad, false);\n\t\t\t\txhr.addEventListener('error', onError, false);\n\t\t\t\txhr.open('GET', _audio.src, true);\n\t\t\t\txhr.send();\n\t\t\t});\n\t\t}\n\t\t/**\n\t  * The CSS class names reconized as audio types.\n\t  */\n\t\tAUDIO_TYPES = /background|voice-over|sfx/i;\n\t\tBUFFER_CACHE = {};\n\t\t/**\n\t  * Duck typed multiple inheritance.\n\t  */\n\t\t_util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\t\n\t\t// A little ugg but define instance members.\n\t\t$(\n\t\t// Declare properties.\n\t\t'background, voiceOver, sfx, scope',\n\t\n\t\t/**\n\t  * Define instance properties.\n\t  */\n\t\tfunction alloc(_id) {\n\t\t\tthis.initialize(_id, 'audio manager');\n\t\n\t\t\t['background', 'voiceOver', 'sfx'].forEach((function (_type) {\n\t\t\t\tvar collection = this[_type] = AudioCollection.create(_type);\n\t\t\t\tthis.addShadow(collection);\n\t\t\t}).bind(this));\n\t\t},\n\t\n\t\t/**\n\t  * Given an audio element begin loading the asset.\n\t  * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t  * @returns {Promise}\n\t  * @todo Support loading from node source or a string argument. - Micah:2/19/16\n\t  */\n\t\tfunction load(_audio) {\n\t\t\tvar manager, type;\n\t\n\t\t\tmanager = this;\n\t\t\ttype = getAudioType(_audio);\n\t\n\t\t\tif (!type) return _Promise.reject(\"Audio is missing a type. Please classify as 'background', 'voiceOver' or 'sfx'.\");\n\t\t\t// if (~['sfx', 'voiceOver'].indexOf(type))\n\t\t\treturn loadArrayBuffer.call(this, _audio);\n\t\n\t\t\t// return new Promise(function (resolve, reject) {\n\t\t\t// \t_audio.onloadeddata = function () { resolve(manager.collect(this)); };\n\t\t\t// \t_audio.onerror = reject;\n\t\t\t// \t_audio.load();\n\t\t\t// });\n\t\t},\n\t\n\t\t/**\n\t  * Begins loading an AudioElement waits for it to load.\n\t  * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t  * @returns {Promise}\n\t  */\n\t\tfunction watch(_audio) {\n\t\t\tvar promise;\n\t\n\t\t\tif (_audio.nodeName !== 'AUDIO') return _Promise.reject('Invalid type for audio node. ' + typeof _audio + ' [' + _audio.protoype.constructor.name + ' ' + _audio.nodeName + '].');\n\t\n\t\t\tfunction reject(_error) {\n\t\t\t\tvar scope = $$(_audio).scope();\n\t\t\t\tconsole.warn(scope.id(), '-', _error);\n\t\t\t}\n\t\n\t\t\t(promise = this.load(_audio))['catch'](reject.bind(this));\n\t\n\t\t\treturn promise;\n\t\t},\n\t\n\t\t/**\n\t  * Adds a audio to the collection. You may also pass an itterable of items to add.\n\t  * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n\t  * @returns {Promise}\n\t  */\n\t\tfunction collect(_audio) {\n\t\t\tvar type;\n\t\n\t\t\tif (!_audio) return false;\n\t\n\t\t\tif (_audio.length) {\n\t\t\t\treturn _audio.map(collect.bind(this));\n\t\t\t}\n\t\n\t\t\ttype = _audio.type || getAudioType(_audio);\n\t\n\t\t\tif (type && this[type]) return this[type].add(_audio);\n\t\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t  * Provides a collection of `AudioCollection` objects.\n\t  * @returns {array}\n\t  */\n\t\tfunction collections() {\n\t\t\tvar result, types;\n\t\n\t\t\tresult = [];\n\t\t\ttypes = _Object$keys(this);\n\t\n\t\t\ttypes.forEach((function (_type) {\n\t\t\t\tif (this[_type] instanceof AudioCollection) result.push(this[_type]);\n\t\t\t}).bind(this));\n\t\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t  * Proveds a string representation of the object type.\n\t  */\n\t\tfunction toString() {\n\t\t\treturn '[object ' + (this.constructor.name || 'Object') + ']';\n\t\t});\n\t}\n\t\n\t/**\n\t * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t *\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t * @extends Collection\n\t */\n\tfunction AudioCollection($, sup) {\n\t\t/**\n\t  * Duck typed multiple inheritance.\n\t  */\n\t\t_util2['default'].mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\t\n\t\t$('type', function alloc(_type) {\n\t\t\tif (_type) this.type = _type;\n\t\t\tthis.initialize(_type, 'collection');\n\t\t},\n\t\t/**\n\t  * Adds an Audio object to the collection.\n\t  * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n\t  * @override\n\t  * @returns {Audio}\n\t  */\n\t\tfunction add(_audio) {\n\t\t\tvar audio;\n\t\n\t\t\tif (!_audio) return false;\n\t\n\t\t\taudio = _audio instanceof Audio ? _audio : Audio.create(_audio, this.type);\n\t\n\t\t\tsup(this, 'add')(audio);\n\t\t\tthis.addShadow(audio);\n\t\t\tif (audio.id()) _util2['default'].assignRef(this, audio.id(), audio);\n\t\n\t\t\treturn audio;\n\t\t},\n\t\t/**\n\t  * Get the owning manager interface for an Audio object.\n\t  * @returns {AudioManager}\n\t  */\n\t\tfunction manager() {\n\t\t\treturn this.$el.closest('#man').data('context');\n\t\t},\n\t\t/**\n\t  * Proveds a string representation of the object type.\n\t  */\n\t\tfunction toString() {\n\t\t\treturn '[object ' + (this.constructor.name || 'Object') + ']';\n\t\t});\n\t}\n\t/**\n\t * Extend AudioCollection with Collection.\n\t */\n\tAudioCollection.prototype = _Object$create(_typesCollection2['default'], {\n\t\tconstructor: {\n\t\t\tvalue: AudioCollection,\n\t\t\tenumerable: false,\n\t\t\twriteable: false,\n\t\t\tconfigureable: false\n\t\t}\n\t});\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n\t * Returned as the result of some collection process.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc Returned as the result of some collection process.\n\t *\n\t * @class\n\t * @extends AudioCollection\n\t * @extends EventTargetInterface\n\t * @extends InspectorInterface\n\t * @extends LegislatorInterface\n\t * @extends StateInterface\n\t */\n\tfunction MediaCollection($, sup) {\n\t\t$(\n\t\t/**\n\t  * @override\n\t  */\n\t\tfunction add(_media) {\n\t\t\tthis.addShadow(_media);\n\t\t\tif (_media.id()) _util2['default'].assignRef(this, _media.id(), _media);\n\t\t\treturn _typesCollection2['default'].add.call(this, _media);\n\t\t},\n\t\t/**\n\t  * @override\n\t  */\n\t\tfunction addShadow(_media) {\n\t\t\tvar $clone;\n\t\n\t\t\t$clone = _media.$el.clone();\n\t\t\t$clone.data(_media.$el.data());\n\t\n\t\t\tthis.$el.append($clone);\n\t\t\treturn this;\n\t\t});\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n\t * An interface for controlling a MediaElement or AudioBuffer.\n\t * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n\t * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n\t */\n\tfunction Audio($) {\n\t\n\t\tfunction accessConfig(_augment, _val) {\n\t\t\tif (_val) {\n\t\t\t\treturn this[_augment] = _val;\n\t\t\t} else if (typeof _augment === 'string') {\n\t\t\t\treturn this[_augment];\n\t\t\t} else {\n\t\t\t\t_util2['default'].mixin(this, _augment);\n\t\t\t}\n\t\n\t\t\treturn _augment;\n\t\t}\n\t\n\t\t/**\n\t  * Duck typed multiple inheritance.\n\t  */\n\t\t_util2['default'].mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\t\n\t\t$('type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\t\n\t\t/**\n\t  * Allocates instance props.\n\t  * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n\t  * @arg {string} _type - The collection type.\n\t  */\n\t\tfunction alloc(_audio, _type) {\n\t\t\tvar $audio, config, ctx, readyEvent, id;\n\t\n\t\t\t$audio = $$(_audio.node || _audio);\n\t\t\tconfig = $audio.pl();\n\t\t\tctx = pl.game.getAudioContext();\n\t\t\treadyEvent = $$.Event('ready', { targetScope: this });\n\t\n\t\t\tif (!(id = $audio.id())) $audio.id(id = _util2['default'].createId());\n\t\n\t\t\tthis.type = _type || null;\n\t\t\tthis.fileName = _util2['default'].resolveFileName($audio.attr('src'));\n\t\t\tthis.media = $audio[0];\n\t\t\tthis.gain = ctx.createGain();\n\t\n\t\t\tthis.gain.connect(ctx.destination);\n\t\n\t\t\t$audio.data('context', this);\n\t\n\t\t\tif (_audio.buffer) this.buffer = _audio.buffer;\n\t\n\t\t\tObject.defineProperty(this, 'config', {\n\t\t\t\tvalue: accessConfig.bind(config),\n\t\t\t\twriteable: false\n\t\t\t});\n\t\n\t\t\tthis.initialize(id, 'audio ' + this.type);\n\t\n\t\t\t$$(this.media).trigger(readyEvent);\n\t\t},\n\t\t/**\n\t  * Provides an `AudioNode` for a particular audio source.\n\t  * @returns\n\t  *  - `MediaElementSouceNode` for audio elements.\n\t  *  - `AudioBufferSourceNode` for an ArrayBuffer.\n\t  */\n\t\tfunction getSource() {\n\t\t\tvar ctx, src;\n\t\n\t\t\tctx = this.audioContext || pl.game.getAudioContext();\n\t\n\t\t\tif (ctx) {\n\t\t\t\tif (this.buffer) {\n\t\t\t\t\tsrc = ctx.createBufferSource();\n\t\t\t\t\tsrc.buffer = this.buffer;\n\t\t\t\t\tsrc.loop = this.media.loop;\n\t\n\t\t\t\t\treturn src;\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn this.activeSource || ctx.createMediaElementSource(this.media);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(e.message, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn null;\n\t\t},\n\t\t/**\n\t  * Get the owning collection interface for an Audio object.\n\t  * @returns {AudioCollection}\n\t  */\n\t\tfunction collection() {\n\t\t\treturn this.$el.closest('.collection').data('context');\n\t\t},\n\t\t/**\n\t  * Get the owning manager interface for an Audio object.\n\t  * @returns {AudioManager}\n\t  */\n\t\tfunction manager() {\n\t\t\treturn this.$el.closest('#man').data('context');\n\t\t},\n\t\t/**\n\t  * Proveds a string representation of the object type.\n\t  */\n\t\tfunction toString() {\n\t\t\treturn '[audio#' + this.id() + ' ' + this.fileName + ']';\n\t\t}, function setContext(ctx) {\n\t\t\tthis.gain = ctx.createGain();\n\t\t\tthis.gain.disconnect();\n\t\t\tthis.gain.connect(ctx.destination);\n\t\t\tthis.audioContext = ctx;\n\t\t});\n\t}\n\t\n\t/**\n\t * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n\t * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n\t * That way you can listen for an event at any level of the interface.\n\t */\n\tEventTargetInterface = {\n\t\t/**\n\t  * The shadow node.\n\t  */\n\t\t$el: null,\n\t\t/**\n\t  * Define a node for the shadow DOM.\n\t  * @arg {string} _id - Idendifier for the node.\n\t  * @arg {string} _class - Classification of the node.\n\t  */\n\t\tinitialize: function initialize(_id, _class) {\n\t\t\tObject.defineProperty(this, '$el', {\n\t\t\t\tvalue: $$('<div ' + (_id ? 'id=\"' + _id + '\"' : '') + ' ' + (_class ? 'class=\"' + _class + '\"' : '') + '>'),\n\t\t\t\twriteable: false,\n\t\t\t\tconfigureable: false,\n\t\t\t\tenumerable: false\n\t\t\t});\n\t\n\t\t\tthis.$el.data('context', this);\n\t\t},\n\t\t/**\n\t  * Get/set the id of the interface.\n\t  * @arg {string} _id - A valid CSS ID.\n\t  */\n\t\tid: function id(_id) {\n\t\t\treturn this.$el.id(_id);\n\t\t},\n\t\t/**\n\t  * Add an interface to the shadow DOM.\n\t  * @arg {Audio|AudioCollection} _obj - The object to add.\n\t  * @returns this\n\t  */\n\t\taddShadow: function addShadow(_obj) {\n\t\t\tthis.$el.append(_obj.$el);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Provides the parent level interface.\n\t  * @returns {AudioManager|AudioCollection}\n\t  */\n\t\tparent: function parent() {\n\t\t\treturn this.$el.parent().data('context');\n\t\t},\n\t\t/**\n\t  * Find an interface in the API tree.\n\t  * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n\t  */\n\t\tfind: function find(_selector) {\n\t\t\tvar collection = MediaCollection.create();\n\t\n\t\t\tthis.$el.find(_selector).each(function () {\n\t\t\t\tcollection.add($$(this).data('context'));\n\t\t\t});\n\t\n\t\t\treturn collection;\n\t\t},\n\t\t/**\n\t  * \n\t  */\n\t\tfilter: function filter(_selector) {\n\t\t\tvar collection;\n\t\n\t\t\tif (!_selector) return this;\n\t\n\t\t\tcollection = MediaCollection.create();\n\t\n\t\t\tthis.$el.children().each(function () {\n\t\t\t\tvar $node = $$(this);\n\t\t\t\tif ($node.is(_selector)) collection.add($node.data('context'));\n\t\t\t});\n\t\n\t\t\treturn collection;\n\t\t},\n\t\t/**\n\t  * Attach events to a shadow node.\n\t  */\n\t\ton: function on() {\n\t\t\tthis.$el.on.apply(this.$el, arguments);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Remove events from a shadow node.\n\t  */\n\t\toff: function off() {\n\t\t\tthis.$el.off.apply(this.$el, arguments);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Dispatch a event from a shadow node.\n\t  */\n\t\ttrigger: function trigger() {\n\t\t\tthis.$el.trigger.apply(this.$el, arguments);\n\t\t\treturn this;\n\t\t}\n\t};\n\t/**\n\t * Interface for inspecting an API level (i.e. manager or collection).\n\t */\n\tInspectorInterface = {\n\t\tplaying: function playing(_filterSelector) {\n\t\t\tvar playing = this.find('.PLAYING').filter(_filterSelector);\n\t\t\treturn !!playing.length && playing;\n\t\t},\n\t\t/**\n\t  * Query a collection for ownership of an audio object.\n\t  * @arg {string|Audio|HTMLAudioElement} The validating reference.\n\t  * @returns {boolean}\n\t  */\n\t\thas: function has(_query) {\n\t\t\tif (this.background) {\n\t\t\t\treturn ['background', 'voiceOver', 'sfx'].some((function (_name) {\n\t\t\t\t\treturn this[_name].has(_query);\n\t\t\t\t}).bind(this));\n\t\t\t}\n\t\n\t\t\tif (this[_query]) return true;\n\t\n\t\t\treturn this.some(function (_audio) {\n\t\t\t\treturn _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n\t\t\t});\n\t\t}\n\t};\n\t\n\tLegislatorInterface = {\n\t\trule: function rule(_selector, _event, _handler) {\n\t\t\tvar handler, args;\n\t\n\t\t\thandler = [typeof _event, typeof _handler].indexOf('function');\n\t\t\targs = _util2['default'].toArray(arguments).slice(1);\n\t\n\t\t\tif (typeof _event === 'function') _event = 'play pause stopped ended';\n\t\n\t\t\tthis.on(_event, (function (_e) {\n\t\t\t\tif (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n\t\t\t}).bind(this));\n\t\t}\n\t};\n\t\n\tStateInterface = {\n\t\tstate: function state() {\n\t\t\treturn this.$el.state.apply(this.$el, arguments);\n\t\t},\n\t\n\t\taddState: function addState(_state) {\n\t\t\treturn this.$el.addClass(_state.toUpperCase());\n\t\t},\n\t\n\t\tremoveState: function removeState(_state) {\n\t\t\treturn this.$el.removeClass(_state.toUpperCase());\n\t\t}\n\t};\n\t\n\t/**\n\t * Interface for methods involving audio control for any API level.\n\t */\n\tPlayableInterface = {\n\t\tproxyEvent: function proxyEvent(_event) {\n\t\t\tvar theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n\t\n\t\t\t// proxy event to shadow DOM only when it has an active source.\n\t\t\tif (this.activeSource) {\n\t\t\t\tif (_event.type === 'ended') {\n\t\t\t\t\tthis.removeState('PLAYING');\n\t\t\t\t\tthis.activeSource = null;\n\t\t\t\t}\n\t\n\t\t\t\tthis.trigger(theEvent);\n\t\t\t}\n\t\n\t\t\t_event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n\t\t},\n\t\thandler: function handler(_event) {\n\t\t\tif (_event.type === 'ended' && _event.activeSource) {\n\t\t\t\t_event.activeSource.disconnect();\n\t\t\t}\n\t\t\tthis.proxyEvent.call(this, _event);\n\t\t},\n\t\tsimEnd: function simEnd() {\n\t\t\tif (this.activeSource) {\n\t\t\t\tconsole.warn('Native `ended` failed to fire, simulating...');\n\t\t\t\tthis.handler({ target: this.activeSource, type: 'ended' });\n\t\t\t}\n\t\t},\n\t\tplaySource: function playSource() {\n\t\t\tvar time;\n\t\t\tif (this.buffer) {\n\t\t\t\tthis.activeSource.start(0);\n\t\t\t\tthis.startTime = new Date();\n\t\n\t\t\t\tif (!this.activeSource.loop) {\n\t\t\t\t\ttime = Math.ceil(this.buffer.duration * 1000) + 250;\n\t\t\t\t\tthis.timeout = setTimeout(this.simEnd.bind(this), time);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.media.play();\n\t\t\t}\n\t\n\t\t\tthis.delayID = null;\n\t\t},\n\t\t/**\n\t  * Play an audio object.\n\t  */\n\t\tplay: function play(_selector) {\n\t\t\tvar ctx, src, dest, delay, shouldPlay;\n\t\n\t\t\tfunction response(_val) {\n\t\t\t\tshouldPlay = _val;\n\t\t\t}\n\t\n\t\t\tctx = this.audioContext || pl.game.getAudioContext();\n\t\t\tshouldPlay = true;\n\t\n\t\t\t/*\n\t   * I'm commenting out this line because having it there\n\t   * prevents new audio from starting while the game is out of focus\n\t   * which makes certain screens impossible to complete.\n\t   * Giving the game the ability to pause will remove the need for\n\t   * this line of code, anyway.\n\t   */\n\t\t\t// if (ctx.state === 'suspended') return false;\n\t\n\t\t\tif (this.background) return this.background.play();\n\t\t\tif (this.length != null) {\n\t\t\t\tif (_selector) {\n\t\t\t\t\tif (this[_selector]) return this[_selector].play();\n\t\n\t\t\t\t\treturn this.find(_selector).play();\n\t\t\t\t}\n\t\t\t\treturn this[0] && this[0].play();\n\t\t\t}\n\t\n\t\t\tif (!(src = this.getSource())) return false;\n\t\n\t\t\tsrc.connect(this.gain);\n\t\t\tsrc.addEventListener('ended', this.handler.bind(this), false);\n\t\n\t\t\tthis.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\t\n\t\t\tif (shouldPlay) {\n\t\t\t\tthis.addState('PLAYING');\n\t\t\t\tthis.activeSource = src;\n\t\n\t\t\t\tif (delay = this.config('delay')) {\n\t\t\t\t\tthis.delayID = setTimeout(this.playSource.bind(this), _util2['default'].toMillisec(delay));\n\t\t\t\t} else {\n\t\t\t\t\tthis.playSource.call(this);\n\t\t\t\t}\n\t\n\t\t\t\tthis.handler({ target: src, type: 'play' });\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Pause an audio object.\n\t  */\n\t\tpause: function pause() {\n\t\t\tif (this.buffer) {\n\t\t\t\tthis.pauseTime = new Date();\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\tthis.timeout = null;\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Resume an audio object.\n\t  */\n\t\tresume: function resume() {\n\t\t\tvar time;\n\t\t\tif (this.buffer) {\n\t\t\t\tif (!this.activeSource.loop) {\n\t\t\t\t\ttime = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n\t\t\t\t\tthis.timeout = setTimeout(this.simEnd.bind(this), time);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * Stop an audio object.\n\t  */\n\t\tstop: function stop(_filterSelector) {\n\t\t\tvar stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\t\n\t\t\tif (this.background) return this.background.stop(_filterSelector);\n\t\t\tif (this.length != null) {\n\t\t\t\tif (_filterSelector === '@ALL') {\n\t\t\t\t\tthis.forEach(function (_audio) {\n\t\t\t\t\t\t_audio.stop();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn this[0] && this[0].stop();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (!this.activeSource) return false;\n\t\n\t\t\tif (this.buffer) {\n\t\t\t\tif (!this.delayID) this.activeSource.stop();\n\t\t\t} else {\n\t\t\t\tthis.media.pause();\n\t\t\t\tthis.media.currentTime = 0;\n\t\t\t}\n\t\n\t\t\tif (this.delayID) {\n\t\t\t\tclearTimeout(this.delayID);\n\t\t\t\tthis.delayID = null;\n\t\t\t}\n\t\n\t\t\tthis.activeSource = null;\n\t\n\t\t\tthis.removeState('PLAYING');\n\t\t\tthis.trigger(stopEvent);\n\t\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t  * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n\t  */\n\t\tvolume: function volume(_level, _filterSelector) {\n\t\t\tif (this.background) return this.background.volume(_level);\n\t\t\tif (this.length != null) {\n\t\t\t\tif (_filterSelector === '@ALL') {\n\t\t\t\t\tthis.forEach(function (_audio) {\n\t\t\t\t\t\t_audio.volume(_level);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn this[0] && this[0].volume(_level);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tthis.gain.gain.value = _level;\n\t\t},\n\t\tstartTime: 0,\n\t\tpauseTime: 0\n\t};\n\t\n\texports['default'] = _typesType2['default'](MediaManager, AudioManager, AudioCollection, Audio);\n\t\n\tAudioCollection.extend(MediaCollection);\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(44), __esModule: true };\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(45);\n\t__webpack_require__(46);\n\t__webpack_require__(62);\n\t__webpack_require__(69);\n\tmodule.exports = __webpack_require__(11).Promise;\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $at  = __webpack_require__(47)(true);\n\t\n\t// 21.1.3.27 String.prototype[@@iterator]()\n\t__webpack_require__(49)(String, 'String', function(iterated){\n\t  this._t = String(iterated); // target\n\t  this._i = 0;                // next index\n\t// 21.1.5.2.1 %StringIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , index = this._i\n\t    , point;\n\t  if(index >= O.length)return {value: undefined, done: true};\n\t  point = $at(O, index);\n\t  this._i += point.length;\n\t  return {value: point, done: false};\n\t});\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar toInteger = __webpack_require__(48)\n\t  , defined   = __webpack_require__(37);\n\t// true  -> String#at\n\t// false -> String#codePointAt\n\tmodule.exports = function(TO_STRING){\n\t  return function(that, pos){\n\t    var s = String(defined(that))\n\t      , i = toInteger(pos)\n\t      , l = s.length\n\t      , a, b;\n\t    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n\t    a = s.charCodeAt(i);\n\t    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n\t      ? TO_STRING ? s.charAt(i) : a\n\t      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n\t  };\n\t};\n\n/***/ },\n/* 48 */\n/***/ function(module, exports) {\n\n\t// 7.1.4 ToInteger\n\tvar ceil  = Math.ceil\n\t  , floor = Math.floor;\n\tmodule.exports = function(it){\n\t  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n\t};\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar LIBRARY        = __webpack_require__(50)\n\t  , $export        = __webpack_require__(9)\n\t  , redefine       = __webpack_require__(51)\n\t  , hide           = __webpack_require__(52)\n\t  , has            = __webpack_require__(55)\n\t  , Iterators      = __webpack_require__(56)\n\t  , $iterCreate    = __webpack_require__(57)\n\t  , setToStringTag = __webpack_require__(58)\n\t  , getProto       = __webpack_require__(8).getProto\n\t  , ITERATOR       = __webpack_require__(59)('iterator')\n\t  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n\t  , FF_ITERATOR    = '@@iterator'\n\t  , KEYS           = 'keys'\n\t  , VALUES         = 'values';\n\t\n\tvar returnThis = function(){ return this; };\n\t\n\tmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n\t  $iterCreate(Constructor, NAME, next);\n\t  var getMethod = function(kind){\n\t    if(!BUGGY && kind in proto)return proto[kind];\n\t    switch(kind){\n\t      case KEYS: return function keys(){ return new Constructor(this, kind); };\n\t      case VALUES: return function values(){ return new Constructor(this, kind); };\n\t    } return function entries(){ return new Constructor(this, kind); };\n\t  };\n\t  var TAG        = NAME + ' Iterator'\n\t    , DEF_VALUES = DEFAULT == VALUES\n\t    , VALUES_BUG = false\n\t    , proto      = Base.prototype\n\t    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n\t    , $default   = $native || getMethod(DEFAULT)\n\t    , methods, key;\n\t  // Fix native\n\t  if($native){\n\t    var IteratorPrototype = getProto($default.call(new Base));\n\t    // Set @@toStringTag to native iterators\n\t    setToStringTag(IteratorPrototype, TAG, true);\n\t    // FF fix\n\t    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n\t    // fix Array#{values, @@iterator}.name in V8 / FF\n\t    if(DEF_VALUES && $native.name !== VALUES){\n\t      VALUES_BUG = true;\n\t      $default = function values(){ return $native.call(this); };\n\t    }\n\t  }\n\t  // Define iterator\n\t  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n\t    hide(proto, ITERATOR, $default);\n\t  }\n\t  // Plug for library\n\t  Iterators[NAME] = $default;\n\t  Iterators[TAG]  = returnThis;\n\t  if(DEFAULT){\n\t    methods = {\n\t      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n\t      keys:    IS_SET      ? $default : getMethod(KEYS),\n\t      entries: !DEF_VALUES ? $default : getMethod('entries')\n\t    };\n\t    if(FORCED)for(key in methods){\n\t      if(!(key in proto))redefine(proto, key, methods[key]);\n\t    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n\t  }\n\t  return methods;\n\t};\n\n/***/ },\n/* 50 */\n/***/ function(module, exports) {\n\n\tmodule.exports = true;\n\n/***/ },\n/* 51 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(52);\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $          = __webpack_require__(8)\n\t  , createDesc = __webpack_require__(53);\n\tmodule.exports = __webpack_require__(54) ? function(object, key, value){\n\t  return $.setDesc(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(39)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 55 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = {}.hasOwnProperty;\n\tmodule.exports = function(it, key){\n\t  return hasOwnProperty.call(it, key);\n\t};\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {};\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $              = __webpack_require__(8)\n\t  , descriptor     = __webpack_require__(53)\n\t  , setToStringTag = __webpack_require__(58)\n\t  , IteratorPrototype = {};\n\t\n\t// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\t__webpack_require__(52)(IteratorPrototype, __webpack_require__(59)('iterator'), function(){ return this; });\n\t\n\tmodule.exports = function(Constructor, NAME, next){\n\t  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n\t  setToStringTag(Constructor, NAME + ' Iterator');\n\t};\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar def = __webpack_require__(8).setDesc\n\t  , has = __webpack_require__(55)\n\t  , TAG = __webpack_require__(59)('toStringTag');\n\t\n\tmodule.exports = function(it, tag, stat){\n\t  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n\t};\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar store  = __webpack_require__(60)('wks')\n\t  , uid    = __webpack_require__(61)\n\t  , Symbol = __webpack_require__(10).Symbol;\n\tmodule.exports = function(name){\n\t  return store[name] || (store[name] =\n\t    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n\t};\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global = __webpack_require__(10)\n\t  , SHARED = '__core-js_shared__'\n\t  , store  = global[SHARED] || (global[SHARED] = {});\n\tmodule.exports = function(key){\n\t  return store[key] || (store[key] = {});\n\t};\n\n/***/ },\n/* 61 */\n/***/ function(module, exports) {\n\n\tvar id = 0\n\t  , px = Math.random();\n\tmodule.exports = function(key){\n\t  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n\t};\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(63);\n\tvar Iterators = __webpack_require__(56);\n\tIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar addToUnscopables = __webpack_require__(64)\n\t  , step             = __webpack_require__(65)\n\t  , Iterators        = __webpack_require__(56)\n\t  , toIObject        = __webpack_require__(66);\n\t\n\t// 22.1.3.4 Array.prototype.entries()\n\t// 22.1.3.13 Array.prototype.keys()\n\t// 22.1.3.29 Array.prototype.values()\n\t// 22.1.3.30 Array.prototype[@@iterator]()\n\tmodule.exports = __webpack_require__(49)(Array, 'Array', function(iterated, kind){\n\t  this._t = toIObject(iterated); // target\n\t  this._i = 0;                   // next index\n\t  this._k = kind;                // kind\n\t// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n\t}, function(){\n\t  var O     = this._t\n\t    , kind  = this._k\n\t    , index = this._i++;\n\t  if(!O || index >= O.length){\n\t    this._t = undefined;\n\t    return step(1);\n\t  }\n\t  if(kind == 'keys'  )return step(0, index);\n\t  if(kind == 'values')return step(0, O[index]);\n\t  return step(0, [index, O[index]]);\n\t}, 'values');\n\t\n\t// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\tIterators.Arguments = Iterators.Array;\n\t\n\taddToUnscopables('keys');\n\taddToUnscopables('values');\n\taddToUnscopables('entries');\n\n/***/ },\n/* 64 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(){ /* empty */ };\n\n/***/ },\n/* 65 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(done, value){\n\t  return {value: value, done: !!done};\n\t};\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// to indexed object, toObject with fallback for non-array-like ES3 strings\n\tvar IObject = __webpack_require__(67)\n\t  , defined = __webpack_require__(37);\n\tmodule.exports = function(it){\n\t  return IObject(defined(it));\n\t};\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// fallback for non-array-like ES3 and non-enumerable old V8 strings\n\tvar cof = __webpack_require__(68);\n\tmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n\t  return cof(it) == 'String' ? it.split('') : Object(it);\n\t};\n\n/***/ },\n/* 68 */\n/***/ function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = function(it){\n\t  return toString.call(it).slice(8, -1);\n\t};\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar $          = __webpack_require__(8)\n\t  , LIBRARY    = __webpack_require__(50)\n\t  , global     = __webpack_require__(10)\n\t  , ctx        = __webpack_require__(12)\n\t  , classof    = __webpack_require__(70)\n\t  , $export    = __webpack_require__(9)\n\t  , isObject   = __webpack_require__(71)\n\t  , anObject   = __webpack_require__(72)\n\t  , aFunction  = __webpack_require__(13)\n\t  , strictNew  = __webpack_require__(73)\n\t  , forOf      = __webpack_require__(74)\n\t  , setProto   = __webpack_require__(79).set\n\t  , same       = __webpack_require__(80)\n\t  , SPECIES    = __webpack_require__(59)('species')\n\t  , speciesConstructor = __webpack_require__(81)\n\t  , asap       = __webpack_require__(82)\n\t  , PROMISE    = 'Promise'\n\t  , process    = global.process\n\t  , isNode     = classof(process) == 'process'\n\t  , P          = global[PROMISE]\n\t  , Wrapper;\n\t\n\tvar testResolve = function(sub){\n\t  var test = new P(function(){});\n\t  if(sub)test.constructor = Object;\n\t  return P.resolve(test) === test;\n\t};\n\t\n\tvar USE_NATIVE = function(){\n\t  var works = false;\n\t  function P2(x){\n\t    var self = new P(x);\n\t    setProto(self, P2.prototype);\n\t    return self;\n\t  }\n\t  try {\n\t    works = P && P.resolve && testResolve();\n\t    setProto(P2, P);\n\t    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n\t    // actual Firefox has broken subclass support, test that\n\t    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n\t      works = false;\n\t    }\n\t    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n\t    if(works && __webpack_require__(54)){\n\t      var thenableThenGotten = false;\n\t      P.resolve($.setDesc({}, 'then', {\n\t        get: function(){ thenableThenGotten = true; }\n\t      }));\n\t      works = thenableThenGotten;\n\t    }\n\t  } catch(e){ works = false; }\n\t  return works;\n\t}();\n\t\n\t// helpers\n\tvar sameConstructor = function(a, b){\n\t  // library wrapper special case\n\t  if(LIBRARY && a === P && b === Wrapper)return true;\n\t  return same(a, b);\n\t};\n\tvar getConstructor = function(C){\n\t  var S = anObject(C)[SPECIES];\n\t  return S != undefined ? S : C;\n\t};\n\tvar isThenable = function(it){\n\t  var then;\n\t  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n\t};\n\tvar PromiseCapability = function(C){\n\t  var resolve, reject;\n\t  this.promise = new C(function($$resolve, $$reject){\n\t    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n\t    resolve = $$resolve;\n\t    reject  = $$reject;\n\t  });\n\t  this.resolve = aFunction(resolve),\n\t  this.reject  = aFunction(reject)\n\t};\n\tvar perform = function(exec){\n\t  try {\n\t    exec();\n\t  } catch(e){\n\t    return {error: e};\n\t  }\n\t};\n\tvar notify = function(record, isReject){\n\t  if(record.n)return;\n\t  record.n = true;\n\t  var chain = record.c;\n\t  asap(function(){\n\t    var value = record.v\n\t      , ok    = record.s == 1\n\t      , i     = 0;\n\t    var run = function(reaction){\n\t      var handler = ok ? reaction.ok : reaction.fail\n\t        , resolve = reaction.resolve\n\t        , reject  = reaction.reject\n\t        , result, then;\n\t      try {\n\t        if(handler){\n\t          if(!ok)record.h = true;\n\t          result = handler === true ? value : handler(value);\n\t          if(result === reaction.promise){\n\t            reject(TypeError('Promise-chain cycle'));\n\t          } else if(then = isThenable(result)){\n\t            then.call(result, resolve, reject);\n\t          } else resolve(result);\n\t        } else reject(value);\n\t      } catch(e){\n\t        reject(e);\n\t      }\n\t    };\n\t    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n\t    chain.length = 0;\n\t    record.n = false;\n\t    if(isReject)setTimeout(function(){\n\t      var promise = record.p\n\t        , handler, console;\n\t      if(isUnhandled(promise)){\n\t        if(isNode){\n\t          process.emit('unhandledRejection', value, promise);\n\t        } else if(handler = global.onunhandledrejection){\n\t          handler({promise: promise, reason: value});\n\t        } else if((console = global.console) && console.error){\n\t          console.error('Unhandled promise rejection', value);\n\t        }\n\t      } record.a = undefined;\n\t    }, 1);\n\t  });\n\t};\n\tvar isUnhandled = function(promise){\n\t  var record = promise._d\n\t    , chain  = record.a || record.c\n\t    , i      = 0\n\t    , reaction;\n\t  if(record.h)return false;\n\t  while(chain.length > i){\n\t    reaction = chain[i++];\n\t    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n\t  } return true;\n\t};\n\tvar $reject = function(value){\n\t  var record = this;\n\t  if(record.d)return;\n\t  record.d = true;\n\t  record = record.r || record; // unwrap\n\t  record.v = value;\n\t  record.s = 2;\n\t  record.a = record.c.slice();\n\t  notify(record, true);\n\t};\n\tvar $resolve = function(value){\n\t  var record = this\n\t    , then;\n\t  if(record.d)return;\n\t  record.d = true;\n\t  record = record.r || record; // unwrap\n\t  try {\n\t    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n\t    if(then = isThenable(value)){\n\t      asap(function(){\n\t        var wrapper = {r: record, d: false}; // wrap\n\t        try {\n\t          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n\t        } catch(e){\n\t          $reject.call(wrapper, e);\n\t        }\n\t      });\n\t    } else {\n\t      record.v = value;\n\t      record.s = 1;\n\t      notify(record, false);\n\t    }\n\t  } catch(e){\n\t    $reject.call({r: record, d: false}, e); // wrap\n\t  }\n\t};\n\t\n\t// constructor polyfill\n\tif(!USE_NATIVE){\n\t  // 25.4.3.1 Promise(executor)\n\t  P = function Promise(executor){\n\t    aFunction(executor);\n\t    var record = this._d = {\n\t      p: strictNew(this, P, PROMISE),         // <- promise\n\t      c: [],                                  // <- awaiting reactions\n\t      a: undefined,                           // <- checked in isUnhandled reactions\n\t      s: 0,                                   // <- state\n\t      d: false,                               // <- done\n\t      v: undefined,                           // <- value\n\t      h: false,                               // <- handled rejection\n\t      n: false                                // <- notify\n\t    };\n\t    try {\n\t      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n\t    } catch(err){\n\t      $reject.call(record, err);\n\t    }\n\t  };\n\t  __webpack_require__(87)(P.prototype, {\n\t    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n\t    then: function then(onFulfilled, onRejected){\n\t      var reaction = new PromiseCapability(speciesConstructor(this, P))\n\t        , promise  = reaction.promise\n\t        , record   = this._d;\n\t      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n\t      reaction.fail = typeof onRejected == 'function' && onRejected;\n\t      record.c.push(reaction);\n\t      if(record.a)record.a.push(reaction);\n\t      if(record.s)notify(record, false);\n\t      return promise;\n\t    },\n\t    // 25.4.5.1 Promise.prototype.catch(onRejected)\n\t    'catch': function(onRejected){\n\t      return this.then(undefined, onRejected);\n\t    }\n\t  });\n\t}\n\t\n\t$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\n\t__webpack_require__(58)(P, PROMISE);\n\t__webpack_require__(88)(PROMISE);\n\tWrapper = __webpack_require__(11)[PROMISE];\n\t\n\t// statics\n\t$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n\t  // 25.4.4.5 Promise.reject(r)\n\t  reject: function reject(r){\n\t    var capability = new PromiseCapability(this)\n\t      , $$reject   = capability.reject;\n\t    $$reject(r);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n\t  // 25.4.4.6 Promise.resolve(x)\n\t  resolve: function resolve(x){\n\t    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n\t    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n\t    var capability = new PromiseCapability(this)\n\t      , $$resolve  = capability.resolve;\n\t    $$resolve(x);\n\t    return capability.promise;\n\t  }\n\t});\n\t$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(89)(function(iter){\n\t  P.all(iter)['catch'](function(){});\n\t})), PROMISE, {\n\t  // 25.4.4.1 Promise.all(iterable)\n\t  all: function all(iterable){\n\t    var C          = getConstructor(this)\n\t      , capability = new PromiseCapability(C)\n\t      , resolve    = capability.resolve\n\t      , reject     = capability.reject\n\t      , values     = [];\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, values.push, values);\n\t      var remaining = values.length\n\t        , results   = Array(remaining);\n\t      if(remaining)$.each.call(values, function(promise, index){\n\t        var alreadyCalled = false;\n\t        C.resolve(promise).then(function(value){\n\t          if(alreadyCalled)return;\n\t          alreadyCalled = true;\n\t          results[index] = value;\n\t          --remaining || resolve(results);\n\t        }, reject);\n\t      });\n\t      else resolve(results);\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  },\n\t  // 25.4.4.4 Promise.race(iterable)\n\t  race: function race(iterable){\n\t    var C          = getConstructor(this)\n\t      , capability = new PromiseCapability(C)\n\t      , reject     = capability.reject;\n\t    var abrupt = perform(function(){\n\t      forOf(iterable, false, function(promise){\n\t        C.resolve(promise).then(capability.resolve, reject);\n\t      });\n\t    });\n\t    if(abrupt)reject(abrupt.error);\n\t    return capability.promise;\n\t  }\n\t});\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// getting tag from 19.1.3.6 Object.prototype.toString()\n\tvar cof = __webpack_require__(68)\n\t  , TAG = __webpack_require__(59)('toStringTag')\n\t  // ES3 wrong here\n\t  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\t\n\tmodule.exports = function(it){\n\t  var O, T, B;\n\t  return it === undefined ? 'Undefined' : it === null ? 'Null'\n\t    // @@toStringTag case\n\t    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n\t    // builtinTag case\n\t    : ARG ? cof(O)\n\t    // ES3 arguments fallback\n\t    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n\t};\n\n/***/ },\n/* 71 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(71);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 73 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it, Constructor, name){\n\t  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n\t  return it;\n\t};\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx         = __webpack_require__(12)\n\t  , call        = __webpack_require__(75)\n\t  , isArrayIter = __webpack_require__(76)\n\t  , anObject    = __webpack_require__(72)\n\t  , toLength    = __webpack_require__(77)\n\t  , getIterFn   = __webpack_require__(78);\n\tmodule.exports = function(iterable, entries, fn, that){\n\t  var iterFn = getIterFn(iterable)\n\t    , f      = ctx(fn, that, entries ? 2 : 1)\n\t    , index  = 0\n\t    , length, step, iterator;\n\t  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n\t  // fast case for arrays with default iterator\n\t  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n\t    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n\t  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n\t    call(iterator, f, step.value, entries);\n\t  }\n\t};\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// call something on iterator step with safe closing on error\n\tvar anObject = __webpack_require__(72);\n\tmodule.exports = function(iterator, fn, value, entries){\n\t  try {\n\t    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n\t  // 7.4.6 IteratorClose(iterator, completion)\n\t  } catch(e){\n\t    var ret = iterator['return'];\n\t    if(ret !== undefined)anObject(ret.call(iterator));\n\t    throw e;\n\t  }\n\t};\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// check on default Array iterator\n\tvar Iterators  = __webpack_require__(56)\n\t  , ITERATOR   = __webpack_require__(59)('iterator')\n\t  , ArrayProto = Array.prototype;\n\t\n\tmodule.exports = function(it){\n\t  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n\t};\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.15 ToLength\n\tvar toInteger = __webpack_require__(48)\n\t  , min       = Math.min;\n\tmodule.exports = function(it){\n\t  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n\t};\n\n/***/ },\n/* 78 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar classof   = __webpack_require__(70)\n\t  , ITERATOR  = __webpack_require__(59)('iterator')\n\t  , Iterators = __webpack_require__(56);\n\tmodule.exports = __webpack_require__(11).getIteratorMethod = function(it){\n\t  if(it != undefined)return it[ITERATOR]\n\t    || it['@@iterator']\n\t    || Iterators[classof(it)];\n\t};\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Works with __proto__ only. Old v8 can't work with null proto objects.\n\t/* eslint-disable no-proto */\n\tvar getDesc  = __webpack_require__(8).getDesc\n\t  , isObject = __webpack_require__(71)\n\t  , anObject = __webpack_require__(72);\n\tvar check = function(O, proto){\n\t  anObject(O);\n\t  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n\t};\n\tmodule.exports = {\n\t  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n\t    function(test, buggy, set){\n\t      try {\n\t        set = __webpack_require__(12)(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n\t        set(test, []);\n\t        buggy = !(test instanceof Array);\n\t      } catch(e){ buggy = true; }\n\t      return function setPrototypeOf(O, proto){\n\t        check(O, proto);\n\t        if(buggy)O.__proto__ = proto;\n\t        else set(O, proto);\n\t        return O;\n\t      };\n\t    }({}, false) : undefined),\n\t  check: check\n\t};\n\n/***/ },\n/* 80 */\n/***/ function(module, exports) {\n\n\t// 7.2.9 SameValue(x, y)\n\tmodule.exports = Object.is || function is(x, y){\n\t  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n\t};\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.3.20 SpeciesConstructor(O, defaultConstructor)\n\tvar anObject  = __webpack_require__(72)\n\t  , aFunction = __webpack_require__(13)\n\t  , SPECIES   = __webpack_require__(59)('species');\n\tmodule.exports = function(O, D){\n\t  var C = anObject(O).constructor, S;\n\t  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n\t};\n\n/***/ },\n/* 82 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(10)\n\t  , macrotask = __webpack_require__(83).set\n\t  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n\t  , process   = global.process\n\t  , Promise   = global.Promise\n\t  , isNode    = __webpack_require__(68)(process) == 'process'\n\t  , head, last, notify;\n\t\n\tvar flush = function(){\n\t  var parent, domain, fn;\n\t  if(isNode && (parent = process.domain)){\n\t    process.domain = null;\n\t    parent.exit();\n\t  }\n\t  while(head){\n\t    domain = head.domain;\n\t    fn     = head.fn;\n\t    if(domain)domain.enter();\n\t    fn(); // <- currently we use it only for Promise - try / catch not required\n\t    if(domain)domain.exit();\n\t    head = head.next;\n\t  } last = undefined;\n\t  if(parent)parent.enter();\n\t};\n\t\n\t// Node.js\n\tif(isNode){\n\t  notify = function(){\n\t    process.nextTick(flush);\n\t  };\n\t// browsers with MutationObserver\n\t} else if(Observer){\n\t  var toggle = 1\n\t    , node   = document.createTextNode('');\n\t  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n\t  notify = function(){\n\t    node.data = toggle = -toggle;\n\t  };\n\t// environments with maybe non-completely correct, but existent Promise\n\t} else if(Promise && Promise.resolve){\n\t  notify = function(){\n\t    Promise.resolve().then(flush);\n\t  };\n\t// for other environments - macrotask based on:\n\t// - setImmediate\n\t// - MessageChannel\n\t// - window.postMessag\n\t// - onreadystatechange\n\t// - setTimeout\n\t} else {\n\t  notify = function(){\n\t    // strange IE + webpack dev server bug - use .call(global)\n\t    macrotask.call(global, flush);\n\t  };\n\t}\n\t\n\tmodule.exports = function asap(fn){\n\t  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n\t  if(last)last.next = task;\n\t  if(!head){\n\t    head = task;\n\t    notify();\n\t  } last = task;\n\t};\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ctx                = __webpack_require__(12)\n\t  , invoke             = __webpack_require__(84)\n\t  , html               = __webpack_require__(85)\n\t  , cel                = __webpack_require__(86)\n\t  , global             = __webpack_require__(10)\n\t  , process            = global.process\n\t  , setTask            = global.setImmediate\n\t  , clearTask          = global.clearImmediate\n\t  , MessageChannel     = global.MessageChannel\n\t  , counter            = 0\n\t  , queue              = {}\n\t  , ONREADYSTATECHANGE = 'onreadystatechange'\n\t  , defer, channel, port;\n\tvar run = function(){\n\t  var id = +this;\n\t  if(queue.hasOwnProperty(id)){\n\t    var fn = queue[id];\n\t    delete queue[id];\n\t    fn();\n\t  }\n\t};\n\tvar listner = function(event){\n\t  run.call(event.data);\n\t};\n\t// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\n\tif(!setTask || !clearTask){\n\t  setTask = function setImmediate(fn){\n\t    var args = [], i = 1;\n\t    while(arguments.length > i)args.push(arguments[i++]);\n\t    queue[++counter] = function(){\n\t      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n\t    };\n\t    defer(counter);\n\t    return counter;\n\t  };\n\t  clearTask = function clearImmediate(id){\n\t    delete queue[id];\n\t  };\n\t  // Node.js 0.8-\n\t  if(__webpack_require__(68)(process) == 'process'){\n\t    defer = function(id){\n\t      process.nextTick(ctx(run, id, 1));\n\t    };\n\t  // Browsers with MessageChannel, includes WebWorkers\n\t  } else if(MessageChannel){\n\t    channel = new MessageChannel;\n\t    port    = channel.port2;\n\t    channel.port1.onmessage = listner;\n\t    defer = ctx(port.postMessage, port, 1);\n\t  // Browsers with postMessage, skip WebWorkers\n\t  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n\t  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n\t    defer = function(id){\n\t      global.postMessage(id + '', '*');\n\t    };\n\t    global.addEventListener('message', listner, false);\n\t  // IE8-\n\t  } else if(ONREADYSTATECHANGE in cel('script')){\n\t    defer = function(id){\n\t      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n\t        html.removeChild(this);\n\t        run.call(id);\n\t      };\n\t    };\n\t  // Rest old browsers\n\t  } else {\n\t    defer = function(id){\n\t      setTimeout(ctx(run, id, 1), 0);\n\t    };\n\t  }\n\t}\n\tmodule.exports = {\n\t  set:   setTask,\n\t  clear: clearTask\n\t};\n\n/***/ },\n/* 84 */\n/***/ function(module, exports) {\n\n\t// fast apply, http://jsperf.lnkit.com/fast-apply/5\n\tmodule.exports = function(fn, args, that){\n\t  var un = that === undefined;\n\t  switch(args.length){\n\t    case 0: return un ? fn()\n\t                      : fn.call(that);\n\t    case 1: return un ? fn(args[0])\n\t                      : fn.call(that, args[0]);\n\t    case 2: return un ? fn(args[0], args[1])\n\t                      : fn.call(that, args[0], args[1]);\n\t    case 3: return un ? fn(args[0], args[1], args[2])\n\t                      : fn.call(that, args[0], args[1], args[2]);\n\t    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n\t                      : fn.call(that, args[0], args[1], args[2], args[3]);\n\t  } return              fn.apply(that, args);\n\t};\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(10).document && document.documentElement;\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(71)\n\t  , document = __webpack_require__(10).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar redefine = __webpack_require__(51);\n\tmodule.exports = function(target, src){\n\t  for(var key in src)redefine(target, key, src[key]);\n\t  return target;\n\t};\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\tvar core        = __webpack_require__(11)\n\t  , $           = __webpack_require__(8)\n\t  , DESCRIPTORS = __webpack_require__(54)\n\t  , SPECIES     = __webpack_require__(59)('species');\n\t\n\tmodule.exports = function(KEY){\n\t  var C = core[KEY];\n\t  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n\t    configurable: true,\n\t    get: function(){ return this; }\n\t  });\n\t};\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar ITERATOR     = __webpack_require__(59)('iterator')\n\t  , SAFE_CLOSING = false;\n\t\n\ttry {\n\t  var riter = [7][ITERATOR]();\n\t  riter['return'] = function(){ SAFE_CLOSING = true; };\n\t  Array.from(riter, function(){ throw 2; });\n\t} catch(e){ /* empty */ }\n\t\n\tmodule.exports = function(exec, skipClosing){\n\t  if(!skipClosing && !SAFE_CLOSING)return false;\n\t  var safe = false;\n\t  try {\n\t    var arr  = [7]\n\t      , iter = arr[ITERATOR]();\n\t    iter.next = function(){ safe = true; };\n\t    arr[ITERATOR] = function(){ return iter; };\n\t    exec(arr);\n\t  } catch(e){ /* empty */ }\n\t  return safe;\n\t};\n\n/***/ },\n/* 90 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/**\n\t * Defines an Object type using a named constructor function.\n\t * @module\n\t */\n\t\n\t/**\n\t * Constructs an object with methods bound to a context.\n\t * @arg {object} _from - Object with methods to bind.\n\t * @arg {object} _to - Context which methtods should be bound to.\n\t */\n\t\n\tvar _Object$defineProperty = __webpack_require__(91)['default'];\n\t\n\tvar _Object$keys = __webpack_require__(33)['default'];\n\t\n\tvar _Object$create = __webpack_require__(20)['default'];\n\t\n\texports.__esModule = true;\n\texports['default'] = type;\n\tfunction Bindings(_from, _to) {\n\t\tvar method;\n\t\n\t\t// pull all methods from the prototype chain.\n\t\tfor (method in _from) {\n\t\t\tif (typeof _from[method] !== 'function') continue;\n\t\t\tthis[method] = _from[method].bind(_to);\n\t\t}\n\t}\n\t\n\t/**\n\t * Takes an itterable object and convert it into an Array.\n\t * @arg {object} _itterable\n\t * @returns {array}\n\t */\n\tfunction toArray(_itterable) {\n\t\treturn [].map.call(_itterable, function (m) {\n\t\t\treturn m;\n\t\t});\n\t}\n\t\n\t/**\n\t * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n\t * @arg {function} _constructor... - any number of constructor functions.\n\t * @returns The constructor or an object containing all the defined types.\n\t */\n\t\n\tfunction type() {\n\t\tvar defs, module;\n\t\n\t\t/**\n\t  * Constructs an interface which is accesed through the constructors arguments.\n\t  * These arguments are parsed from the function string and collected into an array.\n\t  * @arg {function} _constructor\n\t  * @returns {array} The collection of API functions requested by the constructor.\n\t  */\n\t\tfunction createApi(_constructor) {\n\t\t\tvar args, api;\n\t\n\t\t\t// Matches the names of the arguments defined in the source of the function.\n\t\t\t// [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n\t\t\t// It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n\t\t\t// NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n\t\t\targs = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/) || ['', ''])[1].split(/\\s*,\\s*/);\n\t\t\tapi = {\n\t\t\t\t/**\n\t    * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n\t    *\n\t    * @arg {object} _obj - The context which to find the parent function.\n\t    * @arg {string} _name - The method name.\n\t    * @arg {array} _args - A collection of arguments to invoke the method with\n\t    * @returns {*} Whatever the caller returns.\n\t    *\n\t    * @example \n\t    * Car.extend(function Ford (proto) {\n\t    *     this.drive = function () {\n\t    *         proto(this, 'drive', arguments);\n\t    *         // do some opps.\n\t    *     };\n\t    * });\n\t    */\n\t\t\t\tproto: function proto(_obj, _name, _args) {\n\t\t\t\t\tvar proto, method;\n\t\n\t\t\t\t\tproto = Object.getPrototypeOf(this || _obj);\n\t\t\t\t\tmethod = proto[_name];\n\t\n\t\t\t\t\tif (typeof _obj[_name] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Member ' + _name + ' is not a function.');\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (method) {\n\t\t\t\t\t\t// Does _obj's prototype have the method and it's not the same reference as _obj.\n\t\t\t\t\t\tif (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t\t\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t// Otherwise, walk the prototype chain to find the prototype that has the parent method.\n\t\t\t\t\t\twhile (proto) {\n\t\t\t\t\t\t\tif (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t\t\t\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tproto = Object.getPrototypeOf(proto);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn new Bindings(proto, _obj);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t    * Invokes the specified method which lives on the object type's prototype.\n\t    * If your instance overrides the object types method, or your many prototype\n\t    * levels away from the base prototype, this lets you track back to the original.\n\t    *\n\t    * @arg {object} _obj - The context which to find the parent function.\n\t    * @arg {string} _name - The method name.\n\t    * @arg {array} _args - A collection of arguments to invoke the method with\n\t    * @returns {*} Whatever the caller returns.\n\t    */\n\t\t\t\tbase: function base(_obj, _name, _args) {\n\t\t\t\t\tvar proto, method;\n\t\n\t\t\t\t\tproto = _constructor.prototype;\n\t\t\t\t\tmethod = proto[_name];\n\t\n\t\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Member ' + _name + ' is not a function.');\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (method) {\n\t\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn new Bindings(proto, _obj);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t/**\n\t    * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n\t    * @arg {object} _obj - The context which to find the parent function.\n\t    * @arg {string} _name - The method name.\n\t    * @arg {array} _args - A collection of arguments to invoke the method with\n\t    * @returns {*} Whatever the caller returns.\n\t    */\n\t\t\t\tsup: function sup(_obj, _name, _args) {\n\t\t\t\t\treturn api.proto.apply(_constructor.prototype, arguments);\n\t\t\t\t},\n\t\t\t\t/**\n\t    * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n\t    * @arg {object} _obj - The context which to define members.\n\t    * @arg {string} _name - The member name.\n\t    * @arg {*} _value - The value.\n\t    * @returns api\n\t    */\n\t\t\t\tconstant: function constant(_obj, _name, _value) {\n\t\t\t\t\t_Object$defineProperty(_obj, _name, {\n\t\t\t\t\t\tvalue: _value,\n\t\t\t\t\t\tconfigureable: false,\n\t\t\t\t\t\twriteable: false\n\t\t\t\t\t});\n\t\n\t\t\t\t\treturn api;\n\t\t\t\t},\n\t\t\t\t/**\n\t    * Defines members on the constructor.\n\t    * @function static\n\t    * @overload\n\t    * @arg {string} _name - The member name.\n\t    * @arg {*} _value - The value.\n\t    * @returns api\n\t    */\n\t\n\t\t\t\t/**\n\t    * Defines members on the constructor.\n\t    * @arg {object} _def - An object with members to mixin.\n\t    * @returns api\n\t    */\n\t\t\t\t'static': function _static(_name_def, _value) {\n\t\t\t\t\tvar member, _name, _def;\n\t\n\t\t\t\t\t_value ? _name = _name_def : _def = _name_def;\n\t\n\t\t\t\t\tif (_def) {\n\t\t\t\t\t\tfor (member in _def) {\n\t\t\t\t\t\t\tif (!_def.hasOwnProperty(member)) continue;\n\t\t\t\t\t\t\t_constructor[member] = _def[member];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (_name) {\n\t\t\t\t\t\t_constructor[_name] = _value;\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn api;\n\t\t\t\t},\n\t\t\t\t/**\n\t    * A pretty way of define the interface of your object type.\n\t    *\n\t    * You may pass any number of arguments as functions or strings.\n\t    * \n\t    * **Example**\n\t    * ```javascript\n\t    * function Car ($) {$(\n\t    *     // Defines a member assigned to `null`.\n\t    *     'name',\n\t    *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n\t    *     'engineType = \"standard\", speed = 0',\n\t    *\n\t    *     // Define instance members.\n\t    *     function alloc (_name) {\n\t    *         this.name = _name;\n\t    *     },\n\t    *\n\t    *     function drive () {\n\t    *         this.speed += 1;\n\t    *     }\n\t    * )}\n\t    * ```\n\t    *\n\t    * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n\t    * @arg {string|function} _def - A string of property definitions or a named function.\n\t    * @todo Support property assignment in alloc. Micah: 2/24/2016\n\t    */\n\t\t\t\t$: function $() {\n\t\t\t\t\tvar args = toArray(arguments);\n\t\n\t\t\t\t\targs.forEach(function (_member) {\n\t\t\t\t\t\tvar memberType, props, key;\n\t\n\t\t\t\t\t\tmemberType = typeof _member;\n\t\n\t\t\t\t\t\tswitch (memberType) {\n\t\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\t\tprops = _member.split(/\\s*,\\s*/);\n\t\n\t\t\t\t\t\t\t\tif (props) {\n\t\t\t\t\t\t\t\t\tprops.forEach(function (_def) {\n\t\t\t\t\t\t\t\t\t\tvar prop, val;\n\t\n\t\t\t\t\t\t\t\t\t\tprop = _def.split(/\\s*[:=]\\s*/);\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tval = JSON.parse(prop[1]);\n\t\t\t\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t\t\t\t\t_constructor.prototype[prop[0]] = typeof prop[1] !== 'undefined' ? val || prop[1] : null;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 'object':\n\t\t\t\t\t\t\t\tfor (key in _member) {\n\t\t\t\t\t\t\t\t\tif (!_member.hasOwnProperty(key)) continue;\n\t\t\t\t\t\t\t\t\t_constructor.prototype[key] = _member[key];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\tcase 'function':\n\t\t\t\t\t\t\t\tif (!_member.name) throw TypeError('Member must be a named function.');\n\t\t\t\t\t\t\t\t_constructor.prototype[_member.name] = _member;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\n\t\t\t\t\treturn api;\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\treturn args.map(function (_call) {\n\t\t\t\treturn api[_call] || module[_call];\n\t\t\t});\n\t\t}\n\t\n\t\tdefs = toArray(arguments);\n\t\tmodule = !this ? {} : this;\n\t\n\t\tdefs.forEach(function (_constructor) {\n\t\t\tvar api;\n\t\n\t\t\tif (typeof _constructor === 'object') {\n\t\t\t\tvar Super,\n\t\t\t\t    keys = _Object$keys(_constructor);\n\t\n\t\t\t\tif (keys.length === 1 && module[keys[0]]) {\n\t\t\t\t\tSuper = module[keys[0]];\n\t\t\t\t\treturn Super.extend.call(module, _constructor[keys[0]]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tapi = createApi(_constructor);\n\t\n\t\t\t/**\n\t   * Creates a new instance of the constructor prototype.\n\t   * This also invokes the `alloc()` on the instance so you can define instance props.\n\t   * @arg {*} ... - Any number of arguments for `alloc()`.\n\t   * @returns instance\n\t   */\n\t\t\t_constructor.create = function () {\n\t\t\t\tvar instance = _Object$create(_constructor.prototype);\n\t\t\t\tif (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n\t\t\t\treturn instance;\n\t\t\t};\n\t\n\t\t\t/**\n\t   * Extends the provided constructor prototype.\n\t   * @arg {function} _definition - Constructor for the object type.\n\t   * @returns _constructor\n\t   */\n\t\t\t_constructor.extend = function (_definition) {\n\t\t\t\t_definition.prototype = _Object$create(_constructor.prototype, {\n\t\t\t\t\tconstructor: {\n\t\t\t\t\t\tvalue: _definition,\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twriteable: false,\n\t\t\t\t\t\tconfigureable: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\treturn type.call(this === _constructor ? null : this, _definition);\n\t\t\t};\n\t\n\t\t\t_constructor.apply(_constructor.prototype, api);\n\t\n\t\t\tmodule[_constructor.name] = _constructor;\n\t\t});\n\t\n\t\treturn defs.length > 1 ? module : defs[0];\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(92), __esModule: true };\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $ = __webpack_require__(8);\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $.setDesc(it, key, desc);\n\t};\n\n/***/ },\n/* 93 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _typesQueue = __webpack_require__(40);\n\t\n\tvar _typesQueue2 = _interopRequireDefault(_typesQueue);\n\t\n\tfunction invokeResponsibilities(_scope, _event) {\n\t\tif (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n\t\t\t_scope.responsibilities.forEach(function (_record) {\n\t\t\t\tif (_record.name === _event.name) {\n\t\n\t\t\t\t\t// console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n\t\t\t\t\t_record.ability.call(_scope, _event);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\t/**\n\t * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n\t * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n\t * <style>\n\t * .tag {\n\t *   padding: 1px 4px;\n\t *   border-radius: 4px;\n\t *\n\t *   color: #fff;\n\t *   background-color: #aaa;\n\t * }\n\t *\n\t * .tag.behavior {\n\t *\t background-color: #0ba;\n\t * }\n\t *\n\t * .tag.state {\n\t *\t background-color: #ba0;\n\t * }\n\t *\n\t * .note {\n\t *   border: solid 1px;\n\t *   border-radius: 4px;\n\t *   padding: 1px 4px;\n\t *   color: #aaa;\n\t *   background-color: #eee;\n\t * }\n\t * \n\t * .note.important {\n\t *   color: #b55;\n\t *   background-color: #fee;\n\t * }\n\t * </style>\n\t *\n\t * @class\n\t * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n\t * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n\t * @extends GlobalScope\n\t */\n\tvar Entity = _typesGlobalScope2['default'].extend(function () {\n\t\n\t\tfunction resolveTarget(_target) {\n\t\n\t\t\tswitch (typeof _target) {\n\t\t\t\tcase 'string':\n\t\t\t\t\treturn this.findOwn(_target);\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (_target.jquery) return _target;\n\t\t\t\t\tif (Entity.isPrototypeOf(_target)) return _target;\n\t\t\t\t\tif (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t}\n\t\n\t\tfunction ResponsibilityRecord(_name, _ability) {\n\t\t\tthis.name = _name;\n\t\t\tthis.ability = _ability;\n\t\t}\n\t\n\t\tfunction dragGreeter(_event) {\n\t\t\tswitch (_event.type) {\n\t\t\t\tcase 'drag-start':\n\t\t\t\t\tthis.grab(_event.state);\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'drag-move':\n\t\t\t\t\tthis.dragging(_event.state);\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'drag-end':\n\t\t\t\t\tthis.release(_event.state);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\n\t\tfunction attachDragEvents() {\n\t\t\tif (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n\t\t\t\tthis.on('drag-start drag-move drag-end', dragGreeter);\n\t\t\t}\n\t\t}\n\t\n\t\tthis.baseType = 'TYPE_ENTITY';\n\t\tthis.STATE = {\n\t\t\tPLAYING: 'PLAYING',\n\t\t\tBACKGROUND: 'BACKGROUND',\n\t\t\tVOICE_OVER: 'VOICE-OVER',\n\t\t\tSFX: 'SFX'\n\t\t};\n\t\n\t\tthis.timeoutID = null;\n\t\tthis.intervalID = null;\n\t\tthis.responsibilities = null;\n\t\tthis.isComplete = false;\n\t\tthis.shouldInheritAbilities = true;\n\t\tthis.frameHandlers = null;\n\t\tthis.frameRate = 60; // 60fps\n\t\tthis.draggables = null;\n\t\tthis.requiredQueue = null;\n\t\tthis.bgImageCollection = null;\n\t\n\t\tthis.handleProperty({\n\t\t\tsize: function size(_node, _name, _value) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tif (this.is(_node)) {\n\t\t\t\t\tsize = _value.split(/\\s*[x,]\\s*/);\n\t\t\t\t\tthis.css({\n\t\t\t\t\t\twidth: size[0],\n\t\t\t\t\t\theight: size[1] || size[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tposition: function position(_node, _name, _value) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tif (this.is(_node)) {\n\t\t\t\t\tsize = _value.split(/\\s*[x,]\\s*/);\n\t\t\t\t\tthis.css({\n\t\t\t\t\t\ttop: size[1] || size[0],\n\t\t\t\t\t\tleft: size[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\n\t\t\tdraggable: function draggable(_node, _name, _value) {\n\t\t\t\tif (!this.hasOwnProperty('draggables')) {\n\t\t\t\t\tthis.draggables = $();\n\t\t\t\t}\n\t\n\t\t\t\tthis.draggables.push(_node);\n\t\t\t},\n\t\n\t\t\tbg: function bg(_node, _name, _value) {\n\t\t\t\tvar img = new Image();\n\t\n\t\t\t\tif (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\t\n\t\t\t\tif (this.isMemberSafe('bgImageCollection')) {\n\t\t\t\t\timg.src = _value;\n\t\t\t\t\tthis.bgImageCollection.push(img);\n\t\t\t\t\t$(_node).css('background-image', 'url(' + _value + ')');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\tthis.__init = function (_event) {\n\t\t\tif (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n\t\t\t\tthis.watchAssets(this.bgImageCollection);\n\t\t\t}\n\t\t\tattachDragEvents.call(this);\n\t\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.size = function () {\n\t\t\tvar size;\n\t\n\t\t\tif (arguments.length) {\n\t\t\t\tsize = _typesDimensions.Size.create(arguments);\n\t\t\t\tthis.css(size);\n\t\t\t\treturn size;\n\t\t\t}\n\t\n\t\t\treturn _typesDimensions.Size.create().set(this.width(), this.height());\n\t\t};\n\t\n\t\tthis.propagateBehavior = function (_event) {\n\t\t\tvar ids;\n\t\n\t\t\tids = [];\n\t\n\t\t\tthis.findOwn('.pl-scope').each(function (_index, _node) {\n\t\t\t\tvar $node = $(_node);\n\t\t\t\tids.push($node.id() || $node.address());\n\t\t\t});\n\t\n\t\t\tif (this.hasOwnProperty('entities') && this.entities.length) {\n\t\t\t\t// console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\t\n\t\t\t\tthis.entities.forEach(function (_scope) {\n\t\t\t\t\tinvokeResponsibilities(_scope, _event);\n\t\t\t\t\t_scope.propagateBehavior(_event);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.require = function (_entity) {\n\t\t\tif (!this.hasOwnProperty('requiredQueue')) {\n\t\t\t\tthis.requiredQueue = _typesQueue2['default'].create();\n\t\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\t\tthis.log('entity complete');\n\t\t\t\t\tthis.complete();\n\t\t\t\t}));\n\t\n\t\t\t\tthis.respond('complete', function (_event) {\n\t\t\t\t\tif (!this.has(_event.target)) return;\n\t\t\t\t\tif (_event.targetScope === this) return;\n\t\n\t\t\t\t\tthis.requiredQueue.ready(_event.behaviorTarget);\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tthis.requiredQueue.add(_entity);\n\t\t\tthis.gate();\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.behavior = function (_name, _behavior) {\n\t\t\t_behavior.method = this[_name] = function () {\n\t\t\t\tvar behaviorEvent, result;\n\t\n\t\t\t\tbehaviorEvent = {\n\t\t\t\t\tname: _name,\n\t\t\t\t\tmessage: '',\n\t\t\t\t\ttargetScope: this,\n\t\t\t\t\tbehaviorTarget: this\n\t\t\t\t};\n\t\n\t\t\t\tresult = _behavior.apply(this, arguments);\n\t\n\t\t\t\tif (typeof result === 'object') {\n\t\t\t\t\tbehaviorEvent = _util2['default'].mixin(behaviorEvent, result);\n\t\t\t\t}\n\t\n\t\t\t\tif (result !== false) {\n\t\t\t\t\tthis.trigger($.Event('behavior', behaviorEvent));\n\t\t\t\t}\n\t\n\t\t\t\treturn this;\n\t\t\t};\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.respond = function () {\n\t\t\tvar name, ability, parentScope, abilities, protoAbilities;\n\t\n\t\t\tif (!this.hasOwnProperty('responsibilities')) {\n\t\t\t\tabilities = _typesCollection2['default'].create();\n\t\t\t\tprotoAbilities = this.provideAblilityPototype();\n\t\n\t\t\t\tif (this.shouldInheritAbilities && protoAbilities && protoAbilities.responsibilities) {\n\t\t\t\t\tabilities.push.apply(abilities, protoAbilities.responsibilities);\n\t\t\t\t}\n\t\n\t\t\t\tthis.responsibilities = abilities;\n\t\t\t}\n\t\n\t\t\tif (arguments.length === 1) {\n\t\t\t\tswitch (typeof arguments[0]) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tname = arguments[0];break;\n\t\n\t\t\t\t\tcase 'function':\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tability = arguments[0];break;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tname = arguments[0];\n\t\t\t\tability = arguments[1];\n\t\t\t}\n\t\n\t\t\tswitch (typeof ability) {\n\t\t\t\tcase 'object':\n\t\t\t\t\tfor (name in ability) {\n\t\t\t\t\t\tif (!ability.hasOwnProperty(name)) continue;\n\t\n\t\t\t\t\t\tthis.respond(name, ability[name]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 'function':\n\t\t\t\t\tthis.responsibilities.add(new ResponsibilityRecord(name, ability));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.delay = function (_time, _cb) {\n\t\t\tvar time = _util2['default'].toMillisec(_time);\n\t\n\t\t\t_util2['default'].assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.repeat = function (_time, _cb) {\n\t\t\tvar time = _util2['default'].toMillisec(_time);\n\t\n\t\t\t_util2['default'].assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.kill = function (_timer) {\n\t\t\tvar id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\t\n\t\t\tif (typeof id === 'number') {\n\t\t\t\t(_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n\t\t\t\tthis[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n\t\t\t} else if (id) {\n\t\t\t\tid.forEach(function (_id) {\n\t\t\t\t\t(_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n\t\t\t\t});\n\t\n\t\t\t\t_timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.eachFrame = function (_handler, _on) {\n\t\t\tvar binder, frame, lastTime, rate, frames;\n\t\n\t\t\trate = this.frameRate || 1000;\n\t\t\tframes = 0;\n\t\t\tlastTime = 0;\n\t\n\t\t\tif (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n\t\t\t\tframe = function (_time) {\n\t\t\t\t\tvar i, handler;\n\t\n\t\t\t\t\tif (rate) {\n\t\t\t\t\t\tif (_time - lastTime >= 1000 / rate) {\n\t\t\t\t\t\t\tfor (i = 0; handler = this.frameHandlers[i]; i += 1) {\n\t\t\t\t\t\t\t\thandler.call(this, _time, Math.round(1000 / (_time - lastTime)), rate);\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\tif (frames === rate) frames = 0;\n\t\n\t\t\t\t\t\t\tframes += 1;\n\t\t\t\t\t\t\tlastTime = _time;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this.frameHandlers.length) {\n\t\t\t\t\t\twindow.requestAnimationFrame(binder);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\tbinder = this.bind(frame);\n\t\n\t\t\t\t// allows methods passed as _handler's to\n\t\t\t\t// be able to trace back for proto() callbacks.\n\t\t\t\tframe.method = this.eachFrame;\n\t\n\t\t\t\tthis.frameHandlers = _typesCollection2['default'].create();\n\t\t\t\twindow.requestAnimationFrame(binder);\n\t\t\t}\n\t\n\t\t\tif (_on !== false) {\n\t\t\t\tthis.frameHandlers.add(_handler);\n\t\t\t} else {\n\t\t\t\tthis.frameHandlers.remove(_handler);\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.state = function (_flag, _definition, _imp) {\n\t\t\tvar flag, tester, setter, getter, STATE, def, opperations, names;\n\t\n\t\t\tif (!_definition) {\n\t\t\t\treturn this.proto(_flag);\n\t\t\t}\n\t\n\t\t\tdef = _definition.split(/\\s+/);\n\t\t\tnames = _flag.split(/\\s+/);\n\t\t\topperations = [];\n\t\n\t\t\tdef.forEach(this.bind(function (_opp) {\n\t\t\t\tvar method, flag;\n\t\n\t\t\t\tmethod = _opp.slice(0, 1) === '+' ? 'addClass' : 'removeClass';\n\t\n\t\t\t\topperations.push({\n\t\t\t\t\tmethod: method,\n\t\t\t\t\tflag: _opp.slice(1)\n\t\t\t\t});\n\t\n\t\t\t\tif (method === 'addClass') {\n\t\t\t\t\tflag = _opp.slice(1);\n\t\t\t\t\tSTATE = _util2['default'].transformId(flag);\n\t\t\t\t\tthis.STATE[STATE] = flag;\n\t\t\t\t}\n\t\t\t}));\n\t\n\t\t\tsetter = names[0];\n\t\t\ttester = names[1];\n\t\n\t\t\tthis[setter] = function (_target) {\n\t\t\t\tvar target, uiStateEvent, oppsPerformed;\n\t\n\t\t\t\ttarget = resolveTarget.call(this, _target);\n\t\t\t\tuiStateEvent = $.Event('ui-' + setter, {\n\t\t\t\t\ttarget: target.jquery ? target[0] : target,\n\t\t\t\t\ttargetScope: this\n\t\t\t\t});\n\t\t\t\toppsPerformed = 0;\n\t\n\t\t\t\tif (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n\t\t\t\t\treturn !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n\t\t\t\t}\n\t\n\t\t\t\tif (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\t\n\t\t\t\topperations.forEach(function (_record) {\n\t\t\t\t\t// If we are adding or removing a class, test if the target already has/removed it.\n\t\t\t\t\t// If so, then bump \"oppsPerformed\".\n\t\t\t\t\toppsPerformed += Number(target.hasClass(_record.flag) === ! ~_record.method.indexOf('add'));\n\t\t\t\t\ttarget[_record.method](_record.flag);\n\t\t\t\t});\n\t\n\t\t\t\tif (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\t\n\t\t\t\tif (oppsPerformed) {\n\t\t\t\t\tthis.trigger(uiStateEvent);\n\t\t\t\t\treturn target;\n\t\t\t\t}\n\t\n\t\t\t\treturn false;\n\t\t\t};\n\t\n\t\t\tif (tester) {\n\t\t\t\tgetter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\t\n\t\t\t\tthis[tester] = function (_target) {\n\t\t\t\t\tvar target;\n\t\n\t\t\t\t\ttarget = resolveTarget.call(this, _target);\n\t\n\t\t\t\t\treturn target.hasClass(this.STATE[STATE]);\n\t\t\t\t};\n\t\n\t\t\t\tthis[getter] = function () {\n\t\t\t\t\treturn this.findOwn('.' + this.STATE[STATE]);\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.provideBehaviorEventScope = function () {\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.provideAblilityPototype = function () {\n\t\t\tvar owner;\n\t\n\t\t\towner = _util2['default'].getOwner(this, this.baseType);\n\t\n\t\t\treturn !!owner && owner.object;\n\t\t};\n\t\n\t\tthis.completed = function () {\n\t\t\treturn this.game.demoMode || this.hasOwnProperty('isComplete') && this.isComplete || !this.requiredQueue || this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0;\n\t\t};\n\t\n\t\t/**\n\t  * <span class=\"tag behavior\">Behavior</span>\n\t  * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n\t  * @function module:types/Entity~Entity#complete\n\t  * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t  */\n\t\tthis.behavior('complete', function () {\n\t\t\tif (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\t\n\t\t\tthis.isComplete = true;\n\t\t\tthis.addClass('COMPLETE');\n\t\n\t\t\treturn {\n\t\t\t\tbehaviorTarget: this\n\t\t\t};\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag behavior\">Behavior</span>\n\t  * Reports a drggable has been grabbed for dragging.\n\t  * @function module:types/Entity~Entity#grab\n\t  * @arg {object} _state - An object containing the state of a draggable.\n\t  * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t  *\n\t  * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t  */\n\t\tthis.behavior('grab', function (_state) {\n\t\t\treturn {\n\t\t\t\tstate: _state,\n\t\t\t\tbehaviorTarget: _state.$draggable\n\t\t\t};\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag behavior\">Behavior</span>\n\t  * Reports a draggable as being dragged.\n\t  * @function module:types/Entity~Entity#dragging\n\t  * @arg {object} _state - An object containing the state of a draggable.\n\t  * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t  *\n\t  * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t  */\n\t\tthis.behavior('dragging', function (_state) {\n\t\t\treturn {\n\t\t\t\tstate: _state,\n\t\t\t\tbehaviorTarget: _state.$draggable\n\t\t\t};\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag behavior\">Behavior</span>\n\t  * Reports a drggable as released or droped.\n\t  * @function module:types/Entity~Entity#release\n\t  * @arg {object} _state - An object containing the state of a draggable.\n\t  * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t  *\n\t  * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t  */\n\t\tthis.behavior('release', function (_state) {\n\t\t\treturn {\n\t\t\t\tstate: _state,\n\t\t\t\tbehaviorTarget: _state.$draggable\n\t\t\t};\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#open\n\t  * @fires Entity#ui-open\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `OPEN` class name.\n\t  * @function module:types/Entity~Entity#opened\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Open'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `OPEN` class name.\n\t  * @function module:types/Entity~Entity#getOpened\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('open opened', '+OPEN -LEAVE');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#close\n\t  * @fires Entity#ui-close\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\tthis.state('close', '-OPEN');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#leave\n\t  * @fires Entity#ui-leave\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `LEAVE` class name.\n\t  * @function module:types/Entity~Entity#left\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Leave'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `LEAVE` class name.\n\t  * @function module:types/Entity~Entity#getLeft\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('leave left', '+LEAVE', {\n\t\t\twillSet: function willSet(_target) {\n\t\t\t\tthis.close(_target);\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#enable\n\t  * @fires Entity#ui-enable\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `ENABLED` class name.\n\t  * @function module:types/Entity~Entity#enabled\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Enabled'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `ENABLED` class name.\n\t  * @function module:types/Entity~Entity#getEnabled\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('enable enabled', '+ENABLED -DISABLED');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#disable\n\t  * @fires Entity#ui-disable\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `DISABLED` class name.\n\t  * @function module:types/Entity~Entity#disabled\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Disabled'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `DISABLED` class name.\n\t  * @function module:types/Entity~Entity#getDisabled\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('disable disabled', '+DISABLED -ENABLED');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#select\n\t  * @fires Entity#ui-select\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `SELECTED` class name.\n\t  * @function module:types/Entity~Entity#selected\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Selected'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `SELECTED` class name.\n\t  * @function module:types/Entity~Entity#getDisabled\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('select selected', '+SELECTED', {\n\t\t\twillSet: function willSet(_target) {\n\t\t\t\tvar target, $parent;\n\t\n\t\t\t\ttarget = resolveTarget.call(this, _target);\n\t\t\t\t$parent = target.parent();\n\t\n\t\t\t\t$parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n\t\t\t\t\tthis.deselect(_node);\n\t\t\t\t}));\n\t\t\t\t$parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n\t\t\t\t\tthis.unhighlight(_node);\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#deselect\n\t  * @fires Entity#ui-deselect\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\tthis.state('deselect', '-SELECTED');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#highlight\n\t  * @fires Entity#ui-highlight\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n\t  * @function module:types/Entity~Entity#highlighted\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Highlighted'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `HIGHLIGHTED` class name.\n\t  * @function module:types/Entity~Entity#getHighlighted\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('highlight highlighted', '+HIGHLIGHTED');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#unhighlight\n\t  * @fires Entity#ui-unhighlight\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\tthis.state('unhighlight', '-HIGHLIGHTED');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#draggable\n\t  * @fires Entity#ui-draggable\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n\t  * @function module:types/Entity~Entity#dragEnabled\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Draggable'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `DRAGGABLE` class name.\n\t  * @function module:types/Entity~Entity#getDragEnabled\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('draggable dragEnabled', '+DRAGGABLE', {\n\t\t\tdidSet: function didSet(_target) {\n\t\t\t\tthis.translate(resolveTarget.call(this, _target));\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#undraggable\n\t  * @fires Entity#ui-undraggable\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\tthis.state('undraggable', '-DRAGGABLE');\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n\t  * @function module:types/Entity~Entity#translate\n\t  * @fires Entity#ui-translate\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n\t  * @function module:types/Entity~Entity#translate\n\t  * @fires Entity#ui-translate\n\t  * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t  * @returns `this`\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n\t  * @function module:types/Entity~Entity#translated\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns {Boolean} Translate'ness.\n\t  */\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Provides the elements with the `TRANSLATED` class name.\n\t  * @function module:types/Entity~Entity#getTranslated\n\t  * @returns {jQuery} jQuery collection of matched nodes.\n\t  * @todo Return scope if available.\n\t  */\n\t\tthis.state('translate translated', '+TRANSLATED', {\n\t\t\twillSet: function willSet(_target_point, _point) {\n\t\t\t\tvar point, target;\n\t\n\t\t\t\ttarget = resolveTarget.call(this, _target_point);\n\t\t\t\tpoint = ! ~[_target_point.x, _target_point.y].indexOf(undefined) ? _target_point : _point;\n\t\n\t\t\t\tif (point) {\n\t\t\t\t\ttarget.css('transform', 'translateX(' + point.x + 'px) translateY(' + point.y + 'px)');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * <span class=\"tag state\">State</span>\n\t  * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n\t  * @function module:types/Entity~Entity#untranslate\n\t  * @fires Entity#ui-untranslate\n\t  * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t  * @returns `this`\n\t  */\n\t\tthis.state('untranslate', '-TRANSLATED', {\n\t\t\twillSet: function willSet() {\n\t\t\t\tthis.css('transform', 'none');\n\t\t\t}\n\t\t});\n\t\n\t\tthis.state('gate gated', '+GATED');\n\t});\n\t\n\texports['default'] = { Entity: Entity, invokeResponsibilities: invokeResponsibilities };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 94 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports.__esModule = true;\n\t/**\n\t*  Screen\n\t*  @desc Contains...\n\t*  @proto Entity\n\t*/\n\t\n\tvar _typesEntity = __webpack_require__(93);\n\t\n\tvar Screen = _typesEntity.Entity.extend(function () {\n\t\n\t\tfunction attachBehaviorEvent() {\n\t\t\tthis.on('behavior', function (_event) {\n\t\t\t\t// console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\t\n\t\t\t\tif (this !== _event.targetScope) {\n\t\t\t\t\t_typesEntity.invokeResponsibilities(this, _event);\n\t\t\t\t}\n\t\n\t\t\t\tthis.propagateBehavior(_event);\n\t\t\t});\n\t\t}\n\t\n\t\tthis.baseType = 'TYPE_SCREEN';\n\t\tthis.game = null;\n\t\tthis.screen = null;\n\t\n\t\tthis.__init = function () {\n\t\t\tthis.proto();\n\t\n\t\t\tif (this.is(pl.game.config('screenSelector'))) {\n\t\t\t\tattachBehaviorEvent.call(this);\n\t\t\t}\n\t\t};\n\t\n\t\tthis.start = function () {\n\t\t\tthis.startAudio();\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.stop = function () {\n\t\t\tthis.stopAudio();\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.pause = function () {\n\t\t\tthis.pauseMedia();\n\t\t\tif (this.hasOwnProperty('entities') && this.entities) {\n\t\t\t\tthis.entities.forEach(function (entity) {\n\t\t\t\t\tif (typeof entity.pause === 'function') entity.pause();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.resume = function () {\n\t\t\tthis.resumeMedia();\n\t\t\tif (this.hasOwnProperty('entities') && this.entities) {\n\t\t\t\tthis.entities.forEach(function (entity) {\n\t\t\t\t\tif (typeof entity.resume === 'function') entity.resume();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.startAudio = function () {\n\t\t\tif (!this.audio) return;\n\t\t\tthis.audio.background.play();\n\t\t\tthis.audio.voiceOver.play();\n\t\t};\n\t\n\t\tthis.stopAudio = function () {\n\t\t\tif (!this.audio) return;\n\t\t\tthis.audio.voiceOver.stop('@ALL');\n\t\t};\n\t\n\t\tthis.pauseMedia = function () {\n\t\t\tif (!this.currentMedia) return;\n\t\t\tfor (var media in this.currentMedia) {\n\t\t\t\tif (this.currentMedia.hasOwnProperty(media)) {\n\t\t\t\t\tif (this.currentMedia[media]) this.currentMedia[media].pause();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tthis.resumeMedia = function () {\n\t\t\tif (!this.currentMedia) return;\n\t\t\tfor (var media in this.currentMedia) {\n\t\t\t\tif (this.currentMedia.hasOwnProperty(media)) {\n\t\t\t\t\tif (this.currentMedia[media]) this.currentMedia[media].resume();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tthis.index = function () {\n\t\t\tif (this === this.screen) return this.game.screens.indexOf(this);\n\t\t\treturn this.$els.index();\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tif (!this.completed()) return false;\n\t\t\treturn this.game.screens[this.screen.index() + 1];\n\t\t};\n\t\n\t\tthis.prev = function () {\n\t\t\treturn this.game.screens[this.screen.index() - 1];\n\t\t};\n\t\n\t\tthis.quit = function () {\n\t\t\tthis.game.quit.open();\n\t\t};\n\t\n\t\tthis.nextSib = function () {\n\t\t\treturn $.fn.next.apply(this.$els, arguments);\n\t\t};\n\t\n\t\tthis.prevSib = function () {\n\t\t\treturn $.fn.prev.apply(this.$els, arguments);\n\t\t};\n\t\n\t\tthis.isLast = function () {\n\t\t\treturn this.game.screens.indexOf(this.screen) === this.game.screens.length - 1;\n\t\t};\n\t});\n\t\n\texports['default'] = Screen;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 95 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _Object$defineProperties = __webpack_require__(15)['default'];\n\t\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * Node scope for the top level game node.\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _playGame = __webpack_require__(24);\n\t\n\tvar _playGame2 = _interopRequireDefault(_playGame);\n\t\n\tvar _typesGlobalScope = __webpack_require__(30);\n\t\n\tvar _typesGlobalScope2 = _interopRequireDefault(_typesGlobalScope);\n\t\n\tvar _typesScreen = __webpack_require__(94);\n\t\n\tvar _typesScreen2 = _interopRequireDefault(_typesScreen);\n\t\n\tvar _typesCollection = __webpack_require__(29);\n\t\n\tvar _typesCollection2 = _interopRequireDefault(_typesCollection);\n\t\n\tvar _typesScope = __webpack_require__(31);\n\t\n\tvar _typesDimensions = __webpack_require__(14);\n\t\n\tvar _typesAudioManager = __webpack_require__(42);\n\t\n\tvar Game = _typesGlobalScope2['default'].extend(function () {\n\t\n\t\tvar Viewport, screenPrototype, platformEventHandler;\n\t\n\t\t/**\n\t  * Detects the device and adds the appropriate state classes.\n\t  */\n\t\tfunction detechDevice() {\n\t\t\tvar deviceClasses = \"\";\n\t\n\t\t\tif (iOS()) deviceClasses += \"iOS \";\n\t\t\tif (mobileOrTablet()) deviceClasses += \"MOBILE \";\n\t\n\t\t\tthis.addClass(deviceClasses);\n\t\t}\n\t\n\t\tfunction iOS() {\n\t\t\tvar iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'];\n\t\n\t\t\tif (!!navigator.platform) {\n\t\t\t\twhile (iDevices.length) {\n\t\t\t\t\tif (navigator.platform === iDevices.pop()) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t}\n\t\n\t\tfunction mobileOrTablet() {\n\t\t\tvar check = false;\n\t\t\t(function (a) {\n\t\t\t\tif (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n\t\t\t})(navigator.userAgent || navigator.vendor || window.opera);\n\t\t\treturn check;\n\t\t}\n\t\n\t\t/**\n\t  * Scales the game view to fill the browser window.\n\t  */\n\t\tfunction scaleGame() {\n\t\t\tvar vpSize, gameDimensions, width, height, zoom;\n\t\n\t\t\tvpSize = this.viewport.size();\n\t\t\tgameDimensions = _playGame2['default'].config('dimensions');\n\t\t\twidth = gameDimensions.width || this.width();\n\t\t\theight = Math.round(gameDimensions.width / gameDimensions.ratio);\n\t\t\tzoom = this.viewport.width / width;\n\t\n\t\t\tif (Math.round(height * zoom) > this.viewport.height) {\n\t\t\t\tzoom = (this.viewport.height / height).toPrecision(4);\n\t\t\t}\n\t\n\t\t\t_util2['default'].mixin(this.node().style, {\n\t\t\t\twidth: width + 'px',\n\t\t\t\tzoom: zoom\n\t\t\t});\n\t\n\t\t\tif (!this.css('zoom')) {\n\t\t\t\tthis.css({\n\t\t\t\t\ttransform: 'scale(' + zoom + ')',\n\t\t\t\t\ttransformOrigin: (zoom < 1 ? '0px' : '50%') + ' 0px 0px',\n\t\t\t\t\theight: this.viewport.height / zoom\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tthis.zoom = zoom;\n\t\t}\n\t\n\t\tfunction demoMode(_set) {\n\t\t\tthis.demoMode = _set != null ? _set : !this.demoMode;\n\t\t\tthis[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\t\n\t\t\tconsole.info(this.id(), 'is now ' + (this.demoMode ? 'in' : 'out of') + ' Demo Mode.');\n\t\t}\n\t\n\t\tfunction collectVideos() {\n\t\t\tthis.find('video').each((function (_index, _node) {\n\t\t\t\tthis.media.video.add(_node);\n\t\n\t\t\t\t_node.onplay = (function () {\n\t\t\t\t\tvar playing = this.media.playing('.background, .voiceOver');\n\t\t\t\t\tif (playing) playing.stop('@ALL');\n\t\t\t\t\tthis.log('video play', playing);\n\t\t\t\t}).bind(this);\n\t\t\t}).bind(this));\n\t\t}\n\t\n\t\tscreenPrototype = _typesScreen2['default'];\n\t\tplatformEventHandler = new function () {\n\t\n\t\t\tthis.invoke = function (_event, _ctx) {\n\t\t\t\tif (typeof this[_event.name] === 'function') {\n\t\t\t\t\tthis[_event.name].call(_ctx, _event);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis['toggle-demo-mode'] = function (_set) {\n\t\t\t\tdemoMode.call(this);\n\t\t\t};\n\t\t}();\n\t\n\t\tthis.baseType = 'TYPE_GAME';\n\t\tthis.screens = null;\n\t\tthis.zoom = 1;\n\t\tthis.keyCommands = null;\n\t\tthis.demoMode = false;\n\t\tthis.media = null;\n\t\tthis.viewport = new function () {\n\t\t\tvar vp, $html, RESIZE_HANDLERS;\n\t\n\t\t\tvp = this;\n\t\t\t$html = $('html');\n\t\t\tRESIZE_HANDLERS = [];\n\t\n\t\t\t$(window).on('resize', function (_event) {\n\t\t\t\tif (!$html.hasClass(vp.orientation)) {\n\t\t\t\t\t$html.removeClass('squareish landscape protrait').addClass(vp.orientation);\n\t\t\t\t}\n\t\n\t\t\t\tRESIZE_HANDLERS.forEach(function (_handler) {\n\t\t\t\t\t_handler(_event);\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\tthis.LANDSCAPE = 'landscape';\n\t\t\tthis.PROTRAIT = 'protrait';\n\t\t\tthis.SQUAREISH = 'squareish';\n\t\n\t\t\tthis.size = function () {\n\t\t\t\treturn _typesDimensions.Size.create().set(window.innerWidth, window.innerHeight);\n\t\t\t};\n\t\n\t\t\t_Object$defineProperties(this, {\n\t\t\t\twidth: {\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\treturn window.innerWidth;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tconfigurable: false\n\t\t\t\t},\n\t\n\t\t\t\theight: {\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\treturn window.innerHeight;\n\t\t\t\t\t},\n\t\n\t\t\t\t\tconfigurable: false\n\t\t\t\t},\n\t\n\t\t\t\torientation: {\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tvar ratio = this.size().ratio();\n\t\n\t\t\t\t\t\tswitch (true) {\n\t\t\t\t\t\t\tcase ratio > 0.9 && ratio < 1.1:\n\t\t\t\t\t\t\t\treturn 'squareish';\n\t\t\t\t\t\t\tcase ratio > 1.1:\n\t\t\t\t\t\t\t\treturn 'landscape';\n\t\t\t\t\t\t\tcase ratio < 0.9:\n\t\t\t\t\t\t\t\treturn 'protrait';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tthis.onResize = function (_handler) {\n\t\t\t\tRESIZE_HANDLERS.push(_handler);\n\t\t\t};\n\t\n\t\t\tthis.offResize = function (_handler) {\n\t\t\t\tvar index = RESIZE_HANDLERS.indexOf(_handler);\n\t\n\t\t\t\tif (~index) RESIZE_HANDLERS.splice(index, 1);\n\t\t\t};\n\t\n\t\t\t$html.addClass(this.orientation);\n\t\t}();;\n\t\n\t\tthis.willInit = function () {\n\t\t\tthis.addClass('pl-game');\n\t\n\t\t\tdetechDevice.call(this);\n\t\t\tscaleGame.call(this);\n\t\t\tthis.watchAudio();\n\t\t\tthis.captureScreens();\n\t\n\t\t\tthis.viewport.onResize(this.bind(scaleGame));\n\t\n\t\t\tpl.game.on('platform-event', this.bind(function (_event) {\n\t\t\t\tplatformEventHandler.invoke(_event, this);\n\t\t\t}));\n\t\n\t\t\twindow.addEventListener('load', window.focus);\n\t\t\twindow.addEventListener('focus', (function () {\n\t\t\t\tthis.resume();\n\t\t\t}).bind(this));\n\t\t\twindow.addEventListener('blur', (function () {\n\t\t\t\tthis.pause();\n\t\t\t}).bind(this));\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\t/**\n\t  * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n\t  * ### Key Names\n\t  * - *meta*: Command (aka Apple  or win)\n\t  * - *alt*: Alt (aka Option )\n\t  * - *shift*: Shift \n\t  * - *ctrl*: Control ^\n\t  * - *enter*: Enter or Return\n\t  * - *esc*: Escape\n\t  * - *left*: Left arrow\n\t  * - *up*: Up arrow\n\t  * - *right*: Right arrow\n\t  * - *down*: Down arrow\n\t  *\n\t  * ### Example\n\t  * ```javascript\n\t  * // Overriding print.\n\t  * this.game.onKeys('cmd+P', printHandler);\n\t  *\n\t  * // Holding Control and pressing \"K\" then \"B\"\n\t  * this.game.onKeys('ctrl+K,B', handler);\n\t  * ```\n\t  * @arg {string} _commands - The key or sequence of keys.\n\t  * @arg {function} _handler - Your event handler for when you key pattern is matched.\n\t  * @returns `this`\n\t  */\n\t\tthis.onKeys = function (_commands, _handler) {\n\t\t\tvar sequence, chords, modifiers, map;\n\t\n\t\t\tif (!this.keyCommands) {\n\t\t\t\tthis.keyCommands = {};\n\t\n\t\t\t\tmap = {\n\t\t\t\t\t13: 'enter',\n\t\t\t\t\t16: 'shift',\n\t\t\t\t\t17: 'ctrl',\n\t\t\t\t\t18: 'alt',\n\t\t\t\t\t27: 'esc',\n\t\t\t\t\t37: 'left',\n\t\t\t\t\t38: 'up',\n\t\t\t\t\t39: 'right',\n\t\t\t\t\t40: 'down',\n\t\t\t\t\t91: 'meta',\n\t\t\t\t\tenter: 13,\n\t\t\t\t\tshift: 16,\n\t\t\t\t\tctrl: 17,\n\t\t\t\t\talt: 18,\n\t\t\t\t\tesc: 27,\n\t\t\t\t\tleft: 37,\n\t\t\t\t\tup: 38,\n\t\t\t\t\tright: 39,\n\t\t\t\t\tdown: 40,\n\t\t\t\t\tmeta: 91\n\t\t\t\t};\n\t\n\t\t\t\tmodifiers = [16, 17, 18, 91];\n\t\t\t\tsequence = [];\n\t\t\t\tchords = [];\n\t\n\t\t\t\tthis.on('keydown', function (_event) {\n\t\t\t\t\tvar modifier, key, eventMods, currentMods, command, handler;\n\t\n\t\t\t\t\tmodifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t\t\t\t\tkey = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t\t\t\t\teventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t\t\t\t\tcurrentMods = [];\n\t\n\t\t\t\t\t// Collect the modifiers the event says are still down.\n\t\t\t\t\teventMods.forEach(function (_modifierDown, _index) {\n\t\t\t\t\t\t// use the modifier name\n\t\t\t\t\t\tif (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t\t\t\t\t});\n\t\n\t\t\t\t\t// Don't add keys we already have during rapid-fire events\n\t\t\t\t\tif (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\t\n\t\t\t\t\t// Construct the command\n\t\t\t\t\tcommand = chords.length ? (chords.push(key), chords.join(',')) : (sequence.push(key), sequence.join('+'));\n\t\n\t\t\t\t\thandler = this.keyCommands[command];\n\t\n\t\t\t\t\tif (handler) {\n\t\t\t\t\t\thandler.call(this, _event, command);\n\t\t\t\t\t\t// Keep current modifiers.\n\t\t\t\t\t\tsequence = currentMods.map(function (_key, _index) {\n\t\t\t\t\t\t\tvar key = sequence[_index];\n\t\t\t\t\t\t\treturn currentMods[currentMods.indexOf(key)];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tchords = [];\n\t\n\t\t\t\t\t\t// Override original key command (i.e. meta+Q).\n\t\t\t\t\t\t_event.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tthis.on('keyup', function (_event) {\n\t\t\t\t\tvar key, index, modifier, eventMods, currentMods;\n\t\n\t\t\t\t\tkey = modifier ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t\t\t\t\tindex = sequence.indexOf(key);\n\t\t\t\t\tmodifier = !! ~modifiers.indexOf(_event.keyCode) && map[_event.keyCode];\n\t\t\t\t\t// Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n\t\t\t\t\teventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t\t\t\t\tcurrentMods = [];\n\t\n\t\t\t\t\t// Collect the modifiers the event says are still down.\n\t\t\t\t\teventMods.forEach(function (_modifierDown, _index) {\n\t\t\t\t\t\t// use the modifier name\n\t\t\t\t\t\tif (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t\t\t\t\t});\n\t\n\t\t\t\t\t// If the key released is a modifier...\n\t\t\t\t\tif (key === modifier) {\n\t\t\t\t\t\t// ...keep current modifiers...\n\t\t\t\t\t\tsequence = currentMods.map(function (_key, _index) {\n\t\t\t\t\t\t\tvar key = sequence[_index];\n\t\t\t\t\t\t\treturn currentMods[currentMods.indexOf(key)];\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// ...clear registered chords.\n\t\t\t\t\t\tchords = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If we had pressed more than one key...\n\t\t\t\t\t\tif (sequence.length > 1) {\n\t\t\t\t\t\t\t// Check if the first is a modifier then switch to chord capturing\n\t\t\t\t\t\t\tif (~modifiers.indexOf(map[sequence[0]])) {\n\t\t\t\t\t\t\t\tchords.push(sequence.join('+'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (~index) sequence.splice(index, 1);\n\t\t\t\t\t\tif (!sequence.length) chords = [];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tthis.keyCommands[_commands] = _handler;\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.screen = function (_id, _implementation) {\n\t\t\tvar prototype, selector, screenSelector, instance;\n\t\n\t\t\tif (arguments.length === 1 && typeof _id === 'function') {\n\t\t\t\tscreenPrototype = _typesScreen2['default'].extend(_id);\n\t\t\t\treturn this;\n\t\t\t}\n\t\n\t\t\tif (!this.hasOwnProperty('screens')) this.screens = _typesCollection2['default'].create();\n\t\n\t\t\tif (this.hasOwnProperty('$els')) {\n\t\t\t\tdebugger;\n\t\t\t\tscreenSelector = pl.game.config('screenSelector');\n\t\t\t\tprototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t\t\t\tselector = typeof _id === 'number' ? screenSelector + ':nth-child(' + (_id + 1) + ')' : '#' + _id;\n\t\t\t\tinstance = prototype.extend(_implementation).initialize(this.find(selector));\n\t\n\t\t\t\tinstance.screen = instance;\n\t\t\t\tif (!instance.game) {\n\t\t\t\t\tinstance.game = instance.closest('.pl-game').scope();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.screens.push({\n\t\t\t\t\tindex: typeof _id === 'number' ? _id : null,\n\t\t\t\t\tname: typeof _id === 'string' ? _id : null,\n\t\t\t\t\timplementation: _implementation\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.captureScreens = function () {\n\t\t\tvar screenSelector, prototype, collection;\n\t\n\t\t\tscreenSelector = pl.game.config('screenSelector');\n\t\t\tprototype = screenPrototype.isPrototypeOf(this) ? this : screenPrototype;\n\t\t\tcollection = [];\n\t\n\t\t\tthis.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n\t\t\t\tvar $node, screen, record, key, id, index, component;\n\t\n\t\t\t\t$node = $(_node);\n\t\t\t\tid = $node.id();\n\t\t\t\tkey = id ? 'name' : (id = _index, 'index');\n\t\t\t\trecord = this.screens && this.screens.get(id, key);\n\t\t\t\tcomponent = $node.attr('pl-component');\n\t\t\t\tscreen = _typesScope.createEntity.call(prototype, $node, record && record.implementation);\n\t\t\t\tscreen.screen = screen;\n\t\t\t\tscreen.game = this;\n\t\n\t\t\t\tif ($node.attr('pl-skip') == null) collection.push(screen);\n\t\n\t\t\t\tif (key === 'name' || component) {\n\t\t\t\t\t_util2['default'].assignRef(this, _util2['default'].transformId(key === 'name' && id || component, true), screen);\n\t\t\t\t}\n\t\t\t}));\n\t\n\t\t\tif (collection.length) this.screens = collection;\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.watchAudio = function () {\n\t\t\tthis.media = _typesAudioManager.MediaManager.create(this.id());\n\t\n\t\t\t/**\n\t   * Prevent duplicate playback of voiceOvers and backgrounds.\n\t   */\n\t\t\tthis.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n\t\t\t\tvar playing = this.playing() || [];\n\t\t\t\t// shouldPlay = false if _event.target is already playing.\n\t\t\t\t_event.response(!playing || !playing.length || ! ~playing.indexOf(_event.target) && !playing.has(_event.target.fileName));\n\t\t\t});\n\t\n\t\t\t/**\n\t   * \n\t   */\n\t\t\tthis.media.rule('.voiceOver', function (_event) {\n\t\t\t\tvar audio, playing;\n\t\n\t\t\t\taudio = _event.target;\n\t\t\t\tplaying = audio && this.playing('.audio:not(#' + audio.id() + ')');\n\t\n\t\t\t\tswitch (_event.type) {\n\t\t\t\t\tcase 'play':\n\t\t\t\t\t\tif (playing) {\n\t\t\t\t\t\t\tplaying.filter('.voiceOver').stop('@ALL');\n\t\t\t\t\t\t\tplaying.filter('.background').volume(_playGame2['default'].config('bgVolume.drop') || 0.2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 'pause':\n\t\t\t\t\tcase 'stopped':\n\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\tif (playing) playing.filter('.background').volume(_playGame2['default'].config('bgVolume.max') || 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tthis.media.rule('.background', 'play', function (_event) {\n\t\t\t\tvar playing = this.playing('.background:not(#' + _event.target.id() + ')');\n\t\t\t\tif (playing) playing.stop('@ALL');\n\t\t\t});\n\t\n\t\t\tif (~pl.EVENT.ACTION.indexOf('touch')) {\n\t\t\t\tthis.on(pl.EVENT.ACTION, function beginAudio(_event) {\n\t\t\t\t\tvar ctx, screen;\n\t\n\t\t\t\t\tctx = _playGame2['default'].getAudioContext();\n\t\t\t\t\tscreen = this.currentScreen();\n\t\n\t\t\t\t\tif (screen && ctx && ctx.state === 'suspended') {\n\t\t\t\t\t\t_playGame2['default'].enableAudioContext();\n\t\t\t\t\t\tthis.log('awesome!');\n\t\t\t\t\t\tscreen.startAudio();\n\t\t\t\t\t\tthis.off(pl.EVENT.ACTION, beginAudio);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tcollectVideos.call(this);\n\t\t};\n\t\n\t\tthis.progress = function () {\n\t\t\treturn {\n\t\t\t\tcurrentScreen: this.currentScreen().index()\n\t\t\t};\n\t\t};\n\t\n\t\tthis.currentScreen = function () {\n\t\t\treturn this.findOwn(pl.game.config('screenSelector') + '.OPEN').not('#quit').scope();\n\t\t};\n\t\n\t\tthis.flip = function () {\n\t\t\tconsole.log('THATS A FLIP!');\n\t\t\t_playGame2['default'].report.flip(this);\n\t\t};\n\t\n\t\tthis.pause = function (quitScreen) {\n\t\t\tif (!quitScreen) this.addClass('PAUSED');\n\t\t\tthis.screens.forEach(function (screen) {\n\t\t\t\tif (screen.state(screen.STATE.OPEN)) {\n\t\t\t\t\tscreen.pause();\n\t\t\t\t}\n\t\t\t});\n\t\t\t_playGame2['default'].getAudioContext().suspend();\n\t\t};\n\t\n\t\tthis.resume = function () {\n\t\t\tthis.removeClass('PAUSED');\n\t\t\tthis.screens.forEach(function (screen) {\n\t\t\t\tif (screen.state(screen.STATE.OPEN)) screen.resume();\n\t\t\t});\n\t\t\tif (!this.hasClass('QUIT-SCREEN')) _playGame2['default'].getAudioContext().resume();\n\t\t};\n\t\n\t\tthis.exit = function () {\n\t\t\tconsole.log('GOODBYE!');\n\t\t\t_playGame2['default'].report.exit(this);\n\t\t};\n\t\n\t\t/**\n\t  * Demo mode key command\n\t  */\n\t\tthis.onKeys('ctrl+D,M', function () {\n\t\t\tdemoMode.call(this);\n\t\t});\n\t\n\t\t/**\n\t  * Keyboard screen navigation\n\t  */\n\t\tthis.onKeys('left', function () {\n\t\t\tvar current;\n\t\n\t\t\tcurrent = this.currentScreen();\n\t\n\t\t\tif (current) current.prev();\n\t\t});\n\t\n\t\tthis.onKeys('right', function () {\n\t\t\tvar current;\n\t\n\t\t\tcurrent = this.currentScreen();\n\t\n\t\t\tif (current) current.next();\n\t\t});\n\t});\n\t\n\texports['default'] = Game;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar _interopRequireDefault = __webpack_require__(2)['default'];\n\t\n\texports.__esModule = true;\n\t/**\n\t * API for communicaion between a game and the platform.\n\t *\n\t * @module\n\t */\n\t\n\tvar _util = __webpack_require__(18);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar platform = new function () {\n\t\n\t\tfunction createEvent(_name, _props) {\n\t\t\tvar eventObject;\n\t\n\t\t\teventObject = _util2['default'].mixin(new Event('game-event', { bubbles: true, cancelable: false }), {\n\t\t\t\tname: _name,\n\t\t\t\trespond: function respond(_data) {\n\t\t\t\t\tvar platformEvent;\n\t\n\t\t\t\t\tplatformEvent = $.Event('platform-event', {\n\t\t\t\t\t\tname: _name,\n\t\t\t\t\t\tgameData: _data\n\t\t\t\t\t});\n\t\n\t\t\t\t\tpl.game.trigger(platformEvent);\n\t\t\t\t}\n\t\t\t}, _props);\n\t\n\t\t\treturn eventObject;\n\t\t}\n\t\n\t\tthis.EVENT_INIT = 'init';\n\t\tthis.EVENT_SAVE = 'save';\n\t\tthis.EVENT_EXIT = 'exit';\n\t\tthis.EVENT_FLIPPED = 'flipped';\n\t\n\t\tthis.emit = function (_name) {\n\t\t\tif (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name));\n\t\t};\n\t\n\t\tthis.saveGameState = function (_data) {\n\t\t\tif (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n\t\t};\n\t\n\t\twindow.addEventListener('platform-event', function (_event) {\n\t\t\tvar platformEvent;\n\t\n\t\t\tplatformEvent = $.Event('platform-event', {\n\t\t\t\tname: _event.name\n\t\t\t});\n\t\n\t\t\tpl.game.trigger(platformEvent);\n\t\t});\n\t}();\n\t\n\texports['default'] = platform;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** play.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 135fe33fdc9e64b9e63d\n **/","/**\n * Boot file for the Play library.\n *\n * @module\n *\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires jQExtentions\n * @requires play\n */\nimport 'jQExtentions';\nimport play from 'play';\n\n/**\n * Begin running the library\n */\nfunction run () {\n\tplay.game.run();\n}\n\n// export namespace to global object.\nwindow.play = window.pl = play;\n\n// Invoke 'run' when DOM has finished loading.\ndocument.addEventListener('DOMContentLoaded', run, false);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/main.js\n **/","module.exports = require(\"./interopRequireDefault.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interop-require-default.js\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/interopRequireDefault.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\n * Extentions to jQuery used by the library.\n * \n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires types/Dimensions\n * @requires Matrix\n */\nimport { Point, Size } from 'types/Dimensions';\nimport Matrix from 'lib/matrix';\n\n/**\n * jQuery's prototype\n * @external jQuery\n * @see {@link http://api.jquery.com/}\n */\n\n(function () {\n\tvar original;\n\n\toriginal = {\n\t\tposition: this.position\n\t};\n\n\t/**\n\t * Resolves the scope for each of the set of matched nodes.\n\t * @function external:jQuery#scope\n\t * @returns {Scope|array} Scope - for 1 result. array - for multiple.\n\t */\n\tthis.scope = function () {\n\t\tvar result;\n\n\t\tresult = [];\n\n\t\tthis.each(function () {\n\t\t\tvar $node, scope;\n\n\t\t\t$node = $(this)\n\t\t\tscope = $node.data('pl-scope');\n\t\t\t\n\t\t\tif (!scope) {\n\t\t\t\tscope = $node.closest('.pl-scope').data('pl-scope');\n\t\t\t}\n\n\t\t\tif (scope) result.push(scope);\n\t\t});\n\n\t\treturn (result.length > 1) ? result : result[0];\n\t};\n\n\t/**\n\t * Resolves the id on the first node in the collection. The id can be sourced from a node's 'id', 'pl-id' or 'pl-component' arguments.\n\t * @function external:jQuery#id\n\t * @arg {string} [_set] Name to set as the node's id.\n\t * @returns {string} The resolved id.\n\t */\n\tthis.id = function (_set) {\n\t\tif (_set !== undefined) {\n\t\t\t// Remove attribute.\n\t\t\tif (~['', null].indexOf(_set)) {\n\t\t\t\tthis.attr('id', null);\n\t\t\t}\n\n\t\t\t// If document already has the id defined then set as a unique library id.\n\t\t\tif ($('#'+_set).length) {\n\t\t\t\tthis.attr('pl-id', _set);\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tthis.attr('id', _set);\n\t\t\t}\n\t\t\t\n\t\t\treturn this;\n\t\t}\n\n\t\treturn this.attr('id') || this.attr('pl-id') || this.attr('pl-component');\n\t};\n\n\t/**\n\t * Provides the 'relative' CSS selector for the first node in the collection.\n\t * @function external:jQuery#address\n\t * @returns {string}\n\t *\n\t * @example\n\t * // HTML: <div id=\"sweater\" class=\"wide\"></div>\n\t * $('#sweater').address() // div#sweater.wide\n\t */\n\tthis.address = function () {\n\t\tvar tag, id, classes;\n\n\t\ttag = this[0].nodeName.toLowerCase();\n\t\tid = this.attr('id');\n\t\tclasses = this.attr('class') ? '.'+this.attr('class').split(' ').join('.') : '';\n\t\t\n\t\treturn tag+(id ? '#'+id : '')+classes;\n\t};\n\n\t/**\n\t * Provides a node's UPPER CASE class names. Given '_test' it will check if the node has the class.\n\t * @function external:jQuery#state\n\t * @arg {string} [_test] The UPPER CASE class name to test on the first node in the collection.\n\t * @returns {string|array|boolean} string - for one result. array - for multiple. boolean - for tests.\n\t */\n\tthis.state = function (_test) {\n\t\tvar classes;\n\n\t\tif (_test) return this.hasClass(_test.toUpperCase());\n\n\t\tclasses = (this.attr('class') || '').match(/[0-9A-Z]+(?:-[0-9A-Z]+)?/g);\n\n\t\treturn classes && (classes.length === 1 ? classes[0] : classes);\n\t};\n\n\tthis.size = function () {\n\t\tvar size;\n\n\t\tif (!arguments.length) {\n\t\t\tsize = Size.create().set(this.width(), this.height());\t\n\t\t} else {\n\t\t\tsize = Size.create(arguments);\n\t\t\tthis.css(size);\n\t\t}\n\n\t\treturn size;\n\t};\n\n\tthis.position = function () {\n\t\tvar pos;\n\n\t\tif (!arguments.length) {\n\t\t\tpos = original.position.call(this);\n\t\t\tpos = Point.create().set(pos.left, pos.top);\n\t\t} else {\n\t\t\tpos = Point.create(arguments);\n\n\t\t\tthis.css({\n\t\t\t\tposition: 'relative',\n\t\t\t\tleft: pos.x,\n\t\t\t\ttop: pos.y\n\t\t\t});\n\t\t}\n\n\t\treturn pos;\n\t};\n\n\t/**\n\t * Provides the jQuery offset for the first node in the collection.\n\t * Given a point, all nodes in the collection will get {position: absolute;} to the corrdinates.\n\t * @function external:jQuery#absolutePosition\n\t * @returns {Point}\n\t */\n\tthis.absolutePosition = function () {\n\t\tvar offset;\n\n\t\tif (!arguments.length) {\n\t\t\toffset = this.offset();\n\n\t\t\treturn Point.create().set(offset.left, offset.top);\n\t\t}\n\n\t\telse {\n\t\t\toffset = Point.create(arguments);\n\n\t\t\tthis.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: offset.y,\n\t\t\t\tleft: offset.x\n\t\t\t});\n\n\t\t\treturn offset;\n\t\t}\n\t};\n\t\n\t/**\n\t * Sets a CSS matrix transform on all nodes in the collection. (overloaded)\n\t * @function external:jQuery#transform\n\t * @arg {number} [_scaleX] - scale x\n\t * @arg {number} [_shearY] - shear y\n\t * @arg {number} [_shearX] - shear x\n\t * @arg {number} [_scaleY] - scale y\n\t * @arg {number} [_translateX] - translate x\n\t * @arg {number} [_translateY] - translate y\n\t * @returns {Matrix}\n\t */\n\n\t/**\n\t * Provides the CSS matrix transform for the first node in the collection.\n\t * @function external:jQuery#transform\n\t * @returns {Matrix}\n\t */\n\tthis.transform = function () {\n\t\tvar t, matrix, is3d;\n\t\t\n\t\tmatrix = new Matrix();\n\t\t\n\t\tif (!arguments.length) {\n\t\t\tt = this.css('transform');\n\t\t\tis3d = !!~t.indexOf('matrix3d');\n\n\t\t\tif (t !== 'none') {\n\t\t\t\tt = ((t.match(/\\(([,\\d\\.\\s\\-]+)\\)/) || [])[1] || '').split(/\\s*,\\s*/);\n\t\t\t\tif (is3d) {\n\t\t\t\t\tt = (function (_matrix) {\n\t\t\t\t\t\tvar i, result;\n\n\t\t\t\t\t\tresult = [];\n\n\t\t\t\t\t\tfor (i=0; i < _matrix.length; i+=4) {\n\t\t\t\t\t\t\tresult = result.concat(_matrix.slice(i, i+2))\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}(t));\n\t\t\t\t}\n\n\t\t\t\tt = t.map(parseFloat);\n\n\t\t\t\tmatrix.setTransform.apply(matrix, t);\n\n\t\t\t\treturn matrix;\n\t\t\t}\n\n\t\t\treturn t;\n\t\t}\n\n\t\tmatrix.setTransform.apply(matrix, arguments);\n\n\t\tthis.css('transform', matrix.toCSS());\n\n\t\treturn matrix;\n\t};\n\n\t/**\n\t * Getter/Setter for the CSS transform translation. (overloaded)\n\t * @function external:jQuery#transformPosition\n\t * @arg {Point} _point - A point object {x,y}\n\t * @returns {Point}\n\t */\n\n\t/**\n\t * Getter/Setter for the CSS transform translation.\n\t * @function external:jQuery#transformPosition\n\t * @arg {number} _x - x coordinate\n\t * @arg {number} _y - y coordinate\n\t * @returns {Point}\n\t */\n\tthis.transformPosition = function () {\n\t\tvar matrix, point;\n\t\t\n\t\tmatrix = this.transform();\n\t\tpoint = Point.create().set(0,0);\n\n\t\tif (!arguments.length) {\n\t\t\tif (matrix !== 'none') point.set(matrix.e, matrix.f);\n\t\t} else {\n\t\t\tif (matrix === 'none') matrix = new Matrix();\n\n\t\t\tpoint.set.apply(point, arguments);\n\t\t\tmatrix.translate(point.x, point.y);\n\t\t\tthis.css('transform', matrix.toCSS());\n\t\t}\n\n\t\treturn point;\n\t};\n\n\t/**\n\t * Getter for the CSS transform scale. (overloaded)\n\t * @function external:jQuery#transformPosition\n\t * @returns {Point}\n\t */\n\n\t/**\n\t * Setter for the CSS transform scale. (overloaded)\n\t * @function external:jQuery#transformPosition\n\t * @arg {Point} _point - A point object {x,y}\n\t * @returns {Point}\n\t */\n\n\t/**\n\t * Setter for the CSS transform scale.\n\t * @function external:jQuery#transformPosition\n\t * @arg {number} _x - x coordinate\n\t * @arg {number} _y - y coordinate\n\t * @returns {Point}\n\t */\n\tthis.transformScale = function () {\n\t\tvar matrix, scale;\n\t\t\n\t\tmatrix = this.transform();\n\t\tscale = Point.create().set(1,1);\n\n\t\tif (!arguments.length) {\n\t\t\tif (matrix !== 'none') scale.set(matrix.a, matrix.d);\n\t\t} else {\n\t\t\tif (matrix === 'none') matrix = new Matrix();\n\n\t\t\tscale.set.apply(scale, arguments);\n\t\t\tmatrix.scale(scale.x, scale.y);\n\t\t\tthis.css('transform', matrix.toCSS());\n\t\t}\n\n\t\treturn scale;\n\t};\n\n\t/**\n\t * Accessor method for `pl` attributes.\n\t */\n\tthis.pl = function (_name, _value) {\n\t\tvar args, result;\n\n\t\tif (!_name) {\n\t\t\tresult = {};\n\t\t\tthis.each(function () {\n\t\t\t\tArray.forEach(this.attributes, function (_attr) {\n\t\t\t\t\tif (_attr.name.indexOf('pl-') === 0) {\n\t\t\t\t\t\tresult[_attr.name.slice(3)] = _attr.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\n\n\t\targs = ['pl-'+_name];\n\t\tif (typeof _value !== 'undefined') args.push(_value);\n\n\t\tif (_value === null) {\n\t\t\tthis.removeAttr('pl-'+_name);\n\t\t\treturn this;\n\t\t}\n\n\t\treturn this.attr.apply(this, args);\n\t};\n\n\t/**\n\t * Invoke a method of each item in the set of matched elements.\n\t */\n\tthis.exec = function (_method, _args) {\n\t\treturn this.map(function () {\n\t\t\tif (typeof this[_method] === 'function') return this[_method].apply(this, _args);\n\t\t}).toArray();\n\t};\n\n}).call($.fn);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/jQExtentions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/for-each\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/for-each.js\n ** module id = 5\n ** module chunks = 0\n **/","require('../../modules/js.array.statics');\nmodule.exports = require('../../modules/$.core').Array.forEach;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/array/for-each.js\n ** module id = 6\n ** module chunks = 0\n **/","// JavaScript 1.6 / Strawman array statics shim\nvar $       = require('./$')\n  , $export = require('./$.export')\n  , $ctx    = require('./$.ctx')\n  , $Array  = require('./$.core').Array || Array\n  , statics = {};\nvar setStatics = function(keys, length){\n  $.each.call(keys.split(','), function(key){\n    if(length == undefined && key in $Array)statics[key] = $Array[key];\n    else if(key in [])statics[key] = $ctx(Function.call, [][key], length);\n  });\n};\nsetStatics('pop,reverse,shift,keys,values,entries', 1);\nsetStatics('indexOf,every,some,forEach,map,filter,find,findIndex,includes', 3);\nsetStatics('join,slice,concat,push,splice,unshift,sort,lastIndexOf,' +\n           'reduce,reduceRight,copyWithin,fill');\n$export($export.S, 'Array', statics);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/js.array.statics.js\n ** module id = 7\n ** module chunks = 0\n **/","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.js\n ** module id = 8\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.export.js\n ** module id = 9\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.global.js\n ** module id = 10\n ** module chunks = 0\n **/","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.core.js\n ** module id = 11\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.ctx.js\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.a-function.js\n ** module id = 13\n ** module chunks = 0\n **/","/**\n * \n * @module\n * @version 1.1\n * @author Micah Rolon <functionmicah@gmail.com>\n * @requires module:types/BasicArray~BasicArray\n *\n * @desc *Created: 11/12/14*\n *\n * This file contains objects for containing values about a plane. i.e. x or width.\n * Adds the convenience of keeping these values paired to passed around your application.\n * It also includes methods which you perform on the values and returns a new object\n * so the original values are maintained.\n *\n * #### Usage\n *\n * New instances can be created by calling the create method.\n * ```\n * cursorLocation = Point.create();\n * ```\n *\n * Then call `set()` to apply your values.\n * ```\n * cursorLocation.set(event.clientX, event.clientY);\n * ```\n *\n * Then you can use the calculation methods to perform transformations.\n * ```\n * relativeCursor = cursorLocation.scale(zoom);\n * ```\n *\n * #### Developer Notes\n *\n * When adding new methods make sure you are returning a new instance.\n * Dimensional objects are meant to be immutable.\n *\n * Follow this pattern:\n * ```\n * this.method = function () {\n *     // set with your calculated values.\n *     return this.create().set( ... )\n * }\n * ```\n *\n * #### Change Log\n * *v1.1 - 12/13/15*\n * - Defined setter/getter properties for unique planes keys. You can now do `point.width = 10`.\n */\n\n/*jslint browser: true, eqeq: true, nomen: true, sloppy: true, white: true */\n\nimport BasicArray from 'types/BasicArray';\n\nvar Dimension, Size, Point;\n\n/**\n * The native Array\n * @external Array\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array}\n */\n\n/**\n * Array prototype extension\n * Creates an instance of `_Thing` and passes the array to its set function as its arguments.\n * @function external:Array#to\n * @arg {Point|Size|string} _Thing - A Dimension object or one the strings 'point'/'size'\n * @example\n * somePoint = [10, 10].to(Point);\n * somePoint = [10, 10].to('point');\n */\nArray.prototype.to = function (_Thing) {\n\tvar map;\n\n\tmap = {\n\t\tpoint: Point,\n\t\tsize: Size\n\t};\n\n\tif (typeof _Thing === 'string') {\n\t\treturn map[_Thing.toLowerCase()].create().set(this);\n\t}\n\n\telse if (typeof _Thing === 'object' && ~[Point.set, Size.set].indexOf(_Thing.set)) {\n\t\tif (!_Thing.isPrototypeOf(this)) {\n\t\t\treturn _Thing.set.apply(_Thing.create(), this);\t\n\t\t}\n\t}\n\t\t\n\treturn this;\n}\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Dimension.create()` to get a new instance.\n * @class\n * @classdesc Base class for dimensional objects consisting of 2 planes.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @extends module:types/BasicArray~BasicArray\n */\nDimension = BasicArray.extend(function () {\n\tvar originalMap;\n\n\toriginalMap = this.map;\n\n\tthis[0] = this[1] = 0;\n\tthis.planeMap = null,\n\tthis.length = 2;\n\n\t/**\n\t * Provides a new instance.\n\t * @arg {array} _argumentsArray - Create a new instace with an arguments array.\n\t * @returns {Dimension}\n\t */\n\tthis.create = function (_argumentsArray) {\n\t\tvar instance;\n\n\t\tinstance = this.proto();\n\n\t\tif (_argumentsArray) instance.set.apply(instance, _argumentsArray);\n\n\t\treturn instance;\n\t};\n\n\t/**\n\t * Incerement each plane by a value or specify each plane.\n\t * @arg {number} _val - plane a of (a,b)\n\t * @arg {number} [_plane2] - plane b of (a,b)\n\t * @returns {Dimension}\n\t */\n\tthis.inc = function (_val, _plane2) {\n\t\tvar a,b;\n\n\t\tif (_val.length === 2) {\n\t\t\ta = _val[0];\n\t\t\tb = _val[1];\n\t\t}\n\n\t\telse if (_plane2 != null) {\n\t\t\ta = _val;\n\t\t\tb = _plane2;\n\t\t}\n\n\t\telse {\n\t\t\ta = b = _val;\n\t\t}\n\n\t\treturn this.create().set(\n\t\t\tthis[0] + a,\n\t\t\tthis[1] + b\n\t\t);\n\t};\n\n\t/**\n\t * Decerement each plane by a value or specify each plane.\n\t * @arg {number} _val - plane a of (a,b)\n\t * @arg {number} [_plane2] - plane b of (a,b)\n\t * @returns {Dimension}\n\t */\n\tthis.dec = function (_val, _plane2) {\n\t\tvar a,b;\n\n\t\tif (_val.length === 2) {\n\t\t\ta = _val[0];\n\t\t\tb = _val[1];\n\t\t}\n\n\t\telse if (_plane2 != null) {\n\t\t\ta = _val;\n\t\t\tb = _plane2;\n\t\t}\n\n\t\telse {\n\t\t\ta = b = _val;\n\t\t}\n\n\t\treturn this.create().set(\n\t\t\tthis[0] - a,\n\t\t\tthis[1] - b\n\t\t);\n\t};\n\n\t/**\n\t * Multiply each plane by a value or specify each plane.\n\t * @arg {number} _scale - plane a of (a,b)\n\t * @arg {number} [_plane2] - plane b of (a,b)\n\t * @returns {Dimension}\n\t */\n\tthis.scale = function (_scale, _plane2) {\n\t\treturn this.create().set(\n\t\t\tthis[0] * _scale,\n\t\t\tthis[1] * (_plane2 != null ? _plane2 : _scale)\n\t\t);\n\t};\n\n\t/**\n\t * Perfom a Math function on each plane\n\t * @arg {string} _fun - a string of the function name in the JS Math object,\n\t * followed by the whatever arguments the function takes after its first\n\t * since the first argument is the plane value.\n\t * @returns {Dimension}\n\t */\n\tthis.math = function (_fun) {\n\t\tvar args = [].slice.call(arguments, 1);\n\n\t\treturn this.create().set(\n\t\t\tMath[_fun].apply(Math, [this[0]].concat(args)),\n\t\t\tMath[_fun].apply(Math, [this[1]].concat(args))\n\t\t);\n\t};\n\n\t/**\n\t * Takes each plane value and passes it to parseInt().\n\t * @returns {Dimension}\n\t */\n\tthis.parseInt = function () {\n\t\treturn this.create().set(\n\t\t\tparseInt(this[0]),\n\t\t\tparseInt(this[1])\n\t\t);\n\t};\n\n\t/**\n\t * Takes each plane value and passes it to parseFloat().\n\t * @returns {Dimension}\n\t */\n\tthis.parseFloat = function () {\n\t\treturn this.create().set(\n\t\t\tparseFloat(this[0]),\n\t\t\tparseFloat(this[1])\n\t\t);\n\t};\n\n\t/**\n\t * Resolves the name of the plane at the given index.\n\t * @arg {number} _index - The index of the plane.\n\t * @returns {string}\n\t */\n\tthis.planeOf = function (_index) {\n\t\tif (isNaN(parseInt(_index))) return null;\n\t\treturn this.planeMap[_index];\n\t};\n\n\t/**\n\t * Make a new array by iterating over each plane.<br>\n\t * See [`Array.prototype.map()`]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map}\n\t * @arg {function} _handler - handler for each index.\n\t * @override\n\t * @returns {Dimension}\n\t */\n\tthis.map = function (_handler) {\n\t\treturn originalMap.call(this, _handler).to(Object.getPrototypeOf(this));\n\t};\n\n\t/**\n\t * Multiplies the planes.\n\t * @returns {number}\n\t */\n\tthis.product = function () {\n\t\treturn this[0] * this[1];\n\t};\n\n\t/**\n\t * Divides the planes.\n\t * @returns {number}\n\t */\n\tthis.ratio = function () {\n\t\treturn this[0] / this[1];\n\t};\n\n\tthis.quotient = function () {\n\t\treturn Math.floor(this[0] / this[1]);\n\t};\n\n\tthis.remainder = function () {\n\t\treturn this[0] % this[1];\n\t};\n\t\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Size.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc 2 Dimensional object containing width and height.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} width - The width.\n * @prop {number} height - The height.\n */\nSize = Dimension.extend(function () {\n\t/**\n\t * Maps the names of the indexes.<br>\n\t * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t * @protected\n\t * @default ['width', 'height']\n\t */\n\tthis.planeMap = ['width', 'height'];\n\n\tObject.defineProperties(this, {\n\t\twidth: {\n\t\t\tget: function () {\n\t\t\t\treturn this[0];\n\t\t\t},\n\n\t\t\tset: function (_val) {\n\t\t\t\tthis[0] = Number(_val);\n\t\t\t}\n\t\t},\n\n\t\theight: {\n\t\t\tget: function () {\n\t\t\t\treturn this[1];\n\t\t\t},\n\n\t\t\tset: function (_val) {\n\t\t\t\tthis[1] = Number(_val);\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Define the size with an object. (overloaded)\n\t * @function module:types/Dimensions~Size#set\n\t * @arg {object} _size - A size object {width, height}.\n\t * @returns {Size}\n\t */\n\n\t/**\n\t * Define the size with an array. (overloaded)\n\t * @function module:types/Dimensions~Size#set\n\t * @arg {array} _size - A size array [width, height].\n\t * @returns {Size}\n\t */\n\n\t/**\n\t * Define the size.\n\t * @arg {number} _width - The width.\n\t * @arg {number} _height - The height.\n\t * @returns {Size}\n\t */\n\tthis.set = function (_width, _height) {\n\t\tif (arguments.length === 1) {\n\t\t\tif (_width.width !== undefined && _width.height !== undefined) {\n\t\t\t\tthis[0] = Number(_width.width);\n\t\t\t\tthis[1] = Number(_width.height);\n\t\t\t}\n\n\t\t\telse if (_width.length === 2) {\n\t\t\t\tthis[0] = Number(_width[0]);\n\t\t\t\tthis[1] = Number(_width[1]);\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tthis[0] = Number(_width);\n\t\t\tthis[1] = Number(_height);\n\t\t}\n\t\t\n\t\treturn this;\n\t};\n\n\t/**\n\t * Calculates the hypotenuse.\n\t * @see {@link https://en.wikipedia.org/wiki/Hypotenuse}\n\t * @returns {number}\n\t */\n\tthis.hypotenuse = function () {\n\t\treturn Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2));\n\t};\n\n\t/**\n\t * Sets width and height properties on the given object. If the object is an HTML node then it will be set on the nodes style object.\n\t * @arg {object|HTMLElement} - The object or DOM node.\n\t * @returns {this}\n\t */\n\tthis.applyTo = function (_object) {\n\t\tif (_object.nodeType === document.ELEMENT_NODE) {\n\t\t\tif (!(_object.width !== undefined || _object.height !== undefined)) {\n\t\t\t\t_object.style.width = this.width;\n\t\t\t\t_object.style.height = this.height;\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\n\t\t_object.width = this.width;\n\t\t_object.height = this.height;\n\n\t\treturn this;\n\t};\n\n});\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Point.create()` to get a new instance.\n * @class\n * @extends module:types/Dimensions~Dimension\n * @classdesc Object containing coordinates on a 2-dimensional cartesian plane.<br>\n * <span class=\"important\">NOTE:</span> This is an immutable class. Methods return a new object with the original as its prototype.\n * @prop {number} x - The x coordinate.\n * @prop {number} y - The y coordinate.\n */\nPoint = Dimension.extend(function () {\n\t/**\n\t * Maps the names of the indexes.<br>\n\t * See [Dimension#planeOf]{@link module:types/Dimensions~Dimension#planeOf} for resolving plane name.\n\t * @protected\n\t * @default ['x', 'y']\n\t */\n\tthis.planeMap = ['x', 'y'];\n\n\tObject.defineProperties(this, {\n\t\tx: {\n\t\t\tget: function () {\n\t\t\t\treturn this[0];\n\t\t\t},\n\n\t\t\tset: function (_val) {\n\t\t\t\tthis[0] = Number(_val);\n\t\t\t}\n\t\t},\n\n\t\ty: {\n\t\t\tget: function () {\n\t\t\t\treturn this[1];\n\t\t\t},\n\n\t\t\tset: function (_val) {\n\t\t\t\tthis[1] = Number(_val);\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Define the point with an object. (overloaded)\n\t * @function module:types/Dimensions~Point#set\n\t * @arg {object} _point - A point object {x, y}.\n\t * @returns {Point}\n\t */\n\n\t/**\n\t * Define the point with an array. (overloaded)\n\t * @function module:types/Dimensions~Point#set\n\t * @arg {array} _point - A point array [x, y].\n\t * @returns {Point}\n\t */\n\n\t/**\n\t * Define the point.\n\t * @arg {number} _x - The x.\n\t * @arg {number} _y - The y.\n\t * @returns {Point}\n\t */\n\tthis.set = function (_x, _y) {\n\t\tif (arguments.length === 1) {\n\t\t\tif (_x.x !== undefined && _x.y !== undefined) {\n\t\t\t\tthis[0] = Number(_x.x);\n\t\t\t\tthis[1] = Number(_x.y);\n\t\t\t}\n\n\t\t\telse if (_x.length === 2) {\n\t\t\t\tthis[0] = Number(_x[0]);\n\t\t\t\tthis[1] = Number(_x[1]);\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tthis[0] = Number(_x);\n\t\t\tthis[1] = Number(_y);\n\t\t}\n\t\t\n\t\treturn this;\n\t};\n\n\t/**\n\t * Calculates the distance between the insatnce and a point object.\n\t * @arg {Point} _point - A point object {x,y}.\n\t * @returns {Size}\n\t */\n\tthis.distance = function (_point) {\n\t\tif (_point.x !== undefined && _point.y !== undefined) {\n\t\t\treturn Size.create().set(\n\t\t\t\t_point.x - this.x,\n\t\t\t\t_point.y - this.y\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Sets x and y properties on the given object. If the object is an HTML node then the left and top properties will be set on the nodes style object.\n\t * @arg {object|HTMLElement} - The object or DOM node.\n\t * @returns {this}\n\t */\n\tthis.applyTo = function (_object) {\n\t\tif (_object.nodeType === document.ELEMENT_NODE) {\n\t\t\t_object.style.left = this.x;\n\t\t\t_object.style.top = this.y;\n\t\t}\n\n\t\telse {\n\t\t\t_object.x = this.x;\n\t\t\t_object.y = this.y;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * Rotate the point based on an origin point and an angle in degrees.\n\t * @arg {Point} _origin - A point object {x,y}.\n\t * @arg {number} _angle - The angle of rotation in degrees.\n\t * @returns {this}\n\t */\n\tthis.rotate = function (_origin, _angle) {\n\t\tvar x, y, rad;\n\n\t\trad = _angle * (Math.PI/180);\n\n\t\tx = this.x - _origin.x;\n\t\ty = this.y - _origin.y;\n\n\t\treturn this.create().set(\n\t\t\t(Math.sin(rad) * x - Math.cos(rad) * y) + _origin.x,\n\t\t\t(Math.cos(rad) * x + Math.sin(rad) * y) + _origin.y\n\t\t);\n\t};\n\n});\n\nexport default { Dimension, Size, Point };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Dimensions.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-properties.js\n ** module id = 15\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function defineProperties(T, D){\n  return $.setDescs(T, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-properties.js\n ** module id = 16\n ** module chunks = 0\n **/","/**\n * Base object type for 'array like' objects.\n * @module\n * @requires module:util\n * @requires module:types/Basic\n */\nimport util from 'util';\nimport Basic from 'types/Basic';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `BasicArray.create()` to get a new instance.\n * @classdesc A base object type for 'array like' object.\n * @class\n * @extends external:Array\n * @extends module:types/Basic~Basic\n * @mixes module:types/Basic~Basic\n */\nvar BasicArray = (function () {\n\t/**\n\t * Objects with this as an own property will be identified as the root object.\n\t * @memberof module:types/BasicArray~BasicArray\n\t * @readonly\n\t * @default\n\t */\n\tthis.baseType = 'TYPE_BASIC_ARRAY';\n\t\n\tutil.mixin(this, Basic);\n\n\treturn this;\n\n}).call([]);\n\nexport default BasicArray;\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/BasicArray.js\n **/","/**\n * Utility functions.\n * @namespace\n * @author Micah Rolon <micah@ginasink.com>\n * @memberof module:play~pl\n */\nvar util = new (function () {\n\n\t/**\n\t * Accepts one or more objects to combine their own properties to single object.\n\t * @arg {object} _target - The object that will recieve all members.\n\t * @arg {object} _sources... - The object(s) to join with the '_target'.\n\t * @returns {object} _target\n\t */\n\tthis.mixin = function () {\n\t\tvar member, i, target, objs;\n\n\t\ttarget = arguments[0];\n\t\tobjs = [].slice.call(arguments, 1);\n\n\t\tfor (i=0; i < objs.length; i+=1) {\n\t\t\tfor (member in objs[i]) {\n\t\t\t\tif (!objs[i].hasOwnProperty(member)) continue;\n\t\t\t\ttarget[member] = objs[i][member];\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t};\n\n\t/**\n\t * Matches the name of the key which references the given pointer inside an object. Like indexOf() for objects.\n\t * @arg {object} _obj - Object to search in.\n\t * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t * @returns {string} The name of the key in the object matching '_member'.\n\t */\n\tthis.keyOf = function (_obj, _member) {\n\t\tvar member;\n\n\t\tfor (member in _obj) {\n\t\t\tif (!_obj.hasOwnProperty(member)) continue;\n\t\t\tif (_obj[member] === _member) return member;\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Matches the object, deep in the prototype chain, which is the owner of the property referencing the given pointer.\n\t * @arg {object} _obj - The object to search.\n\t * @arg {*} _member - The reference which is expected to be a property in the prototype chain.\n\t * @return {object} An object containing the name of the property and the owning object. {name, object}\n\t */\n\tthis.getOwner = function (_obj, _member) {\n\t\tvar prototype, name;\n\n\t\tprototype = Object.getPrototypeOf(_obj);\n\n\t\t// keep searching until we go as deep as we can go.\n\t\twhile (prototype) {\n\t\t\t// search for the key in the prototype\n\t\t\tname = util.keyOf(prototype, _member);\n\n\t\t\t// If we found the key in the prototype then we found\n\t\t\t// our match and we can break out of the loop.\n\t\t\tif (name) break;\n\n\t\t\t// Otherwise go deeper (thats what she said ;p)\n\t\t\tprototype = Object.getPrototypeOf(prototype);\n\t\t}\n\n\t\treturn {\n\t\t\tname: name,\n\t\t\tobject: prototype\n\t\t};\n\t};\n\n\t/**\n\t * Given a range; provides a random number in that range.\n\t * @function play~pl.util.random\n\t * @arg {number} _rangeA - A number for the low end of the range.\n\t * @arg {number} _rangeB - The top end of the range.\n\t * @returns {number|*} The resulting number in range or the member found at random.\n\t */\n\n\t/**\n\t * Given an iterable; provides a random item.\n\t * @arg {array} _collection - The iterable.\n\t * @returns {number|*} The member found at random.\n\t */\n\tthis.random = function (_collection_rangeA, _rangeB) {\n\t\tvar index, val;\n\n\t\tindex = Math.floor(Math.random()*_collection_rangeA.length);\n\n\t\tif (arguments.length === 2) {\n\t\t\tval = Math.round(Math.random()*_rangeB);\n\n\t\t\treturn val < _collection_rangeA ? _collection_rangeA : val;\n\t\t}\n\n\t\tif (index === _collection_rangeA.length) index = _collection_rangeA.length-1;\n\n\t\treturn _collection_rangeA && _collection_rangeA[index];\n\t};\n\n\t/**\n\t * Take string and makes it dot notation friendly.\n\t * @arg {string} _id - The string to transform.\n\t * @arg {boolean} _camelCase - Transform with camel case.\n\t * @returns {string}\n\t */\n\tthis.transformId = function (_id, _camelCase) {\n\t\tif (_id && _camelCase) {\n\t\t\treturn _id.replace(/[-\\s]+([\\w\\d]?)/g, function (_match) {\n\t\t\t\treturn RegExp.$1.toUpperCase();\n\t\t\t});\n\t\t}\n\n\t\treturn _id && _id.replace(/[-\\s]+/g, '_');\n\t};\n\n\t/**\n\t * Test all arguments for != null\n\t * @return {boolean}\n\t */\n\tthis.isSet = function () {\n\t\treturn [].every.call(arguments, function (_arg) { return _arg != null });\n\t};\n\n\t/**\n\t * Parses a formated string and calculates it in milliseconds.\n\t * @arg {string} _source - The formated string for calculation in the pattern '1d 1h 1m 1s'.\n\t * @return {number}\n\t */\n\tthis.toMillisec = function (_source) {\n\t\tvar tokens, time, units;\n\n\t\tif (typeof _source === 'number') return _source;\n\t\tif (!_source) return;\n\n\t\ttokens = _source.split(/\\s+/);\n\t\ttime = 0;\n\t\tunits = {\n\t\t\td: 24*60*60*1000,\n\t\t\th: 60*60*1000,\n\t\t\tm: 60*1000,\n\t\t\ts: 1000\n\t\t};\n\n\t\ttokens.forEach(function (_token) {\n\t\t\tvar unit, value;\n\n\t\t\tunit = (_token.match(/[dhms]/) || [])[0];\n\n\t\t\tif (unit) {\n\t\t\t\tvalue = Number(_token.slice(0, -1));\n\t\t\t\ttime += value * units[unit];\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\ttime += Number(_token);\n\t\t\t}\n\t\t});\n\n\t\treturn time;\n\t};\n\n\t/**\n\t * Needs no introduction\n\t * @arg {iterable} _collection - iterable.\n\t * @return {array}\n\t */\n\tthis.toArray = function (_collection) {\n\t\treturn Array.prototype.map.call(_collection, function (i) { return i; });\n\t};\n\n\t/**\n\t * Resolves the value in the object at the given path.\n\t * @arg {object} _obj - The object to query.\n\t * @arg {string} _path - The path to the desired reference.\n\t * @returns {*} The resulting reference value.\n\t * @example\n\t * var user = {\n\t *   name: 'John',\n\t *   family: {\n\t *\t   guardians: {David}, // property could be an array of multiple guardians.\n\t *     siblings: [{Jane}, {Thomas}] // collection of user objects.\n\t *   }\n\t * };\n\t *\n\t * pl.util.resolvePath(user, 'family.sliblings[2].name');\n\t * // Matches the `guardians` propery if `guardians[0]` is undefined when `?` is used.\n\t * pl.util.resolvePath(user, 'family.guardians[0]?.name'); \n\t */\n\tthis.resolvePath = function (_obj, _path) {\n\t\tvar path, obj, i, name, index, testArray;\n\n\t\tpath = _path.split('.');\n\t\tobj = _obj;\n\t\ti = 0;\n\n\t\twhile (obj) {\n\t\t\ttestArray = (/\\?$/).test(path[i]);\n\t\t\tindex = (path[i].match(/\\[(\\d+)\\]/) || [])[1] || -1;\n\t\t\tname = ~index ? path[i].slice(0, path[i].indexOf('[')) : path[i];\n\t\t\tobj = obj[name];\n\n\t\t\tif (~index && obj) {\n\t\t\t\tobj = testArray ? (obj[index] || obj) : obj[index];\n\t\t\t}\n\t\t\t\n\t\t\ti+=1;\n\n\t\t\tif (path.length === i) break;\n\t\t}\n\n\t\treturn obj;\n\t};\n\n\tthis.assignRef = function (_obj, _name, _ref) {\n\t\tvar name;\n\n\t\tname = util.transformId(_name, true);\n\n\t\tif (_obj[name] === _ref) return _ref;\n\n\t\tif (_obj[name]) {\n\t\t\tif (!_obj[name].__refCollction__) {\n\t\t\t\t_obj[name] = [_obj[name]];\n\n\t\t\t\tObject.defineProperty(_obj[name], '__refCollction__', {\n\t\t\t\t\tvalue: true,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twriteable: false,\n\t\t\t\t\tconfigureable: false\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t_obj[name].push(_ref);\n\t\t}\n\n\t\telse {\n\t\t\t_obj[name] = _ref;\n\t\t}\n\n\t\treturn _obj[name];\n\t};\n\n\t/**\n\t * N0 OPeration.\n\t */\n\tthis.noop = function() {};\n\n\t/**\n\t * Get the file name out of a simple file path.\n\t * @arg {string} _path - The file path. \n\t * @returns {string} The extracted name.\n\t */\n\tthis.resolveFileName = function (_path) {\n\t\treturn _path.slice(_path.lastIndexOf('/')+1);\n\t};\n\n\t/**\n\t * Produces a string following the specied pattern. Which is a mix of x, y, z and - characters.\n\t * - x; produces a letter a-f.\n\t * - y; produces a digit 0-9.\n\t * - z; produces a 4 character hex value derived from the now time stamp.\n\t * @arg {string} _pattern - The xyz pattern.\n\t * @returns {string} The generated ID.\n\t */\n\tthis.createId = function (_pattern) {\n\t\treturn (_pattern || 'xy-z').replace(/[xyz]/g, function (_token) {\n\t\t\tif (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t\t\tif (_token === 'y') return (Math.floor(Math.random() * 10)).toString(16);\n\t\t\treturn Math.floor(Math.random() * Date.now()).toString(16).slice(0, 4);\n\t\t});\n\t};\n\n});\n\nexport default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/util.js\n **/","/**\n * Base object type for 'classes' implementing methods for extention and super callbacks.\n * @module\n * @requires module:play~pl.util\n */\nimport util from 'util';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Basic.create()` to get a new instance.\n * @classdesc The base type for all objects which will act as prototypes.\n * @class\n */\nvar Basic = {\n\t/**\n\t * Objects with this as an own property will be identified as the root object.\n\t * @readonly\n\t * @default\n\t */\n\tbaseType: 'TYPE_BASIC',\n\t\n\t/**\n\t * Creates a new object with the current object as its prototype.\n\t * @instance\n\t * @returns {Basic} The new instance.\n\t */\n\tcreate: function () {\n\t\treturn Object.create(this);\n\t},\n\n\t/**\n\t * Creates a new object using a constructor function or object with the current object as its prototype.\n\t * @instance\n\t * @arg {Function|Object} _implementation - The implementation of the new type as either a constructor function or object to mixin.\n\t * @returns {Basic} The new instance.\n\t *\n\t * @todo define constructor property\n\t */\n\textend: function (_implementation) {\n\t\tvar instance;\n\n\t\tif (!_implementation) return null;\n\n\t\tswitch (typeof _implementation) {\n\t\t\tcase 'function':\n\t\t\t\t_implementation.prototype = this;\n\t\t\t\tinstance = new _implementation();\n\t\t\t\tbreak;\n\n\t\t\tcase 'object':\n\t\t\t\tinstance = this.create();\n\t\t\t\tinstance.mixin(_implementation);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error('TypeError: Invalid type given for object extention.', typeof _implementation);\n\t\t}\n\n\t\treturn instance;\n\t},\n\n\t/**\n\t * Accepts one or more objects to combine their own properties to the instance.\n\t * @instance\n\t * @arg {object} _sources... - The object(s) to join with the instance.\n\t * @returns this\n\t */\n\tmixin: function () {\n\t\treturn util.mixin.apply(null, [this].concat([].slice.call(arguments, 0)));\n\t},\n\n\t/**\n\t * Matches the name of the key which references the given pointer inside the instance. Like indexOf() for objects.\n\t * @instance\n\t * @arg {*} _member - The reference which is expected to be in the object as a property.\n\t * @returns {string} The name of the key in the object matching '_member'.\n\t */\n\tkeyOf: function (_member) {\n\t\treturn util.keyOf(this, _member);\n\t},\n\n\t/**\n\t * Performs a super callback of the function which called it. Allowing you to still invoke a method which was overridden.\n\t * @instance\n\t * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t * @returns {*} Whatever the caller returns.\n\t */\n\tproto: function () {\n\t\tvar method, name, owner, prototype;\n\n\t\t// Get the function which invoked proto() in the call stack.\n\t\t// If the caller is a behavior then we retrieve the method.\n\t\tmethod = this.proto.caller.method || this.proto.caller;\n\n\t\t// Check to see if 'this' owns the method.\n\t\t// NOTE: We may want to move this logic into getOwner().\n\t\tif (name = this.keyOf(method)) {\n\t\t\tprototype = Object.getPrototypeOf(this);\n\t\t}\n\n\t\t// Otherwise find the object which owns the caller function.\n\t\telse {\n\t\t\towner = util.getOwner(this, method);\n\t\t\tname = owner.name;\n\t\t\tprototype = Object.getPrototypeOf(owner.object);\t\n\t\t}\n\t\t\n\t\tmethod = prototype[name];\n\n\t\tif (!method) {\n\t\t\tconsole.error('ReferenceError: Unable to locate prototype method.', this.proto.caller);\n\t\t\tdebugger;\n\t\t\treturn null;\n\t\t}\n\n\t\treturn method.apply(this, arguments);\n\t},\n\n\t/**\n\t * Performs a super callback of the function which called it. Unlike `proto()` which looks for the overidden method, sup looks for the base class' implementation.\n\t * @instance\n\t * @arg {*} _args... - Whatever amount of arguments the caller takes.\n\t * @returns {*} Whatever the caller returns.\n\t */\n\tsup: function () {\n\t\tvar method, name, owner, prototype;\n\n\t\t// Get the function which invoked sup() in the call stack.\n\t\tmethod = this.sup.caller;\n\t\towner = util.getOwner(this, this.baseType);\n\t\tprototype = owner.object;\n\t\tname = this.keyOf(method);\n\n\t\t// Check to see if 'this' owns the method.\n\t\t// NOTE: We may want to move this logic into getOwner().\n\t\t// \n\t\tif (!name) {\n\t\t\towner = util.getOwner(this, method);\n\t\t\tname = owner.name;\n\t\t}\n\n\t\tmethod = prototype[name];\n\n\t\tif (!method) {\n\t\t\tconsole.error('ReferenceError: Unable to locate prototype method.', this.sup.caller);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn method.apply(this, arguments);\n\t},\n\n\t/**\n\t * Provides the object type.\n\t * @instance\n\t */\n\ttoString: function () {\n\t\tvar type;\n\t\t\n\t\tif (this.baseType) {\n\t\t\ttype = this.baseType.replace('TYPE_', '');\n\t\t\ttype = type.slice(0,1)+type.slice(1).toLowerCase();\t\n\t\t} else {\n\t\t\ttype = this.constructor.name || 'Object';\n\t\t}\n\n\t\treturn '[object '+type+']';\n\t}\n\n};\n\nexport default Basic;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Basic.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 20\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/create.js\n ** module id = 21\n ** module chunks = 0\n **/","/**\r\n *\r\n * Copy of the deleted repository epistemex/transformation-matrix-js.\r\n * All rights are reserved to Epistemex.\r\n *\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\nfunction Matrix(context) {\r\n\r\n    var me = this;\r\n    me._t = me.transform;\r\n\r\n    me.a = me.d = 1;\r\n    me.b = me.c = me.e = me.f = 0;\r\n\r\n    me.context = context;\r\n\r\n    // reset canvas transformations (if any) to enable 100% sync.\r\n    if (context) context.setTransform(1, 0, 0, 1, 0, 0);\r\n}\r\n\r\nMatrix.prototype = {\r\n\r\n    /**\r\n     * Concatenates transforms of this matrix onto the given child matrix and\r\n     * returns a new matrix. This instance is used on left side.\r\n     *\r\n     * @param {Matrix} cm - child matrix to apply concatenation to\r\n     * @returns {Matrix}\r\n     */\r\n    concat: function (cm) {\r\n        return this.clone()._t(cm.a, cm.b, cm.c, cm.d, cm.e, cm.f);\r\n    },\r\n\r\n    /**\r\n     * Flips the horizontal values.\r\n     */\r\n    flipX: function () {\r\n        return this._t(-1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Flips the vertical values.\r\n     */\r\n    flipY: function () {\r\n        return this._t(1, 0, 0, -1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Reflects incoming (velocity) vector on the normal which will be the\r\n     * current transformed x axis. Call when a trigger condition is met.\r\n     *\r\n     * NOTE: BETA, simple implementation\r\n     *\r\n     * @param {number} x - vector end point for x (start = 0)\r\n     * @param {number} y - vector end point for y (start = 0)\r\n     * @returns {{x: number, y: number}}\r\n     */\r\n    reflectVector: function (x, y) {\r\n\r\n        var v = this.applyToPoint(0, 1),\r\n            d = 2 * (v.x * x + v.y * y);\r\n\r\n        x -= d * v.x;\r\n        y -= d * v.y;\r\n\r\n        return {x: x, y: y};\r\n    },\r\n\r\n    /**\r\n     * Short-hand to reset current matrix to an identity matrix.\r\n     */\r\n    reset: function () {\r\n        return this.setTransform(1, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Rotates current matrix accumulative by angle.\r\n     * @param {number} angle - angle in radians\r\n     */\r\n    rotate: function (angle) {\r\n        var cos = Math.cos(angle),\r\n            sin = Math.sin(angle);\r\n        return this._t(cos, sin, -sin, cos, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Converts a vector given as x and y to angle, and\r\n     * rotates (accumulative).\r\n     * @param x\r\n     * @param y\r\n     * @returns {*}\r\n     */\r\n    rotateFromVector: function (x, y) {\r\n        return this.rotate(Math.atan2(y, x));\r\n    },\r\n\r\n    /**\r\n     * Helper method to make a rotation based on an angle in degrees.\r\n     * @param {number} angle - angle in degrees\r\n     */\r\n    rotateDeg: function (angle) {\r\n        return this.rotate(angle * Math.PI / 180);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix uniformly and accumulative.\r\n     * @param {number} f - scale factor for both x and y (1 does nothing)\r\n     */\r\n    scaleU: function (f) {\r\n        return this._t(f, 0, 0, f, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scale: function (sx, sy) {\r\n        return this._t(sx, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on x axis accumulative.\r\n     * @param {number} sx - scale factor x (1 does nothing)\r\n     */\r\n    scaleX: function (sx) {\r\n        return this._t(sx, 0, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Scales current matrix on y axis accumulative.\r\n     * @param {number} sy - scale factor y (1 does nothing)\r\n     */\r\n    scaleY: function (sy) {\r\n        return this._t(1, 0, 0, sy, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shear: function (sx, sy) {\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for x to the current matrix accumulative.\r\n     * @param {number} sx - amount of shear for x\r\n     */\r\n    shearX: function (sx) {\r\n        return this._t(1, 0, sx, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply shear for y to the current matrix accumulative.\r\n     * @param {number} sy - amount of shear for y\r\n     */\r\n    shearY: function (sy) {\r\n        return this._t(1, sy, 0, 1, 0, 0);\r\n    },\r\n\r\n    /**\r\n     * Apply skew to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skew: function (ax, ay) {\r\n        return this.shear(Math.tan(ax), Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for x to the current matrix accumulative.\r\n     * @param {number} ax - angle of skew for x\r\n     */\r\n    skewX: function (ax) {\r\n        return this.shearX(Math.tan(ax));\r\n    },\r\n\r\n    /**\r\n     * Apply skew for y to the current matrix accumulative.\r\n     * @param {number} ay - angle of skew for y\r\n     */\r\n    skewY: function (ay) {\r\n        return this.shearY(Math.tan(ay));\r\n    },\r\n\r\n    /**\r\n     * Set current matrix to new absolute matrix.\r\n     * @param {number} a - scale x\r\n     * @param {number} b - shear y\r\n     * @param {number} c - shear x\r\n     * @param {number} d - scale y\r\n     * @param {number} e - translate x\r\n     * @param {number} f - translate y\r\n     */\r\n    setTransform: function (a, b, c, d, e, f) {\r\n        var me = this;\r\n        me.a = a;\r\n        me.b = b;\r\n        me.c = c;\r\n        me.d = d;\r\n        me.e = e;\r\n        me.f = f;\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix accumulative.\r\n     * @param {number} tx - translation for x\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translate: function (tx, ty) {\r\n        return this._t(1, 0, 0, 1, tx, ty);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on x axis accumulative.\r\n     * @param {number} tx - translation for x\r\n     */\r\n    translateX: function (tx) {\r\n        return this._t(1, 0, 0, 1, tx, 0);\r\n    },\r\n\r\n    /**\r\n     * Translate current matrix on y axis accumulative.\r\n     * @param {number} ty - translation for y\r\n     */\r\n    translateY: function (ty) {\r\n        return this._t(1, 0, 0, 1, 0, ty);\r\n    },\r\n\r\n    /**\r\n     * Multiplies current matrix with new matrix values.\r\n     * @param {number} a2 - scale x\r\n     * @param {number} b2 - shear y\r\n     * @param {number} c2 - shear x\r\n     * @param {number} d2 - scale y\r\n     * @param {number} e2 - translate x\r\n     * @param {number} f2 - translate y\r\n     */\r\n    transform: function (a2, b2, c2, d2, e2, f2) {\r\n\r\n        var me = this,\r\n            a1 = me.a,\r\n            b1 = me.b,\r\n            c1 = me.c,\r\n            d1 = me.d,\r\n            e1 = me.e,\r\n            f1 = me.f;\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        me.a = a1 * a2 + c1 * b2;\r\n        me.b = b1 * a2 + d1 * b2;\r\n        me.c = a1 * c2 + c1 * d2;\r\n        me.d = b1 * c2 + d1 * d2;\r\n        me.e = a1 * e2 + c1 * f2 + e1;\r\n        me.f = b1 * e2 + d1 * f2 + f1;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Divide this matrix on input matrix which must be invertible.\r\n     * @param {Matrix} m - matrix to divide on (divisor)\r\n     * @returns {Matrix}\r\n     */\r\n    divide: function (m) {\r\n\r\n        if (!m.isInvertible())\r\n            throw \"Input matrix is not invertible\";\r\n\r\n        var im = m.inverse();\r\n\r\n        return this._t(im.a, im.b, im.c, im.d, im.e, im.f);\r\n    },\r\n\r\n    /**\r\n     * Divide current matrix on scalar value != 0.\r\n     * @param {number} d - divisor (can not be 0)\r\n     * @returns {Matrix}\r\n     */\r\n    divideScalar: function (d) {\r\n\r\n        var me = this;\r\n        me.a /= d;\r\n        me.b /= d;\r\n        me.c /= d;\r\n        me.d /= d;\r\n        me.e /= d;\r\n        me.f /= d;\r\n\r\n        return me._x();\r\n    },\r\n\r\n    /**\r\n     * Get an inverse matrix of current matrix. The method returns a new\r\n     * matrix with values you need to use to get to an identity matrix.\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     * @returns {Matrix}\r\n     */\r\n    inverse: function () {\r\n\r\n        if (this.isIdentity()) {\r\n            return new Matrix();\r\n        }\r\n        else if (!this.isInvertible()) {\r\n            throw \"Matrix is not invertible.\";\r\n        }\r\n        else {\r\n            var me = this,\r\n                a = me.a,\r\n                b = me.b,\r\n                c = me.c,\r\n                d = me.d,\r\n                e = me.e,\r\n                f = me.f,\r\n\r\n                m = new Matrix(),\r\n                dt = a * d - b * c;\t// determinant(), skip DRY here...\r\n\r\n            m.a = d / dt;\r\n            m.b = -b / dt;\r\n            m.c = -c / dt;\r\n            m.d = a / dt;\r\n            m.e = (c * f - d * e) / dt;\r\n            m.f = -(a * f - b * e) / dt;\r\n\r\n            return m;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation is naive. For animation use the\r\n     * intrpolateAnim() method instead.\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolate: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix();\r\n\r\n        m.a = me.a + (m2.a - me.a) * t;\r\n        m.b = me.b + (m2.b - me.b) * t;\r\n        m.c = me.c + (m2.c - me.c) * t;\r\n        m.d = me.d + (m2.d - me.d) * t;\r\n        m.e = me.e + (m2.e - me.e) * t;\r\n        m.f = me.f + (m2.f - me.f) * t;\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Interpolate this matrix with another and produce a new matrix.\r\n     * t is a value in the range [0.0, 1.0] where 0 is this instance and\r\n     * 1 is equal to the second matrix. The t value is not constrained.\r\n     *\r\n     * Context from parent matrix is not applied to the returned matrix.\r\n     *\r\n     * Note: this interpolation method uses decomposition which makes\r\n     * it suitable for animations (in particular where rotation takes\r\n     * places).\r\n     *\r\n     * @param {Matrix} m2 - the matrix to interpolate with.\r\n     * @param {number} t - interpolation [0.0, 1.0]\r\n     * @param {CanvasRenderingContext2D} [context] - optional context to affect\r\n     * @returns {Matrix} - new instance with the interpolated result\r\n     */\r\n    interpolateAnim: function (m2, t, context) {\r\n\r\n        var me = this,\r\n            m = context ? new Matrix(context) : new Matrix(),\r\n            d1 = me.decompose(),\r\n            d2 = m2.decompose(),\r\n            rotation = d1.rotation + (d2.rotation - d1.rotation) * t,\r\n            translateX = d1.translate.x + (d2.translate.x - d1.translate.x) * t,\r\n            translateY = d1.translate.y + (d2.translate.y - d1.translate.y) * t,\r\n            scaleX = d1.scale.x + (d2.scale.x - d1.scale.x) * t,\r\n            scaleY = d1.scale.y + (d2.scale.y - d1.scale.y) * t\r\n            ;\r\n\r\n        m.translate(translateX, translateY);\r\n        m.rotate(rotation);\r\n        m.scale(scaleX, scaleY);\r\n\r\n        return m._x();\r\n    },\r\n\r\n    /**\r\n     * Decompose the current matrix into simple transforms using either\r\n     * QR (default) or LU decomposition. Code adapted from\r\n     * http://www.maths-informatique-jeux.com/blog/frederic/?post/2013/12/01/Decomposition-of-2D-transform-matrices\r\n     *\r\n     * The result must be applied in the following order to reproduce the current matrix:\r\n     *\r\n     *     QR: translate -> rotate -> scale -> skewX\r\n     *     LU: translate -> skewY  -> scale -> skewX\r\n     *\r\n     * @param {boolean} [useLU=false] - set to true to use LU rather than QR algorithm\r\n     * @returns {*} - an object containing current decomposed values (rotate, skew, scale, translate)\r\n     */\r\n    decompose: function (useLU) {\r\n\r\n        var me = this,\r\n            a = me.a,\r\n            b = me.b,\r\n            c = me.c,\r\n            d = me.d,\r\n            acos = Math.acos,\r\n            atan = Math.atan,\r\n            sqrt = Math.sqrt,\r\n            pi = Math.PI,\r\n\r\n            translate = {x: me.e, y: me.f},\r\n            rotation = 0,\r\n            scale = {x: 1, y: 1},\r\n            skew = {x: 0, y: 0},\r\n\r\n            determ = a * d - b * c;\t// determinant(), skip DRY here...\r\n\r\n        if (useLU) {\r\n            if (a) {\r\n                skew = {x: atan(c / a), y: atan(b / a)};\r\n                scale = {x: a, y: determ / a};\r\n            }\r\n            else if (b) {\r\n                rotation = pi * 0.5;\r\n                scale = {x: b, y: determ / b};\r\n                skew.x = atan(d / b);\r\n            }\r\n            else { // a = b = 0\r\n                scale = {x: c, y: d};\r\n                skew.x = pi * 0.25;\r\n            }\r\n        }\r\n        else {\r\n            // Apply the QR-like decomposition.\r\n            if (a || b) {\r\n                var r = sqrt(a * a + b * b);\r\n                rotation = b > 0 ? acos(a / r) : -acos(a / r);\r\n                scale = {x: r, y: determ / r};\r\n                skew.x = atan((a * c + b * d) / (r * r));\r\n            }\r\n            else if (c || d) {\r\n                var s = sqrt(c * c + d * d);\r\n                rotation = pi * 0.5 - (d > 0 ? acos(-c / s) : -acos(c / s));\r\n                scale = {x: determ / s, y: s};\r\n                skew.y = atan((a * c + b * d) / (s * s));\r\n            }\r\n            else { // a = b = c = d = 0\r\n                scale = {x: 0, y: 0};\t\t// = invalid matrix\r\n            }\r\n        }\r\n\r\n        return {\r\n            scale: scale,\r\n            translate: translate,\r\n            rotation: rotation,\r\n            skew: skew\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Returns the determinant of the current matrix.\r\n     * @returns {number}\r\n     */\r\n    determinant: function () {\r\n        return this.a * this.d - this.b * this.c;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to x and y point.\r\n     * Returns a point object.\r\n     *\r\n     * @param {number} x - value for x\r\n     * @param {number} y - value for y\r\n     * @returns {{x: number, y: number}} A new transformed point object\r\n     */\r\n    applyToPoint: function (x, y) {\r\n\r\n        var me = this;\r\n\r\n        return {\r\n            x: x * me.a + y * me.c + me.e,\r\n            y: x * me.b + y * me.d + me.f\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to array with point objects or point pairs.\r\n     * Returns a new array with points in the same format as the input array.\r\n     *\r\n     * A point object is an object literal:\r\n     *\r\n     * {x: x, y: y}\r\n     *\r\n     * so an array would contain either:\r\n     *\r\n     * [{x: x1, y: y1}, {x: x2, y: y2}, ... {x: xn, y: yn}]\r\n     *\r\n     * or\r\n     * [x1, y1, x2, y2, ... xn, yn]\r\n     *\r\n     * @param {Array} points - array with point objects or pairs\r\n     * @returns {Array} A new array with transformed points\r\n     */\r\n    applyToArray: function (points) {\r\n\r\n        var i = 0, p, l,\r\n            mxPoints = [];\r\n\r\n        if (typeof points[0] === 'number') {\r\n\r\n            l = points.length;\r\n\r\n            while (i < l) {\r\n                p = this.applyToPoint(points[i++], points[i++]);\r\n                mxPoints.push(p.x, p.y);\r\n            }\r\n        }\r\n        else {\r\n            for (; p = points[i]; i++) {\r\n                mxPoints.push(this.applyToPoint(p.x, p.y));\r\n            }\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply current matrix to a typed array with point pairs. Although\r\n     * the input array may be an ordinary array, this method is intended\r\n     * for more performant use where typed arrays are used. The returned\r\n     * array is regardless always returned as a Float32Array.\r\n     *\r\n     * @param {*} points - (typed) array with point pairs\r\n     * @param {boolean} [use64=false] - use Float64Array instead of Float32Array\r\n     * @returns {*} A new typed array with transformed points\r\n     */\r\n    applyToTypedArray: function (points, use64) {\r\n\r\n        var i = 0, p,\r\n            l = points.length,\r\n            mxPoints = use64 ? new Float64Array(l) : new Float32Array(l);\r\n\r\n        while (i < l) {\r\n            p = this.applyToPoint(points[i], points[i + 1]);\r\n            mxPoints[i++] = p.x;\r\n            mxPoints[i++] = p.y;\r\n        }\r\n\r\n        return mxPoints;\r\n    },\r\n\r\n    /**\r\n     * Apply to any canvas 2D context object. This does not affect the\r\n     * context that optionally was referenced in constructor unless it is\r\n     * the same context.\r\n     * @param {CanvasRenderingContext2D} context\r\n     */\r\n    applyToContext: function (context) {\r\n        var me = this;\r\n        context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is an identity matrix (no transforms applied).\r\n     * @returns {boolean} True if identity (not transformed)\r\n     */\r\n    isIdentity: function () {\r\n        var me = this;\r\n        return (me._q(me.a, 1) &&\r\n        me._q(me.b, 0) &&\r\n        me._q(me.c, 0) &&\r\n        me._q(me.d, 1) &&\r\n        me._q(me.e, 0) &&\r\n        me._q(me.f, 0));\r\n    },\r\n\r\n    /**\r\n     * Returns true if matrix is invertible\r\n     * @returns {boolean}\r\n     */\r\n    isInvertible: function () {\r\n        return !this._q(this.determinant(), 0)\r\n    },\r\n\r\n    /**\r\n     * Test if matrix is valid.\r\n     */\r\n    isValid: function () {\r\n        return !this._q(this.a * this.d, 0);\r\n    },\r\n\r\n    /**\r\n     * Clones current instance and returning a new matrix.\r\n     * @param {boolean} [noContext=false] don't clone context reference if true\r\n     * @returns {Matrix}\r\n     */\r\n    clone: function (noContext) {\r\n        var me = this,\r\n            m = new Matrix();\r\n        m.a = me.a;\r\n        m.b = me.b;\r\n        m.c = me.c;\r\n        m.d = me.d;\r\n        m.e = me.e;\r\n        m.f = me.f;\r\n        if (!noContext) m.context = me.context;\r\n\r\n        return m;\r\n    },\r\n\r\n    /**\r\n     * Compares current matrix with another matrix. Returns true if equal\r\n     * (within epsilon tolerance).\r\n     * @param {Matrix} m - matrix to compare this matrix with\r\n     * @returns {boolean}\r\n     */\r\n    isEqual: function (m) {\r\n\r\n        var me = this,\r\n            q = me._q;\r\n\r\n        return (q(me.a, m.a) &&\r\n        q(me.b, m.b) &&\r\n        q(me.c, m.c) &&\r\n        q(me.d, m.d) &&\r\n        q(me.e, m.e) &&\r\n        q(me.f, m.f));\r\n    },\r\n\r\n    /**\r\n     * Returns an array with current matrix values.\r\n     * @returns {Array}\r\n     */\r\n    toArray: function () {\r\n        var me = this;\r\n        return [me.a, me.b, me.c, me.d, me.e, me.f];\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS: function () {\r\n        return \"matrix(\" + this.toArray() + \")\";\r\n    },\r\n\r\n    /**\r\n     * Generates a matrix3d() string that can be used with CSS transform.\r\n     * @returns {string}\r\n     */\r\n    toCSS3D: function () {\r\n        var me = this;\r\n        return \"matrix3d(\" + me.a + \", \" + me.b + \", 0, 0, \" + me.c + \", \" + me.d + \", 0, 0, 0, 0, 1, 0, \" + me.e + \", \" + me.f + \", 0, 1)\";\r\n    },\r\n\r\n    /**\r\n     * Returns a JSON compatible string of current matrix.\r\n     * @returns {string}\r\n     */\r\n    toJSON: function () {\r\n        return JSON.stringify(this.toArray());\r\n    },\r\n\r\n    /**\r\n     * Returns a string with current matrix as comma-separated list.\r\n     * @returns {string}\r\n     */\r\n    toString: function () {\r\n        return \"\" + this.toArray();\r\n    },\r\n\r\n    /**\r\n     * Compares floating point values with some tolerance (epsilon)\r\n     * @param {number} f1 - float 1\r\n     * @param {number} f2 - float 2\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n    _q: function (f1, f2) {\r\n        return Math.abs(f1 - f2) < 1e-14;\r\n    },\r\n\r\n    /**\r\n     * Apply current absolute matrix to context if defined, to sync it.\r\n     * @private\r\n     */\r\n    _x: function () {\r\n        var me = this;\r\n        if (me.context)\r\n            me.context.setTransform(me.a, me.b, me.c, me.d, me.e, me.f);\r\n        return me;\r\n    }\r\n};\r\n\r\nexport default Matrix;\n\n\n/** WEBPACK FOOTER **\n ** ./source/lib/matrix.js\n **/","/**\n * Defines the global root level namespace for the library.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires game\n * @requires module:play~pl.util\n * @requires types/Basic\n * @requires types/Dimensions\n */\nimport game from 'play.game';\nimport util from 'util';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point, Size } from 'types/Dimensions';\n\nvar pl;\n/**\n * Resolves the event type for user interactions.\n */\nfunction resolveEventType () {\n\tvar resolution;\n\n\tif (game.feature('touch')) {\n\t\tresolution = {\n\t\t\tACTION: 'touchend',\n\t\t\tACTION_DOWN: 'touchstart',\n\t\t\tACTION_UP: 'touchend',\n\t\t\tACTION_MOVE: 'touchmove',\n\t\t\tACTION_OUT: 'touchcancel'\n\t\t};\n\t} else {\n\t\tresolution = {\n\t\t\tACTION: 'click',\n\t\t\tACTION_DOWN: 'mousedown',\n\t\t\tACTION_UP: 'mouseup',\n\t\t\tACTION_MOVE: 'mousemove',\n\t\t\tACTION_OUT: 'mouseout'\n\t\t};\n\t}\n\n\treturn resolution;\n}\n\n/**\n * Globaly accesable, root level namespace for the library.\n * @namespace\n * @prop {object} EVENT - Namespace for noralized event name constants.\n * @prop {Basic} Basic - Base object type.\n * @prop {Point} Point - Object type which holds values on a 2D cartesian plane.\n * @prop {Size} Size - Object type which holds 2-dimentional values for size.\n * @prop {function} game - Registers a game view implementation. Also a namespace for other methods.\n * @prop {object} util - Namespace for utility functions.\n */\npl = {\n\tBasic, Point, Size, Queue,\n\tgame,\n\tutil,\n\t\n\t/**\n\t * @namespace\n\t * @prop {string} ACTION - The device normalized `click` event name.\n\t * @prop {string} ACTION_DOWN - The device normalized `mousedown` event name.\n\t * @prop {string} ACTION_UP - The device normalized `mouseup` event name.\n\t * @prop {string} ACTION_MOVE - The device normalized `mousemove` event name.\n\t * @prop {string} ACTION_OUT - The device normalized `mouseout` event name.\n\t */\n\tEVENT: resolveEventType()\n};\n\nexport default pl;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.js\n **/","/**\n * Defines the 'game' method for registration and initialization of game scopes. This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @module game\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play.game.component\n * @requires play.game.manager\n * @requires util\n * @requires types/Events\n * @requires types/GlobalScope\n * @requires types/Entity\n * @requires types/Screen\n * @requires types/Game\n */\nimport component from 'play.game.component';\nimport manager from 'play.game.manager';\nimport util from 'util';\nimport Events from 'types/Events';\nimport { default as SCOPE } from 'types/GlobalScope';\nimport Entity from 'types/Entity';\nimport Screen from 'types/Screen';\nimport Game from 'types/Game';\nimport platform from 'platform';\n\nvar GAMES, CONFIG, READY_QUEUE;\n\n/**\n * Define a game scope for registration and/or initialization.\n * This method also acts as a namespace for game level functions (See: [pl.game]{@link module:play~pl.game}).\n *\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction game (_name, _implementation) {\n\tif (game.isDOMReady) {\n\t\tinitialize(_name, _implementation);\n\t}\n\n\telse {\n\t\tregister(_name, _implementation);\n\t}\n}\n\nfunction ready (_eventName) {\n\tif (READY_QUEUE.length) return false;\n\tgame.trigger(_eventName || 'ready');\n}\n\n/**\n * Registers an implementation of a game scope for initialization.\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction register (_name, _implementation) {\n\tif (!~GAMES.indexOf(_name)) {\n\t\tGAMES.push({\n\t\t\tid: _name,\n\t\t\timplementation: _implementation\n\t\t});\n\t}\n}\n\n/**\n * Initializes an implementation of a game scope. (overloaded)\n * @function initialize\n * @protected\n * @arg {string} _name - The name of the game matched with a DOM nodes 'id' attribute.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\n\n/**\n * Initializes an implementation of a game scope.\n * @protected\n * @arg {array} _collection - The collection of game scope records for initialization.\n * @arg {function|object} _implementation - The constructor or object which implements the scope behavior.\n */\nfunction initialize (_name_collection, _implementation) {\n\tswitch (typeof _name_collection) {\n\t\tcase 'string':\n\t\t\tSCOPE[_name_collection] = Game\n\t\t\t\t.extend(_implementation)\n\t\t\t\t.initialize('#'+_name_collection);\n\t\t\tbreak;\n\n\t\tcase 'object':\n\t\t\t_name_collection.forEach(function (_item, _index) {\n\t\t\t\tinitialize(_item.id, _item.implementation);\n\t\t\t});\n\t\t\tbreak;\n\t}\n}\n\n\n/** @protected */\nGAMES = [];\n/** @protected */\nCONFIG = {};\n/** @protected */\nREADY_QUEUE = [];\n\n/**\n * Interface for game level configuration.\n * @namespace game\n * @memberof module:play~pl\n * @mixes Events\n */\n(function () {\n\n\tvar audioContext;\n\n\tthis.component = component;\n\tthis.manager = manager;\n\t\n\tutil.mixin(game, Events);\n\n\tthis.on('platform-event', function (_event) {\n\t\tconsole.log('play.game -', _event.name, _event.gameData);\n\t});\n\n\t/**\n\t * Starts the dominos falling\n\t * @function run\n\t * @memberof module:play~pl.game\n\t */\n\tthis.run = function () {\n\t\tgame.isDOMReady = true;\n\t\tgame.trigger('dom-ready');\n\n\t\tgame.component.loadAll(function () {\n\t\t\t// console.log('** All component sources loaded.');\n\t\t\tinitialize(GAMES);\n\n\t\t\tGAMES = null;\n\t\t});\n\n\t\tplatform.emit(platform.EVENT_INIT);\n\t};\n\n\tthis.report = function (_name) {\n\t\tplatform.emit(_name);\n\n\t\treturn this.report;\n\t};\n\n\tthis.report.exit = function (_gameScope) {\n\t\tplatform.saveGameState(_gameScope.progress());\n\t\tplatform.emit(platform.EVENT_EXIT);\n\n\t\treturn this;\n\t};\n\n\tthis.report.flip = function (_gameScope) {\n\t\tplatform.saveGameState(_gameScope.progress());\n\t\tplatform.emit(platform.EVENT_FLIPPED);\n\n\t\treturn this;\n\t};\n\n\t\n\t/**\n\t * Getter/Setter for game level configuration.\n\t * @function module:play~pl.game.config\n\t * @arg {string} _key - The key to retrieve\n\t * @returns {this}\n\t */\n\n\t/**\n\t * Getter/Setter for game level configuration.\n\t * @function config\n\t * @memberof module:play~pl.game\n\t * @arg {object} _mixin - Object to set properties on configuration.\n\t * @returns {this}\n\t */\n\tthis.config = function (_key_mixin) {\n\t\tswitch (typeof _key_mixin) {\n\t\t\tcase 'string': return util.resolvePath(CONFIG, _key_mixin);\n\t\t\tcase 'object':\n\t\t\t\tif (_key_mixin) util.mixin(CONFIG, _key_mixin);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * @function provideEntityType\n\t * @deprecated\n\t * @memberof module:play~pl.game\n\t */\n\tthis.provideEntityType = function () {\n\t\treturn Entity;\n\t};\n\n\t/**\n\t * @function provideScreenType\n\t * @deprecated\n\t * @memberof module:play~pl.game\n\t */\n\tthis.provideScreenType = function () {\n\t\treturn Screen;\n\t};\n\n\t/**\n\t * Augments the global scope.\n\t * @function scope\n\t * @arg {function|object} _mixin - Object or constructor to define members.\n\t * @returns {this}\n\t *\n\t * @memberof module:play~pl.game\n\t */\n\tthis.scope = function (_mixin) {\n\t\tif (typeof _mixin === 'function') {\n\t\t\t_mixin.call(SCOPE);\n\t\t}\n\n\t\telse if (_mixin) {\n\t\t\tSCOPE.mixin(_mixin);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * @function queue\n\t * @deprecated\n\t * @memberof module:play~pl.game\n\t */\n\tthis.queue = function (_item) {\n\t\tif (!~READY_QUEUE.indexOf(_item)) READY_QUEUE.push(_item);\n\n\t\treturn this;\n\t};\n\n\tthis.queue.complete = function (_item, _eventName) {\n\t\tvar index;\n\n\t\tindex = READY_QUEUE.indexOf(_item);\n\t\tREADY_QUEUE.splice(index, 1);\n\n\t\tready(_eventName);\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * Accessor for the detected features supported by the browser.\n\t *\n\t * *Supported Feature Detectors*\n\t * - touch\n\t *\n\t * @function feature;\n\t * @arg {string} _name - The feature which to test for (i.e. `\"touch\"`)\n\t * @returns {boolean} The support status for the specified feature.\n\t */\n\tthis.feature = (function () {\n\t\tvar detect = {\n\t\t\ttouch: function () {\n\t\t\t\treturn window.hasOwnProperty('ontouchend');\n\t\t\t}\n\t\t};\n\n\t\treturn function (_name) {\n\t\t\tvar tester = detect[_name];\n\t\t\tif (!tester && console) console.warn('No feature detection for \"'+_name+'\".');\n\t\t\treturn tester && tester();\n\t\t};\n\t}());\n\n\tthis.getAudioContext = function () {\n\t\tif (!audioContext) {\n\t\t\taudioContext = new (window.AudioContext || window.webkitAudioContext);\n\t\t\t// window.onfocus = function() { audioContext.resume(); };\n\t\t\t// window.onblur = function() { audioContext.suspend(); };\n\t\t}\n\t\treturn audioContext;\n\t};\n\n\tthis.enableAudioContext = function () {\n\t\tvar ctx, silence;\n\n\t\tctx = this.getAudioContext();\n\t\tsilence = ctx.createBufferSource();\n\n\t\tsilence.buffer = ctx.createBuffer(2, 1, 44100);\n\t\tsilence.connect(ctx.destination);\n\t\tsilence.start();\n\t\tsilence.disconnect();\n\n\t\treturn silence;\n\t};\n\n}).call(game);\n\nexport default game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.js\n **/","/**\n * Defines the `component()` method for component behavior registration. This method is also a namesapce for methods to manage and load component behavior scripts.\n *\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n *\n * @requires play~pl.util\n * @requires types/Events\n */\nimport util from 'util';\nimport Events from 'types/Events';\n\n/**\n * Collection of component behavior records\n * @const\n */\nvar COMPONENTS;\n\n/**\n * Registers a component behavior.\n * @arg {string} _name - The name for the component.\n * @arg {function|object} _implementation - Constructor function or object with the behavior's implementation.\n * @returns {@link module:play~pl.game}\n */\nfunction component (_name, _implementation) {\n\tif (!component.get(_name)) {\n\t\tCOMPONENTS.push({\n\t\t\tname: _name,\n\t\t\timplementation: _implementation,\n\t\t\tconfig: {}\n\t\t});\n\t}\n\n\treturn this;\n}\n\nCOMPONENTS = [];\n\n/**\n * Methods to manage and load component behavior scripts.\n * @namespace component\n * @memberof module:play~pl.game\n * @mixes Events\n */\n(function () {\n\t\n\tutil.mixin(this, Events);\n\n\t/**\n\t * Given a name; provides the component record. `{name, implementation}`\n\t * @memberof module:play~pl.game.component\n\t * @arg {string} _name - The name of the component.\n\t * @returns {object} The record.\n\t */\n\tthis.get = function (_name) {\n\t\tvar i, record;\n\n\t\tfor (i=0; record = COMPONENTS[i]; i+=1) {\n\t\t\tif (record.name === _name) return record;\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Loads the script for the component. The HTML and CSS will be loaded when the component scope initalizes.<br>\n\t * The path of the script file is resolved `{pl.game.config.componentDirectory}/{_name}/behavior.js`.\n\t * @memberof module:play~pl.game.component\n\t * @arg {string} _name - The name of the component.\n\t * @arg {function} _callback - Callback for load success.\n\t * @todo Implement Promises.\n\t * @returns `this`\n\t */\n\tthis.load = function (_name, _callback) {\n\t\tvar path\n\n\t\tif (component.get(_name)) {\n\t\t\tif (_callback) _callback.call(component, _name);\n\t\t\treturn null;\n\t\t}\n\n\t\tpath = pl.game.config('componentDirectory')+_name+'/behavior.js';\n\n\t\t$.getScript(path, function () {\n\t\t\tif (_callback) _callback.call(component, _name);\n\t\t\tcomponent.trigger('loaded', [_name]);\n\t\t});\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * Loads all the component scripts for HTML elements with `pl-component` attributes.\n\t * @memberof module:play~pl.game.component\n\t * @arg {function} _callback - Callback for load success.\n\t * @todo Implement Promises.\n\t * @returns `this`\n\t */\n\tthis.loadAll = function (_callback) {\n\t\tvar $components, queue;\n\n\t\t$components = $('[pl-component]');\n\t\tqueue = [];\n\n\t\t$components.each(function (_index) {\n\t\t\tvar name;\n\n\t\t\tname = $(this).attr('pl-component');\n\n\t\t\tif (~queue.indexOf(name)) return;\n\n\t\t\tqueue.push(name);\n\t\t});\n\n\t\tqueue.slice(0).forEach(function (_name) {\n\t\t\tcomponent.load(_name, function () {\n\t\t\t\tvar index;\n\n\t\t\t\tindex = queue.indexOf(_name);\n\t\t\t\tqueue.splice(index, 1);\n\n\t\t\t\tif (!queue.length && _callback) _callback.apply(component, arguments)\n\t\t\t});\n\t\t});\n\n\t\treturn this;\n\t};\n\n\t// Maybe?\n\t// this.config = function () {};\n\n}).call(component);\n\nexport default component;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.component.js\n **/","/**\n*  Events\n*  @desc Contains methods for managing and dispatching events from objects.\n*  @proto Basic\n*/\n\nimport Basic from 'types/Basic';\n\nvar Events = Basic.extend(function () {\n\tvar i, method, methods;\n\t/**\n\t*  @desc Creates a function with a proxy to the jQuery method.\n\t*  @param _name (String) The name of the method being proxied.\n\t*  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t*  @private\n\t*/\n\tfunction createProxyFunction (_name) {\n\t\treturn function () {\n\t\t\tvar $jq = $();\n\t\t\t// We must wrap our object in jQuery. If 'typeof this' is a function then we need\n\t\t\t// to add it in this manner, otherwise jQuery treats it like a ready callback.\n\t\t\t$jq.push(this);\n\n\t\t\treturn $.fn[_name].apply($jq, arguments);\n\t\t};\n\t}\n\n\tmethods = ['on', 'off', 'trigger'];\n\n\tthis.baseType = 'TYPE_EVENTS';\n\n\tfor (i=0; method = methods[i]; i+=1) {\n\t\tthis[method] = createProxyFunction(method);\n\t}\n});\n\nexport default Events;\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Events.js\n **/","import draggable from 'play.game.manager.draggable';\n\nexport { draggable }\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.js\n **/","import util from 'util';\nimport Collection from 'types/Collection';\nimport { Point } from 'types/Dimensions';\n\nconst COLLECTION_DRAGABLES = Collection.create();\n\nvar draggableStyleSheet;\n\nfunction boot () {\n\tcreateHelperStyleSheet();\n\tattachEvents();\n}\n\nfunction attachEvents () {\n\tvar state, E;\n\n\tE = pl.EVENT;\n\n\t// Disable scrolling on touchDevices (particularly for iOS elastic scroll).\n\tif (E.ACTION_MOVE === 'touchmove') attachEvents.disableTouchScroll();\n\n\t$(document)\n\t\t.on(E.ACTION_DOWN, function (_event) {\n\t\t\tvar $draggable, scope, cursor, mode, game, point, transform, helperID, dragStartEvent;\n\n\t\t\t$draggable = $(_event.target).closest('[pl-draggable]');\n\n\t\t\tif ($draggable.length) {\n\t\t\t\tscope = $draggable.scope();\n\t\t\t\tcursor = resolveEventPoint(_event, 1/scope.game.zoom);\n\t\t\t\tmode = $draggable.pl('draggable');\n\t\t\t\tgame = {\n\t\t\t\t\tposition: scope.game.absolutePosition(),\n\t\t\t\t\tscale: scope.game.transformScale().x\n\t\t\t\t};\n\t\t\t\tpoint = $draggable.absolutePosition().dec(game.position);\n\t\t\t\ttransform = $draggable.transform();\n\t\t\t\thelperID = createID();\n\t\t\t\tstate = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\t$draggable: $draggable,\n\t\t\t\t\tscope: scope,\n\t\t\t\t\t$helper: null,\n\n\t\t\t\t\tstart: {\n\t\t\t\t\t\tcursor: cursor,\n\t\t\t\t\t\tpoint: point,\n\t\t\t\t\t\ttransform: transform\n\t\t\t\t\t},\n\n\t\t\t\t\tprogress: {\n\t\t\t\t\t\tdistance: null,\n\t\t\t\t\t\tpoint: null,\n\t\t\t\t\t\ttransform: null\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// FireFox has a different scaling implementation than other browsers (transform:scale(); vs. zoom:;)\n\t\t\t\t// so we need to account for the game transform scale.\n\t\t\t\t// \n\t\t\t\tif (game.scale !== 1) point = point.scale(1/game.scale);\n\n\t\t\t\tdraggableStyleSheet.html( provideSource( helperID, createDraggableRule($draggable)));\n\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase 'clone':\n\t\t\t\t\t\tstate.$helper = $draggable.clone();\n\t\t\t\t\t\tstate.$helper\n\t\t\t\t\t\t\t.id(helperID)\n\t\t\t\t\t\t\t.pl('draggable', null) // helpers are not to be captured as draggable\n\t\t\t\t\t\t\t.addClass('draggable-helper')\n\t\t\t\t\t\t\t.appendTo(document.body)\n\t\t\t\t\t\t\t.absolutePosition(point);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'pluck':\n\t\t\t\t\t\t$draggable.addClass('PLUCKED');\n\n\t\t\t\t\t\tstate.$helper = $draggable.clone();\n\t\t\t\t\t\tstate.$helper\n\t\t\t\t\t\t\t.id(helperID)\n\t\t\t\t\t\t\t.pl('draggable', null) // helpers are not to be captured as draggable\n\t\t\t\t\t\t\t.addClass('draggable-helper')\n\t\t\t\t\t\t\t.appendTo(document.body)\n\t\t\t\t\t\t\t.absolutePosition(point);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstate.$helper = $draggable;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate.$helper.removeClass('DRAG-ENDED')\n\t\t\t\t\t.addClass('DRAG-START');\n\n\t\t\t\tdragStartEvent = $.Event('drag-start', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: scope\n\t\t\t\t});\n\n\t\t\t\tscope.trigger(dragStartEvent);\n\t\t\t}\n\t\t})\n\n\t\t.on(E.ACTION_MOVE, function (_event) {\n\t\t\tvar cursor, $draggable, distance, point, transform, dragMoveEvent;\n\n\t\t\tif (state) {\n\t\t\t\tcursor = resolveEventPoint(_event, 1/state.scope.game.zoom);\n\t\t\t\tdistance = state.start.cursor.distance(cursor);\n\t\t\t\tpoint = Point.create();\n\t\t\t\ttransform = null;\n\n\t\t\t\tif (state.start.transform !== 'none') {\n\t\t\t\t\ttransform = state.start.transform.clone();\n\t\t\t\t\ttransform.translate(distance.width, distance.height);\n\t\t\t\t\tpoint.set(transform.applyToPoint(0, 0));\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tpoint = distance.to('point');\n\t\t\t\t}\n\n\t\t\t\tif (state.$helper.hasClass('DRAG-START')) {\n\t\t\t\t\tstate.$helper\n\t\t\t\t\t\t.removeClass('DRAG-START')\n\t\t\t\t\t\t.addClass('DRAGGING');\n\t\t\t\t}\n\n\t\t\t\tdragMoveEvent = $.Event('drag-move', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: state.scope\n\t\t\t\t});\n\n\t\t\t\tstate.progress.distance = distance;\n\t\t\t\tstate.progress.point = state.start.point.inc(point);\n\t\t\t\tstate.progress.transform = transform;\n\n\t\t\t\tstate.scope.translate(state.$helper, point);\n\t\t\t\tstate.scope.trigger(dragMoveEvent);\n\t\t\t}\n\t\t})\n\n\t\t.on([E.ACTION_UP, E.ACTION_OUT].join(' '), function (_event) {\n\t\t\tvar $draggable, dragEndEvent;\n\n\t\t\tif (state) {\n\t\t\t\t// Do not end dragging if we dont mouse out of the document.\n\t\t\t\tif (_event.type === 'mouseout' && !~[null, document.documentElement].indexOf(_event.toElement)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$draggable = state.$draggable;\n\n\t\t\t\tif (state.$helper.hasClass('draggable-helper')) {\n\t\t\t\t\tstate.$helper.on('transitionend', function () {\n\t\t\t\t\t\t$draggable.removeClass('PLUCKED');\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstate.$helper\n\t\t\t\t\t.removeClass('DRAG-START DRAGGING')\n\t\t\t\t\t.addClass('DRAG-ENDED');\n\n\t\t\t\tdragEndEvent = $.Event('drag-end', {\n\t\t\t\t\tstate: state,\n\t\t\t\t\ttargetScope: state.scope\n\t\t\t\t});\n\n\t\t\t\tstate.scope.trigger(dragEndEvent);\n\n\t\t\t\tstate = null;\n\t\t\t}\n\t\t});\n}\n\nattachEvents.disableTouchScroll = function () {\n\tdocument.addEventListener(\"touchmove\", function (_event) {\n\t\t_event.preventDefault();\n\t}, false);\n};\n\nfunction resolveEventPoint (_event, _scale) {\n\tvar scale = _scale || 1;\n\n\tif (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t\t/**\n\t\t * For now, interactions should use the last touch if multiple fingers are captured.\n\t\t * @todo Maybe invoke action for each touch.\n\t\t */\n\t\t_event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length-1];\n\t}\n\t\n\treturn Point.create().set(new function () {\n\t\tif (_event.touch) {\n\t\t\tthis.x = _event.touch.clientX * scale;\n\t\t\tthis.y = _event.touch.clientY * scale;\n\t\t} else {\n\t\t\tthis.x = _event.clientX * scale;\n\t\t\tthis.y = _event.clientY * scale;\n\t\t}\n\t});\n}\n\nfunction createHelperStyleSheet () {\n\tdraggableStyleSheet = $('<style id=\"draggable-helper-css\" type=\"text/css\"></style>').appendTo(document.body);\n}\n\nfunction createDraggableRule (_$draggable) {\n\tvar i, style, blacklist, rule, prop;\n\n\tstyle = window.getComputedStyle(_$draggable[0]);\n\trule = {};\n\tblacklist = [\n\t\t\"zIndex\",\n\t\t\"opacity\",\n\t\t\"cursor\",\n\t\t\"transition\",\n\t\t\"transitionDelay\",\n\t\t\"transitionDuration\",\n\t\t\"transitionProperty\",\n\t\t\"transitionTimingFunction\"\n\t];\n\n\tfor (i=0; i < style.length; i+=1) {\n\t\tprop = util.transformId(style[i], true);\n\t\tif (~blacklist.indexOf(prop)) continue;\n\t\tif (prop.indexOf('Webkit') === 0) prop = prop.slice(0,1).toLowerCase()+prop.slice(1);\n\t\tif (style[prop]) rule[prop] = style[prop];\n\t}\n\n\treturn rule;\n}\n\nfunction provideSource (_id, _rule) {\n\tvar source, prop, value;\n\n\tsource = '#'+_id+'.draggable-helper {';\n\n\tfor (prop in _rule) {\n\t\tif (!_rule.hasOwnProperty(prop)) continue;\n\t\tvalue = _rule[prop];\n\t\tsource += prop.replace(/([A-Z]+)/g, '-$1').toLowerCase()+': '+value+';'\n\t}\n\n\tsource += '}';\n\n\treturn source;\n};\n\nfunction createID () {\n\treturn 'xy-xyxy-y'.replace(/x|y/g, function (_token) {\n\t\tif (_token === 'x') return (Math.floor(Math.random() * 5) + 10).toString(16);\n\t\treturn Math.floor(Math.random() * Date.now()).toString(16).slice(2);\n\t});\n}\n\nvar draggableManager = {\n\n};\n\n$(boot);\n\nexport default draggableManager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/play.game.manager.draggable.js\n **/","/**\n * Collections are iterables which hold a consistent interface throughout its indexes.\n *\n * @module\n * @requires module:types/BasicArray\n */\nimport BasicArray from 'types/BasicArray';\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. use `Collection.create()` to get a new instance.\n * @classdesc Iterable holding record objects of the same interface.\n * @class\n * @extends module:types/BasicArray~BasicArray\n */\nvar Collection = BasicArray.extend(function () {\n\t/**\n\t * Gets the record object which has `_member` as a member.\n\t * @instance\n\t * @protected\n\t * @memberof module:types/Collection~Collection\n\t * @arg {*} _member - object reference to search for.\n\t * @arg {string} _key - the target key to test the `_member` against.\n\t * @arg {boolean} _shouldCollect - <span style=\"color: blue; font-weight: bold;\">`true`</span>: collect all matching elements.<br>\n\t * <span style=\"color: blue; font-weight: bold;\">`false`</span>: return first result.\n\t */\n\tfunction getRecord (_member, _key, _shouldCollect) {\n\t\tvar i, record, member, result;\n\n\t\tresult = [];\n\n\t\tfor (i=0; record = this[i]; i+=1) {\n\t\t\tif (_key !== undefined) {\n\t\t\t\tif (record[_key] === _member) {\n\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t}\n\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn record;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if (record instanceof Array) {\n\t\t\t\tif (~record.indexOf(_member)) {\n\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t}\n\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn record;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tfor (member in record) {\n\t\t\t\t\tif (!record.hasOwnProperty(member)) continue;\n\t\t\t\t\tif (record[member] === _member) {\n\t\t\t\t\t\tif (_shouldCollect) {\n\t\t\t\t\t\t\tresult.push(record);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn record;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result.length ? result : null;\n\t}\n\n\t/**\n\t * Objects with this as an own property will be identified as the root object.\n\t * @memberof module:types/Collection~Collection\n\t * @readonly\n\t * @default\n\t */\n\tthis.baseType = 'TYPE_COLLECTION';\n\n\tthis.add = function (_record) {\n\t\tif (~this.indexOf(_record)) return false;\n\t\tthis.push(_record);\n\n\t\treturn this;\n\t};\n\n\tthis.remove = function (_record) {\n\t\tvar index;\n\n\t\tindex = this.indexOf(_record);\n\t\tif (~index) this.splice(index, 1);\n\n\t\treturn this;\n\t};\n\n\tthis.has = function (_record) {\n\t\treturn !!~this.indexOf(_record);\n\t};\n\n\tthis.get = function (_member, _key) {\n\t\treturn getRecord.call(this, _member, _key);\n\t};\n\n\tthis.filter = function (_member, _key) {\n\t\treturn getRecord.call(this, _member, _key, true);\n\t};\n\n});\n\nexport default Collection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Collection.js\n **/","/**\n*  GlobalScope\n*/\n\nimport { Scope } from 'types/Scope';\n\nvar GlobalScope = Scope.extend(function () {\n\t\n\tthis.baseType = 'TYPE_GLOBAL_SCOPE';\n\n});\n\nexport default GlobalScope;\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/GlobalScope.js\n **/","/**\n * Scopes are packages which contain a reference to a DOM element wrapped in a jQuery object.\n * This enables properties and methods to be in context of the DOM node and its descendants.\n *\n * @module\n * @requires types/jQProxy\n * @requires types/Basic\n * @requires types/Queue\n * @requires play.game\n * @requires util\n * @requires evalAction\n *\n * @exports createEntity\n */\nimport jQProxy from 'types/jQProxy';\nimport Basic from 'types/Basic';\nimport Queue from 'types/Queue';\nimport { Point } from 'types/Dimensions';\nimport game from 'play.game';\nimport util from 'util';\nimport evalAction from 'evalAction';\nimport { AudioManager } from 'types/AudioManager';\n\n/**\n * Creates a new Enitiy instance with a context node and implementation.\n * The instance is prototyped from the parent scope.\n *\n * @memberof module:types/Scope~Scope#createEntity\n * @protected\n * @arg {jQuery} _$node - jQuery object with a single node in the collection.\n * @arg {function|object} _implementation - Constructor function or object with the entity behavior.\n * @returns {module:types/Scope~Scope}\n */\nfunction createEntity (_$node, _implementation) {\n\tvar component, prototype, componentRecord, instance;\n\n\tcomponent = _$node.attr('pl-component');\n\tprototype = this;\n\n\tif (component) {\n\t\tcomponentRecord = game.component.get(component);\n\n\t\tif (componentRecord) {\n\t\t\t// If a scope is being defined as an extention of a component before the component scope\n\t\t\t// has been allocated, we construct the component first then pass it as the proto.\n\t\t\t// But we need to make sure we are not allocating the component it self.\n\t\t\tif (componentRecord.implementation !== _implementation) {\n\t\t\t\tprototype = this.extend(componentRecord.implementation);\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tthrow new Error('No implementation record for the '+component+'component.');\n\t\t}\n\t}\n\n\tinstance = typeof _implementation === 'function' ? prototype.extend(_implementation) : prototype.create();\n\n\treturn instance.initialize(_$node, component);\n}\n\n/**\n * <span class=\"important\">NOTE:</span> This is NOT a constructor. Use `Scope.create()` to get a new instance.\n * @classdesc A package which contains a reference to a DOM node wrapped in a jQuery object. For more information on scopes read [this]{@link module:types/Scope}.\n * @class\n * @extends module:types/jQProxy~jQProxy\n */\nvar Scope = jQProxy.extend(function () {\n\n\t/**\n\t * Collection of records pairing a node with its action.\n\t * @memberof module:types/Scope~Scope\n\t * @static\n\t * @protected\n\t * @todo Convert to types/Collection\n\t */\n\tvar Actionables;\n\n\tfunction attachActionHandler () {\n\t\tthis.on(pl.EVENT.ACTION, function (_event) {\n\t\t\tvar target, record;\n\n\t\t\ttarget = $(_event.target).closest('[pl-action]')[0];\n\n\t\t\tif (_event.originalEvent && _event.originalEvent.changedTouches) {\n\t\t\t\t/**\n\t\t\t\t * For now, interactions should use the last touch if multiple fingers are captured.\n\t\t\t\t * @todo Maybe invoke action for each touch.\n\t\t\t\t */\n\t\t\t\t_event.touch = _event.originalEvent.changedTouches[_event.originalEvent.changedTouches.length-1];\n\t\t\t}\n\t\t\t\n\t\t\t_event.cursor = Point.create().set(new function () {\n\t\t\t\tif (_event.touch) {\n\t\t\t\t\tthis.x = _event.touch.clientX;\n\t\t\t\t\tthis.y = _event.touch.clientY;\n\t\t\t\t} else {\n\t\t\t\t\tthis.x = _event.clientX;\n\t\t\t\t\tthis.y = _event.clientY;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (target) {\n\t\t\t\trecord = this.actionables.item(target);\n\n\t\t\t\tif (record) {\n\t\t\t\t\t_event.targetScope = this;\n\t\t\t\t\tthis.event = _event;\n\t\t\t\t\tevalAction(record.action, this);\n\t\t\t\t\tthis.event = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getRecordBy (_key, _member, _collection) {\n\t\tvar i, record;\n\n\t\tif (_collection) {\n\t\t\tfor (i=0; record = _collection[i]; i+=1) {\n\t\t\t\tif (record[_key] === _member) return record;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction removeRecord (_record, _collection) {\n\t\tvar index;\n\n\t\tindex = _collection.indexOf(_record);\n\t\tif (~index) _collection.splice(index, 1);\n\t}\n\n\tfunction captureDropables (_scope) {\n\t\tvar collection;\n\n\t\tcollection = [];\n\n\t\t_scope.find('> [pl-pluck]').each(function () {\n\t\t\tvar name;\n\n\t\t\tname = $(this).attr('pl-pluck');\n\n\t\t\tcollection.push(this);\n\t\t\tcollection[name] = this;\n\t\t});\n\n\t\treturn collection;\n\t}\n\n\tfunction pluckAndDrop (_dropables, _template) {\n\t\t$(_template).find('[pl-drop]').each(function () {\n\t\t\tvar $node, name, dropable;\n\n\t\t\t$node = $(this);\n\t\t\tname = $node.attr('pl-drop');\n\t\t\tdropable = _dropables[name];\n\n\t\t\tif (dropable) {\n\t\t\t\t$node.replaceWith(dropable.children);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Protected\n\tfunction loadComponentAssets (_name, _callback) {\n\t\tvar scope, path, totalRequests, transcludeMode, dropables;\n\n\t\tfunction ready () {\n\t\t\tready.status +=1;\n\n\t\t\tif (ready.status === totalRequests) {\n\t\t\t\tif (_callback) {\n\t\t\t\t\t_callback.call(scope, _name);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttotalRequests = 0;\n\t\tscope = this;\n\t\tpath = game.config('componentDirectory')+_name+'/';\n\t\tdropables = captureDropables(this);\n\t\ttranscludeMode = dropables.length ? this.TRANSCLUDE_PLUCK : this.properties.transclude;\n\t\tready.status = 0;\n\n\t\tif (!this.children().length || transcludeMode) {\n\t\t\ttotalRequests+=1;\n\t\t\t$('<div>').load(path+'template.html', function () {\n\t\t\t\tvar memory;\n\n\t\t\t\tmemory = [];\n\n\t\t\t\tswitch (transcludeMode) {\n\t\t\t\t\tcase scope.TRANSCLUDE_APPEND:\n\t\t\t\t\t\tscope.append(this.children);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.TRANSCLUDE_PREPEND:\n\t\t\t\t\t\tscope.prepend(this.children);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\tcase scope.TRANSCLUDE_PLUCK:\n\t\t\t\t\t\tpluckAndDrop(dropables, this);\n\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.TRANSCLUDE_REPLACE:\n\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (transcludeMode) {\n\t\t\t\t\t\t\tpluckAndDrop(new (function () {\n\t\t\t\t\t\t\t\tthis[transcludeMode] = scope.node();\n\t\t\t\t\t\t\t}), this);\n\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tscope.empty().append(this.children);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tscope.findOwn('[pl-component]').each(function () {\n\t\t\t\t\tvar name;\n\n\t\t\t\t\tname = $(this).attr('pl-component');\n\n\t\t\t\t\tif (~memory.indexOf(name)) return;\n\n\t\t\t\t\tmemory.push(name);\n\n\t\t\t\t\ttotalRequests+=1;\n\n\t\t\t\t\tgame.component.load(name, function () {\n\t\t\t\t\t\tready();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tready();\n\t\t\t});\n\t\t}\n\n\t\tif (!$('style[pl-for-component=\"'+_name+'\"]').length && game.config('shouldLoadComponentStyles') !== false) {\n\t\t\ttotalRequests+=1;\n\t\t\t$('<style type=\"text/css\" pl-for-component=\"'+_name+'\">')\n\t\t\t\t.load(path+'style.css', ready)\n\t\t\t\t.appendTo(document.body);\n\t\t}\n\n\t\tif (!totalRequests) _callback && _callback.call(this, _name);\n\n\t\treturn this;\n\t}\n\n\tfunction captureProperties () {\n\t\tvar i, attr, name, collection;\n\n\t\tcollection = (function () {\n\t\t\t\n\t\t\tthis.has = function (_name) {\n\t\t\t\treturn !!~this.indexOf(_name);\n\t\t\t};\n\n\t\t\treturn this;\n\n\t\t}).call([]);\n\n\t\tfor (i=0; attr = this.$els[0].attributes[i]; i+=1) {\n\t\t\t// I explicitly want it to be at the beginning.\n\t\t\tif (attr.name.indexOf('pl-') === 0) {\n\t\t\t\tname = attr.name.slice(3);\n\t\t\t\tcollection[util.transformId(name, true)] = attr.value;\n\t\t\t\t\n\t\t\t\tcollection.push(name);\n\t\t\t}\n\t\t}\n\n\t\tif (collection.length) this.properties = collection;\n\n\t\treturn this;\n\t}\n\n\tfunction initializeEntities () {\n\t\tif (!this.hasOwnProperty('entities')) return this;\n\n\t\tthis.entities.forEach(this.bind(function (_record, _index) {\n\t\t\tvar $nodes, query, index;\n\n\t\t\t$nodes = this.findOwn(_record.selector);\n\t\t\tquery = ['#'+_record.selector, '[pl-id='+_record.selector+']', '[pl-component='+_record.selector+']', '[pl-'+_record.selector+']'];\n\t\t\tindex = 0;\n\n\t\t\twhile (!$nodes.length) {\n\t\t\t\tif (index === query.length) {\n\t\t\t\t\tthrow new Error(\"Unable to locate entity with selector\", _record.selector);\n\t\t\t\t}\n\t\t\t\t$nodes = this.findOwn(query[index]);\n\t\t\t\tindex+=1;\n\t\t\t}\n\n\t\t\t$nodes.each(this.bind(function (_index, _node) {\n\t\t\t\tvar $node, instance, id;\n\n\t\t\t\t$node = $(_node);\n\n\t\t\t\tif (!Scope.isPrototypeOf(_record)) {\n\t\t\t\t\tinstance = createEntity.call(this, $node, _record.implementation);\n\t\t\t\t\tif (!instance.isReady) this.assetQueue.add(instance);\n\t\t\t\t} else {\n\t\t\t\t\tinstance = _record;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tid = util.transformId(instance.id(), true);\n\t\t\t\tif (id) util.assignRef(this, id, instance);\n\t\t\t}));\n\t\t}));\n\n\t\treturn this;\n\t}\n\n\tfunction handleProperties () {\n\t\tvar scope, property, handler;\n\n\t\tscope = this;\n\n\t\tif (this.hasOwnProperty('properties')) {\n\t\t\tthis.properties.forEach(function (_name) {\n\t\t\t\thandler = scope.propertyHandlers[_name];\n\t\t\t\tif (handler) handler.call(scope, scope.$els[0], _name, scope.properties[_name]);\n\t\t\t});\n\t\t}\n\n\t\tif (this.propertyHandlers) {\n\t\t\tfor (property in this.propertyHandlers) {\n\t\t\t\t// Only exclide members on the base type.\n\t\t\t\tif (Basic.hasOwnProperty(property)) continue;\n\n\t\t\t\thandler = this.propertyHandlers[property];\n\n\t\t\t\tthis.findOwn('[pl-'+property+']').each(function () {\n\t\t\t\t\tvar attr;\n\n\t\t\t\t\tif (scope === $(this).scope()) {\n\t\t\t\t\t\tattr = this.attributes.getNamedItem('pl-'+property);\n\n\t\t\t\t\t\tif (handler) handler.call(scope, this, property, attr.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfunction invokeLocal (_name) {\n\t\tvar args, owner;\n\n\t\targs = [].slice.call(arguments, 1);\n\n\t\tif (this.isMemberSafe(_name)) {\n\t\t\treturn this[_name].apply(this, arguments);\n\t\t}\n\t}\n\n\tfunction init () {\n\t\tvar willInitEvent, initEvent;\n\n\t\tinitEvent = $.Event('initialize', { targetScope: this });\n\t\twillInitEvent = $.Event('will-initialize', { targetScope: this });\n\n\t\tinvokeLocal.call(this, 'willInit');\n\t\tthis.trigger(willInitEvent);\n\n\t\tthis.attachEvents();\n\n\t\tinitializeEntities.call(this);\n\t\thandleProperties.call(this);\n\n\t\tthis.watchAssets();\n\t\tthis.captureAudioAssets();\n\t\tthis.captureReferences();\n\n\t\tthis.__init();\n\t\tinvokeLocal.call(this, 'init');\n\n\t\tthis.trigger(initEvent);\n\n\t\tif (!this.isReady) this.assetQueue.ready();\n\n\t\treturn this;\n\t}\n\n\tfunction ready () {\n\t\tvar readyEvent, entities;\n\n\t\treadyEvent = $.Event('ready', { targetScope: this });\n\t\tentities = this.findOwn('.pl-scope').scope();\n\n\t\tif (entities) {\n\t\t\tif (entities.length > 0) {\n\t\t\t\tthis.entities = entities;\n\t\t\t} else {\n\t\t\t\tthis.entities = [entities];\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Sort audio into DOM order.\n\t\t * @todo Consider including this into `AudioManager`. Micah: 2/23/2016.\n\t\t */\n\t\tif (this.hasOwnProperty('audio')) {\n\t\t\t(this.game || this).media.addShadow(this.audio);\n\t\t\tthis.audio.collections().forEach(function (_collection) {\n\t\t\t\tvar map = {\n\t\t\t\t\tvoiceOver: 'voice-over',\n\t\t\t\t\tbackground: 'background',\n\t\t\t\t\tsfx: 'sfx'\n\t\t\t\t};\n\n\t\t\t\tif (!_collection.length) return;\n\n\t\t\t\tthis.findOwn('audio.'+map[_collection.type]).each(function (_index, _node) {\n\t\t\t\t\tvar id, audio, collection, index;\n\n\t\t\t\t\tid = $(_node).id();\n\t\t\t\t\taudio = (_collection.find('#'+id) || [])[0];\n\t\t\t\t\tindex = _collection.indexOf(audio);\n\n\t\t\t\t\tif (index !== _index) {\n\t\t\t\t\t\t_collection[index] = _collection[_index];\n\t\t\t\t\t\t_collection[_index] = audio;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tthis.isReady = true;\n\t\tthis.addClass('READY');\n\n\t\tthis.__ready();\n\t\tinvokeLocal.call(this, 'ready');\n\n\t\tthis.trigger(readyEvent);\n\t}\n\n\tActionables = (function () {\n\n\t\tutil.mixin(this, Basic);\n\n\t\tthis.add = function (_node, _action) {\n\t\t\tif (!this.has(_node)) {\n\t\t\t\tthis.push({\n\t\t\t\t\tnode: _node,\n\t\t\t\t\taction: _action\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.remove = function (_node) {\n\t\t\tvar item, index;\n\n\t\t\titem = this.item(_node);\n\t\t\tindex = this.indexOf(item);\n\t\t\tif (~index) this.splice(index, 1);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.item = function (_node) {\n\t\t\tvar i, item;\n\n\t\t\tfor (i=0; item = this[i]; i+=1) {\n\t\t\t\tif (item.node === _node) return item;\n\t\t\t}\n\t\t};\n\n\t\tthis.has = function (_node) {\n\t\t\treturn !!this.item(_node);\n\t\t};\n\n\t\treturn this;\n\n\t}).call([]);\n\n\tthis.TRANSCLUDE_REPLACE = 'replace';\n\tthis.TRANSCLUDE_PREPEND = 'prepend';\n\tthis.TRANSCLUDE_APPEND = 'append';\n\tthis.TRANSCLUDE_PLUCK = 'pluck';\n\n\tthis.baseType = 'TYPE_SCOPE';\n\tthis.actionables = null;\n\tthis.isReady = null;\n\tthis.isComponent = false;\n\tthis.entities = null;\n\tthis.audio = null;\n\tthis.properties = null;\n\tthis.propertyHandlers = null;\n\tthis.assetQueue = null;\n\tthis.event = null;\n\tthis.currentMedia = {};\n\t\n\tthis.initialize = function (_node_selector, _componentName) {\n\t\tvar scope;\n\n\t\tscope = this;\n\n\t\tthis.isReady = false;\n\t\tthis.isComponent = !!_componentName;\n\t\tthis.event = null;\n\t\tthis.assetQueue = Queue.create();\n\t\tthis.$els = (_node_selector.jquery) ? _node_selector : $(_node_selector);\n\n\t\tif (!this.$els.length) {\n\t\t\tthrow new ReferenceError('Unable to locate the element with selector '+this.$els.selector+'.');\n\t\t}\n\n\t\tthis.addClass('pl-scope '+(_componentName ? _componentName+'-component' : ''));\n\t\tthis.data('pl-scope', this);\n\t\tthis.data('pl-isComponent', !!_componentName);\n\n\t\tcaptureProperties.call(this);\n\t\t\n\t\tif (_componentName) {\n\t\t\tloadComponentAssets.call(this, _componentName, function () {\n\t\t\t\tinit.call(this);\n\t\t\t});\n\t\t}\n\t\t\n\t\telse {\n\t\t\tinit.call(this);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\t// only for use in base types\n\tthis.__init = function () { return this; };\n\tthis.__ready = function () { return this; };\n\n\tthis.willInit = function () { return this; };\n\tthis.init = function () { return this; };\n\tthis.ready = function () { return this; };\n\n\tthis.watchAssets = function (_nodes) {\n\t\tvar createHandler, watch;\n\n\t\tcreateHandler = this.bind(function (_node) {\n\t\t\treturn (function () {\n\t\t\t\tvar loadedEvent = $.Event('loaded', { targetScope: this });\n\n\t\t\t\tthis.assetQueue.ready(_node.src);\n\t\t\t\tthis.trigger(loadedEvent, [_node]);\n\n\t\t\t\t_node.onload = null;\n\t\t\t}).bind(this);\n\t\t});\n\n\t\twatch = this.bind(function (_index, _node) {\n\t\t\tvar node = typeof _index === 'number' ? _node : _index;\n\n\t\t\tif (node.nodeName !== 'IMG' || node.complete) return;\n\t\t\tif (this.assetQueue.add(node.src)) {\n\t\t\t\tnode.onload = createHandler(node);\n\t\t\t\tnode.onerror = function () {\n\t\t\t\t\tconsole.error('Image failed to load', node.src);\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (_nodes) {\n\t\t\t_nodes.forEach(watch);\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.each(watch);\n\t\tthis.findOwn('img').each(watch);\n\n\t\treturn this;\n\t};\n\n\tthis.attachEvents = function () {\n\n\t\tthis.proto();\n\n\t\tthis.assetQueue.on('complete', this.bind(function () {\n\t\t\tthis.assetQueue.off();\n\t\t\tready.call(this);\n\t\t}));\n\n\t\tthis.on('ready', function (_event) {\n\t\t\tif (this.has(_event.targetScope) && this.assetQueue.has(_event.targetScope)) {\n\t\t\t\tthis.assetQueue.ready(_event.targetScope);\n\t\t\t}\n\n\t\t\tif (!this.assetQueue.length && this.isReady) this.off('ready');\n\t\t});\n\n\t\treturn this;\n\t};\n\n\tthis.captureReferences = function () {\n\t\tthis.findOwn('[id], [pl-id]').each(this.bind(function (_index, _node) {\n\t\t\tvar $node, id;\n\n\t\t\tif (_node.nodeName === 'AUDIO') return;\n\n\t\t\t$node = $(_node);\n\t\t\tid = $node.attr('id') || $node.attr('pl-id');\n\n\t\t\tif (!this[id]) {\n\t\t\t\tutil.assignRef(this, id, $node.data('pl-scope') || $node);\n\t\t\t}\n\t\t}));\n\t};\n\n\tthis.captureAudioAssets = function () {\n\t\tvar deQ, $audio;\n\n\t\tif (!($audio = this.findOwn('audio')).length) return false;\n\n\t\tdeQ = function (_item) {\n\t\t\t[this, this.screen].forEach(function (_scope) {\n\t\t\t\tif (_scope.requiredQueue && _scope.isMemberSafe('requiredQueue') && _scope.requiredQueue.has(_item)) {\n\t\t\t\t\t_scope.requiredQueue.ready(_item);\n\t\t\t\t}\n\t\t\t});\n\t\t}.bind(this);\n\t\t\n\t\tthis.audio = AudioManager.create(this.id());\n\n\t\t$audio.each(function (_index, _node) {\n\t\t\tthis.assetQueue.add(_node.src);\n\t\t\tthis.audio.watch(_node).then(function (_audio) {\n\t\t\t\tvar loadedEvent = $.Event('loaded', { target: _node, targetScope: this });\n\n\t\t\t\tif ($(_node).is('[pl-required]')) this.screen.require(_audio);\n\n\t\t\t\tif (this.assetQueue.has(_node.src)) this.assetQueue.ready(_node.src);\n\n\t\t\t\tthis.trigger(loadedEvent);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\n\t\t// proxy events\n\t\tthis.audio.on('play pause ended stopped', this.bind(function (_event) {\n\t\t\tvar map = {\n\t\t\t\tbackground: 'BACKGROUND',\n\t\t\t\tvoiceOver: 'VOICE-OVER',\n\t\t\t\tsfx: 'SFX'\n\t\t\t};\n\n\t\t\tswitch (_event.type) {\n\t\t\t\tcase 'play':\n\t\t\t\t\t[this, this.screen].forEach(function (_scope, _index, _set) {\n\t\t\t\t\t\tif (_index === 1 && _scope === _set[0]) return;\n\t\t\t\t\t\tif (_scope.$els) {\n\t\t\t\t\t\t\t_scope.addClass('PLAYING '+map[_event.target.type]);\n\t\t\t\t\t\t\t_scope.currentMedia[map[_event.target.type]] = _event.target;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$(_event.targetNode).addClass('PLAYING');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'pause':\n\t\t\t\tcase 'stopped':\n\t\t\t\tcase 'ended':\n\t\t\t\t\t[this, this.screen].forEach(function (_scope, _index, _set) {\n\t\t\t\t\t\tvar state;\n\n\t\t\t\t\t\tif (_index === 1 && _scope === _set[0]) return;\n\n\t\t\t\t\t\tif (_scope.$els) {\n\t\t\t\t\t\t\t_scope.removeClass(map[_event.target.type]);\n\t\t\t\t\t\t\tstate = _scope.attr('class');\n\t\t\t\t\t\t\tif (!(/BACKGROUND|VOICE-OVER|SFX/).test(state)) _scope.removeClass('PLAYING');\n\t\t\t\t\t\t\tif(_scope.currentMedia[map[_event.target.type]] === _event.target) _scope.currentMedia[map[_event.target.type]] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$(_event.targetNode).removeClass('PLAYING');\n\t\t\t\t\tif (_event.type === 'ended') deQ(_event.target);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar audioEvent = $.Event('audio-'+_event.type, {\n\t\t\t\ttarget: _event.target,\n\t\t\t\ttargetSource: _event.targetSource,\n\t\t\t\ttargetNode: _event.targetNode,\n\t\t\t\ttargetScope: this\n\t\t\t});\n\n\t\t\tthis.trigger(audioEvent);\n\t\t}));\n\n\t\treturn this;\n\t};\n\n\tthis.handleProperty = function (_implementation) {\n\t\tif (this.propertyHandlers) {\n\t\t\tif (this.hasOwnProperty('propertyHandlers')) {\n\t\t\t\tswitch (typeof _implementation) {\n\t\t\t\t\tcase 'function':\n\t\t\t\t\t\t_implementation.call(this.propertyHandlers);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tthis.propertyHandlers.mixin(_implementation);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tthis.propertyHandlers = this.propertyHandlers.extend(_implementation);\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tthis.propertyHandlers = Basic.extend(_implementation);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.entity = function (_selector, _implementation) {\n\t\tvar Entity, prototype, id;\n\n\t\tEntity = game.provideEntityType();\n\n\t\tif (!this.hasOwnProperty('entities')) this.entities = [];\n\n\t\tif (this.hasOwnProperty('$els')) {\n\t\t\tthrow new Error('Wait this hasn\\'t been tested.');\n\t\t\tprototype = (Entity.isPrototypeOf(this)) ? this : Entity;\n\t\t\tinstance = prototype.extend(_implementation).initialize(this.find(_selector));\n\t\t\tid = util.transformId(instance.id());\n\n\t\t\t// this.entities.push(instance);\n\t\t\tif (id) this[id] = instance;\n\t\t}\n\n\t\telse {\n\t\t\tthis.entities.push({\n\t\t\t\tselector: _selector,\n\t\t\t\timplementation: _implementation\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.has = function (_child) {\n\t\tvar child;\n\n\t\tchild = Scope.isPrototypeOf(_child) ? _child.$els : _child;\n\n\t\treturn !!this.$els.has(child).length;\n\t};\n\n\tthis.toString = function () {\n\t\tvar type;\n\n\t\ttype = this.baseType.replace('TYPE_', '');\n\t\ttype = type.slice(0,1)+type.slice(1).toLowerCase();\n\n\t\treturn ['[', this.id() || this.address(), ' ', type, ']'].join('');\n\t};\n\n\tthis.log = function () {\n\t\tvar args;\n\n\t\targs = util.toArray(arguments);\n\n\t\tconsole.log.apply(console, [this.id() || this.address(), '-'].concat(args));\n\t\treturn this;\n\t};\n\n\tthis.handleProperty(function () {\n\t\t\n\t\tthis.component = function (_node, _name, _value, _property) {\n\t\t\tvar $node, record, scope, id;\n\n\t\t\t$node = $(_node);\n\t\t\t\n\t\t\tif (!$node.data('pl-isComponent')) {\n\t\t\t\trecord = game.component.get(_value);\n\n\t\t\t\tif (record) {\n\t\t\t\t\tscope = createEntity.call(this, $node, record.implementation);\n\t\t\t\t\tid = util.transformId(scope.id() || _value, true);\n\t\t\t\t\tutil.assignRef(this, id, scope);\n\n\t\t\t\t\tif (!scope.isReady) this.assetQueue.add(scope);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Ahh!');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.action = function (_node, _name, _value) {\n\t\t\tif (!this.hasOwnProperty('actionables')) {\n\t\t\t\tthis.actionables = Actionables.create();\n\t\t\t\tattachActionHandler.call(this);\t\n\t\t\t}\n\n\t\t\tthis.actionables.add(_node, _value);\n\t\t};\n\n\t\tthis.required = function (_node, _name, _value) {\n\t\t\tif (this.is(_node)) {\n\t\t\t\tthis.screen.require(this);\n\t\t\t}\n\t\t};\n\n\t\tthis.require = function (_node, _name, _value) {\n\t\t\tvar query, $node;\n\n\t\t\t// if the node with the attribute is the node for this scope\n\t\t\tif (this.is(_node)) {\n\t\t\t\tquery = '#_value, [pl-id=_value], [pl-component=_value]'.replace(/_value/g, _value);\n\t\t\t\t$node = this.find(query);\n\n\t\t\t\t$node.on('ready', this.bind(function (_event) {\n\t\t\t\t\tif ($node.is(_event.target)) {\n\t\t\t\t\t\tthis.require(_event.targetScope);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t};\n\n\t});\n\n});\n\nexport default { Scope, createEntity };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Scope.js\n **/","/**\n*  jQProxy\n*  @desc Contains all the jQuery methods targeted towards a property which references a jQuery object.\n*  @proto Basic\n*  \n*  NOTE: Custom events may trigger on scopes\n*  that also targets the same elments. Testing needed.\n*/\n\nimport util from 'util';\nimport Basic from 'types/Basic';\n\nvar jQProxy = Basic.extend(function () {\n\tvar method, exclude;\n\n\t/**\n\t*  @desc Creates a function with a proxy to the jQuery method.\n\t*  @param _name (String) The name of the method being proxied.\n\t*  @return (jQuery|*) Either a jQuery object or whatever the original method returns.\n\t*  @private\n\t*/\n\tfunction createProxyFunction (_name) {\n\t\treturn function () {\n\t\t\tvar response;\n\n\t\t\t// This makes sure your not calling any jQuery methods before initialization.\n\t\t\tif (!this.hasOwnProperty('$els')) {\n\t\t\t\tif (_name === 'on') {\n\t\t\t\t\tregisterHandler.call(this, arguments);\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\tthrow new ReferenceError('Unable to invoke '+_name+' because the scope is not initialized.');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse = $.fn[_name].apply(this.$els, resolveEventHandler(this, _name, arguments));\n\n\t\t\tif (response === this.$els || (response && response.jquery && response.is(this.$els))) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn response;\n\t\t};\n\t}\n\n\tfunction resolveEventHandler (_scope, _method, _args) {\n\t\tvar i, arg, args;\n\n\t\targs = [];\n\n\t\tif (~(['on', 'load']).indexOf(_method)) {\n\t\t\tfor (i=0; arg = _args[i]; i+=1) {\n\t\t\t\tif (typeof arg === 'function') {\n\t\t\t\t\targs.push((function (_handler) {\n\t\t\t\t\t\treturn function () { return _handler.apply(_scope, arguments);};\n\t\t\t\t\t}(arg)));\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\targs.push(arg);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn args;\n\t\t}\n\n\t\treturn _args;\n\t}\n\n\tfunction registerHandler (_definition) {\n\t\tif (!this.hasOwnProperty('eventRegistry')) {\n\t\t\tif (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t\t\t\tthis.eventRegistry = this.eventRegistry.slice(0);\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tthis.eventRegistry = [];\n\t\t\t}\n\t\t}\n\n\t\tthis.eventRegistry.push(_definition);\n\n\t\treturn true;\n\t}\n\n\t// We don't want jQuery methods overridding our base type's methods.\n\texclude = ['constructor'].concat(Object.keys(Basic));\n\n\tthis.baseType = 'TYPE_JQPROXY';\n\tthis.$els = null;\n\tthis.eventRegistry = null;\n\n\tfor (method in $.fn) {\n\t\tif (!$.fn.hasOwnProperty(method) || ~exclude.indexOf(method)) continue;\n\t\tthis[method] = createProxyFunction(method);\n\t}\n\n\tthis.node = function () {\n\t\treturn this.$els[0];\n\t};\n\n\tthis.attachEvents = function () {\n\t\tvar self;\n\n\t\tself = this;\n\n\t\tif (this.eventRegistry && this.isMemberSafe('eventRegistry')) {\n\t\t\tthis.eventRegistry.forEach(function (_definition) {\n\t\t\t\tself.on.apply(self, _definition);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.listen = function (_name, _isCapure_handler, _handler) {\n\t\tvar _isCapture, node, handler;\n\n\t\t_isCapture = false;\n\n\t\t// resolve arguments\n\t\t(typeof _isCapure_handler === 'boolean') ?\n\t\t\t_isCapture = _isCapure_handler:\n\t\t\t_handler = _isCapure_handler;\n\n\t\t_handler.cb = _handler.bind(this);\n\n\t\tif (this.$els) {\n\t\t\tnode = this.$els[0];\n\t\t\tif (node) return node.addEventListener(_name, _handler.cb, _isCapture);\n\t\t}\n\n\t\telse {\n\t\t\treturn registerHandler([_name, _handler.cb, _isCapture]);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tthis.ignore = function (_name, _handler) {\n\t\tvar node = this.$els && this.$els[0];\n\n\t\tif (node) return node.removeEventListener(_name, _handler.cb || _handler);\n\n\t\treturn false;\n\t};\n\n\t// Wraps you function 'this' to the scope.\n\t// \n\tthis.bind = function (_handler) {\n\t\tvar args;\n\n\t\targs = [].map.call(arguments, function (m) { return m }).slice(1);\n\n\t\treturn _handler.bind.apply(_handler, [this].concat(args));\n\t};\n\n\tthis.findOwn = function (_selector) {\n\t\treturn this.find(_selector).filter(this.bind(function (_index, _node) {\n\t\t\tvar $node;\n\n\t\t\t$node = $(_node);\n\n\t\t\tif ($node.hasClass('pl-scope')) {\n\t\t\t\treturn $node.parent().scope() === this;\n\t\t\t}\n\n\t\t\treturn $node.scope() === this;\n\t\t}));\n\t};\n\n\tthis.isMemberSafe = function (_name) {\n\t\tvar owner, elOwner, prototype;\n\n\t\tif (this.hasOwnProperty(_name)) {\n\t\t\treturn true;\n\t\t}\n\n\t\telse {\n\t\t\tprototype = Object.getPrototypeOf(this);\n\t\t\towner = util.getOwner(this, this[_name]);\n\n\t\t\tif (owner.object.hasOwnProperty('$els') || prototype.hasOwnProperty('$els')) return false;\n\n\t\t\tif (prototype.$els) {\n\t\t\t\telOwner = util.getOwner(prototype, prototype.$els);\n\n\t\t\t\tif (owner.object.isPrototypeOf(elOwner.object)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tthis.is = function (_obj) {\n\t\tif (!_obj) return false;\n\t\tif (_obj.$els) return this.$els.is(_obj.$els);\n\n\t\treturn this.$els.is(_obj);\n\t};\n});\n\nexport default jQProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/jQProxy.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/keys.js\n ** module id = 33\n ** module chunks = 0\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/keys.js\n ** module id = 34\n ** module chunks = 0\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.keys.js\n ** module id = 35\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-object.js\n ** module id = 36\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.defined.js\n ** module id = 37\n ** module chunks = 0\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.object-sap.js\n ** module id = 38\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.fails.js\n ** module id = 39\n ** module chunks = 0\n **/","/**\n*  Queue\n*  @desc Contains...\n*  @proto Array, Events, Basic\n*/\n\nimport util from 'util';\nimport Collection from 'types/Collection';\nimport Events from 'types/Events';\n\nvar Queue = Collection.extend(function () {\n\n\tthis.baseType = 'TYPE_QUEUE';\n\n\tthis.ready = function (_record) {\n\t\tif (_record != null) this.remove(_record);\n\n\t\tif (!this.length) {\n\t\t\tthis.trigger('complete');\n\t\t}\n\n\t\treturn this;\n\t};\n\t\n\tutil.mixin(this, Events);\n\n\treturn this;\n\n});\n\nexport default Queue;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Queue.js\n **/","/**\n * @module evalAction\n */\n\n/**\n * Performs `eval()` on the value of an `action` attribute on an HTML element.\n * @arg {string} _source - JavaScript source code.\n * @arg {Scope} _scope - The context in which to run the source.\n * @returns {*} The result of the evaluated source.\n */\nfunction evalAction (_source, _scope) {\n\tvar error;\n\n\tfunction target (_selector) {\n\t\tif (_scope.event) {\n\t\t\treturn _selector ? $(_scope.event.target).closest(_selector) : $(_scope.event.target);\n\t\t}\n\t}\n\t\n\t// expose members of the object as if they were local variables.\n\t// NOTE: methods still retain their \"this\" binding to the object! :D\n\treturn eval(\"with (_scope) { try {\"+_source+\";} catch (error) { console.error('Error:', error.message, 'evaluating action', _source, 'in', _scope.id() || _scope.address()); } }\");\n}\n\nexport default evalAction;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/evalAction.js\n **/","\"use strict\";\n/**\n * Contains classes for managing different media types.\n * Providing an API for referencing and control.\n * @module\n * @author Micah Rolon <micah@ginasink.com>\n */\nimport type from 'types/type';\nimport util from 'util';\nimport Collection from 'types/Collection';\n\n// Object type definitions are using  `$` as the augmentation method for Types.\nvar EventTargetInterface,\n\tInspectorInterface,\n\tPlayableInterface,\n\tLegislatorInterface,\n\tStateInterface,\n\t$$ = window.jQuery;\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaManager.create()`.</span>\n * Manages any playing media (Audio, Video).\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Manages any playing media (Audio, Video).\n * <style>\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n * \n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n */\nfunction MediaManager ($, sup) {\n\t/**\n\t * Duck typed multiple inheritance.\n\t */\n\tutil.mixin(this, EventTargetInterface, InspectorInterface, LegislatorInterface, StateInterface);\n$(\n\t'video',\n\n\tfunction alloc (_id) {\n\t\tsup(this, 'alloc', arguments);\n\t\tthis.video = Collection.create();\n\t\tthis.initialize(_id, 'media manager');\n\t}\n)}\n\n/**\n * The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioManager.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc The Scopes entry for its audio management interface. This gives access to collections of Audio objects grouped into three types.\n * - Background\n * - Voice Over\n * - SFX (Sound Effects)\n * These collections are filled by the HTML Audio elements which have classes corresponding to these types.\n * @class\n * @prop {type} member - Text.\n * @extends EventTargetInterface\n * @extends PlayableInterface\n * @extends InspectorInterface\n */\nfunction AudioManager ($) {\n\tvar AUDIO_TYPES, BUFFER_CACHE;\n\n\t/**\n\t * A record object for passing the MediaElement which got loaded as an `AudioBuffer`.\n\t * @arg {HTMLAudioElement} _node - The loaded audio element.\n\t * @arg {ArrayBuffer} _buffer - The array buffer loaded from XHR2.\n\t */\n\tfunction AudioBufferRecord (_node, _buffer) {\n\t\tthis.node = _node;\n\t\tthis.type = getAudioType(_node);\n\t\tthis.buffer = _buffer;\n\t}\n\t/**\n\t * Provides the classification an audio element falls into.\n\t * - Background (`background`)\n\t * - Voice Over (`voiceOver`)\n\t * - Sound Effects (`sfx`)\n\t * @protected\n\t * @arg {HTMLAudioElement} _audio - The audio element.\n\t * @returns {string} - The type.\n\t */\n\tfunction getAudioType (_audio) {\n\t\treturn util.transformId((_audio.className.match(AUDIO_TYPES) || [])[0], true);\n\t}\n\t/**\n\t * Given an HTMLAudioElement, load its source as an `ArrayBuffer` with XHR2.\n\t * @protected\n\t * @arg {HTMLAudioElement} _audio - The audio element.\n\t * @returns {Promise}\n\t */\n\tfunction loadArrayBuffer (_audio) {\n\t\tvar xhr, manager, fileName;\n\n\t\txhr = new (XMLHttpRequest || util.noop);\n\t\tmanager = this;\n\t\tfileName = util.resolveFileName(_audio.src);\n\n\t\tif (!xhr.open) Promise.reject('This platfom does not support the XMLHttpRequest API.');\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar cache = BUFFER_CACHE[fileName];\n\n\t\t\t// Decodes ArrayBuffer into an AudioBuffer.\n\t\t\tfunction onLoad () {\n\t\t\t\tvar ctx, promise;\n\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\n\t\t\t\t\tif (ctx = pl.game.getAudioContext()) {\n\t\t\t\t\t\tpromise = new Promise(function (resolveDecoding, rejectDecoding) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tctx.decodeAudioData(xhr.response, function (_buffer) {\n\t\t\t\t\t\t\t\t\tvar audio = manager.collect( new AudioBufferRecord(_audio, _buffer));\n\n\t\t\t\t\t\t\t\t\tresolveDecoding(audio);\n\t\t\t\t\t\t\t\t\t// Cache the AudioBuffer to resolve duplicates.\n\t\t\t\t\t\t\t\t\tBUFFER_CACHE[fileName] = _buffer;\n\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\trejectDecoding(\"Failed to decode ArrayBuffer for \"+fileName+\".\");\n\t\t\t\t\t\t\t\t});\t\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\trejectDecoding(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpromise.then(resolve).catch(reject);\n\n\t\t\t\t\t\treturn promise;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\treject(xhr.statusText);\n\t\t\t\t}\n\n\t\t\t\txhr.removeEventListener('load', onLoad);\n\t\t\t\txhr = null;\n\t\t\t}\n\n\t\t\tfunction onError () {\n\t\t\t\treject(xhr.statusText);\n\t\t\t\txhr.removeEventListener('error', onError);\n\t\t\t\txhr = null;\n\t\t\t}\n\n\t\t\tif (cache && cache !== 'loading') return resolve( manager.collect( new AudioBufferRecord(_audio, cache)));\n\n\t\t\tBUFFER_CACHE[fileName] = 'loading';\n\n\t\t\txhr.responseType = 'arraybuffer';\n\n\t\t\txhr.addEventListener('load', onLoad, false);\n\t\t\txhr.addEventListener('error', onError, false);\n\t\t\txhr.open('GET', _audio.src, true);\n\t\t\txhr.send();\n\t\t});\n\t}\n\t/**\n\t * The CSS class names reconized as audio types.\n\t */\n\tAUDIO_TYPES = /background|voice-over|sfx/i;\n\tBUFFER_CACHE = {};\n\t/**\n\t * Duck typed multiple inheritance.\n\t */\n\tutil.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, LegislatorInterface, StateInterface);\n\n// A little ugg but define instance members.\n$(\n\t// Declare properties.\n\t'background, voiceOver, sfx, scope',\n\n\t/**\n\t * Define instance properties.\n\t */\n\tfunction alloc (_id) {\n\t\tthis.initialize(_id, 'audio manager');\n\n\t\t['background','voiceOver','sfx'].forEach(function (_type) {\n\t\t\tvar collection = this[_type] = AudioCollection.create(_type);\n\t\t\tthis.addShadow(collection);\n\t\t}.bind(this));\n\t},\n\n\t/**\n\t * Given an audio element begin loading the asset.\n\t * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t * @returns {Promise}\n\t * @todo Support loading from node source or a string argument. - Micah:2/19/16\n\t */\n\tfunction load (_audio) {\n\t\tvar manager, type;\n\n\t\tmanager = this;\n\t\ttype = getAudioType(_audio);\n\n\t\tif (!type) return Promise.reject(\"Audio is missing a type. Please classify as 'background', 'voiceOver' or 'sfx'.\");\n\t\t// if (~['sfx', 'voiceOver'].indexOf(type)) \n\t\treturn loadArrayBuffer.call(this, _audio);\n\n\t\t// return new Promise(function (resolve, reject) {\n\t\t// \t_audio.onloadeddata = function () { resolve(manager.collect(this)); };\n\t\t// \t_audio.onerror = reject;\n\t\t// \t_audio.load();\n\t\t// });\n\t},\n\n\t/**\n\t * Begins loading an AudioElement waits for it to load.\n\t * @arg {HTMLAudioElement} _audio - The HTML Audio element which to preload and add to the game audio context.\n\t * @returns {Promise}\n\t */\n\tfunction watch (_audio) {\n\t\tvar promise;\n\n\t\tif (_audio.nodeName !== 'AUDIO') return Promise.reject('Invalid type for audio node. '+(typeof _audio)+' ['+_audio.protoype.constructor.name+' '+_audio.nodeName+'].');\n\n\t\tfunction reject (_error) {\n\t\t\tvar scope = $$(_audio).scope();\n\t\t\tconsole.warn(scope.id(), '-', _error);\n\t\t}\n\n\t\t(promise = this.load(_audio)).catch(reject.bind(this));\n\n\t\treturn promise;\n\t},\n\n\t/**\n\t * Adds a audio to the collection. You may also pass an itterable of items to add.\n\t * @arg {Audio|HTMLAudioElement|AudioBufferRecord|Array} _audio - The HTML Audio element or `AudioBufferRecord` for addition to the collection.\n\t * @returns {Promise}\n\t */\n\tfunction collect (_audio) {\n\t\tvar type;\n\n\t\tif (!_audio) return false;\n\n\t\tif (_audio.length) {\n\t\t\treturn _audio.map(collect.bind(this));\n\t\t}\n\n\t\ttype = _audio.type || getAudioType(_audio);\n\n\t\tif (type && this[type]) return this[type].add(_audio);\n\n\t\treturn false;\n\t},\n\t/**\n\t * Provides a collection of `AudioCollection` objects.\n\t * @returns {array}\n\t */\n\tfunction collections () {\n\t\tvar result, types;\n\n\t\tresult = [];\n\t\ttypes = Object.keys(this);\n\n\t\ttypes.forEach(function (_type) {\n\t\t\tif (this[_type] instanceof AudioCollection) result.push(this[_type]);\n\t\t}.bind(this));\n\n\t\treturn result;\n\t},\n\t/**\n\t * Proveds a string representation of the object type.\n\t */\n\tfunction toString () {\n\t\treturn '[object '+(this.constructor.name || 'Object')+']';\n\t}\n)}\n\n/**\n * An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n *\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n * @extends Collection\n */\nfunction AudioCollection ($, sup) {\n\t/**\n\t * Duck typed multiple inheritance.\n\t */\n\tutil.mixin(this, EventTargetInterface, PlayableInterface, InspectorInterface, StateInterface);\n\n$(\n\t'type',\n\n\tfunction alloc (_type) {\n\t\tif (_type) this.type = _type;\n\t\tthis.initialize(_type, 'collection');\n\t},\n\t/**\n\t * Adds an Audio object to the collection.\n\t * @arg {HTMLAudioElement|Audio} _audio - Object to add.\n\t * @override\n\t * @returns {Audio}\n\t */\n\tfunction add (_audio) {\n\t\tvar audio;\n\n\t\tif (!_audio) return false;\n\t\t\n\t\taudio = (_audio instanceof Audio) ? _audio : Audio.create(_audio, this.type);\n\n\t\tsup(this, 'add')(audio);\n\t\tthis.addShadow(audio);\n\t\tif (audio.id()) util.assignRef(this, audio.id(), audio);\n\n\t\treturn audio;\n\t},\n\t/**\n\t * Get the owning manager interface for an Audio object.\n\t * @returns {AudioManager}\n\t */\n\tfunction manager () {\n\t\treturn this.$el.closest('#man').data('context');\n\t},\n\t/**\n\t * Proveds a string representation of the object type.\n\t */\n\tfunction toString () {\n\t\treturn '[object '+(this.constructor.name || 'Object')+']';\n\t}\n)}\n/**\n * Extend AudioCollection with Collection.\n */\nAudioCollection.prototype = Object.create(Collection, {\n\tconstructor: {\n\t\tvalue: AudioCollection,\n\t\tenumerable: false,\n\t\twriteable: false,\n\t\tconfigureable: false\n\t}\n});\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `MediaCollection.create()`.</span>\n * Returned as the result of some collection process.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc Returned as the result of some collection process.\n *\n * @class\n * @extends AudioCollection\n * @extends EventTargetInterface\n * @extends InspectorInterface\n * @extends LegislatorInterface\n * @extends StateInterface\n */\nfunction MediaCollection ($, sup) {$(\n\t/**\n\t * @override\n\t */\n\tfunction add (_media) {\n\t\tthis.addShadow(_media);\n\t\tif (_media.id()) util.assignRef(this, _media.id(), _media);\n\t\treturn Collection.add.call(this, _media);\n\t},\n\t/**\n\t * @override\n\t */\n\tfunction addShadow (_media) {\n\t\tvar $clone;\n\t\t\n\t\t$clone = _media.$el.clone();\n\t\t$clone.data(_media.$el.data());\n\n\t\tthis.$el.append($clone);\n\t\treturn this;\n\t}\n)}\n\n/**\n * <span class=\"note important\">NOTE: This constructor is used to construct its protoype which we instatiate with `AudioCollection.create()`.</span>\n * An interface for controlling a MediaElement or AudioBuffer.\n * @arg {function} $ - Passed by `type()`, gives you a pritier interface for defining the instance members.\n * @classdesc An itterable with a collection of Audio objects. This interface also exposes methods for working with it members.\n */\nfunction Audio ($) {\n\n\tfunction accessConfig (_augment, _val) {\n\t\tif (_val) {\n\t\t\treturn this[_augment] = _val;\n\t\t} else if (typeof _augment === 'string') {\n\t\t\treturn this[_augment];\n\t\t} else {\n\t\t\tutil.mixin(this, _augment);\n\t\t}\n\n\t\treturn _augment;\n\t}\n\n\t/**\n\t * Duck typed multiple inheritance.\n\t */\n\tutil.mixin(this, EventTargetInterface, PlayableInterface, StateInterface);\n\n$(\n\t'type, media, activeSource, buffer, config, fileName, gain, delay, delayID',\n\n\t/**\n\t * Allocates instance props.\n\t * @arg {HTMLAudioElement|AudioBufferRecord} _audio - The object being wrapped.\n\t * @arg {string} _type - The collection type.\n\t */\n\tfunction alloc (_audio, _type) {\n\t\tvar $audio, config, ctx, readyEvent, id;\n\n\t\t$audio = $$(_audio.node || _audio);\n\t\tconfig = $audio.pl();\n\t\tctx = pl.game.getAudioContext();\n\t\treadyEvent = $$.Event('ready', {targetScope: this});\n\n\t\tif (!(id = $audio.id())) $audio.id(id = util.createId());\n\n\t\tthis.type = _type || null;\n\t\tthis.fileName = util.resolveFileName($audio.attr('src'));\n\t\tthis.media = $audio[0];\n\t\tthis.gain = ctx.createGain();\n\n\t\tthis.gain.connect(ctx.destination);\n\n\t\t$audio.data('context', this);\n\n\t\tif (_audio.buffer) this.buffer = _audio.buffer;\n\n\t\tObject.defineProperty(this, 'config', {\n\t\t\tvalue: accessConfig.bind(config),\n\t\t\twriteable: false\n\t\t});\n\n\t\tthis.initialize(id, 'audio '+this.type);\n\n\t\t$$(this.media).trigger(readyEvent);\n\t},\n\t/**\n\t * Provides an `AudioNode` for a particular audio source.\n\t * @returns\n\t *  - `MediaElementSouceNode` for audio elements.\n\t *  - `AudioBufferSourceNode` for an ArrayBuffer.\n\t */\n\tfunction getSource () {\n\t\tvar ctx, src;\n\n\t\tctx = this.audioContext || pl.game.getAudioContext();\n\n\t\tif (ctx) {\n\t\t\tif (this.buffer) {\n\t\t\t\tsrc = ctx.createBufferSource();\n\t\t\t\tsrc.buffer = this.buffer;\n\t\t\t\tsrc.loop = this.media.loop;\n\n\t\t\t\treturn src;\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\treturn this.activeSource || ctx.createMediaElementSource(this.media);\n\t\t\t\t} catch(e) {\n\t\t\t\t\tconsole.warn(e.message, this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\t/**\n\t * Get the owning collection interface for an Audio object.\n\t * @returns {AudioCollection}\n\t */\n\tfunction collection () {\n\t\treturn this.$el.closest('.collection').data('context');\n\t},\n\t/**\n\t * Get the owning manager interface for an Audio object.\n\t * @returns {AudioManager}\n\t */\n\tfunction manager () {\n\t\treturn this.$el.closest('#man').data('context');\n\t},\n\t/**\n\t * Proveds a string representation of the object type.\n\t */\n\tfunction toString () {\n\t\treturn '[audio#'+this.id()+' '+this.fileName+']';\n\t},\n\tfunction setContext (ctx) {\n\t\tthis.gain = ctx.createGain();\n\t\tthis.gain.disconnect();\n\t\tthis.gain.connect(ctx.destination);\n\t\tthis.audioContext = ctx;\n\t}\n)}\n\n/**\n * A virtual DOM to handle navigation and propagation of events through the API interfaces.\n * For example an Audio object that triggers an event it should bubble up to its collection and on through to the manager.\n * That way you can listen for an event at any level of the interface.\n */\nEventTargetInterface = {\n\t/**\n\t * The shadow node.\n\t */\n\t$el: null,\n\t/**\n\t * Define a node for the shadow DOM.\n\t * @arg {string} _id - Idendifier for the node.\n\t * @arg {string} _class - Classification of the node.\n\t */\n\tinitialize: function (_id, _class) {\n\t\tObject.defineProperty(this, '$el', {\n\t\t\tvalue: $$('<div '+(_id ? 'id=\"'+_id+'\"' : '')+' '+(_class ? 'class=\"'+_class+'\"' : '')+'>'),\n\t\t\twriteable: false,\n\t\t\tconfigureable: false,\n\t\t\tenumerable: false\n\t\t});\n\n\t\tthis.$el.data('context', this);\n\t},\n\t/**\n\t * Get/set the id of the interface.\n\t * @arg {string} _id - A valid CSS ID.\n\t */\n\tid: function (_id) {\n\t\treturn this.$el.id(_id);\n\t},\n\t/**\n\t * Add an interface to the shadow DOM.\n\t * @arg {Audio|AudioCollection} _obj - The object to add.\n\t * @returns this\n\t */\n\taddShadow: function (_obj) {\n\t\tthis.$el.append(_obj.$el);\n\t\treturn this;\n\t},\n\t/**\n\t * Provides the parent level interface.\n\t * @returns {AudioManager|AudioCollection}\n\t */\n\tparent: function () {\n\t\treturn this.$el.parent().data('context');\n\t},\n\t/**\n\t * Find an interface in the API tree.\n\t * @arg {string} _selector - A CSS selector to match a node in the shadow DOM API tree.\n\t */\n\tfind: function (_selector) {\n\t\tvar collection = MediaCollection.create();\n\n\t\tthis.$el.find(_selector).each(function () {\n\t\t\tcollection.add($$(this).data('context'));\n\t\t});\n\n\t\treturn collection;\n\t},\n\t/**\n\t * \n\t */\n\tfilter: function (_selector) {\n\t\tvar collection;\n\n\t\tif (!_selector) return this;\n\t\t\n\t\tcollection = MediaCollection.create();\n\n\t\tthis.$el.children().each(function () {\n\t\t\tvar $node = $$(this);\n\t\t\tif ($node.is(_selector)) collection.add($node.data('context'));\n\t\t});\n\n\t\treturn collection;\n\t},\n\t/**\n\t * Attach events to a shadow node.\n\t */\n\ton: function () {\n\t\tthis.$el.on.apply(this.$el, arguments);\n\t\treturn this;\n\t},\n\t/**\n\t * Remove events from a shadow node.\n\t */\n\toff: function () {\n\t\tthis.$el.off.apply(this.$el, arguments);\n\t\treturn this;\n\t},\n\t/**\n\t * Dispatch a event from a shadow node.\n\t */\n\ttrigger: function () {\n\t\tthis.$el.trigger.apply(this.$el, arguments);\n\t\treturn this;\n\t}\n};\n/**\n * Interface for inspecting an API level (i.e. manager or collection).\n */\nInspectorInterface = {\n\tplaying: function (_filterSelector) {\n\t\tvar playing = this.find('.PLAYING').filter(_filterSelector);\n\t\treturn !!playing.length && playing;\n\t},\n\t/**\n\t * Query a collection for ownership of an audio object.\n\t * @arg {string|Audio|HTMLAudioElement} The validating reference.\n\t * @returns {boolean}\n\t */\n\thas: function (_query) {\n\t\tif (this.background) {\n\t\t\treturn ['background', 'voiceOver', 'sfx'].some(function (_name) {\n\t\t\t\treturn this[_name].has(_query);\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tif (this[_query]) return true;\n\n\t\treturn this.some(function (_audio) {\n\t\t\treturn _audio === _query || _audio.media === _query || _audio.fileName === _query || _audio.id() === _query;\n\t\t});\n\t},\n};\n\nLegislatorInterface = {\n\trule: function (_selector, _event, _handler) {\n\t\tvar handler, args;\n\n\t\thandler = [typeof _event, typeof _handler].indexOf('function');\n\t\targs = util.toArray(arguments).slice(1);\n\n\t\tif (typeof _event === 'function') _event = 'play pause stopped ended';\n\n\t\tthis.on(_event, function (_e) {\n\t\t\tif (_e.target.$el.is(_selector)) args[handler].apply(this, arguments);\n\t\t}.bind(this));\n\t}\n};\n\nStateInterface = {\n\tstate: function () {\n\t\treturn this.$el.state.apply(this.$el, arguments);\n\t},\n\n\taddState: function (_state) {\n\t\treturn this.$el.addClass(_state.toUpperCase());\n\t},\n\n\tremoveState: function (_state) {\n\t\treturn this.$el.removeClass(_state.toUpperCase());\n\t}\n};\n\n/**\n * Interface for methods involving audio control for any API level.\n */\nPlayableInterface = {\n\tproxyEvent: function(_event) {\n\t\tvar theEvent = $$.Event(_event.type, { target: this, targetSource: _event.target, targetNode: this.media });\n\t\t\n\t\t// proxy event to shadow DOM only when it has an active source.\n\t\tif (this.activeSource) {\n\t\t\tif (_event.type === 'ended') {\n\t\t\t\tthis.removeState('PLAYING');\n\t\t\t\tthis.activeSource = null;\n\t\t\t}\n\n\t\t\tthis.trigger(theEvent);\n\t\t}\n\n\t\t_event.target.removeEventListener(_event.type, this.handler.bind(this), false);\n\t},\n\thandler: function(_event) {\n\t\tif (_event.type === 'ended' && _event.activeSource) {\n\t\t\t_event.activeSource.disconnect();\n\t\t}\n\t\tthis.proxyEvent.call(this,_event);\n\t},\n\tsimEnd: function() {\n\t\tif (this.activeSource) {\n\t\t\tconsole.warn('Native `ended` failed to fire, simulating...');\n\t\t\tthis.handler({target: this.activeSource, type: 'ended'});\n\t\t}\n\t},\n\tplaySource: function() {\n\t\tvar time;\n\t\tif (this.buffer) {\n\t\t\tthis.activeSource.start(0);\n\t\t\tthis.startTime = new Date();\n\n\t\t\tif (!this.activeSource.loop) {\n\t\t\t\ttime = Math.ceil(this.buffer.duration * 1000) + 250;\n\t\t\t\tthis.timeout = setTimeout(this.simEnd.bind(this), time);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.media.play();\n\t\t}\n\n\t\tthis.delayID = null;\n\t},\n\t/**\n\t * Play an audio object.\n\t */\n\tplay: function (_selector) {\n\t\tvar ctx, src, dest, delay, shouldPlay;\n\n\n\t\tfunction response (_val) {\n\t\t\tshouldPlay = _val;\n\t\t}\n\n\t\tctx = this.audioContext || pl.game.getAudioContext();\n\t\tshouldPlay = true;\n\n\t\t/*\n\t\t * I'm commenting out this line because having it there\n\t\t * prevents new audio from starting while the game is out of focus\n\t\t * which makes certain screens impossible to complete.\n\t\t * Giving the game the ability to pause will remove the need for\n\t\t * this line of code, anyway.\n\t\t */\n\t\t// if (ctx.state === 'suspended') return false;\n\n\t\tif (this.background) return this.background.play();\n\t\tif (this.length != null) {\n\t\t\tif (_selector) {\n\t\t\t\tif (this[_selector]) return this[_selector].play();\n\n\t\t\t\treturn this.find(_selector).play();\n\t\t\t}\n\t\t\treturn this[0] && this[0].play();\n\t\t}\n\n\t\tif (!(src = this.getSource())) return false;\n\n\t\tsrc.connect(this.gain);\n\t\tsrc.addEventListener('ended', this.handler.bind(this), false);\n\n\t\tthis.trigger($$.Event('shouldPlay', { target: this, targetSource: src, targetNode: this.media, response: response }));\n\n\t\tif (shouldPlay) {\n\t\t\tthis.addState('PLAYING');\n\t\t\tthis.activeSource = src;\n\n\t\t\tif (delay = this.config('delay')) {\n\t\t\t\tthis.delayID = setTimeout(this.playSource.bind(this), util.toMillisec(delay));\n\t\t\t} else {\n\t\t\t\tthis.playSource.call(this);\n\t\t\t}\n\n\t\t\tthis.handler({target: src, type: 'play'});\n\t\t}\n\n\t\treturn this;\n\t},\n\t/**\n\t * Pause an audio object.\n\t */\n\tpause: function () {\n\t\tif (this.buffer) {\n\t\t\tthis.pauseTime = new Date();\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\n\t\treturn this;\n\t},\n\t/**\n\t * Resume an audio object.\n\t */\n\tresume: function () {\n\t\tvar time;\n\t\tif (this.buffer) {\n\t\t\tif (!this.activeSource.loop) {\n\t\t\t\ttime = Math.ceil(this.buffer.duration * 1000 - (this.pauseTime - this.startTime)) + 250;\n\t\t\t\tthis.timeout = setTimeout(this.simEnd.bind(this), time);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\t/**\n\t * Stop an audio object.\n\t */\n\tstop: function (_filterSelector) {\n\t\tvar stopEvent = $$.Event('stopped', { target: this, targetSource: this.activeSource, targetNode: this.media });\n\n\t\tif (this.background) return this.background.stop(_filterSelector);\n\t\tif (this.length != null) {\n\t\t\tif (_filterSelector === '@ALL') {\n\t\t\t\tthis.forEach(function (_audio) {\n\t\t\t\t\t_audio.stop();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this[0] && this[0].stop();\n\t\t\t}\n\t\t}\n\n\t\tif (!this.activeSource) return false;\n\n\t\tif (this.buffer) {\n\t\t\tif (!this.delayID) this.activeSource.stop();\n\t\t} else {\n\t\t\tthis.media.pause();\n\t\t\tthis.media.currentTime = 0;\n\t\t}\n\n\t\tif (this.delayID) {\n\t\t\tclearTimeout(this.delayID);\n\t\t\tthis.delayID = null;\n\t\t}\n\t\t\n\t\tthis.activeSource = null;\n\n\t\tthis.removeState('PLAYING');\n\t\tthis.trigger(stopEvent);\n\n\t\treturn this;\n\t},\n\t/**\n\t * @todo MGR, 2/9/2016: Pipe audio sources into gain nodes for each level of the API.\n\t */\n\tvolume: function (_level, _filterSelector) {\n\t\tif (this.background) return this.background.volume(_level);\n\t\tif (this.length != null) {\n\t\t\tif (_filterSelector === '@ALL') {\n\t\t\t\tthis.forEach(function (_audio) {\n\t\t\t\t\t_audio.volume(_level);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this[0] && this[0].volume(_level);\n\t\t\t}\n\t\t}\n\n\t\tthis.gain.gain.value = _level;\n\t},\n\tstartTime: 0,\n\tpauseTime: 0,\n};\n\nexport default type(MediaManager, AudioManager, AudioCollection, Audio);\n\nAudioCollection.extend(MediaCollection);\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/AudioManager.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/promise.js\n ** module id = 43\n ** module chunks = 0\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/promise.js\n ** module id = 44\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.string.iterator.js\n ** module id = 46\n ** module chunks = 0\n **/","var toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.string-at.js\n ** module id = 47\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-integer.js\n ** module id = 48\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-define.js\n ** module id = 49\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.library.js\n ** module id = 50\n ** module chunks = 0\n **/","module.exports = require('./$.hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine.js\n ** module id = 51\n ** module chunks = 0\n **/","var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.hide.js\n ** module id = 52\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.property-desc.js\n ** module id = 53\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.descriptors.js\n ** module id = 54\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.has.js\n ** module id = 55\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iterators.js\n ** module id = 56\n ** module chunks = 0\n **/","'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-create.js\n ** module id = 57\n ** module chunks = 0\n **/","var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-to-string-tag.js\n ** module id = 58\n ** module chunks = 0\n **/","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.wks.js\n ** module id = 59\n ** module chunks = 0\n **/","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.shared.js\n ** module id = 60\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.uid.js\n ** module id = 61\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar Iterators = require('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/web.dom.iterable.js\n ** module id = 62\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.array.iterator.js\n ** module id = 63\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.add-to-unscopables.js\n ** module id = 64\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-step.js\n ** module id = 65\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-iobject.js\n ** module id = 66\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iobject.js\n ** module id = 67\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.cof.js\n ** module id = 68\n ** module chunks = 0\n **/","'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(function(){});\n  if(sub)test.constructor = Object;\n  return P.resolve(test) === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.promise.js\n ** module id = 69\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.classof.js\n ** module id = 70\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-object.js\n ** module id = 71\n ** module chunks = 0\n **/","var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.an-object.js\n ** module id = 72\n ** module chunks = 0\n **/","module.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.strict-new.js\n ** module id = 73\n ** module chunks = 0\n **/","var ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.for-of.js\n ** module id = 74\n ** module chunks = 0\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-call.js\n ** module id = 75\n ** module chunks = 0\n **/","// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-array-iter.js\n ** module id = 76\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-length.js\n ** module id = 77\n ** module chunks = 0\n **/","var classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 78\n ** module chunks = 0\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-proto.js\n ** module id = 79\n ** module chunks = 0\n **/","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.same-value.js\n ** module id = 80\n ** module chunks = 0\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.species-constructor.js\n ** module id = 81\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.microtask.js\n ** module id = 82\n ** module chunks = 0\n **/","var ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.task.js\n ** module id = 83\n ** module chunks = 0\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.invoke.js\n ** module id = 84\n ** module chunks = 0\n **/","module.exports = require('./$.global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.html.js\n ** module id = 85\n ** module chunks = 0\n **/","var isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.dom-create.js\n ** module id = 86\n ** module chunks = 0\n **/","var redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine-all.js\n ** module id = 87\n ** module chunks = 0\n **/","'use strict';\nvar core        = require('./$.core')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-species.js\n ** module id = 88\n ** module chunks = 0\n **/","var ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ safe = true; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-detect.js\n ** module id = 89\n ** module chunks = 0\n **/","\"use strict\";\n/**\n * Defines an Object type using a named constructor function.\n * @module\n */\n\n/**\n * Constructs an object with methods bound to a context.\n * @arg {object} _from - Object with methods to bind.\n * @arg {object} _to - Context which methtods should be bound to.\n */\nfunction Bindings (_from, _to) {\n\tvar method;\n\n\t// pull all methods from the prototype chain.\n\tfor (method in _from) {\n\t\tif (typeof _from[method] !== 'function') continue;\n\t\tthis[method] = _from[method].bind(_to);\n\t}\n}\n\n/**\n * Takes an itterable object and convert it into an Array.\n * @arg {object} _itterable\n * @returns {array}\n */\nfunction toArray (_itterable) {\n\treturn [].map.call(_itterable, function (m) { return m; });\n}\n\n/**\n * Converts a constructor function into an object \"type\". Which addapts the constructor with and interface for creating instsances and extension.\n * @arg {function} _constructor... - any number of constructor functions.\n * @returns The constructor or an object containing all the defined types.\n */\nexport default function type () {\n\tvar defs, module;\n\n\t/**\n\t * Constructs an interface which is accesed through the constructors arguments.\n\t * These arguments are parsed from the function string and collected into an array.\n\t * @arg {function} _constructor\n\t * @returns {array} The collection of API functions requested by the constructor.\n\t */\n\tfunction createApi (_constructor) {\n\t\tvar args, api;\n\n\t\t// Matches the names of the arguments defined in the source of the function.\n\t\t// [^\\(\\)\\.\\s,]+ captures one or more of any character which is NOT a parenthetical, period, white-space character, or comma.\n\t\t// It then takes that rule and looks for multiple intances w/o spaces or commas around it, which would be encased in parenthensies.\n\t\t// NOTE: since this regex is not matching globally, it will not match any argument clusters past the function definition.\n\t\targs = (Function.prototype.toString.call(_constructor).match(/\\(((?:\\s*[^\\(\\)\\.\\s,]+\\s*,?)+)\\)/)||['',''])[1].split(/\\s*,\\s*/);\n\t\tapi = {\n\t\t\t/**\n\t\t\t * Invokes the specified method closest in the prototype chain. Allowing you to still invoke a method which was overridden.\n\t\t\t *\n\t\t\t * @arg {object} _obj - The context which to find the parent function.\n\t\t\t * @arg {string} _name - The method name.\n\t\t\t * @arg {array} _args - A collection of arguments to invoke the method with\n\t\t\t * @returns {*} Whatever the caller returns.\n\t\t\t *\n\t\t\t * @example \n\t\t\t * Car.extend(function Ford (proto) {\n\t\t\t *     this.drive = function () {\n\t\t\t *         proto(this, 'drive', arguments);\n\t\t\t *         // do some opps.\n\t\t\t *     };\n\t\t\t * });\n\t\t\t */\n\t\t\tproto: function (_obj, _name, _args) {\n\t\t\t\tvar proto, method;\n\n\t\t\t\tproto = Object.getPrototypeOf(this || _obj);\n\t\t\t\tmethod = proto[_name];\n\n\t\t\t\tif (typeof _obj[_name] !== 'function') {\n\t\t\t\t\tthrow new TypeError('Member '+_name+' is not a function.');\n\t\t\t\t}\n\n\t\t\t\tif (method) {\n\t\t\t\t\t// Does _obj's prototype have the method and it's not the same reference as _obj.\n\t\t\t\t\tif (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise, walk the prototype chain to find the prototype that has the parent method.\n\t\t\t\t\twhile (proto) {\n\t\t\t\t\t\tif (proto.hasOwnProperty(_name) && _obj[_name] !== proto[_name]) {\n\t\t\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tproto = Object.getPrototypeOf(proto);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn new Bindings(proto, _obj);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Invokes the specified method which lives on the object type's prototype.\n\t\t\t * If your instance overrides the object types method, or your many prototype\n\t\t\t * levels away from the base prototype, this lets you track back to the original.\n\t\t\t *\n\t\t\t * @arg {object} _obj - The context which to find the parent function.\n\t\t\t * @arg {string} _name - The method name.\n\t\t\t * @arg {array} _args - A collection of arguments to invoke the method with\n\t\t\t * @returns {*} Whatever the caller returns.\n\t\t\t */\n\t\t\tbase: function (_obj, _name, _args) {\n\t\t\t\tvar proto, method;\n\n\t\t\t\tproto = _constructor.prototype;\n\t\t\t\tmethod = proto[_name];\n\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Member '+_name+' is not a function.');\n\t\t\t\t}\n\n\t\t\t\tif (method) {\n\t\t\t\t\treturn _args ? method.apply(_obj, _args) : method.bind(_obj);\n\t\t\t\t} else {\n\t\t\t\t\treturn new Bindings(proto, _obj);\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Invokes the specified method on the object type's super type or parent type (i.e. Ford extending Car).\n\t\t\t * @arg {object} _obj - The context which to find the parent function.\n\t\t\t * @arg {string} _name - The method name.\n\t\t\t * @arg {array} _args - A collection of arguments to invoke the method with\n\t\t\t * @returns {*} Whatever the caller returns.\n\t\t\t */\n\t\t\tsup: function (_obj, _name, _args) {\n\t\t\t\treturn api.proto.apply(_constructor.prototype, arguments);\n\t\t\t},\n\t\t\t/**\n\t\t\t * Defines a properpty which is configured `{configureable: false, writeable: false}`.\n\t\t\t * @arg {object} _obj - The context which to define members.\n\t\t\t * @arg {string} _name - The member name.\n\t\t\t * @arg {*} _value - The value.\n\t\t\t * @returns api\n\t\t\t */\n\t\t\tconstant: function (_obj, _name, _value) {\n\t\t\t\tObject.defineProperty(_obj, _name, {\n\t\t\t\t\tvalue: _value,\n\t\t\t\t\tconfigureable: false,\n\t\t\t\t\twriteable: false\n\t\t\t\t});\n\n\t\t\t\treturn api;\n\t\t\t},\n\t\t\t/**\n\t\t\t * Defines members on the constructor.\n\t\t\t * @function static\n\t\t\t * @overload\n\t\t\t * @arg {string} _name - The member name.\n\t\t\t * @arg {*} _value - The value.\n\t\t\t * @returns api\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * Defines members on the constructor.\n\t\t\t * @arg {object} _def - An object with members to mixin.\n\t\t\t * @returns api\n\t\t\t */\n\t\t\tstatic: function (_name_def, _value) {\n\t\t\t\tvar member, _name, _def;\n\n\t\t\t\t_value ? _name = _name_def : _def = _name_def;\n\n\t\t\t\tif (_def) {\n\t\t\t\t\tfor (member in _def) {\n\t\t\t\t\t\tif (!_def.hasOwnProperty(member)) continue;\n\t\t\t\t\t\t_constructor[member] = _def[member];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (_name) {\n\t\t\t\t\t_constructor[_name] = _value;\n\t\t\t\t}\n\n\t\t\t\treturn api;\n\t\t\t},\n\t\t\t/**\n\t\t\t * A pretty way of define the interface of your object type.\n\t\t\t *\n\t\t\t * You may pass any number of arguments as functions or strings.\n\t\t\t * \n\t\t\t * **Example**\n\t\t\t * ```javascript\n\t\t\t * function Car ($) {$(\n\t\t\t *     // Defines a member assigned to `null`.\n\t\t\t *     'name',\n\t\t\t *     // Defines members with values as a string and number. Keep in mind these are put on the prototype.\n\t\t\t *     'engineType = \"standard\", speed = 0',\n\t\t\t *\n\t\t\t *     // Define instance members.\n\t\t\t *     function alloc (_name) {\n\t\t\t *         this.name = _name;\n\t\t\t *     },\n\t\t\t *\n\t\t\t *     function drive () {\n\t\t\t *         this.speed += 1;\n\t\t\t *     }\n\t\t\t * )}\n\t\t\t * ```\n\t\t\t *\n\t\t\t * One benefit to this interface is that all your methods are named so you have easy access for recursive programs.\n\t\t\t * @arg {string|function} _def - A string of property definitions or a named function.\n\t\t\t * @todo Support property assignment in alloc. Micah: 2/24/2016\n\t\t\t */\n\t\t\t$: function () {\n\t\t\t\tvar args = toArray(arguments);\n\n\t\t\t\targs.forEach(function (_member) {\n\t\t\t\t\tvar memberType, props, key;\n\n\t\t\t\t\tmemberType = typeof _member;\n\n\t\t\t\t\tswitch (memberType) {\n\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\tprops = _member.split(/\\s*,\\s*/);\n\n\t\t\t\t\t\t\tif (props) {\n\t\t\t\t\t\t\t\tprops.forEach(function (_def) {\n\t\t\t\t\t\t\t\t\tvar prop, val;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tprop = _def.split(/\\s*[:=]\\s*/);\n\t\t\t\t\t\t\t\t\ttry { val = JSON.parse(prop[1]) } catch (e) {}\n\t\t\t\t\t\t\t\t\t_constructor.prototype[prop[0]] = (typeof prop[1] !== 'undefined') ? val || prop[1] : null;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'object':\n\t\t\t\t\t\t\tfor (key in _member) {\n\t\t\t\t\t\t\t\tif (!_member.hasOwnProperty(key)) continue;\n\t\t\t\t\t\t\t\t_constructor.prototype[key] = _member[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'function':\n\t\t\t\t\t\t\tif (!_member.name) throw TypeError('Member must be a named function.');\n\t\t\t\t\t\t\t_constructor.prototype[_member.name] = _member;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn api;\n\t\t\t}\n\t\t}\n\n\t\treturn args.map(function (_call) {\n\t\t\treturn api[_call] || module[_call];\n\t\t});\n\t}\n\n\tdefs = toArray(arguments);\n\tmodule = (!this) ? {} : this;\n\n\tdefs.forEach(function (_constructor) {\n\t\tvar api;\n\n\t\tif (typeof _constructor === 'object') {\n\t\t\tvar Super, keys = Object.keys(_constructor);\n\n\t\t\tif (keys.length === 1 && module[keys[0]]) {\n\t\t\t\tSuper = module[keys[0]];\n\t\t\t\treturn Super.extend.call(module, _constructor[keys[0]]);\n\t\t\t}\n\t\t}\n\n\t\tapi = createApi(_constructor);\n\n\t\t/**\n\t\t * Creates a new instance of the constructor prototype.\n\t\t * This also invokes the `alloc()` on the instance so you can define instance props.\n\t\t * @arg {*} ... - Any number of arguments for `alloc()`.\n\t\t * @returns instance\n\t\t */\n\t\t_constructor.create = function () {\n\t\t\tvar instance = Object.create(_constructor.prototype);\n\t\t\tif (typeof instance.alloc === 'function') instance.alloc.apply(instance, arguments);\n\t\t\treturn instance;\n\t\t};\n\n\t\t/**\n\t\t * Extends the provided constructor prototype.\n\t\t * @arg {function} _definition - Constructor for the object type.\n\t\t * @returns _constructor\n\t\t */\n\t\t_constructor.extend = function (_definition) {\n\t\t\t_definition.prototype = Object.create(_constructor.prototype, {\n\t\t\t\tconstructor: {\n\t\t\t\t\tvalue: _definition,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twriteable: false,\n\t\t\t\t\tconfigureable: false\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn type.call(this === _constructor ? null : this, _definition);\n\t\t}\n\n\t\t_constructor.apply(_constructor.prototype, api);\n\n\t\tmodule[_constructor.name] = _constructor;\n\t});\n\n\treturn defs.length > 1 ? module : defs[0];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/type.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 91\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-property.js\n ** module id = 92\n ** module chunks = 0\n **/","/**\n * Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors.\n *\n * @module\n */\nimport util from 'util';\nimport GlobalScope from 'types/GlobalScope';\nimport Collection from 'types/Collection';\nimport { Point, Size } from 'types/Dimensions';\nimport Queue from 'types/Queue';\n\t\nfunction invokeResponsibilities (_scope, _event) {\n\tif (_scope && _scope.responsibilities && _scope.isMemberSafe('responsibilities')) {\n\t\t_scope.responsibilities.forEach(function (_record) {\n\t\t\tif (_record.name === _event.name) {\n\n\t\t\t\t// console.log(_scope.id(), 'respond', _record.name, 'from', _event.targetScope.id());\n\t\t\t\t_record.ability.call(_scope, _event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * <span class=\"note important\">NOTE: This is NOT a constructor. Use `Entity.create()` to get a new instance.</span>\n * @classdesc Base class for a scope acting as an \"entity\" with \"states\", \"behaviors\" and the ability to respond (responsibilities) to behaviors. For more information on these terms read [this]{@link module:types/Entity}.\n * <style>\n * .tag {\n *   padding: 1px 4px;\n *   border-radius: 4px;\n *\n *   color: #fff;\n *   background-color: #aaa;\n * }\n *\n * .tag.behavior {\n *\t background-color: #0ba;\n * }\n *\n * .tag.state {\n *\t background-color: #ba0;\n * }\n *\n * .note {\n *   border: solid 1px;\n *   border-radius: 4px;\n *   padding: 1px 4px;\n *   color: #aaa;\n *   background-color: #eee;\n * }\n * \n * .note.important {\n *   color: #b55;\n *   background-color: #fee;\n * }\n * </style>\n *\n * @class\n * @prop {module:types/Collection~Collection} responsibilities - A collection of ResponsibilityRecords for the scope.\n * @prop {boolean} isComplete - Marks a scope as \"complete\" via the [`complete()`]{@link module:types/Entity~Entity#complete} behavior.\n * @extends GlobalScope\n */\nvar Entity = GlobalScope.extend(function () {\n\n\tfunction resolveTarget (_target) {\n\t\t\n\t\tswitch (typeof _target) {\n\t\t\tcase 'string': return this.findOwn(_target);\n\t\t\tcase 'object':\n\t\t\t\tif (_target.jquery) return _target;\n\t\t\t\tif (Entity.isPrototypeOf(_target)) return _target;\n\t\t\t\tif (_target.nodeType === document.ELEMENT_NODE) return $(_target);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfunction ResponsibilityRecord (_name, _ability) {\n\t\tthis.name = _name;\n\t\tthis.ability = _ability;\n\t}\n\n\tfunction dragGreeter (_event) {\n\t\tswitch (_event.type) {\n\t\t\tcase 'drag-start':\n\t\t\t\tthis.grab(_event.state);\n\t\t\t\tbreak;\n\n\t\t\tcase 'drag-move':\n\t\t\t\tthis.dragging(_event.state);\n\t\t\t\tbreak;\n\n\t\t\tcase 'drag-end':\n\t\t\t\tthis.release(_event.state);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction attachDragEvents () {\n\t\tif (this.draggables && this.isMemberSafe('draggables') && this.draggables.length) {\n\t\t\tthis.on('drag-start drag-move drag-end', dragGreeter);\n\t\t}\n\t}\n\n\tthis.baseType = 'TYPE_ENTITY';\n\tthis.STATE = {\n\t\tPLAYING: 'PLAYING',\n\t\tBACKGROUND: 'BACKGROUND',\n\t\tVOICE_OVER: 'VOICE-OVER',\n\t\tSFX: 'SFX'\n\t};\n\n\tthis.timeoutID = null;\n\tthis.intervalID = null;\n\tthis.responsibilities = null;\n\tthis.isComplete = false;\n\tthis.shouldInheritAbilities = true;\n\tthis.frameHandlers = null;\n\tthis.frameRate = 60; // 60fps\n\tthis.draggables = null;\n\tthis.requiredQueue = null;\n\tthis.bgImageCollection = null;\n\n\tthis.handleProperty({\n\t\tsize: function (_node, _name, _value) {\n\t\t\tvar size;\n\n\t\t\tif (this.is(_node)) {\n\t\t\t\tsize = _value.split(/\\s*[x,]\\s*/);\n\t\t\t\tthis.css({\n\t\t\t\t\twidth: size[0],\n\t\t\t\t\theight: size[1] || size[0]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tposition: function (_node, _name, _value) {\n\t\t\tvar size;\n\n\t\t\tif (this.is(_node)) {\n\t\t\t\tsize = _value.split(/\\s*[x,]\\s*/);\n\t\t\t\tthis.css({\n\t\t\t\t\ttop: size[1] || size[0],\n\t\t\t\t\tleft: size[0]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tdraggable: function (_node, _name, _value) {\n\t\t\tif (!this.hasOwnProperty('draggables')) {\n\t\t\t\tthis.draggables = $();\n\t\t\t}\n\n\t\t\tthis.draggables.push(_node);\n\t\t},\n\n\t\tbg: function (_node, _name, _value) {\n\t\t\tvar img = new Image();\n\t\t\t\n\t\t\tif (!this.hasOwnProperty('bgImageCollection')) this.bgImageCollection = [];\n\n\t\t\tif (this.isMemberSafe('bgImageCollection')) {\n\t\t\t\timg.src = _value;\n\t\t\t\tthis.bgImageCollection.push(img);\n\t\t\t\t$(_node).css('background-image', 'url('+_value+')');\n\t\t\t}\n\t\t}\n\t});\n\n\tthis.__init = function (_event) {\n\t\tif (this.bgImageCollection && this.isMemberSafe('bgImageCollection')) {\n\t\t\tthis.watchAssets(this.bgImageCollection);\n\t\t}\n\t\tattachDragEvents.call(this);\n\n\t\treturn this.proto();\n\t};\n\n\tthis.size = function () {\n\t\tvar size;\n\n\t\tif (arguments.length) {\n\t\t\tsize = Size.create(arguments);\n\t\t\tthis.css(size);\n\t\t\treturn size;\n\t\t}\n\n\t\treturn Size.create().set(this.width(), this.height());\n\t};\n\n\tthis.propagateBehavior = function (_event) {\n\t\tvar ids;\n\n\t\tids = [];\n\n\t\tthis.findOwn('.pl-scope').each(function (_index, _node) {\n\t\t\tvar $node = $(_node); \n\t\t\tids.push($node.id() || $node.address());\n\t\t});\n\n\t\tif (this.hasOwnProperty('entities') && this.entities.length) {\n\t\t\t// console.log(this.id(), 'propagate', _event.name, 'to', this.entities.length, 'nodes', ids);\n\n\t\t\tthis.entities.forEach(function (_scope) {\n\t\t\t\tinvokeResponsibilities(_scope, _event);\n\t\t\t\t_scope.propagateBehavior(_event);\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.require = function (_entity) {\n\t\tif (!this.hasOwnProperty('requiredQueue')) {\n\t\t\tthis.requiredQueue = Queue.create();\n\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\tthis.log('entity complete');\n\t\t\t\tthis.complete();\n\t\t\t}));\n\n\t\t\tthis.respond('complete', function (_event) {\n\t\t\t\tif (!this.has(_event.target)) return;\n\t\t\t\tif (_event.targetScope === this) return;\n\n\t\t\t\tthis.requiredQueue.ready(_event.behaviorTarget);\n\t\t\t});\n\t\t}\n\n\t\tthis.requiredQueue.add(_entity);\n\t\tthis.gate();\n\n\t\treturn this;\n\t};\n\n\tthis.behavior = function (_name, _behavior) {\n\t\t_behavior.method = this[_name] = function () {\n\t\t\tvar behaviorEvent, result;\n\n\t\t\tbehaviorEvent = {\n\t\t\t\tname: _name,\n\t\t\t\tmessage: '',\n\t\t\t\ttargetScope: this,\n\t\t\t\tbehaviorTarget: this\n\t\t\t};\n\n\t\t\tresult = _behavior.apply(this, arguments);\n\n\t\t\tif (typeof result === 'object') {\n\t\t\t\tbehaviorEvent = util.mixin(behaviorEvent, result);\n\t\t\t}\n\n\t\t\tif (result !== false) {\n\t\t\t\tthis.trigger($.Event('behavior', behaviorEvent));\t\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\treturn this;\n\t};\n\n\tthis.respond = function () {\n\t\tvar name, ability, parentScope, abilities, protoAbilities;\n\n\t\tif (!this.hasOwnProperty('responsibilities')) {\n\t\t\tabilities = Collection.create();\n\t\t\tprotoAbilities = this.provideAblilityPototype();\n\n\t\t\tif (this.shouldInheritAbilities && (protoAbilities && protoAbilities.responsibilities)) {\n\t\t\t\tabilities.push.apply(abilities, protoAbilities.responsibilities);\n\t\t\t}\n\n\t\t\tthis.responsibilities = abilities;\n\t\t}\n\n\t\tif (arguments.length === 1) {\n\t\t\tswitch (typeof arguments[0]) {\n\t\t\t\tcase 'string': name = arguments[0]; break;\n\n\t\t\t\tcase 'function':\n\t\t\t\tcase 'object': ability = arguments[0]; break;\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tname = arguments[0];\n\t\t\tability = arguments[1];\n\t\t}\n\n\t\tswitch (typeof ability) {\n\t\t\tcase 'object':\n\t\t\t\tfor (name in ability) {\n\t\t\t\t\tif (!ability.hasOwnProperty(name)) continue;\n\n\t\t\t\t\tthis.respond(name, ability[name]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'function':\n\t\t\t\tthis.responsibilities.add(new ResponsibilityRecord(name, ability));\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.delay = function (_time, _cb) {\n\t\tvar time = util.toMillisec(_time);\n\n\t\tutil.assignRef(this, 'timeoutID', setTimeout(_cb.bind(this), time));\n\n\t\treturn this;\n\t};\n\n\tthis.repeat = function (_time, _cb) {\n\t\tvar time = util.toMillisec(_time);\n\n\t\tutil.assignRef(this, 'intervalID', setInterval(_cb.bind(this), time));\n\n\t\treturn this;\n\t};\n\n\tthis.kill = function (_timer) {\n\t\tvar id = _timer === 'repeat' ? this.intervalID : this.timeoutID;\n\n\t\tif (typeof id === 'number') {\n\t\t\t(_timer === 'repeat' ? clearInterval : clearTimeout)(id);\n\t\t\tthis[_timer === 'repeat' ? 'intervalID' : 'timeoutID'] = null;\n\t\t}\n\n\t\telse if (id) {\n\t\t\tid.forEach(function (_id) {\n\t\t\t\t(_timer === 'repeat' ? clearInterval : clearTimeout)(_id);\n\t\t\t});\n\n\t\t\t_timer === 'repeat' ? this.intervalID = null : this.timeoutID = null;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.eachFrame = function (_handler, _on) {\n\t\tvar binder, frame, lastTime, rate, frames;\n\n\t\trate = this.frameRate || 1000;\n\t\tframes = 0;\n\t\tlastTime = 0;\n\n\t\tif (!this.hasOwnProperty('frameHandlers') || this.frameHandlers.length === 0) {\n\t\t\tframe = function (_time) {\n\t\t\t\tvar i, handler;\n\n\t\t\t\tif (rate) {\n\t\t\t\t\tif (_time - lastTime >= (1000/rate)) {\n\t\t\t\t\t\tfor (i=0; handler = this.frameHandlers[i]; i+=1) {\n\t\t\t\t\t\t\thandler.call(this, _time, Math.round(1000/(_time - lastTime)), rate);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (frames === rate) frames = 0;\n\n\t\t\t\t\t\tframes+=1;\n\t\t\t\t\t\tlastTime = _time;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.frameHandlers.length) {\n\t\t\t\t\twindow.requestAnimationFrame(binder);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tbinder = this.bind(frame);\n\n\t\t\t// allows methods passed as _handler's to\n\t\t\t// be able to trace back for proto() callbacks.\n\t\t\tframe.method = this.eachFrame;\n\n\t\t\tthis.frameHandlers = Collection.create();\n\t\t\twindow.requestAnimationFrame(binder);\n\t\t}\n\n\t\tif (_on !== false) {\n\t\t\tthis.frameHandlers.add(_handler);\n\t\t}\n\n\t\telse {\n\t\t\tthis.frameHandlers.remove(_handler);\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.state = function (_flag, _definition, _imp) {\n\t\tvar flag, tester, setter, getter, STATE, def, opperations, names;\n\n\t\tif (!_definition) {\n\t\t\treturn this.proto(_flag);\n\t\t}\n\n\t\tdef = _definition.split(/\\s+/);\n\t\tnames = _flag.split(/\\s+/);\n\t\topperations = [];\n\n\t\tdef.forEach(this.bind(function (_opp) {\n\t\t\tvar method, flag;\n\n\t\t\tmethod = (_opp.slice(0, 1) === '+') ? 'addClass' : 'removeClass';\n\n\t\t\topperations.push({\n\t\t\t\tmethod: method,\n\t\t\t\tflag: _opp.slice(1)\n\t\t\t});\n\n\t\t\tif (method === 'addClass') {\n\t\t\t\tflag = _opp.slice(1);\n\t\t\t\tSTATE = util.transformId(flag);\n\t\t\t\tthis.STATE[STATE] = flag;\n\t\t\t}\n\t\t}));\n\n\t\tsetter = names[0];\n\t\ttester = names[1];\n\n\t\tthis[setter] = function (_target) {\n\t\t\tvar target, uiStateEvent, oppsPerformed;\n\n\t\t\ttarget = resolveTarget.call(this, _target);\n\t\t\tuiStateEvent = $.Event('ui-'+setter, {\n\t\t\t\ttarget: target.jquery ? target[0] : target,\n\t\t\t\ttargetScope: this\n\t\t\t});\n\t\t\toppsPerformed = 0;\n\n\t\t\tif (_imp && _imp.shouldSet && _imp.shouldSet.apply(this, arguments) === false) {\n\t\t\t\treturn !!(_imp && _imp.notSet) && _imp.notSet.apply(this, arguments);\n\t\t\t}\n\n\t\t\tif (_imp && _imp.willSet) _imp.willSet.apply(this, arguments);\n\n\t\t\topperations.forEach(function (_record) {\n\t\t\t\t// If we are adding or removing a class, test if the target already has/removed it.\n\t\t\t\t// If so, then bump \"oppsPerformed\".\n\t\t\t\toppsPerformed += Number(target.hasClass(_record.flag) === !~_record.method.indexOf('add'));\n\t\t\t\ttarget[_record.method](_record.flag);\n\t\t\t});\n\n\t\t\tif (_imp && _imp.didSet) _imp.didSet.apply(this, arguments);\n\n\n\t\t\tif (oppsPerformed) {\n\t\t\t\tthis.trigger(uiStateEvent);\n\t\t\t\treturn target;\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t};\n\n\t\tif (tester) {\n\t\t\tgetter = 'get' + tester.slice(0, 1).toUpperCase() + tester.slice(1);\n\n\t\t\tthis[tester] = function (_target) {\n\t\t\t\tvar target;\n\n\t\t\t\ttarget = resolveTarget.call(this, _target);\n\n\t\t\t\treturn target.hasClass(this.STATE[STATE]);\n\t\t\t};\n\n\t\t\tthis[getter] = function () {\n\t\t\t\treturn this.findOwn('.'+this.STATE[STATE]);\n\t\t\t};\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.provideBehaviorEventScope = function () {\n\t\treturn this;\n\t};\n\n\tthis.provideAblilityPototype = function () {\n\t\tvar owner;\n\n\t\towner = util.getOwner(this, this.baseType);\n\n\t\treturn !!owner && owner.object;\n\t};\n\n\tthis.completed = function () {\n\t\treturn this.game.demoMode || (this.hasOwnProperty('isComplete') && this.isComplete) || !this.requiredQueue || (this.hasOwnProperty('requiredQueue') && this.requiredQueue.length === 0);\n\t};\n\n\t/**\n\t * <span class=\"tag behavior\">Behavior</span>\n\t * Marks a scope \"complete\" by seting `isComplete` to `true` and add the `COMPLETE` state flag.\n\t * @function module:types/Entity~Entity#complete\n\t * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t */\n\tthis.behavior('complete', function () {\n\t\tif (this.hasOwnProperty('isComplete') && this.isComplete) return false;\n\n\t\tthis.isComplete = true;\n\t\tthis.addClass('COMPLETE');\n\n\t\treturn {\n\t\t\tbehaviorTarget: this\n\t\t};\n\t});\n\n\t/**\n\t * <span class=\"tag behavior\">Behavior</span>\n\t * Reports a drggable has been grabbed for dragging.\n\t * @function module:types/Entity~Entity#grab\n\t * @arg {object} _state - An object containing the state of a draggable.\n\t * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t *\n\t * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t */\n\tthis.behavior('grab', function (_state) {\n\t\treturn {\n\t\t\tstate: _state,\n\t\t\tbehaviorTarget: _state.$draggable\n\t\t};\n\t});\n\n\t/**\n\t * <span class=\"tag behavior\">Behavior</span>\n\t * Reports a draggable as being dragged.\n\t * @function module:types/Entity~Entity#dragging\n\t * @arg {object} _state - An object containing the state of a draggable.\n\t * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t *\n\t * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t */\n\tthis.behavior('dragging', function (_state) {\n\t\treturn {\n\t\t\tstate: _state,\n\t\t\tbehaviorTarget: _state.$draggable\n\t\t};\n\t});\n\n\t/**\n\t * <span class=\"tag behavior\">Behavior</span>\n\t * Reports a drggable as released or droped.\n\t * @function module:types/Entity~Entity#release\n\t * @arg {object} _state - An object containing the state of a draggable.\n\t * @returns {object} A messages object with `behaviorTarget` set to the scope performing the behavior.\n\t *\n\t * @see module:play~pl.game.manager.draggable for more info on draggable state.\n\t */\n\tthis.behavior('release', function (_state) {\n\t\treturn {\n\t\t\tstate: _state,\n\t\t\tbehaviorTarget: _state.$draggable\n\t\t};\n\t});\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds `OPEN` and removes the `LEAVE` CSS class names from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#open\n\t * @fires Entity#ui-open\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `OPEN` class name.\n\t * @function module:types/Entity~Entity#opened\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Open'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `OPEN` class name.\n\t * @function module:types/Entity~Entity#getOpened\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('open opened', '+OPEN -LEAVE');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Removes the `OPEN` CSS class name from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#close\n\t * @fires Entity#ui-close\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\tthis.state('close', '-OPEN');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `LEAVE` CSS class name to the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#leave\n\t * @fires Entity#ui-leave\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `LEAVE` class name.\n\t * @function module:types/Entity~Entity#left\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Leave'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `LEAVE` class name.\n\t * @function module:types/Entity~Entity#getLeft\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('leave left', '+LEAVE', {\n\t\twillSet: function (_target) {\n\t\t\tthis.close(_target);\n\t\t}\n\t});\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds `ENABLED` and removes the `DISABLED` CSS class names from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#enable\n\t * @fires Entity#ui-enable\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `ENABLED` class name.\n\t * @function module:types/Entity~Entity#enabled\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Enabled'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `ENABLED` class name.\n\t * @function module:types/Entity~Entity#getEnabled\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('enable enabled', '+ENABLED -DISABLED');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds `DISABLED` and removes the `ENABLED` CSS class names from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#disable\n\t * @fires Entity#ui-disable\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `DISABLED` class name.\n\t * @function module:types/Entity~Entity#disabled\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Disabled'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `DISABLED` class name.\n\t * @function module:types/Entity~Entity#getDisabled\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('disable disabled', '+DISABLED -ENABLED');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `SELECTED` CSS class name to the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#select\n\t * @fires Entity#ui-select\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `SELECTED` class name.\n\t * @function module:types/Entity~Entity#selected\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Selected'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `SELECTED` class name.\n\t * @function module:types/Entity~Entity#getDisabled\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('select selected', '+SELECTED', {\n\t\twillSet: function (_target) {\n\t\t\tvar target, $parent;\n\t\t\t\n\t\t\ttarget = resolveTarget.call(this, _target);\n\t\t\t$parent = target.parent();\n\n\t\t\t$parent.find('> .SELECTED').each(this.bind(function (_index, _node) {\n\t\t\t\tthis.deselect(_node);\n\t\t\t}));\n\t\t\t$parent.find('> .HIGHLIGHTED').each(this.bind(function (_index, _node) {\n\t\t\t\tthis.unhighlight(_node);\n\t\t\t}));\n\t\t}\n\t});\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Removes the `SELECTED` CSS class name from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#deselect\n\t * @fires Entity#ui-deselect\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\tthis.state('deselect', '-SELECTED');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `HIGHLIGHTED` CSS class name to the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#highlight\n\t * @fires Entity#ui-highlight\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `HIGHLIGHTED` class name.\n\t * @function module:types/Entity~Entity#highlighted\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Highlighted'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `HIGHLIGHTED` class name.\n\t * @function module:types/Entity~Entity#getHighlighted\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('highlight highlighted', '+HIGHLIGHTED');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Removes the `HIGHLIGHTED` CSS class name from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#unhighlight\n\t * @fires Entity#ui-unhighlight\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\tthis.state('unhighlight', '-HIGHLIGHTED');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `DRAGGABLE` CSS class name to the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#draggable\n\t * @fires Entity#ui-draggable\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `DRAGGABLE` class name.\n\t * @function module:types/Entity~Entity#dragEnabled\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Draggable'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `DRAGGABLE` class name.\n\t * @function module:types/Entity~Entity#getDragEnabled\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('draggable dragEnabled', '+DRAGGABLE', {\n\t\tdidSet: function (_target) {\n\t\t\tthis.translate( resolveTarget.call(this, _target) );\n\t\t}\n\t});\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Removes the `DRAGGABLE` CSS class name from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#undraggable\n\t * @fires Entity#ui-undraggable\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\tthis.state('undraggable', '-DRAGGABLE');\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `TRANSLATED` CSS class name to the scope or the given `_target`. The target also gets a 2d transform at the given `_point`.\n\t * @function module:types/Entity~Entity#translate\n\t * @fires Entity#ui-translate\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Adds the `TRANSLATED` CSS class name to the scope. The scope also gets a 2d transform at the given `_point`.\n\t * @function module:types/Entity~Entity#translate\n\t * @fires Entity#ui-translate\n\t * @arg {module:types/Dimensions~Point} _point - Point object with coordinates {x,y}.\n\t * @returns `this`\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Tests if the scope or given `_target` has the `TRANSLATED` class name.\n\t * @function module:types/Entity~Entity#translated\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns {Boolean} Translate'ness.\n\t */\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Provides the elements with the `TRANSLATED` class name.\n\t * @function module:types/Entity~Entity#getTranslated\n\t * @returns {jQuery} jQuery collection of matched nodes.\n\t * @todo Return scope if available.\n\t */\n\tthis.state('translate translated', '+TRANSLATED', {\n\t\twillSet: function (_target_point, _point) {\n\t\t\tvar point, target;\n\t\t\t\n\t\t\ttarget = resolveTarget.call(this, _target_point);\n\t\t\tpoint = (!~[_target_point.x, _target_point.y].indexOf(undefined)) ? _target_point : _point;\n\n\t\t\tif (point) {\n\t\t\t\ttarget.css('transform', 'translateX('+point.x+'px) translateY('+point.y+'px)');\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * <span class=\"tag state\">State</span>\n\t * Removes the `TRANSLATED` CSS class name and CSS transform from the scope or the given `_target`.\n\t * @function module:types/Entity~Entity#untranslate\n\t * @fires Entity#ui-untranslate\n\t * @arg {string|Scope|jQuery|HTMLElement} _target - A CSS selector, DOM node reference or context object (i.e. Scope/jQuery).\n\t * @returns `this`\n\t */\n\tthis.state('untranslate', '-TRANSLATED', {\n\t\twillSet: function () {\n\t\t\tthis.css('transform', 'none');\n\t\t}\n\t});\n\n\tthis.state('gate gated', '+GATED');\n\n});\n\nexport default { Entity, invokeResponsibilities };\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Entity.js\n **/","/**\n*  Screen\n*  @desc Contains...\n*  @proto Entity\n*/\n\nimport { Entity, invokeResponsibilities } from 'types/Entity';\n\nvar Screen = Entity.extend(function () {\n\n\tfunction attachBehaviorEvent () {\n\t\tthis.on('behavior', function (_event) {\n\t\t\t// console.log('SCREEN GOT', _event.targetScope.id(), _event.name);\n\n\t\t\tif (this !== _event.targetScope) {\n\t\t\t\tinvokeResponsibilities(this,  _event);\n\t\t\t}\n\t\t\t\n\t\t\tthis.propagateBehavior(_event);\n\t\t});\n\t}\n\t\n\tthis.baseType = 'TYPE_SCREEN';\n\tthis.game = null;\n\tthis.screen = null;\n\n\tthis.__init = function () {\n\t\tthis.proto();\n\n\t\tif (this.is(pl.game.config('screenSelector'))) {\n\t\t\tattachBehaviorEvent.call(this);\n\t\t}\n\t};\n\n\tthis.start = function () {\n\t\tthis.startAudio();\n\t\treturn this;\n\t};\n\n\tthis.stop = function () {\n\t\tthis.stopAudio();\n\t\treturn this;\n\t};\n\n\tthis.pause = function() {\n\t\tthis.pauseMedia();\n\t\tif(this.hasOwnProperty('entities') && this.entities) {\n\t\t\tthis.entities.forEach(function(entity) {\n\t\t\t\tif(typeof entity.pause === 'function') entity.pause();\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t};\n\n\tthis.resume = function() {\n\t\tthis.resumeMedia();\n\t\tif(this.hasOwnProperty('entities') && this.entities) {\n\t\t\tthis.entities.forEach(function(entity) {\n\t\t\t\tif(typeof entity.resume === 'function') entity.resume();\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t};\n\n\tthis.startAudio = function () {\n\t\tif (!this.audio) return;\n\t\tthis.audio.background.play();\n\t\tthis.audio.voiceOver.play();\n\t};\n\n\tthis.stopAudio = function () {\n\t\tif (!this.audio) return;\n\t\tthis.audio.voiceOver.stop('@ALL');\n\t};\n\n\tthis.pauseMedia = function() {\n\t\tif(!this.currentMedia) return;\n\t\tfor(var media in this.currentMedia) { \n\t\t\tif(this.currentMedia.hasOwnProperty(media)) {\n\t\t\t\tif(this.currentMedia[media]) this.currentMedia[media].pause();\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.resumeMedia = function() {\n\t\tif(!this.currentMedia) return;\n\t\tfor(var media in this.currentMedia) { \n\t\t\tif(this.currentMedia.hasOwnProperty(media)) {\n\t\t\t\tif(this.currentMedia[media]) this.currentMedia[media].resume();\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.index = function () {\n\t\tif (this === this.screen) return this.game.screens.indexOf(this);\n\t\treturn this.$els.index();\n\t};\n\n\tthis.next = function () {\n\t\tif (!this.completed()) return false;\n\t\treturn this.game.screens[this.screen.index()+1];\n\t};\n\n\tthis.prev = function () {\n\t\treturn this.game.screens[this.screen.index()-1];\n\t};\n\n\tthis.quit = function () {\n\t\tthis.game.quit.open();\n\t};\n\n\tthis.nextSib = function () {\n\t\treturn $.fn.next.apply(this.$els, arguments);\n\t};\n\n\tthis.prevSib = function () {\n\t\treturn $.fn.prev.apply(this.$els, arguments);\n\t};\n\n\tthis.isLast = function () {\n\t\treturn this.game.screens.indexOf(this.screen) === this.game.screens.length-1;\n\t};\n\n});\n\nexport default Screen;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Screen.js\n **/","/**\n * Node scope for the top level game node.\n */\nimport util from 'util';\nimport game from 'play.game';\nimport GlobalScope from 'types/GlobalScope';\nimport Screen from 'types/Screen';\nimport Collection from 'types/Collection';\nimport { createEntity } from 'types/Scope';\nimport { Size } from 'types/Dimensions';\nimport { MediaManager } from 'types/AudioManager';\n\nvar Game = GlobalScope.extend(function () {\n\n\tvar Viewport, screenPrototype, platformEventHandler;\n\n\t/**\n\t * Detects the device and adds the appropriate state classes.\n\t */\n\tfunction detechDevice() {\n\t\tvar deviceClasses = \"\";\n\n\t\tif(iOS()) deviceClasses += \"iOS \";\n\t\tif(mobileOrTablet()) deviceClasses += \"MOBILE \";\n\n\t\tthis.addClass(deviceClasses);\n\t}\n\n\tfunction iOS() {\n\t\tvar iDevices = [\n\t\t\t'iPad Simulator',\n\t\t\t'iPhone Simulator',\n\t\t\t'iPod Simulator',\n\t\t\t'iPad',\n\t\t\t'iPhone',\n\t\t\t'iPod'\n\t\t];\n\n\t\tif (!!navigator.platform) {\n\t\t\twhile (iDevices.length) {\n\t\t\t\tif (navigator.platform === iDevices.pop()){ return true; }\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction mobileOrTablet() {\n\t\tvar check = false;\n\t\t(function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n\t\treturn check;\n\t}\n\n\t/**\n\t * Scales the game view to fill the browser window.\n\t */\n\tfunction scaleGame () {\n\t\tvar vpSize, gameDimensions, width, height, zoom;\n\n\t\tvpSize = this.viewport.size();\n\t\tgameDimensions = game.config('dimensions');\n\t\twidth = gameDimensions.width || this.width();\n\t\theight = Math.round(gameDimensions.width / gameDimensions.ratio);\n\t\tzoom = this.viewport.width / width;\n\n\t\tif (Math.round(height * zoom) > this.viewport.height) {\n\t\t\tzoom = (this.viewport.height / height).toPrecision(4);\n\t\t}\n\n\t\tutil.mixin(this.node().style, {\n\t\t\twidth: width+'px',\n\t\t\tzoom: zoom\n\t\t});\n\n\t\tif (!this.css('zoom')) {\n\t\t\tthis.css({\n\t\t\t\ttransform: 'scale('+zoom+')',\n\t\t\t\ttransformOrigin: (zoom < 1 ? '0px' : '50%')+' 0px 0px',\n\t\t\t\theight: this.viewport.height / zoom\n\t\t\t});\n\t\t}\n\n\t\tthis.zoom = zoom;\n\t}\n\n\tfunction demoMode (_set) {\n\t\tthis.demoMode = _set != null ? _set : !this.demoMode;\n\t\tthis[this.demoMode ? 'addClass' : 'removeClass']('DEMO');\n\n\t\tconsole.info(this.id(), 'is now '+(this.demoMode ? 'in' : 'out of')+' Demo Mode.');\n\t}\n\n\tfunction collectVideos () {\n\t\tthis.find('video').each(function (_index, _node) {\n\t\t\tthis.media.video.add(_node);\n\t\t\t\n\t\t\t_node.onplay = function () {\n\t\t\t\tvar playing = this.media.playing('.background, .voiceOver');\n\t\t\t\tif (playing) playing.stop('@ALL');\n\t\t\t\tthis.log('video play', playing);\n\t\t\t}.bind(this);\n\t\t}.bind(this));\n\t}\n\n\tscreenPrototype = Screen;\n\tplatformEventHandler = new (function () {\n\t\t\n\t\tthis.invoke = function (_event, _ctx) {\n\t\t\tif (typeof this[_event.name] === 'function') {\n\t\t\t\tthis[_event.name].call(_ctx, _event);\n\t\t\t}\n\t\t};\n\n\t\tthis['toggle-demo-mode'] = function (_set) {\n\t\t\tdemoMode.call(this);\n\t\t};\n\t});\n\n\tthis.baseType = 'TYPE_GAME';\n\tthis.screens = null;\n\tthis.zoom = 1;\n\tthis.keyCommands = null;\n\tthis.demoMode = false;\n\tthis.media = null;\n\tthis.viewport = new (function () {\n\t\tvar vp, $html, RESIZE_HANDLERS;\n\n\t\tvp = this;\n\t\t$html = $('html');\n\t\tRESIZE_HANDLERS = [];\n\n\t\t$(window).on('resize', function (_event) {\n\t\t\tif (!$html.hasClass(vp.orientation)) {\n\t\t\t\t$html\n\t\t\t\t\t.removeClass('squareish landscape protrait')\n\t\t\t\t\t.addClass(vp.orientation);\n\t\t\t}\n\n\t\t\tRESIZE_HANDLERS.forEach(function (_handler) {\n\t\t\t\t_handler(_event);\n\t\t\t});\n\t\t});\n\n\t\tthis.LANDSCAPE = 'landscape';\n\t\tthis.PROTRAIT = 'protrait';\n\t\tthis.SQUAREISH = 'squareish';\n\t\t\n\t\tthis.size = function () {\n\t\t\treturn Size.create().set(window.innerWidth, window.innerHeight);\n\t\t};\n\n\t\tObject.defineProperties(this, {\n\t\t\twidth: {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn window.innerWidth;\n\t\t\t\t},\n\n\t\t\t\tconfigurable: false\n\t\t\t},\n\n\t\t\theight: {\n\t\t\t\tget: function () {\n\t\t\t\t\treturn window.innerHeight;\n\t\t\t\t},\n\n\t\t\t\tconfigurable: false\n\t\t\t},\n\n\t\t\torientation: {\n\t\t\t\tget: function () {\n\t\t\t\t\tvar ratio = this.size().ratio();\n\n\t\t\t\t\tswitch (true) {\n\t\t\t\t\t\tcase ratio > 0.9 && ratio < 1.1: return 'squareish';\n\t\t\t\t\t\tcase ratio > 1.1: return 'landscape';\n\t\t\t\t\t\tcase ratio < 0.9: return 'protrait';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.onResize = function (_handler) {\n\t\t\tRESIZE_HANDLERS.push(_handler);\n\t\t};\n\n\t\tthis.offResize = function (_handler) {\n\t\t\tvar index = RESIZE_HANDLERS.indexOf(_handler);\n\n\t\t\tif (~index) RESIZE_HANDLERS.splice(index, 1);\n\t\t};\n\n\t\t$html.addClass(this.orientation);\n\n\t});;\n\n\tthis.willInit = function () {\n\t\tthis.addClass('pl-game');\n\n\t\tdetechDevice.call(this);\n\t\tscaleGame.call(this);\n\t\tthis.watchAudio();\n\t\tthis.captureScreens();\n\n\t\tthis.viewport.onResize(this.bind(scaleGame));\n\n\t\tpl.game.on('platform-event', this.bind(function (_event) {\n\t\t\tplatformEventHandler.invoke(_event, this);\n\t\t}));\n\n\t\twindow.addEventListener('load', window.focus);\n\t\twindow.addEventListener('focus', function() {\n\t\t\tthis.resume();\n\t\t}.bind(this));\n\t\twindow.addEventListener('blur', function() {\n\t\t\tthis.pause();\n\t\t}.bind(this));\n\n\t\treturn this;\n\t};\n\n\t/**\n\t * Watch for specific keys or combination of keys. NOTE: meta key commands DO NOT support chords (i.e. meta+K,B).\n\t * ### Key Names\n\t * - *meta*: Command (aka Apple  or win)\n\t * - *alt*: Alt (aka Option )\n\t * - *shift*: Shift \n\t * - *ctrl*: Control ^\n\t * - *enter*: Enter or Return\n\t * - *esc*: Escape\n\t * - *left*: Left arrow\n\t * - *up*: Up arrow\n\t * - *right*: Right arrow\n\t * - *down*: Down arrow\n\t *\n\t * ### Example\n\t * ```javascript\n\t * // Overriding print.\n\t * this.game.onKeys('cmd+P', printHandler);\n\t *\n\t * // Holding Control and pressing \"K\" then \"B\"\n\t * this.game.onKeys('ctrl+K,B', handler);\n\t * ```\n\t * @arg {string} _commands - The key or sequence of keys.\n\t * @arg {function} _handler - Your event handler for when you key pattern is matched.\n\t * @returns `this`\n\t */\n\tthis.onKeys = function (_commands, _handler) {\n\t\tvar sequence, chords, modifiers, map;\n\n\t\tif (!this.keyCommands) {\n\t\t\tthis.keyCommands = {};\n\n\t\t\tmap = {\n\t\t\t\t13: 'enter',\n\t\t\t\t16: 'shift',\n\t\t\t\t17: 'ctrl',\n\t\t\t\t18: 'alt',\n\t\t\t\t27: 'esc',\n\t\t\t\t37: 'left',\n\t\t\t\t38: 'up',\n\t\t\t\t39: 'right',\n\t\t\t\t40: 'down',\n\t\t\t\t91: 'meta',\n\t\t\t\tenter: 13,\n\t\t\t\tshift: 16,\n\t\t\t\tctrl : 17,\n\t\t\t\talt  : 18,\n\t\t\t\tesc  : 27,\n\t\t\t\tleft : 37,\n\t\t\t\tup   : 38,\n\t\t\t\tright: 39,\n\t\t\t\tdown : 40,\n\t\t\t\tmeta : 91\n\t\t\t};\n\n\t\t\tmodifiers = [16, 17, 18, 91];\n\t\t\tsequence = [];\n\t\t\tchords = [];\n\n\t\t\tthis.on('keydown', function (_event) {\n\t\t\t\tvar modifier, key, eventMods, currentMods, command, handler;\n\n\t\t\t\tmodifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n\t\t\t\tkey = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t\t\t\teventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t\t\t\tcurrentMods = [];\n\n\t\t\t\t// Collect the modifiers the event says are still down.\n\t\t\t\teventMods.forEach(function (_modifierDown, _index) {\n\t\t\t\t\t// use the modifier name\n\t\t\t\t\tif (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t\t\t\t});\n\n\t\t\t\t// Don't add keys we already have during rapid-fire events\n\t\t\t\tif (~chords.indexOf(key) || ~sequence.indexOf(key)) return;\n\n\t\t\t\t// Construct the command\n\t\t\t\tcommand = chords.length ?\n\t\t\t\t\t(chords.push(key), chords.join(',')) :\n\t\t\t\t\t(sequence.push(key), sequence.join('+'));\n\n\t\t\t\thandler = this.keyCommands[command];\n\n\t\t\t\tif (handler) {\n\t\t\t\t\thandler.call(this, _event, command);\n\t\t\t\t\t// Keep current modifiers.\n\t\t\t\t\tsequence = currentMods.map(function (_key, _index) {\n\t\t\t\t\t\tvar key = sequence[_index];\n\t\t\t\t\t\treturn currentMods[currentMods.indexOf(key)];\n\t\t\t\t\t});\n\t\t\t\t\tchords = [];\n\n\t\t\t\t\t// Override original key command (i.e. meta+Q).\n\t\t\t\t\t_event.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.on('keyup', function (_event) {\n\t\t\t\tvar key, index, modifier, eventMods, currentMods;\n\n\t\t\t\tkey = (modifier) ? modifier : map[_event.keyCode] || String.fromCharCode(_event.keyCode);\n\t\t\t\tindex = sequence.indexOf(key);\n\t\t\t\tmodifier = (!!~modifiers.indexOf(_event.keyCode)) && map[_event.keyCode];\n\t\t\t\t// Follows the same index order as \"modifiers\" [16, 17, 18, 91]\n\t\t\t\teventMods = [_event.shiftKey, _event.ctrlKey, _event.altKey, _event.metaKey];\n\t\t\t\tcurrentMods = [];\n\n\t\t\t\t// Collect the modifiers the event says are still down.\n\t\t\t\teventMods.forEach(function (_modifierDown, _index) {\n\t\t\t\t\t// use the modifier name\n\t\t\t\t\tif (_modifierDown) currentMods.push(map[modifiers[_index]]);\n\t\t\t\t});\n\n\t\t\t\t// If the key released is a modifier...\n\t\t\t\tif (key === modifier) {\n\t\t\t\t\t// ...keep current modifiers...\n\t\t\t\t\tsequence = currentMods.map(function (_key, _index) {\n\t\t\t\t\t\tvar key = sequence[_index];\n\t\t\t\t\t\treturn currentMods[currentMods.indexOf(key)];\n\t\t\t\t\t});\n\t\t\t\t\t// ...clear registered chords.\n\t\t\t\t\tchords = [];\n\t\t\t\t}\n\n\t\t\t\telse {\n\t\t\t\t\t// If we had pressed more than one key...\n\t\t\t\t\tif (sequence.length > 1) {\n\t\t\t\t\t\t// Check if the first is a modifier then switch to chord capturing\n\t\t\t\t\t\tif (~modifiers.indexOf(map[sequence[0]])) {\n\t\t\t\t\t\t\tchords.push(sequence.join('+'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (~index) sequence.splice(index, 1);\n\t\t\t\t\tif (!sequence.length) chords = [];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.keyCommands[_commands] = _handler;\n\n\t\treturn this;\n\t};\n\n\tthis.screen = function (_id, _implementation) {\n\t\tvar prototype, selector, screenSelector, instance;\n\n\t\tif (arguments.length === 1 && typeof _id === 'function') {\n\t\t\tscreenPrototype = Screen.extend(_id);\n\t\t\treturn this;\n\t\t}\n\n\t\tif (!this.hasOwnProperty('screens')) this.screens = Collection.create();\n\n\t\tif (this.hasOwnProperty('$els')) {\n\t\t\tdebugger;\n\t\t\tscreenSelector = pl.game.config('screenSelector');\n\t\t\tprototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n\t\t\tselector = (typeof _id === 'number') ? screenSelector+':nth-child('+(_id+1)+')' : '#'+_id;\n\t\t\tinstance = prototype.extend(_implementation).initialize(this.find(selector));\n\n\t\t\tinstance.screen = instance;\n\t\t\tif (!instance.game) {\n\t\t\t\tinstance.game = instance.closest('.pl-game').scope();\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\tthis.screens.push({\n\t\t\t\tindex: (typeof _id === 'number') ? _id : null,\n\t\t\t\tname: (typeof _id === 'string') ? _id : null,\n\t\t\t\timplementation: _implementation\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.captureScreens = function () {\n\t\tvar screenSelector, prototype, collection;\n\n\t\tscreenSelector = pl.game.config('screenSelector');\n\t\tprototype = (screenPrototype.isPrototypeOf(this)) ? this : screenPrototype;\n\t\tcollection = [];\n\t\t\n\t\tthis.findOwn(screenSelector).each(this.bind(function (_index, _node) {\n\t\t\tvar $node, screen, record, key, id, index, component;\n\n\t\t\t$node = $(_node);\n\t\t\tid = $node.id();\n\t\t\tkey = (id) ? 'name' : (id = _index, 'index');\n\t\t\trecord = this.screens && this.screens.get(id, key);\n\t\t\tcomponent = $node.attr('pl-component');\n\t\t\tscreen = createEntity.call(prototype, $node, record && record.implementation);\n\t\t\tscreen.screen = screen;\n\t\t\tscreen.game = this;\n\n\t\t\tif ($node.attr('pl-skip') == null) collection.push(screen);\n\t\t\t\n\t\t\tif (key === 'name' || component) {\n\t\t\t\tutil.assignRef(this, util.transformId((key === 'name' && id) || component, true), screen);\n\t\t\t}\n\t\t}));\n\n\t\tif (collection.length) this.screens = collection;\n\n\t\treturn this;\n\t};\n\n\tthis.watchAudio = function () {\n\t\tthis.media = MediaManager.create(this.id());\n\n\t\t/**\n\t\t * Prevent duplicate playback of voiceOvers and backgrounds.\n\t\t */\n\t\tthis.media.rule('.background, .voiceOver', 'shouldPlay', function (_event) {\n\t\t\tvar playing = this.playing() || [];\n\t\t\t// shouldPlay = false if _event.target is already playing.\n\t\t\t_event.response(!playing || !playing.length || (!~playing.indexOf(_event.target) && !playing.has(_event.target.fileName)));\n\t\t});\n\n\t\t/**\n\t\t * \n\t\t */\n\t\tthis.media.rule('.voiceOver', function (_event) {\n\t\t\tvar audio, playing;\n\n\t\t\taudio = _event.target;\n\t\t\tplaying = audio && this.playing('.audio:not(#'+audio.id()+')');\n\n\t\t\tswitch (_event.type) {\n\t\t\t\tcase 'play':\n\t\t\t\t\tif (playing) {\n\t\t\t\t\t\tplaying.filter('.voiceOver').stop('@ALL');\n\t\t\t\t\t\tplaying.filter('.background').volume(game.config('bgVolume.drop') || 0.2);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'pause':\n\t\t\t\tcase 'stopped':\n\t\t\t\tcase 'ended':\n\t\t\t\t\tif (playing) playing.filter('.background').volume(game.config('bgVolume.max') || 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tthis.media.rule('.background', 'play', function (_event) {\n\t\t\tvar playing = this.playing('.background:not(#'+_event.target.id()+')');\n\t\t\tif (playing) playing.stop('@ALL');\n\t\t});\n\n\t\tif (~pl.EVENT.ACTION.indexOf('touch')) {\n\t\t\tthis.on(pl.EVENT.ACTION, function beginAudio (_event) {\n\t\t\t\tvar ctx, screen;\n\n\t\t\t\tctx = game.getAudioContext();\n\t\t\t\tscreen = this.currentScreen();\n\n\t\t\t\tif (screen && ctx && ctx.state === 'suspended') {\n\t\t\t\t\tgame.enableAudioContext();\n\t\t\t\t\tthis.log('awesome!');\n\t\t\t\t\tscreen.startAudio();\n\t\t\t\t\tthis.off(pl.EVENT.ACTION, beginAudio);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tcollectVideos.call(this);\n\t};\n\n\tthis.progress = function () {\n\t\treturn {\n\t\t\tcurrentScreen: this.currentScreen().index()\n\t\t};\n\t};\n\n\tthis.currentScreen = function () {\n\t\treturn this.findOwn(pl.game.config('screenSelector')+'.OPEN').not('#quit').scope();\n\t};\n\n\tthis.flip = function () {\n\t\tconsole.log('THATS A FLIP!');\n\t\tgame.report.flip(this);\n\t};\n\n\tthis.pause = function(quitScreen) {\n\t\tif(!quitScreen) this.addClass('PAUSED');\n\t\tthis.screens.forEach(function(screen) {\n\t\t\tif(screen.state(screen.STATE.OPEN)) {\n\t\t\t\tscreen.pause();\n\t\t\t}\n\t\t});\n\t\tgame.getAudioContext().suspend();\n\t}\n\n\tthis.resume = function() {\n\t\tthis.removeClass('PAUSED');\n\t\tthis.screens.forEach(function(screen) {\n\t\t\tif(screen.state(screen.STATE.OPEN)) screen.resume();\n\t\t});\n\t\tif(!this.hasClass('QUIT-SCREEN')) game.getAudioContext().resume();\n\t}\n\n\tthis.exit = function () {\n\t\tconsole.log('GOODBYE!');\n\t\tgame.report.exit(this);\n\t};\n\n\t/**\n\t * Demo mode key command\n\t */\n\tthis.onKeys('ctrl+D,M', function () {\n\t\tdemoMode.call(this);\n\t});\n\n\t/**\n\t * Keyboard screen navigation\n\t */\n\tthis.onKeys('left', function () {\n\t\tvar current;\n\n\t\tcurrent = this.currentScreen();\n\n\t\tif (current) current.prev();\n\t});\n\n\tthis.onKeys('right', function () {\n\t\tvar current;\n\n\t\tcurrent = this.currentScreen();\n\t\t\n\t\tif (current) current.next();\n\t});\n\n});\n\nexport default Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/types/Game.js\n **/","/**\n * API for communicaion between a game and the platform.\n *\n * @module\n */\nimport util from 'util';\n\nvar platform = new (function () {\n\n\tfunction createEvent (_name, _props) {\n\t\tvar eventObject;\n\n\t\teventObject = util.mixin(new Event('game-event', {bubbles:true, cancelable:false}), {\n\t\t\tname: _name,\n\t\t\trespond: function (_data) {\n\t\t\t\tvar platformEvent;\n\n\t\t\t\tplatformEvent = $.Event('platform-event', {\n\t\t\t\t\tname: _name,\n\t\t\t\t\tgameData: _data\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tpl.game.trigger(platformEvent);\n\t\t\t}\n\t\t}, _props);\n\n\t\treturn eventObject;\n\t}\n\n\tthis.EVENT_INIT = 'init';\n\tthis.EVENT_SAVE = 'save';\n\tthis.EVENT_EXIT = 'exit';\n\tthis.EVENT_FLIPPED = 'flipped';\n\n\tthis.emit = function (_name) {\n\t\tif (window.frameElement) window.frameElement.dispatchEvent(createEvent(_name));\n\t};\n\n\tthis.saveGameState = function (_data) {\n\t\tif (window.frameElement) window.frameElement.dispatchEvent(createEvent(this.EVENT_SAVE, { gameData: _data }));\n\t};\n\n\twindow.addEventListener('platform-event', function (_event) {\n\t\tvar platformEvent;\n\n\t\tplatformEvent = $.Event('platform-event', {\n\t\t\tname: _event.name\n\t\t});\n\t\t\n\t\tpl.game.trigger(platformEvent);\n\t});\n\n});\n\nexport default platform;\n\n\n\n/** WEBPACK FOOTER **\n ** ./source/platform.js\n **/"],"sourceRoot":""}