!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){e.exports=n(14)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),c=o(l),p=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?t.defaultProps:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={started:!1,ready:!e.checkReady},n.onReady=n.onReady||_.noop,n.start=_.throttle(n.start.bind(n),100),n.ready=_.throttle(n.ready.bind(n),100),n.complete=_.throttle(n.complete.bind(n),100),n}return a(t,e),u(t,[{key:"trigger",value:function(){return skoash.trigger.apply(null,arguments)}},{key:"invokeChildrenFunction",value:function(e,t){_.each(this.refs,function(n){_.invoke(n,e,t)})}},{key:"complete",value:function(e){var t=this;e=_.defaults(e||{},this.props),setTimeout(function(){t.setState({complete:!0},function(){t.trigger("complete"),e.onComplete.call(t,t)})},e.completeDelay)}},{key:"incomplete",value:function(){var e=this;this.state.complete&&!this.props.complete&&this.setState({complete:!1},function(){e.trigger("incomplete"),e.props.onIncomplete.call(e,e)})}},{key:"completeRefs",value:function(){this.invokeChildrenFunction("completeRefs"),this.complete({silent:!0})}},{key:"incompleteRefs",value:function(){this.invokeChildrenFunction("incompleteRefs"),this.incomplete()}},{key:"ready",value:function(){var e=this;this.setState({ready:!0},function(){e.props.triggerReady&&e.trigger("ready"),e.state.open&&e.start(),_.isFunction(e.onReadyCallback)?(_.invoke(e,"onReadyCallback.call",e),delete e.onReadyCallback):_.invoke(e,"onReady.call",e),e.props.onReady.call(e)})}},{key:"start",value:function(e){var t=this;this.state&&this.state.ready&&!this.state.started&&this.props.shouldStart&&this.setState({started:!0},function(){t.checkComplete(),t.invokeChildrenFunction("start"),(t.props.completeOnStart||t.props.complete)&&t.complete(),t.props.onStart.call(t),"function"==typeof e&&e.call(t)})}},{key:"stop",value:function(){var e=this;this.setState({started:!1},function(){e.invokeChildrenFunction("stop"),e.props.onStop.call(e)})}},{key:"pause",value:function(){this.invokeChildrenFunction("pause"),this.props.onPause.call(this)}},{key:"resume",value:function(){this.invokeChildrenFunction("resume"),this.props.onResume.call(this)}},{key:"open",value:function(){var e=this;this.setState({open:!0},function(){e.props.onOpen.call(e)})}},{key:"close",value:function(){var e=this;this.setState({open:!1},function(){e.props.onClose.call(e)})}},{key:"componentDidMount",value:function(){this.bootstrap()}},{key:"bootstrap",value:function(){this.props.bootstrap&&((this.props.completeIncorrect&&!this.props.correct||this.props.complete)&&this.complete(),this.collectMedia(),this.checkReady(),this.props.onBootstrap.call(this))}},{key:"collectData",value:function(){return this.props.collectData.call(this)}},{key:"loadData",value:function(){return this.metaData?this.props.loadData.call(this,this.metaData):void 0}},{key:"collectMedia",value:function(){var e=this;this.media={video:[],audio:{background:[],sfx:[],voiceOver:[]},sequence:[]},_.each(this.refs,function(t,n){t instanceof skoash.Video&&e.collectVideo(n),t instanceof skoash.Audio&&e.collectAudio(n),t instanceof skoash.MediaSequence&&e.collectMediaSequence(n)})}},{key:"collectVideo",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),_.isFinite(e)||(this.media.video[e]=this.refs[e]),this.media.video.push(this.refs[e])}},{key:"collectAudio",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),this.media.audio[e]||(this.media.audio[e]=this.refs[e]),_.isFinite(e)||(this.media.audio[this.refs[e].props.type][e]=this.refs[e]),this.refs[e].props.type&&this.media.audio[this.refs[e].props.type].push(this.refs[e])}},{key:"collectMediaSequence",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),_.isFinite(e)||(this.media.sequence[e]=this.refs[e]),this.media.sequence.push(this.refs[e])}},{key:"playMedia",value:function(e){_.invoke(this.media,e+".play")}},{key:"getUnready",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"ready":arguments[0];return _.reduce(this.refs,function(t,n,o){return n.state&&!n.state[e]&&(t[o]=n),t},{})}},{key:"checkReady",value:function(){var e;!this.props.checkReady||!this.props.ignoreReady&&this.state.ready||(_.each(this.refs,function(e){_.get(e,"state.ready")||_.invoke(e,"checkReady")}),e=!_.size(this.getUnready()),e&&this.ready())}},{key:"checkComplete",value:function(){var e;this.props.checkComplete&&this.state.ready&&(_.each(this.refs,function(e){return _.invoke(e,"checkComplete")}),e=!_.size(this.getUnready("complete")),e&&!this.state.complete?this.complete():this.state.started&&!e&&this.state.complete&&this.incomplete())}},{key:"updateGameState",value:function(e){return this.trigger("updateState",e)}},{key:"updateGameData",value:function(e){return this.trigger("updateGameData",e)}},{key:"updateScreenData",value:function(e){return this.trigger("updateScreenData",e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.shouldComponentUpdate.call(this,e,t)}},{key:"componentWillReceiveProps",value:function(e){e.complete===!0&&e.complete!==this.props.complete&&this.complete(e),e.completeRefs===!0&&e.completeRef!==this.props.completeRef&&this.completeRefs(),e.incompleteRefs===!0&&e.incompleteRefs!==this.props.incompleteRefs&&this.incompleteRefs(),e.start===!0&&e.start!==this.props.start&&this.start(),e.stop===!0&&e.stop!==this.props.stop&&this.stop(),this.props.onComponentWillReceiveProps.call(this,e)}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"addClassName",value:function(e,t){this.state.className&&-1!==this.state.className.indexOf(e)||this.setState({className:(0,c["default"])(this.state.className,e)},t)}},{key:"removeClassName",value:function(e,t){this.state.className&&this.setState({className:this.state.className.replace(e,"")},t)}},{key:"removeAllClassNames",value:function(e){this.setState({className:null},e)}},{key:"getClassNames",value:function(){return(0,c["default"])(_.reduce(this.state,function(e,t,n){return t===!0&&(e[_.toUpper(n)]=t),e},{}),this.state.className,this.props.className,this.props.componentName,this.props.getClassNames.call(this))}},{key:"renderContentList",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?"children":arguments[0];return _.map([].concat(this.props[t]),function(n,o){var r=n instanceof skoash.MediaSequence?e.state:e.props.gameState;if(n&&n.type)return React.createElement(n.type,s({gameState:r},n.props,{ref:n.ref||n.props&&n.props["data-ref"]||t+"-"+o,key:o}))})}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,s({},this.props,{className:this.getClassNames()}),this.renderContentList()):null}}]),t}(React.Component);p.defaultProps={bootstrap:!0,checkComplete:!0,checkReady:!0,collectData:_.noop,completeDelay:0,completeIncorrect:!1,completeOnStart:!1,componentName:"",getClassNames:_.noop,ignoreReady:!1,loadData:_.noop,onBootstrap:_.noop,onClose:_.noop,onComplete:_.noop,onComponentWillReceiveProps:_.noop,onReady:_.noop,onIncomplete:_.noop,onOpen:_.noop,onPause:_.noop,onResume:_.noop,onStart:_.noop,onStop:_.noop,shouldComponentUpdate:function(){return!0},shouldRender:!0,shouldStart:!0,triggerReady:!0,type:"div"},t["default"]=p},function(e,t,n){var o,r;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var r=typeof o;if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===r)for(var a in o)i.call(o,a)&&o[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(o=[],r=function(){return n}.apply(t,o),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),l=o(u),c=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state.ready=e.ready,n.error=n.error.bind(n),n}return a(t,e),s(t,[{key:"error",value:function(){var e=this;this.setState({error:!0,ready:this.props.ready},function(){e.props.onError.call(e)})}}]),t}(l["default"]);c.defaultProps=_.defaults({checkComplete:!1,checkReady:!1,onError:_.noop,ready:!1},l["default"].defaultProps),t["default"]=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(10),u=o(s),l=n(7),c=o(l),p=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.loadFile=c["default"].loadJSON,n.loadData(e.src),n}return a(t,e),t}(u["default"]);t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(3),c=o(l),p=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"bootstrap",value:function(){this.setState({complete:this.props.complete})}},{key:"render",value:function(){return React.createElement("img",s({},this.props,{className:this.getClassNames(),onLoad:this.ready,onError:this.error,draggable:!1}))}}]),t}(c["default"]);p.defaultProps=_.defaults({complete:!0},c["default"].defaultProps),t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function f(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},l=n(3),c=o(l),p=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"start",value:function(){this.props.silentOnStart||this.play()}},{key:"play",value:function(){this.props.playTarget&&this.updateScreenData({key:this.props.playTarget,data:{playing:!0}}),this.props.onPlay.call(this)}},{key:"complete",value:function(){this.props.completeTarget&&this.updateScreenData({key:this.props.completeTarget,data:{playing:!1,complete:!0}}),u(Object.getPrototypeOf(t.prototype),"complete",this).call(this)}}]),t}(c["default"]);p.defaultProps=_.defaults({bootstrap:!1,completeDelay:0,completeOnStart:!1,silentOnStart:!0,shouldComponentUpdate:function(){return!1},onPlay:_.noop},c["default"].defaultProps),t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(42),i=o(r),a=n(12),s=o(a),u=n(43),l=o(u);t["default"]={doIntersect:i["default"],loadFile:s["default"],loadJSON:l["default"]}},function(e,t,n){"use strict";function o(){f=!1}function r(e){if(!e)return void(c!==h&&(c=h,o()));if(e!==c){if(e.length!==h.length)throw new Error("Custom alphabet for shortid must be "+h.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+h.length+" unique characters. These characters were not unique: "+t.join(", "));c=e,o()}}function i(e){return r(e),c}function a(e){d.seed(e),p!==e&&(o(),p=e)}function s(){c||r(h);for(var e,t=c.split(""),n=[],o=d.nextValue();t.length>0;)o=d.nextValue(),e=Math.floor(o*t.length),n.push(t.splice(e,1)[0]);return n.join("")}function u(){return f?f:f=s()}function l(e){var t=u();return t[e]}var c,p,f,d=n(58),h="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";e.exports={characters:i,seed:a,lookup:l,shuffled:u}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function d(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},l=n(13),c=n(6),p=o(c),f=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.allowMultiPlay=e.allowMultiPlay||"sfx"===e.type,n.playAudio=n.playAudio.bind(n),n.play=_.throttle(n.play.bind(n),e.playThrottle),n}return a(t,e),s(t,[{key:"play",value:function(){var e=this;skoash.trigger("getState").then(function(t){e.state.ready?(skoash.trigger("audioPlay",{audio:e}),e.delayed=!0,t.paused||(e.timeout=setTimeout(e.playAudio,e.props.delay))):e.bootstrap()})}},{key:"playAudio",value:function(e){this.paused||(e||this.allowMultiPlay||!this.playing)&&(this.delayed=!1,this.playing=!0,_.invoke(this,"audio.play",this.sprite),u(Object.getPrototypeOf(t.prototype),"play",this).call(this))}},{key:"pause",value:function(){this.delayed&&clearTimeout(this.timeout),this.playing&&(_.invoke(this,"audio.pause"),this.paused=!0)}},{key:"resume",value:function(){var e=this;skoash.trigger("getState").then(function(t){t.paused||(e.delayed&&(e.timeout=setTimeout(e.playAudio,e.props.delay)),e.paused&&(e.paused=!1,e.playAudio(!0)))})}},{key:"stop",value:function(){this.delayed&&this.timeout&&clearTimeout(this.timeout),(this.playing||this.delayed)&&this.audio&&(this.playing=!1,this.paused=!1,_.invoke(this,"audio.stop",this.sprite),skoash.trigger("audioStop",{audio:this}))}},{key:"setVolume",value:function(e){e=Math.min(this.props.maxVolume,Math.max(this.props.minVolume,e)),_.invoke(this,"audio.volume",e)}},{key:"increaseVolume",value:function(e){this.playing&&(e=Math.min(e||this.props.volume,this.props.maxVolume),_.invoke(this,"audio.fadeIn",e))}},{key:"decreaseVolume",value:function(e){this.playing&&(e=Math.max(e,this.props.minVolume),_.invoke(this,"audio.fadeOut",e))}},{key:"complete",value:function(e){e=_.defaults(e||{},this.props),e.loop||(this.playing=!1,skoash.trigger("audioStop",{audio:this})),!e.complete&&this.paused||u(Object.getPrototypeOf(t.prototype),"complete",this).call(this)}},{key:"bootstrap",value:function(){this.load(),this.props.complete&&this.complete()}},{key:"load",value:function(){var e=this.props.sprite?{sprite:this.props.sprite}:void 0;this.sprite=this.props.sprite?"sprite":void 0,this.audio||(this.audio=new l.Howl({src:[].concat(this.props.src),format:[].concat(this.props.format),loop:this.props.loop,volume:this.props.volume,onend:this.complete,onload:this.ready,rate:this.props.rate,sprite:e}))}},{key:"unload",value:function(){this.playing=!1,this.paused=!1,skoash.trigger("audioStop",{audio:this}),this.audio&&(_.invoke(this,"audio.stop",this.sprite),_.invoke(this,"audio.unload"),delete this.audio,this.setState({ready:this.props.ready||!1}))}},{key:"componentWillUnmount",value:function(){this.unload()}},{key:"componentWillReceiveProps",value:function(e){u(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),null!==e.volume&&e.volume!==this.props.volume&&this.setVolume(e.volume)}}]),t}(p["default"]);f.defaultProps=_.defaults({type:"sfx",format:"mp3",delay:0,rate:1,loop:!1,volume:1,maxVolume:1,minVolume:0,playThrottle:100,shouldRender:!1,sprite:void 0,allowMultiPlay:!1,unloadIndex:1/0,loadIndex:0},p["default"].defaultProps),t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),l=o(u),c=n(7),p=o(c),f=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state.ready=!1,n.loadFile=p["default"].loadFile,n.loadData(e.src),n}return a(t,e),s(t,[{key:"loadData",value:function(e){var t=this;this.loadFile(e,function(e){t.data=e,t.ready(),t.props.dataTarget&&t.updateGameData({key:t.props.dataTarget,data:e})})}},{key:"getData",value:function(){return this.data}}]),t}(l["default"]);f.defaultProps=_.defaults({src:"",complete:!0,checkReady:!1,checkComplete:!1,shouldRender:!1},l["default"].defaultProps),t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={ready:!1,open:!1,leaving:!1,leave:!1,close:!0,complete:!1,load:e.load},n.next=n.next.bind(n),n.prev=n.prev.bind(n),n}return a(t,e),u(t,[{key:"goto",value:function(e,t){"string"==typeof e||"number"==typeof e?skoash.trigger("goto",{index:e,buttonSound:t}):"object"===("undefined"==typeof e?"undefined":s(e))&&(e.buttonSound=e.buttonSound||t,skoash.trigger("goto",e))}},{key:"back",value:function(){skoash.trigger("goBack")}},{key:"next",value:function(){var e=this.props.gameState;this.state.started&&!this.state.leaving&&(e.demo||this.state.complete||this.state.replay)&&(this.setState({leaving:!0}),setTimeout(this["goto"].bind(this,this.props.nextIndex||this.props.index+1,this.media.audio.button),this.props.nextDelay||0))}},{key:"prev",value:function(){this["goto"](this.props.prevIndex||this.props.index-1)}},{key:"load",value:function(e){var n=this;this.onReadyCallback=e,this.state.load?(_.invoke(this,"onReadyCallback.call",this),this.onReadyCallback=null):this.setState({load:!0,ready:!1,complete:!1},function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",n).call(n),n.props.onLoad.call(n)})}},{key:"unload",value:function(){var e=this;this.state.load&&this.props.shouldUnload&&this.setState({load:!1},function(){e.props.onUnload.call(e)})}},{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.props.load&&this.load()}},{key:"replay",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.load(),this.setState({replay:e})}},{key:"start",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e.bootstrap(),e.startMedia()})}},{key:"startMedia",value:function(){this.media.video[0]?this.playMedia("video.0"):this.media.audio.voiceOver[0]&&this.playMedia("audio.voiceOver.0"),this.playMedia("start"),this.playMedia(this.props.playOnStart)}},{key:"complete",value:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l(Object.getPrototypeOf(t.prototype),"complete",this).call(this,n),setTimeout(function(){skoash.trigger("screenComplete",{screenID:e.props.id,silent:n.silent||e.props.silentComplete||e.media["screen-complete"]}),e.playMedia("screen-complete"),e.props.emitOnComplete&&skoash.trigger("emit",e.props.emitOnComplete)},this.props.completeDelay)}},{key:"open",value:function(e){var t=this;t.setState({load:!0,open:!0,opening:!0,leaving:!1,leave:!1,close:!1,replay:t.state.complete||t.state.replay,opts:e},function(){t.props.startDelay?setTimeout(function(){t.state.started||t.start(),t.setState({opening:!1})},t.props.startDelay):(t.state.started||t.start(),t.setState({opening:!1})),t.props.onOpen.call(t),t.loadData()})}},{key:"leave",value:function(){this.setState({open:!1,leave:!0,close:!1}),this.stop()}},{key:"close",value:function(){this.setState({open:!1,leave:!1,close:!0}),this.stop()}},{key:"collectData",value:function(){return this.props.collectData.call(this)}},{key:"loadData",value:function(){return this.props.loadData.call(this)}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.load&&e.load!==this.props.load&&this.load()}},{key:"renderContent",value:function(){return this.state.load?React.createElement("div",{className:"screen-content"},this.renderContentList()):null}},{key:"renderPrevButton",value:function(){return this.props.hidePrev?null:this.props.renderPrevButton.call(this)}},{key:"renderNextButton",value:function(){return this.props.hideNext?null:this.props.renderNextButton.call(this)}},{key:"render",value:function(){return React.createElement("div",{id:this.props.id,className:this.getClassNames()},this.renderContent(),this.renderPrevButton(),this.renderNextButton())}}]),t}(d["default"]);h.defaultProps=_.defaults({componentName:"screen",load:!1,resetOnClose:!0,startDelay:250,collectData:_.noop,loadData:_.noop,onOpen:_.noop,onLoad:_.noop,onUnload:_.noop,shouldUnload:!0,gameState:{},hidePrev:!1,hideNext:!1,renderPrevButton:function(){return React.createElement("button",{className:(0,p["default"])("prev-screen",this.props.prevButtonClassName),onClick:this.prev},this.props.prevContent)},renderNextButton:function(){return React.createElement("button",{className:(0,p["default"])("next-screen",this.props.nextButtonClassName),onClick:this.next},this.props.nextContent)},prevContent:null,nextContent:null},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"text":arguments[2];return o[e]?void t(o[e]):void fetch(e).then(function(r){_.invoke(r,n).then(function(n){200===r.status?(o[e]=n,t(n)):console.log("Error",n)})})},n(50);var o={}},function(e,t,n){var o,r;(function(n){/*!
	 *  howler.js v2.0.3
	 *  howlerjs.com
	 *
	 *  (c) 2013-2017, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||a;return e._counter=0,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||h(),"undefined"!=typeof e&&e>=0&&1>=e){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||h(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),r=0;r<o.length;r++){var i=t._howls[n]._soundById(o[r]);i&&i._node&&(i._node.muted=e?!0:i._muted)}return t},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&"undefined"!=typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;"undefined"==typeof t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(n){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(n){return e}if(!t||"function"!=typeof t.canPlayType)return e;var o=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!o&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||a,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),"undefined"==typeof t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchend",o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!=typeof e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&"undefined"!=typeof e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new i,s=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(e){var t=this;return a.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"==typeof e.preload?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,"undefined"!=typeof a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(a.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var o,r;if(e._format&&e._format[n])o=e._format[n];else{if(r=e._src[n],"string"!=typeof r){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=/^data:audio\/([^;,]+);/i.exec(r),o||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&a.codecs(o)){t=e._src[n];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new u(e),e._webAudio&&c(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if("undefined"==typeof e){e="__default";for(var r=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(r++,o=n._sounds[i]._id);1===r?e=null:o=null}}var s=o?n._soundById(o):n._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state&&!n._sprite[e])return n._queue.push({event:"play",action:function(){n.play(n._soundById(s._id)?s._id:void 0)}}),s._id;if(o&&!s._paused)return t||setTimeout(function(){n._emit("play",s._id)},0),s._id;n._webAudio&&a._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),c=1e3*l/Math.abs(s._rate);s._paused=!1,s._ended=!1,s._sprite=e,s._seek=u,s._start=n._sprite[e][0]/1e3,s._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,s._loop=!(!s._loop&&!n._sprite[e][2]);var p=s._node;if(n._webAudio){var f=function(){n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;p.gain.setValueAtTime(e,a.ctx.currentTime),s._playStart=a.ctx.currentTime,"undefined"==typeof p.bufferSource.start?s._loop?p.bufferSource.noteGrainOn(0,u,86400):p.bufferSource.noteGrainOn(0,u,l):s._loop?p.bufferSource.start(0,u,86400):p.bufferSource.start(0,u,l),c!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c)),t||setTimeout(function(){n._emit("play",s._id)},0)},d="running"===a.state;if("loaded"===n._state&&d)f();else{var h=d||"loaded"!==n._state?"load":"resume";n.once(h,f,d?s._id:null),n._clearTimer(s._id)}}else{var y=function(){p.currentTime=u,p.muted=s._muted||n._muted||a._muted||p.muted,p.volume=s._volume*a.volume(),p.playbackRate=s._rate,p.play(),c!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c)),t||n._emit("play",s._id)},m="loaded"===n._state&&(window&&window.ejecta||!p.readyState&&a._navigator.isCocoonJS);if(4===p.readyState||m)y();else{var v=function(){y(),p.removeEventListener(a._canPlayEvent,v,!1)};p.addEventListener(a._canPlayEvent,v,!1),n._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)return t;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);if(i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node))if(n._webAudio){if(!i._node.bufferSource)return t||n._emit("stop",i._id),n;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause());i&&!t&&n._emit("stop",i._id)}return n},mute:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if("undefined"==typeof t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),r=0;r<o.length;r++){var i=n._soundById(o[r]);i&&(i._muted=e,n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,a.ctx.currentTime):i._node&&(i._node.muted=a._muted?!0:e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n=this,o=arguments;if(0===o.length)return n._volume;if(1===o.length||2===o.length&&"undefined"==typeof o[1]){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var s;if(!("undefined"!=typeof e&&e>=0&&1>=e))return s=t?n._soundById(t):n._sounds[0],s?s._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;"undefined"==typeof t&&(n._volume=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)s=n._soundById(t[u]),s&&(s._volume=e,o[2]||n._stopFade(t[u]),n._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(e,a.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=e*a.volume()),n._emit("volume",s._id));return n},fade:function(e,t,n,o){var r=this,i=Math.abs(e-t),s=e>t?"out":"in",u=i/.01,l=u>0?n/u:n;if(4>l&&(u=Math.ceil(u/(4/l)),l=4),"loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,o)}}),r;r.volume(e,o);for(var c=r._getSoundIds(o),p=0;p<c.length;p++){var f=r._soundById(c[p]);if(f){if(o||r._stopFade(c[p]),r._webAudio&&!f._muted){var d=a.ctx.currentTime,h=d+n/1e3;f._volume=e,f._node.gain.setValueAtTime(e,d),f._node.gain.linearRampToValueAtTime(t,h)}var y=e;f._interval=setInterval(function(n,i){u>0&&(y+="in"===s?.01:-.01),y=Math.max(0,y),y=Math.min(1,y),y=Math.round(100*y)/100,r._webAudio?("undefined"==typeof o&&(r._volume=y),i._volume=y):r.volume(y,n,!0),(e>t&&t>=y||t>e&&y>=t)&&(clearInterval(i._interval),i._interval=null,r.volume(t,n),r._emit("fade",n))}.bind(r,c[p],f),l)}}return r},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(n._interval),n._interval=null,t._emit("fade",e)),t},loop:function(){var e,t,n,o=this,r=arguments;if(0===r.length)return o._loop;if(1===r.length){if("boolean"!=typeof r[0])return n=o._soundById(parseInt(r[0],10)),n?n._loop:!1;e=r[0],o._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=o._getSoundIds(t),a=0;a<i.length;a++)n=o._soundById(i[a]),n&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return o},rate:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var s;if("number"!=typeof e)return s=n._soundById(t),s?s._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;"undefined"==typeof t&&(n._rate=e),t=n._getSoundIds(t);for(var u=0;u<t.length;u++)if(s=n._soundById(t[u])){s._rateSeek=n.seek(t[u]),s._playStart=n._webAudio?a.ctx.currentTime:s._playStart,s._rate=e,n._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.value=e:s._node&&(s._node.playbackRate=e);var l=n.seek(t[u]),c=(n._sprite[s._sprite][0]+n._sprite[s._sprite][1])/1e3-l,p=1e3*c/Math.abs(s._rate);!n._endTimers[t[u]]&&s._paused||(n._clearTimer(t[u]),n._endTimers[t[u]]=setTimeout(n._ended.bind(n,s),p)),n._emit("rate",s._id)}return n},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var r=n._getSoundIds(),i=r.indexOf(o[0]);i>=0?t=parseInt(o[0],10):(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("undefined"==typeof t)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?a.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),c&&n.play(t,!0),!n._webAudio&&s._node&&(s._node.currentTime=e),n._emit("seek",t)}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return n?!n._paused:!1}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,o=t._soundById(e);return o&&(n=t._sprite[o._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){t[n]._paused||e.stop(t[n]._id),e._webAudio||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1)),delete t[n]._node,e._clearTimer(t[n]._id);var o=a._howls.indexOf(e);o>=0&&a._howls.splice(o,1)}var r=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src){r=!1;break}return l&&r&&delete l[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this,i=r["_on"+e];return"function"==typeof t&&i.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),r},off:function(e,t,n){var o=this,r=o["_on"+e],i=0;if(t){for(i=0;i<r.length;i++)if(t===r[i].fn&&n===r[i].id){r.splice(i,1);break}}else if(e)o["_on"+e]=[];else{var a=Object.keys(o);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(o[a[i]])&&(o[a[i]]=[])}return o},once:function(e,t,n){var o=this;return o.on(e,t,n,1),o},_emit:function(e,t,n){for(var o=this,r=o["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(o,r[i].fn),0),r[i].once&&o.off(e,r[i].fn,r[i].id));return o},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,n=e._sprite,o=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),t._webAudio||o||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new u(e)},_drain:function(){var e=this,t=e._pool,n=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&n++;for(o=e._sounds.length-1;o>=0;o--){if(t>=n)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),n--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var n=[],o=0;o<t._sounds.length;o++)n.push(t._sounds[o]._id);return n}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=l[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(n){}}return e.bufferSource=null,t}};var u=function(e){this._parent=e,this.init()};u.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=n*a.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)}};var l={},c=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);f(o.buffer,e)}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t=(i.status+"")[0];return"0"!==t&&"2"!==t&&"3"!==t?void e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+"."):void f(i.response,e)},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},p(i)}},p=function(e){try{e.send()}catch(t){e.onerror()}},f=function(e,t){a.ctx.decodeAudioData(e,function(e){e&&t._sounds.length>0&&(l[t._src]=e,d(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(e){a.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),n=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(t&&o&&9>o){var r=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!r||a._navigator&&!a._navigator.standalone&&!r)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.value=1,a.masterGain.connect(a.ctx.destination)),a._setup()};o=[],r=function(){return{Howler:a,Howl:s}}.apply(t,o),!(void 0!==r&&(e.exports=r)),t.Howler=a,t.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=a,window.Howl=s,window.Sound=u):"undefined"!=typeof n&&(n.HowlerGlobal=i,n.Howler=a,n.Howl=s,n.Sound=u)}(),/*!
	 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
	 *  
	 *  howler.js v2.0.3
	 *  howlerjs.com
	 *
	 *  (c) 2013-2017, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var o=this;return o.ctx&&o.ctx.listener?(t="number"!=typeof t?o._pos[1]:t,n="number"!=typeof n?o._pos[2]:n,"number"!=typeof e?o._pos:(o._pos=[e,t,n],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,o="number"!=typeof o?s[3]:o,r="number"!=typeof r?s[4]:r,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,t,n,o,r,i],a.ctx.listener.setOrientation(e,t,n,o,r,i),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:0,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:"inverse",maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:1e4,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:"HRTF",refDistance:"undefined"!=typeof t.refDistance?t.refDistance:1,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(t,n)}}),o;var r="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var s=o._soundById(i[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,r),"spatial"===r?s._panner.setPosition(t,0,0):s._panner.pan.value=t),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(t,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,"undefined"==typeof r){if("number"!=typeof t)return i._pos;i._pos=[t,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,o],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(t,n,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(t,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,"undefined"==typeof r){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(t,n,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;t=i[0],"undefined"==typeof n&&(r._pannerAttr={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:r._distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:r._maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:r._panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:r._refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:r._rolloffFactor})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var a=r._getSoundIds(n),s=0;s<a.length;s++)if(o=r._soundById(a[s])){var u=o._pannerAttr;u={coneInnerAngle:"undefined"!=typeof t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!=typeof t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!=typeof t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!=typeof t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:"undefined"!=typeof t.maxDistance?t.maxDistance:u.maxDistance,panningModel:"undefined"!=typeof t.panningModel?t.panningModel:u.panningModel,refDistance:"undefined"!=typeof t.refDistance?t.refDistance:u.refDistance,rolloffFactor:"undefined"!=typeof t.rolloffFactor?t.rolloffFactor:u.rolloffFactor};var l=o._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.panningModel=u.panningModel,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor):(o._pos||(o._pos=r._pos||[0,0,-.5]),e(o,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=o(r),a=n(11),s=o(a),u=n(19),l=o(u),c=n(3),p=o(c),f=n(5),d=o(f),h=n(18),y=o(h),m=n(6),v=o(m),_=n(9),b=o(_),g=n(16),O=o(g),w=n(37),k=o(w),S=n(25),P=o(S),j=n(23),x=o(j),E=n(15),C=o(E),R=n(17),M=o(R),A=n(20),T=o(A),D=n(21),N=o(D),I=n(22),B=o(I),F=n(24),L=o(F),G=n(26),U=o(G),H=n(27),W=o(H),q=n(28),z=o(q),V=n(29),Y=o(V),J=n(30),X=o(J),$=n(31),K=o($),Z=n(32),Q=o(Z),ee=n(33),te=o(ee),ne=n(35),oe=o(ne),re=n(34),ie=o(re),ae=n(36),se=o(ae),ue=n(10),le=o(ue),ce=n(4),pe=o(ce),fe=n(44),de=o(fe),he=n(45),ye=o(he),me=n(7),ve=o(me),_e=n(46),be=o(_e);window.$k=window.skoash={Component:i["default"],Screen:s["default"],Game:l["default"],Asset:p["default"],Image:d["default"],Font:y["default"],Media:v["default"],Audio:b["default"],AudioSprite:O["default"],Video:k["default"],MediaSequence:P["default"],ListItem:x["default"],Animation:C["default"],DPad:M["default"],GameEmbedder:T["default"],InteractiveItem:N["default"],Labyrinth:B["default"],MediaCollection:L["default"],Randomizer:U["default"],Repeater:W["default"],Reveal:z["default"],Score:Y["default"],ScrollArea:X["default"],Selectable:K["default"],Slider:Q["default"],Sprite:te["default"],SpriteCSS:oe["default"],SpriteAnimation:ie["default"],Timer:se["default"],Data:le["default"],JSON:pe["default"],start:de["default"],trigger:ye["default"],util:ve["default"],mixins:be["default"]},t["default"]=window.skoash},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({frame:e.frame,frameRates:[]},n.state),n.lastAnimation=Date.now(),n.setUp=n.setUp.bind(n),n}return a(t,e),u(t,[{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.props.frames&&this.setUp(this.props.frames)}},{key:"setUp",value:function(e){var t=_.isArray(this.props.duration)?this.props.duration:_.fill(Array(e),this.props.duration/e);this.setState({frameRates:t})}},{key:"animate",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],n=Date.now();if(!this.props.pause&&!this.state.paused&&this.state.started){if(!this.props.loop){if(this.props.animateBackwards&&0===this.state.frame)return void this.complete();if(this.state.frame===this.props.frames-1)return void this.complete()}if(n>this.lastAnimation+this.state.frameRates[this.state.frame]){var o=(this.state.frame+t+this.props.frames)%this.props.frames;this.lastAnimation=n,0===o&&this.props.onLoop.call(this),this.setState({frame:o})}window.requestAnimationFrame(function(){e.animate(t)})}}},{key:"start",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e.props.animate&&e.animate()})}},{key:"pause",value:function(){l(Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.setState({paused:!0})}},{key:"resume",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"resume",this).call(this),this.setState({paused:!1},function(){e.props.animate?e.animate():e.props.animateBackwards&&e.animate(-1)})}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.frame!==this.props.frame&&this.setState({frame:e.frame}),e.frames!==this.props.frames&&this.setUp(e.frames),e.animate&&e.animate!==this.props.animate?this.animate():e.animateBackwards&&e.animateBackwards!==this.props.animateBackwards&&this.animate(-1)}},{key:"getClassNames",value:function(){return(0,p["default"])(this.props.frameSelectors[this.state.frame]||"frame-"+this.state.frame,l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames()}))}}]),t}(d["default"]);h.defaultProps=_.defaults({frameSelectors:{},duration:1e3,frame:0,frames:1,hoverFrame:null,pause:!1,loop:!0,animate:!1,animateBackwards:!1,onLoop:_.noop,onUpdate:_.noop},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},l=n(13),c=n(9),p=o(c),f=n(4),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.onJSONReady=n.onJSONReady.bind(n),n}return a(t,e),s(t,[{key:"onJSONReady",value:function(){this.data=this.refs.json.getData(),_.isString(this.data)&&(this.data=JSON.parse(this.data)),this.setUp()}},{key:"complete",value:function(){this.spriteComplete[this.props.play]=!0,this.playing=!1,_.includes(this.spriteComplete,!1)||u(Object.getPrototypeOf(t.prototype),"complete",this).call(this)}},{key:"setUp",value:function(){var e=this,t=_.map(this.data.resources,function(t){return""+e.props.srcFolder+t}),n=_.map(this.data.resources,function(e){return _.nth(_.split(e,"."),1)}),o=_.reduce(this.data.spritemap,function(e,t,n){return e[n]=[1e3*t.start,1e3*(t.end-t.start)],e},{});this.spriteComplete={},_.isBoolean(this.props.complete)?this.spriteComplete=_.reduce(this.data.spritemap,function(t,n,o){return t[o]=e.props.complete||!1,t},{}):_.isObject(this.props.complete)&&(this.spriteComplete=_.reduce(this.data.spritemap,function(t,n,o){return t[o]=e.props.complete[o]||!1,t},{})),this.audio=new l.Howl({src:t,format:n,sprite:o,loop:this.props.loop,volume:this.props.volume,onend:this.complete,onload:this.ready,rate:this.props.rate}),this.props.complete===!0&&this.complete()}},{key:"bootstrap",value:function(){this.props.onBootstrap.call(this)}},{key:"componentWillReceiveProps",value:function(e){u(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),null!=e.play&&e.play!==this.props.play&&(this.sprite=e.play,this.play(e.play)),null!=e.stop&&e.stop!==this.props.stop&&(this.sprite=e.stop,this.stop(e.stop))}},{key:"render",value:function(){return React.createElement(d["default"],{ref:"json",style:{display:"none"},src:""+this.props.srcFolder+this.props.dataSrc,onReady:this.onJSONReady})}}]),t}(p["default"]);h.defaultProps=_.defaults({srcFolder:"",dataSrc:"",complete:!1},p["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function C(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:C(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},p=n(2),f=o(p),d=n(1),h=o(d),y="up",m="down",v="left",b="right",g=38,O=40,w=37,k=39,S=65,P=68,j=83,x=87,E=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.keys={},n.mousedown=n.mousedown.bind(n),n.mouseup=n.mouseup.bind(n),n.keydown=n.keydown.bind(n),n.keyup=n.keyup.bind(n),n}return s(t,e),l(t,[{key:"mousedown",value:function(e){this.updateRef(e.target.getAttribute("data-ref"))}},{key:"mouseup",value:function(e){this.updateRef(e.target.getAttribute("data-ref"),!1)}},{key:"keydown",value:function(e){this.keyaction(e,!0)}},{key:"keyup",value:function(e){this.keyaction(e,!1)}},{key:"keyaction",value:function(e,t){var n=null;e.keyCode===w||e.keyCode===S?n=v:e.keyCode===g||e.keyCode===x?n=y:e.keyCode===k||e.keyCode===P?n=b:e.keyCode!==O&&e.keyCode!==j||(n=m),n||(n=this.props.onKeyAction.call(this,e.keyCode,t)),this.updateRef(n,t)}},{key:"bootstrap",value:function(){c(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.DOM=ReactDOM.findDOMNode(this)}},{key:"start",value:function(){c(Object.getPrototypeOf(t.prototype),"start",this).call(this),this.DOM.addEventListener("mousedown",this.mousedown),this.DOM.addEventListener("mouseup",this.mouseup),this.DOM.addEventListener("mouseout",this.mouseup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}},{key:"stop",value:function(){c(Object.getPrototypeOf(t.prototype),"stop",this).call(this),this.DOM.removeEventListener("mousedown",this.mousedown),this.DOM.removeEventListener("mouseup",this.mouseup),this.DOM.removeEventListener("mouseout",this.mouseup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),this.keys={},this.updateScreenData({key:this.props.outputTarget,data:{up:!1,down:!1,left:!1,right:!1}})}},{key:"updateRef",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this.keys[e]!==t&&(t&&this.media.keydown&&this.media.keydown.play(),this.keys[e]=t,this.updateScreenData({key:this.props.outputTarget,data:r({},e,t)}))}},{key:"getClassNames",value:function(){return(0,f["default"])("d-pad",c(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",u({},this.props,{className:this.getClassNames()}),this.renderContentList("assets"),React.createElement("div",{"data-ref":y,className:y}),React.createElement("div",{"data-ref":v,className:v}),React.createElement("div",{"data-ref":m,className:m}),React.createElement("div",{"data-ref":b,className:b}))}}]),t}(h["default"]);E.defaultProps=_.defaults({outputTarget:"d-pad",onKeyAction:_.noop},h["default"].defaultProps),t["default"]=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(49),l=o(u),c=n(3),p=o(c),f=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"bootstrap",value:function(){this.font=new l["default"](this.props.name),this.font.load().then(this.ready)["catch"](this.error),this.props.complete&&this.complete()}}]),t}(p["default"]);f.defaultProps=_.defaults({complete:!0,shouldRender:!1},p["default"].defaultProps),t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function E(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},f=n(2),d=o(f),h=n(39),y=o(h),m=n(38),v=o(m),b=n(40),g=o(b),O=n(41),w=o(O),k=n(1),S=o(k),P=n(11),j=o(P),x=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,t);var n=s(this,Object.getPrototypeOf(t).call(this,e));return n.state={currentScreenIndex:0,highestScreenIndex:0,screenIndexArray:[],playingSFX:[],playingVO:[],playingBKG:[],playingVideo:null,openMenus:[],loading:!0,demo:!1,data:{},content:e.content,classes:[],screenLoads:{}},console.log(e.config),n.state.data.screens=_.map(e.screens,function(){return{}}),n.screensLength=Object.keys(e.screens).length,n.eventManager=new y["default"](n),n.deviceDetector=new v["default"](n),n.mediaManager=new g["default"](n),n.navigator=new w["default"](n),n}return u(t,e),c(t,[{key:"getState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_.invoke(e,"respond",this.state)}},{key:"demo",value:function(){this.setState({demo:!this.state.demo})}},{key:"componentWillMount",value:function(){this.eventManager.emit({name:"init"}),this.deviceDetector.detechDevice(),this.scale()}},{key:"bootstrap",value:function(){this.state.iOS||this.setState({currentScreenIndex:1}),this.collectMedia(),this.navigator.loadScreens(this.state.currentScreenIndex,!1),this.DOMNode=ReactDOM.findDOMNode(this),this.props.onBootstrap.call(this)}},{key:"ready",value:function(){var e=this;this.state.ready||this.isReady||(this.isReady=!0,this.setState({ready:!0},function(){e.eventManager.emit({name:"ready",game:e.props.config.id}),e.navigator["goto"]({index:e.state.currentScreenIndex,silent:!0}),e.onReady.call(e),e.props.onReady.call(e)}))}},{key:"resume",value:function(){this.state.playingVO.length&&this.mediaManager.fadeBackground(),this.setPause(!1)}},{key:"pause",value:function(){this.setPause(!0)}},{key:"setPause",value:function(e){var t=this,n=e?"pause":"resume";this.setState({paused:e},function(){_.each(t.state.playingBKG,function(e){return _.invoke(e,n)}),_.invoke(t.refs["screen-"+t.state.currentScreenIndex],n)})}},{key:"getBackgroundIndex",value:function(e,t){return this.props.getBackgroundIndex.call(this,e,t)}},{key:"scale",value:function(){this.setState({scale:window.innerWidth/this.props.config.dimensions.width})}},{key:"emit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.eventManager.emit(e)}},{key:"getGame",value:function(e){this.props.config.id===e.id&&_.invoke(e,"respond",this)}},{key:"getData",value:function(e){this.props.getData.call(this,e)}},{key:"passData",value:function(e){return"function"!=typeof e.respond?this.props.passData.apply(this,arguments):void e.respond(this.props.passData.apply(this,arguments))}},{key:"load",value:function(e){if(e.game===this.props.config.id&&e.version===this.props.config.version&&e.highestScreenIndex){if(e.highestScreenIndex===this.screensLength-1)return;this.navigator.loadScreens(e.highestScreenIndex)}}},{key:"quit",value:function(){this.eventManager.emit({name:"exit",game:this.props.config.id})}},{key:"updateState",value:function(e){"string"==typeof e.path?(console.warn("As of skoash 1.1.1 please trigger updateScreenData directly"),this.updateScreenData(e)):_.isArray(e.path)&&(console.warn("As of skoash 1.1.1 please trigger updateGameData directly"),this.updateGameData(e))}},{key:"updateGameData",value:function(e){var t=e.keys||e.key||e.path;t&&(e.data=_.setWith({},t,e.data,Object)),this.updateData(e)}},{key:"updateScreenData",value:function(e){e.keys=_.filter(["screens",this.state.currentScreenIndex].concat(e.keys).concat(e.key||e.path),_.identity),this.updateGameData(e)}},{key:"updateData",value:function(e){var t=this,n=_.merge(this.state.data,e.data);this.setState({data:n},function(){_.invoke(e.callback,"call",t)})}},{key:"checkComplete",value:function(){_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"checkComplete")}},{key:"screenComplete",value:function(e){this.props.screenComplete.call(this,e)}},{key:"getCurrentScreen",value:function(){return this.refs["screen-"+this.state.currentScreenIndex]}},{key:"componentWillReceiveProps",value:function(e){p(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.screens&&e.screens!==this.props.screens&&(this.screensLength=Object.keys(e.screens).length),e.content&&e.content!==this.props.content&&this.setState({content:e.content})}},{key:"getClassNames",value:function(){var e=this.refs["screen-"+this.state.currentScreenIndex],n=e?"SCREEN-"+e.props.id:"";return d["default"].apply(void 0,["pl-game",r({SFX:this.state.playingSFX.length,"VOICE-OVER":this.state.playingVO.length,MENU:this.state.openMenus.length},"MENU-"+this.state.openMenus[0],this.state.openMenus[0]),"SCREEN-"+this.state.currentScreenIndex,n].concat(i(this.state.classes),[p(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this)]))}},{key:"getStyles",value:function(){var e="scale3d("+this.state.scale+","+this.state.scale+",1)",t=this.state.scale<1?"0px 0px 0px":"50% 0px 0px";return{transform:e,WebkitTransform:e,transformOrigin:t,WebkitTransformOrigin:t}}},{key:"renderScreens",value:function(){var e=this;return _.map(Object.keys(this.props.screens),function(t,n){var o=e.state.data.screens[t],r=_.defaults({data:o,load:e.state.screenLoads[t],prevButtonClassName:_.isString(e.props.prevButtonClassName)?e.props.prevButtonClassName:e.props.prevButtonClassName[t],nextButtonClassName:_.isString(e.props.nextButtonClassName)?e.props.nextButtonClassName:e.props.nextButtonClassName[t],gameState:e.state,index:n},e.props.screens[t].props);return!r.load&&_.isNumber(_.parseInt(t))&&Math.abs(e.state.currentScreenIndex-n)>e.props.screenBufferAmount?null:e.props.screens[t](r,"screen-"+t,t,_.get(e,"state.content.screens."+t),e.state,o)})}},{key:"renderMenuScreens",value:function(){var e=this;return _.map(this.props.menus,function(t,n){return React.createElement(t.type,l({},t.props,{gameState:e.state,key:n,index:n,ref:"menu-"+n}))})}},{key:"render",value:function(){return React.createElement("div",{className:this.getClassNames(),style:this.getStyles()},this.renderContentList("assets"),this.props.renderMenu.call(this),this.renderScreens(),this.renderMenuScreens(),this.props.renderExtras.call(this),this.renderContentList("loader"))}}]),t}(S["default"]);x.defaultProps=_.defaults({componentName:"skoash-game",getBackgroundIndex:function(){return 0},passData:_.noop,screenBufferAmount:3,screens:[function(e,t,n,o,r,i){return React.createElement(j["default"],l({},e,{ref:t,key:n}))}],menus:{Screen:j["default"]},ignoreReady:!0,renderMenu:function(){return React.createElement("div",{className:"menu"},React.createElement("button",{className:"close",onClick:this.navigator.openMenu.bind(this,{id:"quit"})}))},renderExtras:_.noop,getGotoOpts:_.identity,getTriggerEvents:_.identity,triggerReady:!1,getData:function(e){return e.name="getData",this.eventManager.emit(e)},prevButtonClassName:"",nextButtonClassName:"",screenComplete:function(e){var t=this.getCurrentScreen();!e.silent&&t&&t.props.id===e.screenID&&this.playMedia("screen-complete")}},S["default"].defaultProps),t["default"]=x},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function d(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(1),p=o(c),f=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.respond=n.respond.bind(n),n.onLoad=n.onLoad.bind(n),n}return a(t,e),u(t,[{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.gameNode=ReactDOM.findDOMNode(this.refs.game),this.gameNode.addEventListener("game-event",this.respond)}},{key:"respond",value:function(e){e.ready?this.phaserReady():e.complete?this.complete():e.updateGameState?this.updateGameState(e.updateGameState):e.updateGameData?this.updateGameData(e.updateGameData):e.updateScreenData&&this.updateScreenData(e.updateScreenData),this.props.onRespond.call(this,e);
}},{key:"phaserReady",value:function(){this.setState({phaserReady:!0})}},{key:"onLoad",value:function(){var e=this;this.emitEvent({name:"focus"}),this.setState({loaded:!0},function(){e.props.onLoad.call(e)})}},{key:"pause",value:function(){l(Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.state.phaserReady&&this.emitEvent({name:"pause"})}},{key:"resume",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.props.pause&&!e||(l(Object.getPrototypeOf(t.prototype),"resume",this).call(this),this.emitEvent({name:"resume"}))}},{key:"emitEvent",value:function(e){var t=new Event("skoash-event");this.state.loaded&&this.state.phaserReady&&(t.name=e.name,t.data=e,this.gameNode.contentWindow.dispatchEvent(t))}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.controller&&this.emitEvent({name:"controller-update",controller:e.controller}),e.data&&this.emitEvent({name:"data-update",data:e.data}),e.state&&e.state!==this.props.state&&this.emitEvent({name:"state-update",data:e.state}),e.pause&&e.pause!==this.props.pause&&this.pause(),e.resume&&e.resume!==this.props.resume&&this.resume(!0)}},{key:"getStyle",value:function(){return _.defaults({},this.props.style,{pointerEvents:"none"})}},{key:"render",value:function(){return React.createElement("iframe",s({},this.props,{ref:"game",onLoad:this.onLoad,style:this.getStyle()}))}}]),t}(p["default"]);f.defaultProps=_.defaults({complete:!1,checkComplete:!1,onLoad:_.noop,onRespond:_.noop},p["default"].defaultProps),t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function h(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:h(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},l=n(2),c=o(l),p=n(1),f=o(p),d=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({enabled:!0},n.state),n}return a(t,e),s(t,[{key:"enable",value:function(){return this.state.enabled?void 0:(this.setState({enabled:!0}),this.media.enable&&this.media.enable.play(),this.props.onEnable.call(this))}},{key:"disable",value:function(){return this.state.enabled?(this.setState({enabled:!1}),this.media.disable&&this.media.disable.play(),this.props.onDisable.call(this)):void 0}},{key:"interact",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.canInteract()&&(this.props.onInteract.call(this,e),this.media.interact&&this.media.interact.play())}},{key:"canInteract",value:function(){return this.state.enabled&&this.props.canInteract.call(this)}},{key:"bootstrap",value:function(){u(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.DOM=ReactDOM.findDOMNode(this)}},{key:"getClassNames",value:function(){return(0,c["default"])("interactive-item",{ENABLED:this.state.enabled},u(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}}]),t}(f["default"]);d.defaultProps=_.defaults({onEnable:_.noop,onDisable:_.noop,onInteract:_.noop,canInteract:function(){return!0}},f["default"].defaultProps),t["default"]=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function w(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h="map",y="canvas",m="image",v="player",b="buffer",g="context",O=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.update=_.throttle(n.update.bind(n),10),n.playCollideSound=_.throttle(n.playCollideSound.bind(n),500),n}return a(t,e),u(t,[{key:"onReady",value:function(){var e=this;this[m]=ReactDOM.findDOMNode(this.refs[m]),this[v]=ReactDOM.findDOMNode(this.refs[v]),this[b]=ReactDOM.findDOMNode(this.refs[y]),this[h]=new Image,this[h].crossOrigin="Anonymous",this[h].width=this[m].width,this[h].height=this[m].height,this[h].src=this.refs[h].props.src,this[g]=this[b].getContext("2d"),this.setState({playerX:this.props.startX,playerY:this.props.startY}),this.items=[],this.enemies=[],_.each(this.refs,function(t,n){n.indexOf("items-")?n.indexOf("enemies-")||e.enemies.push(t):e.items.push(t)})}},{key:"start",value:function(){l(Object.getPrototypeOf(t.prototype),"start",this).call(this),this.setState({playerX:this.props.startX,playerY:this.props.startY}),this.incompleteRefs(),_.each(this.items,function(e){return e.enable()}),_.each(this.enemies,function(e){return e.enable()})}},{key:"update",value:function(){var e,t,n,o=this,r=this.state.playerX,i=this.state.playerY;this[v]&&this.state.started&&(this.props.input.up&&(i-=this.props.speed),this.props.input.down&&(i+=this.props.speed),this.props.input.left&&(r-=this.props.speed),this.props.input.right&&(r+=this.props.speed),e=_.some(this.props.input,function(e){return e}),t=this.getCollidingObject(this.enemies,r,i),n=this.getCollidingObject(this.items,r,i),this.isColliding(r,i)?(this.playCollideSound(),this.props.onCollide.call(this)):t?this.props.onCollideEnemy.call(this,t):(n&&this.props.onCollideItem.call(this,n),this.setState({playerX:r,playerY:i},function(){e&&window.requestAnimationFrame(o.update)})))}},{key:"isColliding",value:function(e,t){var n,o;return n=this[m].getBoundingClientRect(),o=this[v].getBoundingClientRect(),this[b].width=n.width/this.props.scale,this[b].height=n.height/this.props.scale,this[b].width&&this[b].height?(this[g].clearRect(0,0,this[b].width,this[b].height),this[g].drawImage(this[h],0,0,this[b].width,this[b].height),!(this[g].getImageData(e+o.width/this.props.scale/2,t,1,1).data[0]&&this[g].getImageData(e+o.width/this.props.scale,t+o.width/this.props.scale/2,1,1).data[0]&&this[g].getImageData(e+o.width/this.props.scale/2,t+o.height/this.props.scale,1,1).data[0]&&this[g].getImageData(e,t+o.height/this.props.scale/2,1,1).data[0])):!1}},{key:"playCollideSound",value:function(){this.playMedia("collide")}},{key:"getCollidingObject",value:function(e,t,n){var o=this,r={width:this[v].offsetWidth,height:this[v].offsetHeight};return r.width&&r.height?_.find(e,function(e){return e.canInteract()&&o.doIntersect(t,n,r,e)}):void 0}},{key:"doIntersect",value:function(e,t,n,o){var r={left:o.DOM.offsetLeft,top:o.DOM.offsetTop,width:o.DOM.offsetWidth,height:o.DOM.offsetHeight};return skoash.util.doIntersect([{x:e,y:t},{x:e+n.width,y:t},{x:e+n.width,y:t+n.height},{x:e,y:t+n.height}],[{x:r.left,y:r.top},{x:r.left+r.width,y:r.top},{x:r.left+r.width,y:r.top+r.height},{x:r.left,y:r.top+r.height}])}},{key:"getPlayerStyle",value:function(){return{left:this.state.playerX,top:this.state.playerY}}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),window.requestAnimationFrame(this.update)}},{key:"getClassNames",value:function(){return(0,p["default"])("labyrinth",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames()}),React.createElement("canvas",{ref:y,className:y}),React.createElement(skoash.Image,{ref:h,className:h,src:this.props.map,crossOrigin:"Anonymous"}),React.createElement(skoash.Image,{ref:m,className:m,src:this.props.img,crossOrigin:"Anonymous"}),this.renderContentList("assets"),this.renderContentList("items"),this.renderContentList("enemies"),React.createElement("div",{ref:v,className:v,style:this.getPlayerStyle()}))}}]),t}(d["default"]);O.defaultProps=_.defaults({img:"",map:"",input:{},startX:0,startY:0,speed:1,scale:1,items:[],enemies:[],onCollide:_.noop,onCollideEnemy:function(e){e.interact()},onCollideItem:function(e){e.interact()}},d["default"].defaultProps),t["default"]=O},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=o(s),l=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),t}(u["default"]);l.defaultProps=_.defaults({checkComplete:!1,completeIncorrect:!0,type:"li"},u["default"].defaultProps),t["default"]=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function f(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},l=n(1),c=o(l),p=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),s(t,[{key:"play",value:function(e){this.refs[e]&&(this.refs[e].play(),this.props.onPlay.call(this,e))}},{key:"componentWillReceiveProps",value:function(e){u(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),null!=e.play&&e.play!==!1&&e.play!==this.props.play&&e.play.split(" ").forEach(this.play.bind(this))}}]),t}(c["default"]);p.defaultProps=_.defaults({onPlay:_.noop},c["default"].defaultProps),t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function d(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(1),p=o(c),f=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.playNext=n.playNext.bind(n),n}return a(t,e),u(t,[{key:"start",value:function(){this.props.silentOnStart||this.state.started&&!this.props.playMultiple||this.play()}},{key:"complete",value:function(){l(Object.getPrototypeOf(t.prototype),"complete",this).call(this),this.setState({started:!1})}},{key:"play",value:function(){this.setState({started:!0}),this.refs[0]&&(this.playingIndex=0,this.refs[0].play()),this.props.checkComplete!==!1&&this.checkComplete()}},{key:"playNext",value:function(){var e=this.refs[++this.playingIndex];e&&this.state.started&&e.play()}},{key:"renderContentList",value:function(){var e=this,t=[].concat(this.props.children);return t.map(function(t,n){return React.createElement(t.type,s({},t.props,{ref:n,key:n,onComplete:function(){e.playNext(),_.invoke(t,"props.onComplete.call",this,this)}}))})}}]),t}(p["default"]);f.defaultProps=_.defaults({silentOnStart:!1,playMultiple:!1},p["default"].defaultProps),t["default"]=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"getAll",value:function(){return _.shuffle(this.props.bin)}},{key:"get",value:function(){var e,t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],n=[];for(this.props.remain&&this.state.bin&&(n=this.state.bin);n.length<t;)n=n.concat(_.shuffle(this.props.bin));return e=n.splice(0,t),this.props.remain&&this.setState({bin:n}),e}},{key:"getClassNames",value:function(){return(0,p["default"])("randomizer",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderBin",value:function(){return _.map(this.props.bin,function(e,t){var n=e.ref||e.props&&e.props["data-ref"]||t;return React.createElement(e.type,s({},e.props,{"data-ref":n,ref:n,key:t}))})}},{key:"render",value:function(){return React.createElement("ul",{className:this.getClassNames()},this.renderBin())}}]),t}(d["default"]);h.defaultProps=_.defaults({bin:[],remain:!1,shouldComponentUpdate:function(){return!1},shouldStart:!1},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=o(l),p=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),u(t,[{key:"renderContentList",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?"children":arguments[0],t=[],n=0;n<this.props.amount;n++)t.push(React.createElement(this.props.item.type,s({key:n,ref:_.get(this,"props.refs."+n,e+"-"+n)},this.props.item.props,this.props.props[n])));return t}}]),t}(c["default"]);p.defaultProps=_.defaults({amount:1,item:React.createElement("div",null),props:[]},c["default"].defaultProps),t["default"]=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={openReveal:"",currentlyOpen:[]},n.index=0,n.close=n.close.bind(n),n}return a(t,e),u(t,[{key:"incomplete",value:function(){this.setState({openReveal:"",currentlyOpen:[]}),l(Object.getPrototypeOf(t.prototype),"incomplete",this).call(this)}},{key:"open",value:function(e){var t=this.props.openMultiple?this.state.currentlyOpen.concat(e):[e];this.setState({open:!0,openReveal:e,currentlyOpen:t}),this.playMedia("open-sound"),this.props.completeOnOpen?this.complete():_.each(this.refs,function(t,n){n===e&&_.invoke(t,"complete")}),this.props.autoClose&&setTimeout(this.close,2e3),this.props.openTarget&&this.updateScreenData({key:this.props.openTarget,data:{open:""+e,close:!1}}),this.props.onOpen.call(this,e)}},{key:"close",value:function(){var e,t,n,o,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e=this.state.openReveal,t=this.state.currentlyOpen||[],t.splice(t.indexOf(e),1),o=t.length>0,n=o?t[t.length-1]:"",this.setState({open:o,openReveal:n,currentlyOpen:t}),r.silent||this.playMedia("close-sound"),this.props.openTarget&&this.updateScreenData({key:this.props.openTarget,data:{open:null,close:!1}}),this.props.onClose.call(this,e)}},{key:"start",value:function(){l(Object.getPrototypeOf(t.prototype),"start",this).call(this),null!=this.props.openOnStart?this.open(this.props.openOnStart):this.props.start&&"function"==typeof this.props.start?this.props.start.call(this):this.close({silent:!0})}},{key:"renderAssetsHelper",value:function(e,t){var n=e.ref||e.props["data-ref"]||"asset-"+t;return React.createElement(e.type,s({},e.props,{"data-ref":t,ref:n,key:t}))}},{key:"renderAssets",value:function(){return this.props.assets?this.props.assets.map(this.renderAssetsHelper):null}},{key:"renderListHelper",value:function(e,t){var n=e.ref||e.props["data-ref"]||t;return React.createElement(e.type,s({},e.props,{type:"li",className:this.getClass(e,t),"data-ref":n,ref:n,key:t}))}},{key:"renderList",value:function(){var e=this.props.list;return e.map(this.renderListHelper)}},{key:"componentWillReceiveProps",value:function(e){if(l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),null!=e.openReveal&&e.openReveal!==this.props.openReveal&&this.open(e.openReveal),e.closeReveal&&e.closeReveal!==this.props.closeReveal)if(e.closeReveal===!0)this.close();else if(Number.isInteger(e.closeReveal))for(var n=0;n<e.closeReveal;n++)this.close()}},{key:"getClass",value:function(e,t){var n="",o=this.state.currentlyOpen||[];return e.props.className&&(n=e.props.className),-1===o.indexOf(t)&&-1===o.indexOf(""+t)&&-1===o.indexOf(e.props["data-ref"])&&-1===o.indexOf(e.ref)||(n=(0,p["default"])(n,"OPEN")),n}},{key:"getClassNamesHelper",value:function(e,t){return e+" open-"+t}},{key:"getClassNames",value:function(){var e,n="open-none";return this.state.open&&(n=_.reduce(this.state.currentlyOpen,this.getClassNamesHelper,"")),e=(0,p["default"])("reveal",n,l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderCloseButton",value:function(){return this.props.hideCloseButton?null:this.props.renderCloseButton.call(this)}},{key:"render",value:function(){return React.createElement("div",{className:this.getClassNames()},this.renderAssets(),React.createElement("div",null,React.createElement("ul",null,this.renderList()),this.renderCloseButton()))}}]),t}(d["default"]);h.defaultProps=_.defaults({list:[React.createElement("li",null),React.createElement("li",null),React.createElement("li",null),React.createElement("li",null)],openMultiple:!1,onOpen:_.noop,onClose:_.noop,closeButtonContent:null,renderCloseButton:function(){return React.createElement("button",{className:(0,p["default"])("close-reveal",this.props.prevButtonClassName),onClick:this.close.bind(this)},this.props.closeButtonContent)}},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={score:0},n.checkComplete=n.checkComplete.bind(n),n}return a(t,e),u(t,[{key:"checkComplete",value:function(){this.props.checkComplete&&this.state.ready&&_.isFinite(this.props.max)&&(this.state.score>=this.props.max||this.props.correct>=this.props.max)&&!this.state.complete&&this.complete()}},{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setState({score:this.props.startingScore})}},{key:"complete",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"complete",this).call(this),setTimeout(function(){e.props.resetOnComplete&&e.setScore({correct:0,incorrect:0})},this.props.completeDelay)}},{key:"checkScore",value:function(e){_.isFinite(e.max)&&(this.state.score>=e.max&&(!this.state.complete||e.multipleCompletes)?this.complete():this.state.complete&&!e.complete&&this.incomplete())}},{key:"up",value:function(e){if(e=_.isFinite(e)?e:_.isFinite(this.props.increment)?this.props.increment:1,!_.isFinite(e))throw"increment must be finite";this.updateScore(e)}},{key:"down",value:function(e){if(e=_.isFinite(e)?e:_.isFinite(this.props.downIncrement)?this.props.downIncrement:_.isFinite(this.props.increment)?this.props.increment:1,!_.isFinite(e))throw"increment must be finite";this.updateScore(-1*e)}},{key:"updateScore",value:function(e){var t=this;this.setState({score:this.state.score+e},function(){t.updateScreenData({key:t.props.dataTarget,data:{score:t.state.score}}),t.checkScore(t.props),t.props.onUpdateScore.call(t,t.state.score)})}},{key:"setScore",value:function(e){var t,n,o,r=this;_.isFinite(e)?o=e:(t=_.isFinite(e.increment)?e.increment:1,n=_.isFinite(e.downIncrement)?e.downIncrement:_.isFinite(e.increment)?e.increment:1,o=t*e.correct-n*e.incorrect),this.setState({score:o},function(){r.checkScore(e),r.props.onUpdateScore.call(r,o)})}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),(e.setScore||e.correct!==this.props.correct||e.incorrect!==this.props.incorrect)&&this.setScore(e)}},{key:"getClassNames",value:function(){return(0,p["default"])("score","score-"+this.state.score,l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames(),"data-max":this.props.max,"data-score":this.state.score,score:this.state.score}),this.props.leadingContent,React.createElement("span",null,this.state.score),this.props.children)}}]),t}(d["default"]);h.defaultProps=_.defaults({checkComplete:!1,startingScore:0,correct:0,incorrect:0,setScore:!1,onUpdateScore:_.noop},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function O(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:O(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h="image",y="area",m="content",v="scrollbar",b="scroller",g=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({startY:0,endY:0,zoom:1},n.state),n.setZoom=n.setZoom.bind(n),n.mouseDown=n.mouseDown.bind(n),n.mouseUp=n.mouseUp.bind(n),n.moveEvent=n.moveEvent.bind(n),n.touchStart=n.touchStart.bind(n),n.touchEnd=n.touchEnd.bind(n),n}return a(t,e),u(t,[{key:"start",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e[y].scrollTop=0,e.setState({startY:0,endY:0})})}},{key:"bootstrap",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setZoom(),window.addEventListener("resize",this.setZoom),this[y]=ReactDOM.findDOMNode(this.refs[y]),this[m]=ReactDOM.findDOMNode(this.refs[m]),this[v]=ReactDOM.findDOMNode(this.refs[v]),this[b]=ReactDOM.findDOMNode(this.refs[b]),this[y].scrollTop=0,this[y].addEventListener("scroll",function(t){var n,o;t.target&&!e.dragging&&(n=t.target.scrollTop,o=(e[v].offsetHeight-e.props.scrollbarHeight)*(n/(e[m].offsetHeight-e[y].offsetHeight)),e.setState({startY:0,endY:o}))}),this[b].addEventListener("mousedown",this.mouseDown),this[b].addEventListener("touchstart",this.touchStart)}},{key:"setZoom",value:function(){var e=this;skoash.trigger("getState").then(function(t){e.setState({zoom:t.scale})})}},{key:"mouseDown",value:function(e){this.startEvent(e,this.attachMouseEvents)}},{key:"touchStart",value:function(e){this.startEvent(e,this.attachTouchEvents)}},{key:"startEvent",value:function(e,t){var n,o;e.target===this[b]&&(this.dragging=!0,e=e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e,o=this.getEndY(e),n=this.state.startY||o,this.setState({startY:n,endY:o}),"function"==typeof t&&t.call(this))}},{key:"getEndY",value:function(e){return Math.min(Math.max(e.pageY/this.state.zoom,this.state.startY),this.state.startY+this[v].getBoundingClientRect().height/this.state.zoom-this.props.scrollbarHeight);
}},{key:"attachMouseEvents",value:function(){window.addEventListener("mousemove",this.moveEvent),window.addEventListener("mouseup",this.mouseUp)}},{key:"attachTouchEvents",value:function(){window.addEventListener("touchmove",this.moveEvent),window.addEventListener("touchend",this.touchEnd)}},{key:"moveEvent",value:function(e){var t;e=e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e,t=this.getEndY(e),this[y].scrollTop=(t-this.state.startY)*(this[m].offsetHeight-this[y].offsetHeight)/(this[v].offsetHeight-this.props.scrollbarHeight),this.setState({endY:t})}},{key:"mouseUp",value:function(){this.dragging=!1,this.detachMouseEvents()}},{key:"touchEnd",value:function(){this.dragging=!1,this.detachTouchEvents()}},{key:"detachMouseEvents",value:function(){window.removeEventListener("mousemove",this.moveEvent),window.removeEventListener("mouseup",this.mouseUp)}},{key:"detachTouchEvents",value:function(){window.removeEventListener("touchmove",this.moveEvent),window.removeEventListener("touchend",this.touchEnd)}},{key:"getScrollerStyle",value:function(){return{backgroundImage:"url("+this.props.img+")",top:this.state.endY-this.state.startY}}},{key:"getClassNames",value:function(){return(0,p["default"])("scroll-area",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,s({},this.props,{className:this.getClassNames()}),React.createElement(skoash.Image,{ref:h,className:"hidden",src:this.props.img}),React.createElement("div",{ref:y,className:y},React.createElement("div",{ref:m,className:m},this.renderContentList())),React.createElement("div",{ref:v,className:v},React.createElement("div",{ref:b,className:b,style:this.getScrollerStyle()}))):null}}]),t}(d["default"]);g.defaultProps=_.defaults({img:"",scrollbarHeight:100},d["default"].defaultProps),t["default"]=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={classes:{},selectFunction:n.select},n}return a(t,e),u(t,[{key:"start",value:function(){var e,n=this.state.classes;l(Object.getPrototypeOf(t.prototype),"start",this).call(this),this.props.resetClassesOnStart&&(n={}),e="HIGHLIGHTED"===this.props.selectClass?this.highlight:this.select,this.props.selectOnStart&&(n[this.props.selectOnStart]=this.props.selectClass),this.setState({started:!0,classes:n,selectFunction:e})}},{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.refs.bin&&this.setState({list:this.refs.bin.getAll()})}},{key:"incompleteRefs",value:function(){l(Object.getPrototypeOf(t.prototype),"incompleteRefs",this).call(this),this.setState({classes:{}})}},{key:"selectHelper",value:function(e,t){var n,o,r,i;if("string"==typeof e)o=e;else{if(r=e.target.closest("LI"),!r)return;o=r.getAttribute("data-ref")}n=this.refs[o],i=n&&n.props&&n.props.correct||!this.props.answers||!this.props.answers.length||-1!==this.props.answers.indexOf(o),this.props.allowDeselect&&t[o]?delete t[o]:i&&(t[o]=this.props.selectClass),this.setState({classes:t}),this.props.onSelect.call(this,o,i),this.props.chooseOne&&this.complete(),this.props.dataTarget&&this.updateScreenData({key:this.props.dataTarget,data:{target:n}}),this.props.completeListOnClick&&_.each(this.refs,function(e,t){t===o&&_.invoke(e,"complete")})}},{key:"select",value:function(e){var t=[];this.selectHelper(e,t)}},{key:"highlight",value:function(e){var t=this.state.classes;this.selectHelper(e,t)}},{key:"getClass",value:function(e,t){return(0,p["default"])(t.props.className,this.state.classes[e],this.state.classes[t.props["data-ref"]],this.state.classes[t.props["data-key"]])}},{key:"getClassNames",value:function(){return(0,p["default"])("selectable",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.select&&e.select!==this.props.select&&this.state.selectFunction.call(this,e.select)}},{key:"renderBin",value:function(){return this.props.bin?React.createElement(this.props.bin.type,s({},this.props.bin.props,{ref:"bin"})):null}},{key:"renderListHelper",value:function(e,t){var n=e.props["data-ref"]||t,o=e.ref||e.props.id||n,r=e.props.message||""+t;return React.createElement(e.type,s({},e.props,{type:"li",className:this.getClass(t,e),message:r,"data-message":r,"data-ref":n,ref:o,key:t}))}},{key:"renderList",value:function(){var e=this.props.list||this.state.list||[];return _.map(e,this.renderListHelper)}},{key:"render",value:function(){return React.createElement("div",null,this.renderBin(),React.createElement("ul",{className:this.getClassNames(),onClick:this.state.selectFunction.bind(this)},this.renderList()))}}]),t}(d["default"]);h.defaultProps=_.defaults({selectClass:"SELECTED",completeListOnClick:!0,onSelect:_.noop,resetClassesOnStart:!1},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function g(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},p=n(2),f=o(p),d=n(1),h=o(d),y="area",m="content",v="horizontal",b=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({firstSlide:0},n.state),n.prev=n.prev.bind(n),n.next=n.next.bind(n),n.getContentStyle=n.getContentStyle.bind(n),n}return s(t,e),l(t,[{key:"prev",value:function(){this.changeSlide(-1*this.props.increment)}},{key:"next",value:function(){this.changeSlide(this.props.increment)}},{key:"componentDidUpdate",value:function(){this.props.orientation===v?this.adjust=document.getElementsByClassName("slider")[0].getElementsByClassName(m)[0].clientWidth/this.props.children.length:this.adjust=document.getElementsByClassName("slider")[0].getElementsByClassName(m)[0].clientHeight/this.props.children.length}},{key:"changeSlide",value:function(e){var t;t=this.props.loop&&1===this.props.display?(this.state.firstSlide+e+this.props.children.length)%this.props.children.length:Math.min(Math.max(this.state.firstSlide+e,0),this.props.children.length-this.props.display),this.setState({firstSlide:t})}},{key:"getContentStyle",value:function(){return this.props.orientation===v?{marginLeft:this.state.firstSlide*this.adjust*-1+"px"}:{marginTop:this.state.firstSlide*this.adjust*-1+"px"}}},{key:"getClassNames",value:function(){return(0,f["default"])("slider",c(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderContentList",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?"children":arguments[0],n=[].concat(this.props[t]);return n.map(function(n,o){var i,a,s,l;return n?(a=n.ref||n.props&&n.props["data-ref"]||t+"-"+o,s=o>=e.state.firstSlide&&o<e.state.firstSlide+e.props.display?1:0,l=e.props.orientation===v?"left":"top",React.createElement(n.type,u({gameState:e.props.gameState},n.props,{ref:a,key:o,style:(i={},r(i,l,100*o+"%"),r(i,"opacity",s),i)}))):void 0})}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,u({},this.props,{className:this.getClassNames()}),React.createElement("button",{className:"prev-slide",onClick:this.prev}),React.createElement("div",{className:y},React.createElement("div",{className:m,style:this.getContentStyle()},this.renderContentList())),React.createElement("button",{className:"next-slide",onClick:this.next})):null}}]),t}(h["default"]);b.defaultProps=_.defaults({loop:!0,display:1,orientation:v,increment:1},h["default"].defaultProps),t["default"]=b},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function g(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=n(5),y=o(h),m=n(4),v=o(m),b=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({frame:e.frame},n.state),n.lastAnimation=Date.now(),n.onJSONReady=n.onJSONReady.bind(n),n}return a(t,e),u(t,[{key:"onJSONReady",value:function(){this.data=this.refs.json.getData(),this.setUp(this.props)}},{key:"setUp",value:function(e){var t=this,n=void 0,o=void 0,r=void 0,i=void 0;if(this.image=e.src+"."+e.extension,e.frames?(this.frames=e.frames,this.data={},this.imageRef=ReactDOM.findDOMNode(this.refs.image),this.imageRef.onload=function(){t.checkReady(),t.update(e),e.animate?t.animate():e.animateBackwards&&t.animate(-1)},this.imageRef.src=this.image):this.data&&this.data.frames&&(this.frames=this.data.frames.length,this.checkReady(),this.update(e),r=_.reduce(this.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.x)},1/0),i=_.reduce(this.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.y)},1/0),n=_.reduce(this.data.frames,function(e,t){return Math.max(e,t.spriteSourceSize.x+t.spriteSourceSize.w-r)},0),o=_.reduce(this.data.frames,function(e,t){return Math.max(e,t.spriteSourceSize.y+t.spriteSourceSize.h-i)},0),this.setState({maxWidth:n,maxHeight:o,minX:r,minY:i}),e.animate?this.animate():e.animateBackwards&&this.animate(-1)),this.frameRates=[],_.isArray(e.duration))for(var a=0;a<this.frames;a++)this.frameRates.push(e.duration[a]);else for(var s=0;s<this.frames;s++)this.frameRates.push(e.duration/this.frames)}},{key:"update",value:function(e){var t=this,n=void 0,o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0;e=e||this.props,e.frames?(n=0,o=0,a=this.imageRef.naturalWidth/e.frames,s=this.imageRef.naturalHeight,u=a,l=s,r="-"+this.state.frame*a+"px 0px",i=this.imageRef.naturalWidth+"px "+this.imageRef.naturalHeight+"px"):this.data&&this.data.frames&&(this.frameData=this.data.frames[this.state.frame],n=this.frameData.spriteSourceSize.y,o=this.frameData.spriteSourceSize.x,r="-"+this.frameData.frame.x+"px -"+this.frameData.frame.y+"px",i=this.data.meta.size.w+"px "+this.data.meta.size.h+"px",a=this.frameData.frame.w,s=this.frameData.frame.h,u=this.state.maxWidth,l=this.state.maxHeight),this.setState({styleTop:n,styleLeft:o,backgroundPosition:r,backgroundSize:i,width:a,height:s,maxWidth:u,maxHeight:l},function(){e.onUpdate.call(t)})}},{key:"bootstrap",value:function(){l(Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setUp(this.props),null!=this.props.hoverFrame&&this.setUpHover(this.props)}},{key:"setUpHover",value:function(e){var t=this;this.refs.view.addEventListener("mouseover",function(){t.setState({frame:e.hoverFrame},function(){t.update(e)})}),this.refs.view.addEventListener("mouseout",function(){t.setState({frame:e.frame},function(){t.update(e)})})}},{key:"ready",value:function(){this.data&&l(Object.getPrototypeOf(t.prototype),"ready",this).call(this)}},{key:"animate",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],n=Date.now(),o=void 0;if(!(this.props["static"]||this.props.pause||this.state.paused)&&this.state.started){if(!this.props.loop){if(this.props.animateBackwards&&0===this.state.frame)return void this.complete();if(this.state.frame===this.frames-1)return void this.complete()}n>this.lastAnimation+this.frameRates[this.state.frame]&&(this.lastAnimation=n,o=(this.state.frame+t+this.frames)%this.frames,0===o&&this.props.onLoop.call(this),this.setState({frame:o},function(){e.update(e.props)})),window.requestAnimationFrame(function(){e.animate(t)})}}},{key:"start",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e.props.animate&&e.animate()})}},{key:"pause",value:function(){l(Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.setState({paused:!0})}},{key:"resume",value:function(){var e=this;l(Object.getPrototypeOf(t.prototype),"resume",this).call(this),this.setState({paused:!1},function(){e.props.animate?e.animate():e.props.animateBackwards&&e.animate(-1)})}},{key:"componentWillReceiveProps",value:function(e){var n=this;l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.src===this.props.src&&e.frames===this.props.frames||this.setUp(e),e.frame!==this.props.frame&&this.setState({frame:e.frame},function(){n.update(e)}),e.animate&&e.animate!==this.props.animate?this.animate():e.animateBackwards&&this.animate(-1)}},{key:"getContainerStyle",value:function(){var e=void 0,t=void 0;return this.props["static"]||(e=this.state.maxWidth,t=this.state.maxHeight),{display:"inline-block",width:e,height:t}}},{key:"getStyle",value:function(){var e=void 0,t=void 0,n=void 0;return this.props["static"]||(e="absolute",t=this.state.styleTop-this.state.minY||void 0,n=this.state.styleLeft-this.state.minX||void 0),_.defaults({position:e,top:t,left:n,backgroundImage:"url("+this.props.src+"."+this.props.extension+")",backgroundRepeat:"no-repeat",backgroundPosition:this.state.backgroundPosition,backgroundSize:this.state.backgroundSize,width:this.state.width,height:this.state.height},this.props.style)}},{key:"getClassNames",value:function(){return(0,p["default"])("sprite",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderJSON",value:function(){return this.props.frames?null:React.createElement(v["default"],{ref:"json",src:this.props.src+"."+this.props.dataExtension,onReady:this.onJSONReady})}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames(),style:this.getContainerStyle()}),React.createElement(y["default"],{className:"hidden",ref:"image",src:this.image}),this.renderJSON(),React.createElement("div",{ref:"view",className:"view",style:this.getStyle()}))}}]),t}(d["default"]);b.defaultProps=_.defaults({src:"",extension:"png",dataExtension:"json",duration:1e3,frame:0,hoverFrame:null,"static":!1,pause:!1,loop:!0,animate:!1,animateBackwards:!1,onLoop:_.noop,onUpdate:_.noop,style:{}},d["default"].defaultProps),t["default"]=b},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(52),d=o(f),h=n(1),y=o(h),m=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.uniqueID=(0,d["default"])(Math.random()),n.sprite={},console.warn("Consider switching to skoash.Sprite as SpriteAnimation will soon be deprecated."),n}return a(t,e),u(t,[{key:"onReady",value:function(){this.sprite=ReactDOM.findDOMNode(this.refs.sprite)}},{key:"start",value:function(){l(Object.getPrototypeOf(t.prototype),"start",this).call(this),this.props.animateOnStart&&this.animate()}},{key:"animate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.setState({animate:e})}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.animate!==this.props.animate&&this.animate(e.animate)}},{key:"getStyle",value:function(){var e=""+this.uniqueID+(this.state.animate?"":"-back")+" "+(this.props.duration+"s steps("+(this.props.frames-1)+") forwards");return{backgroundImage:"url("+this.props.src+")",backgroundSize:this.sprite.offsetWidth*this.props.frames+"px",WebkitAnimation:e,animation:e}}},{key:"getClassNames",value:function(){return(0,p["default"])("sprite-animation",{ANIMATE:this.state.animate},this.uniqueID,l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("style",null,"@keyframes "+this.uniqueID+" {\n    0% {\n        background-position: 0px center;\n    }\n    100% {\n        background-position: -"+(this.sprite.offsetWidth*(this.props.frames-1)+"px center;\n")+"    }\n}\n"+("@keyframes "+this.uniqueID+"-back {\n")+"    0% {\n        background-position: -"+(this.sprite.offsetWidth*(this.props.frames-1)+"px center;\n")+"    }\n    100% {\n        background-position: 0px center;\n    }\n}\n"),React.createElement("div",s({},this.props,{ref:"sprite",className:this.getClassNames(),style:this.getStyle()})))}}]),t}(y["default"]);m.defaultProps=_.defaults({animateOnStart:!0,src:"",frames:1,duration:1},y["default"].defaultProps),t["default"]=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=o(l),p=n(4),f=o(p),d=n(5),h=o(d),y=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state=_.defaults({styleText:""},n.state),n.onJSONReady=n.onJSONReady.bind(n),n}return a(t,e),u(t,[{key:"onJSONReady",value:function(){this.data=this.refs.json.getData(),this.setUp()}},{key:"setUp",value:function(){var e=this;this.data&&this.data.frames&&!function(){var t=_.reduce(e.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.x)},1/0),n=_.reduce(e.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.y)},1/0),o=_.reduce(e.data.frames,function(e,n){return Math.max(e,n.spriteSourceSize.x+n.spriteSourceSize.w-t)},0),r=_.reduce(e.data.frames,function(e,t){return Math.max(e,t.spriteSourceSize.y+t.spriteSourceSize.h-n)},0),i="."+e.props.spriteClass+("{ display: inline-block; position: relative; width: "+o+"px; height: "+r+"px }");i=_.reduce(e.data.frames,function(o,r,i){return o+("."+e.props.spriteClass)+((e.props.frameSelectors[i]||".frame-"+i)+"::before {")+"position: absolute;"+("top: "+(r.spriteSourceSize.y-n)+"px;")+("left: "+(r.spriteSourceSize.x-t)+"px;")+("background-image: url("+e.props.src+"."+e.props.extension+");")+"background-repeat: no-repeat;"+("background-position: -"+r.frame.x+"px -"+r.frame.y+"px;")+("background-size: "+e.data.meta.size.w+"px "+e.data.meta.size.h+"px;")+("width: "+r.frame.w+"px;")+("height: "+r.frame.h+"px;")+"content: '';}"},i),e.setState({styleText:i},function(){e.props.onSetUp.call(e)})}()}},{key:"renderJSON",value:function(){return React.createElement(f["default"],{ref:"json",src:(this.props.dataSrc||this.props.src)+"."+this.props.dataExtension,dataTarget:this.props.dataTarget,onReady:this.onJSONReady})}},{key:"renderImage",value:function(){return React.createElement(h["default"],{ref:"image",src:(this.props.dataSrc||this.props.src)+"."+this.props.extension})}},{key:"renderCSS",value:function(){return React.createElement("style",null,this.state.styleText)}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{style:{display:"none"}}),this.renderJSON(),this.renderImage(),this.renderCSS())}}]),t}(c["default"]);y.defaultProps=_.defaults({src:"",dataSrc:"",extension:"png",dataExtension:"json",spriteClass:"css-sprite",frameSelectors:{},onSetUp:_.noop},c["default"].defaultProps),t["default"]=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(2),p=o(c),f=n(1),d=o(f),h=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={time:0,stamp:0},n.increment=n.increment.bind(n),n.checkComplete=n.checkComplete.bind(n),n.restartHelper=n.restartHelper.bind(n),n}return a(t,e),u(t,[{key:"increment",value:function(){this.state.time>=this.props.timeout?(this.complete(),this.stop()):(this.props.onCheckComplete.call(this),window.requestAnimationFrame(this.checkComplete)),this.props.onIncrement.call(this)}},{key:"checkComplete",value:function(){var e=Date.now();this.props.checkComplete&&(!this.state.started||this.state.paused||this.props.pause||(e>=this.state.stamp?this.setState({stamp:e+1e3,time:this.state.time+1e3},this.increment):window.requestAnimationFrame(this.checkComplete)))}},{key:"incompleteRefs",value:function(){this.restart()}},{key:"restartHelper",value:function(){this.state.started?this.checkComplete():this.start()}},{key:"restart",value:function(){this.state.ready&&(this.state.complete&&this.incomplete(),this.setState({time:0,stamp:0},this.restartHelper))}},{key:"stop",value:function(){this.state.started&&this.setState({started:!1})}},{key:"pause",value:function(){this.state.started&&this.setState({paused:!0})}},{key:"resume",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e=_.defaults(e,this.props),!e.pause&&this.state.paused&&this.setState({paused:!1},this.restartHelper)}},{key:"componentWillReceiveProps",value:function(e){l(Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.restart&&e.restart!==this.props.restart&&this.restart(),e.pause&&e.pause!==this.props.pause&&this.pause(),e.resume&&e.resume!==this.props.resume&&this.resume(e)}},{key:"getClassNames",value:function(){return(0,p["default"])("timer",l(Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){var e=this.props.getTime.call(this);return React.createElement("div",s({},this.props,{className:this.getClassNames(),time:e}),this.props.leadingContent,React.createElement("span",null,e),this.props.children)}}]),t}(d["default"]);h.defaultProps=_.defaults({getTime:function(){return moment(this.props.countDown?this.props.timeout-this.state.time:this.state.time).format(this.props.format)},format:"m:ss",leadingContent:"",timeout:6e4,countDown:!1,onCheckComplete:_.noop,onIncrement:_.noop},d["default"].defaultProps),t["default"]=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function d(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},c=n(6),p=o(c),f=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.play=n.play.bind(n),n}return a(t,e),u(t,[{key:"play",value:function(){this.playing&&!this.paused||(this.video.play(),l(Object.getPrototypeOf(t.prototype),"play",this).call(this),skoash.trigger("videoPlay",{video:this}),this.playing=!0,this.paused=!1)}},{key:"start",value:function(){this.play()}},{key:"stop",value:function(){this.video.pause(),skoash.trigger("videoStop",{video:this}),this.playing=!1}},{key:"pause",value:function(){this.video.pause(),this.paused=!0}},{key:"resume",value:function(){this.play()}},{key:"complete",value:function(){this.props.loop||skoash.trigger("videoStop",{video:this}),this.playing=!1,l(Object.getPrototypeOf(t.prototype),"complete",this).call(this)}},{key:"bootstrap",value:function(){this.video=ReactDOM.findDOMNode(this),this.video.load()}},{key:"render",value:function(){return React.createElement("video",s({},this.props,{onCanPlay:this.ready,onEnded:this.complete,preload:"auto",controls:!0}))}}]),t}(p["default"]);t["default"]=f},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){n(this,e),this.detechDevice=this.detechDevice.bind(t)}return o(e,[{key:"detechDevice",value:function(){this.setState({iOS:this.deviceDetector.iOS(),mobile:this.deviceDetector.mobileOrTablet()})}},{key:"iOS",value:function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}},{key:"mobileOrTablet",value:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0);
}(navigator.userAgent||navigator.vendor||window.opera),e}}]),e}();t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){n(this,e),this.attachEvents=this.attachEvents.bind(t),this.onKeyDown=this.onKeyDown.bind(t),this.emit=this.emit.bind(t),this.emitSave=this.emitSave.bind(t),this.trigger=this.trigger.bind(t),this.attachEvents()}return r(e,[{key:"attachEvents",value:function(){var e=this;window.addEventListener("resize",function(){e.scale()}),window.addEventListener("orientationchange",function(){window.dispatchEvent(new Event("resize"))}),_.invoke(window,"parent.addEventListener","orientationchange",function(){window.dispatchEvent(new Event("orientationchange"))}),window.addEventListener("keydown",function(t){e.eventManager.onKeyDown(t)}),window.addEventListener("platform-event",function(t){e.eventManager.trigger(t.name,t.gameData)}),window.addEventListener("trigger",function(t){e.eventManager.trigger(t.name,t.opts)}),window.addEventListener("focus",function(){e.resume()}),window.addEventListener("blur",function(){e.pause()})}},{key:"onKeyDown",value:function(e){78===e.keyCode?this.navigator["goto"]({index:this.state.currentScreenIndex+1}):66===e.keyCode?this.navigator["goto"]({index:this.state.currentScreenIndex-1}):e.altKey&&e.ctrlKey&&68===e.keyCode&&this.demo()}},{key:"emit",value:function(){var e,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=this;return e=new Promise(function(e){var r;"object"===("undefined"==typeof t?"undefined":o(t))&&(t.game||(t.game=n.props.config.id),t.version||(t.version=n.props.config.version),r=new Event("game-event",{bubbles:!0,cancelable:!1}),r.name=t.name,r.gameData=t,r.respond=t.respond||function(t){e(t)},window.frameElement&&window.frameElement.dispatchEvent(r))}),e.then(function(e){n.eventManager.trigger(e.name,e)}),e}},{key:"emitSave",value:function(e,t){2>e||this.eventManager.emit({name:"save",game:this.props.config.id,version:this.props.config.version,highestScreenIndex:e,currentScreenIndex:t})}},{key:"trigger",value:function(e,t){var n=this;_.invoke(this.props.getTriggerEvents.call(this,{"goto":this.navigator["goto"],goBack:this.navigator.goBack,playMedia:function(e){return n.playMedia(e.ref)},audioPlay:this.mediaManager.audioPlay,audioStop:this.mediaManager.audioStop,videoPlay:this.mediaManager.videoPlay,videoStop:this.mediaManager.videoStop,demo:this.demo,toggleDemoMode:this.demo,getData:this.getData,passData:this.passData,updateState:this.updateState,updateGameData:this.updateGameData,updateScreenData:this.updateScreenData,updateData:this.updateData,screenComplete:this.screenComplete,openMenu:this.navigator.openMenu,menuClose:this.navigator.menuClose,getState:this.getState,emit:this.eventManager.emit,quit:this.quit,save:this.load,complete:this.checkComplete,incomplete:this.checkComplete,ready:this.checkReady,resize:this.scale,getGame:this.getGame})[_.camelCase(e)],"call",this,t)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){n(this,e),this.audioPlay=this.audioPlay.bind(t),this.audioStop=this.audioStop.bind(t),this.checkPlayingAudio=this.checkPlayingAudio.bind(t),this.videoPlay=this.videoPlay.bind(t),this.videoStop=this.videoStop.bind(t),this.fadeBackground=this.fadeBackground.bind(t),this.raiseBackground=this.raiseBackground.bind(t),this.playBackground=this.playBackground.bind(t),this.loadUnloadMedia=this.loadUnloadMedia.bind(t)}return o(e,[{key:"audioPlay",value:function(e){var t=this.state.playingSFX||[],n=this.state.playingVO||[],o=this.state.playingBKG||[],r=this.state.classes||[];switch(e.audio.props.gameClass&&r.push(e.audio.props.gameClass),e.audio.props.type){case"sfx":t.push(e.audio);break;case"voiceOver":n.push(e.audio),this.mediaManager.fadeBackground();break;case"background":o.push(e.audio)}this.setState({playingSFX:t,playingVO:n,playingBKG:o,classes:r})}},{key:"audioStop",value:function(){this.mediaManager.checkPlayingAudio()}},{key:"checkPlayingAudio",value:function(){var e=this,t=_.filter(this.state.playingSFX,function(e){return e.playing}),n=_.filter(this.state.playingVO,function(e){return e.playing}),o=_.filter(this.state.playingBKG,function(e){return e.playing});this.setState({playingSFX:t,playingVO:n,playingBKG:o},function(){n.length||e.mediaManager.raiseBackground()})}},{key:"videoPlay",value:function(e){var t=this.state.playingVideo;t&&t.stop(),t=e.video,this.mediaManager.fadeBackground(0),this.setState({playingVideo:t})}},{key:"videoStop",value:function(){this.mediaManager.raiseBackground(1),this.setState({playingVideo:null})}},{key:"fadeBackground",value:function(){var e=arguments.length<=0||void 0===arguments[0]?.25:arguments[0];_.each(this.state.playingBKG,function(t){return _.invoke(t,"setVolume",e)})}},{key:"raiseBackground",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];0!==this.state.playingVO.length||this.state.playingVideo||_.each(this.state.playingBKG,function(t){return _.invoke(t,"setVolume",e)})}},{key:"playBackground",value:function(e,t,n){var o,r,i;o=_.defaultTo(n,this.getBackgroundIndex(e,t)),null!=o&&(r=this.state.playingBKG,i=this.refs["screen-"+e],(i.props.restartBackground||-1===r.indexOf(this.media.audio.background[o]))&&(_.each(r,function(e){return _.invoke(e,"stop")}),this.playMedia("audio.background."+o)))}},{key:"loadUnloadMedia",value:function(e){_.each(this.media.audio,function(t){_.each(t,function(t){t&&t.props&&(e>=t.props.unloadIndex||e<t.props.loadIndex?_.invoke(t,"unload"):_.invoke(t,"load"))})})}}]),e}();t["default"]=r},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){o(this,e),this["goto"]=this["goto"].bind(t),this.shouldGoto=this.shouldGoto.bind(t),this.openNewScreen=this.openNewScreen.bind(t),this.closeOldScreen=this.closeOldScreen.bind(t),this.loadScreens=this.loadScreens.bind(t),this.getDefaultButtonSound=this.getDefaultButtonSound.bind(t),this.goBack=this.goBack.bind(t),this.openMenu=this.openMenu.bind(t),this.menuClose=this.menuClose.bind(t)}return r(e,[{key:"goto",value:function(e){var t,n,o,r,i,a,s,u,l,c,p;if(e=this.props.getGotoOpts.call(this,e),r=this.state.currentScreenIndex,t=this.refs["screen-"+r],"number"==typeof e.index){if(e.index>this.screensLength-1)return this.quit();i=Math.min(this.screensLength-1,Math.max(0,e.index)),l=Math.max(this.state.highestScreenIndex,i),s=this.refs["screen-"+(i+1)],u=this.refs["screen-"+(i+2)],n=this.refs["screen-"+(i-1)],o=this.refs["screen-"+(i-2)]}else"string"==typeof e.index&&(i=e.index,l=this.state.highestScreenIndex);a=this.refs["screen-"+i],this.navigator.shouldGoto(t,a,e)&&(p=this.navigator.closeOldScreen(t,a,e,r),c=this.navigator.openNewScreen(a,i,e),_.invoke(o,"unload"),_.invoke(n,"replay"),_.invoke(s,"load"),_.invoke(u,"unload"),e.load||this.eventManager.emitSave(l,i),this.mediaManager.loadUnloadMedia(i),this.mediaManager.playBackground(i,a.props.id,a.props.backgroundAudio),this.setState({loading:!1,currentScreenIndex:i,highestScreenIndex:l,screenIndexArray:c,classes:[],data:p}))}},{key:"shouldGoto",value:function(e,t,n){return!(!n.load&&e&&e.state&&e.state.opening||e.props.index<t.props.index&&!n.load&&!this.state.demo&&!e.state.complete&&!e.state.replay||e.props.index>t.props.index&&0===t.props.index)}},{key:"openNewScreen",value:function(e,t,n){var o=this.state.screenIndexArray;return e?(e.state.load&&e.state.ready||this.state.screenLoads[t]||this.navigator.loadScreens(t),e.open(n),o.push(t),o):o}},{key:"closeOldScreen",value:function(e,t,n,o){var r,i=e.props.index>t.props.index,a=this.state.data;return e&&e!==t?(i?e.close():e.leave(),e.props.resetOnClose&&(a.screens[o]={}),n.silent?a:(r=this.navigator.getDefaultButtonSound(i),n.buttonSound&&(r=n.buttonSound),_.invoke(r,"play"),a)):a}},{key:"loadScreens",value:function(e){var t,o,r,i=this,a=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];_.isFinite(e)||(e=this.state.currentScreenIndex),this.setState({screenLoads:(t={},n(t,e,!0),n(t,e+1,!0),t)},function(){o=i.refs["screen-"+e],r=i.refs["screen-"+e+1],o&&o.load(function(){i.checkReady(),a&&i.navigator["goto"]({index:e,load:!0,silent:!0})}),r&&r.load()})}},{key:"getDefaultButtonSound",value:function(e){var t,n=e?"back":"next";return t=this.media.audio[n]||this.media.audio.button||t}},{key:"goBack",value:function(){var e,t;e=this.state.screenIndexArray,e.pop(),t=e.pop(),this.navigator["goto"]({index:t})}},{key:"openMenu",value:function(e){var t,n;t=this.refs["menu-"+e.id],t&&(t.open(),n=this.state.openMenus||[],n.push(e.id),this.playMedia("button"),this.setState({openMenus:n})),_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"pause")}},{key:"menuClose",value:function(e){var t,n;t=this.refs["menu-"+e.id],t&&(t.close(),n=this.state.openMenus||[],n.splice(e.id,1),this.playMedia("button"),this.setState({openMenus:n})),n.length||_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"resume")}}]),e}();t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n,o,r,i,a,s,u,l,c=[e,t];for(i=0;i<c.length;i++){var p=c[i];for(a=0;a<p.length;a++){var f=(a+1)%p.length,d=p[a],h=p[f],y={x:h.y-d.y,y:d.x-h.x};for(n=o=void 0,s=0;s<e.length;s++)r=y.x*e[s].x+y.y*e[s].y,("undefined"==typeof n||n>r)&&(n=r),("undefined"==typeof o||r>o)&&(o=r);for(u=l=void 0,s=0;s<t.length;s++)r=y.x*t[s].x+y.y*t[s].y,("undefined"==typeof u||u>r)&&(u=r),("undefined"==typeof l||r>l)&&(l=r);if(u>o||n>l)return!1}}return!0}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){(0,i["default"])(e,function(e){t(_.isString(e)?JSON.parse(e):e)},"json")};var r=n(12),i=o(r)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=function(e,t){var o;t=t||_.get(e,"props.config.id"),o=document.getElementById(t),o||(o=document.createElement("DIV"),o.id=t,document.body.appendChild(o)),e="object"===("undefined"==typeof e?"undefined":n(e))?e:React.createElement(e,null),ReactDOM.render(e,o)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new Promise(function(n){var o=new Event("trigger",{bubbles:!1,cancelable:!1});o.name=e,o.opts=t,o.opts.respond=function(e){n(e)},window.dispatchEvent(o)})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),i=o(r),a=n(48),s=o(a);t["default"]={SelectableReveal:i["default"],SpriteAnimation:s["default"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return React.createElement($k.Component,{className:"selectable-reveal"},React.createElement($k.MediaCollection,n({play:_.get(e,"data.reveal.open"),children:t.media},t.MediaCollectionProps)),React.createElement($k.Selectable,n({dataTarget:"selectable",list:t.selectables},t.SelectableProps)),React.createElement($k.Reveal,n({openTarget:"reveal",openReveal:_.get(e,"data.selectable.target.props.message"),list:t.reveals},t.RevealProps)))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return React.createElement($k.Component,{className:"sprite-animation"},React.createElement(skoash.SpriteCSS,n({},t.SpriteProps,{spriteClass:t.className,src:t.src,dataTarget:t.className})),React.createElement(skoash.Animation,n({},t.AnimationProps,{className:t.className,frames:_.get(e,"gameState.data."+t.className+".frames.length",1),duration:t.duration,animate:t.animate})))}},function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function n(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",n),e())})}function o(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t?(e.g=t,!0):!1}function a(e,n){function o(){var e=r;i(e)&&null!==e.a.parentNode&&n(e.g)}var r=e;t(e.b,o),t(e.c,o),i(e)}function s(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function u(){if(null===p){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}p=""!==e.style.font}return p}function l(e,t){return[e.style,e.weight,u()?e.stretch:"","100px",t].join(" ")}var c=null,p=null,f=null;s.prototype.load=function(e,t){var i=this,s=e||"BESbswy",u=0,p=t||3e3,d=(new Date).getTime();return new Promise(function(e,t){if(null===f&&(f=!!document.fonts),f){var h=new Promise(function(e,t){function n(){(new Date).getTime()-d>=p?t():document.fonts.load(l(i,'"'+i.family+'"'),s).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}n()}),y=new Promise(function(e,t){u=setTimeout(t,p)});Promise.race([y,h]).then(function(){clearTimeout(u),e(i)},function(){t(i)})}else n(function(){function n(){var t;(t=-1!=v&&-1!=_||-1!=v&&-1!=b||-1!=_&&-1!=b)&&((t=v!=_&&v!=b&&_!=b)||(null===c&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=c&&(v==g&&_==g&&b==g||v==O&&_==O&&b==O||v==w&&_==w&&b==w)),t=!t),t&&(null!==k.parentNode&&k.parentNode.removeChild(k),clearTimeout(u),e(i))}function f(){if((new Date).getTime()-d>=p)null!==k.parentNode&&k.parentNode.removeChild(k),t(i);else{var e=document.hidden;!0!==e&&void 0!==e||(v=h.a.offsetWidth,_=y.a.offsetWidth,b=m.a.offsetWidth,n()),u=setTimeout(f,50)}}var h=new o(s),y=new o(s),m=new o(s),v=-1,_=-1,b=-1,g=-1,O=-1,w=-1,k=document.createElement("div");k.dir="ltr",r(h,l(i,"sans-serif")),r(y,l(i,"serif")),r(m,l(i,"monospace")),k.appendChild(h.a),k.appendChild(y.a),k.appendChild(m.a),document.body.appendChild(k),g=h.a.offsetWidth,O=y.a.offsetWidth,w=m.a.offsetWidth,f(),a(h,function(e){v=e,n()}),r(h,l(i,'"'+i.family+'",sans-serif')),a(y,function(e){_=e,n()}),r(y,l(i,'"'+i.family+'",serif')),a(m,function(e){b=e,n()}),r(m,l(i,'"'+i.family+'",monospace'))})})},e.exports=s}()},function(e,t,n){n(51),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!g(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return O.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(r))}}),t}function y(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),o=n.shift().trim();if(o){var r=n.join(":").trim();t.append(o,r)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},g=ArrayBuffer.isView||function(e){return e&&_.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,o){e=t(e),o=n(o);var r=this.map[e];this.map[e]=r?r+","+o:o},r.prototype["delete"]=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,o){this.map[t(e)]=n(o)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},v.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},p.call(d.prototype),p.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];m.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=d,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,o){var r=new d(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new m(t,e))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(r.method,r.url,!0),"include"===r.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),r.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";e.exports=n(55)},function(e,t,n){"use strict";function o(e){var t=r.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}}var r=n(8);e.exports=o},function(e,t,n){"use strict";function o(e,t){for(var n,o=0,i="";!n;)i+=e(t>>4*o&15|r()),n=t<Math.pow(16,o+1),o++;return i}var r=n(57);e.exports=o},function(e,t,n){"use strict";function o(){var e="",t=Math.floor(.001*(Date.now()-d));return t===u?s++:(s=0,u=t),e+=c(l.lookup,h),e+=c(l.lookup,y),s>0&&(e+=c(l.lookup,s)),e+=c(l.lookup,t)}function r(t){return l.seed(t),e.exports}function i(t){return y=t,e.exports}function a(e){return void 0!==e&&l.characters(e),l.shuffled()}var s,u,l=n(8),c=n(54),p=n(53),f=n(56),d=1459707606518,h=6,y=n(59)||0;e.exports=o,e.exports.generate=o,e.exports.seed=r,e.exports.worker=i,e.exports.characters=a,e.exports.decode=p,e.exports.isValid=f},function(e,t,n){"use strict";function o(e){if(!e||"string"!=typeof e||e.length<6)return!1;for(var t=r.characters(),n=e.length,o=0;n>o;o++)if(-1===t.indexOf(e[o]))return!1;return!0}var r=n(8);e.exports=o},function(e,t){"use strict";function n(){if(!o||!o.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return o.getRandomValues(e),48&e[0]}var o="object"==typeof window&&(window.crypto||window.msCrypto);e.exports=n},function(e,t){"use strict";function n(){return r=(9301*r+49297)%233280,r/233280}function o(e){r=e}var r=1;e.exports={nextValue:n,seed:o}},function(e,t){"use strict";e.exports=0}]);
//# sourceMappingURL=skoash.1.1.7.js.map