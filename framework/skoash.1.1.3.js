!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="/",t(0)}([function(e,t,o){e.exports=o(12)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(2),c=n(l),p=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={started:!1,ready:!1},o.onReady=o.onReady||_.noop,o.start=_.throttle(o.start.bind(o),100),o.ready=_.throttle(o.ready.bind(o),100),o.complete=_.throttle(o.complete.bind(o),100),o}return a(t,e),u(t,[{key:"invokeChildrenFunction",value:function(e){_.each(this.refs,function(t){_.invoke(t,e)})}},{key:"complete",value:function(e){var t=this;e=_.defaults(e||{},this.props),setTimeout(function(){t.setState({complete:!0},function(){skoash.trigger("complete"),e.onComplete.call(t,t)})},e.completeDelay)}},{key:"incomplete",value:function(){var e=this;this.state.complete&&!this.props.complete&&this.setState({complete:!1},function(){skoash.trigger("incomplete"),e.props.onIncomplete.call(e,e)})}},{key:"completeRefs",value:function(){this.invokeChildrenFunction("completeRefs"),this.complete({silent:!0})}},{key:"incompleteRefs",value:function(){this.invokeChildrenFunction("incompleteRefs"),this.incomplete()}},{key:"ready",value:function(){var e=this;this.setState({ready:!0},function(){e.props.triggerReady&&skoash.trigger("ready"),e.state.open&&e.start(),_.isFunction(e.onReadyCallback)?(_.invoke(e,"onReadyCallback.call",e),delete e.onReadyCallback):_.invoke(e,"onReady.call",e),e.props.onReady.call(e)})}},{key:"start",value:function(e){var t=this;this.state&&this.state.ready&&!this.state.started&&this.setState({started:!0},function(){t.checkComplete(),t.invokeChildrenFunction("start"),(t.props.completeOnStart||t.props.complete)&&t.complete(),t.props.onStart.call(t),"function"==typeof e&&e.call(t)})}},{key:"stop",value:function(){var e=this;this.setState({started:!1},function(){e.invokeChildrenFunction("stop"),e.props.onStop.call(e)})}},{key:"pause",value:function(){this.invokeChildrenFunction("pause"),this.props.onPause.call(this)}},{key:"resume",value:function(){this.invokeChildrenFunction("resume"),this.props.onResume.call(this)}},{key:"open",value:function(){var e=this;this.setState({open:!0},function(){e.props.onOpen.call(e)})}},{key:"close",value:function(){var e=this;this.setState({open:!1},function(){e.props.onClose.call(e)})}},{key:"componentDidMount",value:function(){this.bootstrap()}},{key:"bootstrap",value:function(){this.props.bootstrap&&((this.props.completeIncorrect&&!this.props.correct||this.props.complete)&&this.complete(),this.collectMedia(),this.checkReady(),this.props.onBootstrap.call(this))}},{key:"collectData",value:function(){return this.props.collectData.call(this)}},{key:"loadData",value:function(){if(this.metaData)return this.props.loadData.call(this,this.metaData)}},{key:"collectMedia",value:function(){var e=this;this.media={video:[],audio:{background:[],sfx:[],voiceOver:[]},sequence:[]},_.each(this.refs,function(t,o){t instanceof skoash.Video&&e.collectVideo(o),t instanceof skoash.Audio&&e.collectAudio(o),t instanceof skoash.MediaSequence&&e.collectMediaSequence(o)})}},{key:"collectVideo",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),_.isFinite(e)||(this.media.video[e]=this.refs[e]),this.media.video.push(this.refs[e])}},{key:"collectAudio",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),this.media.audio[e]||(this.media.audio[e]=this.refs[e]),_.isFinite(e)||(this.media.audio[this.refs[e].props.type][e]=this.refs[e]),this.refs[e].props.type&&this.media.audio[this.refs[e].props.type].push(this.refs[e])}},{key:"collectMediaSequence",value:function(e){this.media[e]||(this.media[e]=this.refs[e]),_.isFinite(e)||(this.media.sequence[e]=this.refs[e]),this.media.sequence.push(this.refs[e])}},{key:"playMedia",value:function(e){_.invoke(this.media,e+".play")}},{key:"getUnready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ready";return _.reduce(this.refs,function(t,o,n){return o.state&&!o.state[e]&&(t[n]=o),t},{})}},{key:"checkReady",value:function(){var e;!this.props.checkReady||!this.props.ignoreReady&&this.state.ready||(_.each(this.refs,function(e){_.get(e,"state.ready")||_.invoke(e,"checkReady")}),e=!_.size(this.getUnready()),e&&this.ready())}},{key:"checkComplete",value:function(){var e;this.props.checkComplete&&this.state.ready&&(_.each(this.refs,function(e){return _.invoke(e,"checkComplete")}),e=!_.size(this.getUnready("complete")),e&&!this.state.complete?this.complete():this.state.started&&!e&&this.state.complete&&this.incomplete())}},{key:"updateGameState",value:function(e){return skoash.trigger("updateState",e)}},{key:"updateGameData",value:function(e){return skoash.trigger("updateGameData",e)}},{key:"updateScreenData",value:function(e){return skoash.trigger("updateScreenData",e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.shouldComponentUpdate.call(this,e,t)}},{key:"componentWillReceiveProps",value:function(e){e.complete===!0&&e.complete!==this.props.complete&&this.complete(e),e.start===!0&&e.start!==this.props.start&&this.start(),e.stop===!0&&e.stop!==this.props.stop&&this.stop(),this.props.onComponentWillReceiveProps.call(this,e)}},{key:"addClassName",value:function(e,t){this.state.className&&this.state.className.indexOf(e)!==-1||this.setState({className:(0,c.default)(this.state.className,e)},t)}},{key:"removeClassName",value:function(e,t){this.state.className&&this.setState({className:this.state.className.replace(e,"")},t)}},{key:"removeAllClassNames",value:function(e){this.setState({className:null},e)}},{key:"getClassNames",value:function(){return(0,c.default)(_.reduce(this.state,function(e,t,o){return t===!0&&(e[_.toUpper(o)]=t),e},{}),this.state.className,this.props.className,this.props.componentName,this.props.getClassNames.call(this))}},{key:"renderContentList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";return _.map([].concat(this.props[t]),function(o,n){var r=o instanceof skoash.MediaSequence?e.state:e.props.gameState;if(o&&o.type)return React.createElement(o.type,s({gameState:r},o.props,{ref:o.ref||o.props&&o.props["data-ref"]||t+"-"+n,key:n}))})}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,s({},this.props,{className:this.getClassNames()}),this.renderContentList()):null}}]),t}(React.Component);p.defaultProps={bootstrap:!0,checkComplete:!0,checkReady:!0,collectData:_.noop,completeDelay:0,completeIncorrect:!1,completeOnStart:!1,componentName:"",getClassNames:_.noop,ignoreReady:!1,loadData:_.noop,onBootstrap:_.noop,onClose:_.noop,onComplete:_.noop,onComponentWillReceiveProps:_.noop,onReady:_.noop,onIncomplete:_.noop,onOpen:_.noop,onPause:_.noop,onResume:_.noop,onStart:_.noop,onStop:_.noop,shouldComponentUpdate:function(){return!0},shouldRender:!0,triggerReady:!0,type:"div"},t.default=p},function(e,t,o){var n,r;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(o.apply(null,n));else if("object"===r)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=o:(n=[],r=function(){return o}.apply(t,n),!(void 0!==r&&(e.exports=r)))}()},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),l=n(u),c=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.error=o.error.bind(o),o}return a(t,e),s(t,[{key:"error",value:function(){var e=this;this.setState({error:!0,ready:!1},function(){e.props.onError.call(e)})}}]),t}(l.default);c.defaultProps=_.defaults({checkComplete:!1,checkReady:!1,onError:_.noop},l.default.defaultProps),t.default=c},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},l=o(3),c=n(l),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"start",value:function(){this.props.silentOnStart||this.play()}},{key:"play",value:function(){this.props.playTarget&&this.updateScreenData({key:this.props.playTarget,data:{playing:!0}}),this.props.onPlay.call(this)}},{key:"complete",value:function(){this.props.completeTarget&&this.updateScreenData({key:this.props.completeTarget,data:{playing:!1,complete:!0}}),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this)}}]),t}(c.default);p.defaultProps=_.defaults({bootstrap:!1,checkComplete:!1,checkReady:!1,completeDelay:0,completeOnStart:!1,silentOnStart:!0,shouldComponentUpdate:function(){return!1},onPlay:_.noop},c.default.defaultProps),t.default=p},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(38),i=n(r),a=o(11),s=n(a),u=o(39),l=n(u);t.default={doIntersect:i.default,loadFile:s.default,loadJSON:l.default}},function(e,t,o){"use strict";function n(){f=!1}function r(e){if(!e)return void(c!==h&&(c=h,n()));if(e!==c){if(e.length!==h.length)throw new Error("Custom alphabet for shortid must be "+h.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,o){return t!==o.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+h.length+" unique characters. These characters were not unique: "+t.join(", "));c=e,n()}}function i(e){return r(e),c}function a(e){d.seed(e),p!==e&&(n(),p=e)}function s(){c||r(h);for(var e,t=c.split(""),o=[],n=d.nextValue();t.length>0;)n=d.nextValue(),e=Math.floor(n*t.length),o.push(t.splice(e,1)[0]);return o.join("")}function u(){return f?f:f=s()}function l(e){var t=u();return t[e]}var c,p,f,d=o(52),h="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";e.exports={characters:i,seed:a,lookup:l,shuffled:u}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),l=n(u),c=o(5),p=n(c),f=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.loadFile=p.default.loadFile,o.loadData(e.src),o}return a(t,e),s(t,[{key:"loadData",value:function(e){var t=this;this.loadFile(e,function(e){t.data=e,t.ready()})}},{key:"getData",value:function(){return this.data}}]),t}(l.default);f.defaultProps=_.defaults({src:"",complete:!0,checkReady:!1,checkComplete:!1,shouldRender:!1},l.default.defaultProps),t.default=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(3),c=n(l),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"bootstrap",value:function(){this.setState({complete:this.props.complete})}},{key:"render",value:function(){return React.createElement("img",s({},this.props,{className:this.getClassNames(),onLoad:this.ready,onError:this.error,draggable:!1}))}}]),t}(c.default);p.defaultProps=_.defaults({complete:!0},c.default.defaultProps),t.default=p},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=o(7),u=n(s),l=o(5),c=n(l),p=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.loadFile=c.default.loadJSON,o.loadData(e.src),o}return a(t,e),t}(u.default);t.default=p},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(1),p=n(c),f=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={ready:!1,open:!1,leaving:!1,leave:!1,close:!0,complete:!1,load:!1},o.next=o.next.bind(o),o.prev=o.prev.bind(o),o}return a(t,e),u(t,[{key:"goto",value:function(e,t){"string"==typeof e||"number"==typeof e?skoash.trigger("goto",{index:e,buttonSound:t}):"object"===("undefined"==typeof e?"undefined":s(e))&&(e.buttonSound=e.buttonSound||t,skoash.trigger("goto",e))}},{key:"back",value:function(){skoash.trigger("goBack")}},{key:"next",value:function(){var e=this.props.gameState;this.state.started&&!this.state.leaving&&(e.demo||this.state.complete||this.state.replay)&&(this.setState({leaving:!0}),setTimeout(this.goto.bind(this,this.props.nextIndex||this.props.index+1,this.media.audio.button),this.props.nextDelay||0))}},{key:"prev",value:function(){this.goto(this.props.prevIndex||this.props.index-1)}},{key:"load",value:function(e){var o=this;this.onReadyCallback=e,this.state.load||this.setState({load:!0,ready:!1,complete:!1},function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",o).call(o),o.props.onLoad.call(o)})}},{key:"unload",value:function(){var e=this;this.state.load&&this.props.shouldUnload&&this.setState({load:!1},function(){e.props.onUnload.call(e)})}},{key:"bootstrap",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.props.load&&this.load()}},{key:"replay",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.load(),this.setState({replay:e})}},{key:"start",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e.bootstrap(),e.startMedia()})}},{key:"startMedia",value:function(){this.media.video[0]?this.playMedia("video.0"):this.media.audio.voiceOver[0]&&this.playMedia("audio.voiceOver.0"),this.playMedia("start"),this.playMedia(this.props.playOnStart)}},{key:"complete",value:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this,o),setTimeout(function(){skoash.trigger("screenComplete",{screenID:e.props.id,silent:o.silent||e.props.silentComplete||e.media["screen-complete"]}),e.playMedia("screen-complete"),e.props.emitOnComplete&&skoash.trigger("emit",e.props.emitOnComplete)},this.props.completeDelay)}},{key:"open",value:function(e){var t=this;t.setState({load:!0,open:!0,opening:!0,leaving:!1,leave:!1,close:!1,replay:t.state.complete||t.state.replay,opts:e},function(){t.props.startDelay?setTimeout(function(){t.state.started||t.start(),t.setState({opening:!1})},t.props.startDelay):(t.state.started||t.start(),t.setState({opening:!1})),t.props.onOpen.call(t),t.loadData()})}},{key:"leave",value:function(){this.setState({open:!1,leave:!0,close:!1}),this.stop()}},{key:"close",value:function(){this.setState({open:!1,leave:!1,close:!0}),this.stop()}},{key:"collectData",value:function(){return this.props.collectData.call(this)}},{key:"loadData",value:function(){return this.props.loadData.call(this)}},{key:"renderContent",value:function(){return this.state.load?React.createElement("div",{className:"screen-content"},this.renderContentList()):null}},{key:"renderPrevButton",value:function(){return this.props.hidePrev?null:React.createElement("button",{className:"prev-screen",onClick:this.prev})}},{key:"renderNextButton",value:function(){return this.props.hideNext?null:React.createElement("button",{className:"next-screen",onClick:this.next})}},{key:"render",value:function(){return React.createElement("div",{id:this.props.id,className:this.getClassNames()},this.renderContent(),this.renderPrevButton(),this.renderNextButton())}}]),t}(p.default);f.defaultProps=_.defaults({componentName:"screen",resetOnClose:!0,startDelay:250,collectData:_.noop,loadData:_.noop,onOpen:_.noop,onLoad:_.noop,onUnload:_.noop,shouldUnload:!0,gameState:{}},p.default.defaultProps),t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o=void 0;return skoash||(skoash={}),skoash._cache||(skoash._cache={}),skoash._cache[e]?void t(skoash._cache[e]):(o=new XMLHttpRequest,o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&"200"==o.status&&(skoash._cache[e]=o.responseText,t(o.responseText))},void o.send(null))}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),i=n(r),a=o(10),s=n(a),u=o(16),l=n(u),c=o(3),p=n(c),f=o(8),d=n(f),h=o(15),y=n(h),v=o(4),m=n(v),b=o(13),g=n(b),_=o(33),O=n(_),w=o(22),k=n(w),P=o(20),S=n(P),j=o(14),E=n(j),x=o(17),C=n(x),R=o(18),M=n(R),N=o(19),D=n(N),T=o(21),A=n(T),I=o(23),L=n(I),B=o(24),F=n(B),W=o(25),G=n(W),z=o(26),H=n(z),V=o(27),q=n(V),U=o(28),Y=n(U),X=o(29),K=n(X),$=o(30),J=n($),Z=o(31),Q=n(Z),ee=o(32),te=n(ee),oe=o(7),ne=n(oe),re=o(9),ie=n(re),ae=o(40),se=n(ae),ue=o(41),le=n(ue),ce=o(5),pe=n(ce),fe=o(42),de=n(fe);window.$k=window.skoash={Component:i.default,Screen:s.default,Game:l.default,Asset:p.default,Image:d.default,Font:y.default,Media:m.default,Audio:g.default,Video:O.default,MediaSequence:k.default,ListItem:S.default,DPad:E.default,GameEmbedder:C.default,InteractiveItem:M.default,Labyrinth:D.default,MediaCollection:A.default,Randomizer:L.default,Repeater:F.default,Reveal:G.default,Score:H.default,ScrollArea:q.default,Selectable:Y.default,Slider:K.default,Sprite:J.default,SpriteAnimation:Q.default,Timer:te.default,Data:ne.default,JSON:ie.default,start:se.default,trigger:le.default,util:pe.default,mixins:de.default},t.default=window.skoash},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},l=o(45),c=o(4),p=n(c),f=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.startCount=0,o.completeCount=0,o.allowMultiPlay=e.allowMultiPlay||"sfx"===e.type,o.playAudio=o.playAudio.bind(o),o.play=_.throttle(o.play.bind(o),e.playThrottle),o}return a(t,e),s(t,[{key:"play",value:function(){var e=this;skoash.trigger("getState").then(function(t){e.state.ready?(skoash.trigger("audioPlay",{audio:e}),e.delayed=!0,t.paused||(e.timeout=setTimeout(e.playAudio,e.props.delay))):e.bootstrap()})}},{key:"playAudio",value:function(e){this.paused||(e||this.allowMultiPlay||!this.playing)&&(this.delayed=!1,this.playing=!0,this.audio.play(this.sprite),this.startCount++,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this))}},{key:"pause",value:function(){this.delayed&&clearTimeout(this.timeout),this.playing&&(this.audio.pause(),this.paused=!0)}},{key:"resume",value:function(){var e=this;skoash.trigger("getState").then(function(t){t.paused||(e.delayed&&(e.timeout=setTimeout(e.playAudio,e.props.delay)),e.paused&&(e.paused=!1,e.playAudio(!0)))})}},{key:"stop",value:function(){this.delayed&&this.timeout&&clearTimeout(this.timeout),(this.playing||this.delayed)&&this.audio&&(skoash.trigger("audioStop",{audio:this}),this.playing=!1,this.paused=!1,this.audio.stop(this.sprite))}},{key:"setVolume",value:function(e){e=Math.min(this.props.maxVolume,Math.max(this.props.minVolume,e)),this.audio.volume(e)}},{key:"increaseVolume",value:function(e){this.playing&&(e=Math.min(e||this.props.volume,this.props.maxVolume),this.audio.fadeIn(e))}},{key:"decreaseVolume",value:function(e){this.playing&&(e=Math.max(e,this.props.minVolume),this.audio.fadeOut(e))}},{key:"complete",value:function(e){e=_.defaults(e||{},this.props),e.loop||skoash.trigger("audioStop",{audio:this}),this.completeCount++,(e.complete||this.playing&&!this.paused)&&(this.startCount>this.completeCount||(e.loop||(this.playing=!1),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this)))}},{key:"bootstrap",value:function(){var e;this.sprite=this.props.sprite?"sprite":void 0,this.audio||(this.props.sprite&&(e={sprite:this.props.sprite}),this.audio=new l.Howl({urls:[].concat(this.props.src),format:[].concat(this.props.format),loop:this.props.loop,volume:this.props.volume,onend:this.complete,onload:this.ready,rate:this.props.rate,sprite:e}),this.props.complete&&this.complete())}}]),t}(p.default);f.defaultProps=_.defaults({type:"sfx",format:"mp3",delay:0,rate:1,loop:!1,volume:1,maxVolume:1,minVolume:0,playThrottle:100,shouldRender:!1,sprite:void 0,allowMultiPlay:!1},p.default.defaultProps),t.default=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},p=o(2),f=n(p),d=o(1),h=n(d),y="up",v="down",m="left",b="right",g=38,O=40,w=37,k=39,P=65,S=68,j=83,E=87,x=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.keys={},e.mousedown=e.mousedown.bind(e),e.mouseup=e.mouseup.bind(e),e.keydown=e.keydown.bind(e),e.keyup=e.keyup.bind(e),e}return s(t,e),l(t,[{key:"mousedown",value:function(e){this.updateRef(e.target.getAttribute("data-ref"))}},{key:"mouseup",value:function(e){this.updateRef(e.target.getAttribute("data-ref"),!1)}},{key:"keydown",value:function(e){this.keyaction(e,!0)}},{key:"keyup",value:function(e){this.keyaction(e,!1)}},{key:"keyaction",value:function(e,t){var o=null;e.keyCode===w||e.keyCode===P?o=m:e.keyCode===g||e.keyCode===E?o=y:e.keyCode===k||e.keyCode===S?o=b:e.keyCode!==O&&e.keyCode!==j||(o=v),o||(o=this.props.onKeyAction.call(this,e.keyCode,t)),this.updateRef(o,t)}},{key:"bootstrap",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.DOM=ReactDOM.findDOMNode(this)}},{key:"start",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),this.DOM.addEventListener("mousedown",this.mousedown),this.DOM.addEventListener("mouseup",this.mouseup),this.DOM.addEventListener("mouseout",this.mouseup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}},{key:"stop",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this),this.DOM.removeEventListener("mousedown",this.mousedown),this.DOM.removeEventListener("mouseup",this.mouseup),this.DOM.removeEventListener("mouseout",this.mouseup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),this.keys={},this.updateScreenData({key:this.props.outputTarget,data:{up:!1,down:!1,left:!1,right:!1}})}},{key:"updateRef",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.keys[e]!==t&&(t&&this.media.keydown&&this.media.keydown.play(),this.keys[e]=t,this.updateScreenData({key:this.props.outputTarget,data:r({},e,t)}))}},{key:"getClassNames",value:function(){return(0,f.default)("d-pad",c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",u({},this.props,{className:this.getClassNames()}),this.renderContentList("assets"),React.createElement("div",{"data-ref":y,className:y}),React.createElement("div",{"data-ref":m,className:m}),React.createElement("div",{"data-ref":v,className:v}),React.createElement("div",{"data-ref":b,className:b}))}}]),t}(h.default);x.defaultProps=_.defaults({outputTarget:"d-pad",onKeyAction:_.noop},h.default.defaultProps),t.default=x},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(44),l=n(u),c=o(3),p=n(c),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"bootstrap",value:function(){this.font=new l.default(this.props.name),this.font.load().then(this.ready).catch(this.error),this.props.complete&&this.complete()}}]),t}(p.default);f.defaultProps=_.defaults({complete:!0,shouldRender:!1},p.default.defaultProps),t.default=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},f=o(2),d=n(f),h=o(35),y=n(h),v=o(34),m=n(v),b=o(36),g=n(b),O=o(37),w=n(O),k=o(1),P=n(k),S=o(10),j=n(S),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={currentScreenIndex:0,highestScreenIndex:0,screenIndexArray:[],playingSFX:[],playingVO:[],playingBKG:[],playingVideo:null,openMenus:[],loading:!0,demo:!1,data:{},classes:[]},o.state.data.screens=_.map(e.screens,function(){return{}}),o.screensLength=Object.keys(e.screens).length,o.eventManager=new y.default(o),o.deviceDetector=new m.default(o),o.mediaManager=new g.default(o),o.navigator=new w.default(o),o}return u(t,e),c(t,[{key:"getState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.invoke(e,"respond",this.state)}},{key:"demo",value:function(){this.setState({demo:!this.state.demo})}},{key:"componentWillMount",value:function(){this.eventManager.emit({name:"init"}),this.deviceDetector.detechDevice(),this.scale()}},{key:"bootstrap",value:function(){this.state.iOS||this.setState({currentScreenIndex:1}),this.collectMedia(),this.loadScreens(this.state.currentScreenIndex,!1),this.DOMNode=ReactDOM.findDOMNode(this),this.props.onBootstrap.call(this)}},{key:"loadScreens",value:function(e){var t,o,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_.isFinite(e)||(e=this.state.currentScreenIndex),t=this.refs["screen-"+e],o=this.refs["screen-"+e+1],t&&t.load(function(){n.checkReady(),r&&n.navigator.goto({index:e,load:!0,silent:!0})}),o&&o.load()}},{key:"ready",value:function(){var e=this;this.state.ready||this.isReady||(this.isReady=!0,this.setState({ready:!0},function(){e.eventManager.emit({name:"ready",game:e.props.config.id}),e.navigator.goto({index:e.state.currentScreenIndex,silent:!0}),e.onReady.call(e),e.props.onReady.call(e)}))}},{key:"resume",value:function(){this.state.playingVO.length&&this.mediaManager.fadeBackground(),this.setPause(!1)}},{key:"pause",value:function(){this.setPause(!0)}},{key:"setPause",value:function(e){var t=this,o=e?"pause":"resume";this.setState({paused:e},function(){_.each(t.state.playingBKG,function(e){return _.invoke(e,o)}),_.invoke(t.refs["screen-"+t.state.currentScreenIndex],o)})}},{key:"getBackgroundIndex",value:function(e,t){return this.props.getBackgroundIndex.call(this,e,t)}},{key:"scale",value:function(){this.setState({scale:window.innerWidth/this.props.config.dimensions.width})}},{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.eventManager.emit(e)}},{key:"getGame",value:function(e){this.props.config.id===e.id&&_.invoke(e,"respond",this)}},{key:"getData",value:function(e){this.props.getData.call(this,e)}},{key:"passData",value:function(e){return"function"!=typeof e.respond?this.props.passData.apply(this,arguments):void e.respond(this.props.passData.apply(this,arguments))}},{key:"load",value:function(e){if(e.game===this.props.config.id&&e.version===this.props.config.version&&e.highestScreenIndex){if(e.highestScreenIndex===this.screensLength-1)return;this.loadScreens(e.highestScreenIndex)}}},{key:"quit",value:function(){this.eventManager.emit({name:"exit",game:this.props.config.id})}},{key:"updateState",value:function(e){"string"==typeof e.path?(console.warn("As of skoash 1.1.1 please trigger updateScreenData directly"),this.updateScreenData(e)):_.isArray(e.path)&&(console.warn("As of skoash 1.1.1 please trigger updateGameData directly"),this.updateGameData(e))}},{key:"updateGameData",value:function(e){var t=e.keys||e.key||e.path;t&&(e.data=_.setWith({},t,e.data,Object)),this.updateData(e)}},{key:"updateScreenData",value:function(e){e.keys=_.filter(["screens",this.state.currentScreenIndex].concat(e.keys).concat(e.key||e.path),_.identity),this.updateGameData(e)}},{key:"updateData",value:function(e){var t=this,o=_.merge(this.state.data,e.data);this.setState({data:o},function(){_.invoke(e.callback,"call",t)})}},{key:"checkComplete",value:function(){_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"checkComplete")}},{key:"screenComplete",value:function(e){this.props.screenComplete.call(this,e)}},{key:"componentWillReceiveProps",value:function(e){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.screens&&e.screens!==this.props.screens&&(this.screensLength=Object.keys(e.screens).length)}},{key:"getClassNames",value:function(){var e=this.refs["screen-"+this.state.currentScreenIndex],o=e?"SCREEN-"+e.props.id:"";return d.default.apply(void 0,["pl-game",r({SFX:this.state.playingSFX.length,"VOICE-OVER":this.state.playingVO.length,
MENU:this.state.openMenus.length},"MENU-"+this.state.openMenus[0],this.state.openMenus[0]),"SCREEN-"+this.state.currentScreenIndex,o].concat(i(this.state.classes),[p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this)]))}},{key:"getStyles",value:function(){var e="scale3d("+this.state.scale+","+this.state.scale+",1)",t=this.state.scale<1?"0px 0px 0px":"50% 0px 0px";return{transform:e,WebkitTransform:e,transformOrigin:t,WebkitTransformOrigin:t}}},{key:"renderScreens",value:function(){var e=this;return _.map(Object.keys(this.props.screens),function(t,o){var n=e.props.screens[t].props||{};return n.data=e.state.data.screens[t],n.gameState=e.state,n.index=o,e.props.screens[t](n,"screen-"+t,t)})}},{key:"renderMenuScreens",value:function(){var e=this;return _.map(this.props.menus,function(t,o){return React.createElement(t.type,l({},t.props,{gameState:e.state,key:o,index:o,ref:"menu-"+o}))})}},{key:"render",value:function(){return React.createElement("div",{className:this.getClassNames(),style:this.getStyles()},this.renderContentList("loader"),this.renderContentList("assets"),this.props.renderMenu.call(this),this.renderScreens(),this.renderMenuScreens())}}]),t}(P.default);E.defaultProps=_.defaults({componentName:"skoash-game",getBackgroundIndex:function(){return 0},passData:_.noop,screens:{0:function(e,t,o){return React.createElement(j.default,l({},e,{ref:t,key:o}))}},menus:{Screen:j.default},ignoreReady:!0,renderMenu:function(){return React.createElement("div",{className:"menu"},React.createElement("button",{className:"close",onClick:this.navigator.openMenu.bind(this,{id:"quit"})}))},getGotoOpts:_.identity,getTriggerEvents:_.identity,triggerReady:!1,getData:function(e){return e.name="getData",this.eventManager.emit(e)},screenComplete:function(e){e.silent||this.playMedia("screen-complete")}},P.default.defaultProps),t.default=E},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(1),p=n(c),f=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.respond=e.respond.bind(e),e.onLoad=e.onLoad.bind(e),e}return a(t,e),u(t,[{key:"bootstrap",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.gameNode=ReactDOM.findDOMNode(this.refs.game),this.gameNode.addEventListener("game-event",this.respond)}},{key:"respond",value:function(e){e.ready?this.phaserReady():e.complete?this.complete():e.updateGameState?this.updateGameState(e.updateGameState):e.updateGameData?this.updateGameData(e.updateGameData):e.updateScreenData&&this.updateScreenData(e.updateScreenData),this.props.onRespond.call(this,e)}},{key:"phaserReady",value:function(){this.setState({phaserReady:!0})}},{key:"onLoad",value:function(){var e=this;this.emitEvent({name:"focus"}),this.setState({loaded:!0},function(){e.props.onLoad.call(e)})}},{key:"pause",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.emitEvent({name:"pause"})}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.pause&&!e||(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this),this.emitEvent({name:"resume"}))}},{key:"emitEvent",value:function(e){var t=new Event("skoash-event");this.state.loaded&&this.state.phaserReady&&(t.name=e.name,t.data=e,this.gameNode.contentWindow.dispatchEvent(t))}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.controller&&this.emitEvent({name:"controller-update",controller:e.controller}),e.data&&this.emitEvent({name:"data-update",data:e.data}),e.pause&&e.pause!==this.props.pause&&this.pause(),e.resume&&e.resume!==this.props.resume&&this.resume(!0)}},{key:"render",value:function(){return React.createElement("iframe",s({},this.props,{ref:"game",onLoad:this.onLoad}))}}]),t}(p.default);f.defaultProps=_.defaults({complete:!1,checkComplete:!1,onLoad:_.noop,onRespond:_.noop},p.default.defaultProps),t.default=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},l=o(2),c=n(l),p=o(1),f=n(p),d=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=_.defaults({enabled:!0},e.state),e}return a(t,e),s(t,[{key:"enable",value:function(){if(!this.state.enabled)return this.setState({enabled:!0}),this.media.enable&&this.media.enable.play(),this.props.onEnable.call(this)}},{key:"disable",value:function(){if(this.state.enabled)return this.setState({enabled:!1}),this.media.disable&&this.media.disable.play(),this.props.onDisable.call(this)}},{key:"interact",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.canInteract()&&(this.props.onInteract.call(this,e),this.media.interact&&this.media.interact.play())}},{key:"canInteract",value:function(){return this.state.enabled&&this.props.canInteract.call(this)}},{key:"bootstrap",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.DOM=ReactDOM.findDOMNode(this)}},{key:"getClassNames",value:function(){return(0,c.default)("interactive-item",{ENABLED:this.state.enabled},u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}}]),t}(f.default);d.defaultProps=_.defaults({onEnable:_.noop,onDisable:_.noop,onInteract:_.noop,canInteract:function(){return!0}},f.default.defaultProps),t.default=d},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h="map",y="canvas",v="image",m="player",b="buffer",g="context",O=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.update=_.throttle(e.update.bind(e),10),e.playCollideSound=_.throttle(e.playCollideSound.bind(e),500),e}return a(t,e),u(t,[{key:"onReady",value:function(){var e=this;this[v]=ReactDOM.findDOMNode(this.refs[v]),this[h]=ReactDOM.findDOMNode(this.refs[h]),this[m]=ReactDOM.findDOMNode(this.refs[m]),this[b]=ReactDOM.findDOMNode(this.refs[y]),this[g]=this[b].getContext("2d"),this.setState({playerX:this.props.startX,playerY:this.props.startY}),this.items=[],this.enemies=[],_.each(this.refs,function(t,o){o.indexOf("items-")?o.indexOf("enemies-")||e.enemies.push(t):e.items.push(t)})}},{key:"start",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),this.setState({playerX:this.props.startX,playerY:this.props.startY}),this.incompleteRefs(),_.each(this.items,function(e){return e.enable()}),_.each(this.enemies,function(e){return e.enable()})}},{key:"update",value:function(){var e,t,o,n=this,r=this.state.playerX,i=this.state.playerY;this[m]&&(this.props.input.up&&(i-=this.props.speed),this.props.input.down&&(i+=this.props.speed),this.props.input.left&&(r-=this.props.speed),this.props.input.right&&(r+=this.props.speed),e=_.some(this.props.input,function(e){return e}),t=this.getCollidingObject(this.enemies,r,i),o=this.getCollidingObject(this.items,r,i),this.isColliding(r,i)?(this.playCollideSound(),this.props.onCollide.call(this)):t?this.props.onCollideEnemy.call(this,t):(o&&this.props.onCollideItem.call(this,o),this.setState({playerX:r,playerY:i},function(){e&&window.requestAnimationFrame(n.update)})))}},{key:"isColliding",value:function(e,t){var o,n;return o=this[v].getBoundingClientRect(),n=this[m].getBoundingClientRect(),this[b].width=o.width/this.props.scale,this[b].height=o.height/this.props.scale,!(!this[b].width||!this[b].height)&&(this[g].clearRect(0,0,this[b].width,this[b].height),this[g].drawImage(this[h],0,0,this[b].width,this[b].height),!(this[g].getImageData(e+n.width/this.props.scale/2,t,1,1).data[0]&&this[g].getImageData(e+n.width/this.props.scale,t+n.width/this.props.scale/2,1,1).data[0]&&this[g].getImageData(e+n.width/this.props.scale/2,t+n.height/this.props.scale,1,1).data[0]&&this[g].getImageData(e,t+n.height/this.props.scale/2,1,1).data[0]))}},{key:"playCollideSound",value:function(){this.playMedia("collide")}},{key:"getCollidingObject",value:function(e,t,o){var n=this,r={width:this[m].offsetWidth,height:this[m].offsetHeight};if(r.width&&r.height)return _.find(e,function(e){return e.canInteract()&&n.doIntersect(t,o,r,e)})}},{key:"doIntersect",value:function(e,t,o,n){var r={left:n.DOM.offsetLeft,top:n.DOM.offsetTop,width:n.DOM.offsetWidth,height:n.DOM.offsetHeight};return skoash.util.doIntersect([{x:e,y:t},{x:e+o.width,y:t},{x:e+o.width,y:t+o.height},{x:e,y:t+o.height}],[{x:r.left,y:r.top},{x:r.left+r.width,y:r.top},{x:r.left+r.width,y:r.top+r.height},{x:r.left,y:r.top+r.height}])}},{key:"getPlayerStyle",value:function(){return{left:this.state.playerX,top:this.state.playerY}}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),window.requestAnimationFrame(this.update)}},{key:"getClassNames",value:function(){return(0,p.default)("labyrinth",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames()}),React.createElement("canvas",{ref:y,className:y}),React.createElement(skoash.Image,{ref:h,className:h,src:this.props.map,crossOrigin:"Anonymous"}),React.createElement(skoash.Image,{ref:v,className:v,src:this.props.img,crossOrigin:"Anonymous"}),this.renderContentList("assets"),this.renderContentList("items"),this.renderContentList("enemies"),React.createElement("div",{ref:m,className:m,style:this.getPlayerStyle()}))}}]),t}(d.default);O.defaultProps=_.defaults({img:"",map:"",input:{},startX:0,startY:0,speed:1,scale:1,items:[],enemies:[],onCollide:_.noop,onCollideEnemy:function(e){e.interact()},onCollideItem:function(e){e.interact()}},d.default.defaultProps),t.default=O},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),u=n(s),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(u.default);l.defaultProps=_.defaults({checkComplete:!1,completeIncorrect:!0,type:"li"},u.default.defaultProps),t.default=l},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},l=o(1),c=n(l),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"play",value:function(e){this.refs[e]&&(this.refs[e].play(),this.props.onPlay.call(this,e))}},{key:"componentWillReceiveProps",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.play&&e.play!==this.props.play&&this.play(e.play)}}]),t}(c.default);p.defaultProps=_.defaults({onPlay:_.noop},c.default.defaultProps),t.default=p},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(1),p=n(c),f=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.playNext=o.playNext.bind(o),o}return a(t,e),u(t,[{key:"start",value:function(){this.props.silentOnStart||this.state.started&&!this.props.playMultiple||this.play()}},{key:"complete",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this),this.setState({started:!1})}},{key:"play",value:function(){this.setState({started:!0}),this.refs[0]&&(this.playingIndex=0,this.refs[0].play()),this.props.checkComplete!==!1&&this.checkComplete()}},{key:"playNext",value:function(){var e=this.refs[++this.playingIndex];e&&this.state.started&&e.play()}},{key:"renderContentList",value:function(){var e=this,t=[].concat(this.props.children);return t.map(function(t,o){return React.createElement(t.type,s({},t.props,{ref:o,key:o,onComplete:function(){e.playNext(),"function"==typeof t.props.onComplete&&t.props.onComplete.call(this,this)}}))})}}]),t}(p.default);f.defaultProps=_.defaults({silentOnStart:!1,playMultiple:!1},p.default.defaultProps),t.default=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"getAll",value:function(){return _.shuffle(this.props.bin)}},{key:"get",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=[];for(this.props.remain&&this.state.bin&&(o=this.state.bin);o.length<t;)o=o.concat(_.shuffle(this.props.bin));return e=o.splice(0,t),this.props.remain&&this.setState({bin:o}),e}},{key:"getClassNames",value:function(){return(0,p.default)("randomizer",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderBin",value:function(){return _.map(this.props.bin,function(e,t){var o=e.ref||e.props&&e.props["data-ref"]||t;return React.createElement(e.type,s({},e.props,{"data-ref":o,ref:o,key:t}))})}},{key:"render",value:function(){return React.createElement("ul",{className:this.getClassNames()},this.renderBin())}}]),t}(d.default);h.defaultProps=_.defaults({bin:[],remain:!1,shouldComponentUpdate:function(){return!1}},d.default.defaultProps),t.default=h},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(1),c=n(l),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"renderContentList",value:function(){for(var e=[],t=0;t<this.props.amount;t++)e.push(React.createElement(this.props.item.type,s({key:t},this.props.item.props,this.props.props[t])));return e}}]),t}(c.default);p.defaultProps=_.defaults({amount:1,item:React.createElement("div",null),props:[]},c.default.defaultProps),t.default=p},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={openReveal:"",currentlyOpen:[]},e.index=0,e}return a(t,e),u(t,[{key:"incomplete",value:function(){this.setState({openReveal:"",currentlyOpen:[]}),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"incomplete",this).call(this)}},{key:"open",value:function(e){var t=this,o=this.props.openMultiple?this.state.currentlyOpen.concat(e):[e];this.setState({open:!0,openReveal:e,currentlyOpen:o}),this.playMedia("open-sound"),this.props.completeOnOpen?this.complete():_.each(this.refs,function(t,o){o===e&&_.invoke(t,"complete")}),this.props.autoClose&&setTimeout(function(){t.close()},2e3),this.props.openTarget&&this.updateScreenData({key:this.props.openTarget,data:{open:""+e,close:!1}}),this.props.onOpen.call(this,e)}},{key:"close",value:function(){var e,t,o,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.state.openReveal,t=this.state.currentlyOpen||[],t.splice(t.indexOf(e),1),n=t.length>0,o=n?t[t.length-1]:"",this.setState({open:n,openReveal:o,currentlyOpen:t}),r.silent||this.playMedia("close-sound"),this.props.openTarget&&this.updateScreenData({key:this.props.openTarget,data:{open:null,close:!1}}),this.props.onClose.call(this,e)}},{key:"start",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),null!=this.props.openOnStart?this.open(this.props.openOnStart):this.props.start&&"function"==typeof this.props.start?this.props.start.call(this):this.close({silent:!0})}},{key:"renderAssets",value:function(){return this.props.assets?this.props.assets.map(function(e,t){var o=e.ref||e.props["data-ref"]||"asset-"+t;return React.createElement(e.type,s({},e.props,{"data-ref":t,ref:o,key:t}))}):null}},{key:"renderList",value:function(){var e=this,t=this.props.list;return t.map(function(t,o){var n=t.ref||t.props["data-ref"]||o;return React.createElement(t.type,s({},t.props,{type:"li",className:e.getClass(t,o),"data-ref":n,ref:n,key:o}))})}},{key:"componentWillReceiveProps",value:function(e){if(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),null!=e.openReveal&&e.openReveal!==this.props.openReveal&&this.open(e.openReveal),e.closeReveal&&e.closeReveal!==this.props.closeReveal)if(e.closeReveal===!0)this.close();else if(Number.isInteger(e.closeReveal))for(var o=0;o<e.closeReveal;o++)this.close()}},{key:"getClass",value:function(e,t){var o="",n=this.state.currentlyOpen||[];return e.props.className&&(o=e.props.className),n.indexOf(t)===-1&&n.indexOf(""+t)===-1&&n.indexOf(e.props["data-ref"])===-1&&n.indexOf(e.ref)===-1||(o=(0,p.default)(o,"OPEN")),o}},{key:"getClassNames",value:function(){var e,o="open-none";return this.state.open&&(o="",_.each(this.state.currentlyOpen,function(e){o+="open-"+e})),e=(0,p.default)("reveal",o,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",{className:this.getClassNames()},this.renderAssets(),React.createElement("div",null,React.createElement("ul",null,this.renderList()),React.createElement("button",{className:"close-reveal",onClick:this.close.bind(this)})))}}]),t}(d.default);h.defaultProps=_.defaults({list:[React.createElement("li",null),React.createElement("li",null),React.createElement("li",null),React.createElement("li",null)],openMultiple:!1,onOpen:_.noop,onClose:_.noop},d.default.defaultProps),t.default=h},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={score:0},e.checkComplete=e.checkComplete.bind(e),e}return a(t,e),u(t,[{key:"checkComplete",value:function(){this.props.checkComplete&&this.state.ready&&_.isFinite(this.props.max)&&(this.state.score>=this.props.max||this.props.correct>=this.props.max)&&!this.state.complete&&this.complete()}},{key:"bootstrap",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setState({score:this.props.startingScore})}},{key:"complete",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this),setTimeout(function(){e.props.resetOnComplete&&e.setScore({correct:0,incorrect:0})},this.props.completeDelay)}},{key:"checkScore",value:function(e){_.isFinite(e.max)&&(this.state.score>=e.max&&(!this.state.complete||e.multipleCompletes)?this.complete():this.state.complete&&!e.complete&&this.incomplete())}},{key:"up",value:function(e){if(e=_.isFinite(e)?e:_.isFinite(this.props.increment)?this.props.increment:1,!_.isFinite(e))throw"increment must be finite";this.updateScore(e)}},{key:"down",value:function(e){if(e=_.isFinite(e)?e:_.isFinite(this.props.downIncrement)?this.props.downIncrement:_.isFinite(this.props.increment)?this.props.increment:1,!_.isFinite(e))throw"increment must be finite";this.updateScore(-1*e)}},{key:"updateScore",value:function(e){var t=this;this.setState({score:this.state.score+e},function(){t.updateScreenData({key:t.props.dataTarget,data:{score:t.state.score}}),t.checkScore(t.props),t.props.onUpdateScore.call(t,t.state.score)})}},{key:"setScore",value:function(e){var t,o,n,r=this;_.isFinite(e)?n=e:(t=_.isFinite(e.increment)?e.increment:1,o=_.isFinite(e.downIncrement)?e.downIncrement:_.isFinite(e.increment)?e.increment:1,n=t*e.correct-o*e.incorrect),this.setState({score:n},function(){r.checkScore(e),r.props.onUpdateScore.call(r,n)})}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),(e.setScore||e.correct!==this.props.correct||e.incorrect!==this.props.incorrect)&&this.setScore(e)}},{key:"getClassNames",value:function(){return(0,p.default)("score","score-"+this.state.score,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames(),"data-max":this.props.max,"data-score":this.state.score,score:this.state.score}),this.props.leadingContent,React.createElement("span",null,this.state.score),this.props.children);
}}]),t}(d.default);h.defaultProps=_.defaults({checkComplete:!1,startingScore:0,correct:0,incorrect:0,setScore:!1,onUpdateScore:_.noop},d.default.defaultProps),t.default=h},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h="image",y="area",v="content",m="scrollbar",b="scroller",g=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=_.defaults({startY:0,endY:0,zoom:1},e.state),e.setZoom=e.setZoom.bind(e),e.mouseDown=e.mouseDown.bind(e),e.mouseUp=e.mouseUp.bind(e),e.moveEvent=e.moveEvent.bind(e),e.touchStart=e.touchStart.bind(e),e.touchEnd=e.touchEnd.bind(e),e}return a(t,e),u(t,[{key:"start",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e[y].scrollTop=0,e.setState({startY:0,endY:0})})}},{key:"bootstrap",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setZoom(),window.addEventListener("resize",this.setZoom),this[y]=ReactDOM.findDOMNode(this.refs[y]),this[v]=ReactDOM.findDOMNode(this.refs[v]),this[m]=ReactDOM.findDOMNode(this.refs[m]),this[b]=ReactDOM.findDOMNode(this.refs[b]),this[y].scrollTop=0,this[y].addEventListener("scroll",function(t){var o,n;t.target&&!e.dragging&&(o=t.target.scrollTop,n=(e[m].offsetHeight-e.props.scrollbarHeight)*(o/(e[v].offsetHeight-e[y].offsetHeight)),e.setState({startY:0,endY:n}))}),this[b].addEventListener("mousedown",this.mouseDown),this[b].addEventListener("touchstart",this.touchStart)}},{key:"setZoom",value:function(){var e=this;skoash.trigger("getState").then(function(t){e.setState({zoom:t.scale})})}},{key:"mouseDown",value:function(e){this.startEvent(e,this.attachMouseEvents)}},{key:"touchStart",value:function(e){this.startEvent(e,this.attachTouchEvents)}},{key:"startEvent",value:function(e,t){var o,n;e.target===this[b]&&(this.dragging=!0,e=e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e,n=this.getEndY(e),o=this.state.startY||n,this.setState({startY:o,endY:n}),"function"==typeof t&&t.call(this))}},{key:"getEndY",value:function(e){return Math.min(Math.max(e.pageY/this.state.zoom,this.state.startY),this.state.startY+this[m].getBoundingClientRect().height/this.state.zoom-this.props.scrollbarHeight)}},{key:"attachMouseEvents",value:function(){window.addEventListener("mousemove",this.moveEvent),window.addEventListener("mouseup",this.mouseUp)}},{key:"attachTouchEvents",value:function(){window.addEventListener("touchmove",this.moveEvent),window.addEventListener("touchend",this.touchEnd)}},{key:"moveEvent",value:function(e){var t;e=e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e,t=this.getEndY(e),this[y].scrollTop=(t-this.state.startY)*(this[v].offsetHeight-this[y].offsetHeight)/(this[m].offsetHeight-this.props.scrollbarHeight),this.setState({endY:t})}},{key:"mouseUp",value:function(){this.dragging=!1,this.detachMouseEvents()}},{key:"touchEnd",value:function(){this.dragging=!1,this.detachTouchEvents()}},{key:"detachMouseEvents",value:function(){window.removeEventListener("mousemove",this.moveEvent),window.removeEventListener("mouseup",this.mouseUp)}},{key:"detachTouchEvents",value:function(){window.removeEventListener("touchmove",this.moveEvent),window.removeEventListener("touchend",this.touchEnd)}},{key:"getScrollerStyle",value:function(){return{backgroundImage:"url("+this.props.img+")",top:this.state.endY-this.state.startY}}},{key:"getClassNames",value:function(){return(0,p.default)("scroll-area",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,s({},this.props,{className:this.getClassNames()}),React.createElement(skoash.Image,{ref:h,className:"hidden",src:this.props.img}),React.createElement("div",{ref:y,className:y},React.createElement("div",{ref:v,className:v},this.renderContentList())),React.createElement("div",{ref:m,className:m},React.createElement("div",{ref:b,className:b,style:this.getScrollerStyle()}))):null}}]),t}(d.default);g.defaultProps=_.defaults({img:"",scrollbarHeight:100},d.default.defaultProps),t.default=g},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={classes:{},selectFunction:e.select},e}return a(t,e),u(t,[{key:"start",value:function(){var e,o=this.state.classes;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),e="HIGHLIGHTED"===this.props.selectClass?this.highlight:this.select,this.props.selectOnStart&&(o[this.props.selectOnStart]=this.props.selectClass),this.setState({started:!0,classes:o,selectFunction:e})}},{key:"bootstrap",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.refs.bin&&this.setState({list:this.refs.bin.getAll()})}},{key:"selectHelper",value:function(e,t){var o,n,r,i;if("string"==typeof e)n=e;else{if(r=e.target.closest("LI"),!r)return;n=r.getAttribute("data-ref")}o=this.refs[n],i=o&&o.props&&o.props.correct||!this.props.answers||!this.props.answers.length||this.props.answers.indexOf(n)!==-1,this.props.allowDeselect&&t[n]?delete t[n]:i&&(t[n]=this.props.selectClass),this.setState({classes:t}),this.props.onSelect.call(this,n),this.props.chooseOne&&this.complete(),this.props.dataTarget&&this.updateScreenData({key:this.props.dataTarget,data:{target:o}}),this.props.completeListOnClick&&_.each(this.refs,function(e,t){t===n&&_.invoke(e,"complete")})}},{key:"select",value:function(e){var t=[];this.selectHelper(e,t)}},{key:"highlight",value:function(e){var t=this.state.classes;this.selectHelper(e,t)}},{key:"getClass",value:function(e,t){return(0,p.default)(t.props.className,this.state.classes[e],this.state.classes[t.props["data-ref"]],this.state.classes[t.props["data-key"]])}},{key:"getClassNames",value:function(){return(0,p.default)("selectable",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.select&&e.select!==this.props.select&&this.state.selectFunction.call(this,e.select)}},{key:"renderBin",value:function(){return this.props.bin?React.createElement(this.props.bin.type,s({},this.props.bin.props,{ref:"bin"})):null}},{key:"renderList",value:function(){var e=this,t=this.props.list||this.state.list;return t.map(function(t,o){var n=t.props["data-ref"]||o,r=t.ref||t.props.id||n,i=t.props.message||""+o;return React.createElement(t.type,s({},t.props,{type:"li",className:e.getClass(o,t),message:i,"data-message":i,"data-ref":n,ref:r,key:o}))})}},{key:"render",value:function(){return React.createElement("div",null,this.renderBin(),React.createElement("ul",{className:this.getClassNames(),onClick:this.state.selectFunction.bind(this)},this.renderList()))}}]),t}(d.default);h.defaultProps=_.defaults({list:[React.createElement("li",null),React.createElement("li",null),React.createElement("li",null),React.createElement("li",null)],selectClass:"SELECTED",completeListOnClick:!0,onSelect:_.noop},d.default.defaultProps),t.default=h},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h="area",y="content",v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=_.defaults({currentSlide:0},e.state),e.prev=e.prev.bind(e),e.next=e.next.bind(e),e.getContentStyle=e.getContentStyle.bind(e),e}return a(t,e),u(t,[{key:"prev",value:function(){this.changeSlide(-1)}},{key:"next",value:function(){this.changeSlide(1)}},{key:"changeSlide",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e=this.props.loop?(this.state.currentSlide+t+this.props.children.length)%this.props.children.length:Math.max(this.state.currentSlide+t,0),this.setState({currentSlide:e})}},{key:"getContentStyle",value:function(){return{marginLeft:this.state.currentSlide*-100+"%"}}},{key:"getClassNames",value:function(){return(0,p.default)("slider",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderContentList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children",o=[].concat(this.props[t]);return o.map(function(o,n){var r,i;if(o)return r=o.ref||o.props&&o.props["data-ref"]||t+"-"+n,i=n===e.state.currentSlide?1:0,React.createElement(o.type,s({gameState:e.props.gameState},o.props,{ref:r,key:n,style:{left:100*n+"%",opacity:i}}))})}},{key:"render",value:function(){return this.props.shouldRender?React.createElement(this.props.type,s({},this.props,{className:this.getClassNames()}),React.createElement("button",{className:"prev-slide",onClick:this.prev}),React.createElement("div",{className:h},React.createElement("div",{className:y,style:this.getContentStyle()},this.renderContentList())),React.createElement("button",{className:"next-slide",onClick:this.next})):null}}]),t}(d.default);v.defaultProps=_.defaults({loop:!0},d.default.defaultProps),t.default=v},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=o(8),y=n(h),v=o(9),m=n(v),b=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state=_.defaults({frame:e.frame},o.state),o.lastAnimation=Date.now(),o.onJSONReady=o.onJSONReady.bind(o),o}return a(t,e),u(t,[{key:"onJSONReady",value:function(){this.data=this.refs.json.getData(),this.setUp(this.props)}},{key:"setUp",value:function(e){var t=this,o=void 0,n=void 0,r=void 0,i=void 0;if(this.image=e.src+"."+e.extension,e.frames?(this.frames=e.frames,this.data={},this.imageRef=ReactDOM.findDOMNode(this.refs.image),this.imageRef.onload=function(){t.checkReady(),t.update(e),e.animate?t.animate():e.animateBackwards&&t.animate(-1)},this.imageRef.src=this.image):this.data&&this.data.frames&&(this.frames=this.data.frames.length,this.checkReady(),this.update(e),r=_.reduce(this.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.x)},1/0),i=_.reduce(this.data.frames,function(e,t){return Math.min(e,t.spriteSourceSize.y)},1/0),o=_.reduce(this.data.frames,function(e,t){return Math.max(e,t.spriteSourceSize.x+t.spriteSourceSize.w-r)},0),n=_.reduce(this.data.frames,function(e,t){return Math.max(e,t.spriteSourceSize.y+t.spriteSourceSize.h-i)},0),this.setState({maxWidth:o,maxHeight:n,minX:r,minY:i}),e.animate?this.animate():e.animateBackwards&&this.animate(-1)),this.frameRates=[],_.isArray(e.duration))for(var a=0;a<this.frames;a++)this.frameRates.push(e.duration[a]);else for(var s=0;s<this.frames;s++)this.frameRates.push(e.duration/this.frames)}},{key:"update",value:function(e){var t=this,o=void 0,n=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0;e=e||this.props,e.frames?(o=0,n=0,a=this.imageRef.naturalWidth/e.frames,s=this.imageRef.naturalHeight,u=a,l=s,r="-"+this.state.frame*a+"px 0px",i=this.imageRef.naturalWidth+"px "+this.imageRef.naturalHeight+"px"):this.data&&this.data.frames&&(this.frameData=this.data.frames[this.state.frame],o=this.frameData.spriteSourceSize.y,n=this.frameData.spriteSourceSize.x,r="-"+this.frameData.frame.x+"px -"+this.frameData.frame.y+"px",i=this.data.meta.size.w+"px "+this.data.meta.size.h+"px",a=this.frameData.frame.w,s=this.frameData.frame.h,u=this.state.maxWidth,l=this.state.maxHeight),this.setState({styleTop:o,styleLeft:n,backgroundPosition:r,backgroundSize:i,width:a,height:s,maxWidth:u,maxHeight:l},function(){e.onUpdate.call(t)})}},{key:"bootstrap",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bootstrap",this).call(this),this.setUp(this.props),null!=this.props.hoverFrame&&this.setUpHover(this.props)}},{key:"setUpHover",value:function(e){var t=this;this.refs.view.addEventListener("mouseover",function(){t.setState({frame:e.hoverFrame},function(){t.update(e)})}),this.refs.view.addEventListener("mouseout",function(){t.setState({frame:e.frame},function(){t.update(e)})})}},{key:"ready",value:function(){this.data&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this)}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=Date.now(),n=void 0;if(!(this.props.static||this.props.pause||this.state.paused)&&this.state.started){if(!this.props.loop){if(this.props.animateBackwards&&0===this.state.frame)return void this.complete();if(this.state.frame===this.frames-1)return void this.complete()}o>this.lastAnimation+this.frameRates[this.state.frame]&&(this.lastAnimation=o,n=(this.state.frame+t+this.frames)%this.frames,0===n&&this.props.onLoop.call(this),this.setState({frame:n},function(){e.update(e.props)})),window.requestAnimationFrame(function(){e.animate(t)})}}},{key:"start",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this,function(){e.props.animate&&e.animate()})}},{key:"pause",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.setState({paused:!0})}},{key:"resume",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this),this.setState({paused:!1},function(){e.props.animate?e.animate():e.props.animateBackwards&&e.animate(-1)})}},{key:"componentWillReceiveProps",value:function(e){var o=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.src===this.props.src&&e.frames===this.props.frames||this.setUp(e),e.frame!==this.props.frame&&this.setState({frame:e.frame},function(){o.update(e)}),e.animate&&e.animate!==this.props.animate?this.animate():e.animateBackwards&&this.animate(-1)}},{key:"getContainerStyle",value:function(){var e=void 0,t=void 0;return this.props.static||(e=this.state.maxWidth,t=this.state.maxHeight),{display:"inline-block",width:e,height:t}}},{key:"getStyle",value:function(){var e=void 0,t=void 0,o=void 0;return this.props.static||(e="absolute",t=this.state.styleTop-this.state.minY||void 0,o=this.state.styleLeft-this.state.minX||void 0),_.defaults({position:e,top:t,left:o,backgroundImage:"url("+this.props.src+"."+this.props.extension+")",backgroundRepeat:"no-repeat",backgroundPosition:this.state.backgroundPosition,backgroundSize:this.state.backgroundSize,width:this.state.width,height:this.state.height},this.props.style)}},{key:"getClassNames",value:function(){return(0,p.default)("sprite",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"renderJSON",value:function(){return this.props.frames?null:React.createElement(m.default,{ref:"json",src:this.props.src+"."+this.props.dataExtension,onReady:this.onJSONReady})}},{key:"render",value:function(){return React.createElement("div",s({},this.props,{className:this.getClassNames(),style:this.getContainerStyle()}),React.createElement(y.default,{className:"hidden",ref:"image",src:this.image}),this.renderJSON(),React.createElement("div",{ref:"view",className:"view",style:this.getStyle()}))}}]),t}(d.default);b.defaultProps=_.defaults({src:"",extension:"png",dataExtension:"json",duration:1e3,frame:0,hoverFrame:null,static:!1,pause:!1,loop:!0,animate:!1,animateBackwards:!1,onLoop:_.noop,onUpdate:_.noop,style:{}},d.default.defaultProps),t.default=b},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(46),d=n(f),h=o(1),y=n(h),v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uniqueID=(0,d.default)(Math.random()),e.sprite={},console.warn("Consider switching to skoash.Sprite as SpriteAnimation will soon be deprecated."),e}return a(t,e),u(t,[{key:"onReady",value:function(){this.sprite=ReactDOM.findDOMNode(this.refs.sprite)}},{key:"start",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),this.props.animateOnStart&&this.animate()}},{key:"animate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({animate:e})}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.animate!==this.props.animate&&this.animate(e.animate)}},{key:"getStyle",value:function(){var e=""+this.uniqueID+(this.state.animate?"":"-back")+" "+(this.props.duration+"s steps("+(this.props.frames-1)+") forwards");return{backgroundImage:"url("+this.props.src+")",backgroundSize:this.sprite.offsetWidth*this.props.frames+"px",WebkitAnimation:e,animation:e}}},{key:"getClassNames",value:function(){return(0,p.default)("sprite-animation",{ANIMATE:this.state.animate},this.uniqueID,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("style",null,"@keyframes "+this.uniqueID+" {\n    0% {\n        background-position: 0px center;\n    }\n    100% {\n        background-position: -"+(this.sprite.offsetWidth*(this.props.frames-1)+"px center;\n")+"    }\n}\n"+("@keyframes "+this.uniqueID+"-back {\n")+"    0% {\n        background-position: -"+(this.sprite.offsetWidth*(this.props.frames-1)+"px center;\n")+"    }\n    100% {\n        background-position: 0px center;\n    }\n}\n"),React.createElement("div",s({},this.props,{ref:"sprite",className:this.getClassNames(),style:this.getStyle()})))}}]),t}(y.default);v.defaultProps=_.defaults({animateOnStart:!0,src:"",frames:1,duration:1},y.default.defaultProps),t.default=v},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(2),p=n(c),f=o(1),d=n(f),h=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={time:0,stamp:0},e.checkComplete=e.checkComplete.bind(e),e}return a(t,e),u(t,[{key:"checkComplete",value:function(){var e=this,t=Date.now();this.props.checkComplete&&this.state.started&&!this.state.paused&&(t>=this.state.stamp?this.setState({stamp:t+1e3,time:this.state.time+1e3},function(){e.state.time>=e.props.timeout?(e.complete(),e.stop()):("function"==typeof e.props.onCheckComplete&&e.props.onCheckComplete.call(e),window.requestAnimationFrame(e.checkComplete))}):window.requestAnimationFrame(this.checkComplete))}},{key:"incompleteRefs",value:function(){this.restart()}},{key:"restart",value:function(){var e=this;this.state.ready&&(this.state.complete&&this.incomplete(),this.setState({time:0,stamp:0},function(){e.state.started?e.checkComplete():e.start()}))}},{key:"stop",value:function(){this.state.started&&this.setState({started:!1})}},{key:"pause",value:function(){this.state.started&&this.setState({paused:!0})}},{key:"resume",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=_.defaults(t,this.props),!t.pause&&this.state.paused&&this.setState({paused:!1},function(){e.state.started?e.checkComplete():e.start()})}},{key:"componentWillReceiveProps",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),e.restart&&e.restart!==this.props.restart&&this.restart(),e.pause&&e.pause!==this.props.pause&&this.pause(),e.resume&&e.resume!==this.props.resume&&this.resume(e)}},{key:"getClassNames",value:function(){return(0,p.default)("timer",l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getClassNames",this).call(this))}},{key:"render",value:function(){var e=this.props.getTime.call(this);return React.createElement("div",s({},this.props,{className:this.getClassNames(),time:e}),this.props.leadingContent,React.createElement("span",null,e),this.props.children)}}]),t}(d.default);h.defaultProps=_.defaults({getTime:function(){return moment(this.props.countDown?this.props.timeout-this.state.time:this.state.time).format(this.props.format)},format:"m:ss",leadingContent:"",timeout:6e4,countDown:!1},d.default.defaultProps),t.default=h},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},c=o(4),p=n(c),f=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.play=o.play.bind(o),o}return a(t,e),u(t,[{key:"play",value:function(){this.playing&&!this.paused||(this.video.play(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),skoash.trigger("videoPlay",{video:this}),this.playing=!0,this.paused=!1)}},{key:"start",value:function(){this.play()}},{key:"stop",value:function(){this.video.pause(),skoash.trigger("videoStop",{video:this}),this.playing=!1}},{key:"pause",value:function(){this.video.pause(),this.paused=!0}},{key:"resume",value:function(){this.play()}},{key:"complete",value:function(){this.props.loop||skoash.trigger("videoStop",{video:this}),this.playing=!1,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"complete",this).call(this)}},{key:"bootstrap",value:function(){this.video=ReactDOM.findDOMNode(this)}},{key:"render",value:function(){return React.createElement("video",s({},this.props,{onCanPlay:this.ready,onEnded:this.complete,preload:"auto",controls:!0}))}}]),t}(p.default);t.default=f},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(t){o(this,e),this.detechDevice=this.detechDevice.bind(t)}return n(e,[{key:"detechDevice",value:function(){this.setState({iOS:this.deviceDetector.iOS(),mobile:this.deviceDetector.mobileOrTablet()})}},{key:"iOS",value:function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}},{key:"mobileOrTablet",value:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0);
}(navigator.userAgent||navigator.vendor||window.opera),e}}]),e}();t.default=r},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=function(){function e(t){o(this,e),this.attachEvents=this.attachEvents.bind(t),this.onKeyDown=this.onKeyDown.bind(t),this.emit=this.emit.bind(t),this.emitSave=this.emitSave.bind(t),this.trigger=this.trigger.bind(t),this.attachEvents()}return r(e,[{key:"attachEvents",value:function(){var e,t,o=this;window.addEventListener("resize",function(){o.scale()}),window.addEventListener("orientationchange",function(){window.dispatchEvent(new Event("resize"))}),window.parent&&window.parent.addEventListener("orientationchange",function(){window.dispatchEvent(new Event("orientationchange"))}),window.addEventListener("keydown",function(e){o.eventManager.onKeyDown(e)}),window.addEventListener("platform-event",function(e){o.eventManager.trigger(e.name,e.gameData)}),window.addEventListener("trigger",function(e){o.eventManager.trigger(e.name,e.opts)}),window.addEventListener("load",window.focus),window.addEventListener("focus",function(){o.resume()}),e=function(){for(var e=document.activeElement.parentNode;null!=e;){if(e===o.DOMNode)return;e=e.parentNode}o.pause()},t=function(){o.pause()},window.addEventListener("blur",e),"hidden"in document?document.addEventListener("visibilitychange",t):"mozHidden"in document?document.addEventListener("mozvisibilitychange",t):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",t):"msHidden"in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t}},{key:"onKeyDown",value:function(e){78===e.keyCode?this.navigator.goto({index:this.state.currentScreenIndex+1}):66===e.keyCode?this.navigator.goto({index:this.state.currentScreenIndex-1}):e.altKey&&e.ctrlKey&&68===e.keyCode&&this.demo()}},{key:"emit",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this;return e=new Promise(function(e){var r;"object"===("undefined"==typeof t?"undefined":n(t))&&(t.game||(t.game=o.props.config.id),t.version||(t.version=o.props.config.version),r=new Event("game-event",{bubbles:!0,cancelable:!1}),r.name=t.name,r.gameData=t,r.respond=t.respond||function(t){e(t)},window.frameElement&&window.frameElement.dispatchEvent(r))}),e.then(function(e){o.eventManager.trigger(e.name,e)}),e}},{key:"emitSave",value:function(e,t){e<2||this.eventManager.emit({name:"save",game:this.props.config.id,version:this.props.config.version,highestScreenIndex:e,currentScreenIndex:t})}},{key:"trigger",value:function(e,t){_.invoke(this.props.getTriggerEvents.call(this,{goto:this.navigator.goto,goBack:this.navigator.goBack,audioPlay:this.mediaManager.audioPlay,audioStop:this.mediaManager.audioStop,videoPlay:this.mediaManager.videoPlay,videoStop:this.mediaManager.videoStop,demo:this.demo,toggleDemoMode:this.demo,getData:this.getData,passData:this.passData,updateState:this.updateState,updateGameData:this.updateGameData,updateScreenData:this.updateScreenData,updateData:this.updateData,screenComplete:this.screenComplete,openMenu:this.navigator.openMenu,menuClose:this.navigator.menuClose,getState:this.getState,emit:this.eventManager.emit,quit:this.quit,save:this.load,complete:this.checkComplete,incomplete:this.checkComplete,ready:this.checkReady,resize:this.scale,getGame:this.getGame})[_.camelCase(e)],"call",this,t)}}]),e}();t.default=i},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(t){o(this,e),this.audioPlay=this.audioPlay.bind(t),this.audioStop=this.audioStop.bind(t),this.videoPlay=this.videoPlay.bind(t),this.videoStop=this.videoStop.bind(t),this.fadeBackground=this.fadeBackground.bind(t),this.raiseBackground=this.raiseBackground.bind(t),this.playBackground=this.playBackground.bind(t)}return n(e,[{key:"audioPlay",value:function(e){var t=this.state.playingSFX||[],o=this.state.playingVO||[],n=this.state.playingBKG||[],r=this.state.classes||[];switch(e.audio.props.gameClass&&r.push(e.audio.props.gameClass),e.audio.props.type){case"sfx":t.push(e.audio);break;case"voiceOver":o.push(e.audio),this.mediaManager.fadeBackground();break;case"background":n.push(e.audio)}this.setState({playingSFX:t,playingVO:o,playingBKG:n,classes:r})}},{key:"audioStop",value:function(e){var t,o=this.state.playingSFX||[],n=this.state.playingVO||[],r=this.state.playingBKG||[];switch(e.audio.props.type){case"sfx":t=o.indexOf(e.audio),t!==-1&&o.splice(t,1);break;case"voiceOver":t=n.indexOf(e.audio),t!==-1&&n.splice(t,1),n.length||this.mediaManager.raiseBackground();break;case"background":t=r.indexOf(e.audio),t!==-1&&r.splice(t,1)}this.setState({playingSFX:o,playingVO:n,playingBKG:r})}},{key:"videoPlay",value:function(e){var t=this.state.playingVideo;t&&t.stop(),t=e.video,this.mediaManager.fadeBackground(0),this.setState({playingVideo:t})}},{key:"videoStop",value:function(){this.mediaManager.raiseBackground(1),this.setState({playingVideo:null})}},{key:"fadeBackground",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25;_.each(this.state.playingBKG,function(t){return _.invoke(t,"setVolume",e)})}},{key:"raiseBackground",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;0!==this.state.playingVO.length||this.state.playingVideo||_.each(this.state.playingBKG,function(t){return _.invoke(t,"setVolume",e)})}},{key:"playBackground",value:function(e,t){var o,n,r;_.isFinite(e)&&(o=this.getBackgroundIndex(e,t),n=this.state.playingBKG,r=this.refs["screen-"+e],(r.props.restartBackground||n.indexOf(this.media.audio.background[o])===-1)&&(_.each(n,function(e){return _.invoke(e,"stop")}),this.playMedia("audio.background."+o)))}}]),e}();t.default=r},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(t){o(this,e),this.goto=this.goto.bind(t),this.shouldGoto=this.shouldGoto.bind(t),this.openNewScreen=this.openNewScreen.bind(t),this.closeOldScreen=this.closeOldScreen.bind(t),this.getDefaultButtonSound=this.getDefaultButtonSound.bind(t),this.goBack=this.goBack.bind(t),this.openMenu=this.openMenu.bind(t),this.menuClose=this.menuClose.bind(t)}return n(e,[{key:"goto",value:function(e){var t,o,n,r,i,a,s,u,l,c,p;if(e=this.props.getGotoOpts.call(this,e),r=this.state.currentScreenIndex,t=this.refs["screen-"+r],"number"==typeof e.index){if(e.index>this.screensLength-1)return this.quit();i=Math.min(this.screensLength-1,Math.max(0,e.index)),l=Math.max(this.state.highestScreenIndex,i),s=this.refs["screen-"+(i+1)],u=this.refs["screen-"+(i+2)],o=this.refs["screen-"+(i-1)],n=this.refs["screen-"+(i-2)]}else"string"==typeof e.index&&(i=e.index,l=this.state.highestScreenIndex);a=this.refs["screen-"+i],this.navigator.shouldGoto(t,a,e)&&(p=this.navigator.closeOldScreen(t,a,e,r),c=this.navigator.openNewScreen(a,i,e),_.invoke(n,"unload"),_.invoke(o,"replay"),_.invoke(s,"load"),_.invoke(u,"unload"),e.load||this.eventManager.emitSave(l,i),this.mediaManager.playBackground(i,a.props.id),this.setState({loading:!1,currentScreenIndex:i,highestScreenIndex:l,screenIndexArray:c,classes:[],data:p}))}},{key:"shouldGoto",value:function(e,t,o){return!(!o.load&&e&&e.state&&e.state.opening||e.props.index<t.props.index&&!o.load&&!this.state.demo&&!e.state.complete&&!e.state.replay||e.props.index>t.props.index&&0===t.props.index)}},{key:"openNewScreen",value:function(e,t,o){var n=this.state.screenIndexArray;return e?(e.state.load&&e.state.ready?e.open(o):this.loadScreens(t),n.push(t),n):n}},{key:"closeOldScreen",value:function(e,t,o,n){var r,i=e.props.index>t.props.index,a=_.cloneDeep(this.state.data);return e&&e!==t?(i?e.close():e.leave(),e.props.resetOnClose&&(a.screens[n]={}),o.silent?a:(r=this.navigator.getDefaultButtonSound(i),o.buttonSound&&(r=o.buttonSound),_.invoke(r,"play"),a)):a}},{key:"getDefaultButtonSound",value:function(e){var t,o=e?"back":"next";return t=this.media.audio[o]||this.media.audio.button||t}},{key:"goBack",value:function(){var e,t;e=this.state.screenIndexArray,e.pop(),t=e.pop(),this.navigator.goto({index:t})}},{key:"openMenu",value:function(e){var t,o;t=this.refs["menu-"+e.id],t&&(t.open(),o=this.state.openMenus||[],o.push(e.id),this.playMedia("button"),this.setState({openMenus:o})),_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"pause")}},{key:"menuClose",value:function(e){var t,o;t=this.refs["menu-"+e.id],t&&(t.close(),o=this.state.openMenus||[],o.splice(e.id,1),this.playMedia("button"),this.setState({openMenus:o})),o.length||_.invoke(this.refs["screen-"+this.state.currentScreenIndex],"resume")}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o,n,r,i,a,s,u,l,c=[e,t];for(i=0;i<c.length;i++){var p=c[i];for(a=0;a<p.length;a++){var f=(a+1)%p.length,d=p[a],h=p[f],y={x:h.y-d.y,y:d.x-h.x};for(o=n=void 0,s=0;s<e.length;s++)r=y.x*e[s].x+y.y*e[s].y,("undefined"==typeof o||r<o)&&(o=r),("undefined"==typeof n||r>n)&&(n=r);for(u=l=void 0,s=0;s<t.length;s++)r=y.x*t[s].x+y.y*t[s].y,("undefined"==typeof u||r<u)&&(u=r),("undefined"==typeof l||r>l)&&(l=r);if(n<u||l<o)return!1}}return!0}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,i.default)(e,function(e){t(JSON.parse(e))})};var r=o(11),i=n(r)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var n;t=t||_.get(e,"props.config.id"),n=document.getElementById(t),n||(n=document.createElement("DIV"),n.id=t,document.body.appendChild(n)),e="object"===("undefined"==typeof e?"undefined":o(e))?e:React.createElement(e,null),ReactDOM.render(e,n)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(o){var n=new Event("trigger",{bubbles:!1,cancelable:!1});n.name=e,n.opts=t,n.opts.respond=function(e){o(e)},window.dispatchEvent(n)})}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(43),i=n(r);t.default={SelectableReveal:i.default}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return React.createElement($k.Component,{className:"selectable-reveal"},React.createElement($k.MediaCollection,o({play:_.get(e,"data.reveal.open"),children:t.media},t.MediaCollectionProps)),React.createElement($k.Selectable,o({dataTarget:"selectable",list:t.selectables},t.SelectableProps)),React.createElement($k.Reveal,o({openTarget:"reveal",openReveal:_.get(e,"data.selectable.target.props.message"),list:t.reveals},t.RevealProps)))}},function(e,t,o){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function o(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())})}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.a.offsetWidth,o=t+100;return e.f.style.width=o+"px",e.c.scrollLeft=o,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,o){function n(){var e=r;i(e)&&e.a.parentNode&&o(e.g)}var r=e;t(e.b,n),t(e.c,n),i(e)}function s(e,t){var o=t||{};this.family=e,this.style=o.style||"normal",this.weight=o.weight||"normal",this.stretch=o.stretch||"normal"}function u(){if(null===f){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}f=""!==e.style.font}return f}function l(e,t){return[e.style,e.weight,u()?e.stretch:"","100px",t].join(" ")}var c=null,p=null,f=null,d=null;s.prototype.load=function(e,t){var i=this,s=e||"BESbswy",u=0,f=t||3e3,h=(new Date).getTime();return new Promise(function(e,t){var y;if(null===d&&(d=!!document.fonts),(y=d)&&(null===p&&(p=/OS X.*Version\/10\.0.*Safari/.test(window.navigator.userAgent)&&/Apple/.test(window.navigator.vendor)),y=!p),y){y=new Promise(function(e,t){function o(){(new Date).getTime()-h>=f?t():document.fonts.load(l(i,'"'+i.family+'"'),s).then(function(t){1<=t.length?e():setTimeout(o,25)},function(){t()})}o()});var v=new Promise(function(e,t){u=setTimeout(t,f)});Promise.race([v,y]).then(function(){clearTimeout(u),e(i)},function(){t(i)})}else o(function(){function o(){var t;(t=-1!=m&&-1!=b||-1!=m&&-1!=g||-1!=b&&-1!=g)&&((t=m!=b&&m!=g&&b!=g)||(null===c&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=c&&(m==_&&b==_&&g==_||m==O&&b==O&&g==O||m==w&&b==w&&g==w)),t=!t),t&&(k.parentNode&&k.parentNode.removeChild(k),clearTimeout(u),e(i))}function p(){if((new Date).getTime()-h>=f)k.parentNode&&k.parentNode.removeChild(k),t(i);else{var e=document.hidden;!0!==e&&void 0!==e||(m=d.a.offsetWidth,b=y.a.offsetWidth,g=v.a.offsetWidth,o()),u=setTimeout(p,50)}}var d=new n(s),y=new n(s),v=new n(s),m=-1,b=-1,g=-1,_=-1,O=-1,w=-1,k=document.createElement("div");k.dir="ltr",r(d,l(i,"sans-serif")),r(y,l(i,"serif")),r(v,l(i,"monospace")),k.appendChild(d.a),k.appendChild(y.a),k.appendChild(v.a),document.body.appendChild(k),_=d.a.offsetWidth,O=y.a.offsetWidth,w=v.a.offsetWidth,p(),a(d,function(e){m=e,o()}),r(d,l(i,'"'+i.family+'",sans-serif')),a(y,function(e){b=e,o()}),r(y,l(i,'"'+i.family+'",serif')),a(v,function(e){g=e,o()}),r(v,l(i,'"'+i.family+'",monospace'))})})},e.exports=s}()},function(e,t,o){var n;/*!
	 *  howler.js v1.1.29
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){var r={},i=null,a=!0,s=!1;try{"undefined"!=typeof AudioContext?i=new AudioContext:"undefined"!=typeof webkitAudioContext?i=new webkitAudioContext:a=!1}catch(e){a=!1}if(!a)if("undefined"!=typeof Audio)try{new Audio}catch(e){s=!0}else s=!0;if(a){var u="undefined"==typeof i.createGain?i.createGainNode():i.createGain();u.gain.value=1,u.connect(i.destination)}var l=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=a,this.ctx=i,this.noAudio=s,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};l.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&e<=1){t._volume=e,a&&(u.gain.value=e);for(var o in t._howls)if(t._howls.hasOwnProperty(o)&&t._howls[o]._webAudio===!1)for(var n=0;n<t._howls[o]._audioNode.length;n++)t._howls[o]._audioNode[n].volume=t._howls[o]._volume*t._volume;return t}return a?u.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,a&&(u.gain.value=e?0:t._volume);for(var o in t._howls)if(t._howls.hasOwnProperty(o)&&t._howls[o]._webAudio===!1)for(var n=0;n<t._howls[o]._audioNode.length;n++)t._howls[o]._audioNode[n].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!i||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var t=function(){var o=i.createBuffer(1,1,22050),n=i.createBufferSource();n.buffer=o,n.connect(i.destination),"undefined"==typeof n.start?n.noteOn(0):n.start(0),setTimeout(function(){n.playbackState!==n.PLAYING_STATE&&n.playbackState!==n.FINISHED_STATE||(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",t,!1))},0)};return window.addEventListener("touchend",t,!1),e}}};var c=null,p={};s||(c=new Audio,p={mp3:!!c.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var f=new l(p),d=function(e){var t=this;t._autoplay=e.autoplay||!1,t._buffer=e.buffer||!1,t._duration=e.duration||0,t._format=e.format||null,t._loop=e.loop||!1,t._loaded=!1,t._sprite=e.sprite||{},t._src=e.src||"",t._pos3d=e.pos3d||[0,0,-.5],t._volume=void 0!==e.volume?e.volume:1,t._urls=e.urls||[],t._rate=e.rate||1,t._model=e.model||null,t._onload=[e.onload||function(){}],t._onloaderror=[e.onloaderror||function(){}],t._onend=[e.onend||function(){}],t._onpause=[e.onpause||function(){}],t._onplay=[e.onplay||function(){}],t._onendTimer=[],t._webAudio=a&&!t._buffer,t._audioNode=[],t._webAudio&&t._setupAudioNode(),"undefined"!=typeof i&&i&&f.iOSAutoEnable&&f._enableiOSAudio(),f._howls.push(t),t.load()};if(d.prototype={load:function(){var e=this,t=null;if(s)return void e.on("loaderror",new Error("No audio support."));for(var o=0;o<e._urls.length;o++){var n,r;if(e._format)n=e._format;else{if(r=e._urls[o],n=/^data:audio\/([^;,]+);/i.exec(r),n||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),!n)return void e.on("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));n=n[1].toLowerCase()}if(p[n]){t=e._urls[o];break}}if(!t)return void e.on("loaderror",new Error("No codec support for selected audio sources."));if(e._src=t,e._webAudio)h(e,t);else{var i=new Audio;i.addEventListener("error",function(){i.error&&4===i.error.code&&(l.noAudio=!0),e.on("loaderror",{type:i.error?i.error.code:0})},!1),e._audioNode.push(i),i.src=t,i._pos=0,i.preload="auto",i.volume=f._muted?0:e._volume*f.volume();var a=function(){e._duration=Math.ceil(10*i.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),i.removeEventListener("canplaythrough",a,!1)};i.addEventListener("canplaythrough",a,!1),i.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,t){var o=this;return"function"==typeof e&&(t=e),e&&"function"!=typeof e||(e="_default"),o._loaded?o._sprite[e]?(o._inactiveNode(function(n){n._sprite=e;var r=n._pos>0?n._pos:o._sprite[e][0]/1e3,a=0;o._webAudio?(a=o._sprite[e][1]/1e3-n._pos,n._pos>0&&(r=o._sprite[e][0]/1e3+r)):a=o._sprite[e][1]/1e3-(r-o._sprite[e][0]/1e3);var s,u=!(!o._loop&&!o._sprite[e][2]),l="string"==typeof t?t:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:l,sprite:e,loop:u};s=setTimeout(function(){!o._webAudio&&u&&o.stop(t.id).play(e,t.id),o._webAudio&&!u&&(o._nodeById(t.id).paused=!0,o._nodeById(t.id)._pos=0,o._clearEndTimer(t.id)),o._webAudio||u||o.stop(t.id),o.on("end",l)},a/o._rate*1e3),o._onendTimer.push({timer:s,id:t.id})}(),o._webAudio){var c=o._sprite[e][0]/1e3,p=o._sprite[e][1]/1e3;n.id=l,n.paused=!1,m(o,[u,c,p],l),o._playStart=i.currentTime,n.gain.value=o._volume,"undefined"==typeof n.bufferSource.start?u?n.bufferSource.noteGrainOn(0,r,86400):n.bufferSource.noteGrainOn(0,r,a):u?n.bufferSource.start(0,r,86400):n.bufferSource.start(0,r,a)}else{if(4!==n.readyState&&(n.readyState||!navigator.isCocoonJS))return o._clearEndTimer(l),function(){var r=o,i=e,a=t,s=n,u=function(){r.play(i,a),s.removeEventListener("canplaythrough",u,!1)};s.addEventListener("canplaythrough",u,!1)}(),o;n.readyState=4,n.id=l,n.currentTime=r,n.muted=f._muted||n.muted,n.volume=o._volume*f.volume(),setTimeout(function(){n.play()},0)}return o.on("play"),"function"==typeof t&&t(l),o}),o):("function"==typeof t&&t(),o):(o.on("load",function(){o.play(e,t)}),o)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var o=e?t._nodeById(e):t._activeNode();if(o)if(o._pos=t.pos(null,e),t._webAudio){if(!o.bufferSource||o.paused)return t;o.paused=!0,"undefined"==typeof o.bufferSource.stop?o.bufferSource.noteOff(0):o.bufferSource.stop(0)}else o.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var o=e?t._nodeById(e):t._activeNode();if(o)if(o._pos=0,t._webAudio){if(!o.bufferSource||o.paused)return t;o.paused=!0,"undefined"==typeof o.bufferSource.stop?o.bufferSource.noteOff(0):o.bufferSource.stop(0)}else isNaN(o.duration)||(o.pause(),o.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var o=e?t._nodeById(e):t._activeNode();return o&&(t._webAudio?o.gain.value=0:o.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var o=e?t._nodeById(e):t._activeNode();return o&&(t._webAudio?o.gain.value=t._volume:o.muted=!1),t},volume:function(e,t){var o=this;if(e=parseFloat(e),e>=0&&e<=1){if(o._volume=e,!o._loaded)return o.on("play",function(){o.volume(e,t)}),o;var n=t?o._nodeById(t):o._activeNode();return n&&(o._webAudio?n.gain.value=e:n.volume=e*f.volume()),o}return o._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,t){var o=this;if(!o._loaded)return o.on("load",function(){o.pos(e)}),"number"==typeof e?o:o._pos||0;e=parseFloat(e);var n=t?o._nodeById(t):o._activeNode();if(n)return e>=0?(o.pause(t),n._pos=e,o.play(n._sprite,t),o):o._webAudio?n._pos+(i.currentTime-o._playStart):n.currentTime;if(e>=0)return o;for(var r=0;r<o._audioNode.length;r++)if(o._audioNode[r].paused&&4===o._audioNode[r].readyState)return o._webAudio?o._audioNode[r]._pos:o._audioNode[r].currentTime},pos3d:function(e,t,o,n){var r=this;if(t="undefined"!=typeof t&&t?t:0,o="undefined"!=typeof o&&o?o:-.5,!r._loaded)return r.on("play",function(){r.pos3d(e,t,o,n)}),r;if(!(e>=0||e<0))return r._pos3d;if(r._webAudio){var i=n?r._nodeById(n):r._activeNode();i&&(r._pos3d=[e,t,o],i.panner.setPosition(e,t,o),i.panner.panningModel=r._model||"HRTF")}return r},fade:function(e,t,o,n,r){var i=this,a=Math.abs(e-t),s=e>t?"down":"up",u=a/.01,l=o/u;if(!i._loaded)return i.on("load",function(){i.fade(e,t,o,n,r)}),i;i.volume(e,r);for(var c=1;c<=u;c++)!function(){var e=i._volume+("up"===s?.01:-.01)*c,o=Math.round(1e3*e)/1e3,a=t;setTimeout(function(){i.volume(o,r),o===a&&n&&n()},l*c)}()},fadeIn:function(e,t,o){return this.volume(0).play().fade(0,e,t,o)},fadeOut:function(e,t,o,n){var r=this;return r.fade(r._volume,e,t,function(){o&&o(),r.pause(n),r.on("end")},n)},_nodeById:function(e){for(var t=this,o=t._audioNode[0],n=0;n<t._audioNode.length;n++)if(t._audioNode[n].id===e){o=t._audioNode[n];break}return o},_activeNode:function(){for(var e=this,t=null,o=0;o<e._audioNode.length;o++)if(!e._audioNode[o].paused){t=e._audioNode[o];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,o=null,n=0;n<t._audioNode.length;n++)if(t._audioNode[n].paused&&4===t._audioNode[n].readyState){e(t._audioNode[n]),o=!0;break}if(t._drainPool(),!o){var r;if(t._webAudio)r=t._setupAudioNode(),e(r);else{t.load(),r=t._audioNode[t._audioNode.length-1];var i=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",a=function(){r.removeEventListener(i,a,!1),e(r)};r.addEventListener(i,a,!1)}}},_drainPool:function(){var e,t=this,o=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&o++;for(e=t._audioNode.length-1;e>=0&&!(o<=5);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),o--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,o=-1,n=0;n<t._onendTimer.length;n++)if(t._onendTimer[n].id===e){o=n;break}var r=t._onendTimer[o];r&&(clearTimeout(r.timer),t._onendTimer.splice(o,1))},_setupAudioNode:function(){var e=this,t=e._audioNode,o=e._audioNode.length;return t[o]="undefined"==typeof i.createGain?i.createGainNode():i.createGain(),t[o].gain.value=e._volume,t[o].paused=!0,t[o]._pos=0,t[o].readyState=4,t[o].connect(u),t[o].panner=i.createPanner(),t[o].panner.panningModel=e._model||"equalpower",t[o].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),t[o].panner.connect(t[o]),t[o]},on:function(e,t){var o=this,n=o["_on"+e];if("function"==typeof t)n.push(t);else for(var r=0;r<n.length;r++)t?n[r].call(o,t):n[r].call(o);return o},off:function(e,t){var o=this,n=o["_on"+e];if(t){for(var r=0;r<n.length;r++)if(t===n[r]){n.splice(r,1);break}}else o["_on"+e]=[];return o},unload:function(){for(var e=this,t=e._audioNode,o=0;o<e._audioNode.length;o++)t[o].paused||(e.stop(t[o].id),e.on("end",t[o].id)),e._webAudio?t[o].disconnect(0):t[o].src="";for(o=0;o<e._onendTimer.length;o++)clearTimeout(e._onendTimer[o].timer);var n=f._howls.indexOf(e);null!==n&&n>=0&&f._howls.splice(n,1),delete r[e._src],e=null}},a)var h=function(e,t){if(t in r)return e._duration=r[t].duration,void v(e);if(/^data:[^;]+;base64,/.test(t)){for(var o=atob(t.split(",")[1]),n=new Uint8Array(o.length),i=0;i<o.length;++i)n[i]=o.charCodeAt(i);y(n.buffer,e,t)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){y(a.response,e,t)},a.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete r[t],e.load())};try{a.send()}catch(e){a.onerror()}}},y=function(e,t,o){i.decodeAudioData(e,function(e){e&&(r[o]=e,v(t,e))},function(e){t.on("loaderror",e)})},v=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},m=function(e,t,o){var n=e._nodeById(o);n.bufferSource=i.createBufferSource(),n.bufferSource.buffer=r[e._src],n.bufferSource.connect(n.panner),n.bufferSource.loop=t[0],t[0]&&(n.bufferSource.loopStart=t[1],n.bufferSource.loopEnd=t[1]+t[2]),n.bufferSource.playbackRate.value=e._rate};n=function(){return{Howler:f,Howl:d}}.call(t,o,t,e),!(void 0!==n&&(e.exports=n)),t.Howler=f,t.Howl=d,"undefined"!=typeof window&&(window.Howler=f,window.Howl=d)}()},function(e,t,o){"use strict";e.exports=o(49)},function(e,t,o){"use strict";function n(e){var t=r.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}}var r=o(6);e.exports=n},function(e,t,o){"use strict";function n(e,t){for(var o,n=0,i="";!o;)i+=e(t>>4*n&15|r()),o=t<Math.pow(16,n+1),n++;return i}var r=o(51);e.exports=n},function(e,t,o){"use strict";function n(){var e="",t=Math.floor(.001*(Date.now()-d));return t===u?s++:(s=0,u=t),e+=c(l.lookup,h),e+=c(l.lookup,y),s>0&&(e+=c(l.lookup,s)),e+=c(l.lookup,t)}function r(t){return l.seed(t),e.exports}function i(t){return y=t,e.exports}function a(e){return void 0!==e&&l.characters(e),l.shuffled()}var s,u,l=o(6),c=o(48),p=o(47),f=o(50),d=1459707606518,h=6,y=o(53)||0;e.exports=n,e.exports.generate=n,e.exports.seed=r,e.exports.worker=i,e.exports.characters=a,e.exports.decode=p,e.exports.isValid=f},function(e,t,o){"use strict";function n(e){if(!e||"string"!=typeof e||e.length<6)return!1;for(var t=r.characters(),o=e.length,n=0;n<o;n++)if(t.indexOf(e[n])===-1)return!1;return!0}var r=o(6);e.exports=n},function(e,t){"use strict";function o(){if(!n||!n.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return n.getRandomValues(e),48&e[0]}var n="object"==typeof window&&(window.crypto||window.msCrypto);e.exports=o},function(e,t){"use strict";function o(){return r=(9301*r+49297)%233280,r/233280}function n(e){r=e}var r=1;e.exports={nextValue:o,seed:n}},function(e,t){"use strict";e.exports=0}]);
//# sourceMappingURL=skoash.1.1.3.js.map