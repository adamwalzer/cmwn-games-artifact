{"version":3,"sources":["webpack:///monarch/ai.js","webpack:///webpack/bootstrap 69f348adf61677c6df43","webpack:///./monarch/source/js/components/audio-sequence/behavior.js","webpack:///./monarch/source/js/components/frame/behavior.js","webpack:///./monarch/source/js/components/modal/behavior.js","webpack:///./monarch/source/js/components/multiple-choice/behavior.js","webpack:///./monarch/source/js/components/reveal/behavior.js","webpack:///./monarch/source/js/components/runner/behavior.js","webpack:///./monarch/source/js/components/score/behavior.js","webpack:///./monarch/source/js/components/screen-basic/behavior.js","webpack:///./monarch/source/js/components/screen-quit/behavior.js","webpack:///./monarch/source/js/components/screen-title/behavior.js","webpack:///./monarch/source/js/components/selectable-reveal/behavior.js","webpack:///./monarch/source/js/components/selectable/behavior.js","webpack:///./monarch/source/js/components/video/behavior.js","webpack:///./monarch/source/js/config.game.js","webpack:///./monarch/source/js/index.js","webpack:///./monarch/source/js/screens/fly-across.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","component","sounds","this","on","_event","screen","is","target","find","each","i","audio","onended","state","STATE","OPEN","playSound","properties","loop","length","start","bind","bgSound","voSound","util","resolvePath","play","hasAttribute","hasOwnProperty","entities","handleProperty","title","_node","_name","_value","addClass","defineRule","index","backgroundImage","isReady","targetScope","isComplete","requiredQueue","complete","item","_id","select","reveal","close","VOICE_OVER","demoMode","sfx","button","deselect","validateAnswer","_scope","answers","correct","split","indexOf","String","getSelected","answer","event","$li","$","closest","vo","eq","voiceOver","canvas","Flower","gameLoop","FLOWER","scale","boundPulse","ORANGE","RED","YELLOW","lastRecycledFlower","frame","flowers","forEach","_flower","x","width","position","margin","size","recycle","image","random","bin","pulsePoint","pulse","y","height","Basic","extend","init","_image","$image","Point","create","naturalWidth","naturalHeight","to","some","_plane","toLowerCase","math","render","drawImage","_type","ctx","node","content","_canvas","_size","_scale","getContext","resize","clear","clearRect","draw","_obj","commands","cmd","apply","player","conveyor","isConveyorRunning","canvasSize","findOwn","toArray","shouldAppend","flower","push","log","Size","set","zoom","viewport","onResize","testFlower","removeClass","attr","eachFrame","onEachFrame","restart","stop","pos","absolutePosition","inc","hitArea","padding","inBoundsX","inBoundsY","x1","y1","x2","y2","landed","behavior","transformPosition","dec","behaviorTarget","message","value","entity","template","ready","html","replace","require","board","up","_count","console","max","down","currentVO","allowAction","_sound","delay","type","next","nextScreen","buttonSound","proto","leave","open","prev","prevScreen","fxSound","timeoutID","clearTimeout","intervalID","kill","gameClass","isMemberSafe","LEAVE","_e","window","AudioContext","webkitAudioContext","sure","setContext","pause","resume","okay","exit","cancel","hasClass","so","loader","logo","animOut","off","animate","respond","stateMethod","selectState","shouldSelect","_$target","HIGHLIGHTED","_target","$target","deselectAll","items","unhighlight","self","video","config","screenSelector","componentDirectory","dimensions","ratio","shouldLoadComponentStyles","_interopRequireDefault","obj","__esModule","default","_screensFlyAcross","_screensFlyAcross2","repeat","pupa","__proto__","iosSplash","READY","splash","count","modal","selectableReveal","lifespan","quit","shake","eventCategory","scope","join","ga","flyAcross","incorrect","runner","Object","defineProperty","s","o","g","r","a","q","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","document","ball","startGame","test","_env","parent","location","href","domain"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAE,WACAE,GAAAJ,SACAK,QAAA,EAUA,OANAP,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,QAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBAqCA,OATAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAU,EAAA,UAGAV,oBAAA,KDMM,SAASI,OAAQD,QAASH,qBAE/BI,OAAOD,QAAUH,oBAAoB,KAKhC,SAASI,OAAQD,SEnDvBQ,GAAGC,KAAKC,UAAU,iBAAkB,WAEnC,GAAIC,QAAS,IAEbC,MAAKC,GAAG,QAAS,SAASC,QACzB,GAAIC,QAASH,KAAKG,MAEbH,MAAKI,GAAGF,OAAOG,UAEpBN,OAASC,KAAKM,KAAK,WACnBP,OAAOQ,KAAK,SAASC,EAAGC,OACvBA,MAAMC,QAAU,WACZX,OAAOS,EAAE,IAAML,OAAOQ,MAAMR,OAAOS,MAAMC,OAAOV,OAAOW,UAAUf,OAAOS,EAAE,OAG5C,mBAAzBR,MAAKe,WAAWC,OACzBjB,OAAOA,OAAOkB,OAAO,GAAGP,QAAUV,KAAKkB,MAAMC,KAAKnB,UAIpDA,KAAKkB,MAAQ,WACTnB,OAAO,IAAMC,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMC,OAAOb,KAAKG,OAAOW,UAAUf,OAAO,QF2DpF,SAASV,OAAQD,SGhFvBQ,GAAGC,KAAKC,UAAU,QAAS,WAE1BE,KAAKkB,MAAQ,WACZ,GAAIE,SAASC,OAUb,OARAD,SAAUxB,GAAG0B,KAAKC,YAAYvB,KAAM,wBACpCqB,QAAUzB,GAAG0B,KAAKC,YAAYvB,KAAM,uBAEhCoB,SAASA,QAAQI,OACjBH,UAAYA,QAAQI,aAAa,oBAAoBJ,QAAQG,OAE7DxB,KAAK0B,eAAe,aAAe1B,KAAK2B,SAAS,IAAI3B,KAAK2B,SAAS,GAAGT,QAEnElB,MAGRA,KAAK4B,gBACJC,MAAO,QAAAA,OAAUC,MAAOC,MAAOC,QAC1BhC,KAAKI,GAAG0B,SACX9B,KAAKM,KAAK,UAAU2B,SAAS,SAC7BjC,KAAKH,KAAKqC,WAAW,4BAA4BlC,KAAKG,OAAOgC,QAAQ,GAAG,2CACvEC,gBAAiB,OAAQJ,OAAQ,UAMrChC,KAAKC,GAAG,UAAW,SAAUC,QACxBF,KAAKqC,SACRrC,KAAKkB,QAGFlB,OAASE,OAAOoC,cACbtC,KAAK0B,eAAe,eAAiB1B,KAAKuC,YAAiBvC,KAAK0B,eAAe,kBAAqB1B,KAAKwC,eAAiBxC,KAAKwC,cAAcvB,QAClJjB,KAAKyC,iBH0FH,SAASpD,OAAQD,SI5HvBQ,GAAGC,KAAKC,UAAU,QAAS,WAE1BE,KAAK0C,KAAO,SAASC,KACpB3C,KAAK4C,OAAO5C,MACZA,KAAK6C,OAAOH,KAAKC,MAGlB3C,KAAK8C,MAAQ,aACR9C,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMmC,aAAe/C,KAAKH,KAAKmD,YAC7DhD,KAAKH,KAAKY,MAAMwC,IAAIC,QAAQlD,KAAKH,KAAKY,MAAMwC,IAAIC,OAAO1B,OAC1DxB,KAAKmD,gBJqIF,SAAS9D,OAAQD,SK/IvBQ,GAAGC,KAAKC,UAAU,kBAAmB,WAEpC,QAASsD,gBAAgBC,QACxB,GAAIC,QAUJ,OARID,QAAOtC,WAAWwC,UACrBD,QAAUD,OAAOtC,WAAWwC,QAAQC,MAAM,YAErCF,QAAQG,QAAQC,OAAOL,OAAOM,cAAcxB,WAChDkB,OAAOZ,aAIF,EAGRzC,KAAK4D,OAAS,WACT5D,KAAK6D,QACRC,IAAMC,EAAE/D,KAAK6D,MAAMxD,QAAQ2D,QAAQ,OAE9BhE,KAAKuC,YAAcvC,KAAK4C,OAAOkB,MACnCV,eAAepD,WLyJb,SAASX,OAAQD,SM9KvBQ,GAAGC,KAAKC,UAAU,SAAU,WAE3BE,KAAK0C,KAAO,SAAUC,KACrB,GAAIsB,IAAI9B,MAAO8B,EAEI,iBAARtB,MACV3C,KAAK4C,OAAO5C,KAAKM,KAAK,MAAM4D,GAAGvB,MAC/BsB,GAAKjE,KAAKS,MAAM0D,WAAanE,KAAKS,MAAM0D,UAAUxB,KAC/CsB,IAAIA,GAAGzC,QAGa,gBAARmB,MACX3C,KAAK2C,OACR3C,KAAK4C,OAAO5C,KAAK2C,MAEb3C,KAAKS,QACR0B,MAAQnC,KAAK2C,KAAKR,QAClB8B,GAAKjE,KAAKS,MAAM0D,UAAUxB,MAAQ3C,KAAKS,MAAM0D,UAAUhC,OAEnD8B,IAAIA,GAAGzC,aNuLV,SAASnC,OAAQD,SO1MvBQ,GAAGC,KAAKC,UAAU,SAAU,WAC3B,GAAIsE,QAAQC,OAAQC,SAAUC,OAAQC,MAAOC,UAE7CF,SACCG,OAAQ,iBACRC,IAAK,cACLC,OAAQ,kBAGTN,UAECO,mBAAoB,KAGpBC,MAAO,QAAAA,OAAUzB,QAEhBA,OAAO0B,QAAQC,QAAQ,SAAWC,SACjC,GAAIC,GAAGC,KACPF,SAAQG,SAASF,GAAK,EAEtBA,EAAID,QAAQG,SAASF,EAAID,QAAQI,OACjCF,MAAQF,QAAQK,KAAKH,MAEL,EAAZD,EAAIC,OAAWnF,KAAKuF,QAAQlC,OAAQ4B,UACtC9D,KAAKnB,QAGTuF,QAAS,QAAAA,SAAUlC,OAAQ4B,SAC1BA,QAAQO,MAAQ5F,GAAG0B,KAAKmE,OAAOpC,OAAOqC,KACtCT,QAAQI,OAAgC,GAAvBzF,GAAG0B,KAAKmE,OAAO,EAAE,IAClCR,QAAQG,SAASF,EAAI7B,OAAO8B,QAAUF,QAAQI,OAE1CrF,KAAK6E,qBACRI,QAAQG,SAASF,EAAIlF,KAAK6E,mBAAmBQ,OAC5CrF,KAAK6E,mBAAmBO,SAASF,EACjClF,KAAK6E,mBAAmBS,KAAKH,OAG/BnF,KAAK6E,mBAAqBI,SAG3BU,WAAY,EAEZC,MAAO,QAAAA,OAAUvC,OAAO4B,SAEvBX,SAASqB,aACTV,QAAQG,SAASF,GAAKZ,SAASqB,WAAa,GAAK,GAAK,EAAI,GAC1DV,QAAQG,SAASS,GAAKvB,SAASqB,WAAa,GAAK,GAAK,EAAI,GAC1DV,QAAQK,KAAKH,OAASb,SAASqB,WAAa,GAAK,GAAK,GAAK,EAC3DV,QAAQK,KAAKQ,QAAUxB,SAASqB,WAAa,GAAK,GAAK,GAAK,IAK9DtB,OAASzE,GAAGmG,MAAMC,OAAO,WAExBhG,KAAKoF,SAAW,KAChBpF,KAAKsF,KAAO,KACZtF,KAAKqF,OAAS,EACdrF,KAAKwF,MAAQ,KAEbxF,KAAKiG,KAAO,SAAUC,QACrB,GAAIC,QAASpC,EAAEmC,OAiBf,OAfAlG,MAAKwF,MAAQU,OAEblG,KAAKoF,SAAWxF,GAAGwG,MAAMC,SACzBrG,KAAKsF,MAAQY,OAAOI,aAAcJ,OAAOK,eAAeC,GAAG,QAC3DxG,KAAKqF,OAAgC,GAAvBzF,GAAG0B,KAAKmE,OAAO,EAAE,KAE9B,QAAS,UAAUgB,KAAK,SAAUC,QAClC,MAAIR,QAAOQ,OAAOC,iBAAmBT,OAAO,UAAUQ,SACrDlC,MAAQ0B,OAAOQ,OAAOC,eAAiBT,OAAO,UAAUQ,SACjD,GAFR,SAMGlC,QAAOxE,KAAKsF,KAAOtF,KAAKsF,KAAKd,MAAMA,OAAOoC,KAAK,UAE5C5G,MAGRA,KAAK6G,OAAS,WACb,OACCC,WAAY9G,KAAKwF,MAAOxF,KAAKoF,SAASF,EAAIlF,KAAKqF,OAAQrF,KAAKoF,SAASS,EAAI,GAAI7F,KAAKsF,KAAKH,MAAOnF,KAAKsF,KAAKQ,UAI1G9F,KAAKI,GAAK,SAAU2G,OACnB,MAAOhD,GAAE/D,KAAKwF,OAAOpF,GAAG2G,QAGzB/G,KAAKV,GAAK,WACT,MAAOyE,GAAE/D,KAAKwF,OAAOlG,QAIvB8E,QAEC4C,IAAK,KACLC,KAAM,KACNC,QAAS,KACT1C,MAAO,EAEPyB,KAAM,QAAAA,MAAUkB,QAASC,MAAOC,QAC/B,GAAI/B,KAeJ,OAbAA,MAAO+B,OAASD,MAAM5C,MAAM6C,QAAUD,MAEtCpH,KAAKiH,KAAOE,QACZnH,KAAKgH,IAAMG,QAAQG,WAAW,MAC9BtH,KAAKwE,MAAQ6C,QAAU,GAEjB/B,KAAK7B,QAAQ,UAClB0D,QAAQhC,MAAQG,KAAKH,MACrBgC,QAAQrB,OAASR,KAAKQ,QAGvB9F,KAAKgH,IAAIxC,MAAM6C,OAAQA,QAEhBrH,MAGRuH,OAAQ,QAAAA,QAAUH,MAAOC,QACxB,GAAI/B,KAEJA,MAAO+B,OAASD,MAAM5C,MAAM6C,QAAUD,MAEtCpH,KAAKiH,KAAK9B,MAAQG,KAAKH,MACvBnF,KAAKiH,KAAKnB,OAASR,KAAKQ,OACxB9F,KAAKwE,MAAQ6C,QAAU,EAEvBrH,KAAKgH,IAAIxC,MAAM6C,OAAQA,SAGxBG,MAAO,QAAAA,SACNxH,KAAKgH,IAAIS,UAAU,EAAE,EAAGzH,KAAKiH,KAAK9B,MAAMnF,KAAKwE,MAAOxE,KAAKiH,KAAKnB,OAAO9F,KAAKwE,QAG3EkD,KAAM,QAAAA,MAAUC,MACf,GAAIC,UAAUC,GAEdD,UAAWD,KAAKd,QAEhB,KAAKgB,MAAOD,UACkB,kBAAlB5H,MAAKgH,IAAIa,MACpB7H,KAAKgH,IAAIa,KAAKC,MAAM9H,KAAKgH,IAAKY,SAASC,QAK1C7H,KAAK0F,IAAM,KACX1F,KAAK+E,QAAU,KACf/E,KAAK+H,OAAS,KACd/H,KAAKgI,SAAW,KAChBhI,KAAKiI,mBAAoB,EAGzBjI,KAAKC,GAAG,QAAS,SAAUC,QAC1B,GAAIgI,YAAY/C,KAGXnF,MAAKI,GAAGF,OAAOG,UAEpB8E,MAAQnF,KAAKmF,QAEbnF,KAAK0F,IAAM1F,KAAKmI,QAAQ,mBAAmBC,UAC3CpI,KAAK+E,QAAU,SAAW1B,QACzB,GAAIgF,cAAc7C,MAAO8C,OAAQpD,CAKjC,KAHAmD,cAAe,EACfnD,EAAI,EAEGmD,cACN7C,MAAQ5F,GAAG0B,KAAKmE,OAAOpC,OAAOqC,KAC9B4C,OAASjE,OAAOgC,SAASJ,KAAKT,OAE9B8C,OAAOlD,SAASF,EAAIA,EACpBA,GAAKoD,OAAOhD,KAAKH,MAAQmD,OAAOjD,OAEhCrF,KAAKuI,KAAKD,QAEVD,aAAeC,OAAOlD,SAASF,EAAIC,MAEnC9B,OAAOmF,IAAIF,OAAOlD,SAASF,EAAGC,MAG/B,OAAOnF,OAELR,QAASQ,MAEZkI,WAAatI,GAAG6I,KACdpC,SACAqC,IAAIvD,MAAO,KAEbf,OAAO6B,KAAKjG,KAAKgI,SAAS,GAAIE,WAAYlI,KAAKH,KAAK8I,MAEpD3I,KAAKH,KAAK+I,SAASC,SAAS7I,KAAKH,KAAKsB,KAAK,WACzCiD,OAAOmD,OAAOW,WAAYlI,KAAK2I,YAIlC3I,KAAKC,GAAG,gBAAiB,SAAUC,QAC7BF,KAAK+H,OAAO3H,GAAGF,OAAOG,UAEvBL,KAAK+H,OAAOpH,MAAM,YACrBX,KAAKiI,mBAAqBjI,KAAK8I,aAE3B9I,KAAKiI,mBAAmBjI,KAAK+H,OAAOgB,YAAY,YAE1C/I,KAAK+H,OAAOpH,MAAM,YAC5BX,KAAK+H,OACHgB,YAAY,WACZ9G,SAAS,WACT+G,KAAK,QAAS,SAIlBhJ,KAAKkB,MAAQ,WACZlB,KAAKwI,IAAI,WACTxI,KAAKiI,mBAAoB,EACzBjI,KAAKiJ,UAAUjJ,KAAKkJ,cAGrBlJ,KAAKmJ,QAAU,WACdnJ,KAAKiI,mBAAoB,EACzBjI,KAAK+H,OACHgB,YAAY,YAGf/I,KAAKoJ,KAAO,WACXpJ,KAAKiJ,UAAUjJ,KAAKkJ,aAAa,IAGlClJ,KAAKkJ,YAAc,WACblJ,KAAKiI,oBAEV7D,OAAOoD,QAEPlD,SAASQ,MAAM9E,MAEfA,KAAK+E,QAAQC,QAAQ,SAAUC,SAC9Bb,OAAOsD,KAAKzC,aAIdjF,KAAK4F,MAAQ,SAAUX,SACnBX,SAASqB,YAAc,KACzBrB,SAASqB,WAAa,EACtB3F,KAAKiJ,UAAUxE,YAAY,IAG5BL,OAAOoD,QAEPlD,SAASsB,MAAM5F,KAAKiF,SAEpBjF,KAAK+E,QAAQC,QAAQ,SAAUC,SAC9Bb,OAAOsD,KAAKzC,YAIdjF,KAAK8I,WAAa,WACjB,GAAIzI,QAAQiI,OAAQP,MAsCpB,OApCAA,SACCsB,IAAKrJ,KAAK+H,OAAOuB,mBACjBhE,KAAM1F,GAAG6I,KAAKpC,SAASqC,IAAI1I,KAAK+H,OAAO5C,QAASnF,KAAK+H,OAAOjC,WAG7DzF,OAAST,GAAGwG,MAAMC,SAASqC,IAAIX,OAAOsB,IAAInE,EAAK6C,OAAOzC,KAAKH,MAAM,EAAI,IAAIoE,IAAI,GAAG,GAIhFvJ,KAAK+E,QAAQ0B,KAAKzG,KAAKmB,KAAK,SAAU8D,SACrC,GAAIuE,SAASC,QAASC,UAAWC,SAejC,OAbAF,SAAU,GACVD,SACCI,GAAI3E,QAAQG,SAASF,EAAID,QAAQI,OAASoE,QAC1CI,GAAI5E,QAAQG,SAASS,EAAI4D,QACzBK,GAAI7E,QAAQG,SAASF,EAAID,QAAQI,OAASJ,QAAQK,KAAKH,MAAmB,EAAVsE,QAChEM,GAAI9E,QAAQG,SAASS,EAAGZ,QAAQK,KAAKQ,OAAoB,EAAV2D,SAKhDC,UAAYrJ,OAAO6E,EAAIsE,QAAQI,IAAMvJ,OAAO6E,EAAIsE,QAAQM,GACxDH,UAAYtJ,OAAOwF,EAAI2D,QAAQK,IAAMxJ,OAAOwF,EAAI2D,QAAQO,GAEpDL,WAAaC,WAAa1E,QAAQ7E,GAAGmE,OAAOI,MAC/C2D,OAASrD,SACF,GAFR,UAMDjF,KAAKgK,OAAO1B,QAKLA,QAGRtI,KAAKiK,SAAS,OAAQ,WACrB,GAAI7E,SAEJ,IAAKpF,KAAKiI,kBAWV,MATA7C,UAAWpF,KAAK+H,OAAOmC,oBAEvBlK,KAAK+H,OACHgB,YAAY,WACZ9G,SAAS,WACTiI,kBAAkB9E,SAAS+E,IAAI,EAAE,KAEnCnK,KAAKwI,IAAI,kBAGR4B,eAAgBpK,KAAK+H,UAIvB/H,KAAKiK,SAAS,SAAU,SAAUhF,SACjC,GAAI3F,GAQJ,OANG2F,WACF3F,GAAK2F,QAAQ3F,KACbmF,WAAazE,KAAK4F,MAAMzE,KAAKnB,KAAKiF,SAClCjF,KAAKiJ,UAAUxE,cAIf4F,QAAS/K,GACT8K,eAAgBpK,KAAK+H,aPsMlB,SAAS1I,OAAQD,SQnhBvBQ,GAAGC,KAAKC,UAAU,QAAS,WAE1BE,KAAKsK,MAAQ,EAEbtK,KAAKuK,OAAO,SAAU,WAErBvK,KAAKwK,SAAW,KAEhBxK,KAAKyK,MAAQ,WACZzK,KAAKwK,SAAWxK,KAAK0K,QAGtB1K,KAAK6G,OAAS,WAEb,MADA7G,MAAK0K,KAAK1K,KAAKwK,SAASG,QAAQ,YAAa3K,KAAKsK,QAC3CtK,QAKTA,KAAKiG,KAAO,WACXjG,KAAKG,OAAOyK,QAAQ5K,OAGrBA,KAAKyK,MAAQ,WACZzK,KAAK6K,MAAMhE,UAGZ7G,KAAK8K,GAAK,SAAUC,QAYnB,MAXA/K,MAAKsK,OAAQS,QAAU,EAEvB/K,KAAK6K,MAAMhE,SAEXmE,QAAQxC,IAAI,QAASxI,KAAKsK,MAAOtK,KAAKe,WAAWkK,KAE7CjL,KAAKsK,OAAStK,KAAKe,WAAWkK,MACjCD,QAAQxC,IAAI,WACZxI,KAAKyC,YAGCzC,MAGRA,KAAKkL,KAAO,SAAUH,QASrB,MARA/K,MAAKsK,OAAQS,QAAU,EAEvB/K,KAAK6K,MAAMhE,SAEP7G,KAAKsK,OAAStK,KAAKe,WAAWkK,KACjCjL,KAAKyC,WAGCzC,SR0hBH,SAASX,OAAQD,SS7kBvBQ,GAAGC,KAAKC,UAAU,eAAgB,WACjCE,KAAKmL,UAAY,KAEjBnL,KAAKoL,YAAc,WAClB,MAAQpL,MAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMC,QAAUb,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMmC,aAAgB/C,KAAKH,KAAKmD,UAGrHhD,KAAKc,UAAY,SAAUuK,QAC1B,GAAIC,MAQJ,OANAA,OAAQvH,EAAEsH,QAAQrC,KAAK,YAEJ,cAAhBqC,OAAOE,OACTvL,KAAKmL,UAAYE,QAGdC,MACItL,KAAKsL,MAAMA,MAAOD,OAAO7J,KAAKL,KAAKkK,SAEnCA,OAAO7J,QAIhBxB,KAAKwL,KAAO,WACX,GAAIC,YAAYC,WAWhB,OATAD,YAAazL,KAAK2L,QAClBD,YAAc9L,GAAG0B,KAAKC,YAAYvB,KAAM,yBAEpCyL,aACHzL,KAAK4L,QACLH,WAAWI,OACPH,aAAaA,YAAYlK,QAGvBiK,YAGRzL,KAAK8L,KAAO,WACX,GAAIC,YAAYL,WAWhB,OATAK,YAAa/L,KAAK2L,QAClBD,YAAc9L,GAAG0B,KAAKC,YAAYvB,KAAM,yBAEpC+L,aACH/L,KAAKG,OAAO2C,QACZiJ,WAAWF,OACPH,aAAaA,YAAYlK,QAGvBuK,YAGR/L,KAAKkB,MAAQ,WACZ,GAAIE,SAASC,OAeb,OAbAD,SAAUxB,GAAG0B,KAAKC,YAAYvB,KAAM,wBACpCqB,QAAUzB,GAAG0B,KAAKC,YAAYvB,KAAM,uBACpCgM,QAAUpM,GAAG0B,KAAKC,YAAYvB,KAAM,mBAEhCoB,UACHpB,KAAKH,KAAKuB,QAAUA,QACpBA,QAAQI,QAENwK,SAASA,QAAQxK,OACjBH,SAASrB,KAAKc,UAAUO,SAEvBrB,KAAK0B,eAAe,aAAe1B,KAAK2B,SAAS,IAAI3B,KAAK2B,SAAS,GAAGT,QAEnElB,MAGRA,KAAKoJ,KAAO,WACRpJ,KAAKiM,WACPC,aAAalM,KAAKiM,WAGhBjM,KAAKmM,YACPnM,KAAKoM,KAAK,UAGRpM,KAAKmL,WACPnL,KAAKmL,UAAU/B,QAIjBpJ,KAAKC,GAAG,UAAW,SAAUC,QACxBF,KAAKqC,SAAWrC,OAASE,OAAOoC,aACnCtC,KAAKkB,QAGHlB,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKoC,SAASjC,KAAKe,WAAWsL,aAG/BrM,KAAKwC,eAAkBxC,KAAK0B,eAAe,mBAAqB1B,KAAKwC,cAAcvB,SACvFjB,KAAKyC,aAIPzC,KAAKC,GAAG,WAAY,SAAUC,QAC1BF,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKkJ,YAAY/I,KAAKe,WAAWsL,WAGnCrM,KAAKqC,SAAWrC,OAASE,OAAOoC,aACnCtC,KAAKoJ,SAIPpJ,KAAKC,GAAG,WAAY,SAAUC,QAC1BF,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKkJ,YAAY/I,KAAKe,WAAWsL,WAGnCrM,KAAKqC,SAAWrC,OAASE,OAAOoC,aACnCtC,KAAKoJ,SAIPpJ,KAAKC,GAAG,QAAS,WACZD,KAAKsM,aAAa,kBAAoBtM,KAAKwC,eAC9CxC,KAAKwC,cAAcvC,GAAG,WAAYD,KAAKmB,KAAK,WAC3C,GAAI8B,IAEJA,KAAMrD,GAAG0B,KAAKC,YAAYvB,KAAM,oCAAsCJ,GAAG0B,KAAKC,YAAYvB,KAAM,iCAE5FiD,KAAKjD,KAAKc,UAAUmC,aTulBtB,SAAS5D,OAAQD,SUttBvBQ,GAAGC,KAAKC,UAAU,cAAe,WAEhCE,KAAK0L,YAAc,WACf1L,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO1B,QAIjDxB,KAAKC,GAAG,gBAAiB,SAAUC,QAC9BF,KAAKW,MAAMX,KAAKY,MAAM2L,QACzBvM,KAAKiC,SAAS,eAIhBjC,KAAKC,GAAG,QAAS,SAASuM,IACzB,GAAIxF,IAEAhH,MAAKI,GAAGoM,GAAGnM,UAEf2G,IAAM,IAAKyF,OAAOC,cAAgBD,OAAOE,oBACtC3M,KAAKS,MAAM0D,UAAUyI,MAAM5M,KAAKS,MAAM0D,UAAUyI,KAAKC,WAAW7F,KAChEhH,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO2J,WAAW7F,QAG5DhH,KAAKC,GAAG,UAAW,SAAUC,QACzBF,KAAKS,MAAM0D,UAAUyI,MAAM5M,KAAKS,MAAM0D,UAAUyI,KAAKpL,OACxDxB,KAAK0L,cACL1L,KAAKH,KAAKoC,SAAS,eACnBjC,KAAK+I,YAAY,aACjB/I,KAAKH,KAAKiN,OAAM,KAGjB9M,KAAKC,GAAG,WAAY,WACnBD,KAAKH,KAAKkJ,YAAY,eACtB/I,KAAKH,KAAKkN,WAGX/M,KAAKiG,KAAO,WACXjG,KAAKiC,SAAS,oBAGfjC,KAAKgN,KAAO,WACXhN,KAAK0L,cACL1L,KAAKH,KAAKoN,QAGXjN,KAAKkN,OAAS,WACblN,KAAK0L,cACL1L,KAAK4L,YV8tBD,SAASvM,OAAQD,SW7wBvBQ,GAAGC,KAAKC,UAAU,eAAgB,WAEjCE,KAAKc,UAAY,SAAUuK,QAC1B,GAAIC,MAQJ,OANAA,OAAQvH,EAAEsH,QAAQrC,KAAK,YAEpBjF,EAAEsH,QAAQ8B,SAAS,gBACrBnN,KAAKmL,UAAYE,QAGdC,MACItL,KAAKsL,MAAMA,MAAOD,OAAO7J,KAAKL,KAAKkK,SAEnCA,OAAO7J,QAIhBxB,KAAKC,GAAG,QAAS,SAAUC,QACtBF,KAAKI,GAAGF,OAAOG,UAEnBL,KAAKsL,MAAM,EAAGtL,KAAK6L,MAEf7L,KAAKsM,aAAa,kBAAoBtM,KAAKwC,eAC9CxC,KAAKwC,cAAcvC,GAAG,WAAYD,KAAKmB,KAAK,WAC3C,GAAI8B,IAEJA,KAAMrD,GAAG0B,KAAKC,YAAYvB,KAAM,oCAAsCJ,GAAG0B,KAAKC,YAAYvB,KAAM,iCAE5FiD,KAAKjD,KAAKc,UAAUmC,WAQ3BjD,KAAKC,GAAG,UAAW,WAClB,GAAImN,IAAI9B,MAAQtL,KAAKe,WAAWuK,KAOhC,OANAtL,MAAK8C,MAAM9C,KAAKH,KAAKwN,QAErBD,GAAKxN,GAAG0B,KAAKC,YAAYvB,KAAM,wBAE3BoN,IAAIA,GAAG5L,OAEJxB,OAGRA,KAAKC,GAAG,WAAY,SAASC,QACxBF,KAAKI,GAAGF,OAAOG,SACnBL,KAAKC,GAAG,gBAAiB,SAASC,QAC7BF,KAAKI,GAAGF,OAAOG,UACnBL,KAAKsN,KAAKvE,YAAY/I,KAAKe,WAAWwM,SACpCC,IAAI,gBACNxN,KAAKwN,IAAI,sBAIXxN,KAAKwL,KAAO,WAGX,QAASI,SACR5L,KAAKG,OAAOyL,QACZH,WAAWI,OAJZ,GAAIJ,YAAY2B,GAAIK,OA2BpB,OApBAhC,YAAazL,KAAK2L,QAClByB,GAAKxN,GAAG0B,KAAKC,YAAYvB,KAAM,wBAC/ByN,QAAUzN,KAAKe,WAAWwM,SAAW,GAEhCH,KACJA,GAAKxN,GAAG0B,KAAKC,YAAYvB,KAAM,0BAG5ByL,aACCgC,QACHzN,KAAKsN,KACHrN,GAAG,eAAgB2L,MAAMzK,KAAKnB,OAC9BiC,SAASwL,SAEX7B,MAAMpM,KAAKQ,MAGRoN,IAAIA,GAAG5L,QAGLiK,eXmxBH,SAASpM,OAAQD,SYz2BvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAEtCE,KAAK0N,QAAQ,SAAU,SAAUxN,QAChC,GAAIiC,OAAOwL,WAEXxL,OAAQjC,OAAOmK,QACfsD,YAAc3N,KAAKe,WAAW6M,aAAe,UAExCzL,QACJnC,KAAK2N,aAAazN,OAAOkK,gBACzBpK,KAAK6C,OAAOH,KAAKP,UAInBnC,KAAKuK,OAAO,aAAc,WAEzBvK,KAAK6N,aAAe,SAAUC,UAC7B,MAAIA,UAAShC,OAAOqB,SAASnN,KAAKY,MAAMmN,cAAqC,IAArBD,SAAS3L,SACxDnC,KAAKG,OAAOQ,MAAMX,KAAKY,MAAMmC,aAG/B,QZk3BJ,SAAS1D,OAAQD,Sav4BvBQ,GAAGC,KAAKC,UAAU,aAAc,WAE/BE,KAAKiK,SAAS,SAAU,SAAU+D,SACjC,GAAIC,SAAS3O,EAEb,IAAIU,KAAK6D,OAIR,GAHAoK,QAAUlK,EAAE/D,KAAK6D,MAAMxD,QAAQ2D,QAAQ,MACvC1E,GAAK2O,QAAQ3O,MAAQ2O,QAAQ9L,QAEzBnC,KAAK6N,aAAaI,YAAa,EAClC,OACC5D,QAAS/K,GACT8K,eAAgB6D,aAMlBjO,MAAK2L,MAAMqC,QAGZ,QAAO,IAGRhO,KAAK6N,aAAe,SAAUG,SAC7B,OAAO,GAGRhO,KAAKkO,YAAc,WAClB,GAAIC,OAAQnO,KAAKM,KAAK,KACtBN,MAAKmD,SAASgL,OACdnO,KAAKoO,YAAYD,Wb64Bb,SAAS9O,OAAQD,Sc56BvBQ,GAAGC,KAAKC,UAAU,QAAS,WAE1BE,KAAKkB,MAAQ,WACZ,GAAImN,MAAOrO,IACXA,MAAKsO,MAAMrO,GAAG,QAAS,WACtBoO,KAAK5L,aAEHzC,KAAKH,KAAKuB,SAASpB,KAAKH,KAAKuB,QAAQ0L,QACxC9M,KAAKsO,MAAM,GAAG9M,QAGfxB,KAAK8M,MAAQ,WACZ9M,KAAKsO,MAAM,GAAGxB,SAGf9M,KAAK+M,OAAS,WACV/M,KAAKuC,YACRvC,KAAKsO,MAAM,GAAG9M,QAGfxB,KAAKG,OAAOF,GAAG,WAAYD,KAAK8M,MAAM3L,KAAKnB,Udm7BtC,SAASX,OAAQD,Sev8BvBQ,GAAGC,KAAK0O,QACPC,eAAgB,UAChBC,mBAAoB,cACpBC,YACCvJ,MAAO,IACPwJ,MAAO,GAAG,GAEXC,2BAA2B,Kf88BtB,SAASvP,OAAQD,QAASH,qBAE/B,QAAS4P,wBAAuBC,KAAO,MAAOA,MAAOA,IAAIC,WAAaD,KAAQE,UAAWF,KAOzF7P,oBgB19BM,GhB89BN,IAAIgQ,mBAAoBhQ,oBgB39BH,IhB69BjBiQ,mBAAqBL,uBAAuBI,kBAEhDhQ,qBgB79BM,IhB+9BNA,oBgB99BM,IhBg+BNA,oBgB/9BM,GhBi+BNA,oBgBh+BM,GhBk+BNA,oBgBj+BM,GhBm+BNA,oBgBl+BM,GhBo+BNA,oBgBn+BM,GhBq+BNA,oBgBp+BM,GhBs+BNA,oBgBr+BM,IhBu+BNA,oBgBt+BM,IhBw+BNA,oBgBv+BM,GhBy+BNA,oBgBx+BM,GhB0+BNA,oBgBz+BM,IhB2+BNA,oBgB1+BM,GhB4+BNA,oBgB1+BM,IhB4+BNA,oBgB3+BM,IAEPW,GAAGC,KAAK,UAAW,WAElBG,KAAKG,OAAO,QAAS,WACpBH,KAAKC,GAAG,UAAW,WAClBD,KAAKmP,OAAO,KAAM,WACjBnP,KAAKS,MAAMwC,IAAIzB,SAEhBxB,KAAKS,MAAMwC,IAAIhD,GAAG,OAAQ,WACzBD,KAAKoP,KAAKnN,SAAS,UAClBd,KAAKnB,OACPA,KAAKS,MAAMwC,IAAIhD,GAAG,QAAS,WAC1BD,KAAKoP,KAAKrG,YAAY,UACrB5H,KAAKnB,SAGRA,KAAK8M,MAAQ,WACZ9M,KAAKoM,KAAK,UACVpM,KAAKqP,UAAUvC,SAGhB9M,KAAK+M,OAAS,WACb/M,KAAKmP,OAAO,KAAM,WACjBnP,KAAKS,MAAMwC,IAAIzB,SAEhBxB,KAAKqP,UAAUtC,UAGhB/M,KAAKC,GAAG,QAAS,SAASC,QACrBF,KAAKI,GAAGF,OAAOG,SAEhBL,KAAKH,KAAKyP,UAAU3O,MAAMX,KAAKY,MAAM2O,QAAQvP,KAAKH,KAAKyP,UAAUE,WAGrExP,KAAKC,GAAG,WAAY,WACnBD,KAAKoM,KAAK,cAIZpM,KAAKG,OAAO,aAAY+O,mBAAA,YAExBlP,KAAKG,OAAO,gBAAiB,WAC5B,GAAIsP,OAAQ,CAEZzP,MAAKC,GAAG,QAAS,SAASC,QACrBF,KAAKI,GAAGF,OAAOG,UACnBL,KAAKiB,OAASjB,KAAK0P,MAAM7M,OAAOvC,KAAK,MAAMW,UAG5CjB,KAAK0N,QAAQ,SAAU,SAAUxN,QAC5BA,OAAOkK,eAAehK,GAAG,QAC7BJ,KAAKS,MAAMwC,IAAIM,QAAQ/B,OACvBxB,KAAK0P,MAAMhN,KAAK+M,SACbA,OAASzP,KAAKiB,SAAQwO,MAAQ,QAInCzP,KAAKG,OAAO,mBAAoB,WAC/BH,KAAKC,GAAG,UAAW,WAClBD,KAAKmD,SAASnD,KAAK2P,iBAAiB9M,OAAOvC,KAAK,SAGjDN,KAAKC,GAAG,cAAe,SAASC,QAC5BF,KAAKS,MAAM0D,UAAUyL,WAAa1P,OAAOG,QAC3CL,KAAK2P,iBAAiB9M,OAAOH,KAAK,KAIpC1C,KAAKuK,OAAO,oBAAqB,WAChCvK,KAAKkB,MAAQ,aAEblB,KAAK0N,QAAQ,SAAU,SAAUxN,QAChC,GAAIiC,OAAOwL,WAEXxL,OAAQjC,OAAOmK,QACfsD,YAAc3N,KAAKe,WAAW6M,aAAe,UAExCzL,QACJnC,KAAK2N,aAAazN,OAAOkK,gBACtBpK,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO1B,OAChDxB,KAAK6C,OAAOH,KAAKP,UAInBnC,KAAKuK,OAAO,aAAc,WAEzBvK,KAAK6N,aAAe,SAAUC,UAC7B,MAAIA,UAAShC,OAAOqB,SAASnN,KAAKY,MAAMmN,cAAqC,IAArBD,SAAS3L,SACxDnC,KAAKG,OAAOQ,MAAMX,KAAKY,MAAMmC,aAG/B,SAOX/C,KAAKG,OAAO,OAAQ,WACnBH,KAAKwL,KAAO,WACXxL,KAAKH,KAAKgQ,KAAK7C,QAGhBhN,KAAKuK,OAAO,kBAAmB,WAC9BvK,KAAKC,GAAG,eAAgB,SAASC,QAC5BF,KAAKI,GAAGF,OAAOG,UACnBL,KAAKM,KAAK,SAAS2B,SAAS,SAC5BjC,KAAKG,OAAOM,MAAMwC,IAAI6M,MAAMtO,cAK/BxB,KAAKiN,KAAO,WACX,GAAI9M,QAAQ4P,aAOZ,OALA5P,QAASH,KAAKmI,QAAQvI,GAAGC,KAAK0O,OAAO,kBAAkB,oBAAoByB,QAC3ED,eAAkB,OAAQ/P,KAAKV,KAAMa,OAAOb,KAAK,KAAKa,OAAOgC,QAAQ,GAAG,KAAM8N,KAAK,KAEnFC,GAAG,OAAQ,QAASH,cAAe,QAE5B/P,KAAK2L,YhBg/BR,SAAStM,OAAQD,SiB/nCR,QAAS+Q,aACvB,GAAIV,OAAQ,CAEZzP,MAAKC,GAAG,QAAS,SAASC,QACrBF,KAAKI,GAAGF,OAAOG,UACnBL,KAAKiB,OAASjB,KAAK0P,MAAM7M,OAAOvC,KAAK,MAAMW,UAG5CjB,KAAK0N,QAAQ,SAAU,SAASxN,QACT,QAAnBA,OAAOmK,SACTrK,KAAKS,MAAMwC,IAAIM,QAAQ/B,OACvBxB,KAAK0P,MAAMhN,KAAK+M,SACbA,OAASzP,KAAKiB,SAAQwO,MAAQ,IAEjCzP,KAAKS,MAAMwC,IAAImN,UAAU5O,SAI3BxB,KAAKuK,OAAO,QAAS,WACpBvK,KAAK8C,MAAQ,aACR9C,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMmC,aAAe/C,KAAKH,KAAKmD,YAC7DhD,KAAKH,KAAKY,MAAMwC,IAAIC,QAAQlD,KAAKH,KAAKY,MAAMwC,IAAIC,OAAO1B,OAC1DxB,KAAKmD,WACLnD,KAAKG,OAAOkQ,OAAOlH,cjB0mCtBmH,OAAOC,eAAenR,QAAS,cAC9BkL,OAAO,IAERlL,QAAQ,WiBpoCe+Q,UjBuqCvB9Q,OAAOD,QAAUA,QAAQ,YAIpB,SAASC,OAAQD,UkB9qCvB,SAAUoB,EAAEgQ,EAAEC,EAAEC,EAAEC,EAAEC,EAAEnR,GAAGe,EAAyB,sBAAEmQ,EAAEnQ,EAAEmQ,GAAGnQ,EAAEmQ,IAAI,YAChEnQ,EAAEmQ,GAAGE,EAAErQ,EAAEmQ,GAAGE,OAAOtI,KAAKuI,YAAYtQ,EAAEmQ,GAAGI,EAAE,EAAE,GAAIC,MAAOJ,EAAEJ,EAAES,cAAcR,GAC3EhR,EAAE+Q,EAAEU,qBAAqBT,GAAG,GAAGG,EAAEO,MAAM,EAAEP,EAAEQ,IAAIV,EAAEjR,EAAE4R,WAAWC,aAAaV,EAAEnR,IAC1EgN,OAAO8E,SAAS,SAAS,0CAA0C,MAEtErB,GAAG,SAAU,gBAAiB,QAC9BA,GAAG,OAAQ,alBqrCL,SAAS7Q,OAAQD,SmB3rCvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAEtCE,KAAKC,GAAG,QAAS,SAAUuM,IACtBxM,KAAKI,GAAGoM,GAAGnM,SAEZL,KAAKH,MAAQG,KAAKH,KAAKgC,MAAMlB,MAAMX,KAAKY,MAAM2O,QAChDvP,KAAKwP,WAIPxP,KAAKwP,OAAS,WACbxP,KAAK8C,MAAM9C,KAAKH,KAAKwN,QAElBrN,KAAKH,KAAKsN,SAAS,QACrBnN,KAAK6L,OACL7L,KAAKwR,KAAKlG,MAAM,EAAGtL,KAAKwR,KAAK3F,OAE7B7L,KAAKH,KAAKgC,MAAMgK,QAIlB7L,KAAKwL,KAAO,WACX,GAAIC,YAAazL,KAAK2L,OAQtB,OANIF,cACHzL,KAAKG,OAAOyL,QACZH,WAAWI,OACX7L,KAAKH,KAAKY,MAAMwC,IAAIC,OAAO1B,QAGrBiK,YAGRzL,KAAKyC,SAAW,WAEf,MADAzC,MAAKH,KAAKY,MAAMwC,IAAIzB,KAAK,kBAClBxB,KAAK2L,SAGb3L,KAAKyR,UAAY,WACZzR,KAAKmN,SAAS,cAClBnN,KAAKH,KAAKoC,SAAS,WACnBjC,KAAKsL,MAAM,OAAQ,WAClBtL,KAAKwL,WAIPxL,KAAKC,GAAG,eAAgB,SAASuM,IAC5BxM,KAAKwR,KAAKpR,GAAGoM,GAAGnM,SACpBL,KAAKiC,SAAS,iBnBmsCV,SAAS5C,OAAQD,UoBnvCvB,QAAUsS,MAAMC,MACXlF,OAAOmF,SAAWnF,OACrBA,OAAOoF,SAASC,KAAO,oCAEvBP,SAASQ,OAAS","file":"monarch/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(15);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.component('audio-sequence', function () {\n\t\n\t\tvar sounds = null;\n\t\n\t\tthis.on('ready', function (_event) {\n\t\t\tvar screen = this.screen;\n\t\n\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\tsounds = this.find(\"> audio\");\n\t\t\tsounds.each(function (i, audio) {\n\t\t\t\taudio.onended = function () {\n\t\t\t\t\tif (sounds[i + 1] && screen.state(screen.STATE.OPEN)) screen.playSound(sounds[i + 1]);\n\t\t\t\t};\n\t\t\t});\n\t\t\tif (typeof this.properties.loop !== 'undefined') {\n\t\t\t\tsounds[sounds.length - 1].onended = this.start.bind(this);\n\t\t\t}\n\t\t});\n\t\n\t\tthis.start = function () {\n\t\t\tif (sounds[0] && this.screen.state(this.screen.STATE.OPEN)) this.screen.playSound(sounds[0]);\n\t\t};\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tpl.game.component('frame', function () {\n\t\n\t\tthis.start = function () {\n\t\t\tvar bgSound, voSound;\n\t\n\t\t\tbgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t\t\tvoSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\t\n\t\t\tif (bgSound) bgSound.play();\n\t\t\tif (voSound && !voSound.hasAttribute(\"pl-dontautoplay\")) voSound.play();\n\t\n\t\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.handleProperty({\n\t\t\ttitle: function title(_node, _name, _value) {\n\t\t\t\tif (this.is(_node)) {\n\t\t\t\t\tthis.find('.frame').addClass('title');\n\t\t\t\t\tthis.game.defineRule('.experiment:nth-of-type(' + (this.screen.index() + 1) + ') .frame-component .frame.title::before', {\n\t\t\t\t\t\tbackgroundImage: 'url(' + _value + ')'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-open', function (_event) {\n\t\t\tif (this.isReady) {\n\t\t\t\tthis.start();\n\t\t\t}\n\t\n\t\t\tif (this === _event.targetScope) {\n\t\t\t\tif (!(this.hasOwnProperty('isComplete') && this.isComplete) && !(this.hasOwnProperty('requiredQueue') && this.requiredQueue && this.requiredQueue.length)) {\n\t\t\t\t\tthis.complete();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('modal', function () {\n\t\n\t\tthis.item = function (_id) {\n\t\t\tthis.select(this);\n\t\t\tthis.reveal.item(_id);\n\t\t};\n\t\n\t\tthis.close = function () {\n\t\t\tif (!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n\t\t\t\tif (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t\t\t\tthis.deselect();\n\t\t\t}\n\t\t};\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('multiple-choice', function () {\n\t\n\t\tfunction validateAnswer(_scope) {\n\t\t\tvar answers;\n\t\n\t\t\tif (_scope.properties.correct) {\n\t\t\t\tanswers = _scope.properties.correct.split(/\\s*,\\s*/);\n\t\n\t\t\t\tif (~answers.indexOf(String(_scope.getSelected().index()))) {\n\t\t\t\t\t_scope.complete();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t}\n\t\n\t\tthis.answer = function () {\n\t\t\tif (this.event) {\n\t\t\t\t$li = $(this.event.target).closest('li');\n\t\n\t\t\t\tif (!this.isComplete && this.select($li)) {\n\t\t\t\t\tvalidateAnswer(this);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t\tthis.item = function (_id) {\n\t\t\tvar vo, index, vo;\n\t\n\t\t\tif (typeof _id === 'number') {\n\t\t\t\tthis.select(this.find('li').eq(_id));\n\t\t\t\tvo = this.audio.voiceOver && this.audio.voiceOver[_id];\n\t\t\t\tif (vo) vo.play();\n\t\t\t} else if (typeof _id === 'string') {\n\t\t\t\tif (this[_id]) {\n\t\t\t\t\tthis.select(this[_id]);\n\t\n\t\t\t\t\tif (this.audio) {\n\t\t\t\t\t\tindex = this[_id].index();\n\t\t\t\t\t\tvo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t\t\t\t\t\tif (vo) vo.play();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('runner', function () {\n\t\tvar canvas, Flower, gameLoop, FLOWER, scale, boundPulse;\n\t\n\t\tFLOWER = {\n\t\t\tORANGE: \"[pl-id=orange]\",\n\t\t\tRED: \"[pl-id=red]\",\n\t\t\tYELLOW: \"[pl-id=yellow]\"\n\t\t};\n\t\n\t\tgameLoop = {\n\t\n\t\t\tlastRecycledFlower: null,\n\t\n\t\t\t// main game loop\n\t\t\tframe: function frame(_scope) {\n\t\t\t\t// tranision flowers one px on each frame\n\t\t\t\t_scope.flowers.forEach((function (_flower) {\n\t\t\t\t\tvar x, width;\n\t\t\t\t\t_flower.position.x -= 1;\n\t\n\t\t\t\t\tx = _flower.position.x + _flower.margin;\n\t\t\t\t\twidth = _flower.size.width;\n\t\n\t\t\t\t\tif (x + width < 0) this.recycle(_scope, _flower);\n\t\t\t\t}).bind(this));\n\t\t\t},\n\t\n\t\t\trecycle: function recycle(_scope, _flower) {\n\t\t\t\t_flower.image = pl.util.random(_scope.bin);\n\t\t\t\t_flower.margin = pl.util.random(2, 10) * 10;\n\t\t\t\t_flower.position.x = _scope.width() + _flower.margin;\n\t\n\t\t\t\tif (this.lastRecycledFlower) {\n\t\t\t\t\t_flower.position.x = this.lastRecycledFlower.margin + this.lastRecycledFlower.position.x + this.lastRecycledFlower.size.width;\n\t\t\t\t}\n\t\n\t\t\t\tthis.lastRecycledFlower = _flower;\n\t\t\t},\n\t\n\t\t\tpulsePoint: 0,\n\t\n\t\t\tpulse: function pulse(_scope, _flower) {\n\t\t\t\t// pulse flower\n\t\t\t\tgameLoop.pulsePoint++;\n\t\t\t\t_flower.position.x += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t\t\t\t_flower.position.y += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t\t\t\t_flower.size.width += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t\t\t\t_flower.size.height += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t\t\t}\n\t\n\t\t};\n\t\n\t\tFlower = pl.Basic.extend(function () {\n\t\n\t\t\tthis.position = null;\n\t\t\tthis.size = null;\n\t\t\tthis.margin = 0;\n\t\t\tthis.image = null;\n\t\n\t\t\tthis.init = function (_image) {\n\t\t\t\tvar $image = $(_image);\n\t\n\t\t\t\tthis.image = _image;\n\t\n\t\t\t\tthis.position = pl.Point.create();\n\t\t\t\tthis.size = [_image.naturalWidth, _image.naturalHeight].to('size');\n\t\t\t\tthis.margin = pl.util.random(2, 10) * 10;\n\t\n\t\t\t\t['Width', 'Height'].some(function (_plane) {\n\t\t\t\t\tif (_image[_plane.toLowerCase()] !== _image['natural' + _plane]) {\n\t\t\t\t\t\tscale = _image[_plane.toLowerCase()] / _image['natural' + _plane];\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tif (scale) this.size = this.size.scale(scale).math('floor');\n\t\n\t\t\t\treturn this;\n\t\t\t};\n\t\n\t\t\tthis.render = function () {\n\t\t\t\treturn {\n\t\t\t\t\tdrawImage: [this.image, this.position.x + this.margin, this.position.y + 25, this.size.width, this.size.height]\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tthis.is = function (_type) {\n\t\t\t\treturn $(this.image).is(_type);\n\t\t\t};\n\t\n\t\t\tthis.id = function () {\n\t\t\t\treturn $(this.image).id();\n\t\t\t};\n\t\t});\n\t\n\t\tcanvas = {\n\t\n\t\t\tctx: null,\n\t\t\tnode: null,\n\t\t\tcontent: null,\n\t\t\tscale: 1,\n\t\n\t\t\tinit: function init(_canvas, _size, _scale) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\t\n\t\t\t\tthis.node = _canvas;\n\t\t\t\tthis.ctx = _canvas.getContext('2d');\n\t\t\t\tthis.scale = _scale || 1;\n\t\n\t\t\t\tif (! ~size.indexOf(void 0)) {\n\t\t\t\t\t_canvas.width = size.width;\n\t\t\t\t\t_canvas.height = size.height;\n\t\t\t\t}\n\t\n\t\t\t\tthis.ctx.scale(_scale, _scale);\n\t\n\t\t\t\treturn this;\n\t\t\t},\n\t\n\t\t\tresize: function resize(_size, _scale) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\t\n\t\t\t\tthis.node.width = size.width;\n\t\t\t\tthis.node.height = size.height;\n\t\t\t\tthis.scale = _scale || 1;\n\t\n\t\t\t\tthis.ctx.scale(_scale, _scale);\n\t\t\t},\n\t\n\t\t\tclear: function clear() {\n\t\t\t\tthis.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n\t\t\t},\n\t\n\t\t\tdraw: function draw(_obj) {\n\t\t\t\tvar commands, cmd;\n\t\n\t\t\t\tcommands = _obj.render();\n\t\n\t\t\t\tfor (cmd in commands) {\n\t\t\t\t\tif (typeof this.ctx[cmd] !== 'function') continue;\n\t\t\t\t\tthis.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tthis.bin = null;\n\t\tthis.flowers = null;\n\t\tthis.player = null;\n\t\tthis.conveyor = null;\n\t\tthis.isConveyorRunning = false;\n\t\n\t\t// Handle when the component scope is ready.\n\t\tthis.on('ready', function (_event) {\n\t\t\tvar canvasSize, width;\n\t\n\t\t\t// Do not handle child scopes becomming ready.\n\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\twidth = this.width();\n\t\n\t\t\tthis.bin = this.findOwn('.bin img.flower').toArray();\n\t\t\tthis.flowers = (function (_scope) {\n\t\t\t\tvar shouldAppend, image, flower, x;\n\t\n\t\t\t\tshouldAppend = true;\n\t\t\t\tx = 0;\n\t\n\t\t\t\twhile (shouldAppend) {\n\t\t\t\t\timage = pl.util.random(_scope.bin);\n\t\t\t\t\tflower = Flower.create().init(image);\n\t\n\t\t\t\t\tflower.position.x = x;\n\t\t\t\t\tx += flower.size.width + flower.margin;\n\t\n\t\t\t\t\tthis.push(flower);\n\t\n\t\t\t\t\tshouldAppend = flower.position.x < width;\n\t\n\t\t\t\t\t_scope.log(flower.position.x, width);\n\t\t\t\t}\n\t\n\t\t\t\treturn this;\n\t\t\t}).call([], this);\n\t\n\t\t\tcanvasSize = pl.Size.create().set(width, 125);\n\t\n\t\t\tcanvas.init(this.conveyor[0], canvasSize, this.game.zoom);\n\t\n\t\t\tthis.game.viewport.onResize(this.game.bind(function () {\n\t\t\t\tcanvas.resize(canvasSize, this.zoom);\n\t\t\t}));\n\t\t});\n\t\n\t\tthis.on('transitionend', function (_event) {\n\t\t\tif (!this.player.is(_event.target)) return;\n\t\n\t\t\tif (this.player.state('GRAVITY')) {\n\t\t\t\tthis.isConveyorRunning = !this.testFlower();\n\t\n\t\t\t\tif (this.isConveyorRunning) this.player.removeClass('GRAVITY');\n\t\t\t} else if (this.player.state('JUMPING')) {\n\t\t\t\tthis.player.removeClass('JUMPING').addClass('GRAVITY').attr('style', null);\n\t\t\t}\n\t\t});\n\t\n\t\tthis.start = function () {\n\t\t\tthis.log('started');\n\t\t\tthis.isConveyorRunning = true;\n\t\t\tthis.eachFrame(this.onEachFrame);\n\t\t};\n\t\n\t\tthis.restart = function () {\n\t\t\tthis.isConveyorRunning = true;\n\t\t\tthis.player.removeClass('GRAVITY');\n\t\t};\n\t\n\t\tthis.stop = function () {\n\t\t\tthis.eachFrame(this.onEachFrame, false);\n\t\t};\n\t\n\t\tthis.onEachFrame = function () {\n\t\t\tif (!this.isConveyorRunning) return;\n\t\n\t\t\tcanvas.clear();\n\t\n\t\t\tgameLoop.frame(this);\n\t\n\t\t\tthis.flowers.forEach(function (_flower) {\n\t\t\t\tcanvas.draw(_flower);\n\t\t\t});\n\t\t};\n\t\n\t\tthis.pulse = function (_flower) {\n\t\t\tif (gameLoop.pulsePoint >= 80) {\n\t\t\t\tgameLoop.pulsePoint = 0;\n\t\t\t\tthis.eachFrame(boundPulse, false);\n\t\t\t}\n\t\n\t\t\tcanvas.clear();\n\t\n\t\t\tgameLoop.pulse(this, _flower);\n\t\n\t\t\tthis.flowers.forEach(function (_flower) {\n\t\t\t\tcanvas.draw(_flower);\n\t\t\t});\n\t\t};\n\t\n\t\tthis.testFlower = function () {\n\t\t\tvar target, flower, player;\n\t\n\t\t\tplayer = {\n\t\t\t\tpos: this.player.absolutePosition(),\n\t\t\t\tsize: pl.Size.create().set(this.player.width(), this.player.height())\n\t\t\t};\n\t\n\t\t\ttarget = pl.Point.create().set(player.pos.x + player.size.width / 2, 40).inc(20, 0);\n\t\n\t\t\t// canvas.ctx.fillStyle = '#000';\n\t\n\t\t\tthis.flowers.some(this.bind(function (_flower) {\n\t\t\t\tvar hitArea, padding, inBoundsX, inBoundsY;\n\t\n\t\t\t\tpadding = 25;\n\t\t\t\thitArea = {\n\t\t\t\t\tx1: _flower.position.x + _flower.margin + padding,\n\t\t\t\t\ty1: _flower.position.y + padding,\n\t\t\t\t\tx2: _flower.position.x + _flower.margin + _flower.size.width - padding * 1,\n\t\t\t\t\ty2: _flower.position.y + _flower.size.height - padding * 1\n\t\t\t\t};\n\t\n\t\t\t\t// canvas.ctx.fillRect(hitArea.x1, hitArea.y1, hitArea.x2 - hitArea.x1, hitArea.y2 - hitArea.y1);\n\t\n\t\t\t\tinBoundsX = target.x > hitArea.x1 && target.x < hitArea.x2;\n\t\t\t\tinBoundsY = target.y > hitArea.y1 && target.y < hitArea.y2;\n\t\n\t\t\t\tif (inBoundsX && inBoundsY && _flower.is(FLOWER.RED)) {\n\t\t\t\t\tflower = _flower;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}));\n\t\n\t\t\tthis.landed(flower);\n\t\n\t\t\t// canvas.ctx.fillStyle = '#00f';\n\t\t\t// canvas.ctx.fillRect(target.x, target.y, 10,10);\n\t\n\t\t\treturn flower;\n\t\t};\n\t\n\t\tthis.behavior('jump', function () {\n\t\t\tvar position;\n\t\n\t\t\tif (!this.isConveyorRunning) return;\n\t\n\t\t\tposition = this.player.transformPosition();\n\t\n\t\t\tthis.player.removeClass('GRAVITY').addClass('JUMPING').transformPosition(position.dec(0, 60));\n\t\n\t\t\tthis.log('behavior:jump');\n\t\n\t\t\treturn {\n\t\t\t\tbehaviorTarget: this.player\n\t\t\t};\n\t\t});\n\t\n\t\tthis.behavior('landed', function (_flower) {\n\t\t\tvar id;\n\t\n\t\t\tif (_flower) {\n\t\t\t\tid = _flower.id();\n\t\t\t\tboundPulse = this.pulse.bind(this, _flower);\n\t\t\t\tthis.eachFrame(boundPulse);\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\tmessage: id,\n\t\t\t\tbehaviorTarget: this.player\n\t\t\t};\n\t\t});\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('score', function () {\n\t\n\t\tthis.value = 0;\n\t\n\t\tthis.entity('.board', function () {\n\t\n\t\t\tthis.template = null;\n\t\n\t\t\tthis.ready = function () {\n\t\t\t\tthis.template = this.html();\n\t\t\t};\n\t\n\t\t\tthis.render = function () {\n\t\t\t\tthis.html(this.template.replace('{{score}}', this.value));\n\t\t\t\treturn this;\n\t\t\t};\n\t\t});\n\t\n\t\tthis.init = function () {\n\t\t\tthis.screen.require(this);\n\t\t};\n\t\n\t\tthis.ready = function () {\n\t\t\tthis.board.render();\n\t\t};\n\t\n\t\tthis.up = function (_count) {\n\t\t\tthis.value += _count || 1;\n\t\n\t\t\tthis.board.render();\n\t\n\t\t\tconsole.log('score', this.value, this.properties.max);\n\t\n\t\t\tif (this.value == this.properties.max) {\n\t\t\t\tconsole.log('oh word');\n\t\t\t\tthis.complete();\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.down = function (_count) {\n\t\t\tthis.value -= _count || 1;\n\t\n\t\t\tthis.board.render();\n\t\n\t\t\tif (this.value == this.properties.max) {\n\t\t\t\tthis.complete();\n\t\t\t}\n\t\n\t\t\treturn this;\n\t\t};\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t\tthis.currentVO = null;\n\t\n\t\tthis.allowAction = function () {\n\t\t\treturn this.screen.state(this.screen.STATE.OPEN) && !this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode;\n\t\t};\n\t\n\t\tthis.playSound = function (_sound) {\n\t\t\tvar delay;\n\t\n\t\t\tdelay = $(_sound).attr('pl-delay');\n\t\n\t\t\tif (_sound.type === 'voiceOver') {\n\t\t\t\tthis.currentVO = _sound;\n\t\t\t}\n\t\n\t\t\tif (delay) {\n\t\t\t\treturn this.delay(delay, _sound.play.bind(_sound));\n\t\t\t} else {\n\t\t\t\treturn _sound.play();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen, buttonSound;\n\t\n\t\t\tnextScreen = this.proto();\n\t\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tif (buttonSound) buttonSound.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.prev = function () {\n\t\t\tvar prevScreen, buttonSound;\n\t\n\t\t\tprevScreen = this.proto();\n\t\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t\t\tif (prevScreen) {\n\t\t\t\tthis.screen.close();\n\t\t\t\tprevScreen.open();\n\t\t\t\tif (buttonSound) buttonSound.play();\n\t\t\t}\n\t\n\t\t\treturn prevScreen;\n\t\t};\n\t\n\t\tthis.start = function () {\n\t\t\tvar bgSound, voSound;\n\t\n\t\t\tbgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t\t\tvoSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\t\t\tfxSound = pl.util.resolvePath(this, 'audio.sfx.start');\n\t\n\t\t\tif (bgSound) {\n\t\t\t\tthis.game.bgSound = bgSound;\n\t\t\t\tbgSound.play();\n\t\t\t}\n\t\t\tif (fxSound) fxSound.play();\n\t\t\tif (voSound) this.playSound(voSound);\n\t\n\t\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.stop = function () {\n\t\t\tif (this.timeoutID) {\n\t\t\t\tclearTimeout(this.timeoutID);\n\t\t\t}\n\t\n\t\t\tif (this.intervalID) {\n\t\t\t\tthis.kill(\"repeat\");\n\t\t\t}\n\t\n\t\t\tif (this.currentVO) {\n\t\t\t\tthis.currentVO.stop();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.on('ui-open', function (_event) {\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.start();\n\t\t\t}\n\t\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.addClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t\t\t\tthis.complete();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-leave', function (_event) {\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-close', function (_event) {\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ready', function () {\n\t\t\tif (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n\t\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\t\tvar sfx;\n\t\n\t\t\t\t\tsfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\t\n\t\t\t\t\tif (sfx) this.playSound(sfx);\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t\tthis.buttonSound = function () {\n\t\t\tif (this.audio.sfx.button) this.audio.sfx.button.play();\n\t\t};\n\t\n\t\t// TODO: Make an automated way to handle this\n\t\tthis.on('transitionend', function (_event) {\n\t\t\tif (this.state(this.STATE.LEAVE)) {\n\t\t\t\tthis.addClass('LEAVE-END');\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tvar ctx;\n\t\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tctx = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\tif (this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n\t\t\tif (this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n\t\t});\n\t\n\t\tthis.on('ui-open', function (_event) {\n\t\t\tif (this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n\t\t\tthis.buttonSound();\n\t\t\tthis.game.addClass('QUIT-SCREEN');\n\t\t\tthis.removeClass('LEAVE-END');\n\t\t\tthis.game.pause(true);\n\t\t});\n\t\n\t\tthis.on('ui-leave', function () {\n\t\t\tthis.game.removeClass('QUIT-SCREEN');\n\t\t\tthis.game.resume();\n\t\t});\n\t\n\t\tthis.init = function () {\n\t\t\tthis.addClass('LEAVE LEAVE-END');\n\t\t};\n\t\n\t\tthis.okay = function () {\n\t\t\tthis.buttonSound();\n\t\t\tthis.game.exit();\n\t\t};\n\t\n\t\tthis.cancel = function () {\n\t\t\tthis.buttonSound();\n\t\t\tthis.leave();\n\t\t};\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-title', function () {\n\t\n\t\tthis.playSound = function (_sound) {\n\t\t\tvar delay;\n\t\n\t\t\tdelay = $(_sound).attr('pl-delay');\n\t\n\t\t\tif ($(_sound).hasClass('voice-over')) {\n\t\t\t\tthis.currentVO = _sound;\n\t\t\t}\n\t\n\t\t\tif (delay) {\n\t\t\t\treturn this.delay(delay, _sound.play.bind(_sound));\n\t\t\t} else {\n\t\t\t\treturn _sound.play();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.on('ready', function (_event) {\n\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\tthis.delay(0, this.open);\n\t\n\t\t\tif (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n\t\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\t\tvar sfx;\n\t\n\t\t\t\t\tsfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\t\n\t\t\t\t\tif (sfx) this.playSound(sfx);\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  * Start the title screen logo animation when the screen opens.\n\t  */\n\t\tthis.on('ui-open', function () {\n\t\t\tvar so,\n\t\t\t    delay = this.properties.delay;\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tso = pl.util.resolvePath(this, 'audio.background[0]?');\n\t\n\t\t\tif (so) so.play();\n\t\n\t\t\treturn this;\n\t\t});\n\t\n\t\tthis.on('ui-close', function (_event) {\n\t\t\tif (!this.is(_event.target)) return;\n\t\t\tthis.on('transitionend', function (_event) {\n\t\t\t\tif (!this.is(_event.target)) return;\n\t\t\t\tthis.logo.removeClass(this.properties.animOut).off('animationend');\n\t\t\t\tthis.off('transitionend');\n\t\t\t});\n\t\t});\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen, so, animate;\n\t\n\t\t\tfunction leave() {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t}\n\t\n\t\t\tnextScreen = this.proto();\n\t\t\tso = pl.util.resolvePath(this, 'audio.sfx.nextScreen');\n\t\t\tanimate = this.properties.animOut || '';\n\t\n\t\t\tif (!so) {\n\t\t\t\tso = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\t\t}\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tif (animate) {\n\t\t\t\t\tthis.logo.on('animationend', leave.bind(this)).addClass(animate);\n\t\t\t\t} else {\n\t\t\t\t\tleave.call(this);\n\t\t\t\t}\n\t\n\t\t\t\tif (so) so.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-reveal', function () {\n\t\n\t\tthis.respond('select', function (_event) {\n\t\t\tvar index, stateMethod;\n\t\n\t\t\tindex = _event.message;\n\t\t\tstateMethod = this.properties.selectState || 'select';\n\t\n\t\t\tif (~index) {\n\t\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\t\tthis.reveal.item(index);\n\t\t\t}\n\t\t});\n\t\n\t\tthis.entity('selectable', function () {\n\t\n\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t}\n\t\n\t\t\t\treturn false;\n\t\t\t};\n\t\t});\n\t});\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t\tthis.behavior('select', function (_target) {\n\t\t\tvar $target, id;\n\t\n\t\t\tif (this.event) {\n\t\t\t\t$target = $(this.event.target).closest('li');\n\t\t\t\tid = $target.id() || $target.index();\n\t\n\t\t\t\tif (this.shouldSelect($target) !== false) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: id,\n\t\t\t\t\t\tbehaviorTarget: $target\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.proto(_target);\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t});\n\t\n\t\tthis.shouldSelect = function (_target) {\n\t\t\treturn true;\n\t\t};\n\t\n\t\tthis.deselectAll = function () {\n\t\t\tvar items = this.find('li');\n\t\t\tthis.deselect(items);\n\t\t\tthis.unhighlight(items);\n\t\t};\n\t});\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tpl.game.component('video', function () {\n\t\n\t\tthis.start = function () {\n\t\t\tvar self = this;\n\t\t\tthis.video.on('ended', function () {\n\t\t\t\tself.complete();\n\t\t\t});\n\t\t\tif (this.game.bgSound) this.game.bgSound.pause();\n\t\t\tthis.video[0].play();\n\t\t};\n\t\n\t\tthis.pause = function () {\n\t\t\tthis.video[0].pause();\n\t\t};\n\t\n\t\tthis.resume = function () {\n\t\t\tif (this.isComplete) return;\n\t\t\tthis.video[0].play();\n\t\t};\n\t\n\t\tthis.screen.on('ui-close', this.pause.bind(this));\n\t});\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t\tscreenSelector: '.screen',\n\t\tcomponentDirectory: 'components/',\n\t\tdimensions: {\n\t\t\twidth: 960,\n\t\t\tratio: 16 / 9\n\t\t},\n\t\tshouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(14);\n\t\n\t// SCREENS\n\t\n\tvar _screensFlyAcross = __webpack_require__(16);\n\t\n\tvar _screensFlyAcross2 = _interopRequireDefault(_screensFlyAcross);\n\t\n\t__webpack_require__(18);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(19);\n\t\n\t__webpack_require__(17);\n\t\n\tpl.game('monarch', function () {\n\t\n\t\tthis.screen('title', function () {\n\t\t\tthis.on('ui-open', function () {\n\t\t\t\tthis.repeat('4s', function () {\n\t\t\t\t\tthis.audio.sfx.play();\n\t\t\t\t});\n\t\t\t\tthis.audio.sfx.on('play', (function () {\n\t\t\t\t\tthis.pupa.addClass('SHAKE');\n\t\t\t\t}).bind(this));\n\t\t\t\tthis.audio.sfx.on('ended', (function () {\n\t\t\t\t\tthis.pupa.removeClass('SHAKE');\n\t\t\t\t}).bind(this));\n\t\t\t});\n\t\n\t\t\tthis.pause = function () {\n\t\t\t\tthis.kill('repeat');\n\t\t\t\tthis.__proto__.pause();\n\t\t\t};\n\t\n\t\t\tthis.resume = function () {\n\t\t\t\tthis.repeat('4s', function () {\n\t\t\t\t\tthis.audio.sfx.play();\n\t\t\t\t});\n\t\t\t\tthis.__proto__.resume();\n\t\t\t};\n\t\n\t\t\tthis.on('ready', function (_event) {\n\t\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\t\tif (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t\t\t});\n\t\n\t\t\tthis.on('ui-close', function () {\n\t\t\t\tthis.kill('repeat');\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('fly-across', _screensFlyAcross2['default']);\n\t\n\t\tthis.screen('floating-weed', function () {\n\t\t\tvar count = 0;\n\t\n\t\t\tthis.on('ready', function (_event) {\n\t\t\t\tif (!this.is(_event.target)) return;\n\t\t\t\tthis.length = this.modal.reveal.find('li').length;\n\t\t\t});\n\t\n\t\t\tthis.respond('select', function (_event) {\n\t\t\t\tif (!_event.behaviorTarget.is('li')) return;\n\t\t\t\tthis.audio.sfx.correct.play();\n\t\t\t\tthis.modal.item(count++);\n\t\t\t\tif (count >= this.length) count = 0;\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('four-generations', function () {\n\t\t\tthis.on('ui-open', function () {\n\t\t\t\tthis.deselect(this.selectableReveal.reveal.find('li'));\n\t\t\t});\n\t\n\t\t\tthis.on('audio-ended', function (_event) {\n\t\t\t\tif (this.audio.voiceOver.lifespan === _event.target) {\n\t\t\t\t\tthis.selectableReveal.reveal.item(4);\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\tthis.entity('selectable-reveal', function () {\n\t\t\t\tthis.start = function () {};\n\t\n\t\t\t\tthis.respond('select', function (_event) {\n\t\t\t\t\tvar index, stateMethod;\n\t\n\t\t\t\t\tindex = _event.message;\n\t\t\t\t\tstateMethod = this.properties.selectState || 'select';\n\t\n\t\t\t\t\tif (~index) {\n\t\t\t\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\t\t\t\tif (this.audio.sfx.button) this.audio.sfx.button.play();\n\t\t\t\t\t\tthis.reveal.item(index);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tthis.entity('selectable', function () {\n\t\n\t\t\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('flip', function () {\n\t\t\tthis.next = function () {\n\t\t\t\tthis.game.quit.okay();\n\t\t\t};\n\t\n\t\t\tthis.entity('.flip-container', function () {\n\t\t\t\tthis.on('animationend', function (_event) {\n\t\t\t\t\tif (!this.is(_event.target)) return;\n\t\t\t\t\tthis.find('.pupa').addClass('SHAKE');\n\t\t\t\t\tthis.screen.audio.sfx.shake.play();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\n\t\tthis.exit = function () {\n\t\t\tvar screen, eventCategory;\n\t\n\t\t\tscreen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t\t\teventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t\t\tga('send', 'event', eventCategory, 'quit');\n\t\n\t\t\treturn this.proto();\n\t\t};\n\t});\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\texports['default'] = flyAcross;\n\t/**\n\t * Monarch - Fly-Across Screen\n\t */\n\t\n\tfunction flyAcross() {\n\t\tvar count = 0;\n\t\n\t\tthis.on('ready', function (_event) {\n\t\t\tif (!this.is(_event.target)) return;\n\t\t\tthis.length = this.modal.reveal.find('li').length;\n\t\t});\n\t\n\t\tthis.respond('landed', function (_event) {\n\t\t\tif (_event.message === \"red\") {\n\t\t\t\tthis.audio.sfx.correct.play();\n\t\t\t\tthis.modal.item(count++);\n\t\t\t\tif (count >= this.length) count = 0;\n\t\t\t} else {\n\t\t\t\tthis.audio.sfx.incorrect.play();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.entity('modal', function () {\n\t\t\tthis.close = function () {\n\t\t\t\tif (!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n\t\t\t\t\tif (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t\t\t\t\tthis.deselect();\n\t\t\t\t\tthis.screen.runner.restart();\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tif (this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\t\tthis.splash();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.splash = function () {\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tif (this.game.hasClass('iOS')) {\n\t\t\t\tthis.open();\n\t\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t\t} else {\n\t\t\t\tthis.game.title.open();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen = this.proto();\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tthis.game.audio.sfx.button.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.complete = function () {\n\t\t\tthis.game.audio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.startGame = function () {\n\t\t\tif (!this.hasClass('FINISHED')) return;\n\t\t\tthis.game.addClass('STARTED');\n\t\t\tthis.delay('2.5s', function () {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.on('animationend', function (_e) {\n\t\t\tif (!this.ball.is(_e.target)) return;\n\t\t\tthis.addClass('FINISHED');\n\t\t});\n\t});\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t(function test(_env) {\n\t\tif (window.parent === window) {\n\t\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t\t} else {\n\t\t\tdocument.domain = 'changemyworldnow.com';\n\t\t}\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** monarch/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 69f348adf61677c6df43\n **/","pl.game.component('audio-sequence', function () {\n\t\n\tvar sounds = null;\n\n\tthis.on('ready', function(_event) {\n\t\tvar screen = this.screen;\n\n\t\tif (!this.is(_event.target)) return;\n\n\t\tsounds = this.find(\"> audio\");\n\t\tsounds.each(function(i, audio) {\n\t\t\taudio.onended = function() {\n\t\t\t\tif(sounds[i+1] && screen.state(screen.STATE.OPEN)) screen.playSound(sounds[i+1]);\n\t\t\t};\n\t\t});\n\t\tif(typeof this.properties.loop !== 'undefined') {\n\t\t\tsounds[sounds.length-1].onended = this.start.bind(this);\n\t\t}\n\t});\n\n\tthis.start = function() {\n\t\tif(sounds[0] && this.screen.state(this.screen.STATE.OPEN)) this.screen.playSound(sounds[0]);\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/audio-sequence/behavior.js\n **/","pl.game.component('frame', function () {\n\t\n\tthis.start = function () {\n\t\tvar bgSound, voSound;\n\n\t\tbgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t\tvoSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\n\t\tif (bgSound) bgSound.play();\n\t\tif (voSound && !voSound.hasAttribute(\"pl-dontautoplay\")) voSound.play();\n\n\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\n\t\treturn this;\n\t};\n\n\tthis.handleProperty({\n\t\ttitle: function (_node, _name, _value) {\n\t\t\tif (this.is(_node)) {\n\t\t\t\tthis.find('.frame').addClass('title');\n\t\t\t\tthis.game.defineRule('.experiment:nth-of-type('+(this.screen.index()+1)+') .frame-component .frame.title::before', {\n\t\t\t\t\tbackgroundImage: 'url('+ _value +')'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tthis.on('ui-open', function (_event) {\n\t\tif (this.isReady) {\n\t\t\tthis.start();\n\t\t}\n\n\t\tif (this === _event.targetScope) {\n\t\t\tif (!(this.hasOwnProperty('isComplete') && this.isComplete) && !(this.hasOwnProperty('requiredQueue') && (this.requiredQueue && this.requiredQueue.length))) {\n\t\t\t\tthis.complete();\n\t\t\t}\n\t\t}\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/frame/behavior.js\n **/","pl.game.component('modal', function () {\n\n\tthis.item = function(_id) {\n\t\tthis.select(this);\n\t\tthis.reveal.item(_id);\n\t};\n\t\n\tthis.close = function() {\n\t\tif(!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n\t\t\tif(this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t\t\tthis.deselect();\n\t\t}\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/modal/behavior.js\n **/","pl.game.component('multiple-choice', function () {\n\n\tfunction validateAnswer (_scope) {\n\t\tvar answers;\n\n\t\tif (_scope.properties.correct) {\n\t\t\tanswers = _scope.properties.correct.split(/\\s*,\\s*/);\n\n\t\t\tif (~answers.indexOf(String(_scope.getSelected().index()))) {\n\t\t\t\t_scope.complete();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tthis.answer = function () {\n\t\tif (this.event) {\n\t\t\t$li = $(this.event.target).closest('li');\n\n\t\t\tif (!this.isComplete && this.select($li)) {\n\t\t\t\tvalidateAnswer(this);\n\t\t\t}\n\t\t}\n\t};\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/multiple-choice/behavior.js\n **/","pl.game.component('reveal', function () {\n\n\tthis.item = function (_id) {\n\t\tvar vo, index, vo;\n\n\t\tif (typeof _id === 'number') {\n\t\t\tthis.select(this.find('li').eq(_id));\n\t\t\tvo = this.audio.voiceOver && this.audio.voiceOver[_id];\n\t\t\tif(vo) vo.play();\n\t\t}\n\t\t\t\n\t\telse if (typeof _id === 'string') {\n\t\t\tif (this[_id]) {\n\t\t\t\tthis.select(this[_id]);\n\n\t\t\t\tif (this.audio) {\n\t\t\t\t\tindex = this[_id].index();\n\t\t\t\t\tvo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\t\t\t\t\n\t\t\t\t\tif (vo) vo.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/reveal/behavior.js\n **/","pl.game.component('runner', function () {\n\tvar canvas, Flower, gameLoop, FLOWER, scale, boundPulse;\n\n\tFLOWER = {\n\t\tORANGE: \"[pl-id=orange]\",\n\t\tRED: \"[pl-id=red]\",\n\t\tYELLOW: \"[pl-id=yellow]\"\n\t};\n\n\tgameLoop = {\n\t\t\n\t\tlastRecycledFlower: null,\n\n\t\t// main game loop\n\t\tframe: function (_scope) {\n\t\t\t// tranision flowers one px on each frame\n\t\t\t_scope.flowers.forEach((function (_flower) {\n\t\t\t\tvar x, width;\n\t\t\t\t_flower.position.x -= 1;\n\n\t\t\t\tx = _flower.position.x + _flower.margin;\n\t\t\t\twidth = _flower.size.width;\n\n\t\t\t\tif (x + width < 0) this.recycle(_scope, _flower);\n\t\t\t}).bind(this));\n\t\t},\n\n\t\trecycle: function (_scope, _flower) {\n\t\t\t_flower.image = pl.util.random(_scope.bin);\n\t\t\t_flower.margin = pl.util.random(2,10) * 10;\n\t\t\t_flower.position.x = _scope.width() + _flower.margin;\n\n\t\t\tif (this.lastRecycledFlower) {\n\t\t\t\t_flower.position.x = this.lastRecycledFlower.margin + \n\t\t\t\t\tthis.lastRecycledFlower.position.x +\n\t\t\t\t\tthis.lastRecycledFlower.size.width;\n\t\t\t}\n\n\t\t\tthis.lastRecycledFlower = _flower;\n\t\t},\n\n\t\tpulsePoint: 0,\n\n\t\tpulse: function (_scope,_flower) {\n\t\t\t// pulse flower\n\t\t\tgameLoop.pulsePoint++;\n\t\t\t_flower.position.x += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t\t\t_flower.position.y += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t\t\t_flower.size.width += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t\t\t_flower.size.height += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t\t},\n\n\t};\n\n\tFlower = pl.Basic.extend(function () {\n\t\t\n\t\tthis.position = null;\n\t\tthis.size = null;\n\t\tthis.margin = 0;\n\t\tthis.image = null;\n\n\t\tthis.init = function (_image) {\n\t\t\tvar $image = $(_image);\n\n\t\t\tthis.image = _image;\n\n\t\t\tthis.position = pl.Point.create();\n\t\t\tthis.size = [_image.naturalWidth, _image.naturalHeight].to('size');\n\t\t\tthis.margin = pl.util.random(2,10) * 10;\n\n\t\t\t['Width', 'Height'].some(function (_plane) {\n\t\t\t\tif (_image[_plane.toLowerCase()] !== _image['natural'+_plane]) {\n\t\t\t\t\tscale = _image[_plane.toLowerCase()] / _image['natural'+_plane];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (scale) this.size = this.size.scale(scale).math('floor');\n \n\t\t\treturn this;\n\t\t};\n\n\t\tthis.render = function () {\n\t\t\treturn {\n\t\t\t\tdrawImage: [this.image, this.position.x + this.margin, this.position.y + 25, this.size.width, this.size.height]\n\t\t\t};\n\t\t};\n\n\t\tthis.is = function (_type) {\n\t\t\treturn $(this.image).is(_type);\n\t\t};\n\n\t\tthis.id = function () {\n\t\t\treturn $(this.image).id();\n\t\t}\n\t});\n\n\tcanvas = {\n\t\t\n\t\tctx: null,\n\t\tnode: null,\n\t\tcontent: null,\n\t\tscale: 1,\n\n\t\tinit: function (_canvas, _size, _scale) {\n\t\t\tvar size;\n\n\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\n\t\t\tthis.node = _canvas;\n\t\t\tthis.ctx = _canvas.getContext('2d');\n\t\t\tthis.scale = _scale || 1;\n\n\t\t\tif (!~size.indexOf(void 0)) {\n\t\t\t\t_canvas.width = size.width;\n\t\t\t\t_canvas.height = size.height;\n\t\t\t}\n\n\t\t\tthis.ctx.scale(_scale, _scale);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tresize: function (_size, _scale) {\n\t\t\tvar size;\n\n\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\n\t\t\tthis.node.width = size.width;\n\t\t\tthis.node.height = size.height;\n\t\t\tthis.scale = _scale || 1;\n\n\t\t\tthis.ctx.scale(_scale, _scale);\n\t\t},\n\n\t\tclear: function () {\n\t\t\tthis.ctx.clearRect(0,0, this.node.width/this.scale, this.node.height/this.scale);\n\t\t},\n\n\t\tdraw: function (_obj) {\n\t\t\tvar commands, cmd;\n\n\t\t\tcommands = _obj.render();\n\n\t\t\tfor (cmd in commands) {\n\t\t\t\tif (typeof this.ctx[cmd] !== 'function') continue;\n\t\t\t\tthis.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.bin = null;\n\tthis.flowers = null;\n\tthis.player = null;\n\tthis.conveyor = null;\n\tthis.isConveyorRunning = false;\n\n\t// Handle when the component scope is ready.\n\tthis.on('ready', function (_event) {\n\t\tvar canvasSize, width;\n\n\t\t// Do not handle child scopes becomming ready.\n\t\tif (!this.is(_event.target)) return;\n\n\t\twidth = this.width();\n\n\t\tthis.bin = this.findOwn('.bin img.flower').toArray();\n\t\tthis.flowers = (function (_scope) {\n\t\t\tvar shouldAppend, image, flower, x;\n\n\t\t\tshouldAppend = true;\n\t\t\tx = 0;\n\n\t\t\twhile (shouldAppend) {\n\t\t\t\timage = pl.util.random(_scope.bin);\n\t\t\t\tflower = Flower.create().init(image);\n\n\t\t\t\tflower.position.x = x;\n\t\t\t\tx += flower.size.width + flower.margin;\n\n\t\t\t\tthis.push(flower);\n\n\t\t\t\tshouldAppend = flower.position.x < width;\n\t\t\t\t\n\t\t\t\t_scope.log(flower.position.x, width);\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}).call([], this);\n\n\t\tcanvasSize = pl.Size\n\t\t\t.create()\n\t\t\t.set(width, 125);\n\n\t\tcanvas.init(this.conveyor[0], canvasSize, this.game.zoom);\n\n\t\tthis.game.viewport.onResize(this.game.bind(function () {\n\t\t\t canvas.resize(canvasSize, this.zoom);\n\t\t}));\n\t});\n\n\tthis.on('transitionend', function (_event) {\n\t\tif (!this.player.is(_event.target)) return;\n\n\t\tif (this.player.state('GRAVITY')) {\n\t\t\tthis.isConveyorRunning = !this.testFlower();\n\n\t\t\tif (this.isConveyorRunning) this.player.removeClass('GRAVITY');\n\n\t\t} else if (this.player.state('JUMPING')) {\n\t\t\tthis.player\n\t\t\t\t.removeClass('JUMPING')\n\t\t\t\t.addClass('GRAVITY')\n\t\t\t\t.attr('style', null);\n\t\t}\n\t});\n\n\tthis.start = function () {\n\t\tthis.log('started');\n\t\tthis.isConveyorRunning = true;\n\t\tthis.eachFrame(this.onEachFrame);\n\t};\n\n\tthis.restart = function() {\n\t\tthis.isConveyorRunning = true;\n\t\tthis.player\n\t\t\t.removeClass('GRAVITY');\n\t}\n\n\tthis.stop = function () {\n\t\tthis.eachFrame(this.onEachFrame, false);\n\t};\n\n\tthis.onEachFrame = function () {\n\t\tif (!this.isConveyorRunning) return;\n\n\t\tcanvas.clear();\n\n\t\tgameLoop.frame(this);\n\n\t\tthis.flowers.forEach(function (_flower) {\n\t\t\tcanvas.draw(_flower);\n\t\t});\n\t};\n\n\tthis.pulse = function (_flower) {\n\t\tif(gameLoop.pulsePoint >= 80) {\n\t\t\tgameLoop.pulsePoint = 0;\n\t\t\tthis.eachFrame(boundPulse, false);\n\t\t}\n\n\t\tcanvas.clear();\n\n\t\tgameLoop.pulse(this,_flower);\n\n\t\tthis.flowers.forEach(function (_flower) {\n\t\t\tcanvas.draw(_flower);\n\t\t});\n\t};\n\n\tthis.testFlower = function () {\n\t\tvar target, flower, player;\n\n\t\tplayer = {\n\t\t\tpos: this.player.absolutePosition(),\n\t\t\tsize: pl.Size.create().set(this.player.width(), this.player.height())\n\t\t};\n\n\t\ttarget = pl.Point.create().set(player.pos.x + (player.size.width/2), 40).inc(20,0);\n\n\t\t// canvas.ctx.fillStyle = '#000';\n\n\t\tthis.flowers.some(this.bind(function (_flower) {\n\t\t\tvar hitArea, padding, inBoundsX, inBoundsY;\n\n\t\t\tpadding = 25;\n\t\t\thitArea = {\n\t\t\t\tx1: _flower.position.x + _flower.margin + padding,\n\t\t\t\ty1: _flower.position.y + padding,\n\t\t\t\tx2: _flower.position.x + _flower.margin + _flower.size.width - (padding * 1),\n\t\t\t\ty2: _flower.position.y +_flower.size.height - (padding * 1)\n\t\t\t};\n\n\t\t\t// canvas.ctx.fillRect(hitArea.x1, hitArea.y1, hitArea.x2 - hitArea.x1, hitArea.y2 - hitArea.y1);\n\n\t\t\tinBoundsX = target.x > hitArea.x1 && target.x < hitArea.x2;\n\t\t\tinBoundsY = target.y > hitArea.y1 && target.y < hitArea.y2;\n\n\t\t\tif (inBoundsX && inBoundsY && _flower.is(FLOWER.RED)) {\n\t\t\t\tflower = _flower;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}));\n\n\t\tthis.landed(flower);\n\n\t\t// canvas.ctx.fillStyle = '#00f';\n\t\t// canvas.ctx.fillRect(target.x, target.y, 10,10);\n\n\t\treturn flower;\n\t};\n\n\tthis.behavior('jump', function () {\n\t\tvar position;\n\n\t\tif (!this.isConveyorRunning) return;\n\n\t\tposition = this.player.transformPosition();\n\n\t\tthis.player\n\t\t\t.removeClass('GRAVITY')\n\t\t\t.addClass('JUMPING')\n\t\t\t.transformPosition(position.dec(0,60));\n\n\t\tthis.log('behavior:jump');\n\n\t\treturn {\n\t\t\tbehaviorTarget: this.player\n\t\t};\n\t});\n\n\tthis.behavior('landed', function (_flower) {\n\t\tvar id;\n\n\t\tif(_flower) {\n\t\t\tid = _flower.id();\n\t\t\tboundPulse = this.pulse.bind(this,_flower);\n\t\t\tthis.eachFrame(boundPulse);\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: id,\n\t\t\tbehaviorTarget: this.player\n\t\t};\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/runner/behavior.js\n **/","pl.game.component('score', function () {\n\n\tthis.value = 0;\n\n\tthis.entity('.board', function () {\n\t\t\n\t\tthis.template = null;\n\n\t\tthis.ready = function () {\n\t\t\tthis.template = this.html();\n\t\t};\n\n\t\tthis.render = function () {\n\t\t\tthis.html(this.template.replace('{{score}}', this.value));\n\t\t\treturn this;\n\t\t};\n\n\t});\n\n\tthis.init = function () {\n\t\tthis.screen.require(this);\n\t};\n\n\tthis.ready = function () {\n\t\tthis.board.render();\n\t};\n\n\tthis.up = function (_count) {\n\t\tthis.value+= _count || 1;\n\n\t\tthis.board.render();\n\n\t\tconsole.log('score', this.value, this.properties.max)\n\n\t\tif (this.value == this.properties.max) {\n\t\t\tconsole.log('oh word');\n\t\t\tthis.complete();\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.down = function (_count) {\n\t\tthis.value-= _count || 1;\n\n\t\tthis.board.render();\n\t\t\n\t\tif (this.value == this.properties.max) {\n\t\t\tthis.complete();\n\t\t}\n\n\t\treturn this;\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/score/behavior.js\n **/","pl.game.component('screen-basic', function () {\n\tthis.currentVO = null;\n\n\tthis.allowAction = function() {\n\t\treturn (this.screen.state(this.screen.STATE.OPEN) && !this.screen.state(this.screen.STATE.VOICE_OVER)) || this.game.demoMode;\n\t};\n\n\tthis.playSound = function (_sound) {\n\t\tvar delay;\n\n\t\tdelay = $(_sound).attr('pl-delay');\n\n\t\tif(_sound.type === 'voiceOver') {\n\t\t\tthis.currentVO = _sound;\n\t\t}\n\n\t\tif (delay) {\n\t\t\treturn this.delay(delay, _sound.play.bind(_sound));\n\t\t} else {\n\t\t\treturn _sound.play();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen, buttonSound;\n\n\t\tnextScreen = this.proto();\n\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n\t\tif (nextScreen) {\n\t\t\tthis.leave();\n\t\t\tnextScreen.open();\n\t\t\tif (buttonSound) buttonSound.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.prev = function () {\n\t\tvar prevScreen, buttonSound;\n\n\t\tprevScreen = this.proto();\n\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n\t\tif (prevScreen) {\n\t\t\tthis.screen.close();\n\t\t\tprevScreen.open();\n\t\t\tif (buttonSound) buttonSound.play();\n\t\t}\n\n\t\treturn prevScreen;\n\t};\n\n\tthis.start = function () {\n\t\tvar bgSound, voSound;\n\n\t\tbgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t\tvoSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\t\tfxSound = pl.util.resolvePath(this, 'audio.sfx.start');\n\n\t\tif (bgSound) {\n\t\t\tthis.game.bgSound = bgSound;\n\t\t\tbgSound.play();\n\t\t}\n\t\tif(fxSound) fxSound.play();\n\t\tif(voSound) this.playSound(voSound);\n\n\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\n\t\treturn this;\n\t};\n\n\tthis.stop = function() {\n\t\tif(this.timeoutID) {\n\t\t\tclearTimeout(this.timeoutID);\n\t\t}\n\n\t\tif(this.intervalID) {\n\t\t\tthis.kill(\"repeat\");\n\t\t}\n\n\t\tif(this.currentVO) {\n\t\t\tthis.currentVO.stop();\n\t\t}\n\t};\n\n\tthis.on('ui-open', function (_event) {\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.start();\n\t\t}\n\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.addClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n\t\t\tthis.complete();\n\t\t}\n\t});\n\n\tthis.on('ui-leave', function (_event) {\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.stop();\n\t\t}\n\t});\n\n\tthis.on('ui-close', function (_event) {\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.stop();\n\t\t}\n\t});\n\n\tthis.on('ready', function () {\n\t\tif (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\tvar sfx;\n\n\t\t\t\tsfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\n\t\t\t\tif (sfx) this.playSound(sfx);\n\t\t\t}));\n\t\t}\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n\tthis.buttonSound = function() {\n\t\tif(this.audio.sfx.button) this.audio.sfx.button.play();\n\t};\n\n\t// TODO: Make an automated way to handle this\n\tthis.on('transitionend', function (_event) {\n\t\tif (this.state(this.STATE.LEAVE)) {\n\t\t\tthis.addClass('LEAVE-END');\t\n\t\t}\n\t});\n\n\tthis.on('ready', function(_e) {\n\t\tvar ctx;\n\n\t\tif(!this.is(_e.target)) return;\n\n\t\tctx = new (window.AudioContext || window.webkitAudioContext);\n\t\tif(this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n\t\tif(this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n\t});\n\n\tthis.on('ui-open', function (_event) {\n\t\tif(this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n\t\tthis.buttonSound();\n\t\tthis.game.addClass('QUIT-SCREEN');\n\t\tthis.removeClass('LEAVE-END');\n\t\tthis.game.pause(true);\n\t});\n\n\tthis.on('ui-leave', function () {\n\t\tthis.game.removeClass('QUIT-SCREEN');\n\t\tthis.game.resume();\n\t});\n\n\tthis.init = function () {\n\t\tthis.addClass('LEAVE LEAVE-END');\n\t};\n\t\n\tthis.okay = function () {\n\t\tthis.buttonSound();\n\t\tthis.game.exit();\n\t};\n\n\tthis.cancel = function () {\n\t\tthis.buttonSound();\n\t\tthis.leave();\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('screen-title', function () {\n\n\tthis.playSound = function (_sound) {\n\t\tvar delay;\n\n\t\tdelay = $(_sound).attr('pl-delay');\n\n\t\tif($(_sound).hasClass('voice-over')) {\n\t\t\tthis.currentVO = _sound;\n\t\t}\n\n\t\tif (delay) {\n\t\t\treturn this.delay(delay, _sound.play.bind(_sound));\n\t\t} else {\n\t\t\treturn _sound.play();\n\t\t}\n\t};\n\n\tthis.on('ready', function (_event) {\n\t\tif(!this.is(_event.target)) return;\n\n\t\tthis.delay(0, this.open);\n\n\t\tif (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n\t\t\tthis.requiredQueue.on('complete', this.bind(function () {\n\t\t\t\tvar sfx;\n\n\t\t\t\tsfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\n\t\t\t\tif (sfx) this.playSound(sfx);\n\t\t\t}));\n\t\t}\n\t});\n\n\t/**\n\t * Start the title screen logo animation when the screen opens.\n\t */\n\tthis.on('ui-open', function () {\n\t\tvar so, delay = this.properties.delay;\n\t\tthis.close(this.game.loader);\n\n\t\tso = pl.util.resolvePath(this, 'audio.background[0]?');\n\n\t\tif (so) so.play();\n\n\t\treturn this;\n\t});\n\n\tthis.on('ui-close', function(_event) {\n\t\tif(!this.is(_event.target)) return;\n\t\tthis.on('transitionend', function(_event) {\n\t\t\tif(!this.is(_event.target)) return;\n\t\t\tthis.logo.removeClass(this.properties.animOut)\n\t\t\t\t.off('animationend');\n\t\t\tthis.off('transitionend');\n\t\t});\n\t});\n\n\tthis.next = function () {\n\t\tvar nextScreen, so, animate;\n\t\t\n\t\tfunction leave () {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t}\n\n\t\tnextScreen = this.proto();\n\t\tso = pl.util.resolvePath(this, 'audio.sfx.nextScreen');\n\t\tanimate = this.properties.animOut || '';\n\n\t\tif (!so) {\n\t\t\tso = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\t}\n\n\t\tif (nextScreen) {\n\t\t\tif (animate) {\n\t\t\t\tthis.logo\n\t\t\t\t\t.on('animationend', leave.bind(this))\n\t\t\t\t\t.addClass(animate);\n\t\t\t} else {\n\t\t\t\tleave.call(this);\n\t\t\t}\n\t\t\t\t\n\t\t\tif (so) so.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/screen-title/behavior.js\n **/","pl.game.component('selectable-reveal', function () {\n\t\n\tthis.respond('select', function (_event) {\n\t\tvar index, stateMethod;\n\n\t\tindex = _event.message;\n\t\tstateMethod = this.properties.selectState || 'select';\n\n\t\tif (~index) {\n\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\tthis.reveal.item(index);\n\t\t}\n\t});\n\n\tthis.entity('selectable', function () {\n\t\t\n\t\tthis.shouldSelect = function (_$target) {\n\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t}\n\n\t\t\treturn false; \n\t\t};\n\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/selectable-reveal/behavior.js\n **/","pl.game.component('selectable', function () {\n\n\tthis.behavior('select', function (_target) {\n\t\tvar $target, id;\n\n\t\tif (this.event) {\n\t\t\t$target = $(this.event.target).closest('li');\n\t\t\tid = $target.id() || $target.index();\n\n\t\t\tif (this.shouldSelect($target) !== false) {\n\t\t\t\treturn {\n\t\t\t\t\tmessage: id,\n\t\t\t\t\tbehaviorTarget: $target\n\t\t\t\t};\n\t\t\t}\t\n\t\t}\n\n\t\telse {\n\t\t\tthis.proto(_target);\n\t\t}\n\n\t\treturn false;\n\t});\n\n\tthis.shouldSelect = function (_target) {\n\t\treturn true;\n\t};\n\n\tthis.deselectAll = function() {\n\t\tvar items = this.find('li');\n\t\tthis.deselect(items);\n\t\tthis.unhighlight(items);\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/selectable/behavior.js\n **/","pl.game.component('video', function () {\n\n\tthis.start = function() {\n\t\tvar self = this;\n\t\tthis.video.on('ended', function() {\n\t\t\tself.complete();\n\t\t});\n\t\tif(this.game.bgSound) this.game.bgSound.pause();\n\t\tthis.video[0].play();\n\t};\n\n\tthis.pause = function() {\n\t\tthis.video[0].pause();\n\t};\n\n\tthis.resume = function() {\n\t\tif(this.isComplete) return;\n\t\tthis.video[0].play();\n\t};\n\n\tthis.screen.on('ui-close', this.pause.bind(this));\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/video/behavior.js\n **/","pl.game.config({\n\tscreenSelector: '.screen',\n\tcomponentDirectory: 'components/',\n\tdimensions: {\n\t\twidth: 960,\n\t\tratio: 16/9\n\t},\n\tshouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\n// SCREENS\nimport flyAcross from './screens/fly-across';\n\nimport '../../../shared/js/screen-ios-splash';\nimport './components/screen-title/behavior';\nimport './components/screen-basic/behavior';\nimport './components/screen-quit/behavior';\nimport './components/frame/behavior';\nimport './components/score/behavior';\nimport './components/reveal/behavior';\nimport './components/multiple-choice/behavior';\nimport './components/selectable/behavior';\nimport './components/selectable-reveal/behavior';\nimport './components/audio-sequence/behavior';\nimport './components/modal/behavior';\nimport './components/video/behavior';\nimport './components/runner/behavior';\n\nimport '../../../shared/js/test-platform-integration';\nimport '../../../shared/js/google-analytics';\n\npl.game('monarch', function () {\n\n\tthis.screen('title', function() {\n\t\tthis.on('ui-open', function() {\n\t\t\tthis.repeat('4s', function() {\n\t\t\t\tthis.audio.sfx.play();\n\t\t\t});\n\t\t\tthis.audio.sfx.on('play', function() {\n\t\t\t\tthis.pupa.addClass('SHAKE');\n\t\t\t}.bind(this));\n\t\t\tthis.audio.sfx.on('ended', function() {\n\t\t\t\tthis.pupa.removeClass('SHAKE');\n\t\t\t}.bind(this));\n\t\t});\n\n\t\tthis.pause = function() {\n\t\t\tthis.kill('repeat');\n\t\t\tthis.__proto__.pause();\n\t\t};\n\n\t\tthis.resume = function() {\n\t\t\tthis.repeat('4s', function() {\n\t\t\t\tthis.audio.sfx.play();\n\t\t\t});\n\t\t\tthis.__proto__.resume();\n\t\t};\n\n\t\tthis.on('ready', function(_event) {\n\t\t\tif(!this.is(_event.target)) return;\n\n\t\t\tif(this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t\t});\n\n\t\tthis.on('ui-close', function() {\n\t\t\tthis.kill('repeat');\n\t\t});\n\t});\n\n\tthis.screen('fly-across', flyAcross);\n\n\tthis.screen('floating-weed', function() {\n\t\tvar count = 0;\n\n\t\tthis.on('ready', function(_event) {\n\t\t\tif(!this.is(_event.target)) return;\n\t\t\tthis.length = this.modal.reveal.find('li').length;\n\t\t});\n\n\t\tthis.respond('select', function (_event) {\n\t\t\tif(!_event.behaviorTarget.is('li')) return;\n\t\t\tthis.audio.sfx.correct.play();\n\t\t\tthis.modal.item(count++);\n\t\t\tif(count >= this.length) count = 0;\n\t\t});\n\t});\n\n\tthis.screen('four-generations', function() {\n\t\tthis.on('ui-open', function() {\n\t\t\tthis.deselect(this.selectableReveal.reveal.find('li'));\n\t\t});\n\n\t\tthis.on('audio-ended', function(_event) {\n\t\t\tif(this.audio.voiceOver.lifespan === _event.target) {\n\t\t\t\tthis.selectableReveal.reveal.item(4);\n\t\t\t}\n\t\t});\n\n\t\tthis.entity('selectable-reveal', function() {\n\t\t\tthis.start = function() {};\n\n\t\t\tthis.respond('select', function (_event) {\n\t\t\t\tvar index, stateMethod;\n\n\t\t\t\tindex = _event.message;\n\t\t\t\tstateMethod = this.properties.selectState || 'select';\n\n\t\t\t\tif (~index) {\n\t\t\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\t\t\tif(this.audio.sfx.button) this.audio.sfx.button.play();\n\t\t\t\t\tthis.reveal.item(index);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.entity('selectable', function () {\n\t\t\t\t\n\t\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false; \n\t\t\t\t};\n\n\t\t\t});\n\t\t});\n\t});\n\n\tthis.screen('flip', function () {\n\t\tthis.next = function () {\n\t\t\tthis.game.quit.okay();\n\t\t};\n\n\t\tthis.entity('.flip-container', function() {\n\t\t\tthis.on('animationend', function(_event) {\n\t\t\t\tif(!this.is(_event.target)) return;\n\t\t\t\tthis.find('.pupa').addClass('SHAKE');\n\t\t\t\tthis.screen.audio.sfx.shake.play();\n\t\t\t});\n\t\t});\n\t});\n\n\tthis.exit = function () {\n\t\tvar screen, eventCategory;\n\n\t\tscreen = this.findOwn(pl.game.config('screenSelector')+'.OPEN:not(#quit)').scope();\n\t\teventCategory = (['game', this.id(), screen.id()+'('+(screen.index()+1)+')']).join(' ');\n\n\t\tga('send', 'event', eventCategory, 'quit');\n\n\t\treturn this.proto();\n\t};\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/index.js\n **/","/**\n * Monarch - Fly-Across Screen\n */\nexport default function flyAcross () {\n\tvar count = 0;\n\n\tthis.on('ready', function(_event) {\n\t\tif(!this.is(_event.target)) return;\n\t\tthis.length = this.modal.reveal.find('li').length;\n\t});\n\n\tthis.respond('landed', function(_event) {\n\t\tif(_event.message === \"red\") {\n\t\t\tthis.audio.sfx.correct.play();\n\t\t\tthis.modal.item(count++);\n\t\t\tif(count >= this.length) count = 0;\n\t\t} else {\n\t\t\tthis.audio.sfx.incorrect.play();\n\t\t}\n\t});\n\n\tthis.entity('modal', function() {\n\t\tthis.close = function() {\n\t\t\tif(!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n\t\t\t\tif(this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t\t\t\tthis.deselect();\n\t\t\t\tthis.screen.runner.restart();\n\t\t\t}\n\t\t};\n\t});\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/screens/fly-across.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n\tthis.on('ready', function (_e) {\n\t\tif(!this.is(_e.target)) return;\n\n\t\tif(this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\tthis.splash();\n\t\t}\n\t});\n\n\tthis.splash = function() {\n\t\tthis.close(this.game.loader);\n\n\t\tif(this.game.hasClass('iOS')) {\n\t\t\tthis.open();\n\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t} else {\n\t\t\tthis.game.title.open();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen = this.proto();\n\n\t\tif (nextScreen) {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t\tthis.game.audio.sfx.button.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.complete = function () {\n\t\tthis.game.audio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.startGame = function() {\n\t\tif(!this.hasClass('FINISHED')) return;\n\t\tthis.game.addClass('STARTED');\n\t\tthis.delay('2.5s', function() {\n\t\t\tthis.next();\n\t\t});\n\t};\n\n\tthis.on('animationend', function(_e) {\n\t\tif(!this.ball.is(_e.target)) return;\n\t\tthis.addClass('FINISHED');\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test (_env) {\n\tif (window.parent === window) {\n\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t} else {\n\t\tdocument.domain = 'changemyworldnow.com';\n\t}\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}