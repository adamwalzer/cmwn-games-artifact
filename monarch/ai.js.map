{"version":3,"sources":["webpack:///monarch/ai.js","webpack:///webpack/bootstrap 559db80cd5f68d104730","webpack:///./monarch/source/js/components/audio-sequence/behavior.js","webpack:///./monarch/source/js/components/frame/behavior.js","webpack:///./monarch/source/js/components/modal/behavior.js","webpack:///./monarch/source/js/components/multiple-choice/behavior.js","webpack:///./monarch/source/js/components/reveal/behavior.js","webpack:///./monarch/source/js/components/runner/behavior.js","webpack:///./monarch/source/js/components/score/behavior.js","webpack:///./monarch/source/js/components/screen-basic/behavior.js","webpack:///./monarch/source/js/components/screen-quit/behavior.js","webpack:///./monarch/source/js/components/selectable-reveal/behavior.js","webpack:///./monarch/source/js/components/selectable/behavior.js","webpack:///./monarch/source/js/components/video/behavior.js","webpack:///./monarch/source/js/config.game.js","webpack:///./monarch/source/js/index.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","component","sounds","this","on","_event","screen","is","target","find","each","i","audio","onended","state","STATE","OPEN","playSound","properties","loop","length","start","bind","bgSound","voSound","util","resolvePath","play","hasAttribute","hasOwnProperty","entities","handleProperty","title","_node","_name","_value","addClass","defineRule","index","backgroundImage","isReady","targetScope","isComplete","requiredQueue","complete","item","_id","select","reveal","behavior","VOICE_OVER","demoMode","sfx","button","deselect","validateAnswer","_scope","answers","correct","split","indexOf","String","getSelected","answer","$li","event","$","closest","vo","eq","voiceOver","canvas","Flower","gameLoop","FLOWER","scale","boundPulse","ORANGE","RED","YELLOW","lastRecycledFlower","frame","flowers","forEach","_flower","x","width","position","margin","size","recycle","image","random","bin","pulsePoint","pulse","y","height","Basic","extend","init","_image","Point","create","naturalWidth","naturalHeight","to","some","_plane","toLowerCase","math","render","drawImage","_type","ctx","node","content","_canvas","_size","_scale","getContext","resize","clear","clearRect","draw","_obj","commands","cmd","apply","player","conveyor","isConveyorRunning","canvasSize","findOwn","toArray","shouldAppend","flower","push","log","Size","set","zoom","viewport","onResize","testFlower","removeClass","attr","eachFrame","onEachFrame","restart","stop","_f","pos","absolutePosition","inc","hitArea","padding","inBoundsX","inBoundsY","x1","y1","x2","y2","landed","transformPosition","dec","behaviorTarget","message","value","entity","template","ready","html","replace","require","board","up","_count","parseInt","max","down","currentVO","allowAction","_sound","delay","type","next","nextScreen","buttonSound","proto","leave","open","prev","prevScreen","close","fxSound","timeoutID","clearTimeout","intervalID","kill","gameClass","isMemberSafe","taget","LEAVE","_e","window","AudioContext","webkitAudioContext","sure","setContext","pause","resume","okay","exit","cancel","respond","stateMethod","selectState","shouldSelect","_$target","hasClass","HIGHLIGHTED","_target","$target","console","eachSelectable","deselectAll","items","unhighlight","bg","self","video","stopBackground","playBackground","media","playing","config","screenSelector","componentDirectory","dimensions","ratio","shouldLoadComponentStyles","repeat","pupa","__proto__","iosSplash","READY","splash","count","modal","incorrect","runner","selectableReveal","lifespan","quit","flipContainer","shake","eventCategory","join","ga","report","flip","name","gameData","scope","s","o","g","r","a","q","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","document","loader","ball","startGame","test","_env","parent","location","href","domain"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAE,WACAE,GAAAJ,SACAK,QAAA,EAUA,OANAP,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,QAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBAqCA,OATAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAU,EAAA,UAGAV,oBAAA,KDMM,SAASI,OAAQD,QAASH,qBAE/BI,OAAOD,QAAUH,oBAAoB,KAKhC,SAASI,OAAQD,SEnDvBQ,GAAGC,KAAKC,UAAU,iBAAkB,WAElC,GAAIC,QAAS,IAEbC,MAAKC,GAAG,QAAS,SAAUC,QACzB,GAAIC,QAASH,KAAKG,MAEbH,MAAKI,GAAGF,OAAOG,UAEpBN,OAASC,KAAKM,KAAK,WACnBP,OAAOQ,KAAK,SAAUC,EAAGC,OACvBA,MAAMC,QAAU,WACVX,OAAOS,EAAI,IAAML,OAAOQ,MAAMR,OAAOS,MAAMC,OAAOV,OAAOW,UAAUf,OAAOS,EAAI,OAGlD,mBAAzBR,MAAKe,WAAWC,OACzBjB,OAAOA,OAAOkB,OAAS,GAAGP,QAAUV,KAAKkB,MAAMC,KAAKnB,UAIxDA,KAAKkB,MAAQ,WACPnB,OAAO,IAAMC,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMC,OAAOb,KAAKG,OAAOW,UAAUf,OAAO,QF2DvF,SAASV,OAAQD,SGhFvBQ,GAAGC,KAAKC,UAAU,QAAS,WAEzBE,KAAKkB,MAAQ,WACX,GAAIE,SAASC,OAUb,OARAD,SAAUxB,GAAG0B,KAAKC,YAAYvB,KAAM,wBACpCqB,QAAUzB,GAAG0B,KAAKC,YAAYvB,KAAM,uBAEhCoB,SAASA,QAAQI,OACjBH,UAAYA,QAAQI,aAAa,oBAAoBJ,QAAQG,OAE7DxB,KAAK0B,eAAe,aAAe1B,KAAK2B,SAAS,IAAI3B,KAAK2B,SAAS,GAAGT,QAEnElB,MAGTA,KAAK4B,gBACHC,MAAO,QAAAA,OAAUC,MAAOC,MAAOC,QACzBhC,KAAKI,GAAG0B,SACV9B,KAAKM,KAAK,UAAU2B,SAAS,SAC7BjC,KAAKH,KAAKqC,WAAW,4BAA8BlC,KAAKG,OAAOgC,QAAU,GAAK,2CAC5EC,gBAAiB,OAASJ,OAAS,UAM3ChC,KAAKC,GAAG,UAAW,SAAUC,QACvBF,KAAKqC,SACPrC,KAAKkB,QAGHlB,OAASE,OAAOoC,cACZtC,KAAK0B,eAAe,eAAiB1B,KAAKuC,YAAiBvC,KAAK0B,eAAe,kBAAqB1B,KAAKwC,eAAiBxC,KAAKwC,cAAcvB,QACjJjB,KAAKyC,iBH0FP,SAASpD,OAAQD,SI5HvBQ,GAAGC,KAAKC,UAAU,QAAS,WAEzBE,KAAK0C,KAAO,SAAUC,KACpB3C,KAAK4C,OAAO5C,MACZA,KAAK6C,OAAOH,KAAKC,MAGnB3C,KAAK8C,SAAS,QAAS,WAChB9C,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMmC,cAAe/C,KAAKH,KAAKmD,WAC5DhD,KAAKH,KAAKY,MAAMwC,IAAIC,QAAQlD,KAAKH,KAAKY,MAAMwC,IAAIC,OAAO1B,OAC3DxB,KAAKmD,iBJqIL,SAAS9D,OAAQD,SK/IvBQ,GAAGC,KAAKC,UAAU,kBAAmB,WAEnC,QAASsD,gBAAeC,QACtB,GAAIC,QAUJ,OARID,QAAOtC,WAAWwC,UACpBD,QAAUD,OAAOtC,WAAWwC,QAAQC,MAAM,YAErCF,QAAQG,QAAQC,OAAOL,OAAOM,cAAcxB,WAC/CkB,OAAOZ,aAIJ,EAGTzC,KAAK4D,OAAS,WACZ,GAAIC,IAEA7D,MAAK8D,QACPD,IAAME,EAAE/D,KAAK8D,MAAMzD,QAAQ2D,QAAQ,OAE9BhE,KAAKuC,YAAcvC,KAAK4C,OAAOiB,MAClCT,eAAepD,WLyJjB,SAASX,OAAQD,SMhLvBQ,GAAGC,KAAKC,UAAU,SAAU,WAE1BE,KAAK0C,KAAO,SAAUC,KACpB,GAAIsB,IAAI9B,KAEW,iBAARQ,MACT3C,KAAK4C,OAAO5C,KAAKM,KAAK,MAAM4D,GAAGvB,MAC/BsB,GAAKjE,KAAKS,MAAM0D,WAAanE,KAAKS,MAAM0D,UAAUxB,KAC9CsB,IAAIA,GAAGzC,QACa,gBAARmB,MACZ3C,KAAK2C,OACP3C,KAAK4C,OAAO5C,KAAK2C,MAEb3C,KAAKS,QACP0B,MAAQnC,KAAK2C,KAAKR,QAClB8B,GAAKjE,KAAKS,MAAM0D,UAAUxB,MAAQ3C,KAAKS,MAAM0D,UAAUhC,OAEnD8B,IAAIA,GAAGzC,aN2Lf,SAASnC,OAAQD,SO5MvBQ,GAAGC,KAAKC,UAAU,SAAU,WAC1B,GAAIsE,QAAQC,OAAQC,SAAUC,OAAQC,MAAOC,UAE7CF,SACEG,OAAQ,iBACRC,IAAK,cACLC,OAAQ,kBAGVN,UAEEO,mBAAoB,KAGpBC,MAAO,QAAAA,OAAUzB,QAEfA,OAAO0B,QAAQC,QAAQ,SAAWC,SAChC,GAAIC,GAAGC,KACPF,SAAQG,SAASF,GAAK,EAEtBA,EAAID,QAAQG,SAASF,EAAID,QAAQI,OACjCF,MAAQF,QAAQK,KAAKH,MAEL,EAAZD,EAAIC,OAAWnF,KAAKuF,QAAQlC,OAAQ4B,UACvC9D,KAAKnB,QAGVuF,QAAS,QAAAA,SAAUlC,OAAQ4B,SACzBA,QAAQO,MAAQ5F,GAAG0B,KAAKmE,OAAOpC,OAAOqC,KACtCT,QAAQI,OAAiC,GAAxBzF,GAAG0B,KAAKmE,OAAO,EAAG,IACnCR,QAAQG,SAASF,EAAI7B,OAAO8B,QAAUF,QAAQI,OAE1CrF,KAAK6E,qBACPI,QAAQG,SAASF,EAAIlF,KAAK6E,mBAAmBQ,OAC3CrF,KAAK6E,mBAAmBO,SAASF,EACjClF,KAAK6E,mBAAmBS,KAAKH,OAGjCnF,KAAK6E,mBAAqBI,SAG5BU,WAAY,EAEZC,MAAO,QAAAA,OAAUvC,OAAQ4B,SAEvBX,SAASqB,aACTV,QAAQG,SAASF,GAAKZ,SAASqB,WAAa,GAAK,GAAK,EAAI,GAC1DV,QAAQG,SAASS,GAAKvB,SAASqB,WAAa,GAAK,GAAK,EAAI,GAC1DV,QAAQK,KAAKH,OAASb,SAASqB,WAAa,GAAK,GAAK,GAAK,EAC3DV,QAAQK,KAAKQ,QAAUxB,SAASqB,WAAa,GAAK,GAAK,GAAK,IAKhEtB,OAASzE,GAAGmG,MAAMC,OAAO,WAEvBhG,KAAKoF,SAAW,KAChBpF,KAAKsF,KAAO,KACZtF,KAAKqF,OAAS,EACdrF,KAAKwF,MAAQ,KAEbxF,KAAKiG,KAAO,SAAUC,QAgBpB,MAfAlG,MAAKwF,MAAQU,OAEblG,KAAKoF,SAAWxF,GAAGuG,MAAMC,SACzBpG,KAAKsF,MAAQY,OAAOG,aAAcH,OAAOI,eAAeC,GAAG,QAC3DvG,KAAKqF,OAAiC,GAAxBzF,GAAG0B,KAAKmE,OAAO,EAAG,KAE/B,QAAS,UAAUe,KAAK,SAAUC,QACjC,MAAIP,QAAOO,OAAOC,iBAAmBR,OAAO,UAAYO,SACtDjC,MAAQ0B,OAAOO,OAAOC,eAAiBR,OAAO,UAAYO,SACnD,GAFT,SAMEjC,QAAOxE,KAAKsF,KAAOtF,KAAKsF,KAAKd,MAAMA,OAAOmC,KAAK,UAE5C3G,MAGTA,KAAK4G,OAAS,WACZ,OACEC,WAAY7G,KAAKwF,MAAOxF,KAAKoF,SAASF,EAAIlF,KAAKqF,OAAQrF,KAAKoF,SAASS,EAAI,GAAI7F,KAAKsF,KAAKH,MAAOnF,KAAKsF,KAAKQ,UAI5G9F,KAAKI,GAAK,SAAU0G,OAClB,MAAO/C,GAAE/D,KAAKwF,OAAOpF,GAAG0G,QAG1B9G,KAAKV,GAAK,WACR,MAAOyE,GAAE/D,KAAKwF,OAAOlG,QAIzB8E,QAEE2C,IAAK,KACLC,KAAM,KACNC,QAAS,KACTzC,MAAO,EAEPyB,KAAM,QAAAA,MAAUiB,QAASC,MAAOC,QAC9B,GAAI9B,KAeJ,OAbAA,MAAO8B,OAASD,MAAM3C,MAAM4C,QAAUD,MAEtCnH,KAAKgH,KAAOE,QACZlH,KAAK+G,IAAMG,QAAQG,WAAW,MAC9BrH,KAAKwE,MAAQ4C,QAAU,GAEjB9B,KAAK7B,QAAQ,UACjByD,QAAQ/B,MAAQG,KAAKH,MACrB+B,QAAQpB,OAASR,KAAKQ,QAGxB9F,KAAK+G,IAAIvC,MAAM4C,OAAQA,QAEhBpH,MAGTsH,OAAQ,QAAAA,QAAUH,MAAOC,QACvB,GAAI9B,KAEJA,MAAO8B,OAASD,MAAM3C,MAAM4C,QAAUD,MAEtCnH,KAAKgH,KAAK7B,MAAQG,KAAKH,MACvBnF,KAAKgH,KAAKlB,OAASR,KAAKQ,OACxB9F,KAAKwE,MAAQ4C,QAAU,EAEvBpH,KAAK+G,IAAIvC,MAAM4C,OAAQA,SAGzBG,MAAO,QAAAA,SACLvH,KAAK+G,IAAIS,UAAU,EAAG,EAAGxH,KAAKgH,KAAK7B,MAAQnF,KAAKwE,MAAOxE,KAAKgH,KAAKlB,OAAS9F,KAAKwE,QAGjFiD,KAAM,QAAAA,MAAUC,MACd,GAAIC,UAAUC,GAEdD,UAAWD,KAAKd,QAEhB,KAAKgB,MAAOD,UACmB,kBAAlB3H,MAAK+G,IAAIa,MACpB5H,KAAK+G,IAAIa,KAAKC,MAAM7H,KAAK+G,IAAKY,SAASC,QAK7C5H,KAAK0F,IAAM,KACX1F,KAAK+E,QAAU,KACf/E,KAAK8H,OAAS,KACd9H,KAAK+H,SAAW,KAChB/H,KAAKgI,mBAAoB,EAGzBhI,KAAKC,GAAG,QAAS,SAAUC,QACzB,GAAI+H,YAAY9C,KAGXnF,MAAKI,GAAGF,OAAOG,UAEpB8E,MAAQnF,KAAKmF,QAEbnF,KAAK0F,IAAM1F,KAAKkI,QAAQ,mBAAmBC,UAC3CnI,KAAK+E,QAAU,SAAW1B,QACxB,GAAI+E,cAAc5C,MAAO6C,OAAQnD,CAKjC,KAHAkD,cAAe,EACflD,EAAI,EAEGkD,cACL5C,MAAQ5F,GAAG0B,KAAKmE,OAAOpC,OAAOqC,KAC9B2C,OAAShE,OAAO+B,SAASH,KAAKT,OAE9B6C,OAAOjD,SAASF,EAAIA,EACpBA,GAAKmD,OAAO/C,KAAKH,MAAQkD,OAAOhD,OAEhCrF,KAAKsI,KAAKD,QAEVD,aAAeC,OAAOjD,SAASF,EAAIC,MAEnC9B,OAAOkF,IAAIF,OAAOjD,SAASF,EAAGC,MAGhC,OAAOnF,OAENR,QAASQ,MAEZiI,WAAarI,GAAG4I,KACbpC,SACAqC,IAAItD,MAAO,KAEdf,OAAO6B,KAAKjG,KAAK+H,SAAS,GAAIE,WAAYjI,KAAKH,KAAK6I,MAEpD1I,KAAKH,KAAK8I,SAASC,SAAS5I,KAAKH,KAAKsB,KAAK,WACzCiD,OAAOkD,OAAOW,WAAYjI,KAAK0I,YAInC1I,KAAKC,GAAG,gBAAiB,SAAUC,QAC5BF,KAAK8H,OAAO1H,GAAGF,OAAOG,UAEvBL,KAAK8H,OAAOnH,MAAM,YACpBX,KAAKgI,mBAAqBhI,KAAK6I,aAE3B7I,KAAKgI,mBAAmBhI,KAAK8H,OAAOgB,YAAY,YAE3C9I,KAAK8H,OAAOnH,MAAM,YAC3BX,KAAK8H,OACFgB,YAAY,WACZ7G,SAAS,WACT8G,KAAK,QAAS,SAIrB/I,KAAKkB,MAAQ,WACXlB,KAAKuI,IAAI,WACTvI,KAAKgI,mBAAoB,EACzBhI,KAAKgJ,UAAUhJ,KAAKiJ,cAGtBjJ,KAAKkJ,QAAU,WACblJ,KAAKgI,mBAAoB,EACzBhI,KAAK8H,OACFgB,YAAY,YAGjB9I,KAAKmJ,KAAO,WACVnJ,KAAKgJ,UAAUhJ,KAAKiJ,aAAa,IAGnCjJ,KAAKiJ,YAAc,WACZjJ,KAAKgI,oBAEV5D,OAAOmD,QAEPjD,SAASQ,MAAM9E,MAEfA,KAAK+E,QAAQC,QAAQ,SAAUC,SAC7Bb,OAAOqD,KAAKxC,aAIhBjF,KAAK4F,MAAQ,SAAUX,SACjBX,SAASqB,YAAc,KACzBrB,SAASqB,WAAa,EACtB3F,KAAKgJ,UAAUvE,YAAY,IAG7BL,OAAOmD,QAEPjD,SAASsB,MAAM5F,KAAMiF,SAErBjF,KAAK+E,QAAQC,QAAQ,SAAUoE,IAC7BhF,OAAOqD,KAAK2B,OAIhBpJ,KAAK6I,WAAa,WAChB,GAAIxI,QAAQgI,OAAQP,MAsCpB,OApCAA,SACEuB,IAAKrJ,KAAK8H,OAAOwB,mBACjBhE,KAAM1F,GAAG4I,KAAKpC,SAASqC,IAAIzI,KAAK8H,OAAO3C,QAASnF,KAAK8H,OAAOhC,WAG9DzF,OAAST,GAAGuG,MAAMC,SAASqC,IAAIX,OAAOuB,IAAInE,EAAK4C,OAAOxC,KAAKH,MAAQ,EAAI,IAAIoE,IAAI,GAAI,GAInFvJ,KAAK+E,QAAQyB,KAAKxG,KAAKmB,KAAK,SAAU8D,SACpC,GAAIuE,SAASC,QAASC,UAAWC,SAejC,OAbAF,SAAU,GACVD,SACEI,GAAI3E,QAAQG,SAASF,EAAID,QAAQI,OAASoE,QAC1CI,GAAI5E,QAAQG,SAASS,EAAI4D,QACzBK,GAAI7E,QAAQG,SAASF,EAAID,QAAQI,OAASJ,QAAQK,KAAKH,MAAmB,EAAVsE,QAChEM,GAAI9E,QAAQG,SAASS,EAAIZ,QAAQK,KAAKQ,OAAoB,EAAV2D,SAKlDC,UAAYrJ,OAAO6E,EAAIsE,QAAQI,IAAMvJ,OAAO6E,EAAIsE,QAAQM,GACxDH,UAAYtJ,OAAOwF,EAAI2D,QAAQK,IAAMxJ,OAAOwF,EAAI2D,QAAQO,GAEpDL,WAAaC,WAAa1E,QAAQ7E,GAAGmE,OAAOI,MAC9C0D,OAASpD,SACF,GAFT,UAMFjF,KAAKgK,OAAO3B,QAKLA,QAGTrI,KAAK8C,SAAS,OAAQ,WACpB,GAAIsC,SAEJ,IAAKpF,KAAKgI,kBAWV,MATA5C,UAAWpF,KAAK8H,OAAOmC,oBAEvBjK,KAAK8H,OACFgB,YAAY,WACZ7G,SAAS,WACTgI,kBAAkB7E,SAAS8E,IAAI,EAAG,KAErClK,KAAKuI,IAAI,kBAGP4B,eAAgBnK,KAAK8H,UAIzB9H,KAAK8C,SAAS,SAAU,SAAUmC,SAChC,GAAI3F,GAQJ,OANI2F,WACF3F,GAAK2F,QAAQ3F,KACbmF,WAAazE,KAAK4F,MAAMzE,KAAKnB,KAAMiF,SACnCjF,KAAKgJ,UAAUvE,cAIf2F,QAAS9K,GACT6K,eAAgBnK,KAAK8H,aPwMrB,SAASzI,OAAQD,SQnhBvBQ,GAAGC,KAAKC,UAAU,QAAS,WAEzBE,KAAKqK,MAAQ,EAEbrK,KAAKsK,OAAO,SAAU,WAEpBtK,KAAKuK,SAAW,KAEhBvK,KAAKwK,MAAQ,WACXxK,KAAKuK,SAAWvK,KAAKyK,QAGvBzK,KAAK4G,OAAS,WAEZ,MADA5G,MAAKyK,KAAKzK,KAAKuK,SAASG,QAAQ,YAAa1K,KAAKqK,QAC3CrK,QAKXA,KAAKiG,KAAO,WACVjG,KAAKG,OAAOwK,QAAQ3K,OAGtBA,KAAKwK,MAAQ,WACXxK,KAAK4K,MAAMhE,UAGb5G,KAAK6K,GAAK,SAAUC,QASlB,MARA9K,MAAKqK,OAASS,QAAU,EAExB9K,KAAK4K,MAAMhE,SAEP5G,KAAKqK,QAAUU,SAAS/K,KAAKe,WAAWiK,IAAK,KAC/ChL,KAAKyC,WAGAzC,MAGTA,KAAKiL,KAAO,SAAUH,QASpB,MARA9K,MAAKqK,OAASS,QAAU,EAExB9K,KAAK4K,MAAMhE,SAEP5G,KAAKqK,QAAUU,SAAS/K,KAAKe,WAAWiK,IAAK,KAC/ChL,KAAKyC,WAGAzC,SR0hBL,SAASX,OAAQD,SS1kBvBQ,GAAGC,KAAKC,UAAU,eAAgB,WAChCE,KAAKkL,UAAY,KAEjBlL,KAAKmL,YAAc,WACjB,MAAQnL,MAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMC,QAAUb,KAAKG,OAAOQ,MAAMX,KAAKG,OAAOS,MAAMmC,aAAgB/C,KAAKH,KAAKmD,UAGtHhD,KAAKc,UAAY,SAAUsK,QACzB,GAAIC,MAQJ,OANAA,OAAQtH,EAAEqH,QAAQrC,KAAK,YAEH,cAAhBqC,OAAOE,OACTtL,KAAKkL,UAAYE,QAGfC,MACKrL,KAAKqL,MAAMA,MAAOD,OAAO5J,KAAKL,KAAKiK,SAEnCA,OAAO5J,QAIlBxB,KAAKuL,KAAO,WACV,GAAIC,YAAYC,WAWhB,OATAD,YAAaxL,KAAK0L,QAClBD,YAAc7L,GAAG0B,KAAKC,YAAYvB,KAAM,yBAEpCwL,aACFxL,KAAK2L,QACLH,WAAWI,OACPH,aAAaA,YAAYjK,QAGxBgK,YAGTxL,KAAK6L,KAAO,WACV,GAAIC,YAAYL,WAWhB,OATAK,YAAa9L,KAAK0L,QAClBD,YAAc7L,GAAG0B,KAAKC,YAAYvB,KAAM,yBAEpC8L,aACF9L,KAAKG,OAAO4L,QACZD,WAAWF,OACPH,aAAaA,YAAYjK,QAGxBsK,YAGT9L,KAAKkB,MAAQ,WACX,GAAIE,SAASC,QAAS2K,OAetB,OAbA5K,SAAUxB,GAAG0B,KAAKC,YAAYvB,KAAM,wBACpCqB,QAAUzB,GAAG0B,KAAKC,YAAYvB,KAAM,uBACpCgM,QAAUpM,GAAG0B,KAAKC,YAAYvB,KAAM,mBAEhCoB,UACFpB,KAAKH,KAAKuB,QAAUA,QACpBA,QAAQI,QAENwK,SAASA,QAAQxK,OACjBH,SAASrB,KAAKc,UAAUO,SAExBrB,KAAK0B,eAAe,aAAe1B,KAAK2B,SAAS,IAAI3B,KAAK2B,SAAS,GAAGT,QAEnElB,MAGTA,KAAKmJ,KAAO,WACNnJ,KAAKiM,WACPC,aAAalM,KAAKiM,WAGhBjM,KAAKmM,YACPnM,KAAKoM,KAAK,UAGRpM,KAAKkL,WACPlL,KAAKkL,UAAU/B,QAInBnJ,KAAKC,GAAG,UAAW,SAAUC,QACvBF,KAAKqC,SAAWrC,OAASE,OAAOoC,aAClCtC,KAAKkB,QAGHlB,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKoC,SAASjC,KAAKe,WAAWsL,aAGhCrM,KAAKwC,eAAkBxC,KAAK0B,eAAe,mBAAqB1B,KAAKwC,cAAcvB,SACtFjB,KAAKyC,aAITzC,KAAKC,GAAG,WAAY,SAAUC,QACxBF,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKiJ,YAAY9I,KAAKe,WAAWsL,WAGpCrM,KAAKqC,SAAWrC,OAASE,OAAOoC,aAClCtC,KAAKmJ,SAITnJ,KAAKC,GAAG,WAAY,SAAUC,QACxBF,KAAKe,WAAWsL,WAClBrM,KAAKH,KAAKiJ,YAAY9I,KAAKe,WAAWsL,WAGpCrM,KAAKqC,SAAWrC,OAASE,OAAOoC,aAClCtC,KAAKmJ,SAITnJ,KAAKC,GAAG,QAAS,WACXD,KAAKsM,aAAa,kBAAoBtM,KAAKwC,eAC7CxC,KAAKwC,cAAcvC,GAAG,WAAYD,KAAKmB,KAAK,WAC1C,GAAI8B,IAEJA,KAAMrD,GAAG0B,KAAKC,YAAYvB,KAAM,oCAAsCJ,GAAG0B,KAAKC,YAAYvB,KAAM,iCAE5FiD,KAAKjD,KAAKc,UAAUmC,aTolB1B,SAAS5D,OAAQD,SUntBvBQ,GAAGC,KAAKC,UAAU,cAAe,WAE/BE,KAAKyL,YAAc,WACbzL,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO1B,QAInDxB,KAAKC,GAAG,gBAAiB,SAAUC,QAC5BF,KAAKI,GAAGF,OAAOqM,QAChBvM,KAAKW,MAAMX,KAAKY,MAAM4L,QACxBxM,KAAKiC,SAAS,eAIlBjC,KAAKC,GAAG,QAAS,SAAUwM,IACzB,GAAI1F,IAEC/G,MAAKI,GAAGqM,GAAGpM,UAEhB0G,IAAM,IAAK2F,OAAOC,cAAgBD,OAAOE,oBACrC5M,KAAKS,MAAM0D,UAAU0I,MAAM7M,KAAKS,MAAM0D,UAAU0I,KAAKC,WAAW/F,KAChE/G,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO4J,WAAW/F,QAG9D/G,KAAKC,GAAG,UAAW,SAAUC,QACtBF,KAAKI,GAAGF,OAAOqM,SAChBvM,KAAKS,MAAM0D,UAAU0I,MAAM7M,KAAKS,MAAM0D,UAAU0I,KAAKrL,OACzDxB,KAAKyL,cACLzL,KAAKH,KAAKoC,SAAS,eACnBjC,KAAK8I,YAAY,aACjB9I,KAAKH,KAAKkN,OAAM,MAGlB/M,KAAKC,GAAG,WAAY,WAClBD,KAAKH,KAAKiJ,YAAY,eACtB9I,KAAKH,KAAKmN,WAGZhN,KAAKiG,KAAO,WACVjG,KAAKiC,SAAS,oBAGhBjC,KAAKiN,KAAO,WACVjN,KAAKyL,cACLzL,KAAKH,KAAKqN,QAGZlN,KAAKmN,OAAS,WACZnN,KAAKyL,cACLzL,KAAK2L,YV2tBH,SAAStM,OAAQD,SW5wBvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAErCE,KAAKoN,QAAQ,SAAU,SAAUlN,QAC/B,GAAIiC,OAAOkL,WAEXlL,OAAQjC,OAAOkK,QACfiD,YAAcrN,KAAKe,WAAWuM,aAAe,UAExCnL,QACHnC,KAAKqN,aAAanN,OAAOiK,gBACrBnK,KAAKS,MAAMwC,IAAIC,QAAQlD,KAAKS,MAAMwC,IAAIC,OAAO1B,OACjDxB,KAAK6C,OAAOH,KAAKP,UAIrBnC,KAAKkB,MAAQ,aAEblB,KAAKsK,OAAO,aAAc,WAExBtK,KAAKuN,aAAe,SAAUC,UAC5B,MAAIA,UAAS3B,OAAO4B,SAASzN,KAAKY,MAAM8M,cAAqC,IAArBF,SAASrL,SACvDnC,KAAKG,OAAOQ,MAAMX,KAAKY,MAAMmC,aAGhC,QXqxBP,SAAS1D,OAAQD,SY7yBvBQ,GAAGC,KAAKC,UAAU,aAAc,WAE9BE,KAAK8C,SAAS,SAAU,SAAU6K,SAChC,GAAIC,SAAStO,EAEb,IAAIU,KAAK8D,OAIP,GAHA8J,QAAU7J,EAAE/D,KAAK8D,MAAMzD,QAAQ2D,QAAQ,MACvC1E,GAAKsO,QAAQtO,MAAQsO,QAAQzL,QAEzBnC,KAAKuN,aAAaK,YAAa,EACjC,OACExD,QAAS9K,GACT6K,eAAgByD,aAIpB5N,MAAK0L,MAAMiC,QAGb,QAAO,IAGT3N,KAAKuN,aAAe,SAAUC,UAE5B,MADAK,SAAQtF,IAAIvI,KAAKe,YACbf,KAAKe,WAAW+M,gBAAkBN,SAAS3B,OAAO4B,SAASzN,KAAKY,MAAM8M,cAAqC,IAArBF,SAASrL,SACzFnC,KAAKG,OAAOQ,MAAMX,KAAKY,MAAMmC,aAGhC,GAGT/C,KAAK+N,YAAc,WACjB,GAAIC,OAAQhO,KAAKM,KAAK,KACtBN,MAAKmD,SAAS6K,OACdhO,KAAKiO,YAAYD,WZqzBf,SAAS3O,OAAQD,Sav1BvBQ,GAAGC,KAAKC,UAAU,QAAS,WACzB,GAAIoO,GAEJlO,MAAKkB,MAAQ,WACX,GAAIiN,MAAOnO,IACXA,MAAKoO,MAAMnO,GAAG,QAAS,WACrBkO,KAAK1L,aAEPzC,KAAKqO,iBACLrO,KAAKoO,MAAM,GAAG5M,QAGhBxB,KAAKqO,eAAiB,YACfrO,KAAKe,WAAWuN,iBAAmBJ,GAAKlO,KAAKH,KAAK0O,MAAMC,QAAQ,iBACnEN,GAAG/E,KAAK,SAIZnJ,KAAK+M,MAAQ,WACX/M,KAAKoO,MAAM,GAAGrB,SAGhB/M,KAAKgN,OAAS,WACRhN,KAAKuC,aACTvC,KAAKqO,iBACLrO,KAAKoO,MAAM,GAAG5M,SAGhBxB,KAAKG,OAAOF,GAAG,WAAYD,KAAK+M,MAAM5L,KAAKnB,Ub81BvC,SAASX,OAAQD,Sc13BvBQ,GAAGC,KAAK4O,QACNC,eAAgB,UAChBC,mBAAoB,cACpBC,YACEzJ,MAAO,IACP0J,MAAO,GAAK,GAEdC,2BAA2B,Kdi4BvB,SAASzP,OAAQD,QAASH,qBAO/BA,oBe34BM,If64BNA,oBe34BM,If64BNA,oBe54BM,Gf84BNA,oBe74BM,Gf+4BNA,oBe94BM,Gfg5BNA,oBe/4BM,Gfi5BNA,oBeh5BM,Gfk5BNA,oBej5BM,Gfm5BNA,oBel5BM,Gfo5BNA,oBen5BM,Gfq5BNA,oBep5BM,Gfs5BNA,oBer5BM,Ifu5BNA,oBet5BM,Ifw5BNA,oBev5BM,Ify5BNA,oBev5BM,Ify5BNA,oBex5BM,IAEPW,GAAGC,KAAK,UAAW,WAEjBG,KAAKG,OAAO,QAAS,WACnBH,KAAKC,GAAG,UAAW,WACjBD,KAAK+O,OAAO,KAAM,WAChB/O,KAAKS,MAAMwC,IAAIzB,SAEjBxB,KAAKS,MAAMwC,IAAIhD,GAAG,OAAQ,WACxBD,KAAKgP,KAAK/M,SAAS,UACnBd,KAAKnB,OACPA,KAAKS,MAAMwC,IAAIhD,GAAG,QAAS,WACzBD,KAAKgP,KAAKlG,YAAY,UACtB3H,KAAKnB,SAGTA,KAAK+M,MAAQ,WACX/M,KAAKoM,KAAK,UACVpM,KAAKiP,UAAUlC,SAGjB/M,KAAKgN,OAAS,WACZhN,KAAK+O,OAAO,KAAM,WAChB/O,KAAKS,MAAMwC,IAAIzB,SAEjBxB,KAAKiP,UAAUjC,UAGjBhN,KAAKC,GAAG,QAAS,SAAUC,QACpBF,KAAKI,GAAGF,OAAOG,SAEhBL,KAAKH,KAAKqP,UAAUvO,MAAMX,KAAKY,MAAMuO,QAAQnP,KAAKH,KAAKqP,UAAUE,WAGvEpP,KAAKC,GAAG,WAAY,WAClBD,KAAKoM,KAAK,cAIdpM,KAAKG,OAAO,aAAc,WACxB,GAAIkP,OAAQ,CAEZrP,MAAKC,GAAG,UAAW,SAAUC,QACtBF,KAAKI,GAAGF,OAAOG,UACpBL,KAAKiB,OAASjB,KAAKsP,MAAMzM,OAAOvC,KAAK,MAAMW,UAG7CjB,KAAKoN,QAAQ,SAAU,SAAUlN,QACR,QAAnBA,OAAOkK,SACTpK,KAAKS,MAAMwC,IAAIM,QAAQ/B,OACvBxB,KAAKsP,MAAM5M,KAAK2M,SACZA,OAASrP,KAAKiB,SAAQoO,MAAQ,IAElCrP,KAAKS,MAAMwC,IAAIsM,UAAU/N,SAI7BxB,KAAKoN,QAAQ,QAAS,SAAUlN,QACzBF,KAAKsP,MAAMlP,GAAGF,OAAOG,SAC1BL,KAAKG,OAAOqP,OAAOtG,cAIvBlJ,KAAKG,OAAO,gBAAiB,WAC3B,GAAIkP,OAAQ,CAEZrP,MAAKC,GAAG,UAAW,SAAUC,QACtBF,KAAKI,GAAGF,OAAOG,UACpBL,KAAKiB,OAASjB,KAAKsP,MAAMzM,OAAOvC,KAAK,MAAMW,UAG7CjB,KAAKoN,QAAQ,SAAU,SAAUlN,QAC1BA,OAAOiK,eAAe/J,GAAG,QAC9BJ,KAAKS,MAAMwC,IAAIM,QAAQ/B,OACvBxB,KAAKsP,MAAM5M,KAAK2M,SACZA,OAASrP,KAAKiB,SAAQoO,MAAQ,QAItCrP,KAAKG,OAAO,mBAAoB,WAC9BH,KAAKC,GAAG,UAAW,WACjBD,KAAKmD,SAASnD,KAAKyP,iBAAiB5M,OAAOvC,KAAK,SAGlDN,KAAKC,GAAG,cAAe,SAAUC,QAC3BF,KAAKS,MAAM0D,UAAUuL,WAAaxP,OAAOG,QAC3CL,KAAKyP,iBAAiB5M,OAAOH,KAAK,OAKxC1C,KAAKG,OAAO,OAAQ,WAClBH,KAAKuL,KAAO,WACVvL,KAAKH,KAAK8P,KAAK1C,QAGjBjN,KAAKC,GAAG,eAAgB,SAAUC,QAC3BF,KAAK4P,cAAcxP,GAAGF,OAAOG,UAClCL,KAAKM,KAAK,SAAS2B,SAAS,SAC5BjC,KAAKG,OAAOM,MAAMwC,IAAI4M,MAAMrO,UAG9BxB,KAAKyC,SAAW,WACd,GAAIqN,gBAAkB,OAAQ9P,KAAKH,KAAKP,KAAMU,KAAKV,KAAO,KAAOU,KAAKmC,QAAU,GAAK,KAAM4N,KAAK,IAShG,OAPAC,IAAG,OAAQ,QAASF,cAAe,YAEnClQ,GAAGC,KAAKoQ,OAAOC,KAAKlQ,MAClBmQ,KAAM,OACNC,UAAW9Q,GAAIU,KAAKH,KAAKP,QAGpBU,KAAK0L,WAIhB1L,KAAKkN,KAAO,WACV,GAAI/M,QAAQ2P,aAOZ,OALA3P,QAASH,KAAKkI,QAAQtI,GAAGC,KAAK4O,OAAO,kBAAoB,oBAAoB4B,QAC7EP,eAAkB,OAAQ9P,KAAKV,KAAMa,OAAOb,KAAO,KAAOa,OAAOgC,QAAU,GAAK,KAAM4N,KAAK,KAE3FC,GAAG,OAAQ,QAASF,cAAe,QAE5B9P,KAAK0L,Yf85BV,SAASrM,OAAQD,UgBhjCvB,SAAUoB,EAAE8P,EAAEC,EAAEC,EAAEC,EAAEC,EAAEjR,GAAGe,EAAyB,sBAAEiQ,EAAEjQ,EAAEiQ,GAAGjQ,EAAEiQ,IAAI,YAChEjQ,EAAEiQ,GAAGE,EAAEnQ,EAAEiQ,GAAGE,OAAOrI,KAAKsI,YAAYpQ,EAAEiQ,GAAGI,EAAE,EAAE,GAAIC,MAAOJ,EAAEJ,EAAES,cAAcR,GAC3E9Q,EAAE6Q,EAAEU,qBAAqBT,GAAG,GAAGG,EAAEO,MAAM,EAAEP,EAAEQ,IAAIV,EAAE/Q,EAAE0R,WAAWC,aAAaV,EAAEjR,IAC1EiN,OAAO2E,SAAS,SAAS,0CAA0C,MAEtErB,GAAG,SAAU,gBAAiB,QAC9BA,GAAG,OAAQ,ahBujCL,SAAS3Q,OAAQD,SiB7jCvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAEtCE,KAAKC,GAAG,QAAS,SAAUwM,IACtBzM,KAAKI,GAAGqM,GAAGpM,SAEZL,KAAKH,MAAQG,KAAKH,KAAKgC,MAAMlB,MAAMX,KAAKY,MAAMuO,QAChDnP,KAAKoP,WAIPpP,KAAKoP,OAAS,WACbpP,KAAK+L,MAAM/L,KAAKH,KAAKyR,QAElBtR,KAAKH,KAAK4N,SAAS,QACrBzN,KAAK4L,OACL5L,KAAKuR,KAAKlG,MAAM,EAAGrL,KAAKuR,KAAK3F,OAE7B5L,KAAKH,KAAKgC,MAAM+J,QAIlB5L,KAAKuL,KAAO,WACX,GAAIC,YAAaxL,KAAK0L,OAQtB,OANIF,cACHxL,KAAKG,OAAOwL,QACZH,WAAWI,OACX5L,KAAKH,KAAKY,MAAMwC,IAAIC,OAAO1B,QAGrBgK,YAGRxL,KAAKyC,SAAW,WAEf,MADAzC,MAAKH,KAAKY,MAAMwC,IAAIzB,KAAK,kBAClBxB,KAAK0L,SAGb1L,KAAKwR,UAAY,WACZxR,KAAKyN,SAAS,cAClBzN,KAAKH,KAAKoC,SAAS,WACnBjC,KAAKqL,MAAM,OAAQ,WAClBrL,KAAKuL,WAIPvL,KAAKC,GAAG,eAAgB,SAASwM,IAC5BzM,KAAKuR,KAAKnR,GAAGqM,GAAGpM,SACpBL,KAAKiC,SAAS,iBjBqkCV,SAAS5C,OAAQD,UkBrnCvB,QAAUqS,MAAMC,MACXhF,OAAOiF,SAAWjF,OACrBA,OAAOkF,SAASC,KAAO,oCAEvBR,SAASS,OAAS","file":"monarch/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(14);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.component('audio-sequence', function () {\n\t\n\t  var sounds = null;\n\t\n\t  this.on('ready', function (_event) {\n\t    var screen = this.screen;\n\t\n\t    if (!this.is(_event.target)) return;\n\t\n\t    sounds = this.find('> audio');\n\t    sounds.each(function (i, audio) {\n\t      audio.onended = function () {\n\t        if (sounds[i + 1] && screen.state(screen.STATE.OPEN)) screen.playSound(sounds[i + 1]);\n\t      };\n\t    });\n\t    if (typeof this.properties.loop !== 'undefined') {\n\t      sounds[sounds.length - 1].onended = this.start.bind(this);\n\t    }\n\t  });\n\t\n\t  this.start = function () {\n\t    if (sounds[0] && this.screen.state(this.screen.STATE.OPEN)) this.screen.playSound(sounds[0]);\n\t  };\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tpl.game.component('frame', function () {\n\t\n\t  this.start = function () {\n\t    var bgSound, voSound;\n\t\n\t    bgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t    voSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\t\n\t    if (bgSound) bgSound.play();\n\t    if (voSound && !voSound.hasAttribute('pl-dontautoplay')) voSound.play();\n\t\n\t    if (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\t\n\t    return this;\n\t  };\n\t\n\t  this.handleProperty({\n\t    title: function title(_node, _name, _value) {\n\t      if (this.is(_node)) {\n\t        this.find('.frame').addClass('title');\n\t        this.game.defineRule('.experiment:nth-of-type(' + (this.screen.index() + 1) + ') .frame-component .frame.title::before', {\n\t          backgroundImage: 'url(' + _value + ')'\n\t        });\n\t      }\n\t    }\n\t  });\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (this.isReady) {\n\t      this.start();\n\t    }\n\t\n\t    if (this === _event.targetScope) {\n\t      if (!(this.hasOwnProperty('isComplete') && this.isComplete) && !(this.hasOwnProperty('requiredQueue') && this.requiredQueue && this.requiredQueue.length)) {\n\t        this.complete();\n\t      }\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('modal', function () {\n\t\n\t  this.item = function (_id) {\n\t    this.select(this);\n\t    this.reveal.item(_id);\n\t  };\n\t\n\t  this.behavior('close', function () {\n\t    if (!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n\t      if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t      this.deselect();\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('multiple-choice', function () {\n\t\n\t  function validateAnswer(_scope) {\n\t    var answers;\n\t\n\t    if (_scope.properties.correct) {\n\t      answers = _scope.properties.correct.split(/\\s*,\\s*/);\n\t\n\t      if (~answers.indexOf(String(_scope.getSelected().index()))) {\n\t        _scope.complete();\n\t      }\n\t    }\n\t\n\t    return false;\n\t  }\n\t\n\t  this.answer = function () {\n\t    var $li;\n\t\n\t    if (this.event) {\n\t      $li = $(this.event.target).closest('li');\n\t\n\t      if (!this.isComplete && this.select($li)) {\n\t        validateAnswer(this);\n\t      }\n\t    }\n\t  };\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t  this.item = function (_id) {\n\t    var vo, index;\n\t\n\t    if (typeof _id === 'number') {\n\t      this.select(this.find('li').eq(_id));\n\t      vo = this.audio.voiceOver && this.audio.voiceOver[_id];\n\t      if (vo) vo.play();\n\t    } else if (typeof _id === 'string') {\n\t      if (this[_id]) {\n\t        this.select(this[_id]);\n\t\n\t        if (this.audio) {\n\t          index = this[_id].index();\n\t          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t          if (vo) vo.play();\n\t        }\n\t      }\n\t    }\n\t  };\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('runner', function () {\n\t  var canvas, Flower, gameLoop, FLOWER, scale, boundPulse;\n\t\n\t  FLOWER = {\n\t    ORANGE: '[pl-id=orange]',\n\t    RED: '[pl-id=red]',\n\t    YELLOW: '[pl-id=yellow]'\n\t  };\n\t\n\t  gameLoop = {\n\t\n\t    lastRecycledFlower: null,\n\t\n\t    // main game loop\n\t    frame: function frame(_scope) {\n\t      // tranision flowers one px on each frame\n\t      _scope.flowers.forEach((function (_flower) {\n\t        var x, width;\n\t        _flower.position.x -= 1;\n\t\n\t        x = _flower.position.x + _flower.margin;\n\t        width = _flower.size.width;\n\t\n\t        if (x + width < 0) this.recycle(_scope, _flower);\n\t      }).bind(this));\n\t    },\n\t\n\t    recycle: function recycle(_scope, _flower) {\n\t      _flower.image = pl.util.random(_scope.bin);\n\t      _flower.margin = pl.util.random(2, 10) * 10;\n\t      _flower.position.x = _scope.width() + _flower.margin;\n\t\n\t      if (this.lastRecycledFlower) {\n\t        _flower.position.x = this.lastRecycledFlower.margin + this.lastRecycledFlower.position.x + this.lastRecycledFlower.size.width;\n\t      }\n\t\n\t      this.lastRecycledFlower = _flower;\n\t    },\n\t\n\t    pulsePoint: 0,\n\t\n\t    pulse: function pulse(_scope, _flower) {\n\t      // pulse flower\n\t      gameLoop.pulsePoint++;\n\t      _flower.position.x += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t      _flower.position.y += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n\t      _flower.size.width += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t      _flower.size.height += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n\t    }\n\t\n\t  };\n\t\n\t  Flower = pl.Basic.extend(function () {\n\t\n\t    this.position = null;\n\t    this.size = null;\n\t    this.margin = 0;\n\t    this.image = null;\n\t\n\t    this.init = function (_image) {\n\t      this.image = _image;\n\t\n\t      this.position = pl.Point.create();\n\t      this.size = [_image.naturalWidth, _image.naturalHeight].to('size');\n\t      this.margin = pl.util.random(2, 10) * 10;\n\t\n\t      ['Width', 'Height'].some(function (_plane) {\n\t        if (_image[_plane.toLowerCase()] !== _image['natural' + _plane]) {\n\t          scale = _image[_plane.toLowerCase()] / _image['natural' + _plane];\n\t          return false;\n\t        }\n\t      });\n\t\n\t      if (scale) this.size = this.size.scale(scale).math('floor');\n\t\n\t      return this;\n\t    };\n\t\n\t    this.render = function () {\n\t      return {\n\t        drawImage: [this.image, this.position.x + this.margin, this.position.y + 25, this.size.width, this.size.height]\n\t      };\n\t    };\n\t\n\t    this.is = function (_type) {\n\t      return $(this.image).is(_type);\n\t    };\n\t\n\t    this.id = function () {\n\t      return $(this.image).id();\n\t    };\n\t  });\n\t\n\t  canvas = {\n\t\n\t    ctx: null,\n\t    node: null,\n\t    content: null,\n\t    scale: 1,\n\t\n\t    init: function init(_canvas, _size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node = _canvas;\n\t      this.ctx = _canvas.getContext('2d');\n\t      this.scale = _scale || 1;\n\t\n\t      if (! ~size.indexOf(void 0)) {\n\t        _canvas.width = size.width;\n\t        _canvas.height = size.height;\n\t      }\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t\n\t      return this;\n\t    },\n\t\n\t    resize: function resize(_size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node.width = size.width;\n\t      this.node.height = size.height;\n\t      this.scale = _scale || 1;\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t    },\n\t\n\t    clear: function clear() {\n\t      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n\t    },\n\t\n\t    draw: function draw(_obj) {\n\t      var commands, cmd;\n\t\n\t      commands = _obj.render();\n\t\n\t      for (cmd in commands) {\n\t        if (typeof this.ctx[cmd] !== 'function') continue;\n\t        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.bin = null;\n\t  this.flowers = null;\n\t  this.player = null;\n\t  this.conveyor = null;\n\t  this.isConveyorRunning = false;\n\t\n\t  // Handle when the component scope is ready.\n\t  this.on('ready', function (_event) {\n\t    var canvasSize, width;\n\t\n\t    // Do not handle child scopes becomming ready.\n\t    if (!this.is(_event.target)) return;\n\t\n\t    width = this.width();\n\t\n\t    this.bin = this.findOwn('.bin img.flower').toArray();\n\t    this.flowers = (function (_scope) {\n\t      var shouldAppend, image, flower, x;\n\t\n\t      shouldAppend = true;\n\t      x = 0;\n\t\n\t      while (shouldAppend) {\n\t        image = pl.util.random(_scope.bin);\n\t        flower = Flower.create().init(image);\n\t\n\t        flower.position.x = x;\n\t        x += flower.size.width + flower.margin;\n\t\n\t        this.push(flower);\n\t\n\t        shouldAppend = flower.position.x < width;\n\t\n\t        _scope.log(flower.position.x, width);\n\t      }\n\t\n\t      return this;\n\t    }).call([], this);\n\t\n\t    canvasSize = pl.Size.create().set(width, 125);\n\t\n\t    canvas.init(this.conveyor[0], canvasSize, this.game.zoom);\n\t\n\t    this.game.viewport.onResize(this.game.bind(function () {\n\t      canvas.resize(canvasSize, this.zoom);\n\t    }));\n\t  });\n\t\n\t  this.on('transitionend', function (_event) {\n\t    if (!this.player.is(_event.target)) return;\n\t\n\t    if (this.player.state('GRAVITY')) {\n\t      this.isConveyorRunning = !this.testFlower();\n\t\n\t      if (this.isConveyorRunning) this.player.removeClass('GRAVITY');\n\t    } else if (this.player.state('JUMPING')) {\n\t      this.player.removeClass('JUMPING').addClass('GRAVITY').attr('style', null);\n\t    }\n\t  });\n\t\n\t  this.start = function () {\n\t    this.log('started');\n\t    this.isConveyorRunning = true;\n\t    this.eachFrame(this.onEachFrame);\n\t  };\n\t\n\t  this.restart = function () {\n\t    this.isConveyorRunning = true;\n\t    this.player.removeClass('GRAVITY');\n\t  };\n\t\n\t  this.stop = function () {\n\t    this.eachFrame(this.onEachFrame, false);\n\t  };\n\t\n\t  this.onEachFrame = function () {\n\t    if (!this.isConveyorRunning) return;\n\t\n\t    canvas.clear();\n\t\n\t    gameLoop.frame(this);\n\t\n\t    this.flowers.forEach(function (_flower) {\n\t      canvas.draw(_flower);\n\t    });\n\t  };\n\t\n\t  this.pulse = function (_flower) {\n\t    if (gameLoop.pulsePoint >= 80) {\n\t      gameLoop.pulsePoint = 0;\n\t      this.eachFrame(boundPulse, false);\n\t    }\n\t\n\t    canvas.clear();\n\t\n\t    gameLoop.pulse(this, _flower);\n\t\n\t    this.flowers.forEach(function (_f) {\n\t      canvas.draw(_f);\n\t    });\n\t  };\n\t\n\t  this.testFlower = function () {\n\t    var target, flower, player;\n\t\n\t    player = {\n\t      pos: this.player.absolutePosition(),\n\t      size: pl.Size.create().set(this.player.width(), this.player.height())\n\t    };\n\t\n\t    target = pl.Point.create().set(player.pos.x + player.size.width / 2, 40).inc(20, 0);\n\t\n\t    // canvas.ctx.fillStyle = '#000';\n\t\n\t    this.flowers.some(this.bind(function (_flower) {\n\t      var hitArea, padding, inBoundsX, inBoundsY;\n\t\n\t      padding = 25;\n\t      hitArea = {\n\t        x1: _flower.position.x + _flower.margin + padding,\n\t        y1: _flower.position.y + padding,\n\t        x2: _flower.position.x + _flower.margin + _flower.size.width - padding * 1,\n\t        y2: _flower.position.y + _flower.size.height - padding * 1\n\t      };\n\t\n\t      // canvas.ctx.fillRect(hitArea.x1, hitArea.y1, hitArea.x2 - hitArea.x1, hitArea.y2 - hitArea.y1);\n\t\n\t      inBoundsX = target.x > hitArea.x1 && target.x < hitArea.x2;\n\t      inBoundsY = target.y > hitArea.y1 && target.y < hitArea.y2;\n\t\n\t      if (inBoundsX && inBoundsY && _flower.is(FLOWER.RED)) {\n\t        flower = _flower;\n\t        return true;\n\t      }\n\t    }));\n\t\n\t    this.landed(flower);\n\t\n\t    // canvas.ctx.fillStyle = '#00f';\n\t    // canvas.ctx.fillRect(target.x, target.y, 10,10);\n\t\n\t    return flower;\n\t  };\n\t\n\t  this.behavior('jump', function () {\n\t    var position;\n\t\n\t    if (!this.isConveyorRunning) return;\n\t\n\t    position = this.player.transformPosition();\n\t\n\t    this.player.removeClass('GRAVITY').addClass('JUMPING').transformPosition(position.dec(0, 60));\n\t\n\t    this.log('behavior:jump');\n\t\n\t    return {\n\t      behaviorTarget: this.player\n\t    };\n\t  });\n\t\n\t  this.behavior('landed', function (_flower) {\n\t    var id;\n\t\n\t    if (_flower) {\n\t      id = _flower.id();\n\t      boundPulse = this.pulse.bind(this, _flower);\n\t      this.eachFrame(boundPulse);\n\t    }\n\t\n\t    return {\n\t      message: id,\n\t      behaviorTarget: this.player\n\t    };\n\t  });\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('score', function () {\n\t\n\t  this.value = 0;\n\t\n\t  this.entity('.board', function () {\n\t\n\t    this.template = null;\n\t\n\t    this.ready = function () {\n\t      this.template = this.html();\n\t    };\n\t\n\t    this.render = function () {\n\t      this.html(this.template.replace('{{score}}', this.value));\n\t      return this;\n\t    };\n\t  });\n\t\n\t  this.init = function () {\n\t    this.screen.require(this);\n\t  };\n\t\n\t  this.ready = function () {\n\t    this.board.render();\n\t  };\n\t\n\t  this.up = function (_count) {\n\t    this.value += _count || 1;\n\t\n\t    this.board.render();\n\t\n\t    if (this.value === parseInt(this.properties.max, 10)) {\n\t      this.complete();\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.down = function (_count) {\n\t    this.value -= _count || 1;\n\t\n\t    this.board.render();\n\t\n\t    if (this.value === parseInt(this.properties.max, 10)) {\n\t      this.complete();\n\t    }\n\t\n\t    return this;\n\t  };\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t  this.currentVO = null;\n\t\n\t  this.allowAction = function () {\n\t    return this.screen.state(this.screen.STATE.OPEN) && !this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode;\n\t  };\n\t\n\t  this.playSound = function (_sound) {\n\t    var delay;\n\t\n\t    delay = $(_sound).attr('pl-delay');\n\t\n\t    if (_sound.type === 'voiceOver') {\n\t      this.currentVO = _sound;\n\t    }\n\t\n\t    if (delay) {\n\t      return this.delay(delay, _sound.play.bind(_sound));\n\t    } else {\n\t      return _sound.play();\n\t    }\n\t  };\n\t\n\t  this.next = function () {\n\t    var nextScreen, buttonSound;\n\t\n\t    nextScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (nextScreen) {\n\t      this.leave();\n\t      nextScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return nextScreen;\n\t  };\n\t\n\t  this.prev = function () {\n\t    var prevScreen, buttonSound;\n\t\n\t    prevScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (prevScreen) {\n\t      this.screen.close();\n\t      prevScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return prevScreen;\n\t  };\n\t\n\t  this.start = function () {\n\t    var bgSound, voSound, fxSound;\n\t\n\t    bgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n\t    voSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\t    fxSound = pl.util.resolvePath(this, 'audio.sfx.start');\n\t\n\t    if (bgSound) {\n\t      this.game.bgSound = bgSound;\n\t      bgSound.play();\n\t    }\n\t    if (fxSound) fxSound.play();\n\t    if (voSound) this.playSound(voSound);\n\t\n\t    if (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\t\n\t    return this;\n\t  };\n\t\n\t  this.stop = function () {\n\t    if (this.timeoutID) {\n\t      clearTimeout(this.timeoutID);\n\t    }\n\t\n\t    if (this.intervalID) {\n\t      this.kill('repeat');\n\t    }\n\t\n\t    if (this.currentVO) {\n\t      this.currentVO.stop();\n\t    }\n\t  };\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.start();\n\t    }\n\t\n\t    if (this.properties.gameClass) {\n\t      this.game.addClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t      this.complete();\n\t    }\n\t  });\n\t\n\t  this.on('ui-leave', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.on('ui-close', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.on('ready', function () {\n\t    if (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n\t      this.requiredQueue.on('complete', this.bind(function () {\n\t        var sfx;\n\t\n\t        sfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\t\n\t        if (sfx) this.playSound(sfx);\n\t      }));\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t  this.buttonSound = function () {\n\t    if (this.audio.sfx.button) this.audio.sfx.button.play();\n\t  };\n\t\n\t  // TODO: Make an automated way to handle this\n\t  this.on('transitionend', function (_event) {\n\t    if (!this.is(_event.taget)) return;\n\t    if (this.state(this.STATE.LEAVE)) {\n\t      this.addClass('LEAVE-END');\n\t    }\n\t  });\n\t\n\t  this.on('ready', function (_e) {\n\t    var ctx;\n\t\n\t    if (!this.is(_e.target)) return;\n\t\n\t    ctx = new (window.AudioContext || window.webkitAudioContext)();\n\t    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n\t    if (this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n\t  });\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.taget)) return;\n\t    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n\t    this.buttonSound();\n\t    this.game.addClass('QUIT-SCREEN');\n\t    this.removeClass('LEAVE-END');\n\t    this.game.pause(true);\n\t  });\n\t\n\t  this.on('ui-leave', function () {\n\t    this.game.removeClass('QUIT-SCREEN');\n\t    this.game.resume();\n\t  });\n\t\n\t  this.init = function () {\n\t    this.addClass('LEAVE LEAVE-END');\n\t  };\n\t\n\t  this.okay = function () {\n\t    this.buttonSound();\n\t    this.game.exit();\n\t  };\n\t\n\t  this.cancel = function () {\n\t    this.buttonSound();\n\t    this.leave();\n\t  };\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-reveal', function () {\n\t\n\t  this.respond('select', function (_event) {\n\t    var index, stateMethod;\n\t\n\t    index = _event.message;\n\t    stateMethod = this.properties.selectState || 'select';\n\t\n\t    if (~index) {\n\t      this[stateMethod](_event.behaviorTarget);\n\t      if (this.audio.sfx.button) this.audio.sfx.button.play();\n\t      this.reveal.item(index);\n\t    }\n\t  });\n\t\n\t  this.start = function () {};\n\t\n\t  this.entity('selectable', function () {\n\t\n\t    this.shouldSelect = function (_$target) {\n\t      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t        return !this.screen.state(this.STATE.VOICE_OVER);\n\t      }\n\t\n\t      return false;\n\t    };\n\t  });\n\t});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t  this.behavior('select', function (_target) {\n\t    var $target, id;\n\t\n\t    if (this.event) {\n\t      $target = $(this.event.target).closest('li');\n\t      id = $target.id() || $target.index();\n\t\n\t      if (this.shouldSelect($target) !== false) {\n\t        return {\n\t          message: id,\n\t          behaviorTarget: $target\n\t        };\n\t      }\n\t    } else {\n\t      this.proto(_target);\n\t    }\n\t\n\t    return false;\n\t  });\n\t\n\t  this.shouldSelect = function (_$target) {\n\t    console.log(this.properties);\n\t    if (this.properties.eachSelectable || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t      return !this.screen.state(this.STATE.VOICE_OVER);\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.deselectAll = function () {\n\t    var items = this.find('li');\n\t    this.deselect(items);\n\t    this.unhighlight(items);\n\t  };\n\t});\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tpl.game.component('video', function () {\n\t  var bg;\n\t\n\t  this.start = function () {\n\t    var self = this;\n\t    this.video.on('ended', function () {\n\t      self.complete();\n\t    });\n\t    this.stopBackground();\n\t    this.video[0].play();\n\t  };\n\t\n\t  this.stopBackground = function () {\n\t    if (!this.properties.playBackground && (bg = this.game.media.playing('.background'))) {\n\t      bg.stop('@ALL');\n\t    }\n\t  };\n\t\n\t  this.pause = function () {\n\t    this.video[0].pause();\n\t  };\n\t\n\t  this.resume = function () {\n\t    if (this.isComplete) return;\n\t    this.stopBackground();\n\t    this.video[0].play();\n\t  };\n\t\n\t  this.screen.on('ui-close', this.pause.bind(this));\n\t});\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t  screenSelector: '.screen',\n\t  componentDirectory: 'components/',\n\t  dimensions: {\n\t    width: 960,\n\t    ratio: 16 / 9\n\t  },\n\t  shouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(16);\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(11);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(17);\n\t\n\t__webpack_require__(15);\n\t\n\tpl.game('monarch', function () {\n\t\n\t  this.screen('title', function () {\n\t    this.on('ui-open', function () {\n\t      this.repeat('4s', function () {\n\t        this.audio.sfx.play();\n\t      });\n\t      this.audio.sfx.on('play', (function () {\n\t        this.pupa.addClass('SHAKE');\n\t      }).bind(this));\n\t      this.audio.sfx.on('ended', (function () {\n\t        this.pupa.removeClass('SHAKE');\n\t      }).bind(this));\n\t    });\n\t\n\t    this.pause = function () {\n\t      this.kill('repeat');\n\t      this.__proto__.pause();\n\t    };\n\t\n\t    this.resume = function () {\n\t      this.repeat('4s', function () {\n\t        this.audio.sfx.play();\n\t      });\n\t      this.__proto__.resume();\n\t    };\n\t\n\t    this.on('ready', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t\n\t      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t    });\n\t\n\t    this.on('ui-close', function () {\n\t      this.kill('repeat');\n\t    });\n\t  });\n\t\n\t  this.screen('fly-across', function () {\n\t    var count = 0;\n\t\n\t    this.on('ui-open', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t      this.length = this.modal.reveal.find('li').length;\n\t    });\n\t\n\t    this.respond('landed', function (_event) {\n\t      if (_event.message === 'red') {\n\t        this.audio.sfx.correct.play();\n\t        this.modal.item(count++);\n\t        if (count >= this.length) count = 0;\n\t      } else {\n\t        this.audio.sfx.incorrect.play();\n\t      }\n\t    });\n\t\n\t    this.respond('close', function (_event) {\n\t      if (!this.modal.is(_event.target)) return;\n\t      this.screen.runner.restart();\n\t    });\n\t  });\n\t\n\t  this.screen('floating-weed', function () {\n\t    var count = 0;\n\t\n\t    this.on('ui-open', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t      this.length = this.modal.reveal.find('li').length;\n\t    });\n\t\n\t    this.respond('select', function (_event) {\n\t      if (!_event.behaviorTarget.is('li')) return;\n\t      this.audio.sfx.correct.play();\n\t      this.modal.item(count++);\n\t      if (count >= this.length) count = 0;\n\t    });\n\t  });\n\t\n\t  this.screen('four-generations', function () {\n\t    this.on('ui-open', function () {\n\t      this.deselect(this.selectableReveal.reveal.find('li'));\n\t    });\n\t\n\t    this.on('audio-ended', function (_event) {\n\t      if (this.audio.voiceOver.lifespan === _event.target) {\n\t        this.selectableReveal.reveal.item(4);\n\t      }\n\t    });\n\t  });\n\t\n\t  this.screen('flip', function () {\n\t    this.next = function () {\n\t      this.game.quit.okay();\n\t    };\n\t\n\t    this.on('animationend', function (_event) {\n\t      if (!this.flipContainer.is(_event.target)) return;\n\t      this.find('.pupa').addClass('SHAKE');\n\t      this.screen.audio.sfx.shake.play();\n\t    });\n\t\n\t    this.complete = function () {\n\t      var eventCategory = ['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')'].join(' ');\n\t\n\t      ga('send', 'event', eventCategory, 'complete');\n\t\n\t      pl.game.report.flip(this, {\n\t        name: 'flip',\n\t        gameData: { id: this.game.id() }\n\t      });\n\t\n\t      return this.proto();\n\t    };\n\t  });\n\t\n\t  this.exit = function () {\n\t    var screen, eventCategory;\n\t\n\t    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t    eventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t    ga('send', 'event', eventCategory, 'quit');\n\t\n\t    return this.proto();\n\t  };\n\t});\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tif (this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\t\tthis.splash();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.splash = function () {\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tif (this.game.hasClass('iOS')) {\n\t\t\t\tthis.open();\n\t\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t\t} else {\n\t\t\t\tthis.game.title.open();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen = this.proto();\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tthis.game.audio.sfx.button.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.complete = function () {\n\t\t\tthis.game.audio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.startGame = function () {\n\t\t\tif (!this.hasClass('FINISHED')) return;\n\t\t\tthis.game.addClass('STARTED');\n\t\t\tthis.delay('2.5s', function () {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.on('animationend', function (_e) {\n\t\t\tif (!this.ball.is(_e.target)) return;\n\t\t\tthis.addClass('FINISHED');\n\t\t});\n\t});\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t(function test(_env) {\n\t\tif (window.parent === window) {\n\t\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t\t} else {\n\t\t\tdocument.domain = 'changemyworldnow.com';\n\t\t}\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** monarch/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 559db80cd5f68d104730\n **/","pl.game.component('audio-sequence', function () {\n\n  var sounds = null;\n\n  this.on('ready', function (_event) {\n    var screen = this.screen;\n\n    if (!this.is(_event.target)) return;\n\n    sounds = this.find('> audio');\n    sounds.each(function (i, audio) {\n      audio.onended = function () {\n        if (sounds[i + 1] && screen.state(screen.STATE.OPEN)) screen.playSound(sounds[i + 1]);\n      };\n    });\n    if (typeof this.properties.loop !== 'undefined') {\n      sounds[sounds.length - 1].onended = this.start.bind(this);\n    }\n  });\n\n  this.start = function () {\n    if (sounds[0] && this.screen.state(this.screen.STATE.OPEN)) this.screen.playSound(sounds[0]);\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/audio-sequence/behavior.js\n **/","pl.game.component('frame', function () {\n\n  this.start = function () {\n    var bgSound, voSound;\n\n    bgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n    voSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n\n    if (bgSound) bgSound.play();\n    if (voSound && !voSound.hasAttribute('pl-dontautoplay')) voSound.play();\n\n    if (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\n    return this;\n  };\n\n  this.handleProperty({\n    title: function (_node, _name, _value) {\n      if (this.is(_node)) {\n        this.find('.frame').addClass('title');\n        this.game.defineRule('.experiment:nth-of-type(' + (this.screen.index() + 1) + ') .frame-component .frame.title::before', {\n          backgroundImage: 'url(' + _value + ')'\n        });\n      }\n    }\n  });\n\n  this.on('ui-open', function (_event) {\n    if (this.isReady) {\n      this.start();\n    }\n\n    if (this === _event.targetScope) {\n      if (!(this.hasOwnProperty('isComplete') && this.isComplete) && !(this.hasOwnProperty('requiredQueue') && (this.requiredQueue && this.requiredQueue.length))) {\n        this.complete();\n      }\n    }\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/frame/behavior.js\n **/","pl.game.component('modal', function () {\n\n  this.item = function (_id) {\n    this.select(this);\n    this.reveal.item(_id);\n  };\n\n  this.behavior('close', function () {\n    if (!this.screen.state(this.screen.STATE.VOICE_OVER) || this.game.demoMode) {\n      if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n      this.deselect();\n    }\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/modal/behavior.js\n **/","pl.game.component('multiple-choice', function () {\n\n  function validateAnswer(_scope) {\n    var answers;\n\n    if (_scope.properties.correct) {\n      answers = _scope.properties.correct.split(/\\s*,\\s*/);\n\n      if (~answers.indexOf(String(_scope.getSelected().index()))) {\n        _scope.complete();\n      }\n    }\n\n    return false;\n  }\n\n  this.answer = function () {\n    var $li;\n\n    if (this.event) {\n      $li = $(this.event.target).closest('li');\n\n      if (!this.isComplete && this.select($li)) {\n        validateAnswer(this);\n      }\n    }\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/multiple-choice/behavior.js\n **/","pl.game.component('reveal', function () {\n\n  this.item = function (_id) {\n    var vo, index;\n\n    if (typeof _id === 'number') {\n      this.select(this.find('li').eq(_id));\n      vo = this.audio.voiceOver && this.audio.voiceOver[_id];\n      if (vo) vo.play();\n    } else if (typeof _id === 'string') {\n      if (this[_id]) {\n        this.select(this[_id]);\n\n        if (this.audio) {\n          index = this[_id].index();\n          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\n          if (vo) vo.play();\n        }\n      }\n    }\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/reveal/behavior.js\n **/","pl.game.component('runner', function () {\n  var canvas, Flower, gameLoop, FLOWER, scale, boundPulse;\n\n  FLOWER = {\n    ORANGE: '[pl-id=orange]',\n    RED: '[pl-id=red]',\n    YELLOW: '[pl-id=yellow]'\n  };\n\n  gameLoop = {\n\n    lastRecycledFlower: null,\n\n    // main game loop\n    frame: function (_scope) {\n      // tranision flowers one px on each frame\n      _scope.flowers.forEach((function (_flower) {\n        var x, width;\n        _flower.position.x -= 1;\n\n        x = _flower.position.x + _flower.margin;\n        width = _flower.size.width;\n\n        if (x + width < 0) this.recycle(_scope, _flower);\n      }).bind(this));\n    },\n\n    recycle: function (_scope, _flower) {\n      _flower.image = pl.util.random(_scope.bin);\n      _flower.margin = pl.util.random(2, 10) * 10;\n      _flower.position.x = _scope.width() + _flower.margin;\n\n      if (this.lastRecycledFlower) {\n        _flower.position.x = this.lastRecycledFlower.margin +\n          this.lastRecycledFlower.position.x +\n          this.lastRecycledFlower.size.width;\n      }\n\n      this.lastRecycledFlower = _flower;\n    },\n\n    pulsePoint: 0,\n\n    pulse: function (_scope, _flower) {\n      // pulse flower\n      gameLoop.pulsePoint++;\n      _flower.position.x += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n      _flower.position.y += gameLoop.pulsePoint % 40 > 20 ? 1 : -1;\n      _flower.size.width += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n      _flower.size.height += gameLoop.pulsePoint % 40 > 20 ? -2 : 2;\n    },\n\n  };\n\n  Flower = pl.Basic.extend(function () {\n\n    this.position = null;\n    this.size = null;\n    this.margin = 0;\n    this.image = null;\n\n    this.init = function (_image) {\n      this.image = _image;\n\n      this.position = pl.Point.create();\n      this.size = [_image.naturalWidth, _image.naturalHeight].to('size');\n      this.margin = pl.util.random(2, 10) * 10;\n\n      ['Width', 'Height'].some(function (_plane) {\n        if (_image[_plane.toLowerCase()] !== _image['natural' + _plane]) {\n          scale = _image[_plane.toLowerCase()] / _image['natural' + _plane];\n          return false;\n        }\n      });\n\n      if (scale) this.size = this.size.scale(scale).math('floor');\n\n      return this;\n    };\n\n    this.render = function () {\n      return {\n        drawImage: [this.image, this.position.x + this.margin, this.position.y + 25, this.size.width, this.size.height]\n      };\n    };\n\n    this.is = function (_type) {\n      return $(this.image).is(_type);\n    };\n\n    this.id = function () {\n      return $(this.image).id();\n    };\n  });\n\n  canvas = {\n\n    ctx: null,\n    node: null,\n    content: null,\n    scale: 1,\n\n    init: function (_canvas, _size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node = _canvas;\n      this.ctx = _canvas.getContext('2d');\n      this.scale = _scale || 1;\n\n      if (!~size.indexOf(void 0)) {\n        _canvas.width = size.width;\n        _canvas.height = size.height;\n      }\n\n      this.ctx.scale(_scale, _scale);\n\n      return this;\n    },\n\n    resize: function (_size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node.width = size.width;\n      this.node.height = size.height;\n      this.scale = _scale || 1;\n\n      this.ctx.scale(_scale, _scale);\n    },\n\n    clear: function () {\n      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n    },\n\n    draw: function (_obj) {\n      var commands, cmd;\n\n      commands = _obj.render();\n\n      for (cmd in commands) {\n        if (typeof this.ctx[cmd] !== 'function') continue;\n        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n      }\n    }\n  };\n\n  this.bin = null;\n  this.flowers = null;\n  this.player = null;\n  this.conveyor = null;\n  this.isConveyorRunning = false;\n\n  // Handle when the component scope is ready.\n  this.on('ready', function (_event) {\n    var canvasSize, width;\n\n    // Do not handle child scopes becomming ready.\n    if (!this.is(_event.target)) return;\n\n    width = this.width();\n\n    this.bin = this.findOwn('.bin img.flower').toArray();\n    this.flowers = (function (_scope) {\n      var shouldAppend, image, flower, x;\n\n      shouldAppend = true;\n      x = 0;\n\n      while (shouldAppend) {\n        image = pl.util.random(_scope.bin);\n        flower = Flower.create().init(image);\n\n        flower.position.x = x;\n        x += flower.size.width + flower.margin;\n\n        this.push(flower);\n\n        shouldAppend = flower.position.x < width;\n\n        _scope.log(flower.position.x, width);\n      }\n\n      return this;\n\n    }).call([], this);\n\n    canvasSize = pl.Size\n      .create()\n      .set(width, 125);\n\n    canvas.init(this.conveyor[0], canvasSize, this.game.zoom);\n\n    this.game.viewport.onResize(this.game.bind(function () {\n      canvas.resize(canvasSize, this.zoom);\n    }));\n  });\n\n  this.on('transitionend', function (_event) {\n    if (!this.player.is(_event.target)) return;\n\n    if (this.player.state('GRAVITY')) {\n      this.isConveyorRunning = !this.testFlower();\n\n      if (this.isConveyorRunning) this.player.removeClass('GRAVITY');\n\n    } else if (this.player.state('JUMPING')) {\n      this.player\n        .removeClass('JUMPING')\n        .addClass('GRAVITY')\n        .attr('style', null);\n    }\n  });\n\n  this.start = function () {\n    this.log('started');\n    this.isConveyorRunning = true;\n    this.eachFrame(this.onEachFrame);\n  };\n\n  this.restart = function () {\n    this.isConveyorRunning = true;\n    this.player\n      .removeClass('GRAVITY');\n  };\n\n  this.stop = function () {\n    this.eachFrame(this.onEachFrame, false);\n  };\n\n  this.onEachFrame = function () {\n    if (!this.isConveyorRunning) return;\n\n    canvas.clear();\n\n    gameLoop.frame(this);\n\n    this.flowers.forEach(function (_flower) {\n      canvas.draw(_flower);\n    });\n  };\n\n  this.pulse = function (_flower) {\n    if (gameLoop.pulsePoint >= 80) {\n      gameLoop.pulsePoint = 0;\n      this.eachFrame(boundPulse, false);\n    }\n\n    canvas.clear();\n\n    gameLoop.pulse(this, _flower);\n\n    this.flowers.forEach(function (_f) {\n      canvas.draw(_f);\n    });\n  };\n\n  this.testFlower = function () {\n    var target, flower, player;\n\n    player = {\n      pos: this.player.absolutePosition(),\n      size: pl.Size.create().set(this.player.width(), this.player.height())\n    };\n\n    target = pl.Point.create().set(player.pos.x + (player.size.width / 2), 40).inc(20, 0);\n\n    // canvas.ctx.fillStyle = '#000';\n\n    this.flowers.some(this.bind(function (_flower) {\n      var hitArea, padding, inBoundsX, inBoundsY;\n\n      padding = 25;\n      hitArea = {\n        x1: _flower.position.x + _flower.margin + padding,\n        y1: _flower.position.y + padding,\n        x2: _flower.position.x + _flower.margin + _flower.size.width - (padding * 1),\n        y2: _flower.position.y + _flower.size.height - (padding * 1)\n      };\n\n      // canvas.ctx.fillRect(hitArea.x1, hitArea.y1, hitArea.x2 - hitArea.x1, hitArea.y2 - hitArea.y1);\n\n      inBoundsX = target.x > hitArea.x1 && target.x < hitArea.x2;\n      inBoundsY = target.y > hitArea.y1 && target.y < hitArea.y2;\n\n      if (inBoundsX && inBoundsY && _flower.is(FLOWER.RED)) {\n        flower = _flower;\n        return true;\n      }\n    }));\n\n    this.landed(flower);\n\n    // canvas.ctx.fillStyle = '#00f';\n    // canvas.ctx.fillRect(target.x, target.y, 10,10);\n\n    return flower;\n  };\n\n  this.behavior('jump', function () {\n    var position;\n\n    if (!this.isConveyorRunning) return;\n\n    position = this.player.transformPosition();\n\n    this.player\n      .removeClass('GRAVITY')\n      .addClass('JUMPING')\n      .transformPosition(position.dec(0, 60));\n\n    this.log('behavior:jump');\n\n    return {\n      behaviorTarget: this.player\n    };\n  });\n\n  this.behavior('landed', function (_flower) {\n    var id;\n\n    if (_flower) {\n      id = _flower.id();\n      boundPulse = this.pulse.bind(this, _flower);\n      this.eachFrame(boundPulse);\n    }\n\n    return {\n      message: id,\n      behaviorTarget: this.player\n    };\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/runner/behavior.js\n **/","pl.game.component('score', function () {\n\n  this.value = 0;\n\n  this.entity('.board', function () {\n\n    this.template = null;\n\n    this.ready = function () {\n      this.template = this.html();\n    };\n\n    this.render = function () {\n      this.html(this.template.replace('{{score}}', this.value));\n      return this;\n    };\n\n  });\n\n  this.init = function () {\n    this.screen.require(this);\n  };\n\n  this.ready = function () {\n    this.board.render();\n  };\n\n  this.up = function (_count) {\n    this.value += _count || 1;\n\n    this.board.render();\n\n    if (this.value === parseInt(this.properties.max, 10)) {\n      this.complete();\n    }\n\n    return this;\n  };\n\n  this.down = function (_count) {\n    this.value -= _count || 1;\n\n    this.board.render();\n\n    if (this.value === parseInt(this.properties.max, 10)) {\n      this.complete();\n    }\n\n    return this;\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/score/behavior.js\n **/","pl.game.component('screen-basic', function () {\n  this.currentVO = null;\n\n  this.allowAction = function () {\n    return (this.screen.state(this.screen.STATE.OPEN) && !this.screen.state(this.screen.STATE.VOICE_OVER)) || this.game.demoMode;\n  };\n\n  this.playSound = function (_sound) {\n    var delay;\n\n    delay = $(_sound).attr('pl-delay');\n\n    if (_sound.type === 'voiceOver') {\n      this.currentVO = _sound;\n    }\n\n    if (delay) {\n      return this.delay(delay, _sound.play.bind(_sound));\n    } else {\n      return _sound.play();\n    }\n  };\n\n  this.next = function () {\n    var nextScreen, buttonSound;\n\n    nextScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (nextScreen) {\n      this.leave();\n      nextScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return nextScreen;\n  };\n\n  this.prev = function () {\n    var prevScreen, buttonSound;\n\n    prevScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (prevScreen) {\n      this.screen.close();\n      prevScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return prevScreen;\n  };\n\n  this.start = function () {\n    var bgSound, voSound, fxSound;\n\n    bgSound = pl.util.resolvePath(this, 'audio.background[0]?');\n    voSound = pl.util.resolvePath(this, 'audio.voiceOver[0]?');\n    fxSound = pl.util.resolvePath(this, 'audio.sfx.start');\n\n    if (bgSound) {\n      this.game.bgSound = bgSound;\n      bgSound.play();\n    }\n    if (fxSound) fxSound.play();\n    if (voSound) this.playSound(voSound);\n\n    if (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (this.timeoutID) {\n      clearTimeout(this.timeoutID);\n    }\n\n    if (this.intervalID) {\n      this.kill('repeat');\n    }\n\n    if (this.currentVO) {\n      this.currentVO.stop();\n    }\n  };\n\n  this.on('ui-open', function (_event) {\n    if (this.isReady && this === _event.targetScope) {\n      this.start();\n    }\n\n    if (this.properties.gameClass) {\n      this.game.addClass(this.properties.gameClass);\n    }\n\n    if (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n      this.complete();\n    }\n  });\n\n  this.on('ui-leave', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.on('ui-close', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.on('ready', function () {\n    if (this.isMemberSafe('requiredQueue') && this.requiredQueue) {\n      this.requiredQueue.on('complete', this.bind(function () {\n        var sfx;\n\n        sfx = pl.util.resolvePath(this, 'screen.audio.sfx.screenComplete') || pl.util.resolvePath(this, 'game.audio.sfx.screenComplete');\n\n        if (sfx) this.playSound(sfx);\n      }));\n    }\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n  this.buttonSound = function () {\n    if (this.audio.sfx.button) this.audio.sfx.button.play();\n  };\n\n  // TODO: Make an automated way to handle this\n  this.on('transitionend', function (_event) {\n    if (!this.is(_event.taget)) return;\n    if (this.state(this.STATE.LEAVE)) {\n      this.addClass('LEAVE-END');\n    }\n  });\n\n  this.on('ready', function (_e) {\n    var ctx;\n\n    if (!this.is(_e.target)) return;\n\n    ctx = new (window.AudioContext || window.webkitAudioContext);\n    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.setContext(ctx);\n    if (this.audio.sfx.button) this.audio.sfx.button.setContext(ctx);\n  });\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.taget)) return;\n    if (this.audio.voiceOver.sure) this.audio.voiceOver.sure.play();\n    this.buttonSound();\n    this.game.addClass('QUIT-SCREEN');\n    this.removeClass('LEAVE-END');\n    this.game.pause(true);\n  });\n\n  this.on('ui-leave', function () {\n    this.game.removeClass('QUIT-SCREEN');\n    this.game.resume();\n  });\n\n  this.init = function () {\n    this.addClass('LEAVE LEAVE-END');\n  };\n\n  this.okay = function () {\n    this.buttonSound();\n    this.game.exit();\n  };\n\n  this.cancel = function () {\n    this.buttonSound();\n    this.leave();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('selectable-reveal', function () {\n\n  this.respond('select', function (_event) {\n    var index, stateMethod;\n\n    index = _event.message;\n    stateMethod = this.properties.selectState || 'select';\n\n    if (~index) {\n      this[stateMethod](_event.behaviorTarget);\n      if (this.audio.sfx.button) this.audio.sfx.button.play();\n      this.reveal.item(index);\n    }\n  });\n\n  this.start = function () {};\n\n  this.entity('selectable', function () {\n\n    this.shouldSelect = function (_$target) {\n      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n        return !this.screen.state(this.STATE.VOICE_OVER);\n      }\n\n      return false;\n    };\n\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/selectable-reveal/behavior.js\n **/","pl.game.component('selectable', function () {\n\n  this.behavior('select', function (_target) {\n    var $target, id;\n\n    if (this.event) {\n      $target = $(this.event.target).closest('li');\n      id = $target.id() || $target.index();\n\n      if (this.shouldSelect($target) !== false) {\n        return {\n          message: id,\n          behaviorTarget: $target\n        };\n      }\n    } else {\n      this.proto(_target);\n    }\n\n    return false;\n  });\n\n  this.shouldSelect = function (_$target) {\n    console.log(this.properties);\n    if (this.properties.eachSelectable || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n      return !this.screen.state(this.STATE.VOICE_OVER);\n    }\n\n    return false;\n  };\n\n  this.deselectAll = function () {\n    var items = this.find('li');\n    this.deselect(items);\n    this.unhighlight(items);\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/selectable/behavior.js\n **/","pl.game.component('video', function () {\n  var bg;\n\n  this.start = function () {\n    var self = this;\n    this.video.on('ended', function () {\n      self.complete();\n    });\n    this.stopBackground();\n    this.video[0].play();\n  };\n\n  this.stopBackground = function () {\n    if (!this.properties.playBackground && (bg = this.game.media.playing('.background'))) {\n      bg.stop('@ALL');\n    }\n  };\n\n  this.pause = function () {\n    this.video[0].pause();\n  };\n\n  this.resume = function () {\n    if (this.isComplete) return;\n    this.stopBackground();\n    this.video[0].play();\n  };\n\n  this.screen.on('ui-close', this.pause.bind(this));\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/components/video/behavior.js\n **/","pl.game.config({\n  screenSelector: '.screen',\n  componentDirectory: 'components/',\n  dimensions: {\n    width: 960,\n    ratio: 16 / 9\n  },\n  shouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\nimport '../../../shared/js/screen-ios-splash';\nimport './components/audio-sequence/behavior';\nimport './components/frame/behavior';\nimport './components/modal/behavior';\nimport './components/multiple-choice/behavior';\nimport './components/reveal/behavior';\nimport './components/runner/behavior';\nimport './components/score/behavior';\nimport './components/screen-basic/behavior';\nimport './components/screen-quit/behavior';\nimport './components/selectable-reveal/behavior';\nimport './components/selectable/behavior';\nimport './components/video/behavior';\n\nimport '../../../shared/js/test-platform-integration';\nimport '../../../shared/js/google-analytics';\n\npl.game('monarch', function () {\n\n  this.screen('title', function () {\n    this.on('ui-open', function () {\n      this.repeat('4s', function () {\n        this.audio.sfx.play();\n      });\n      this.audio.sfx.on('play', function () {\n        this.pupa.addClass('SHAKE');\n      }.bind(this));\n      this.audio.sfx.on('ended', function () {\n        this.pupa.removeClass('SHAKE');\n      }.bind(this));\n    });\n\n    this.pause = function () {\n      this.kill('repeat');\n      this.__proto__.pause();\n    };\n\n    this.resume = function () {\n      this.repeat('4s', function () {\n        this.audio.sfx.play();\n      });\n      this.__proto__.resume();\n    };\n\n    this.on('ready', function (_event) {\n      if (!this.is(_event.target)) return;\n\n      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n    });\n\n    this.on('ui-close', function () {\n      this.kill('repeat');\n    });\n  });\n\n  this.screen('fly-across', function () {\n    var count = 0;\n\n    this.on('ui-open', function (_event) {\n      if (!this.is(_event.target)) return;\n      this.length = this.modal.reveal.find('li').length;\n    });\n\n    this.respond('landed', function (_event) {\n      if (_event.message === 'red') {\n        this.audio.sfx.correct.play();\n        this.modal.item(count++);\n        if (count >= this.length) count = 0;\n      } else {\n        this.audio.sfx.incorrect.play();\n      }\n    });\n\n    this.respond('close', function (_event) {\n      if (!this.modal.is(_event.target)) return;\n      this.screen.runner.restart();\n    });\n  });\n\n  this.screen('floating-weed', function () {\n    var count = 0;\n\n    this.on('ui-open', function (_event) {\n      if (!this.is(_event.target)) return;\n      this.length = this.modal.reveal.find('li').length;\n    });\n\n    this.respond('select', function (_event) {\n      if (!_event.behaviorTarget.is('li')) return;\n      this.audio.sfx.correct.play();\n      this.modal.item(count++);\n      if (count >= this.length) count = 0;\n    });\n  });\n\n  this.screen('four-generations', function () {\n    this.on('ui-open', function () {\n      this.deselect(this.selectableReveal.reveal.find('li'));\n    });\n\n    this.on('audio-ended', function (_event) {\n      if (this.audio.voiceOver.lifespan === _event.target) {\n        this.selectableReveal.reveal.item(4);\n      }\n    });\n  });\n\n  this.screen('flip', function () {\n    this.next = function () {\n      this.game.quit.okay();\n    };\n\n    this.on('animationend', function (_event) {\n      if (!this.flipContainer.is(_event.target)) return;\n      this.find('.pupa').addClass('SHAKE');\n      this.screen.audio.sfx.shake.play();\n    });\n\n    this.complete = function () {\n      var eventCategory = (['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')']).join(' ');\n\n      ga('send', 'event', eventCategory, 'complete');\n\n      pl.game.report.flip(this, {\n        name: 'flip',\n        gameData: {id: this.game.id()}\n      });\n\n      return this.proto();\n    };\n  });\n\n  this.exit = function () {\n    var screen, eventCategory;\n\n    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n    eventCategory = (['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')']).join(' ');\n\n    ga('send', 'event', eventCategory, 'quit');\n\n    return this.proto();\n  };\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./monarch/source/js/index.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n\tthis.on('ready', function (_e) {\n\t\tif(!this.is(_e.target)) return;\n\n\t\tif(this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\tthis.splash();\n\t\t}\n\t});\n\n\tthis.splash = function() {\n\t\tthis.close(this.game.loader);\n\n\t\tif(this.game.hasClass('iOS')) {\n\t\t\tthis.open();\n\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t} else {\n\t\t\tthis.game.title.open();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen = this.proto();\n\n\t\tif (nextScreen) {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t\tthis.game.audio.sfx.button.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.complete = function () {\n\t\tthis.game.audio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.startGame = function() {\n\t\tif(!this.hasClass('FINISHED')) return;\n\t\tthis.game.addClass('STARTED');\n\t\tthis.delay('2.5s', function() {\n\t\t\tthis.next();\n\t\t});\n\t};\n\n\tthis.on('animationend', function(_e) {\n\t\tif(!this.ball.is(_e.target)) return;\n\t\tthis.addClass('FINISHED');\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test (_env) {\n\tif (window.parent === window) {\n\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t} else {\n\t\tdocument.domain = 'changemyworldnow.com';\n\t}\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}