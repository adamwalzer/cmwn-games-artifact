$white: #fff;
$spinner-color: rgba(255,255,255,0.5);

* {
	box-sizing: border-box;
}

html, body {
	margin: 0;
	padding: 0;
	height: 100%;
	overflow: hidden;
	user-select: none;
	cursor: default;
}

html {
	font-family: "Source Sans Pro", "Helvetica Neue", Helvetica, sans-serif;
}

body {
	position: relative;
	width: 960px;
	margin: auto;
	font-size: 20px;
	background-size: cover;

	.background-component {
		opacity: 0;
		transition: opacity .5s;
		position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		background-size: cover;
		background-position: center center;
		background-repeat: no-repeat;

		&.black {
			opacity: 1;
		}
	}

	&.fire > .background-component.fire,
	&.forrest > .background-component.forrest {
		opacity: 1;
	}
}

button {
	margin: 0;
	padding: 0;
	border: none;

	font-family: inherit;
	font-size: inherit;
	color: transparent;
	background-color: transparent;
	outline: none;
	cursor: pointer;

	background-image: url(../media/_Buttons/BU_1.png);
	background-size: auto 500px;
	background-position: left top;

	&.close {
		width: 40px;
		height: 40px;
		background-position: -420px -95px;
		position: absolute;
		right: 0;
		top: 0;
		margin: 5px;
		z-index: 2;

		&:hover {
			background-position: -420px -347px;
		}
	}

	&.next-screen,
	&.prev-screen {
		width: 100px;
		height: 125px;
	}

	&.next-screen {
		background-position: -300px -50px;

		&:hover {
			background-position: -300px -304px;
		}
	}

	&.prev-screen {
		background-position: -190px -50px;

		&:hover {
			background-position: -190px -304px;
		}
	}

	&.reveal-close {
		width: 60px;
		height: 45px;
		background-position: -500px -90px;

		&:hover {
			background-position: -500px -343px;
		}
	}

	&.quit-yes {
		width: 95px;
		height: 70px;
		background-position: -600px -75px;

		&:hover {
			background-position: -600px -328px;
		}
	}

	&.quit-no {
		width: 95px;
		height: 70px;
		background-position: -730px -75px;

		&:hover {
			background-position: -730px -328px;
		}
	}
}

h2 {
	font-size: 40px;
}

h3 {
	font-size: 30px;
	margin: 0;
}

p {
	font-size: 28px;
	margin: 0;
}

img.background {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
}

.spinner {
	position: relative;
	width: 60%; height: 60%;
	animation: pulse 0.5s infinite;
	background: $spinner-color;
	border-radius: 50px;

}

.spinner > .spinner {
	position: absolute;
	top: 20%; left: 20%;
}

.spinner > .spinner > .spinner {

}

#loader {
	transition: opacity 0.5s;
	opacity: 0;
	color: $white;
}

#loader.OPEN {
	opacity: 1;
}

#loader .group > .spinner {
	width: 80px; height: 80px;
	margin: auto;
}

.canvas-src { display: none; }

.screen {
	position: absolute;
	top: 0; bottom: 0;
	left: 0; right: 0;
	opacity: 0;
	display: none;
	transition: opacity 1s, transform 0.5s;
	transform: translateX(100%);
}

.screen.last {}

.screen.OPEN {
	opacity: 1;
	transform: translateX(0);
}

.screen.READY {
	display: block;
}

.screen.LEAVE {
	opacity: 1;
	transform: translateX(-100%);
}

	.screen .next-screen,
	.screen .prev-screen {
		position: absolute;
		display: block;
		bottom: 1%;

		z-index: 2;
	}

	.screen .next-screen {
		margin-right: 5px;
		right: 0;
		opacity: 0;
		transition: opacity 1s, transform 1s;
	}

	.screen.GATED .next-screen {
		opacity: 0;
		cursor: default;
	}

	.DEMO .screen .next-screen,
	.screen.COMPLETE .next-screen,
	.DEMO .screen.dress.SFX .reveal-close,
	.DEMO .screen.dress.VOICE-OVER .reveal-close {
		opacity: 1;
		cursor: pointer;
	}

	.DEMO .screen.alarm.VOICE-OVER .push-down,
	.DEMO .screen.who.VOICE-OVER ul,
	.DEMO .screen.triangle.VOICE-OVER ul,
	.DEMO .screen.dress.SFX .reveal-close,
	.DEMO .screen.dress.VOICE-OVER .reveal-close {
		pointer-events: auto;
	}

	.screen .next-screen:hover {
		
	}

	.screen .prev-screen {
		margin-left: 5px;
		left: 0;
		
	}
	
	.screen .prev-screen:hover {
		
	}

.screen {
	&.no-frame {
		color: #fff;

		.frame {
			text-align: center;
		}
	}
}

// the following css is specific to this game

#title {
	.prev-screen {
		display: none;
	}

	.next-screen {
		width: 175px;
		height: 240px;
		right: 20px;
		bottom: 0;
		background-position: 0px 0px;

		&:hover {
			background-position: 0px 249px;
		}
	}

	.title-component {
		margin: 0;

		img {
			position: absolute;

			&:nth-of-type(1) {
				width: 960px;
				left: 0;
				bottom: 0;
			}

			&:nth-of-type(2) {
				width: 340px;
				left: 0;
				bottom: 0;
			}

			&:nth-of-type(3) {
				width: 600px;
				left: 180px;
				top: 0;
			}
		}
	}
}

.screen.chemical {
	img {
		position: absolute;

		&:nth-of-type(1) {
			width: 720px;
			left: 120px;
			top: 20px;
		}

		&:nth-of-type(2) {
			width: 450px;
			left: 80px;
			top: 50px;
		}

		&:nth-of-type(3) {
			width: 80px;
			left: 500px;
			top: 220px;
		}
	}

	h2 {
		position: absolute;
		left: 600px;
		top: 260px;
		color: #fff;
		text-align: center;
		margin: 0;
		font-size: 56px;
		line-height: 1.2;
	}

	&.OPEN {
		$items: flame equal text;
		$animations: zoomInUp fadeInRightMedium fadeIn;

		@for $i from 1 through 3 {
			$item: nth($items,$i);

			.#{$item} {
				animation-name: nth($animations,$i);
				animation-play-state: paused;
			}

			&.#{to-upper-case($item)} .#{$item} {
				animation-play-state: running;
			}
		}
	}
}

.screen.fuel-oxygen {
	img {
		position: absolute;

		&:nth-of-type(1) {
			width: 200px;
			left: 120px;
			top: 160px;
		}

		&:nth-of-type(2) {
			width: 60px;
			left: 320px;
			top: 150px;
		}

		&:nth-of-type(3) {
			width: 200px;
			left: 380px;
			top: 150px;
		}

		&:nth-of-type(4) {
			width: 60px;
			left: 570px;
			top: 160px;
		}

		&:nth-of-type(5) {
			width: 300px;
			left: 600px;
			top: 30px;
		}

		&:nth-of-type(6) {
			width: 720px;
			left: 120px;
			top: 360px;
		}
	}

	&.OPEN {
		$items: wood plus o2 equal fire;
		$animations: bounceInDown fadeInRightMedium fadeInDown fadeInRightMedium zoomInUp fadeIn;

		@for $i from 1 through 5 {
			$item: nth($items,$i);

			.#{$item} {
				animation-name: nth($animations,$i);
				animation-play-state: paused;
			}

			&.#{to-upper-case($item)} .#{$item} {
				animation-play-state: running;
			}
		}
	}
}

.screen.forrest {
	div {
		position: absolute;
		left: 0;
		bottom: 0;
		width: 100%;
		padding: 40px;
		text-align: center;
	}

	&.OPEN {
		div {
			animation-name: fadeInUp;

			p {
				animation-name: fadeIn;
				animation-delay: 1s;
			}
		}
	}
}

.screen.alarm {
	img {
		position: absolute;

		&:nth-of-type(1) {
			width: 780px;
			left: 90px;
			top: 10px;
		}

		&:nth-of-type(2) {
			width: 280px;
			left: 340px;
			top: 120px;
		}

		&:nth-of-type(3) {
			width: 960px;
			left: 0px;
			bottom: -100px;
		}
	}

	p {
		position: absolute;
		left: 0;
		top: 80px;
		width: 100%;
		color: #fff;
		text-align: center;
		margin: 0;
	}

	.push-down {
		position: absolute;
		width: 148px;
		height: 140px;
		left: 410px;
		top: 250px;
		background-position: -30px -140px;
		background-size: 400px auto;

		&:hover {
			background-position: -234px -140px;
		}
	}

	.next-screen {
		display: none;
	}

	&.VOICE-OVER:not(.COMPLETE) {
		.push-down {
			pointer-events: none;
		}
	}

	&.OPEN {
		img {

			&:nth-of-type(3) {
				animation-name: fadeInUp;
			}
		}
	}
}

.screen.who {
	.frame-component {
		&:nth-of-type(1) {
			img {
				position: absolute;
				width: 840px;
				left: 60px;
				top: 10px;
			}

			.multiple-choice-component {
				ul {
					margin: 100px 0 0 0;
					padding: 0 0 0 40px;
					display: flex;
					justify-content: center;

					li {
						list-style: none;
						height: 360px;
						background-size: auto 100%;
						background-position: left top;

						&:hover {
							background-position: right top;
						}

						&:nth-of-type(1) {
							width: 175px;
							background-position: left 12px;

							&:hover {
								background-position: right 12px;
							}
						}

						&:nth-of-type(2) {
							width: 171px;
							background-position: left 23px;

							&:hover {
								background-position: right 23px;
							}
						}

						&:nth-of-type(3) {
							width: 200px;
						}

						&:nth-of-type(4) {
							width: 252px;
							margin-left: -30px
						}
					}
				}
			}

			&.OPEN {
				.multiple-choice-component {
					ul {
						li {
							animation-name: fadeInRightBig;

							&:nth-of-type(1) {
								animation-delay: 3s;
							}

							&:nth-of-type(2) {
								animation-delay: 4s;
							}

							&:nth-of-type(3) {
								animation-delay: 5s;
							}

							&:nth-of-type(4) {
								animation-delay: 7s;
							}
						}
					}
				}
			}
		}

		&:nth-of-type(2) {
			> img {
				position: absolute;
				left: 110px;
				top: 100px;
				height: 360px;
				z-index: 1;
			}

			div {
				position: absolute;
				left: 180px;
				top: 180px;
				padding: 40px 40px 40px 100px;
				font-size: 30px;
				text-align: center;
				width: 600px;
			}

			&.OPEN {
				>img {
					animation-name: zoomIn;
					animation-delay: 1s;
				}

				div {
					animation-name: fadeInRightBig;
				}
			}
		}
	}

	&.VOICE-OVER:not(.COMPLETE) {
		ul {
			pointer-events: none;
		}
	}
}

.screen.men-and-women {
	> img {
		position: absolute;

		&:nth-of-type(1) {
			width: 840px;
			left: 60px;
			top: 10px;
		}

		&:nth-of-type(2) {
			width: 840px;
			left: 60px;
			bottom: 213px;
		}
	}

	div {
		position: absolute;
		left: 0;
		bottom: 0;
		width: 100%;
		height: 226px;
		padding: 30px 0 20px;
		text-align: center;
		font-size: 36px;
	}

	&.OPEN {
		> img {
			&:nth-of-type(2) {
				animation-name: zoomIn;
			}
		}
	}
}

.screen.triangle {
	display: flex;

	img.title {
		width: 740px;
	}

	.draggables {
		margin: 0;
		padding: 10px;
		background-size: 100% 100%;
		width: 240px;
		display: inline-block;
		vertical-align: middle;

		li {
			list-style: none;

			div {
				height: 40px;
				background-size: auto 100%;
				background-repeat: no-repeat;
				background-position: center center;

				&.COMPLETE,
				&.PLUCKED {
					opacity: 0;
				}
			}
		}
	}

	.dropzone-component {
		display: inline-block;
		vertical-align: middle;

		.area {
			position: relative;
			border: none;
			width: 400px;
			height: 360px;
			margin-top: 40px;

			&:hover {
				box-shadow: none;
			}

			img {
				position: absolute;
				left: 0;
				top: 2px;
				width: 100%;
				height: 100%;
				transition: opacity .5s;
				opacity: 0;

				&.grey-triangle {
					top: 0;
					opacity: 1;
				}

				&.OPEN {
					opacity: 1;
				}
			}
		}

		&.COMPLETE {
			.area {

				img {

					&.side,
					&.grey-trianlge {
						opacity: 0;
					}

					&.color-triangle {
						opacity: 1;
					}
				}
			}
		}
	}

	&.VOICE-OVER {
		ul {
			pointer-events: none;
		}
	}
}

#break-triangle.screen {
	color: #fff;
	text-align: center;

	p {
		margin: 10px 0;
	}

	.images {
		position: relative;
		margin: 0 auto;
		width: 400px;
		height: 360px;
	}

	img {
		position: absolute;
		left: 0;
		top: 0;
		width: 400px;
		margin: 0;
	}

	h2 {
		margin: 0;
	}

	$items: fuel heat air;

	@for $i from 1 through 3 {
		$item: nth($items,$i);
		&.#{to-upper-case($item)} .#{$item} {
			animation-name: pulse;
		}
	}

	&.OPEN {
		.images {
			animation-name: vanishOut;
			animation-delay: 9s;
		}
	}
}

.screen.ladder {

	> img {
		position: absolute;
		left: 190px;
		top: 100px;
		height: 360px;
		z-index: 1;
	}

	div {
		position: absolute;
		left: 180px;
		top: 180px;
		padding: 40px 40px 40px 240px;
		font-size: 30px;
		text-align: center;
		width: 600px;
		margin: 0;
	}

	&.OPEN {
		>img {
			animation-name: zoomIn;
			animation-delay: 1s;
		}

		div {
			animation-name: fadeInRightBig;
		}
	}
}

.screen.dress {

	.slides-component {

		.female-male {

			img {
				width: 700px;
				margin: 10px 130px 0;
			}

			.items {
				height: auto;
				margin: 0;
				justify-content: center;
			}

			li {
				width: 183px;
				height: 384px;
				background-size: 1200px;
				background-repeat: no-repeat;
				margin: 0 25px;
				cursor: pointer;

			}

			$genders: female male;
			$animation-names: fadeInLeftBig fadeInRightBig;

			@for $i from 1 through 2 {
				li[pl-id=gender-#{nth($genders,$i)}] {
					background-position: -409px 402-(422*$i)+px;

					&:hover {
						background-position: -609px 402-(422*$i)+px;
					}
				}

				&.OPEN li:nth-of-type(#{$i}) {
					animation-name: nth($animation-names,$i);
				}
			}
		}

		.skin-color {

			img {
				width: 700px;
				margin: 10px 130px 0;
			}

			.items {
				height: auto;
				margin: 0;
				justify-content: center;
			}

			li {
				width: 183px;
				height: 384px;
				margin: 0 25px;
				cursor: pointer;
				// I'm using background-image here because it can be changed depending on choices made in previous frames.
				background-image: url(../media/S_11/sprite_11.2.png);
				background-size: 1200px;
			}

			@for $i from 1 through 3 {
				li:nth-of-type(#{$i}) {
					background-position: #{391-(400*$i)+px} -20px;

					&:hover {
						background-position: #{191-(400*$i)+px} -20px;
					}
				}

				&.OPEN li:nth-of-type(#{$i}) {
					animation-name: lightSpeedIn;
					animation-delay: .5*$i+s;
				}
			}
		}

		.need {
			background-size: cover;

			.frame {
				width: 800px;
				text-align: center;
			}

			img {
				width: 700px;
				margin: 10px auto;
				display: block;

				&.hidden {
					display: none;
				}
			}

			.draggables {
				position: relative;
				margin: 20px 0 0;
				padding: 10px;
				background-size: 100% 100%;
				width: 200px;
				height: 320px;
				vertical-align: middle;
				display: inline-flex;
				flex-wrap: wrap;
				justify-content: space-around;
				align-content: center;

				li {
					list-style: none;
					display: inline-flex;
					flex-direction: column;
					justify-content: space-around;
					margin-bottom: 10px;
				}

				.draggable {

					&.COMPLETE,
					&.PLUCKED {
						opacity: 0;
					}
				}
			}

			.dropzone-component {
				position: relative;
				display: inline-block;
				vertical-align: top;
				width: 240px;
				height: 440px;
				background-image: url(../media/S_12/img_12.14.png);
				background-size: 100% 100%;

				.area {
					position: absolute;
					left: 20px;
					top: 20px;
					width: 200px;
					height: 400px;
					border: none;

					&:hover {
						box-shadow: none;
					}

					div {
						position: absolute;
						left: 0;
						top: 0;
						width: 100%;
						height: 100%;
						opacity: 0;
						transition: opacity .5s;
						background-image: url(../media/S_12/sprite_12.5.png);
						background-repeat: no-repeat;
						background-size: 880px;

						&.show,
						&.body {
							opacity: 1;
						}

						$items:           bun tank straps body boots hood pants jacket gloves mask light  axe walkie punch camera;
						$background-lefts:  0  220     -3  220   437  656    -3    218    439  658     0  440    220   660    440;
						$background-tops: 405  405   1196    0   401  402   798    800    800  800  1600 1200   1589  1592   1592;

						@for $i from 1 through 15 {
							&.#{nth($items,$i)} {
								background-position: #{-1*nth($background-lefts,$i)+px} #{-1*nth($background-tops,$i)+px};
							}
						}
					}
				}
			}

			.modal-component {
				position: absolute;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				z-index: -1;
				opacity: 0;
				transition: opacity .5s, z-index 0s .5s;

				&.SELECTED {
					z-index: 1;
					opacity: 1;
					transition: opacity .5s;
				}

				> div {
					position: absolute;
					background-size: 100% 100%;
					width: 600px;
					height: 320px;
					left: 100px;
					top: 80px;
				}

				.reveal-component {
					position: static;

					.items {
						position: static;
					}

					li {
						position: absolute;
						left: 0;
						top: 0;
						width: 100%;
						height: 100%;
						padding: 60px 40px;
						transition: opacity .5s;

						&.SELECTED {
							opacity: 1;
						}

						&:before {
							content: "";
							display: block;
							margin: 10px auto;
							height: 50px;
							background-image: url(../media/S_12/sprite_12.4.png);
							background-size: 1320px;
						}

						$widths:          300 320 400 432 340 280 302  74 300 214 420 242;
						$background-lefts:  0   1   2   0   1   2   0   1   2   0   1   2;
						$background-tops:   0   0   0   1   1   1   2   2   2   3   3   3;

						@for $i from 1 through 12 {
							&:nth-of-type(#{$i}):before {
								width: nth($widths,$i)+px;
								background-position: #{-440*nth($background-lefts,$i)+px} #{-66*nth($background-tops,$i)+px}
							}
						}
					}
				}

				p {
					position: absolute;
					width: 520px;
					top: 185px;
					transform: translateY(-50%);
				}
				
				button {
					position: absolute;
					right: 40px;
					bottom: 40px;
					transition: opacity .5s;
				}
			}
		}
	}

	&.gender-male {

		.slides-component {

			.skin-color {

				img {
					width: 700px;
					margin: 10px 130px 0;
				}

				.selectable-component {

					.items {
						height: auto;
						margin: 0;
						justify-content: center;

						li {
							width: 183px;
							height: 384px;
							margin: 0 25px;
							// I'm using background-image here because it can be changed depending on choices made in previous frames.
							background-image: url(../media/S_11/sprite_11.2.png);
							background-size: 1200px;

							@for $i from 1 through 3 {
								&:nth-of-type(#{$i}) {
									background-position: #{391-(400*$i)+px} -442px;

									&:hover {
										background-position: #{191-(400*$i)+px} -442px;
									}
								}
							}
						}
					}
				}
			}

			.need {

				.dropzone-component {

					.area {

						div {
							background-image: url(../media/S_12/sprite_12.6.png);

							&.bun {
								opacity: 0;
							}

							$items:           tank straps boots hood pants jacket gloves mask light  axe walkie punch camera;
							$background-lefts: 660    446     5  225   443    662      1  658    -3  222    440   220    660;
							$background-tops:    0    797   401  402   401    402    800  800  1196 1195   1194   798   1200;

							@for $i from 1 through 13 {
								&.#{nth($items,$i)} {
									background-position: #{-1*nth($background-lefts,$i)+px} #{-1*nth($background-tops,$i)+px};
								}
							}
						}
					}
				}
			}
		}
	}

	&.skin-light {
		.slides-component {
			.need {
				.dropzone-component {
					.area {
						div {
							&.body {
								background-position: #{0px} #{0px};
							}
						}
					}
				}
			}
		}
	}

	&.skin-dark {
		.slides-component {
			.need {
				.dropzone-component {
					.area {
						div {
							&.body {
								background-position: #{-440px} #{0px};
							}
						}
					}
				}
			}
		}
	}

	&.SFX,
	&.VOICE-OVER {
		.reveal-close {
			pointer-events: none;
			opacity: 0;
		}
	}
}

.draggable {
	$items:           pants jacket hood boots mask gloves tank walkie axe light camera punch;
	$background-lefts:    0      1    2     3    0      1    2      3   0     1      2     3;
	$background-tops:     0      0    0     0    1      1    1      1   2     2      2     2;
	$widths:             65     85   58    65   70     72  104     50  70    52     80    70;
	$heights:            90     90   80    80   90     80   44     80  80    80     80    80;

	@for $i from 1 through 12 {
		&[pl-id=#{nth($items,$i)}] {
			display: inline-block;
			background-image: url(../media/S_12/sprite_12.3.png) !important;
			background-repeat: no-repeat;
			background-size: 500px;
			vertical-align: middle;
			width: nth($widths,$i)+px;
			height: nth($heights,$i)+px;
			background-position: #{-4-(122*nth($background-lefts,$i))+px} #{-3-(109*nth($background-tops,$i))+px};
		}
	}
}

.screen.flip {
	h2 {
		position: absolute;
		left: 0;
		top: 120px;
		margin: 0;
		width: 100%;
		color: #fff;
		text-align: center;
		font-size: 48px;
	}

	img {
		position: absolute;

		&.flip {
			left: 350px;
			top: 260px;
			width: 260px;
			margin: 0;
			display: block;
		}

		&.fire {
			width: 100%;
			left: 0;
			bottom: -100px;
		}
	}

	div.flip-text {
		position: absolute;
		left: 350px;
		top: 260px;
		width: 260px;
		font-size: 145px;
		color: transparent;
		margin: 0;
		display: block;
		animation: burn 1.5s linear infinite alternate;
		-moz-animation: none;
	}

	&.OPEN {
		.flip {
			animation-name: fadeInUp;
			animation-delay: 1s;
		}
	}
}

#quit {

	.frame {
		text-align: center;
		width: 960px;
		background-size: 100% 100%;
		padding: 30px;

		h2 {
			margin: 0;
		}

		button {
			margin: 10px;
		}
	}
}

canvas {
	position: absolute;
	z-index: -1;
}
