{"version":3,"sources":["webpack:///drought-out/ai.js","webpack:///webpack/bootstrap 51a0e1f44ad6892ae3fa","webpack:///./drought-out/source/js/components/audio-sequence/behavior.js","webpack:///./drought-out/source/js/components/reveal/behavior.js","webpack:///./drought-out/source/js/components/screen-basic/behavior.js","webpack:///./drought-out/source/js/components/screen-quit/behavior.js","webpack:///./drought-out/source/js/components/selectable-canvas-move/behavior.js","webpack:///./drought-out/source/js/components/selectable-reveal/behavior.js","webpack:///./drought-out/source/js/components/selectable/behavior.js","webpack:///./drought-out/source/js/components/title/behavior.js","webpack:///./drought-out/source/js/config.game.js","webpack:///./drought-out/source/js/index.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","component","sounds","this","on","_event","self","is","target","audio","find","next","i","play","start","length","item","_id","vo","index","select","eq","voiceOver","shouldProceed","state","STATE","VOICE_OVER","demoMode","nextScreen","buttonSound","proto","util","resolvePath","leave","open","prev","prevScreen","screen","close","fxSound","sfx","startAudio","hasOwnProperty","entities","forEach","_entity","stop","timeoutID","clearTimeout","isReady","properties","gameClass","addClass","requiredQueue","complete","removeClass","targetScope","isComplete","has","OPEN","button","LEAVE","pause","resume","init","okay","exit","cancel","canvas","Item","gameLoop","frame","_scope","items","_item","y","height","position","speed","margin","size","Basic","extend","image","$image","left","selected","_image","$","Point","create","backgroundSize","to","render","drawImage","getAttribute","naturalHeight","width","x","hover","naturalWidth","unhover","deselect","_type","ctx","node","content","scale","_canvas","_size","_scale","getContext","indexOf","onmousemove","_e","offset","cursor","transformScale","$els","absolutePosition","set","zoom","dec","math","reverseItems","every","isImageTarget","resize","clear","clearRect","draw","_obj","commands","cmd","apply","player","buffer","bctx","isRunning","document","createElement","canvasSize","bin","map","_i","_node","toArray","slice","reverse","Size","viewport","onResize","bind","eachFrame","onEachFrame","_point","pixel","getImageData","fillStyle","fillRect","data","behavior","returnValue","event","message","behaviorTarget","respond","stateMethod","selectState","Number","isInteger","reveal","entity","shouldSelect","_$target","hasClass","HIGHLIGHTED","_target","$target","closest","allowSelectAll","attr","config","screenSelector","componentDirectory","dimensions","ratio","shouldLoadComponentStyles","attachScreen","cb","selectScreen","incorrect","highlight","selectable","unhighlight","require","iosSplash","READY","splash","ready","infoWeedWater","background","yellow","green","red","openDoor","off","quit","delay","eventCategory","join","ga","report","flip","name","gameData","findOwn","scope","s","o","g","r","a","q","push","arguments","l","Date","getElementsByTagName","async","src","parentNode","insertBefore","window","title","loader","ball","startGame","test","_env","parent","location","href","domain"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAE,WACAE,GAAAJ,SACAK,QAAA,EAUA,OANAP,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,QAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBAqCA,OATAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAU,EAAA,UAGAV,oBAAA,KDMM,SAASI,OAAQD,QAASH,qBAE/BI,OAAOD,QAAUH,oBAAoB,KAKhC,SAASI,OAAQD,SEnDvBQ,GAAGC,KAAKC,UAAU,iBAAkB,WAClC,GAAIC,OAEJC,MAAKC,GAAG,QAAS,SAAUC,QACzB,GAAIC,MAAOH,IAENA,MAAKI,GAAGF,OAAOG,UAEpBN,OAASC,KAAKM,MAAMC,KAAK,UAEzBP,KAAKM,MAAML,GAAG,QAAS,WACrB,GAAIO,MAAOT,OAAOI,KAAKM,IACnBD,OAAMA,KAAKE,YAInBV,KAAKW,MAAQ,WACXX,KAAKS,EAAI,EACLV,OAAOa,QAAQb,OAAO,GAAGW,WF2D3B,SAASrB,OAAQD,SG7EvBQ,GAAGC,KAAKC,UAAU,SAAU,WAE1BE,KAAKa,KAAO,SAAUC,KACpB,GAAIC,IAAIC,KAEW,iBAARF,MACTd,KAAKiB,OAAOjB,KAAKO,KAAK,MAAMW,GAAGJ,MAC/Bd,KAAKM,MAAMa,UAAUL,KAAKJ,QACF,gBAARI,MACZd,KAAKc,OACPd,KAAKiB,OAAOjB,KAAKc,MAEbd,KAAKM,QACPU,MAAQhB,KAAKc,KAAKE,QAClBD,GAAKf,KAAKM,MAAMa,UAAUL,MAAQd,KAAKM,MAAMa,UAAUH,OAEnDD,IAAIA,GAAGL,UAMnBV,KAAKW,MAAQ,gBHoFT,SAAStB,OAAQD,SI1GvBQ,GAAGC,KAAKC,UAAU,eAAgB,WAEhCE,KAAKoB,cAAgB,WACnB,OAAQpB,KAAKqB,MAAMrB,KAAKsB,MAAMC,aAAevB,KAAKH,KAAK2B,UAGzDxB,KAAKQ,KAAO,WACV,GAAIiB,YAAYC,WAWhB,OATAD,YAAazB,KAAK2B,QAClBD,YAAc9B,GAAGgC,KAAKC,YAAY7B,KAAM,yBAEpCyB,aACFzB,KAAK8B,QACLL,WAAWM,OACPL,aAAaA,YAAYhB,QAGxBe,YAGTzB,KAAKgC,KAAO,WACV,GAAIC,YAAYP,WAWhB,OATAO,YAAajC,KAAK2B,QAClBD,YAAc9B,GAAGgC,KAAKC,YAAY7B,KAAM,yBAEpCiC,aACFjC,KAAKkC,OAAOC,QACZF,WAAWF,OACPL,aAAaA,YAAYhB,QAGxBuB,YAGTjC,KAAKW,MAAQ,WACX,GAAIyB,SAAUpC,KAAKM,OAASN,KAAKM,MAAM+B,IAAI1B,KAW3C,OATAX,MAAKsC,aAEDF,SAASA,QAAQ1B,OACjBV,KAAKuC,eAAe,aACtBvC,KAAKwC,SAASC,QAAQ,SAASC,SAC1BA,SAAoC,kBAAlBA,SAAQ/B,OAAsB+B,QAAQ/B,UAIxDX,MAGTA,KAAK2C,KAAO,WAIV,MAHI3C,MAAK4C,WACPC,aAAa7C,KAAK4C,WAEb5C,KAAK2B,SAGd3B,KAAKC,GAAG,UAAW,SAAUC,QACtBF,KAAKI,GAAGF,OAAOG,UAEhBL,KAAK8C,SACP9C,KAAKW,QAGHX,KAAK+C,WAAWC,WAClBhD,KAAKH,KAAKoD,SAASjD,KAAK+C,WAAWC,aAGhChD,KAAKkD,eAAkBlD,KAAKuC,eAAe,mBAAqBvC,KAAKkD,cAActC,SACtFZ,KAAKmD,cAITnD,KAAKC,GAAG,WAAY,SAAUC,QACxBF,KAAK+C,WAAWC,WAClBhD,KAAKH,KAAKuD,YAAYpD,KAAK+C,WAAWC,WAGpChD,KAAK8C,SAAW9C,OAASE,OAAOmD,aAClCrD,KAAK2C,SAIT3C,KAAKC,GAAG,WAAY,SAAUC,QACxBF,KAAK+C,WAAWC,WAClBhD,KAAKH,KAAKuD,YAAYpD,KAAK+C,WAAWC,WAGpChD,KAAK8C,SAAW9C,OAASE,OAAOmD,aAClCrD,KAAK2C,SAIT3C,KAAKmD,SAAW,WACd,GAAI7C,MAEJ,KAAIN,KAAKsD,WAKT,MAHAhD,OAASN,KAAKM,OAASN,KAAKM,MAAMiD,IAAI,kBAAoBvD,KAAKM,MAAQN,KAAKH,KAAKS,MAEjFA,MAAM+B,IAAI3B,KAAK,kBACRV,KAAK2B,SAGd3B,KAAKC,GAAG,QAAS,WACXD,KAAKqB,MAAMrB,KAAKsB,MAAMkC,OAAOxD,KAAKW,aJkHpC,SAAStB,OAAQD,SK5NvBQ,GAAGC,KAAKC,UAAU,cAAe,WAE/BE,KAAK0B,YAAc,WACb1B,KAAKH,KAAKS,MAAM+B,IAAIoB,QAAQzD,KAAKH,KAAKS,MAAM+B,IAAIoB,OAAO/C,QAI7DV,KAAKC,GAAG,gBAAiB,SAAUC,QAC5BF,KAAKI,GAAGF,OAAOG,SAChBL,KAAKqB,MAAMrB,KAAKsB,MAAMoC,QACxB1D,KAAKiD,SAAS,eAIlBjD,KAAKC,GAAG,UAAW,SAAUC,QACtBF,KAAKI,GAAGF,OAAOG,UACpBL,KAAK0B,cACL1B,KAAKH,KAAKoD,SAAS,eACnBjD,KAAKoD,YAAY,aACjBpD,KAAKH,KAAK8D,OAAM,MAGlB3D,KAAKC,GAAG,WAAY,WAClBD,KAAKH,KAAKuD,YAAY,eACtBpD,KAAKH,KAAK+D,WAGZ5D,KAAK6D,KAAO,WACV7D,KAAKiD,SAAS,oBAGhBjD,KAAK8D,KAAO,WACV9D,KAAK0B,cACL1B,KAAKH,KAAKkE,QAGZ/D,KAAKgE,OAAS,WACZhE,KAAK0B,cACL1B,KAAK8B,YLoOH,SAASzC,OAAQD,SM1QvBQ,GAAGC,KAAKC,UAAU,yBAA0B,WAC1C,GAAImE,QAAQC,KAAMC,SAAUhE,KAAOH,IAEnCmE,WAEEC,MAAO,QAAAA,OAAUC,QAEfA,OAAOC,MAAM7B,QAAS,SAAU8B,OAC9B,GAAIC,GAAGC,MACPF,OAAMG,SAASF,GAAKD,MAAMI,MAE1BH,EAAID,MAAMG,SAASF,EAAID,MAAMK,OAC7BH,OAASF,MAAMM,KAAKJ,OAEH,EAAbD,EAAIC,SAAYF,MAAMG,SAASF,EAAsB,IAAlBH,OAAOI,cAKpDP,KAAOtE,GAAGkF,MAAMC,OAAO,WACrB/E,KAAK0E,SAAW,KAChB1E,KAAK6E,KAAO,KACZ7E,KAAK4E,OAAS,EACd5E,KAAKgF,MAAQ,KACbhF,KAAKiF,OAAS,KACdjF,KAAKkF,KAAO,EACZlF,KAAKmF,UAAW,EAEhBnF,KAAK6D,KAAO,SAAUuB,QAQpB,MAPApF,MAAKiF,OAASI,EAAED,QAChBpF,KAAKgF,MAAQI,OAEbpF,KAAK0E,SAAW9E,GAAG0F,MAAMC,SACzBvF,KAAKwF,gBAAkB,IAAK,KAAKC,GAAG,QACpCzF,KAAK6E,MAAQ,IAAK,KAAKY,GAAG,QAEnBzF,MAGTA,KAAK0F,OAAS,WACZ,OACEC,WAAY3F,KAAKgF,MAAOhF,KAAKkF,KAAMlF,KAAKgF,MAAMY,aAAa,OAAS5F,KAAKgF,MAAMa,cAAgB,GAAI7F,KAAK6E,KAAKiB,MAAO9F,KAAK6E,KAAKJ,OAAQzE,KAAK0E,SAASqB,EAAG/F,KAAK0E,SAASF,EAAGxE,KAAKwF,eAAeM,MAAO9F,KAAKwF,eAAef,UAI3NzE,KAAKgG,MAAQ,WACNhG,KAAKmF,WAAUnF,KAAKkF,KAAOlF,KAAKgF,MAAMiB,aAAe,IAG5DjG,KAAKkG,QAAU,WACRlG,KAAKmF,WAAUnF,KAAKkF,KAAO,IAGlClF,KAAKiB,OAAS,WACZjB,KAAKmF,UAAW,EAChBnF,KAAKkF,KAAiC,EAA1BlF,KAAKgF,MAAMiB,aAAmB,GAG5CjG,KAAKmG,SAAW,WACdnG,KAAKmF,UAAW,EAChBnF,KAAKkF,KAAO,GAGdlF,KAAKI,GAAK,SAAUgG,OAClB,MAAOf,GAAErF,KAAKgF,OAAO5E,GAAGgG,QAG1BpG,KAAKV,GAAK,WACR,MAAOU,MAAKiF,OAAO3F,QAIvB2E,QAEEoC,IAAK,KACLC,KAAM,KACNC,QAAS,KACTC,MAAO,EAEP3C,KAAM,QAAAA,MAAU4C,QAASC,MAAOC,QAC9B,GAAI9B,KAEJA,MAAO8B,OAASD,MAAMF,MAAMG,QAAUD,MAEtC1G,KAAKsG,KAAOG,QACZzG,KAAKqG,IAAMI,QAAQG,WAAW,MAC9B5G,KAAKwG,MAAQG,QAAU,GAEjB9B,KAAKgC,QAAQ,UACjBJ,QAAQX,MAAQjB,KAAKiB,MACrBW,QAAQhC,OAASI,KAAKJ,QAGxBzE,KAAKqG,IAAIG,MAAMG,OAAQA,QAEvB3G,KAAKsG,KAAKQ,YAAc,SAAUC,IAChC,GAAIC,QAAQC,OAAQT,KAEpBA,OAAQrG,KAAKN,KAAKqH,iBAAiBnB,EACnCiB,OAAS7G,KAAKgH,KAAKC,mBAAmBZ,MAAM,EAAIA,OAChDS,OAASrH,GAAG0F,MAAMC,SAAS8B,IAAIN,GAAGhB,EAAGgB,GAAGvC,GACrCgC,MAAMA,MAAQrG,KAAKN,KAAKyH,MACxBC,IAAIP,QACJQ,KAAK,SAERrH,KAAKsH,aAAaC,MAAM,SAAUnD,OAChC,MAAIpE,MAAKwH,cAAcpD,MAAO0C,SAC5B1C,MAAMyB,SACC,IAGTzB,MAAM2B,WACC,OAKb0B,OAAQ,QAAAA,QAAUlB,MAAOC,QACvB,GAAI9B,KAEJA,MAAO8B,OAASD,MAAMF,MAAMG,QAAUD,MAEtC1G,KAAKsG,KAAKR,MAAQjB,KAAKiB,MACvB9F,KAAKsG,KAAK7B,OAASI,KAAKJ,OACxBzE,KAAKwG,MAAQG,QAAU,EAEvB3G,KAAKqG,IAAIG,MAAMG,OAAQA,SAGzBkB,MAAO,QAAAA,SACL7H,KAAKqG,IAAIyB,UAAU,EAAG,EAAG9H,KAAKsG,KAAKR,MAAQ9F,KAAKwG,MAAOxG,KAAKsG,KAAK7B,OAASzE,KAAKwG,QAGjFuB,KAAM,QAAAA,MAAUC,MACd,GAAIC,UAAUC,GAEdD,UAAWD,KAAKtC,QAEhB,KAAKwC,MAAOD,UACmB,kBAAlBjI,MAAKqG,IAAI6B,MACpBlI,KAAKqG,IAAI6B,KAAKC,MAAMnI,KAAKqG,IAAK4B,SAASC,QAK7ClI,KAAKsE,MAAQ,KACbtE,KAAKoI,OAAS,KACdpI,KAAKiE,OAAS,KACdjE,KAAKqI,OAAS,KACdrI,KAAKsI,KAAO,KACZtI,KAAKuI,WAAY,EAEjBvI,KAAK6D,KAAO,WACV7D,KAAKqI,OAASG,SAASC,cAAc,UACrCzI,KAAKsI,KAAOtI,KAAKqI,OAAOzB,WAAW,OAIrC5G,KAAKC,GAAG,QAAS,SAAUC,QACzB,GAAIwI,YAAY5C,MAAOrB,MAGlBzE,MAAKI,GAAGF,OAAOG,UAEpBL,KAAKqI,OAAOvC,MAAQA,MAAQ9F,KAAK8F,QACjC9F,KAAKqI,OAAO5D,OAASA,OAASzE,KAAKyE,SAEnCzE,KAAKsE,MAAQtE,KAAK2I,IAAIpI,KAAK,OACxBqI,IAAI,SAAUC,GAAIC,OACjB,GAAIjI,MAAOqD,KAAKqB,SAAS1B,KAAKiF,MAM9B,OAJAjI,MAAK6D,SAASqB,EAAI,GAAM,IAAM8C,IAAM/C,MAAQ,KAC5CjF,KAAK6D,SAASF,EAAIC,OAAU,IAAMoE,IAAM,EAAIpE,QAC5C5D,KAAK8D,OAAe,EAALkE,GAAU,EAAI,GAAK,EAE3BhI,OAERkI,UAEH/I,KAAKyH,aAAezH,KAAKsE,MAAM0E,QAAQC,UAEvCP,WAAa9I,GAAGsJ,KACb3D,SACA8B,IAAIvB,MAAOrB,QAEdR,OAAOJ,KAAK7D,KAAKiE,OAAO,GAAIyE,WAAY1I,KAAKH,KAAKyH,MAElDtH,KAAKH,KAAKsJ,SAASC,SAASpJ,KAAKH,KAAKwJ,KAAK,WACzCpF,OAAO2D,OAAOc,WAAY1I,KAAKsH,YAInCtH,KAAKW,MAAQ,WACXX,KAAKuI,WAAY,EACjBvI,KAAKsJ,UAAUtJ,KAAKuJ,aAEpBvJ,KAAKsE,MAAM7B,QAAQ,SAAU8B,OAC3BA,MAAM4B,cAIVnG,KAAK2C,KAAO,WACV3C,KAAKsJ,UAAUtJ,KAAKuJ,aAAa,IAGnCvJ,KAAKuJ,YAAc,WACZvJ,KAAKuI,YAEVtE,OAAO4D,QAEP1D,SAASC,MAAMpE,MAEfA,KAAKsE,MAAM7B,QAAQ,SAAU8B,OAC3BN,OAAO8D,KAAKxD,WAIhBvE,KAAK2H,cAAgB,SAAUpD,MAAOiF,QACpC,GAAIC,MAUJ,OARAzJ,MAAKsI,KAAKR,UAAU,EAAG,EAAG9H,KAAKqI,OAAOvC,MAAO9F,KAAKqI,OAAO5D,QACzDzE,KAAKsI,KAAK3C,UAAUpB,MAAMS,MAAO,EAAGT,MAAMS,MAAMY,aAAa,OAASrB,MAAMS,MAAMa,cAAgB,GAAItB,MAAMM,KAAKiB,MAAOvB,MAAMM,KAAKJ,OAAQF,MAAMG,SAASqB,EAAGxB,MAAMG,SAASF,EAAGD,MAAMiB,eAAeM,MAAOvB,MAAMiB,eAAef,QAChOgF,MAAQzJ,KAAKsI,KAAKoB,aAAaF,OAAOzD,EAAGyD,OAAOhF,EAAG,EAAG,GAEtDxE,KAAKsI,KAAKqB,UAAY,QACtB3J,KAAKsI,KAAKsB,SAASJ,OAAOzD,EAAGyD,OAAOhF,EAAG,EAAG,GAGnCiF,MAAMI,KAAK,GAAK,GAGzB7J,KAAK8J,SAAS,SAAU,WACtB,GAAI9C,QAAQC,OAAQT,MAAOuD,aAAc,CAsBzC,OApBAvD,OAAQxG,KAAKH,KAAKqH,iBAAiBnB,EACnCiB,OAAShH,KAAKmH,KAAKC,mBAAmBZ,MAAM,EAAIA,OAChDS,OAASjH,KAAKgK,MAAM/C,OACjBT,MAAMA,MAAQxG,KAAKH,KAAKyH,MACxBC,IAAIP,QACJQ,KAAK,SAERxH,KAAKyH,aAAaC,MAAM,SAAUnD,OAChC,MAAIpE,MAAKwH,cAAcpD,MAAO0C,SAC5B1C,MAAMtD,SACN8I,aACEE,QAAS1F,MAAMU,OAAO3F,KACtB4K,eAAgB3F,MAAMU,SAEjB,IAGF,IAGF8E,iBN8QL,SAAS1K,OAAQD,SO5gBvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAErCE,KAAKmK,QAAQ,SAAU,SAAUjK,QAC/B,GAAIc,OAAOoJ,WAEXpJ,OAAQd,OAAO+J,QACfG,YAAcpK,KAAK+C,WAAWsH,aAAe,SAEzCC,OAAOC,UAAUvJ,SAAWA,QAC9BhB,KAAKoK,aAAalK,OAAOgK,gBACzBlK,KAAKwK,OAAO3J,KAAKG,UAIrBhB,KAAKyK,OAAO,aAAc,WAExBzK,KAAK0K,aAAe,SAAUC,UAC5B,MAAIA,UAAS3I,OAAO4I,SAAS5K,KAAKsB,MAAMuJ,cAAqC,IAArBF,SAAS3J,SACvDhB,KAAKkC,OAAOb,MAAMrB,KAAKsB,MAAMC,aAGhC,QPqhBP,SAASlC,OAAQD,SQ1iBvBQ,GAAGC,KAAKC,UAAU,aAAc,WAE9BE,KAAK8J,SAAS,SAAU,SAAUgB,SAChC,GAAIC,SAASd,OAEb,IAAIjK,KAAKgK,OAIP,GAHAe,QAAU1F,EAAErF,KAAKgK,MAAM3J,QAAQ2K,QAAQ,MACvCf,QAAUc,QAAQzL,MAAQyL,QAAQ/J,QAE9BhB,KAAK0K,aAAaK,YAAa,EACjC,OACEd,gBACAC,eAAgBa,aAIpB/K,MAAK2B,MAAMmJ,QAGb,QAAO,IAGT9K,KAAK0K,aAAe,SAAUC,UAC5B,MAAI3K,MAAKiL,gBAAkBN,SAAS3I,OAAO4I,SAAS5K,KAAKsB,MAAMuJ,cAAqC,IAArBF,SAAS3J,SAC9EhB,KAAKkC,OAAOb,MAAMrB,KAAKsB,MAAMC,aAGhC,GAGTvB,KAAKW,MAAQ,WACXX,KAAKiL,eAA6D,mBAArCjL,MAAKkL,KAAK,2BRkjBrC,SAAS7L,OAAQD,SSjlBvBQ,GAAGC,KAAKC,UAAU,QAAS,eTulBrB,SAAST,OAAQD,SUvlBvBQ,GAAGC,KAAKsL,QACNC,eAAgB,UAChBC,mBAAoB,cACpBC,YACExF,MAAO,IACPyF,MAAO,GAAK,GAEdC,2BAA2B,KV8lBvB,SAASnM,OAAQD,QAASH,qBAO/BA,oBWxmBM,GX0mBNA,oBWxmBM,IX0mBNA,oBWzmBM,GX2mBNA,oBW1mBM,GX4mBNA,oBW3mBM,GX6mBNA,oBW5mBM,GX8mBNA,oBW7mBM,GX+mBNA,oBW9mBM,GXgnBNA,oBW/mBM,GXinBNA,oBWhnBM,GXknBNA,oBWhnBM,IXknBNA,oBWjnBM,IAEPW,GAAGC,KAAK,cAAe,WAErB,GAAIA,MAAOG,IAEXJ,IAAGC,KAAK4L,aAAe,SAAUC,IAC/BA,GAAGlM,KAAKK,MAGV,IAAI8L,cAAe,QAAfA,gBACF3L,KAAKmK,QAAQ,SAAU,SAAUjK,QAC/B,GAAIa,GAECb,QAAOgK,eAAe9J,GAAG,QAEkB,MAA5CF,OAAOgK,eAAegB,KAAK,cAC7BnK,GAAKf,KAAKM,MAAM+B,IAAIuJ,WAEpB5L,KAAK6L,UAAU3L,OAAOgK,gBACtBnJ,GAAKf,KAAK8L,WAAWxL,MAAMa,UAAUjB,OAAO+J,UAG1ClJ,IAAIA,GAAGL,UAGbV,KAAKC,GAAG,UAAW,SAAU8G,IACtB/G,KAAKI,GAAG2G,GAAG1G,SAEhBL,KAAK+L,YAAY/L,KAAKO,KAAK,IAAMP,KAAKsB,MAAMuJ,gBAIhD7K,MAAKkC,OAAO,QAAS,WACnBlC,KAAKC,GAAG,QAAS,SAAUC,QACpBF,KAAKI,GAAGF,OAAOG,UAEpBL,KAAKgM,QAAQ,SAEThM,KAAKH,KAAKoM,UAAU5K,MAAMrB,KAAKsB,MAAM4K,QAAQlM,KAAKH,KAAKoM,UAAUE,YAGvEnM,KAAKC,GAAG,eAAgB,SAAU8G,IACN,UAAtB1B,EAAE0B,GAAG1G,QAAQf,OAEZU,KAAKsD,YAAYtD,KAAKkD,cAAckJ,MAAM,cAInDpM,KAAKkC,OAAO,gBAAiB,WAC3BlC,KAAKsC,WAAa,WACXtC,KAAKM,QAGNN,KAAKH,KAAKwM,cAAc/L,OAC1BN,KAAKH,KAAKwM,cAAc/L,MAAMgM,WAAW3J,KAAK,QAEhD3C,KAAKM,MAAMgM,WAAW5L,OACtBV,KAAKM,MAAMa,UAAUT,WAIzBV,KAAKkC,OAAO,QAASyJ,cAErB3L,KAAKkC,OAAO,WAAY,WACtBlC,KAAKmK,QAAQ,SAAU,SAAUjK,QAC/B,GAAIa,IAAIsB,GASR,QAPkD,MAA9CnC,OAAOgK,eAAegB,KAAK,gBAC7BnK,GAAKf,KAAKM,MAAM+B,IAAIuJ,WAEpB5L,KAAK6L,UAAU3L,OAAOgK,gBACtBnJ,GAAKf,KAAKM,MAAMa,UAAUjB,OAAO+J,UAG3B/J,OAAO+J,SACf,IAAK,UACL,IAAK,WACL,IAAK,WACL,IAAK,YACL,IAAK,QACL,IAAK,UACL,IAAK,aACH5H,IAAMrC,KAAKM,MAAM+B,IAAIkK,MACrB,MACF,KAAK,gBACL,IAAK,WACL,IAAK,gBACL,IAAK,cACHlK,IAAMrC,KAAKM,MAAM+B,IAAImK,KACrB,MACF,KAAK,UACL,IAAK,UACL,IAAK,cACL,IAAK,cACHnK,IAAMrC,KAAKM,MAAM+B,IAAIoK,IAInB1L,IAAIA,GAAGL,OACP2B,KAAKA,IAAI3B,SAGfV,KAAKC,GAAG,UAAW,SAAU8G,IACtB/G,KAAKI,GAAG2G,GAAG1G,SAEhBL,KAAK+L,YAAY/L,KAAKO,KAAK,IAAMP,KAAKsB,MAAMuJ,gBAG9C7K,KAAKsC,WAAa,eAGpBtC,KAAKkC,OAAO,sBAAuByJ,cAEnC3L,KAAKkC,OAAO,gBAAiByJ,cAE7B3L,KAAKkC,OAAO,iBAAkByJ,cAE9B3L,KAAKkC,OAAO,SAAU,WACpBlC,KAAKmK,QAAQ,SAAU,SAAUjK,QAC/B,GAAIa,GAE4C,OAA5Cb,OAAOgK,eAAegB,KAAK,cAC7BnK,GAAKf,KAAKM,MAAM+B,IAAIuJ,WAEpB5L,KAAK6L,UAAU3L,OAAOgK,gBACtBnJ,GAAKf,KAAKM,MAAMa,UAAUjB,OAAO+J,UAG/BlJ,IAAIA,GAAGL,SAGbV,KAAKC,GAAG,UAAW,SAAU8G,IACtB/G,KAAKI,GAAG2G,GAAG1G,SAEhBL,KAAK+L,YAAY/L,KAAKO,KAAK,IAAMP,KAAKsB,MAAMuJ,kBAIhD7K,KAAKkC,OAAO,WAAY,WACtB,GAAIrB,MAAO,CAEXb,MAAK0M,SAAW,WACV1M,KAAKoB,kBACPpB,KAAKiB,SACLjB,KAAKwK,OAAO3J,KAAKA,MACjBb,KAAKM,MAAM+B,IAAIN,KAAKrB,SAIxBV,KAAKC,GAAG,UAAW,SAAU8G,IAC3B,GAAI5G,MAAOH,IAENA,MAAKI,GAAG2G,GAAG1G,UAEhBL,KAAKY,OAASZ,KAAKwK,OAAOjK,KAAK,MAAMK,OAErCZ,KAAKwK,OAAOlK,MAAMa,UAAUlB,GAAG,QAAS,WACtCE,KAAKG,MAAM+B,IAAIF,MAAMzB,OACrBP,KAAKgG,WACLtF,MAAQA,KAAO,GAAKV,KAAKS,SAGvBZ,KAAKsD,aAAYzC,KAAO,MAG9Bb,KAAKC,GAAG,oBAAqB,SAAU8G,IAChC/G,KAAKI,GAAG2G,GAAG1G,SAChBL,KAAKwK,OAAOlK,MAAMa,UAAUwL,IAAI,aAIpC3M,KAAKkC,OAAO,OAAQ,WAClBlC,KAAKQ,KAAO,WACVR,KAAKH,KAAK+M,KAAK9I,QAGjB9D,KAAKC,GAAG,UAAW,WACbD,KAAKM,OAASN,KAAKM,MAAM+B,KAC3BrC,KAAK6M,MAAM,OAAQ7M,KAAKM,MAAM+B,IAAI3B,KAAK2I,KAAKrJ,KAAKM,MAAM+B,QAI3DrC,KAAKmD,SAAW,WACd,GAAI2J,gBAAkB,OAAQ9M,KAAKH,KAAKP,KAAMU,KAAKV,KAAO,KAAOU,KAAKgB,QAAU,GAAK,KAAM+L,KAAK,IAShG,OAPAC,IAAG,OAAQ,QAASF,cAAe,YAEnClN,GAAGC,KAAKoN,OAAOC,KAAKlN,MAClBmN,KAAM,OACNC,UAAW9N,GAAIU,KAAKH,KAAKP,QAGpBU,KAAK2B,WAIhB3B,KAAK+D,KAAO,WACV,GAAI7B,QAAQ4K,aAOZ,OALA5K,QAASlC,KAAKqN,QAAQzN,GAAGC,KAAKsL,OAAO,kBAAoB,oBAAoBmC,QAC7ER,eAAkB,OAAQ9M,KAAKV,KAAM4C,OAAO5C,KAAO,KAAO4C,OAAOlB,QAAU,GAAK,KAAM+L,KAAK,KAE3FC,GAAG,OAAQ,QAASF,cAAe,QAE5B9M,KAAK2B,YXunBV,SAAStC,OAAQD,UYr1BvB,SAAUqB,EAAE8M,EAAEC,EAAEC,EAAEC,EAAEC,EAAElO,GAAGgB,EAAyB,sBAAEiN,EAAEjN,EAAEiN,GAAGjN,EAAEiN,IAAI,YAChEjN,EAAEiN,GAAGE,EAAEnN,EAAEiN,GAAGE,OAAOC,KAAKC,YAAYrN,EAAEiN,GAAGK,EAAE,EAAE,GAAIC,MAAOL,EAAEJ,EAAE9E,cAAc+E,GAC3E/N,EAAE8N,EAAEU,qBAAqBT,GAAG,GAAGG,EAAEO,MAAM,EAAEP,EAAEQ,IAAIV,EAAEhO,EAAE2O,WAAWC,aAAaV,EAAElO,IAC1E6O,OAAO9F,SAAS,SAAS,0CAA0C,MAEtEwE,GAAG,SAAU,gBAAiB,QAC9BA,GAAG,OAAQ,aZ41BL,SAAS3N,OAAQD,Sal2BvBQ,GAAGC,KAAKC,UAAU,oBAAqB,WAEtCE,KAAKC,GAAG,QAAS,SAAU8G,IACtB/G,KAAKI,GAAG2G,GAAG1G,SAEZL,KAAKH,MAAQG,KAAKH,KAAK0O,MAAMlN,MAAMrB,KAAKsB,MAAM4K,QAChDlM,KAAKmM,WAIPnM,KAAKmM,OAAS,WACbnM,KAAKmC,MAAMnC,KAAKH,KAAK2O,QAElBxO,KAAKH,KAAK+K,SAAS,QACrB5K,KAAK+B,OACL/B,KAAKyO,KAAK5B,MAAM,EAAG7M,KAAKyO,KAAK1M,OAE7B/B,KAAKH,KAAK0O,MAAMxM,QAIlB/B,KAAKQ,KAAO,WACX,GAAIiB,YAAazB,KAAK2B,OAQtB,OANIF,cACHzB,KAAKkC,OAAOJ,QACZL,WAAWM,OACX/B,KAAKH,KAAKS,MAAM+B,IAAIoB,OAAO/C,QAGrBe,YAGRzB,KAAKmD,SAAW,WAEf,MADAnD,MAAKH,KAAKS,MAAM+B,IAAI3B,KAAK,kBAClBV,KAAK2B,SAGb3B,KAAK0O,UAAY,WACZ1O,KAAK4K,SAAS,cAClB5K,KAAKH,KAAKoD,SAAS,WACnBjD,KAAK6M,MAAM,OAAQ,WAClB7M,KAAKQ,WAIPR,KAAKC,GAAG,eAAgB,SAAS8G,IAC5B/G,KAAKyO,KAAKrO,GAAG2G,GAAG1G,SACpBL,KAAKiD,SAAS,iBb02BV,SAAS5D,OAAQD,Uc15BtB,QAASuP,MAAMC,MACXN,OAAOO,SAAWP,OACrBA,OAAOQ,SAASC,KAAO,oCAEvBvG,SAASwG,OAAS","file":"drought-out/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(10);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.component('audio-sequence', function () {\n\t  var sounds;\n\t\n\t  this.on('ready', function (_event) {\n\t    var self = this;\n\t\n\t    if (!this.is(_event.target)) return;\n\t\n\t    sounds = this.audio.find('.audio');\n\t\n\t    this.audio.on('ended', function () {\n\t      var next = sounds[self.i++];\n\t      if (next) next.play();\n\t    });\n\t  });\n\t\n\t  this.start = function () {\n\t    this.i = 1;\n\t    if (sounds.length) sounds[0].play();\n\t  };\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t  this.item = function (_id) {\n\t    var vo, index;\n\t\n\t    if (typeof _id === 'number') {\n\t      this.select(this.find('li').eq(_id));\n\t      this.audio.voiceOver[_id].play();\n\t    } else if (typeof _id === 'string') {\n\t      if (this[_id]) {\n\t        this.select(this[_id]);\n\t\n\t        if (this.audio) {\n\t          index = this[_id].index();\n\t          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t          if (vo) vo.play();\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  this.start = function () {};\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t\n\t  this.shouldProceed = function () {\n\t    return !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n\t  };\n\t\n\t  this.next = function () {\n\t    var nextScreen, buttonSound;\n\t\n\t    nextScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (nextScreen) {\n\t      this.leave();\n\t      nextScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return nextScreen;\n\t  };\n\t\n\t  this.prev = function () {\n\t    var prevScreen, buttonSound;\n\t\n\t    prevScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (prevScreen) {\n\t      this.screen.close();\n\t      prevScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return prevScreen;\n\t  };\n\t\n\t  this.start = function () {\n\t    var fxSound = this.audio && this.audio.sfx.start;\n\t\n\t    this.startAudio();\n\t\n\t    if (fxSound) fxSound.play();\n\t    if (this.hasOwnProperty('entities')) {\n\t      this.entities.forEach(function (_entity) {\n\t        if (_entity && typeof _entity.start === 'function') _entity.start();\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.stop = function () {\n\t    if (this.timeoutID) {\n\t      clearTimeout(this.timeoutID);\n\t    }\n\t    return this.proto();\n\t  };\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t\n\t    if (this.isReady) {\n\t      this.start();\n\t    }\n\t\n\t    if (this.properties.gameClass) {\n\t      this.game.addClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t      this.complete();\n\t    }\n\t  });\n\t\n\t  this.on('ui-leave', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.on('ui-close', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.complete = function () {\n\t    var audio;\n\t\n\t    if (this.isComplete) return;\n\t\n\t    audio = this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio;\n\t\n\t    audio.sfx.play('screenComplete');\n\t    return this.proto();\n\t  };\n\t\n\t  this.on('ready', function () {\n\t    if (this.state(this.STATE.OPEN)) this.start();\n\t  });\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t  this.buttonSound = function () {\n\t    if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t  };\n\t\n\t  // TODO: Make an automated way to handle this\n\t  this.on('transitionend', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    if (this.state(this.STATE.LEAVE)) {\n\t      this.addClass('LEAVE-END');\n\t    }\n\t  });\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    this.buttonSound();\n\t    this.game.addClass('QUIT-SCREEN');\n\t    this.removeClass('LEAVE-END');\n\t    this.game.pause(true);\n\t  });\n\t\n\t  this.on('ui-leave', function () {\n\t    this.game.removeClass('QUIT-SCREEN');\n\t    this.game.resume();\n\t  });\n\t\n\t  this.init = function () {\n\t    this.addClass('LEAVE LEAVE-END');\n\t  };\n\t\n\t  this.okay = function () {\n\t    this.buttonSound();\n\t    this.game.exit();\n\t  };\n\t\n\t  this.cancel = function () {\n\t    this.buttonSound();\n\t    this.leave();\n\t  };\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-canvas-move', function () {\n\t  var canvas,\n\t      Item,\n\t      gameLoop,\n\t      self = this;\n\t\n\t  gameLoop = {\n\t    // main game loop\n\t    frame: function frame(_scope) {\n\t      // transition items one px on each frame\n\t      _scope.items.forEach(function (_item) {\n\t        var y, height;\n\t        _item.position.y -= _item.speed;\n\t\n\t        y = _item.position.y + _item.margin;\n\t        height = _item.size.height;\n\t\n\t        if (y + height < 0) _item.position.y = _scope.height() * 1.1;\n\t      });\n\t    }\n\t  };\n\t\n\t  Item = pl.Basic.extend(function () {\n\t    this.position = null;\n\t    this.size = null;\n\t    this.margin = 0;\n\t    this.image = null;\n\t    this.$image = null;\n\t    this.left = 0;\n\t    this.selected = false;\n\t\n\t    this.init = function (_image) {\n\t      this.$image = $(_image);\n\t      this.image = _image;\n\t\n\t      this.position = pl.Point.create();\n\t      this.backgroundSize = [200, 200].to('size');\n\t      this.size = [360, 460].to('size');\n\t\n\t      return this;\n\t    };\n\t\n\t    this.render = function () {\n\t      return {\n\t        drawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n\t      };\n\t    };\n\t\n\t    this.hover = function () {\n\t      if (!this.selected) this.left = this.image.naturalWidth / 3;\n\t    };\n\t\n\t    this.unhover = function () {\n\t      if (!this.selected) this.left = 0;\n\t    };\n\t\n\t    this.select = function () {\n\t      this.selected = true;\n\t      this.left = this.image.naturalWidth * 2 / 3;\n\t    };\n\t\n\t    this.deselect = function () {\n\t      this.selected = false;\n\t      this.left = 0;\n\t    };\n\t\n\t    this.is = function (_type) {\n\t      return $(this.image).is(_type);\n\t    };\n\t\n\t    this.id = function () {\n\t      return this.$image.id();\n\t    };\n\t  });\n\t\n\t  canvas = {\n\t\n\t    ctx: null,\n\t    node: null,\n\t    content: null,\n\t    scale: 1,\n\t\n\t    init: function init(_canvas, _size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node = _canvas;\n\t      this.ctx = _canvas.getContext('2d');\n\t      this.scale = _scale || 1;\n\t\n\t      if (! ~size.indexOf(void 0)) {\n\t        _canvas.width = size.width;\n\t        _canvas.height = size.height;\n\t      }\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t\n\t      this.node.onmousemove = function (_e) {\n\t        var offset, cursor, scale;\n\t\n\t        scale = self.game.transformScale().x;\n\t        offset = self.$els.absolutePosition().scale(1 / scale);\n\t        cursor = pl.Point.create().set(_e.x, _e.y).scale(scale / self.game.zoom).dec(offset).math('floor');\n\t\n\t        self.reverseItems.every(function (_item) {\n\t          if (self.isImageTarget(_item, cursor)) {\n\t            _item.hover();\n\t            return false;\n\t          }\n\t\n\t          _item.unhover();\n\t          return true;\n\t        });\n\t      };\n\t    },\n\t\n\t    resize: function resize(_size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node.width = size.width;\n\t      this.node.height = size.height;\n\t      this.scale = _scale || 1;\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t    },\n\t\n\t    clear: function clear() {\n\t      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n\t    },\n\t\n\t    draw: function draw(_obj) {\n\t      var commands, cmd;\n\t\n\t      commands = _obj.render();\n\t\n\t      for (cmd in commands) {\n\t        if (typeof this.ctx[cmd] !== 'function') continue;\n\t        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.items = null;\n\t  this.player = null;\n\t  this.canvas = null;\n\t  this.buffer = null;\n\t  this.bctx = null;\n\t  this.isRunning = false;\n\t\n\t  this.init = function () {\n\t    this.buffer = document.createElement('canvas');\n\t    this.bctx = this.buffer.getContext('2d');\n\t  };\n\t\n\t  // Handle when the component scope is ready.\n\t  this.on('ready', function (_event) {\n\t    var canvasSize, width, height;\n\t\n\t    // Do not handle child scopes becoming ready.\n\t    if (!this.is(_event.target)) return;\n\t\n\t    this.buffer.width = width = this.width();\n\t    this.buffer.height = height = this.height();\n\t\n\t    this.items = this.bin.find('img').map(function (_i, _node) {\n\t      var item = Item.create().init(_node);\n\t\n\t      item.position.x = 40 + 120 * _i % (width - 280);\n\t      item.position.y = height + 250 * _i % (2 * height);\n\t      item.speed = (_i * 5 % 3 + 2) / 2;\n\t\n\t      return item;\n\t    }).toArray();\n\t\n\t    this.reverseItems = this.items.slice().reverse();\n\t\n\t    canvasSize = pl.Size.create().set(width, height);\n\t\n\t    canvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\t\n\t    this.game.viewport.onResize(this.game.bind(function () {\n\t      canvas.resize(canvasSize, this.zoom);\n\t    }));\n\t  });\n\t\n\t  this.start = function () {\n\t    this.isRunning = true;\n\t    this.eachFrame(this.onEachFrame);\n\t\n\t    this.items.forEach(function (_item) {\n\t      _item.deselect();\n\t    });\n\t  };\n\t\n\t  this.stop = function () {\n\t    this.eachFrame(this.onEachFrame, false);\n\t  };\n\t\n\t  this.onEachFrame = function () {\n\t    if (!this.isRunning) return;\n\t\n\t    canvas.clear();\n\t\n\t    gameLoop.frame(this);\n\t\n\t    this.items.forEach(function (_item) {\n\t      canvas.draw(_item);\n\t    });\n\t  };\n\t\n\t  this.isImageTarget = function (_item, _point) {\n\t    var pixel;\n\t\n\t    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n\t    this.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n\t    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\t\n\t    this.bctx.fillStyle = 'white';\n\t    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\t\n\t    // opaque pixel\n\t    return pixel.data[3] > 0;\n\t  };\n\t\n\t  this.behavior('select', function () {\n\t    var offset,\n\t        cursor,\n\t        scale,\n\t        returnValue = false;\n\t\n\t    scale = this.game.transformScale().x;\n\t    offset = this.$els.absolutePosition().scale(1 / scale);\n\t    cursor = this.event.cursor.scale(scale / this.game.zoom).dec(offset).math('floor');\n\t\n\t    this.reverseItems.every(function (_item) {\n\t      if (self.isImageTarget(_item, cursor)) {\n\t        _item.select();\n\t        returnValue = {\n\t          message: _item.$image.id(),\n\t          behaviorTarget: _item.$image\n\t        };\n\t        return false;\n\t      }\n\t\n\t      return true;\n\t    });\n\t\n\t    return returnValue;\n\t  });\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-reveal', function () {\n\t\n\t  this.respond('select', function (_event) {\n\t    var index, stateMethod;\n\t\n\t    index = _event.message;\n\t    stateMethod = this.properties.selectState || 'select';\n\t\n\t    if (Number.isInteger(index) && ~index) {\n\t      this[stateMethod](_event.behaviorTarget);\n\t      this.reveal.item(index);\n\t    }\n\t  });\n\t\n\t  this.entity('selectable', function () {\n\t\n\t    this.shouldSelect = function (_$target) {\n\t      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t        return !this.screen.state(this.STATE.VOICE_OVER);\n\t      }\n\t\n\t      return false;\n\t    };\n\t  });\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t  this.behavior('select', function (_target) {\n\t    var $target, message;\n\t\n\t    if (this.event) {\n\t      $target = $(this.event.target).closest('li');\n\t      message = $target.id() || $target.index();\n\t\n\t      if (this.shouldSelect($target) !== false) {\n\t        return {\n\t          message: message,\n\t          behaviorTarget: $target\n\t        };\n\t      }\n\t    } else {\n\t      this.proto(_target);\n\t    }\n\t\n\t    return false;\n\t  });\n\t\n\t  this.shouldSelect = function (_$target) {\n\t    if (this.allowSelectAll || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t      return !this.screen.state(this.STATE.VOICE_OVER);\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.start = function () {\n\t    this.allowSelectAll = typeof this.attr('pl-allow-select-all') !== 'undefined';\n\t  };\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.component('title', function () {});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t  screenSelector: '.screen',\n\t  componentDirectory: 'components/',\n\t  dimensions: {\n\t    width: 960,\n\t    ratio: 16 / 9\n\t  },\n\t  shouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(11);\n\t\n\tpl.game('drought-out', function () {\n\t\n\t  var game = this;\n\t\n\t  pl.game.attachScreen = function (cb) {\n\t    cb.call(game);\n\t  };\n\t\n\t  var selectScreen = function selectScreen() {\n\t    this.respond('select', function (_event) {\n\t      var vo;\n\t\n\t      if (!_event.behaviorTarget.is('li')) return;\n\t\n\t      if (_event.behaviorTarget.attr('pl-correct') == null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.selectable.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      if (vo) vo.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t    });\n\t  };\n\t\n\t  this.screen('title', function () {\n\t    this.on('ready', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t\n\t      this.require('cacti');\n\t\n\t      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t    });\n\t\n\t    this.on('animationend', function (_e) {\n\t      if ($(_e.target).id() !== 'cacti') return;\n\t\n\t      if (!this.isComplete) this.requiredQueue.ready('cacti');\n\t    });\n\t  });\n\t\n\t  this.screen('info-no-water', function () {\n\t    this.startAudio = function () {\n\t      if (!this.audio) return;\n\t      // Yes, infoWeedWater. This is due to an error in the framework\n\t      // this is not worth fixing at this point.\n\t      if (this.game.infoWeedWater.audio) {\n\t        this.game.infoWeedWater.audio.background.stop('@ALL');\n\t      }\n\t      this.audio.background.play();\n\t      this.audio.voiceOver.play();\n\t    };\n\t  });\n\t\n\t  this.screen('think', selectScreen);\n\t\n\t  this.screen('balloons', function () {\n\t    this.respond('select', function (_event) {\n\t      var vo, sfx;\n\t\n\t      if (_event.behaviorTarget.attr('pl-incorrect') != null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      switch (_event.message) {\n\t        case 'bathing':\n\t        case 'drinking':\n\t        case 'canoeing':\n\t        case 'factories':\n\t        case 'lawns':\n\t        case 'flowers':\n\t        case 'animalFeed':\n\t          sfx = this.audio.sfx.yellow;\n\t          break;\n\t        case 'washingDishes':\n\t        case 'swimming':\n\t        case 'brushingTeeth':\n\t        case 'electricity':\n\t          sfx = this.audio.sfx.green;\n\t          break;\n\t        case 'cooking':\n\t        case 'rafting':\n\t        case 'waterSlides':\n\t        case 'growingFood':\n\t          sfx = this.audio.sfx.red;\n\t          break;\n\t      }\n\t\n\t      if (vo) vo.play();\n\t      if (sfx) sfx.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t    });\n\t\n\t    this.startAudio = function () {};\n\t  });\n\t\n\t  this.screen('environment-effects', selectScreen);\n\t\n\t  this.screen('human-effects', selectScreen);\n\t\n\t  this.screen('what-can-we-do', selectScreen);\n\t\n\t  this.screen('shower', function () {\n\t    this.respond('select', function (_event) {\n\t      var vo;\n\t\n\t      if (_event.behaviorTarget.attr('pl-correct') == null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      if (vo) vo.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t    });\n\t  });\n\t\n\t  this.screen('conserve', function () {\n\t    var item = 0;\n\t\n\t    this.openDoor = function () {\n\t      if (this.shouldProceed()) {\n\t        this.select();\n\t        this.reveal.item(item);\n\t        this.audio.sfx.open.play();\n\t      }\n\t    };\n\t\n\t    this.on('ui-open', function (_e) {\n\t      var self = this;\n\t\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.length = this.reveal.find('li').length;\n\t\n\t      this.reveal.audio.voiceOver.on('ended', function () {\n\t        self.audio.sfx.close.play();\n\t        self.deselect();\n\t        item = (item + 1) % self.length;\n\t      });\n\t\n\t      if (this.isComplete) item = 0;\n\t    });\n\t\n\t    this.on('ui-close ui-leave', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t      this.reveal.audio.voiceOver.off('ended');\n\t    });\n\t  });\n\t\n\t  this.screen('flip', function () {\n\t    this.next = function () {\n\t      this.game.quit.okay();\n\t    };\n\t\n\t    this.on('ui-open', function () {\n\t      if (this.audio && this.audio.sfx) {\n\t        this.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n\t      }\n\t    });\n\t\n\t    this.complete = function () {\n\t      var eventCategory = ['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')'].join(' ');\n\t\n\t      ga('send', 'event', eventCategory, 'complete');\n\t\n\t      pl.game.report.flip(this, {\n\t        name: 'flip',\n\t        gameData: { id: this.game.id() }\n\t      });\n\t\n\t      return this.proto();\n\t    };\n\t  });\n\t\n\t  this.exit = function () {\n\t    var screen, eventCategory;\n\t\n\t    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t    eventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t    ga('send', 'event', eventCategory, 'quit');\n\t\n\t    return this.proto();\n\t  };\n\t});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tif (this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\t\tthis.splash();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.splash = function () {\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tif (this.game.hasClass('iOS')) {\n\t\t\t\tthis.open();\n\t\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t\t} else {\n\t\t\t\tthis.game.title.open();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen = this.proto();\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tthis.game.audio.sfx.button.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.complete = function () {\n\t\t\tthis.game.audio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.startGame = function () {\n\t\t\tif (!this.hasClass('FINISHED')) return;\n\t\t\tthis.game.addClass('STARTED');\n\t\t\tthis.delay('2.5s', function () {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.on('animationend', function (_e) {\n\t\t\tif (!this.ball.is(_e.target)) return;\n\t\t\tthis.addClass('FINISHED');\n\t\t});\n\t});\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t(function test(_env) {\n\t\tif (window.parent === window) {\n\t\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t\t} else {\n\t\t\tdocument.domain = 'changemyworldnow.com';\n\t\t}\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** drought-out/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 51a0e1f44ad6892ae3fa\n **/","pl.game.component('audio-sequence', function () {\n  var sounds;\n\n  this.on('ready', function (_event) {\n    var self = this;\n\n    if (!this.is(_event.target)) return;\n\n    sounds = this.audio.find('.audio');\n\n    this.audio.on('ended', function () {\n      var next = sounds[self.i++];\n      if (next) next.play();\n    });\n  });\n\n  this.start = function () {\n    this.i = 1;\n    if (sounds.length) sounds[0].play();\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/audio-sequence/behavior.js\n **/","pl.game.component('reveal', function () {\n\n  this.item = function (_id) {\n    var vo, index;\n\n    if (typeof _id === 'number') {\n      this.select(this.find('li').eq(_id));\n      this.audio.voiceOver[_id].play();\n    } else if (typeof _id === 'string') {\n      if (this[_id]) {\n        this.select(this[_id]);\n\n        if (this.audio) {\n          index = this[_id].index();\n          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\n          if (vo) vo.play();\n        }\n      }\n    }\n  };\n\n  this.start = function () {};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/reveal/behavior.js\n **/","pl.game.component('screen-basic', function () {\n\n  this.shouldProceed = function () {\n    return !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n  };\n\n  this.next = function () {\n    var nextScreen, buttonSound;\n\n    nextScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (nextScreen) {\n      this.leave();\n      nextScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return nextScreen;\n  };\n\n  this.prev = function () {\n    var prevScreen, buttonSound;\n\n    prevScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (prevScreen) {\n      this.screen.close();\n      prevScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return prevScreen;\n  };\n\n  this.start = function () {\n    var fxSound = this.audio && this.audio.sfx.start;\n\n    this.startAudio();\n\n    if (fxSound) fxSound.play();\n    if (this.hasOwnProperty('entities')) {\n      this.entities.forEach(function(_entity) {\n        if(_entity && typeof _entity.start === 'function') _entity.start();\n      });\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (this.timeoutID) {\n      clearTimeout(this.timeoutID);\n    }\n    return this.proto();\n  };\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.target)) return;\n\n    if (this.isReady) {\n      this.start();\n    }\n\n    if (this.properties.gameClass) {\n      this.game.addClass(this.properties.gameClass);\n    }\n\n    if (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n      this.complete();\n    }\n  });\n\n  this.on('ui-leave', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.on('ui-close', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.complete = function () {\n    var audio;\n\n    if (this.isComplete) return;\n\n    audio = (this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio);\n\n    audio.sfx.play('screenComplete');\n    return this.proto();\n  };\n\n  this.on('ready', function () {\n    if (this.state(this.STATE.OPEN)) this.start();\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n  this.buttonSound = function () {\n    if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n  };\n\n  // TODO: Make an automated way to handle this\n  this.on('transitionend', function (_event) {\n    if (!this.is(_event.target)) return;\n    if (this.state(this.STATE.LEAVE)) {\n      this.addClass('LEAVE-END');\n    }\n  });\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.target)) return;\n    this.buttonSound();\n    this.game.addClass('QUIT-SCREEN');\n    this.removeClass('LEAVE-END');\n    this.game.pause(true);\n  });\n\n  this.on('ui-leave', function () {\n    this.game.removeClass('QUIT-SCREEN');\n    this.game.resume();\n  });\n\n  this.init = function () {\n    this.addClass('LEAVE LEAVE-END');\n  };\n\n  this.okay = function () {\n    this.buttonSound();\n    this.game.exit();\n  };\n\n  this.cancel = function () {\n    this.buttonSound();\n    this.leave();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('selectable-canvas-move', function () {\n  var canvas, Item, gameLoop, self = this;\n\n  gameLoop = {\n    // main game loop\n    frame: function (_scope) {\n      // transition items one px on each frame\n      _scope.items.forEach((function (_item) {\n        var y, height;\n        _item.position.y -= _item.speed;\n\n        y = _item.position.y + _item.margin;\n        height = _item.size.height;\n\n        if (y + height < 0) _item.position.y = _scope.height() * 1.1;\n      }));\n    },\n  };\n\n  Item = pl.Basic.extend(function () {\n    this.position = null;\n    this.size = null;\n    this.margin = 0;\n    this.image = null;\n    this.$image = null;\n    this.left = 0;\n    this.selected = false;\n\n    this.init = function (_image) {\n      this.$image = $(_image);\n      this.image = _image;\n\n      this.position = pl.Point.create();\n      this.backgroundSize = [200, 200].to('size');\n      this.size = [360, 460].to('size');\n\n      return this;\n    };\n\n    this.render = function () {\n      return {\n        drawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n      };\n    };\n\n    this.hover = function () {\n      if (!this.selected) this.left = this.image.naturalWidth / 3;\n    };\n\n    this.unhover = function () {\n      if (!this.selected) this.left = 0;\n    };\n\n    this.select = function () {\n      this.selected = true;\n      this.left = this.image.naturalWidth * 2 / 3;\n    };\n\n    this.deselect = function () {\n      this.selected = false;\n      this.left = 0;\n    };\n\n    this.is = function (_type) {\n      return $(this.image).is(_type);\n    };\n\n    this.id = function () {\n      return this.$image.id();\n    };\n  });\n\n  canvas = {\n\n    ctx: null,\n    node: null,\n    content: null,\n    scale: 1,\n\n    init: function (_canvas, _size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node = _canvas;\n      this.ctx = _canvas.getContext('2d');\n      this.scale = _scale || 1;\n\n      if (!~size.indexOf(void 0)) {\n        _canvas.width = size.width;\n        _canvas.height = size.height;\n      }\n\n      this.ctx.scale(_scale, _scale);\n\n      this.node.onmousemove = function (_e) {\n        var offset, cursor, scale;\n\n        scale = self.game.transformScale().x;\n        offset = self.$els.absolutePosition().scale(1 / scale);\n        cursor = pl.Point.create().set(_e.x, _e.y)\n          .scale(scale / self.game.zoom)\n          .dec(offset)\n          .math('floor');\n\n        self.reverseItems.every(function (_item) {\n          if (self.isImageTarget(_item, cursor)) {\n            _item.hover();\n            return false;\n          }\n\n          _item.unhover();\n          return true;\n        });\n      };\n    },\n\n    resize: function (_size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node.width = size.width;\n      this.node.height = size.height;\n      this.scale = _scale || 1;\n\n      this.ctx.scale(_scale, _scale);\n    },\n\n    clear: function () {\n      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n    },\n\n    draw: function (_obj) {\n      var commands, cmd;\n\n      commands = _obj.render();\n\n      for (cmd in commands) {\n        if (typeof this.ctx[cmd] !== 'function') continue;\n        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n      }\n    }\n  };\n\n  this.items = null;\n  this.player = null;\n  this.canvas = null;\n  this.buffer = null;\n  this.bctx = null;\n  this.isRunning = false;\n\n  this.init = function () {\n    this.buffer = document.createElement('canvas');\n    this.bctx = this.buffer.getContext('2d');\n  };\n\n  // Handle when the component scope is ready.\n  this.on('ready', function (_event) {\n    var canvasSize, width, height;\n\n    // Do not handle child scopes becoming ready.\n    if (!this.is(_event.target)) return;\n\n    this.buffer.width = width = this.width();\n    this.buffer.height = height = this.height();\n\n    this.items = this.bin.find('img')\n      .map(function (_i, _node) {\n        var item = Item.create().init(_node);\n\n        item.position.x = 40 + (120 * _i % (width - 280));\n        item.position.y = height + (250 * _i % (2 * height));\n        item.speed = ((_i * 5) % 3 + 2) / 2;\n\n        return item;\n      })\n      .toArray();\n\n    this.reverseItems = this.items.slice().reverse();\n\n    canvasSize = pl.Size\n      .create()\n      .set(width, height);\n\n    canvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\n    this.game.viewport.onResize(this.game.bind(function () {\n      canvas.resize(canvasSize, this.zoom);\n    }));\n  });\n\n  this.start = function () {\n    this.isRunning = true;\n    this.eachFrame(this.onEachFrame);\n\n    this.items.forEach(function (_item) {\n      _item.deselect();\n    });\n  };\n\n  this.stop = function () {\n    this.eachFrame(this.onEachFrame, false);\n  };\n\n  this.onEachFrame = function () {\n    if (!this.isRunning) return;\n\n    canvas.clear();\n\n    gameLoop.frame(this);\n\n    this.items.forEach(function (_item) {\n      canvas.draw(_item);\n    });\n  };\n\n  this.isImageTarget = function (_item, _point) {\n    var pixel;\n\n    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n    this.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\n    this.bctx.fillStyle = 'white';\n    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\n    // opaque pixel\n    return pixel.data[3] > 0;\n  };\n\n  this.behavior('select', function () {\n    var offset, cursor, scale, returnValue = false;\n\n    scale = this.game.transformScale().x;\n    offset = this.$els.absolutePosition().scale(1 / scale);\n    cursor = this.event.cursor\n      .scale(scale / this.game.zoom)\n      .dec(offset)\n      .math('floor');\n\n    this.reverseItems.every(function (_item) {\n      if (self.isImageTarget(_item, cursor)) {\n        _item.select();\n        returnValue = {\n          message: _item.$image.id(),\n          behaviorTarget: _item.$image\n        };\n        return false;\n      }\n\n      return true;\n    });\n\n    return returnValue;\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-canvas-move/behavior.js\n **/","pl.game.component('selectable-reveal', function () {\n\n  this.respond('select', function (_event) {\n    var index, stateMethod;\n\n    index = _event.message;\n    stateMethod = this.properties.selectState || 'select';\n\n    if (Number.isInteger(index) && ~index) {\n      this[stateMethod](_event.behaviorTarget);\n      this.reveal.item(index);\n    }\n  });\n\n  this.entity('selectable', function () {\n\n    this.shouldSelect = function (_$target) {\n      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n        return !this.screen.state(this.STATE.VOICE_OVER);\n      }\n\n      return false;\n    };\n\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-reveal/behavior.js\n **/","pl.game.component('selectable', function () {\n\n  this.behavior('select', function (_target) {\n    var $target, message;\n\n    if (this.event) {\n      $target = $(this.event.target).closest('li');\n      message = $target.id() || $target.index();\n\n      if (this.shouldSelect($target) !== false) {\n        return {\n          message,\n          behaviorTarget: $target\n        };\n      }\n    } else {\n      this.proto(_target);\n    }\n\n    return false;\n  });\n\n  this.shouldSelect = function (_$target) {\n    if (this.allowSelectAll || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n      return !this.screen.state(this.STATE.VOICE_OVER);\n    }\n\n    return false;\n  };\n\n  this.start = function () {\n    this.allowSelectAll = typeof this.attr('pl-allow-select-all') !== 'undefined';\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable/behavior.js\n **/","pl.game.component('title', function () {\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/title/behavior.js\n **/","pl.game.config({\n  screenSelector: '.screen',\n  componentDirectory: 'components/',\n  dimensions: {\n    width: 960,\n    ratio: 16 / 9\n  },\n  shouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\nimport '../../../shared/js/screen-ios-splash';\nimport './components/audio-sequence/behavior';\nimport './components/reveal/behavior';\nimport './components/screen-basic/behavior';\nimport './components/screen-quit/behavior';\nimport './components/selectable-canvas-move/behavior';\nimport './components/selectable-reveal/behavior';\nimport './components/selectable/behavior';\nimport './components/title/behavior';\n\nimport '../../../shared/js/test-platform-integration';\nimport '../../../shared/js/google-analytics';\n\npl.game('drought-out', function () {\n\n  var game = this;\n\n  pl.game.attachScreen = function (cb) {\n    cb.call(game);\n  };\n\n  var selectScreen = function () {\n    this.respond('select', function (_event) {\n      var vo;\n\n      if (!_event.behaviorTarget.is('li')) return;\n\n      if (_event.behaviorTarget.attr('pl-correct') == null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.selectable.audio.voiceOver[_event.message];\n      }\n\n      if (vo) vo.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n    });\n  };\n\n  this.screen('title', function () {\n    this.on('ready', function (_event) {\n      if (!this.is(_event.target)) return;\n\n      this.require('cacti');\n\n      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n    });\n\n    this.on('animationend', function (_e) {\n      if ($(_e.target).id() !== 'cacti') return;\n\n      if (!this.isComplete) this.requiredQueue.ready('cacti');\n    });\n  });\n\n  this.screen('info-no-water', function () {\n    this.startAudio = function () {\n      if (!this.audio) return;\n      // Yes, infoWeedWater. This is due to an error in the framework\n      // this is not worth fixing at this point.\n      if (this.game.infoWeedWater.audio) {\n        this.game.infoWeedWater.audio.background.stop('@ALL');\n      }\n      this.audio.background.play();\n      this.audio.voiceOver.play();\n    };\n  });\n\n  this.screen('think', selectScreen);\n\n  this.screen('balloons', function () {\n    this.respond('select', function (_event) {\n      var vo, sfx;\n\n      if (_event.behaviorTarget.attr('pl-incorrect') != null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.audio.voiceOver[_event.message];\n      }\n\n      switch (_event.message) {\n      case 'bathing':\n      case 'drinking':\n      case 'canoeing':\n      case 'factories':\n      case 'lawns':\n      case 'flowers':\n      case 'animalFeed':\n        sfx = this.audio.sfx.yellow;\n        break;\n      case 'washingDishes':\n      case 'swimming':\n      case 'brushingTeeth':\n      case 'electricity':\n        sfx = this.audio.sfx.green;\n        break;\n      case 'cooking':\n      case 'rafting':\n      case 'waterSlides':\n      case 'growingFood':\n        sfx = this.audio.sfx.red;\n        break;\n      }\n\n      if (vo) vo.play();\n      if (sfx) sfx.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n    });\n\n    this.startAudio = function () {};\n  });\n\n  this.screen('environment-effects', selectScreen);\n\n  this.screen('human-effects', selectScreen);\n\n  this.screen('what-can-we-do', selectScreen);\n\n  this.screen('shower', function () {\n    this.respond('select', function (_event) {\n      var vo;\n\n      if (_event.behaviorTarget.attr('pl-correct') == null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.audio.voiceOver[_event.message];\n      }\n\n      if (vo) vo.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n    });\n  });\n\n  this.screen('conserve', function () {\n    var item = 0;\n\n    this.openDoor = function () {\n      if (this.shouldProceed()) {\n        this.select();\n        this.reveal.item(item);\n        this.audio.sfx.open.play();\n      }\n    };\n\n    this.on('ui-open', function (_e) {\n      var self = this;\n\n      if (!this.is(_e.target)) return;\n\n      this.length = this.reveal.find('li').length;\n\n      this.reveal.audio.voiceOver.on('ended', function () {\n        self.audio.sfx.close.play();\n        self.deselect();\n        item = (item + 1) % self.length;\n      });\n\n      if (this.isComplete) item = 0;\n    });\n\n    this.on('ui-close ui-leave', function (_e) {\n      if (!this.is(_e.target)) return;\n      this.reveal.audio.voiceOver.off('ended');\n    });\n  });\n\n  this.screen('flip', function () {\n    this.next = function () {\n      this.game.quit.okay();\n    };\n\n    this.on('ui-open', function () {\n      if (this.audio && this.audio.sfx) {\n        this.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n      }\n    });\n\n    this.complete = function () {\n      var eventCategory = (['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')']).join(' ');\n\n      ga('send', 'event', eventCategory, 'complete');\n\n      pl.game.report.flip(this, {\n        name: 'flip',\n        gameData: {id: this.game.id()}\n      });\n\n      return this.proto();\n    };\n  });\n\n  this.exit = function () {\n    var screen, eventCategory;\n\n    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n    eventCategory = (['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')']).join(' ');\n\n    ga('send', 'event', eventCategory, 'quit');\n\n    return this.proto();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/index.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n\tthis.on('ready', function (_e) {\n\t\tif(!this.is(_e.target)) return;\n\n\t\tif(this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\tthis.splash();\n\t\t}\n\t});\n\n\tthis.splash = function() {\n\t\tthis.close(this.game.loader);\n\n\t\tif(this.game.hasClass('iOS')) {\n\t\t\tthis.open();\n\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t} else {\n\t\t\tthis.game.title.open();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen = this.proto();\n\n\t\tif (nextScreen) {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t\tthis.game.audio.sfx.button.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.complete = function () {\n\t\tthis.game.audio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.startGame = function() {\n\t\tif(!this.hasClass('FINISHED')) return;\n\t\tthis.game.addClass('STARTED');\n\t\tthis.delay('2.5s', function() {\n\t\t\tthis.next();\n\t\t});\n\t};\n\n\tthis.on('animationend', function(_e) {\n\t\tif(!this.ball.is(_e.target)) return;\n\t\tthis.addClass('FINISHED');\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test (_env) {\n\tif (window.parent === window) {\n\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t} else {\n\t\tdocument.domain = 'changemyworldnow.com';\n\t}\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}