{"version":3,"sources":["webpack:///drought-out/ai.js","webpack:///webpack/bootstrap d4a0b5d99b08ecd08a98","webpack:///./drought-out/config.game.js","webpack:///./drought-out/index.js","webpack:///./drought-out/source/js/components/audio-sequence/behavior.js","webpack:///./drought-out/source/js/components/reveal/behavior.js","webpack:///./drought-out/source/js/components/screen-basic/behavior.js","webpack:///./drought-out/source/js/components/screen-quit/behavior.js","webpack:///./drought-out/source/js/components/selectable-canvas-move/behavior.js","webpack:///./drought-out/source/js/components/selectable-reveal/behavior.js","webpack:///./drought-out/source/js/components/selectable/behavior.js","webpack:///./drought-out/source/js/components/title/behavior.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","config","screenSelector","componentDirectory","dimensions","width","ratio","shouldLoadComponentStyles","this","attachScreen","cb","selectScreen","respond","_event","vo","behaviorTarget","is","attr","audio","sfx","incorrect","highlight","selectable","voiceOver","message","play","on","_e","target","unhighlight","find","STATE","HIGHLIGHTED","deselect","SELECTED","screen","require","iosSplash","state","READY","splash","$","isComplete","requiredQueue","ready","startAudio","background","stop","yellow","green","red","item","openDoor","shouldProceed","select","reveal","open","self","length","close","off","next","quit","okay","delay","bind","complete","eventCategory","theEvent","Event","bubbles","cancelable","name","gameData","window","frameElement","dispatchEvent","index","join","ga","proto","exit","findOwn","scope","component","sounds","i","start","_id","eq","VOICE_OVER","demoMode","nextScreen","buttonSound","util","resolvePath","leave","prev","prevScreen","fxSound","hasOwnProperty","entities","forEach","_entity","timeoutID","clearTimeout","isReady","properties","gameClass","addClass","removeClass","targetScope","has","OPEN","button","LEAVE","pause","resume","init","cancel","canvas","Item","gameLoop","frame","_scope","items","_item","y","height","position","speed","margin","size","Basic","extend","image","$image","left","selected","_image","Point","create","backgroundSize","to","render","drawImage","getAttribute","naturalHeight","x","hover","naturalWidth","unhover","_type","ctx","node","content","scale","_canvas","_size","_scale","getContext","indexOf","onmousemove","offset","cursor","transformScale","$els","absolutePosition","set","zoom","dec","math","reverseItems","every","isImageTarget","resize","clear","clearRect","draw","_obj","commands","cmd","apply","player","buffer","bctx","isRunning","document","createElement","canvasSize","bin","map","_i","_node","toArray","slice","reverse","Size","viewport","onResize","eachFrame","onEachFrame","_point","pixel","getImageData","fillStyle","fillRect","data","behavior","returnValue","event","stateMethod","selectState","Number","isInteger","entity","shouldSelect","_$target","hasClass","_target","$target","closest","allowSelectAll","s","o","g","r","a","q","push","arguments","l","Date","getElementsByTagName","async","src","parentNode","insertBefore","title","loader","ball","startGame","test","parent","location","href","domain"],"mappings":"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","file":"drought-out/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(2);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t  screenSelector: '.screen',\n\t  componentDirectory: 'components/',\n\t  dimensions: {\n\t    width: 960,\n\t    ratio: 16 / 9\n\t  },\n\t  shouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(12);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(11);\n\t\n\tpl.game('drought-out', function () {\n\t\n\t  var game = this;\n\t\n\t  pl.game.attachScreen = function (cb) {\n\t    cb.call(game);\n\t  };\n\t\n\t  var selectScreen = function selectScreen() {\n\t    this.respond('select', function (_event) {\n\t      var vo;\n\t\n\t      if (!_event.behaviorTarget.is('li')) return;\n\t\n\t      if (_event.behaviorTarget.attr('pl-correct') == null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.selectable.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      if (vo) vo.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t      this.deselect(this.find('.' + this.STATE.SELECTED));\n\t    });\n\t  };\n\t\n\t  this.screen('title', function () {\n\t    this.on('ready', function (_event) {\n\t      if (!this.is(_event.target)) return;\n\t\n\t      this.require('cacti');\n\t\n\t      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t    });\n\t\n\t    this.on('animationend', function (_e) {\n\t      if ($(_e.target).id() !== 'cacti') return;\n\t\n\t      if (!this.isComplete) this.requiredQueue.ready('cacti');\n\t    });\n\t  });\n\t\n\t  this.screen('info-no-water', function () {\n\t    this.startAudio = function () {\n\t      if (!this.audio) return;\n\t      this.audio.background.stop();\n\t      this.audio.background.play();\n\t      this.audio.voiceOver.play();\n\t    };\n\t  });\n\t\n\t  this.screen('think', selectScreen);\n\t\n\t  this.screen('balloons', function () {\n\t    this.respond('select', function (_event) {\n\t      var vo, sfx;\n\t\n\t      if (_event.behaviorTarget.attr('pl-incorrect') != null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      switch (_event.message) {\n\t        case 'bathing':\n\t        case 'drinking':\n\t        case 'canoeing':\n\t        case 'factories':\n\t        case 'lawns':\n\t        case 'flowers':\n\t        case 'animalFeed':\n\t          sfx = this.audio.sfx.yellow;\n\t          break;\n\t        case 'washingDishes':\n\t        case 'swimming':\n\t        case 'brushingTeeth':\n\t        case 'electricity':\n\t          sfx = this.audio.sfx.green;\n\t          break;\n\t        case 'cooking':\n\t        case 'rafting':\n\t        case 'waterSlides':\n\t        case 'growingFood':\n\t          sfx = this.audio.sfx.red;\n\t          break;\n\t      }\n\t\n\t      if (vo) vo.play();\n\t      if (sfx) sfx.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t    });\n\t\n\t    this.startAudio = function () {};\n\t  });\n\t\n\t  this.screen('environment-effects', selectScreen);\n\t\n\t  this.screen('human-effects', selectScreen);\n\t\n\t  this.screen('what-can-we-do', selectScreen);\n\t\n\t  this.screen('shower', function () {\n\t    this.respond('select', function (_event) {\n\t      var vo;\n\t\n\t      if (_event.behaviorTarget.attr('pl-correct') == null) {\n\t        vo = this.audio.sfx.incorrect;\n\t      } else {\n\t        this.highlight(_event.behaviorTarget);\n\t        vo = this.audio.voiceOver[_event.message];\n\t      }\n\t\n\t      if (vo) vo.play();\n\t    });\n\t\n\t    this.on('ui-open', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t    });\n\t  });\n\t\n\t  this.screen('conserve', function () {\n\t    var item = 0;\n\t\n\t    this.openDoor = function () {\n\t      if (this.shouldProceed()) {\n\t        this.select();\n\t        this.reveal.item(item);\n\t        this.audio.sfx.open.play();\n\t      }\n\t    };\n\t\n\t    this.on('ui-open', function (_e) {\n\t      var self = this;\n\t\n\t      if (!this.is(_e.target)) return;\n\t\n\t      this.length = this.reveal.find('li').length;\n\t\n\t      this.reveal.audio.voiceOver.on('ended', function () {\n\t        self.audio.sfx.close.play();\n\t        self.deselect();\n\t        item = (item + 1) % self.length;\n\t      });\n\t\n\t      if (this.isComplete) item = 0;\n\t    });\n\t\n\t    this.on('ui-close ui-leave', function (_e) {\n\t      if (!this.is(_e.target)) return;\n\t      this.reveal.audio.voiceOver.off('ended');\n\t    });\n\t  });\n\t\n\t  this.screen('flip', function () {\n\t    this.next = function () {\n\t      this.game.quit.okay();\n\t    };\n\t\n\t    this.on('ui-open', function () {\n\t      if (this.audio && this.audio.sfx) {\n\t        this.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n\t      }\n\t    });\n\t\n\t    this.complete = function () {\n\t      var eventCategory;\n\t      var theEvent = new Event('game-event', { bubbles: true, cancelable: false });\n\t      theEvent.name = 'flip';\n\t      theEvent.gameData = { id: this.game.id() };\n\t      if (window.frameElement) window.frameElement.dispatchEvent(theEvent);\n\t      eventCategory = ['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')'].join(' ');\n\t      ga('send', 'event', eventCategory, 'complete');\n\t      return this.proto();\n\t    };\n\t  });\n\t\n\t  this.exit = function () {\n\t    var screen, eventCategory;\n\t\n\t    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t    eventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t    ga('send', 'event', eventCategory, 'quit');\n\t\n\t    return this.proto();\n\t  };\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('audio-sequence', function () {\n\t  var sounds;\n\t\n\t  this.on('ready', function (_event) {\n\t    var self = this;\n\t\n\t    if (!this.is(_event.target)) return;\n\t\n\t    sounds = this.audio.find('.audio');\n\t\n\t    this.audio.on('ended', function () {\n\t      var next = sounds[self.i++];\n\t      if (next) next.play();\n\t    });\n\t  });\n\t\n\t  this.start = function () {\n\t    this.i = 1;\n\t    if (sounds.length) sounds[0].play();\n\t  };\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t  this.item = function (_id) {\n\t    var vo, index;\n\t\n\t    if (typeof _id === 'number') {\n\t      this.select(this.find('li').eq(_id));\n\t      this.audio.voiceOver[_id].play();\n\t    } else if (typeof _id === 'string') {\n\t      if (this[_id]) {\n\t        this.select(this[_id]);\n\t\n\t        if (this.audio) {\n\t          index = this[_id].index();\n\t          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t          if (vo) vo.play();\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  this.start = function () {};\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t\n\t  this.shouldProceed = function () {\n\t    return !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n\t  };\n\t\n\t  this.next = function () {\n\t    var nextScreen, buttonSound;\n\t\n\t    nextScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (nextScreen) {\n\t      this.leave();\n\t      nextScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return nextScreen;\n\t  };\n\t\n\t  this.prev = function () {\n\t    var prevScreen, buttonSound;\n\t\n\t    prevScreen = this.proto();\n\t    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t    if (prevScreen) {\n\t      this.screen.close();\n\t      prevScreen.open();\n\t      if (buttonSound) buttonSound.play();\n\t    }\n\t\n\t    return prevScreen;\n\t  };\n\t\n\t  this.start = function () {\n\t    var fxSound = this.audio && this.audio.sfx.start;\n\t\n\t    this.startAudio();\n\t\n\t    if (fxSound) fxSound.play();\n\t    if (this.hasOwnProperty('entities')) {\n\t      this.entities.forEach(function (_entity) {\n\t        if (_entity && typeof _entity.start === 'function') _entity.start();\n\t      });\n\t    }\n\t\n\t    return this;\n\t  };\n\t\n\t  this.stop = function () {\n\t    if (this.timeoutID) {\n\t      clearTimeout(this.timeoutID);\n\t    }\n\t    return this.proto();\n\t  };\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t\n\t    if (this.isReady) {\n\t      this.start();\n\t    }\n\t\n\t    if (this.properties.gameClass) {\n\t      this.game.addClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t      this.complete();\n\t    }\n\t  });\n\t\n\t  this.on('ui-leave', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.on('ui-close', function (_event) {\n\t    if (this.properties.gameClass) {\n\t      this.game.removeClass(this.properties.gameClass);\n\t    }\n\t\n\t    if (this.isReady && this === _event.targetScope) {\n\t      this.stop();\n\t    }\n\t  });\n\t\n\t  this.complete = function () {\n\t    var audio;\n\t\n\t    if (this.isComplete) return;\n\t\n\t    audio = this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio;\n\t\n\t    audio.sfx.play('screenComplete');\n\t    return this.proto();\n\t  };\n\t\n\t  this.on('ready', function () {\n\t    if (this.state(this.STATE.OPEN)) this.start();\n\t  });\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t  this.buttonSound = function () {\n\t    if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t  };\n\t\n\t  // TODO: Make an automated way to handle this\n\t  this.on('transitionend', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    if (this.state(this.STATE.LEAVE)) {\n\t      this.addClass('LEAVE-END');\n\t    }\n\t  });\n\t\n\t  this.on('ui-open', function (_event) {\n\t    if (!this.is(_event.target)) return;\n\t    this.buttonSound();\n\t    this.game.addClass('QUIT-SCREEN');\n\t    this.removeClass('LEAVE-END');\n\t    this.game.pause(true);\n\t  });\n\t\n\t  this.on('ui-leave', function () {\n\t    this.game.removeClass('QUIT-SCREEN');\n\t    this.game.resume();\n\t  });\n\t\n\t  this.init = function () {\n\t    this.addClass('LEAVE LEAVE-END');\n\t  };\n\t\n\t  this.okay = function () {\n\t    this.buttonSound();\n\t    this.game.exit();\n\t  };\n\t\n\t  this.cancel = function () {\n\t    this.buttonSound();\n\t    this.leave();\n\t  };\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-canvas-move', function () {\n\t  var canvas,\n\t      Item,\n\t      gameLoop,\n\t      self = this;\n\t\n\t  gameLoop = {\n\t    // main game loop\n\t    frame: function frame(_scope) {\n\t      // transition items one px on each frame\n\t      _scope.items.forEach(function (_item) {\n\t        var y, height;\n\t        _item.position.y -= _item.speed;\n\t\n\t        y = _item.position.y + _item.margin;\n\t        height = _item.size.height;\n\t\n\t        if (y + height < 0) _item.position.y = _scope.height() * 1.1;\n\t      });\n\t    }\n\t  };\n\t\n\t  Item = pl.Basic.extend(function () {\n\t    this.position = null;\n\t    this.size = null;\n\t    this.margin = 0;\n\t    this.image = null;\n\t    this.$image = null;\n\t    this.left = 0;\n\t    this.selected = false;\n\t\n\t    this.init = function (_image) {\n\t      this.$image = $(_image);\n\t      this.image = _image;\n\t\n\t      this.position = pl.Point.create();\n\t      this.backgroundSize = [200, 200].to('size');\n\t      this.size = [360, 460].to('size');\n\t\n\t      return this;\n\t    };\n\t\n\t    this.render = function () {\n\t      return {\n\t        drawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n\t      };\n\t    };\n\t\n\t    this.hover = function () {\n\t      if (!this.selected) this.left = this.image.naturalWidth / 3;\n\t    };\n\t\n\t    this.unhover = function () {\n\t      if (!this.selected) this.left = 0;\n\t    };\n\t\n\t    this.select = function () {\n\t      this.selected = true;\n\t      this.left = this.image.naturalWidth * 2 / 3;\n\t    };\n\t\n\t    this.deselect = function () {\n\t      this.selected = false;\n\t      this.left = 0;\n\t    };\n\t\n\t    this.is = function (_type) {\n\t      return $(this.image).is(_type);\n\t    };\n\t\n\t    this.id = function () {\n\t      return this.$image.id();\n\t    };\n\t  });\n\t\n\t  canvas = {\n\t\n\t    ctx: null,\n\t    node: null,\n\t    content: null,\n\t    scale: 1,\n\t\n\t    init: function init(_canvas, _size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node = _canvas;\n\t      this.ctx = _canvas.getContext('2d');\n\t      this.scale = _scale || 1;\n\t\n\t      if (! ~size.indexOf(void 0)) {\n\t        _canvas.width = size.width;\n\t        _canvas.height = size.height;\n\t      }\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t\n\t      this.node.onmousemove = function (_e) {\n\t        var offset, cursor, scale;\n\t\n\t        scale = self.game.transformScale().x;\n\t        offset = self.$els.absolutePosition().scale(1 / scale);\n\t        cursor = pl.Point.create().set(_e.x, _e.y).scale(scale / self.game.zoom).dec(offset).math('floor');\n\t\n\t        self.reverseItems.every(function (_item) {\n\t          if (self.isImageTarget(_item, cursor)) {\n\t            _item.hover();\n\t            return false;\n\t          }\n\t\n\t          _item.unhover();\n\t          return true;\n\t        });\n\t      };\n\t    },\n\t\n\t    resize: function resize(_size, _scale) {\n\t      var size;\n\t\n\t      size = _scale ? _size.scale(_scale) : _size;\n\t\n\t      this.node.width = size.width;\n\t      this.node.height = size.height;\n\t      this.scale = _scale || 1;\n\t\n\t      this.ctx.scale(_scale, _scale);\n\t    },\n\t\n\t    clear: function clear() {\n\t      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n\t    },\n\t\n\t    draw: function draw(_obj) {\n\t      var commands, cmd;\n\t\n\t      commands = _obj.render();\n\t\n\t      for (cmd in commands) {\n\t        if (typeof this.ctx[cmd] !== 'function') continue;\n\t        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.items = null;\n\t  this.player = null;\n\t  this.canvas = null;\n\t  this.buffer = null;\n\t  this.bctx = null;\n\t  this.isRunning = false;\n\t\n\t  this.init = function () {\n\t    this.buffer = document.createElement('canvas');\n\t    this.bctx = this.buffer.getContext('2d');\n\t  };\n\t\n\t  // Handle when the component scope is ready.\n\t  this.on('ready', function (_event) {\n\t    var canvasSize, width, height;\n\t\n\t    // Do not handle child scopes becoming ready.\n\t    if (!this.is(_event.target)) return;\n\t\n\t    this.buffer.width = width = this.width();\n\t    this.buffer.height = height = this.height();\n\t\n\t    this.items = this.bin.find('img').map(function (_i, _node) {\n\t      var item = Item.create().init(_node);\n\t\n\t      item.position.x = 40 + 120 * _i % (width - 280);\n\t      item.position.y = height + 250 * _i % (2 * height);\n\t      item.speed = (_i * 5 % 3 + 2) / 2;\n\t\n\t      return item;\n\t    }).toArray();\n\t\n\t    this.reverseItems = this.items.slice().reverse();\n\t\n\t    canvasSize = pl.Size.create().set(width, height);\n\t\n\t    canvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\t\n\t    this.game.viewport.onResize(this.game.bind(function () {\n\t      canvas.resize(canvasSize, this.zoom);\n\t    }));\n\t  });\n\t\n\t  this.start = function () {\n\t    this.isRunning = true;\n\t    this.eachFrame(this.onEachFrame);\n\t\n\t    this.items.forEach(function (_item) {\n\t      _item.deselect();\n\t    });\n\t  };\n\t\n\t  this.stop = function () {\n\t    this.eachFrame(this.onEachFrame, false);\n\t  };\n\t\n\t  this.onEachFrame = function () {\n\t    if (!this.isRunning) return;\n\t\n\t    canvas.clear();\n\t\n\t    gameLoop.frame(this);\n\t\n\t    this.items.forEach(function (_item) {\n\t      canvas.draw(_item);\n\t    });\n\t  };\n\t\n\t  this.isImageTarget = function (_item, _point) {\n\t    var pixel;\n\t\n\t    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n\t    this.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n\t    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\t\n\t    this.bctx.fillStyle = 'white';\n\t    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\t\n\t    // opaque pixel\n\t    return pixel.data[3] > 0;\n\t  };\n\t\n\t  this.behavior('select', function () {\n\t    var offset,\n\t        cursor,\n\t        scale,\n\t        returnValue = false;\n\t\n\t    scale = this.game.transformScale().x;\n\t    offset = this.$els.absolutePosition().scale(1 / scale);\n\t    cursor = this.event.cursor.scale(scale / this.game.zoom).dec(offset).math('floor');\n\t\n\t    this.reverseItems.every(function (_item) {\n\t      if (self.isImageTarget(_item, cursor)) {\n\t        _item.select();\n\t        returnValue = {\n\t          message: _item.$image.id(),\n\t          behaviorTarget: _item.$image\n\t        };\n\t        return false;\n\t      }\n\t\n\t      return true;\n\t    });\n\t\n\t    return returnValue;\n\t  });\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-reveal', function () {\n\t\n\t  this.respond('select', function (_event) {\n\t    var index, stateMethod;\n\t\n\t    index = _event.message;\n\t    stateMethod = this.properties.selectState || 'select';\n\t\n\t    if (Number.isInteger(index) && ~index) {\n\t      this[stateMethod](_event.behaviorTarget);\n\t      this.reveal.item(index);\n\t    }\n\t  });\n\t\n\t  this.entity('selectable', function () {\n\t\n\t    this.shouldSelect = function (_$target) {\n\t      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t        return !this.screen.state(this.STATE.VOICE_OVER);\n\t      }\n\t\n\t      return false;\n\t    };\n\t  });\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t  this.behavior('select', function (_target) {\n\t    var $target, message;\n\t\n\t    if (this.event) {\n\t      $target = $(this.event.target).closest('li');\n\t      message = $target.id() || $target.index();\n\t\n\t      if (this.shouldSelect($target) !== false) {\n\t        return {\n\t          message: message,\n\t          behaviorTarget: $target\n\t        };\n\t      }\n\t    } else {\n\t      this.proto(_target);\n\t    }\n\t\n\t    return false;\n\t  });\n\t\n\t  this.shouldSelect = function (_$target) {\n\t    if (this.allowSelectAll || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t      return !this.screen.state(this.STATE.VOICE_OVER);\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  this.start = function () {\n\t    this.allowSelectAll = typeof this.attr('pl-allow-select-all') !== 'undefined';\n\t  };\n\t});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tpl.game.component('title', function () {});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t  this.on('ready', function (_e) {\n\t    if (!this.is(_e.target)) return;\n\t\n\t    if (this.game && this.game.title.state('READY')) {\n\t      this.splash();\n\t    }\n\t  });\n\t\n\t  this.splash = function () {\n\t    this.close(this.game.loader);\n\t\n\t    if (this.game.hasClass('iOS')) {\n\t      this.open();\n\t      this.ball.delay(0, this.ball.open);\n\t    } else {\n\t      this.game.title.open();\n\t    }\n\t  };\n\t\n\t  this.next = function () {\n\t    var nextScreen = this.proto();\n\t\n\t    if (nextScreen) {\n\t      this.screen.leave();\n\t      nextScreen.open();\n\t      this.game.audio.sfx.button.play();\n\t    }\n\t\n\t    return nextScreen;\n\t  };\n\t\n\t  this.complete = function () {\n\t    this.game.audio.sfx.play('screenComplete');\n\t    return this.proto();\n\t  };\n\t\n\t  this.startGame = function () {\n\t    if (!this.hasClass('FINISHED')) return;\n\t    this.game.addClass('STARTED');\n\t    this.delay('2.5s', function () {\n\t      this.next();\n\t    });\n\t  };\n\t\n\t  this.on('animationend', function (_e) {\n\t    if (!this.ball.is(_e.target)) return;\n\t    this.addClass('FINISHED');\n\t  });\n\t});\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t(function test() {\n\t  if (window.parent === window) {\n\t    window.location.href = 'https://www.changemyworldnow.com/';\n\t  } else {\n\t    document.domain = 'changemyworldnow.com';\n\t  }\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** drought-out/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d4a0b5d99b08ecd08a98\n **/","pl.game.config({\n  screenSelector: '.screen',\n  componentDirectory: 'components/',\n  dimensions: {\n    width: 960,\n    ratio: 16 / 9\n  },\n  shouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\nimport 'shared/js/screen-ios-splash';\nimport './source/js/components/audio-sequence/behavior';\nimport './source/js/components/reveal/behavior';\nimport './source/js/components/screen-basic/behavior';\nimport './source/js/components/screen-quit/behavior';\nimport './source/js/components/selectable-canvas-move/behavior';\nimport './source/js/components/selectable-reveal/behavior';\nimport './source/js/components/selectable/behavior';\nimport './source/js/components/title/behavior';\n\nimport 'shared/js/test-platform-integration';\nimport 'shared/js/google-analytics';\n\npl.game('drought-out', function () {\n\n  var game = this;\n\n  pl.game.attachScreen = function (cb) {\n    cb.call(game);\n  };\n\n  var selectScreen = function () {\n    this.respond('select', function (_event) {\n      var vo;\n\n      if (!_event.behaviorTarget.is('li')) return;\n\n      if (_event.behaviorTarget.attr('pl-correct') == null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.selectable.audio.voiceOver[_event.message];\n      }\n\n      if (vo) vo.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n      this.deselect(this.find('.' + this.STATE.SELECTED));\n    });\n  };\n\n  this.screen('title', function () {\n    this.on('ready', function (_event) {\n      if (!this.is(_event.target)) return;\n\n      this.require('cacti');\n\n      if (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n    });\n\n    this.on('animationend', function (_e) {\n      if ($(_e.target).id() !== 'cacti') return;\n\n      if (!this.isComplete) this.requiredQueue.ready('cacti');\n    });\n  });\n\n  this.screen('info-no-water', function () {\n    this.startAudio = function () {\n      if (!this.audio) return;\n      this.audio.background.stop();\n      this.audio.background.play();\n      this.audio.voiceOver.play();\n    };\n  });\n\n  this.screen('think', selectScreen);\n\n  this.screen('balloons', function () {\n    this.respond('select', function (_event) {\n      var vo, sfx;\n\n      if (_event.behaviorTarget.attr('pl-incorrect') != null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.audio.voiceOver[_event.message];\n      }\n\n      switch (_event.message) {\n      case 'bathing':\n      case 'drinking':\n      case 'canoeing':\n      case 'factories':\n      case 'lawns':\n      case 'flowers':\n      case 'animalFeed':\n        sfx = this.audio.sfx.yellow;\n        break;\n      case 'washingDishes':\n      case 'swimming':\n      case 'brushingTeeth':\n      case 'electricity':\n        sfx = this.audio.sfx.green;\n        break;\n      case 'cooking':\n      case 'rafting':\n      case 'waterSlides':\n      case 'growingFood':\n        sfx = this.audio.sfx.red;\n        break;\n      }\n\n      if (vo) vo.play();\n      if (sfx) sfx.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n    });\n\n    this.startAudio = function () {};\n  });\n\n  this.screen('environment-effects', selectScreen);\n\n  this.screen('human-effects', selectScreen);\n\n  this.screen('what-can-we-do', selectScreen);\n\n  this.screen('shower', function () {\n    this.respond('select', function (_event) {\n      var vo;\n\n      if (_event.behaviorTarget.attr('pl-correct') == null) {\n        vo = this.audio.sfx.incorrect;\n      } else {\n        this.highlight(_event.behaviorTarget);\n        vo = this.audio.voiceOver[_event.message];\n      }\n\n      if (vo) vo.play();\n    });\n\n    this.on('ui-open', function (_e) {\n      if (!this.is(_e.target)) return;\n\n      this.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n    });\n  });\n\n  this.screen('conserve', function () {\n    var item = 0;\n\n    this.openDoor = function () {\n      if (this.shouldProceed()) {\n        this.select();\n        this.reveal.item(item);\n        this.audio.sfx.open.play();\n      }\n    };\n\n    this.on('ui-open', function (_e) {\n      var self = this;\n\n      if (!this.is(_e.target)) return;\n\n      this.length = this.reveal.find('li').length;\n\n      this.reveal.audio.voiceOver.on('ended', function () {\n        self.audio.sfx.close.play();\n        self.deselect();\n        item = (item + 1) % self.length;\n      });\n\n      if (this.isComplete) item = 0;\n    });\n\n    this.on('ui-close ui-leave', function (_e) {\n      if (!this.is(_e.target)) return;\n      this.reveal.audio.voiceOver.off('ended');\n    });\n  });\n\n  this.screen('flip', function () {\n    this.next = function () {\n      this.game.quit.okay();\n    };\n\n    this.on('ui-open', function () {\n      if (this.audio && this.audio.sfx) {\n        this.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n      }\n    });\n\n    this.complete = function () {\n      var eventCategory;\n      var theEvent = new Event('game-event', {bubbles: true, cancelable: false});\n      theEvent.name = 'flip';\n      theEvent.gameData = {id: this.game.id()};\n      if (window.frameElement) window.frameElement.dispatchEvent(theEvent);\n      eventCategory = (['game', this.game.id(), this.id() + '(' + (this.index() + 1) + ')']).join(' ');\n      ga('send', 'event', eventCategory, 'complete');\n      return this.proto();\n    };\n  });\n\n  this.exit = function () {\n    var screen, eventCategory;\n\n    screen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n    eventCategory = (['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')']).join(' ');\n\n    ga('send', 'event', eventCategory, 'quit');\n\n    return this.proto();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/index.js\n **/","pl.game.component('audio-sequence', function () {\n  var sounds;\n\n  this.on('ready', function (_event) {\n    var self = this;\n\n    if (!this.is(_event.target)) return;\n\n    sounds = this.audio.find('.audio');\n\n    this.audio.on('ended', function () {\n      var next = sounds[self.i++];\n      if (next) next.play();\n    });\n  });\n\n  this.start = function () {\n    this.i = 1;\n    if (sounds.length) sounds[0].play();\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/audio-sequence/behavior.js\n **/","pl.game.component('reveal', function () {\n\n  this.item = function (_id) {\n    var vo, index;\n\n    if (typeof _id === 'number') {\n      this.select(this.find('li').eq(_id));\n      this.audio.voiceOver[_id].play();\n    } else if (typeof _id === 'string') {\n      if (this[_id]) {\n        this.select(this[_id]);\n\n        if (this.audio) {\n          index = this[_id].index();\n          vo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\n          if (vo) vo.play();\n        }\n      }\n    }\n  };\n\n  this.start = function () {};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/reveal/behavior.js\n **/","pl.game.component('screen-basic', function () {\n\n  this.shouldProceed = function () {\n    return !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n  };\n\n  this.next = function () {\n    var nextScreen, buttonSound;\n\n    nextScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (nextScreen) {\n      this.leave();\n      nextScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return nextScreen;\n  };\n\n  this.prev = function () {\n    var prevScreen, buttonSound;\n\n    prevScreen = this.proto();\n    buttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n    if (prevScreen) {\n      this.screen.close();\n      prevScreen.open();\n      if (buttonSound) buttonSound.play();\n    }\n\n    return prevScreen;\n  };\n\n  this.start = function () {\n    var fxSound = this.audio && this.audio.sfx.start;\n\n    this.startAudio();\n\n    if (fxSound) fxSound.play();\n    if (this.hasOwnProperty('entities')) {\n      this.entities.forEach(function(_entity) {\n        if(_entity && typeof _entity.start === 'function') _entity.start();\n      });\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (this.timeoutID) {\n      clearTimeout(this.timeoutID);\n    }\n    return this.proto();\n  };\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.target)) return;\n\n    if (this.isReady) {\n      this.start();\n    }\n\n    if (this.properties.gameClass) {\n      this.game.addClass(this.properties.gameClass);\n    }\n\n    if (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n      this.complete();\n    }\n  });\n\n  this.on('ui-leave', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.on('ui-close', function (_event) {\n    if (this.properties.gameClass) {\n      this.game.removeClass(this.properties.gameClass);\n    }\n\n    if (this.isReady && this === _event.targetScope) {\n      this.stop();\n    }\n  });\n\n  this.complete = function () {\n    var audio;\n\n    if (this.isComplete) return;\n\n    audio = (this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio);\n\n    audio.sfx.play('screenComplete');\n    return this.proto();\n  };\n\n  this.on('ready', function () {\n    if (this.state(this.STATE.OPEN)) this.start();\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n  this.buttonSound = function () {\n    if (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n  };\n\n  // TODO: Make an automated way to handle this\n  this.on('transitionend', function (_event) {\n    if (!this.is(_event.target)) return;\n    if (this.state(this.STATE.LEAVE)) {\n      this.addClass('LEAVE-END');\n    }\n  });\n\n  this.on('ui-open', function (_event) {\n    if (!this.is(_event.target)) return;\n    this.buttonSound();\n    this.game.addClass('QUIT-SCREEN');\n    this.removeClass('LEAVE-END');\n    this.game.pause(true);\n  });\n\n  this.on('ui-leave', function () {\n    this.game.removeClass('QUIT-SCREEN');\n    this.game.resume();\n  });\n\n  this.init = function () {\n    this.addClass('LEAVE LEAVE-END');\n  };\n\n  this.okay = function () {\n    this.buttonSound();\n    this.game.exit();\n  };\n\n  this.cancel = function () {\n    this.buttonSound();\n    this.leave();\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('selectable-canvas-move', function () {\n  var canvas, Item, gameLoop, self = this;\n\n  gameLoop = {\n    // main game loop\n    frame: function (_scope) {\n      // transition items one px on each frame\n      _scope.items.forEach((function (_item) {\n        var y, height;\n        _item.position.y -= _item.speed;\n\n        y = _item.position.y + _item.margin;\n        height = _item.size.height;\n\n        if (y + height < 0) _item.position.y = _scope.height() * 1.1;\n      }));\n    },\n  };\n\n  Item = pl.Basic.extend(function () {\n    this.position = null;\n    this.size = null;\n    this.margin = 0;\n    this.image = null;\n    this.$image = null;\n    this.left = 0;\n    this.selected = false;\n\n    this.init = function (_image) {\n      this.$image = $(_image);\n      this.image = _image;\n\n      this.position = pl.Point.create();\n      this.backgroundSize = [200, 200].to('size');\n      this.size = [360, 460].to('size');\n\n      return this;\n    };\n\n    this.render = function () {\n      return {\n        drawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n      };\n    };\n\n    this.hover = function () {\n      if (!this.selected) this.left = this.image.naturalWidth / 3;\n    };\n\n    this.unhover = function () {\n      if (!this.selected) this.left = 0;\n    };\n\n    this.select = function () {\n      this.selected = true;\n      this.left = this.image.naturalWidth * 2 / 3;\n    };\n\n    this.deselect = function () {\n      this.selected = false;\n      this.left = 0;\n    };\n\n    this.is = function (_type) {\n      return $(this.image).is(_type);\n    };\n\n    this.id = function () {\n      return this.$image.id();\n    };\n  });\n\n  canvas = {\n\n    ctx: null,\n    node: null,\n    content: null,\n    scale: 1,\n\n    init: function (_canvas, _size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node = _canvas;\n      this.ctx = _canvas.getContext('2d');\n      this.scale = _scale || 1;\n\n      if (!~size.indexOf(void 0)) {\n        _canvas.width = size.width;\n        _canvas.height = size.height;\n      }\n\n      this.ctx.scale(_scale, _scale);\n\n      this.node.onmousemove = function (_e) {\n        var offset, cursor, scale;\n\n        scale = self.game.transformScale().x;\n        offset = self.$els.absolutePosition().scale(1 / scale);\n        cursor = pl.Point.create().set(_e.x, _e.y)\n          .scale(scale / self.game.zoom)\n          .dec(offset)\n          .math('floor');\n\n        self.reverseItems.every(function (_item) {\n          if (self.isImageTarget(_item, cursor)) {\n            _item.hover();\n            return false;\n          }\n\n          _item.unhover();\n          return true;\n        });\n      };\n    },\n\n    resize: function (_size, _scale) {\n      var size;\n\n      size = _scale ? _size.scale(_scale) : _size;\n\n      this.node.width = size.width;\n      this.node.height = size.height;\n      this.scale = _scale || 1;\n\n      this.ctx.scale(_scale, _scale);\n    },\n\n    clear: function () {\n      this.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n    },\n\n    draw: function (_obj) {\n      var commands, cmd;\n\n      commands = _obj.render();\n\n      for (cmd in commands) {\n        if (typeof this.ctx[cmd] !== 'function') continue;\n        this.ctx[cmd].apply(this.ctx, commands[cmd]);\n      }\n    }\n  };\n\n  this.items = null;\n  this.player = null;\n  this.canvas = null;\n  this.buffer = null;\n  this.bctx = null;\n  this.isRunning = false;\n\n  this.init = function () {\n    this.buffer = document.createElement('canvas');\n    this.bctx = this.buffer.getContext('2d');\n  };\n\n  // Handle when the component scope is ready.\n  this.on('ready', function (_event) {\n    var canvasSize, width, height;\n\n    // Do not handle child scopes becoming ready.\n    if (!this.is(_event.target)) return;\n\n    this.buffer.width = width = this.width();\n    this.buffer.height = height = this.height();\n\n    this.items = this.bin.find('img')\n      .map(function (_i, _node) {\n        var item = Item.create().init(_node);\n\n        item.position.x = 40 + (120 * _i % (width - 280));\n        item.position.y = height + (250 * _i % (2 * height));\n        item.speed = ((_i * 5) % 3 + 2) / 2;\n\n        return item;\n      })\n      .toArray();\n\n    this.reverseItems = this.items.slice().reverse();\n\n    canvasSize = pl.Size\n      .create()\n      .set(width, height);\n\n    canvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\n    this.game.viewport.onResize(this.game.bind(function () {\n      canvas.resize(canvasSize, this.zoom);\n    }));\n  });\n\n  this.start = function () {\n    this.isRunning = true;\n    this.eachFrame(this.onEachFrame);\n\n    this.items.forEach(function (_item) {\n      _item.deselect();\n    });\n  };\n\n  this.stop = function () {\n    this.eachFrame(this.onEachFrame, false);\n  };\n\n  this.onEachFrame = function () {\n    if (!this.isRunning) return;\n\n    canvas.clear();\n\n    gameLoop.frame(this);\n\n    this.items.forEach(function (_item) {\n      canvas.draw(_item);\n    });\n  };\n\n  this.isImageTarget = function (_item, _point) {\n    var pixel;\n\n    this.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n    this.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n    pixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\n    this.bctx.fillStyle = 'white';\n    this.bctx.fillRect(_point.x, _point.y, 5, 5);\n\n    // opaque pixel\n    return pixel.data[3] > 0;\n  };\n\n  this.behavior('select', function () {\n    var offset, cursor, scale, returnValue = false;\n\n    scale = this.game.transformScale().x;\n    offset = this.$els.absolutePosition().scale(1 / scale);\n    cursor = this.event.cursor\n      .scale(scale / this.game.zoom)\n      .dec(offset)\n      .math('floor');\n\n    this.reverseItems.every(function (_item) {\n      if (self.isImageTarget(_item, cursor)) {\n        _item.select();\n        returnValue = {\n          message: _item.$image.id(),\n          behaviorTarget: _item.$image\n        };\n        return false;\n      }\n\n      return true;\n    });\n\n    return returnValue;\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-canvas-move/behavior.js\n **/","pl.game.component('selectable-reveal', function () {\n\n  this.respond('select', function (_event) {\n    var index, stateMethod;\n\n    index = _event.message;\n    stateMethod = this.properties.selectState || 'select';\n\n    if (Number.isInteger(index) && ~index) {\n      this[stateMethod](_event.behaviorTarget);\n      this.reveal.item(index);\n    }\n  });\n\n  this.entity('selectable', function () {\n\n    this.shouldSelect = function (_$target) {\n      if (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n        return !this.screen.state(this.STATE.VOICE_OVER);\n      }\n\n      return false;\n    };\n\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-reveal/behavior.js\n **/","pl.game.component('selectable', function () {\n\n  this.behavior('select', function (_target) {\n    var $target, message;\n\n    if (this.event) {\n      $target = $(this.event.target).closest('li');\n      message = $target.id() || $target.index();\n\n      if (this.shouldSelect($target) !== false) {\n        return {\n          message,\n          behaviorTarget: $target\n        };\n      }\n    } else {\n      this.proto(_target);\n    }\n\n    return false;\n  });\n\n  this.shouldSelect = function (_$target) {\n    if (this.allowSelectAll || _$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n      return !this.screen.state(this.STATE.VOICE_OVER);\n    }\n\n    return false;\n  };\n\n  this.start = function () {\n    this.allowSelectAll = typeof this.attr('pl-allow-select-all') !== 'undefined';\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable/behavior.js\n **/","pl.game.component('title', function () {\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/title/behavior.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n  this.on('ready', function (_e) {\n    if (!this.is(_e.target)) return;\n\n    if (this.game && this.game.title.state('READY')) {\n      this.splash();\n    }\n  });\n\n  this.splash = function () {\n    this.close(this.game.loader);\n\n    if (this.game.hasClass('iOS')) {\n      this.open();\n      this.ball.delay(0, this.ball.open);\n    } else {\n      this.game.title.open();\n    }\n  };\n\n  this.next = function () {\n    var nextScreen = this.proto();\n\n    if (nextScreen) {\n      this.screen.leave();\n      nextScreen.open();\n      this.game.audio.sfx.button.play();\n    }\n\n    return nextScreen;\n  };\n\n  this.complete = function () {\n    this.game.audio.sfx.play('screenComplete');\n    return this.proto();\n  };\n\n  this.startGame = function () {\n    if (!this.hasClass('FINISHED')) return;\n    this.game.addClass('STARTED');\n    this.delay('2.5s', function () {\n      this.next();\n    });\n  };\n\n  this.on('animationend', function (_e) {\n    if (!this.ball.is(_e.target)) return;\n    this.addClass('FINISHED');\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test() {\n  if (window.parent === window) {\n    window.location.href = 'https://www.changemyworldnow.com/';\n  } else {\n    document.domain = 'changemyworldnow.com';\n  }\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}