{"version":3,"sources":["webpack:///drought-out/ai.js","webpack:///webpack/bootstrap 09045b188d40cedeb258","webpack:///./drought-out/source/js/components/audio-sequence/behavior.js","webpack:///./drought-out/source/js/components/background/behavior.js","webpack:///./drought-out/source/js/components/reveal/behavior.js","webpack:///./drought-out/source/js/components/screen-basic/behavior.js","webpack:///./drought-out/source/js/components/screen-quit/behavior.js","webpack:///./drought-out/source/js/components/selectable-canvas-move/behavior.js","webpack:///./drought-out/source/js/components/selectable-reveal/behavior.js","webpack:///./drought-out/source/js/components/selectable/behavior.js","webpack:///./drought-out/source/js/components/title/behavior.js","webpack:///./drought-out/source/js/config.game.js","webpack:///./drought-out/source/js/index.js","webpack:///./shared/js/google-analytics.js","webpack:///./shared/js/screen-ios-splash.js","webpack:///./shared/js/test-platform-integration.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","pl","game","component","sounds","this","on","_event","self","is","target","audio","find","next","i","play","start","length","characters","handleProperty","bg","_node","_name","_value","img","Image","src","push","$","css","item","_id","vo","index","select","eq","voiceOver","shouldProceed","state","STATE","VOICE_OVER","demoMode","nextScreen","buttonSound","proto","util","resolvePath","leave","open","prev","prevScreen","screen","close","fxSound","sfx","startAudio","hasOwnProperty","entities","stop","timeoutID","clearTimeout","isReady","targetScope","properties","gameClass","addClass","requiredQueue","complete","removeClass","has","OPEN","button","LEAVE","pause","resume","init","okay","exit","cancel","canvas","Item","gameLoop","scale","frame","_scope","items","forEach","_item","y","height","position","speed","margin","size","Basic","extend","image","$image","left","selected","_image","Point","create","backgroundSize","to","render","drawImage","getAttribute","naturalHeight","width","x","hover","naturalWidth","unhover","deselect","_type","ctx","node","content","_canvas","_size","_scale","getContext","indexOf","onmousemove","_e","offset","cursor","transformScale","$els","absolutePosition","set","zoom","dec","math","reverseItems","every","isImageTarget","resize","clear","clearRect","draw","_obj","commands","cmd","apply","player","buffer","bctx","isRunning","document","createElement","canvasSize","bin","map","_i","toArray","slice","reverse","Size","viewport","onResize","bind","eachFrame","onEachFrame","_point","pixel","getImageData","fillStyle","fillRect","data","behavior","_cursor","returnValue","event","message","behaviorTarget","respond","stateMethod","selectState","Number","isInteger","reveal","entity","shouldSelect","_$target","hasClass","HIGHLIGHTED","_target","$target","closest","config","screenSelector","componentDirectory","dimensions","ratio","shouldLoadComponentStyles","selectScreen","attr","incorrect","highlight","selectable","unhighlight","iosSplash","READY","splash","yellow","green","red","openDoor","isComplete","quit","delay","eventCategory","findOwn","scope","join","ga","s","o","g","r","a","q","arguments","l","Date","getElementsByTagName","async","parentNode","insertBefore","window","title","loader","ball","startGame","test","_env","parent","location","href","domain"],"mappings":"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","file":"drought-out/ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(11);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tpl.game.component('audio-sequence', function () {\n\t\tvar sounds;\n\t\n\t\tthis.on('ready', function (_event) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\tsounds = this.audio.find('.audio');\n\t\n\t\t\tthis.audio.on('ended', function (_event) {\n\t\t\t\tvar next = sounds[self.i++];\n\t\t\t\tif (next) next.play();\n\t\t\t});\n\t\t});\n\t\n\t\tthis.start = function () {\n\t\t\tthis.i = 1;\n\t\t\tif (sounds.length) sounds.play();\n\t\t};\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tpl.game.component('background', function () {\n\t\tvar characters;\n\t\t/**\n\t  * Nodes, including the node of this screen, with a\n\t  * attribute of pl-bg will get a background-image style\n\t  * and the resource preloaded and collected for watching.\n\t  */\n\t\tthis.handleProperty({\n\t\t\tbg: function bg(_node, _name, _value) {\n\t\t\t\tvar img = new Image();\n\t\n\t\t\t\tif (!characters) characters = [];\n\t\n\t\t\t\timg.src = _value;\n\t\t\t\tcharacters.push(img);\n\t\t\t\t$(_node).css('background-image', 'url(' + _value + ')');\n\t\t\t}\n\t\t});\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tpl.game.component('reveal', function () {\n\t\n\t\tthis.item = function (_id) {\n\t\t\tvar vo, index;\n\t\n\t\t\tif (typeof _id === 'number') {\n\t\t\t\tthis.select(this.find('li').eq(_id));\n\t\t\t\tthis.audio.voiceOver[_id].play();\n\t\t\t} else if (typeof _id === 'string') {\n\t\t\t\tif (this[_id]) {\n\t\t\t\t\tthis.select(this[_id]);\n\t\n\t\t\t\t\tif (this.audio) {\n\t\t\t\t\t\tindex = this[_id].index();\n\t\t\t\t\t\tvo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\n\t\t\t\t\t\tif (vo) vo.play();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tthis.start = function () {};\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-basic', function () {\n\t\n\t\tthis.shouldProceed = function () {\n\t\t\treturn !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen, buttonSound;\n\t\n\t\t\tnextScreen = this.proto();\n\t\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tif (buttonSound) buttonSound.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.prev = function () {\n\t\t\tvar prevScreen, buttonSound;\n\t\n\t\t\tprevScreen = this.proto();\n\t\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\t\n\t\t\tif (prevScreen) {\n\t\t\t\tthis.screen.close();\n\t\t\t\tprevScreen.open();\n\t\t\t\tif (buttonSound) buttonSound.play();\n\t\t\t}\n\t\n\t\t\treturn prevScreen;\n\t\t};\n\t\n\t\tthis.start = function () {\n\t\t\tvar fxSound = this.audio && this.audio.sfx.start;\n\t\n\t\t\tthis.startAudio();\n\t\n\t\t\tif (fxSound) fxSound.play();\n\t\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\t\n\t\t\treturn this;\n\t\t};\n\t\n\t\tthis.stop = function () {\n\t\t\tif (this.timeoutID) {\n\t\t\t\tclearTimeout(this.timeoutID);\n\t\t\t}\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.on('ui-open', function (_event) {\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.start();\n\t\t\t}\n\t\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.addClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (!this.requiredQueue || this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length) {\n\t\t\t\tthis.complete();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-leave', function (_event) {\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-close', function (_event) {\n\t\t\tif (this.properties.gameClass) {\n\t\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t\t}\n\t\n\t\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.complete = function () {\n\t\t\tvar audio;\n\t\n\t\t\taudio = this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio;\n\t\n\t\t\taudio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.on('ready', function () {\n\t\t\tif (this.state(this.STATE.OPEN)) this.start();\n\t\t});\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-quit', function () {\n\t\n\t\tthis.buttonSound = function () {\n\t\t\tif (this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t\t};\n\t\n\t\t// TODO: Make an automated way to handle this\n\t\tthis.on('transitionend', function (_event) {\n\t\t\tif (this.state(this.STATE.LEAVE)) {\n\t\t\t\tthis.addClass('LEAVE-END');\n\t\t\t}\n\t\t});\n\t\n\t\tthis.on('ui-open', function (_event) {\n\t\t\tthis.buttonSound();\n\t\t\tthis.game.addClass('QUIT-SCREEN');\n\t\t\tthis.removeClass('LEAVE-END');\n\t\t\tthis.game.pause(true);\n\t\t});\n\t\n\t\tthis.on('ui-leave', function () {\n\t\t\tthis.game.removeClass('QUIT-SCREEN');\n\t\t\tthis.game.resume();\n\t\t});\n\t\n\t\tthis.init = function () {\n\t\t\tthis.addClass('LEAVE LEAVE-END');\n\t\t};\n\t\n\t\tthis.okay = function () {\n\t\t\tthis.buttonSound();\n\t\t\tthis.game.exit();\n\t\t};\n\t\n\t\tthis.cancel = function () {\n\t\t\tthis.buttonSound();\n\t\t\tthis.leave();\n\t\t};\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-canvas-move', function () {\n\t\tvar canvas,\n\t\t    Item,\n\t\t    gameLoop,\n\t\t    scale,\n\t\t    self = this;\n\t\n\t\tgameLoop = {\n\t\t\t// main game loop\n\t\t\tframe: function frame(_scope) {\n\t\t\t\t// transition items one px on each frame\n\t\t\t\t_scope.items.forEach(function (_item) {\n\t\t\t\t\tvar y, height;\n\t\t\t\t\t_item.position.y -= _item.speed;\n\t\n\t\t\t\t\ty = _item.position.y + _item.margin;\n\t\t\t\t\theight = _item.size.height;\n\t\n\t\t\t\t\tif (y + height < 0) _item.position.y = _scope.height() * 1.1;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\tItem = pl.Basic.extend(function () {\n\t\t\tthis.position = null;\n\t\t\tthis.size = null;\n\t\t\tthis.margin = 0;\n\t\t\tthis.image = null;\n\t\t\tthis.$image = null;\n\t\t\tthis.left = 0;\n\t\t\tthis.selected = false;\n\t\n\t\t\tthis.init = function (_image) {\n\t\t\t\tthis.$image = $(_image);\n\t\t\t\tthis.image = _image;\n\t\n\t\t\t\tthis.position = pl.Point.create();\n\t\t\t\tthis.backgroundSize = [200, 200].to('size');\n\t\t\t\tthis.size = [360, 460].to('size');\n\t\n\t\t\t\treturn this;\n\t\t\t};\n\t\n\t\t\tthis.render = function () {\n\t\t\t\treturn {\n\t\t\t\t\tdrawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tthis.hover = function () {\n\t\t\t\tif (!this.selected) this.left = this.image.naturalWidth / 3;\n\t\t\t};\n\t\n\t\t\tthis.unhover = function () {\n\t\t\t\tif (!this.selected) this.left = 0;\n\t\t\t};\n\t\n\t\t\tthis.select = function () {\n\t\t\t\tthis.selected = true;\n\t\t\t\tthis.left = this.image.naturalWidth * 2 / 3;\n\t\t\t};\n\t\n\t\t\tthis.deselect = function () {\n\t\t\t\tthis.selected = false;\n\t\t\t\tthis.left = 0;\n\t\t\t};\n\t\n\t\t\tthis.is = function (_type) {\n\t\t\t\treturn $(this.image).is(_type);\n\t\t\t};\n\t\n\t\t\tthis.id = function () {\n\t\t\t\treturn this.$image.id();\n\t\t\t};\n\t\t});\n\t\n\t\tcanvas = {\n\t\n\t\t\tctx: null,\n\t\t\tnode: null,\n\t\t\tcontent: null,\n\t\t\tscale: 1,\n\t\n\t\t\tinit: function init(_canvas, _size, _scale) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\t\n\t\t\t\tthis.node = _canvas;\n\t\t\t\tthis.ctx = _canvas.getContext('2d');\n\t\t\t\tthis.scale = _scale || 1;\n\t\n\t\t\t\tif (! ~size.indexOf(void 0)) {\n\t\t\t\t\t_canvas.width = size.width;\n\t\t\t\t\t_canvas.height = size.height;\n\t\t\t\t}\n\t\n\t\t\t\tthis.ctx.scale(_scale, _scale);\n\t\n\t\t\t\tthis.node.onmousemove = function (_e) {\n\t\t\t\t\tvar offset, cursor, scale;\n\t\n\t\t\t\t\tscale = self.game.transformScale().x;\n\t\t\t\t\toffset = self.$els.absolutePosition().scale(1 / scale);\n\t\t\t\t\tcursor = pl.Point.create().set(_e.x, _e.y).scale(scale / self.game.zoom).dec(offset).math('floor');\n\t\n\t\t\t\t\tself.reverseItems.every(function (_item) {\n\t\t\t\t\t\tif (self.isImageTarget(_item, cursor)) {\n\t\t\t\t\t\t\t_item.hover();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t_item.unhover();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t},\n\t\n\t\t\tresize: function resize(_size, _scale) {\n\t\t\t\tvar size;\n\t\n\t\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\t\n\t\t\t\tthis.node.width = size.width;\n\t\t\t\tthis.node.height = size.height;\n\t\t\t\tthis.scale = _scale || 1;\n\t\n\t\t\t\tthis.ctx.scale(_scale, _scale);\n\t\t\t},\n\t\n\t\t\tclear: function clear() {\n\t\t\t\tthis.ctx.clearRect(0, 0, this.node.width / this.scale, this.node.height / this.scale);\n\t\t\t},\n\t\n\t\t\tdraw: function draw(_obj) {\n\t\t\t\tvar commands, cmd;\n\t\n\t\t\t\tcommands = _obj.render();\n\t\n\t\t\t\tfor (cmd in commands) {\n\t\t\t\t\tif (typeof this.ctx[cmd] !== 'function') continue;\n\t\t\t\t\tthis.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tthis.items = null;\n\t\tthis.player = null;\n\t\tthis.canvas = null;\n\t\tthis.buffer = null;\n\t\tthis.bctx = null;\n\t\tthis.isRunning = false;\n\t\n\t\tthis.init = function () {\n\t\t\tthis.buffer = document.createElement('canvas');\n\t\t\tthis.bctx = this.buffer.getContext('2d');\n\t\t};\n\t\n\t\t// Handle when the component scope is ready.\n\t\tthis.on('ready', function (_event) {\n\t\t\tvar canvasSize, width, height;\n\t\n\t\t\t// Do not handle child scopes becoming ready.\n\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\tthis.buffer.width = width = this.width();\n\t\t\tthis.buffer.height = height = this.height();\n\t\n\t\t\tthis.items = this.bin.find('img').map(function (_i, _node) {\n\t\t\t\tvar item = Item.create().init(_node);\n\t\n\t\t\t\titem.position.x = 40 + 120 * _i % (width - 280);\n\t\t\t\titem.position.y = height + 250 * _i % (2 * height);\n\t\t\t\titem.speed = (_i * 5 % 3 + 2) / 2;\n\t\n\t\t\t\treturn item;\n\t\t\t}).toArray();\n\t\n\t\t\tthis.reverseItems = this.items.slice().reverse();\n\t\n\t\t\tcanvasSize = pl.Size.create().set(width, height);\n\t\n\t\t\tcanvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\t\n\t\t\tthis.game.viewport.onResize(this.game.bind(function () {\n\t\t\t\tcanvas.resize(canvasSize, this.zoom);\n\t\t\t}));\n\t\t});\n\t\n\t\tthis.start = function () {\n\t\t\tthis.isRunning = true;\n\t\t\tthis.eachFrame(this.onEachFrame);\n\t\n\t\t\tthis.items.forEach(function (_item) {\n\t\t\t\t_item.deselect();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.stop = function () {\n\t\t\tthis.eachFrame(this.onEachFrame, false);\n\t\t};\n\t\n\t\tthis.onEachFrame = function () {\n\t\t\tif (!this.isRunning) return;\n\t\n\t\t\tcanvas.clear();\n\t\n\t\t\tgameLoop.frame(this);\n\t\n\t\t\tthis.items.forEach(function (_item) {\n\t\t\t\tcanvas.draw(_item);\n\t\t\t});\n\t\t};\n\t\n\t\tthis.isImageTarget = function (_item, _point) {\n\t\t\tthis.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n\t\t\tthis.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n\t\t\tpixel = this.bctx.getImageData(_point.x, _point.y, 1, 1);\n\t\n\t\t\tthis.bctx.fillStyle = 'white';\n\t\t\tthis.bctx.fillRect(_point.x, _point.y, 5, 5);\n\t\n\t\t\t// opaque pixel\n\t\t\treturn pixel.data[3] > 0;\n\t\t};\n\t\n\t\tthis.behavior('select', function (_cursor) {\n\t\t\tvar offset,\n\t\t\t    cursor,\n\t\t\t    scale,\n\t\t\t    returnValue = false;\n\t\n\t\t\tscale = this.game.transformScale().x;\n\t\t\toffset = this.$els.absolutePosition().scale(1 / scale);\n\t\t\tcursor = this.event.cursor.scale(scale / this.game.zoom).dec(offset).math('floor');\n\t\n\t\t\tthis.reverseItems.every(function (_item) {\n\t\t\t\tif (self.isImageTarget(_item, cursor)) {\n\t\t\t\t\t_item.select();\n\t\t\t\t\treturnValue = {\n\t\t\t\t\t\tmessage: _item.$image.id(),\n\t\t\t\t\t\tbehaviorTarget: _item.$image\n\t\t\t\t\t};\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\n\t\t\t\treturn true;\n\t\t\t});\n\t\n\t\t\treturn returnValue;\n\t\t});\n\t});\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable-reveal', function () {\n\t\n\t\tthis.respond('select', function (_event) {\n\t\t\tvar index, stateMethod;\n\t\n\t\t\tindex = _event.message;\n\t\t\tstateMethod = this.properties.selectState || 'select';\n\t\n\t\t\tif (Number.isInteger(index) && ~index) {\n\t\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\t\tthis.reveal.item(index);\n\t\t\t}\n\t\t});\n\t\n\t\tthis.entity('selectable', function () {\n\t\n\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t}\n\t\n\t\t\t\treturn false;\n\t\t\t};\n\t\t});\n\t});\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tpl.game.component('selectable', function () {\n\t\n\t\tthis.behavior('select', function (_target) {\n\t\t\tvar $target, message;\n\t\n\t\t\tif (this.event) {\n\t\t\t\t$target = $(this.event.target).closest('li');\n\t\t\t\tmessage = $target.id() || $target.index();\n\t\n\t\t\t\tif (this.shouldSelect($target) !== false) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tbehaviorTarget: $target\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.proto(_target);\n\t\t\t}\n\t\n\t\t\treturn false;\n\t\t});\n\t\n\t\tthis.shouldSelect = function (_target) {\n\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t};\n\t\n\t\tthis.start = function () {};\n\t});\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tpl.game.component('title', function () {});\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tpl.game.config({\n\t\tscreenSelector: '.screen',\n\t\tcomponentDirectory: 'components/',\n\t\tdimensions: {\n\t\t\twidth: 960,\n\t\t\tratio: 16 / 9\n\t\t},\n\t\tshouldLoadComponentStyles: false\n\t});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Index script\n\t * @module\n\t */\n\t\n\t__webpack_require__(10);\n\t\n\t__webpack_require__(13);\n\t\n\t__webpack_require__(4);\n\t\n\t__webpack_require__(5);\n\t\n\t__webpack_require__(2);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(6);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(1);\n\t\n\t__webpack_require__(14);\n\t\n\t__webpack_require__(12);\n\t\n\tpl.game('drought-out', function () {\n\t\n\t\tvar selectScreen = function selectScreen() {\n\t\t\tthis.respond('select', function (_event) {\n\t\t\t\tvar vo;\n\t\n\t\t\t\tif (!_event.behaviorTarget.is('li')) return;\n\t\n\t\t\t\tif (_event.behaviorTarget.attr('pl-correct') == null) {\n\t\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\t\tvo = this.selectable.audio.voiceOver[_event.message];\n\t\t\t\t}\n\t\n\t\t\t\tif (vo) vo.play();\n\t\t\t});\n\t\n\t\t\tthis.on('ui-open', function (_e) {\n\t\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\t\tthis.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t\t\t});\n\t\t};\n\t\n\t\tthis.screen('title', function () {\n\t\t\tthis.on('ready', function (_event) {\n\t\t\t\tif (!this.is(_event.target)) return;\n\t\n\t\t\t\tif (this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t\t\t});\n\t\n\t\t\tthis.entity('cacti', function () {\n\t\t\t\tthis.on('animationend', function (_e) {\n\t\t\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\t\t\tthis.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('think', selectScreen);\n\t\n\t\tthis.screen('balloons', function () {\n\t\t\tthis.respond('select', function (_event) {\n\t\t\t\tvar vo, sfx;\n\t\n\t\t\t\tif (_event.behaviorTarget.attr('pl-incorrect') != null) {\n\t\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\t\tvo = this.audio.voiceOver[_event.message];\n\t\t\t\t}\n\t\n\t\t\t\tswitch (_event.message) {\n\t\t\t\t\tcase \"bathing\":\n\t\t\t\t\tcase \"drinking\":\n\t\t\t\t\tcase \"canoeing\":\n\t\t\t\t\tcase \"factories\":\n\t\t\t\t\tcase \"lawns\":\n\t\t\t\t\tcase \"flowers\":\n\t\t\t\t\tcase \"animalFeed\":\n\t\t\t\t\t\tsfx = this.audio.sfx.yellow;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"washingDishes\":\n\t\t\t\t\tcase \"swimming\":\n\t\t\t\t\tcase \"brushingTeeth\":\n\t\t\t\t\tcase \"electricity\":\n\t\t\t\t\t\tsfx = this.audio.sfx.green;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"cooking\":\n\t\t\t\t\tcase \"rafting\":\n\t\t\t\t\tcase \"waterSlides\":\n\t\t\t\t\tcase \"growingFood\":\n\t\t\t\t\t\tsfx = this.audio.sfx.red;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\tif (vo) vo.play();\n\t\t\t\tif (sfx) sfx.play();\n\t\t\t});\n\t\n\t\t\tthis.on('ui-open', function (_e) {\n\t\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\t\tthis.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t\t\t});\n\t\n\t\t\tthis.startAudio = function () {};\n\t\t});\n\t\n\t\tthis.screen('what-can-we-do', selectScreen);\n\t\n\t\tthis.screen('shower', function () {\n\t\t\tthis.respond('select', function (_event) {\n\t\t\t\tvar vo;\n\t\n\t\t\t\tif (_event.behaviorTarget.attr('pl-correct') == null) {\n\t\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\t\tvo = this.selectable.audio.voiceOver[_event.message];\n\t\t\t\t}\n\t\n\t\t\t\tif (vo) vo.play();\n\t\t\t});\n\t\n\t\t\tthis.entity('selectable', function () {\n\t\n\t\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t\t});\n\t\n\t\t\tthis.on('ui-open', function (_e) {\n\t\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\t\tthis.unhighlight(this.find('.' + this.STATE.HIGHLIGHTED));\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('conserve', function () {\n\t\t\tvar item = 0;\n\t\n\t\t\tthis.openDoor = function () {\n\t\t\t\tif (this.shouldProceed()) {\n\t\t\t\t\tthis.select();\n\t\t\t\t\tthis.reveal.item(item);\n\t\t\t\t\tthis.audio.sfx.open.play();\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.on('ready', function (_e) {\n\t\t\t\tvar self = this;\n\t\n\t\t\t\tif (!(this.is(_e.target) && this.reveal.audio)) return;\n\t\n\t\t\t\tthis.length = this.reveal.find('li').length;\n\t\n\t\t\t\tthis.reveal.audio.voiceOver.on('ended', function (audio) {\n\t\t\t\t\tself.audio.sfx.close.play();\n\t\t\t\t\tself.deselect();\n\t\t\t\t\titem = (item + 1) % self.length;\n\t\t\t\t});\n\t\t\t});\n\t\n\t\t\tthis.on('ui-open', function (_e) {\n\t\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\t\tif (this.isComplete) item = 0;\n\t\t\t});\n\t\t});\n\t\n\t\tthis.screen('flip', function () {\n\t\t\tthis.next = function () {\n\t\t\t\tthis.game.quit.okay();\n\t\t\t};\n\t\n\t\t\tthis.on('ui-open', function () {\n\t\t\t\tif (this.audio && this.audio.sfx) {\n\t\t\t\t\tthis.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\n\t\tthis.exit = function () {\n\t\t\tvar screen, eventCategory;\n\t\n\t\t\tscreen = this.findOwn(pl.game.config('screenSelector') + '.OPEN:not(#quit)').scope();\n\t\t\teventCategory = ['game', this.id(), screen.id() + '(' + (screen.index() + 1) + ')'].join(' ');\n\t\n\t\t\tga('send', 'event', eventCategory, 'quit');\n\t\n\t\t\treturn this.proto();\n\t\t};\n\t});\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t(function (i, s, o, g, r, a, m) {\n\t  i['GoogleAnalyticsObject'] = r;i[r] = i[r] || function () {\n\t    (i[r].q = i[r].q || []).push(arguments);\n\t  }, i[r].l = 1 * new Date();a = s.createElement(o), m = s.getElementsByTagName(o)[0];a.async = 1;a.src = g;m.parentNode.insertBefore(a, m);\n\t})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\t\n\tga('create', 'UA-26000499-1', 'auto');\n\tga('send', 'pageview');\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tpl.game.component('screen-ios-splash', function () {\n\t\n\t\tthis.on('ready', function (_e) {\n\t\t\tif (!this.is(_e.target)) return;\n\t\n\t\t\tif (this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\t\tthis.splash();\n\t\t\t}\n\t\t});\n\t\n\t\tthis.splash = function () {\n\t\t\tthis.close(this.game.loader);\n\t\n\t\t\tif (this.game.hasClass('iOS')) {\n\t\t\t\tthis.open();\n\t\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t\t} else {\n\t\t\t\tthis.game.title.open();\n\t\t\t}\n\t\t};\n\t\n\t\tthis.next = function () {\n\t\t\tvar nextScreen = this.proto();\n\t\n\t\t\tif (nextScreen) {\n\t\t\t\tthis.screen.leave();\n\t\t\t\tnextScreen.open();\n\t\t\t\tthis.game.audio.sfx.button.play();\n\t\t\t}\n\t\n\t\t\treturn nextScreen;\n\t\t};\n\t\n\t\tthis.complete = function () {\n\t\t\tthis.game.audio.sfx.play('screenComplete');\n\t\t\treturn this.proto();\n\t\t};\n\t\n\t\tthis.startGame = function () {\n\t\t\tif (!this.hasClass('FINISHED')) return;\n\t\t\tthis.game.addClass('STARTED');\n\t\t\tthis.delay('2.5s', function () {\n\t\t\t\tthis.next();\n\t\t\t});\n\t\t};\n\t\n\t\tthis.on('animationend', function (_e) {\n\t\t\tif (!this.ball.is(_e.target)) return;\n\t\t\tthis.addClass('FINISHED');\n\t\t});\n\t});\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t(function test(_env) {\n\t\tif (window.parent === window) {\n\t\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t\t} else {\n\t\t\tdocument.domain = 'changemyworldnow.com';\n\t\t}\n\t})();\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** drought-out/ai.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 09045b188d40cedeb258\n **/","pl.game.component('audio-sequence', function () {\n\tvar sounds;\n\n\tthis.on('ready', function (_event) {\n\t\tvar self = this;\n\n\t\tif (!this.is(_event.target)) return;\n\n\t\tsounds = this.audio.find('.audio');\n\n\t\tthis.audio.on('ended', function (_event) {\n\t\t\tvar next = sounds[self.i++];\n\t\t\tif (next) next.play();\n\t\t});\n\t});\n\n\tthis.start = function() {\n\t\tthis.i = 1;\n\t\tif(sounds.length) sounds.play();\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/audio-sequence/behavior.js\n **/","pl.game.component('background', function () {\n\tvar characters;\n\t/**\n\t * Nodes, including the node of this screen, with a\n\t * attribute of pl-bg will get a background-image style\n\t * and the resource preloaded and collected for watching.\n\t */\n\tthis.handleProperty({\n\t\tbg: function (_node, _name, _value) {\n\t\t\tvar img = new Image();\n\t\t\t\n\t\t\tif (!characters) characters = [];\n\n\t\t\timg.src = _value;\n\t\t\tcharacters.push(img);\n\t\t\t$(_node).css('background-image', 'url('+_value+')');\n\t\t}\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/background/behavior.js\n **/","pl.game.component('reveal', function () {\n\n\tthis.item = function (_id) {\n\t\tvar vo, index;\n\n\t\tif (typeof _id === 'number') {\n\t\t\tthis.select(this.find('li').eq(_id));\n\t\t\tthis.audio.voiceOver[_id].play();\n\t\t}\n\t\t\t\n\t\telse if (typeof _id === 'string') {\n\t\t\tif (this[_id]) {\n\t\t\t\tthis.select(this[_id]);\n\n\t\t\t\tif (this.audio) {\n\t\t\t\t\tindex = this[_id].index();\n\t\t\t\t\tvo = this.audio.voiceOver[_id] || this.audio.voiceOver[index];\n\t\t\t\t\t\n\t\t\t\t\tif (vo) vo.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.start = function() {};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/reveal/behavior.js\n **/","pl.game.component('screen-basic', function () {\n\n\tthis.shouldProceed = function () {\n\t\treturn !this.state(this.STATE.VOICE_OVER) || this.game.demoMode;\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen, buttonSound;\n\n\t\tnextScreen = this.proto();\n\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n\t\tif (nextScreen) {\n\t\t\tthis.leave();\n\t\t\tnextScreen.open();\n\t\t\tif (buttonSound) buttonSound.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.prev = function () {\n\t\tvar prevScreen, buttonSound;\n\n\t\tprevScreen = this.proto();\n\t\tbuttonSound = pl.util.resolvePath(this, 'game.audio.sfx.button');\n\n\t\tif (prevScreen) {\n\t\t\tthis.screen.close();\n\t\t\tprevScreen.open();\n\t\t\tif (buttonSound) buttonSound.play();\n\t\t}\n\n\t\treturn prevScreen;\n\t};\n\n\tthis.start = function () {\n\t\tvar fxSound = this.audio && this.audio.sfx.start;\n\n\t\tthis.startAudio();\n\n\t\tif (fxSound) fxSound.play();\n\t\tif (this.hasOwnProperty('entities') && this.entities[0]) this.entities[0].start();\n\n\t\treturn this;\n\t};\n\n\tthis.stop = function() {\n\t\tif(this.timeoutID) {\n\t\t\tclearTimeout(this.timeoutID);\n\t\t}\n\t\treturn this.proto();\n\t};\n\n\tthis.on('ui-open', function (_event) {\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.start();\n\t\t}\n\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.addClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (!this.requiredQueue || (this.hasOwnProperty('requiredQueue') && !this.requiredQueue.length)) {\n\t\t\tthis.complete();\n\t\t}\n\t});\n\n\tthis.on('ui-leave', function (_event) {\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.stop();\n\t\t}\n\t});\n\n\tthis.on('ui-close', function (_event) {\n\t\tif(this.properties.gameClass) {\n\t\t\tthis.game.removeClass(this.properties.gameClass);\n\t\t}\n\n\t\tif (this.isReady && this === _event.targetScope) {\n\t\t\tthis.stop();\n\t\t}\n\t});\n\n\tthis.complete = function () {\n\t\tvar audio;\n\n\t\taudio = (this.audio && this.audio.has('screenComplete') ? this.audio : this.game.audio);\n\n\t\taudio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.on('ready', function () {\n\t\tif(this.state(this.STATE.OPEN)) this.start();\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-basic/behavior.js\n **/","pl.game.component('screen-quit', function () {\n\n\tthis.buttonSound = function() {\n\t\tif(this.game.audio.sfx.button) this.game.audio.sfx.button.play();\n\t}\n\n\t// TODO: Make an automated way to handle this\n\tthis.on('transitionend', function (_event) {\n\t\tif (this.state(this.STATE.LEAVE)) {\n\t\t\tthis.addClass('LEAVE-END');\t\n\t\t}\n\t});\n\n\tthis.on('ui-open', function (_event) {\n\t\tthis.buttonSound();\n\t\tthis.game.addClass('QUIT-SCREEN');\n\t\tthis.removeClass('LEAVE-END');\n\t\tthis.game.pause(true);\n\t});\n\n\tthis.on('ui-leave', function () {\n\t\tthis.game.removeClass('QUIT-SCREEN');\n\t\tthis.game.resume();\n\t});\n\n\tthis.init = function () {\n\t\tthis.addClass('LEAVE LEAVE-END');\n\t};\n\t\n\tthis.okay = function () {\n\t\tthis.buttonSound();\n\t\tthis.game.exit();\n\t};\n\n\tthis.cancel = function () {\n\t\tthis.buttonSound();\n\t\tthis.leave();\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/screen-quit/behavior.js\n **/","pl.game.component('selectable-canvas-move', function () {\n\tvar canvas, Item, gameLoop, scale, self = this;\n\n\tgameLoop = {\n\t\t// main game loop\n\t\tframe: function (_scope) {\n\t\t\t// transition items one px on each frame\n\t\t\t_scope.items.forEach((function (_item) {\n\t\t\t\tvar y, height;\n\t\t\t\t_item.position.y -= _item.speed;\n\n\t\t\t\ty = _item.position.y + _item.margin;\n\t\t\t\theight = _item.size.height;\n\n\t\t\t\tif (y + height < 0) _item.position.y = _scope.height() * 1.1;\n\t\t\t}));\n\t\t},\n\t};\n\n\tItem = pl.Basic.extend(function () {\n\t\tthis.position = null;\n\t\tthis.size = null;\n\t\tthis.margin = 0;\n\t\tthis.image = null;\n\t\tthis.$image = null;\n\t\tthis.left = 0;\n\t\tthis.selected = false;\n\n\t\tthis.init = function (_image) {\n\t\t\tthis.$image = $(_image);\n\t\t\tthis.image = _image;\n\n\t\t\tthis.position = pl.Point.create();\n\t\t\tthis.backgroundSize = [200, 200].to('size');\n\t\t\tthis.size = [360, 460].to('size');\n \n\t\t\treturn this;\n\t\t};\n\n\t\tthis.render = function () {\n\t\t\treturn {\n\t\t\t\tdrawImage: [this.image, this.left, this.image.getAttribute('top') * this.image.naturalHeight / 15, this.size.width, this.size.height, this.position.x, this.position.y, this.backgroundSize.width, this.backgroundSize.height]\n\t\t\t};\n\t\t};\n\n\t\tthis.hover = function() {\n\t\t\tif(!this.selected) this.left = this.image.naturalWidth / 3;\n\t\t};\n\n\t\tthis.unhover = function() {\n\t\t\tif(!this.selected) this.left = 0;\n\t\t};\n\n\t\tthis.select = function() {\n\t\t\tthis.selected = true;\n\t\t\tthis.left = this.image.naturalWidth * 2 / 3;\n\t\t};\n\n\t\tthis.deselect = function() {\n\t\t\tthis.selected = false;\n\t\t\tthis.left = 0;\n\t\t};\n\n\t\tthis.is = function (_type) {\n\t\t\treturn $(this.image).is(_type);\n\t\t};\n\n\t\tthis.id = function () {\n\t\t\treturn this.$image.id();\n\t\t}\n\t});\n\n\tcanvas = {\n\t\t\n\t\tctx: null,\n\t\tnode: null,\n\t\tcontent: null,\n\t\tscale: 1,\n\n\t\tinit: function (_canvas, _size, _scale) {\n\t\t\tvar size;\n\n\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\n\t\t\tthis.node = _canvas;\n\t\t\tthis.ctx = _canvas.getContext('2d');\n\t\t\tthis.scale = _scale || 1;\n\n\t\t\tif (!~size.indexOf(void 0)) {\n\t\t\t\t_canvas.width = size.width;\n\t\t\t\t_canvas.height = size.height;\n\t\t\t}\n\n\t\t\tthis.ctx.scale(_scale, _scale);\n\n\t\t\tthis.node.onmousemove = function(_e) {\n\t\t\t\tvar offset, cursor, scale;\n\n\t\t\t\tscale = self.game.transformScale().x;\n\t\t\t\toffset = self.$els.absolutePosition().scale(1/scale);\n\t\t\t\tcursor = pl.Point.create().set(_e.x,_e.y)\n\t\t\t\t\t.scale(scale/self.game.zoom)\n\t\t\t\t\t.dec(offset)\n\t\t\t\t\t.math('floor');\n\n\t\t\t\tself.reverseItems.every(function (_item) {\n\t\t\t\t\tif (self.isImageTarget(_item, cursor)) {\n\t\t\t\t\t\t_item.hover();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t_item.unhover();\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\n\t\tresize: function (_size, _scale) {\n\t\t\tvar size;\n\n\t\t\tsize = _scale ? _size.scale(_scale) : _size;\n\n\t\t\tthis.node.width = size.width;\n\t\t\tthis.node.height = size.height;\n\t\t\tthis.scale = _scale || 1;\n\n\t\t\tthis.ctx.scale(_scale, _scale);\n\t\t},\n\n\t\tclear: function () {\n\t\t\tthis.ctx.clearRect(0,0, this.node.width/this.scale, this.node.height/this.scale);\n\t\t},\n\n\t\tdraw: function (_obj) {\n\t\t\tvar commands, cmd;\n\n\t\t\tcommands = _obj.render();\n\n\t\t\tfor (cmd in commands) {\n\t\t\t\tif (typeof this.ctx[cmd] !== 'function') continue;\n\t\t\t\tthis.ctx[cmd].apply(this.ctx, commands[cmd]);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.items = null;\n\tthis.player = null;\n\tthis.canvas = null;\n\tthis.buffer = null;\n\tthis.bctx = null;\n\tthis.isRunning = false;\n\n\tthis.init = function () {\n\t\tthis.buffer = document.createElement('canvas');\n\t\tthis.bctx = this.buffer.getContext('2d');\n\t};\n\n\t// Handle when the component scope is ready.\n\tthis.on('ready', function (_event) {\n\t\tvar canvasSize, width, height;\n\n\t\t// Do not handle child scopes becoming ready.\n\t\tif (!this.is(_event.target)) return;\n\n\t\tthis.buffer.width = width = this.width();\n\t\tthis.buffer.height = height = this.height();\n\n\t\tthis.items = this.bin.find('img')\n\t\t\t.map(function (_i, _node) {\n\t\t\t\tvar item = Item.create().init(_node);\n\n\t\t\t\titem.position.x = 40 + (120 * _i % (width - 280));\n\t\t\t\titem.position.y = height + (250 * _i % (2 * height));\n\t\t\t\titem.speed = ((_i * 5) % 3 + 2) / 2;\n\n\t\t\t\treturn item;\n\t\t\t})\n\t\t\t.toArray();\n\n\t\tthis.reverseItems = this.items.slice().reverse();\n\n\t\tcanvasSize = pl.Size\n\t\t\t.create()\n\t\t\t.set(width, height);\n\n\t\tcanvas.init(this.canvas[0], canvasSize, this.game.zoom);\n\n\t\tthis.game.viewport.onResize(this.game.bind(function () {\n\t\t\tcanvas.resize(canvasSize, this.zoom);\n\t\t}));\n\t});\n\n\tthis.start = function () {\n\t\tthis.isRunning = true;\n\t\tthis.eachFrame(this.onEachFrame);\n\n\t\tthis.items.forEach(function (_item) {\n\t\t\t_item.deselect();\n\t\t});\n\t};\n\n\tthis.stop = function () {\n\t\tthis.eachFrame(this.onEachFrame, false);\n\t};\n\n\tthis.onEachFrame = function () {\n\t\tif (!this.isRunning) return;\n\n\t\tcanvas.clear();\n\n\t\tgameLoop.frame(this);\n\n\t\tthis.items.forEach(function (_item) {\n\t\t\tcanvas.draw(_item);\n\t\t});\n\t};\n\n\tthis.isImageTarget = function (_item, _point) {\n\t\tthis.bctx.clearRect(0, 0, this.buffer.width, this.buffer.height);\n\t\tthis.bctx.drawImage(_item.image, 0, _item.image.getAttribute('top') * _item.image.naturalHeight / 15, _item.size.width, _item.size.height, _item.position.x, _item.position.y, _item.backgroundSize.width, _item.backgroundSize.height);\n\t\tpixel = this.bctx.getImageData(_point.x, _point.y, 1,1);\n\n\t\tthis.bctx.fillStyle = 'white';\n\t\tthis.bctx.fillRect(_point.x, _point.y, 5,5);\n\n\t\t// opaque pixel\n\t\treturn pixel.data[3] > 0;\n\t};\n\n\tthis.behavior('select', function (_cursor) {\n\t\tvar offset, cursor, scale, returnValue = false;\n\n\t\tscale = this.game.transformScale().x;\n\t\toffset = this.$els.absolutePosition().scale(1/scale);\n\t\tcursor = this.event.cursor\n\t\t\t.scale(scale/this.game.zoom)\n\t\t\t.dec(offset)\n\t\t\t.math('floor');\n\n\t\tthis.reverseItems.every(function (_item) {\n\t\t\tif(self.isImageTarget(_item, cursor)) {\n\t\t\t\t_item.select();\n\t\t\t\treturnValue = {\n\t\t\t\t\tmessage: _item.$image.id(),\n\t\t\t\t\tbehaviorTarget: _item.$image\n\t\t\t\t};\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\treturn returnValue;\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-canvas-move/behavior.js\n **/","pl.game.component('selectable-reveal', function () {\n\t\n\tthis.respond('select', function (_event) {\n\t\tvar index, stateMethod;\n\n\t\tindex = _event.message;\n\t\tstateMethod = this.properties.selectState || 'select';\n\n\t\tif (Number.isInteger(index) && ~index) {\n\t\t\tthis[stateMethod](_event.behaviorTarget);\n\t\t\tthis.reveal.item(index);\n\t\t}\n\t});\n\n\tthis.entity('selectable', function () {\n\t\t\n\t\tthis.shouldSelect = function (_$target) {\n\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t}\n\n\t\t\treturn false; \n\t\t};\n\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable-reveal/behavior.js\n **/","pl.game.component('selectable', function () {\n\n\tthis.behavior('select', function (_target) {\n\t\tvar $target, message;\n\n\t\tif (this.event) {\n\t\t\t$target = $(this.event.target).closest('li');\n\t\t\tmessage = $target.id() || $target.index();\n\n\t\t\tif (this.shouldSelect($target) !== false) {\n\t\t\t\treturn {\n\t\t\t\t\tmessage,\n\t\t\t\t\tbehaviorTarget: $target\n\t\t\t\t};\n\t\t\t}\t\n\t\t}\n\n\t\telse {\n\t\t\tthis.proto(_target);\n\t\t}\n\n\t\treturn false;\n\t});\n\n\tthis.shouldSelect = function (_target) {\n\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t};\n\n\tthis.start = function () {};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/selectable/behavior.js\n **/","pl.game.component('title', function () {\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/components/title/behavior.js\n **/","pl.game.config({\n\tscreenSelector: '.screen',\n\tcomponentDirectory: 'components/',\n\tdimensions: {\n\t\twidth: 960,\n\t\tratio: 16/9\n\t},\n\tshouldLoadComponentStyles: false\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/config.game.js\n **/","/**\n * Index script\n * @module\n */\nimport './config.game';\n\nimport '../../../shared/js/screen-ios-splash';\nimport './components/screen-basic/behavior';\nimport './components/screen-quit/behavior';\nimport './components/background/behavior';\nimport './components/title/behavior';\nimport './components/selectable/behavior';\nimport './components/selectable-canvas-move/behavior';\nimport './components/selectable-reveal/behavior';\nimport './components/reveal/behavior';\nimport './components/audio-sequence/behavior';\n\nimport '../../../shared/js/test-platform-integration';\nimport '../../../shared/js/google-analytics';\n\npl.game('drought-out', function () {\n\n\tvar selectScreen = function() {\n\t\tthis.respond('select', function(_event) {\n\t\t\tvar vo;\n\n\t\t\tif(!_event.behaviorTarget.is('li')) return;\n\n\t\t\tif(_event.behaviorTarget.attr('pl-correct') == null) {\n\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t} else {\n\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\tvo = this.selectable.audio.voiceOver[_event.message];\n\t\t\t}\n\n\t\t\tif(vo) vo.play();\n\t\t});\n\n\t\tthis.on('ui-open', function(_e) {\n\t\t\tif(!this.is(_e.target)) return;\n\n\t\t\tthis.unhighlight(this.find('.'+this.STATE.HIGHLIGHTED));\n\t\t});\n\t};\n\n\tthis.screen('title', function () {\n\t\tthis.on('ready', function(_event) {\n\t\t\tif(!this.is(_event.target)) return;\n\n\t\t\tif(this.game.iosSplash.state(this.STATE.READY)) this.game.iosSplash.splash();\n\t\t});\n\n\t\tthis.entity('cacti', function() {\n\t\t\tthis.on('animationend', function(_e) {\n\t\t\t\tif(!this.is(_e.target)) return;\n\n\t\t\t\tthis.complete();\n\t\t\t});\n\t\t});\n\t});\n\n\tthis.screen('think', selectScreen);\n\n\tthis.screen('balloons', function() {\n\t\tthis.respond('select', function(_event) {\n\t\t\tvar vo, sfx;\n\n\t\t\tif(_event.behaviorTarget.attr('pl-incorrect') != null) {\n\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t} else {\n\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\tvo = this.audio.voiceOver[_event.message];\n\t\t\t}\n\n\t\t\tswitch(_event.message) {\n\t\t\t\tcase \"bathing\":\n\t\t\t\tcase \"drinking\":\n\t\t\t\tcase \"canoeing\":\n\t\t\t\tcase \"factories\":\n\t\t\t\tcase \"lawns\":\n\t\t\t\tcase \"flowers\":\n\t\t\t\tcase \"animalFeed\":\n\t\t\t\t\tsfx = this.audio.sfx.yellow;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"washingDishes\":\n\t\t\t\tcase \"swimming\":\n\t\t\t\tcase \"brushingTeeth\":\n\t\t\t\tcase \"electricity\":\n\t\t\t\t\tsfx = this.audio.sfx.green;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"cooking\":\n\t\t\t\tcase \"rafting\":\n\t\t\t\tcase \"waterSlides\":\n\t\t\t\tcase \"growingFood\":\n\t\t\t\t\tsfx = this.audio.sfx.red;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(vo) vo.play();\n\t\t\tif(sfx) sfx.play();\n\t\t});\n\n\t\tthis.on('ui-open', function(_e) {\n\t\t\tif(!this.is(_e.target)) return;\n\n\t\t\tthis.unhighlight(this.find('.'+this.STATE.HIGHLIGHTED));\n\t\t});\n\n\t\tthis.startAudio = function() {};\n\t});\n\n\tthis.screen('what-can-we-do', selectScreen);\n\n\tthis.screen('shower', function() {\n\t\tthis.respond('select', function(_event) {\n\t\t\tvar vo;\n\n\t\t\tif(_event.behaviorTarget.attr('pl-correct') == null) {\n\t\t\t\tvo = this.audio.sfx.incorrect;\n\t\t\t} else {\n\t\t\t\tthis.highlight(_event.behaviorTarget);\n\t\t\t\tvo = this.selectable.audio.voiceOver[_event.message];\n\t\t\t}\n\n\t\t\tif(vo) vo.play();\n\t\t});\n\n\t\tthis.entity('selectable', function () {\n\n\t\t\tthis.shouldSelect = function (_$target) {\n\t\t\t\tif (_$target.prev().hasClass(this.STATE.HIGHLIGHTED) || _$target.index() === 0) {\n\t\t\t\t\treturn !this.screen.state(this.STATE.VOICE_OVER);\n\t\t\t\t}\n\n\t\t\t\treturn false; \n\t\t\t};\n\n\t\t});\n\n\t\tthis.on('ui-open', function(_e) {\n\t\t\tif(!this.is(_e.target)) return;\n\n\t\t\tthis.unhighlight(this.find('.'+this.STATE.HIGHLIGHTED));\n\t\t});\n\t});\n\n\tthis.screen('conserve', function() {\n\t\tvar item = 0;\n\n\t\tthis.openDoor = function() {\n\t\t\tif(this.shouldProceed()) {\n\t\t\t\tthis.select();\n\t\t\t\tthis.reveal.item(item);\n\t\t\t\tthis.audio.sfx.open.play();\n\t\t\t}\n\t\t};\n\n\t\tthis.on('ready', function(_e) {\n\t\t\tvar self = this;\n\n\t\t\tif(!(this.is(_e.target) && this.reveal.audio)) return;\n\n\t\t\tthis.length = this.reveal.find('li').length;\n\n\t\t\tthis.reveal.audio.voiceOver.on('ended', function(audio) {\n\t\t\t\tself.audio.sfx.close.play();\n\t\t\t\tself.deselect();\n\t\t\t\titem = (item + 1) % self.length;\n\t\t\t});\n\t\t});\n\n\t\tthis.on('ui-open', function(_e) {\n\t\t\tif(!this.is(_e.target)) return;\n\n\t\t\tif(this.isComplete) item = 0;\n\t\t});\n\t});\n\n\tthis.screen('flip', function () {\n\t\tthis.next = function () {\n\t\t\tthis.game.quit.okay();\n\t\t};\n\n\t\tthis.on('ui-open', function() {\n\t\t\tif(this.audio && this.audio.sfx) {\n\t\t\t\tthis.delay('9.5s', this.audio.sfx.play.bind(this.audio.sfx));\n\t\t\t}\n\t\t});\n\t});\n\n\tthis.exit = function () {\n\t\tvar screen, eventCategory;\n\n\t\tscreen = this.findOwn(pl.game.config('screenSelector')+'.OPEN:not(#quit)').scope();\n\t\teventCategory = (['game', this.id(), screen.id()+'('+(screen.index()+1)+')']).join(' ');\n\n\t\tga('send', 'event', eventCategory, 'quit');\n\n\t\treturn this.proto();\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./drought-out/source/js/index.js\n **/","(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-26000499-1', 'auto');\nga('send', 'pageview');\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/google-analytics.js\n **/","pl.game.component('screen-ios-splash', function () {\n\n\tthis.on('ready', function (_e) {\n\t\tif(!this.is(_e.target)) return;\n\n\t\tif(this.game && this.game.title.state(this.STATE.READY)) {\n\t\t\tthis.splash();\n\t\t}\n\t});\n\n\tthis.splash = function() {\n\t\tthis.close(this.game.loader);\n\n\t\tif(this.game.hasClass('iOS')) {\n\t\t\tthis.open();\n\t\t\tthis.ball.delay(0, this.ball.open);\n\t\t} else {\n\t\t\tthis.game.title.open();\n\t\t}\n\t};\n\n\tthis.next = function () {\n\t\tvar nextScreen = this.proto();\n\n\t\tif (nextScreen) {\n\t\t\tthis.screen.leave();\n\t\t\tnextScreen.open();\n\t\t\tthis.game.audio.sfx.button.play();\n\t\t}\n\n\t\treturn nextScreen;\n\t};\n\n\tthis.complete = function () {\n\t\tthis.game.audio.sfx.play('screenComplete');\n\t\treturn this.proto();\n\t};\n\n\tthis.startGame = function() {\n\t\tif(!this.hasClass('FINISHED')) return;\n\t\tthis.game.addClass('STARTED');\n\t\tthis.delay('2.5s', function() {\n\t\t\tthis.next();\n\t\t});\n\t};\n\n\tthis.on('animationend', function(_e) {\n\t\tif(!this.ball.is(_e.target)) return;\n\t\tthis.addClass('FINISHED');\n\t});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/screen-ios-splash.js\n **/","(function test (_env) {\n\tif (window.parent === window) {\n\t\twindow.location.href = 'https://www.changemyworldnow.com/';\n\t} else {\n\t\tdocument.domain = 'changemyworldnow.com';\n\t}\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./shared/js/test-platform-integration.js\n **/"],"sourceRoot":""}